[
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 18,
        "title": "A known bug exists in saving inference model, will fix it soon",
        "body": "When saving inference model of BERT after fine-tuning, there is a bug that the model is not saved completely. It is a known bug that will be fixed soon in the forthcoming Paddle Fluid 1.3.1 ",
        "state": "closed",
        "user": "kuke",
        "closed_by": "kuke",
        "created_at": "2019-03-16T03:49:52+00:00",
        "updated_at": "2019-03-16T04:29:20+00:00",
        "closed_at": "2019-03-16T04:29:20+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 21,
        "title": "neglect、、",
        "body": "",
        "state": "closed",
        "user": "JianboTang",
        "closed_by": "JianboTang",
        "created_at": "2019-03-16T06:36:33+00:00",
        "updated_at": "2019-03-16T06:40:19+00:00",
        "closed_at": "2019-03-16T06:40:19+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 25,
        "title": "请问：是训练数据导致了效果提升还是所用模型及方法，有相关论文或 ablation experiments 结果吗？",
        "body": "如题。",
        "state": "closed",
        "user": "Das-Boot",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-16T16:30:22+00:00",
        "updated_at": "2020-05-28T12:52:43+00:00",
        "closed_at": "2020-05-28T12:52:43+00:00",
        "comments_count": [
            "bfjia1",
            "Das-Boot",
            "vincehxb",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 22,
        "title": "Integrate LASER/FastBPE",
        "body": "Please add Facebook [LASER](https://github.com/facebookresearch/LASER), Language-Agnostic SEntence Representations.\r\nIn my opinion it is more versatile than Google's BERT. More for the use of [FastBPE](https://github.com/glample/fastBPE), the fastest implementation of Byte Pair Encoding in C++ at moment, instead of WordPiece.",
        "state": "closed",
        "user": "loretoparisi",
        "closed_by": "zhanghan1992",
        "created_at": "2019-03-16T09:22:13+00:00",
        "updated_at": "2019-06-11T08:17:27+00:00",
        "closed_at": "2019-06-11T07:16:36+00:00",
        "comments_count": [
            "loretoparisi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 24,
        "title": "8g内存-cpu运行，跑情感分类的训练阶段总是奔溃",
        "body": "",
        "state": "closed",
        "user": "Inspiring26",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-16T13:41:40+00:00",
        "updated_at": "2019-03-19T13:08:10+00:00",
        "closed_at": "2019-03-19T13:08:10+00:00",
        "comments_count": [
            "Inspiring26",
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 17,
        "title": ".",
        "body": "",
        "state": "closed",
        "user": "huchinlp",
        "closed_by": "huchinlp",
        "created_at": "2019-03-16T02:57:56+00:00",
        "updated_at": "2019-04-23T08:24:22+00:00",
        "closed_at": "2019-04-23T08:24:22+00:00",
        "comments_count": [
            "IrvingBei",
            "windar427"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 19,
        "title": "相较于BERT与GPT2.0来说有哪些结构上的变化呢",
        "body": "",
        "state": "closed",
        "user": "terrifyzhao",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-16T06:07:13+00:00",
        "updated_at": "2020-05-28T13:52:39+00:00",
        "closed_at": "2020-05-28T13:52:39+00:00",
        "comments_count": [
            "loretoparisi",
            "bfjia1",
            "dgai91",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 4,
        "title": "BERT模型train.py估算memory问题",
        "body": "![image](https://user-images.githubusercontent.com/7981476/53866060-9c34fb00-402b-11e9-8c34-280a2cefaf59.png)\r\nBERT模型，发现在估算memory use的时候，batch_size做了处理，为什么要这样做呢？我理解这两者似乎不相关？",
        "state": "closed",
        "user": "joshuia",
        "closed_by": "kuke",
        "created_at": "2019-03-06T08:19:57+00:00",
        "updated_at": "2019-03-06T14:34:53+00:00",
        "closed_at": "2019-03-06T14:34:53+00:00",
        "comments_count": [
            "kuke"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 23,
        "title": "Run environment",
        "body": "具体的运行环境能够介绍吗？",
        "state": "closed",
        "user": "cloudXia777",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-16T13:10:47+00:00",
        "updated_at": "2019-03-19T13:18:00+00:00",
        "closed_at": "2019-03-19T13:10:35+00:00",
        "comments_count": [
            "tianxin1860",
            "cloudXia777"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 29,
        "title": "使用预处理的数据和模型，出现“Segmentation Fault”?这个是什么问题？",
        "body": "",
        "state": "closed",
        "user": "tcxia",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-18T01:39:40+00:00",
        "updated_at": "2020-05-28T13:52:37+00:00",
        "closed_at": "2020-05-28T13:52:37+00:00",
        "comments_count": [
            "tianxin1860",
            "shuying136",
            "tcxia",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 32,
        "title": "Question about dbqa dataset",
        "body": "I am wondering if you regard  dbqa dataset as a classification dataset? Did you do anything else?\r\n",
        "state": "closed",
        "user": "Embedding",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-18T05:33:24+00:00",
        "updated_at": "2019-03-19T14:24:44+00:00",
        "closed_at": "2019-03-19T14:24:44+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 30,
        "title": "ImportError: No module named paddle.fluid",
        "body": "执行bash script/pretrain.sh提示：\r\nImportError: No module named paddle.fluid\r\n\r\n但单独使用 python3 进入python解释器，然后使用import paddle.fluid并没有报这个错",
        "state": "closed",
        "user": "Zengpr",
        "closed_by": "Zengpr",
        "created_at": "2019-03-18T03:17:47+00:00",
        "updated_at": "2019-03-19T06:54:15+00:00",
        "closed_at": "2019-03-19T06:54:15+00:00",
        "comments_count": [
            "bfjia1",
            "Zengpr",
            "bfjia1",
            "Zengpr",
            "LCG22",
            "Zengpr",
            "LCG22",
            "Zengpr",
            "LCG22",
            "kuke",
            "Zengpr"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 34,
        "title": "运行run_ChnSentiCorp.sh报错",
        "body": "在下载完模型和任务数据之后，运行` bash script/run_ChnSentiCorp.sh`。之后报错如下：\r\n```\r\nTheoretical memory usage in training: 10522.327 - 11023.390 MB\r\nW0318 14:37:05.017385 13682 device_context.cc:263] Please NOTE: device: 0, CUDA Capability: 75, Driver API Version: 10.0, Runtime API Version: 9.0\r\nW0318 14:37:05.017417 13682 device_context.cc:271] device: 0, cuDNN Version: 7.0.\r\nLoad pretraining parameters from /home/lab/liujiepeng/Framework/LARK/ERNIE/model/model_data/params.\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 204, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/parallel_executor.py\", line 303, in run\r\n    self.executor.run(fetch_list, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator softmax error.\r\nPython Callstacks: \r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/framework.py\", line 1317, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/layer_helper.py\", line 56, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/layers/nn.py\", line 1788, in softmax\r\n    attrs={\"use_cudnn\": use_cudnn})\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 120, in scaled_dot_product_attention\r\n    weights = layers.softmax(product)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 148, in multi_head_attention\r\n    dropout_rate)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 274, in encoder_layer\r\n    name=name + '_multi_head_att')\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 337, in encoder\r\n    name=name + '_layer_' + str(i))\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/ernie.py\", line 136, in _build_model\r\n    name='encoder')\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/ernie.py\", line 81, in __init__\r\n    self._build_model(src_ids, position_ids, sentence_ids, self_attn_mask)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/finetune/classifier.py\", line 49, in create_model\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 97, in main\r\n    ernie_config=ernie_config)\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\nC++ Callstacks: \r\nCUDNN_STATUS_EXECUTION_FAILED at [/paddle/paddle/fluid/operators/math/softmax.cu:56]\r\nPaddlePaddle Call Stacks: \r\n0       0x7fc944af6dbdp void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 365\r\n1       0x7fc944af7107p paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int) + 87\r\n2       0x7fc94628bd8ep paddle::operators::math::SoftmaxCUDNNFunctor<float>::operator()(paddle::platform::CUDADeviceContext const&, paddle::framework::Tensor const*, paddle::framework::Tensor*) + 830\r\n3       0x7fc9450ec423p paddle::operators::SoftmaxCUDNNKernel<float>::Compute(paddle::framework::ExecutionContext const&) const + 595\r\n4       0x7fc9450ec4d3p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::SoftmaxCUDNNKernel<float>, paddle::operators::SoftmaxCUDNNKernel<double>, paddle::operators::SoftmaxCUDNNKernel<paddle::platform::float16> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n5       0x7fc946504c33p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 659\r\n6       0x7fc9465024a5p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 341\r\n7       0x7fc94637881ap paddle::framework::details::ComputationOpHandle::RunImpl() + 250\r\n8       0x7fc946371ef6p paddle::framework::details::OpHandleBase::Run(bool) + 118\r\n9       0x7fc94630a10dp\r\n10      0x7fc94630ab0dp paddle::framework::details::ThreadedSSAGraphExecutor::RunOp(std::shared_ptr<paddle::framework::BlockingQueue<paddle::framework::details::VarHandleBase*> > const&, paddle::framework::details::OpHandleBase*) + 1309\r\n11      0x7fc94630c784p paddle::framework::details::ThreadedSSAGraphExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&) + 2324\r\n12      0x7fc94630380ap paddle::framework::details::ScopeBufferedSSAGraphExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&) + 394\r\n13      0x7fc944c31ca2p paddle::framework::ParallelExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&, std::string const&) + 562\r\n14      0x7fc944ae712ep\r\n15      0x7fc944b21c4ep\r\n16            0x4ea137p PyCFunction_Call + 119\r\n17            0x53c176p PyEval_EvalFrameEx + 23030\r\n18            0x5401efp\r\n19            0x53b83fp PyEval_EvalFrameEx + 20671\r\n20            0x53b294p PyEval_EvalFrameEx + 19220\r\n21            0x53fc97p\r\n22            0x5409bfp PyEval_EvalCode + 31\r\n23            0x60cb42p\r\n24            0x60efeap PyRun_FileExFlags + 154\r\n25            0x60f7dcp PyRun_SimpleFileExFlags + 444\r\n26            0x640256p Py_Main + 1110\r\n27            0x4d0001p main + 225\r\n28      0x7fc976ec5830p __libc_start_main + 240\r\n29            0x5d6999p _start + 41\r\n```\r\n请问如何解决？谢谢！",
        "state": "closed",
        "user": "MrRace",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-18T06:39:05+00:00",
        "updated_at": "2020-05-28T13:52:40+00:00",
        "closed_at": "2020-05-28T13:52:40+00:00",
        "comments_count": [
            "kuke",
            "MrRace",
            "kuke",
            "MrRace",
            "MrRace",
            "jojolin",
            "lxy1108",
            "zhang921210",
            "junjun315",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 36,
        "title": "实体关系抽取可以做吗",
        "body": "感觉很棒，如果想用这个做实体关系抽取，可以搞嘛",
        "state": "closed",
        "user": "lu161513",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-18T09:08:15+00:00",
        "updated_at": "2019-03-19T13:02:55+00:00",
        "closed_at": "2019-03-19T13:02:55+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 33,
        "title": "readme和代码实现中mask方法的逻辑不一致",
        "body": "  readme中：这个方法与bert最大的区别在于不是mask随机字，而是mask随机词。                             代码batching中：以词为单位，首字和其他字的mask方法不一致！ 非首字按bert方法mask，首字按15%,15%,70%分别mask,replace,不变。                             个人看法：保持首字和其余字的mask方法一致，效果会更好。",
        "state": "closed",
        "user": "xiaochang129",
        "closed_by": "zhanghan1992",
        "created_at": "2019-03-18T05:51:30+00:00",
        "updated_at": "2019-08-01T12:08:38+00:00",
        "closed_at": "2019-03-18T06:30:19+00:00",
        "comments_count": [
            "zhanghan1992",
            "xiaochang129",
            "zhanghan1992",
            "xiaochang129",
            "BucherLi",
            "xiaochang129",
            "randomtutu",
            "zhanghan1992",
            "zhanghan1992",
            "randomtutu",
            "Sherriiie"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 37,
        "title": "paddle 预训练模型转tensorflow，pytorch",
        "body": "请问应该怎么把预训练的模型参数转换成其他框架，这样是不是让人能更快上手。试了一下load_param，然后gloab_block()里面也没有参数，load居然返回None，加载的参数保存在哪，文档写的也不清楚，这种设计模式是真的没谁了，load模型参数的过程中，如果出错都不会报错的。",
        "state": "closed",
        "user": "wq343580510",
        "closed_by": "kuke",
        "created_at": "2019-03-18T11:42:49+00:00",
        "updated_at": "2022-08-22T09:19:04+00:00",
        "closed_at": "2019-03-19T06:36:27+00:00",
        "comments_count": [
            "chqiwang",
            "bfjia1",
            "wq343580510",
            "kuke",
            "chqiwang",
            "kuke",
            "zhhongzhi",
            "randomtutu",
            "nghuyong",
            "bfjia1",
            "nghuyong",
            "Shajiu",
            "nghuyong"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 27,
        "title": "模型训练后推理能给出快速接口吗",
        "body": "",
        "state": "closed",
        "user": "wqw123",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-17T07:56:31+00:00",
        "updated_at": "2020-05-28T12:52:42+00:00",
        "closed_at": "2020-05-28T12:52:42+00:00",
        "comments_count": [
            "tianxin1860",
            "djh123",
            "SunnyGJing",
            "Walleclipse",
            "ccluqh",
            "huyanggithub",
            "Walleclipse",
            "stale[bot]"
        ],
        "labels": [
            "enhancement",
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 35,
        "title": "embedding",
        "body": "请问ERNIE有类似BERT的word embedding功能吗，如果有如何提取embedding",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-18T08:01:41+00:00",
        "updated_at": "2019-03-19T14:17:19+00:00",
        "closed_at": "2019-03-19T14:17:19+00:00",
        "comments_count": [
            "Jothangan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 41,
        "title": "请问是否能够提供特征提取接口方便使用？",
        "body": "",
        "state": "closed",
        "user": "kaijien",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-19T04:06:29+00:00",
        "updated_at": "2019-03-27T03:07:55+00:00",
        "closed_at": "2019-03-27T03:07:55+00:00",
        "comments_count": [
            "LCG22",
            "tianxin1860",
            "tianxin1860"
        ],
        "labels": [
            "enhancement"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 39,
        "title": "请问为什么找不到 checkpoints 文件夹？是不是必须要预训练模型才能生成 checkpoints 文件夹呢？",
        "body": "",
        "state": "closed",
        "user": "LCG22",
        "closed_by": "nbcc",
        "created_at": "2019-03-19T03:15:05+00:00",
        "updated_at": "2019-03-19T06:32:53+00:00",
        "closed_at": "2019-03-19T06:32:53+00:00",
        "comments_count": [
            "WangFeiming"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 43,
        "title": "CPU可以微调吗？",
        "body": "64G服务器只有CPU微调可以吗？",
        "state": "closed",
        "user": "LiETL",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-19T08:31:51+00:00",
        "updated_at": "2019-03-20T09:38:46+00:00",
        "closed_at": "2019-03-20T09:38:46+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 48,
        "title": "vocab.txt是根据什么规则生成的？",
        "body": "如题，vocab.txt是根据什么规则生成的？为什么存在数字，和一些单词",
        "state": "closed",
        "user": "Jothangan",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-19T13:27:31+00:00",
        "updated_at": "2019-03-28T08:39:40+00:00",
        "closed_at": "2019-03-28T08:39:40+00:00",
        "comments_count": [
            "Jothangan",
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 49,
        "title": "embedding对应词表",
        "body": "请问 模型的embedding层对应词表在哪 config下的vocab.txt只有17964个字符，从模型提取的embedding是18000*768维度",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-20T00:57:47+00:00",
        "updated_at": "2019-03-20T11:36:36+00:00",
        "closed_at": "2019-03-20T11:36:36+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 51,
        "title": "BERT init_checkpoint",
        "body": "请问BERT run_classifier.py中init_checkpoint要如何设置，示例中没有",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "nbcc",
        "created_at": "2019-03-21T03:11:08+00:00",
        "updated_at": "2019-04-15T02:21:52+00:00",
        "closed_at": "2019-04-15T02:21:52+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 47,
        "title": "NER任务fintune 显存12G可以运行吗？",
        "body": "",
        "state": "closed",
        "user": "cloudXia777",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-19T13:22:09+00:00",
        "updated_at": "2019-03-19T14:08:44+00:00",
        "closed_at": "2019-03-19T14:07:05+00:00",
        "comments_count": [
            "tianxin1860",
            "cloudXia777"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 42,
        "title": "请问dbqa中如何显示模型回答的结果",
        "body": "你好，感觉的模型很棒，但是请问dbqa中如何显示模型回答的结果？我在源码中也没有看到训练模型时读取text_a和text_b的代码，并且test.tsv作为测试不应该没有label吗？",
        "state": "closed",
        "user": "ln23415",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-19T08:00:11+00:00",
        "updated_at": "2019-06-27T03:30:51+00:00",
        "closed_at": "2019-03-19T14:38:09+00:00",
        "comments_count": [
            "tianxin1860",
            "xiaosdawn",
            "TianTian-O1"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 50,
        "title": "pretrain和finetune 支持多GPU计算吗，多个显卡都能用于模型实际的计算？",
        "body": "",
        "state": "closed",
        "user": "xuehui0725",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-20T06:01:30+00:00",
        "updated_at": "2019-05-19T14:51:04+00:00",
        "closed_at": "2019-03-20T09:38:16+00:00",
        "comments_count": [
            "tianxin1860",
            "xuehui0725"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 52,
        "title": "pretrain.sh运行报错",
        "body": "运行script文件夹下的pretrain.sh运行报错，TypeError:a bytes-like object is required,not 'str' 程序也一直出不来结果",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-21T06:33:54+00:00",
        "updated_at": "2020-05-28T12:52:37+00:00",
        "closed_at": "2020-05-28T12:52:37+00:00",
        "comments_count": [
            "azuredsky",
            "torans",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 55,
        "title": "能否直接给出 掩盖一个字 预测该字的接口",
        "body": "",
        "state": "closed",
        "user": "zhaolulul",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-21T07:47:19+00:00",
        "updated_at": "2020-05-28T11:52:38+00:00",
        "closed_at": "2020-05-28T11:52:38+00:00",
        "comments_count": [
            "5118Python",
            "cuhk-hbsun",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 57,
        "title": "能否给出一个preprocess 文件",
        "body": " 因为想试一下你们预训练的模型  我在处理我自己的数据过程中 不知道你们（ 利用百度内部词法分析工具对句对数据进行字、词、实体等不同粒度的切分，然后基于 tokenization.py 中的 CharTokenizer 对切分后的数据进行 token 化处理，得到明文的 token 序列及切分边界，）用的什么词法分析工具 是否方便公开 ",
        "state": "closed",
        "user": "zhaolulul",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-21T08:11:07+00:00",
        "updated_at": "2020-05-28T13:52:36+00:00",
        "closed_at": "2020-05-28T13:52:36+00:00",
        "comments_count": [
            "wq343580510",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 54,
        "title": "16G显存，batch size = 2，fintune句子对分类，好像都会爆显存，这是为什么啊 ",
        "body": "-----------  Configuration Arguments -----------\r\nbatch_size: 2\r\ncheckpoints: ./checkpoints\r\ndev_set: /home/wb-wzft515778/LARK/ERNIE/data//lcqmc/test.tsv\r\ndo_lower_case: True\r\ndo_test: True\r\ndo_train: True\r\ndo_val: True\r\nepoch: 3\r\nernie_config_path: config/ernie_config.json\r\nin_tokens: False\r\ninit_checkpoint: None\r\ninit_pretraining_params: /home/wb-wzft515778/LARK/ERNIE/ckpt//params\r\nlabel_map_config: None\r\nlearning_rate: 2e-05\r\nloss_scaling: 1.0\r\nlr_scheduler: linear_warmup_decay\r\nmax_seq_len: 16\r\nmetrics: True\r\nnum_iteration_per_drop_scope: 1\r\nnum_labels: 2\r\nrandom_seed: 1\r\nsave_steps: 1000\r\nskip_steps: 10\r\ntest_set: /home/wb-wzft515778/LARK/ERNIE/data//lcqmc/test.tsv\r\ntrain_set: /home/wb-wzft515778/LARK/ERNIE/data//lcqmc/train.tsv\r\nuse_cuda: True\r\nuse_fast_executor: False\r\nuse_fp16: False\r\nvalidation_steps: 100\r\nverbose: True\r\nvocab_path: config/vocab.txt\r\nwarmup_proportion: 0.0\r\nweight_decay: 0.0\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: relu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 513\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 2\r\nvocab_size: 18000\r\n------------------------------------------------\r\nDevice count: 1\r\nNum train examples: 102477\r\nMax train steps: 153715\r\nNum warmup steps: 0\r\nTheoretical memory usage in training: 2102.707 - 2202.836 MB\r\nW0321 17:00:02.179066 66953 device_context.cc:263] Please NOTE: device: 0, CUDA Capability: 60, Driver API Version: 9.2, Runtime API Version: 9.0\r\nW0321 17:00:02.179129 66953 device_context.cc:271] device: 0, cuDNN Version: 7.0.\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 141, in main\r\n    exe.run(startup_prog)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 525, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 591, in _run\r\n    exe.run(program.desc, scope, 0, True, True)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator fill_constant error.\r\nPython Callstacks:\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1382, in _prepend_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/initializer.py\", line 167, in __call__\r\n    stop_gradient=True)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1198, in create_var\r\n    kwargs['initializer'](var, self)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 402, in set_variable_initializer\r\n    initializer=initializer)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/layers/tensor.py\", line 137, in create_global_var\r\n    value=float(value), force_cpu=force_cpu))\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 92, in _create_global_learning_rate\r\n    persistable=True)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 224, in _create_optimization_pass\r\n    self._create_global_learning_rate()\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 350, in apply_gradients\r\n    optimize_ops = self._create_optimization_pass(params_grads)\r\n  File \"/home/wb-wzft515778/anaconda3/envs/paddle/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 405, in minimize\r\n    optimize_ops = self.apply_gradients(params_grads)\r\n  File \"/home/wb-wzft515778/LARK/ERNIE/optimization.py\", line 127, in optimization\r\n    _, param_grads = optimizer.minimize(loss)\r\n  File \"run_classifier.py\", line 108, in main\r\n    loss_scaling=args.loss_scaling)\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\nC++ Callstacks:\r\nEnforce failed. Expected allocating <= available, but received allocating:14920696472 > available:14265745152.\r\nInsufficient GPU memory to allocation. at [/paddle/paddle/fluid/platform/gpu_info.cc:216]\r\nPaddlePaddle Call Stacks:\r\n0       0x7f76e04d190dp void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 365\r\n1       0x7f76e04d1c57p paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int) + 87\r\n2       0x7f76e1f9baf8p paddle::platform::GpuMaxChunkSize() + 744\r\n3       0x7f76e1f922a9p\r\n4       0x7f779ab35bb9p\r\n5       0x7f76e1f91a7dp paddle::memory::legacy::GetGPUBuddyAllocator(int) + 109\r\n6       0x7f76e1f92767p void* paddle::memory::legacy::Alloc<paddle::platform::CUDAPlace>(paddle::platform::CUDAPlace const&, unsigned long) + 39\r\n7       0x7f76e1f92e35p paddle::memory::allocation::LegacyAllocator::AllocateImpl(unsigned long, paddle::memory::allocation::Allocator::Attr) + 389\r\n8       0x7f76e1f9513bp paddle::memory::allocation::Allocator::Allocate(unsigned long, paddle::memory::allocation::Allocator::Attr) + 27\r\n9       0x7f76e1f868e3p paddle::memory::allocation::AllocatorFacade::Alloc(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, unsigned long, paddle::memory::allocation::Allocator::Attr) + 435\r\n10      0x7f76e1f86a01p paddle::memory::allocation::AllocatorFacade::AllocShared(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, unsigned long, paddle::memory::allocation::Allocator::Attr) + 33\r\n11      0x7f76e1c48540p paddle::memory::AllocShared(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, unsigned long, paddle::memory::allocation::Allocator::Attr) + 48\r\n12      0x7f76e1f43576p paddle::framework::Tensor::mutable_data(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>, paddle::framework::proto::VarType_Type, paddle::memory::allocation::Allocator::Attr, unsigned long) + 150\r\n13      0x7f76e095fc01p paddle::operators::FillConstantKernel<float>::Compute(paddle::framework::ExecutionContext const&) const + 497\r\n14      0x7f76e0962c23p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::FillConstantKernel<float>, paddle::operators::FillConstantKernel<double>, paddle::operators::FillConstantKernel<long>, paddle::operators::FillConstantKernel<int>, paddle::operators::FillConstantKernel<paddle::platform::float16> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n15      0x7f76e1ee5f23p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 659\r\n16      0x7f76e1ee3795p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 341\r\n17      0x7f76e05edf1ap paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool) + 218\r\n18      0x7f76e05eff15p paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool) + 261\r\n19      0x7f76e04b5a7bp\r\n20      0x7f76e04fc79ep\r\n21      0x7f779b07e744p _PyCFunction_FastCallDict + 340\r\n22      0x7f779b10557ep\r\n23      0x7f779b12a38ap _PyEval_EvalFrameDefault + 778\r\n24      0x7f779b0fe8e4p\r\n25      0x7f779b0ff771p\r\n26      0x7f779b105505p\r\n27      0x7f779b12b147p _PyEval_EvalFrameDefault + 4295\r\n28      0x7f779b0fe8e4p\r\n29      0x7f779b0ff771p\r\n30      0x7f779b105505p\r\n31      0x7f779b12a38ap _PyEval_EvalFrameDefault + 778\r\n32      0x7f779b0ff53bp\r\n33      0x7f779b105505p\r\n34      0x7f779b12a38ap _PyEval_EvalFrameDefault + 778\r\n35      0x7f779b100289p PyEval_EvalCodeEx + 809\r\n36      0x7f779b10101cp PyEval_EvalCode + 28\r\n37      0x7f779b1833c4p\r\n38      0x7f779b1837c1p PyRun_FileExFlags + 161\r\n39      0x7f779b1839c3p PyRun_SimpleFileExFlags + 451\r\n40      0x7f779b1874b3p Py_Main + 1555\r\n41      0x7f779b05002ep main + 238\r\n42      0x7f779a781401p __libc_start_main + 241\r\n43      0x7f779b130e0ep\r\n",
        "state": "closed",
        "user": "randomtutu",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-21T07:35:15+00:00",
        "updated_at": "2019-03-21T13:21:57+00:00",
        "closed_at": "2019-03-21T13:21:57+00:00",
        "comments_count": [
            "randomtutu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 56,
        "title": "使用CPU进行predict过程的问题",
        "body": "用GPU进行了finetune过程的模型想用CPU进行推理是否还需要指定CUDA_VISIBLE_DEVICES，若不指定，将use_cuda设定为False后报错为：\r\n```\r\nTraceback (most recent call last):\r\n  File \"predict_classifier.py\", line 153, in <module>\r\n    main(args)\r\n  File \"predict_classifier.py\", line 104, in main\r\n    exe.run(predict_startup)\r\n  File \"/****/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 472, in run\r\n    self.executor.run(program.desc, scope, 0, True, True)\r\npaddle.fluid.core.EnforceNotMet: cudaGetDeviceCount failed in paddle::platform::GetCUDADeviceCount: no CUDA-capable device is detected at [/paddle/paddle/fluid/platform/gpu_info.cc:65]\r\n```\r\n若指定CUDA_VISIBLE_DEVICES，在预测过程中predict_pyreader直接抛出fluid.core.EOFException，不对数据进行处理。",
        "state": "closed",
        "user": "XinLiu-cs",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-21T07:47:49+00:00",
        "updated_at": "2019-03-28T08:39:17+00:00",
        "closed_at": "2019-03-28T08:39:17+00:00",
        "comments_count": [
            "tianxin1860",
            "XinLiu-cs"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 62,
        "title": "sentence type id，0/1分别是指的什么，可以补充一下吗？",
        "body": "",
        "state": "closed",
        "user": "randomtutu",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-22T06:40:16+00:00",
        "updated_at": "2019-03-22T12:04:03+00:00",
        "closed_at": "2019-03-22T12:04:03+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 58,
        "title": "请问如何获取输入句子的vector？",
        "body": "",
        "state": "closed",
        "user": "ohho-zb",
        "closed_by": "tianxin1860",
        "created_at": "2019-03-22T02:50:57+00:00",
        "updated_at": "2019-06-17T03:57:07+00:00",
        "closed_at": "2019-06-17T03:57:07+00:00",
        "comments_count": [
            "whyoneisall",
            "tianxin1860",
            "Jackie127",
            "tianxin1860",
            "Jackie127"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 65,
        "title": "预处理数据的问题",
        "body": "“”基于百科类、资讯类、论坛对话类数据构造具有上下文关系的句子对数据，利用百度内部词法分析工具对句对数据进行字、词、实体等不同粒度的切分”（这个能给个切分后的例子吗，一个样本有两句?）",
        "state": "closed",
        "user": "BucherLi",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-26T08:54:32+00:00",
        "updated_at": "2020-05-28T12:52:48+00:00",
        "closed_at": "2020-05-28T12:52:48+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 63,
        "title": "我一直没有找到pre_training中的mask_word_prob为多少，我尝试得去split(\"\\t\")，但是没有。",
        "body": "",
        "state": "closed",
        "user": "T1aNS1R",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-25T08:59:05+00:00",
        "updated_at": "2020-05-28T09:53:04+00:00",
        "closed_at": "2020-05-28T09:53:04+00:00",
        "comments_count": [
            "daizh",
            "jfkey",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 72,
        "title": "获取embedding时ernir_encoder.py保存文件时有问题",
        "body": "170行-175行\r\n\r\n    with open(os.path.join(args.output_dir, \"cls_emb.npy\"),\r\n              \"w\") as cls_emb_file:\r\n        np.save(cls_emb_file, total_cls_emb)\r\n    with open(os.path.join(args.output_dir, \"top_layer_emb.npy\"),\r\n              \"w\") as top_layer_emb_file:\r\n        np.save(top_layer_emb_file, total_top_layer_emb)\r\n\r\n错误原因：np.save后只能跟文件名，并不能使用已打开的文件。\r\n\r\n应改为\r\n    np.save(os.path.join(args.output_dir, \"cls_emb.npy\"), total_cls_emb)\r\n    np.save(os.path.join(args.output_dir, \"top_layer_emb.npy\"), total_top_layer_emb)",
        "state": "closed",
        "user": "Lijun1003",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-02T06:57:03+00:00",
        "updated_at": "2019-06-17T04:12:59+00:00",
        "closed_at": "2019-06-17T04:12:59+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 71,
        "title": "怎么去使用LCQMC",
        "body": "",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "jtyoui",
        "created_at": "2019-04-01T02:34:39+00:00",
        "updated_at": "2019-04-04T07:23:15+00:00",
        "closed_at": "2019-04-04T07:23:15+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 68,
        "title": "实体之间的关系如何提取和表达？",
        "body": "介绍中提到：**“ERNIE 通过学习词与实体的表达，使模型能够建模出『哈尔滨』与『黑龙江』的关系，学到『哈尔滨』是 『黑龙江』的省会以及『哈尔滨』是个冰雪城市。”**\r\n\r\n想问一下模型是如何规范的表达“哈尔滨”、“黑龙江”这些不同实体之间的关系的？ 有程序接口或者具体示例吗？ 谢谢了！",
        "state": "closed",
        "user": "yangxg",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-28T13:58:55+00:00",
        "updated_at": "2020-05-28T12:52:41+00:00",
        "closed_at": "2020-05-28T12:52:41+00:00",
        "comments_count": [
            "jtyoui",
            "zhouchx",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 70,
        "title": "/paddle/paddle/fluid/operators/math/cross_entropy.cu:40 Assertion `label[i] >= 0 && label[i] < D || label[i] == ignore_index` failed",
        "body": "Load pretraining parameters from /home/lby/ERNIE_stable/params.\r\n/paddle/paddle/fluid/operators/math/cross_entropy.cu:40 Assertion `label[i] >= 0 && label[i] < D || label[i] == ignore_index` failed.\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 276, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 195, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/lby/.conda/envs/paddlepaddle/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 303, in run\r\n\r\n1       0x7f9b22cf2759p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 137\r\n2       0x7f9b247840c6p\r\n3       0x7f9b247a67d4p paddle::platform::TemporaryAllocator::Release(std::function<void ()> const&) + 100\r\n4       0x7f9b247860e1p paddle::platform::CUDADeviceContext::Wait() const + 113\r\n5       0x7f9b24506a68p paddle::framework::details::ScopeBufferedSSAGraphExecutor::WaitComputationalStreams() + 120\r\n6       0x7f9b24506072p paddle::framework::details::ScopeBufferedSSAGraphExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&) + 1794\r\n7       0x7f9b22e2d872p paddle::framework::ParallelExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&, std::string const&) + 562\r\n8       0x7f9b22ce2c7ep\r\n9       0x7f9b22d1d79ep\r\n10      0x55838e22b744p _PyCFunction_FastCallDict + 340\r\n11      0x55838e2b257ep\r\n12      0x55838e2d738ap _PyEval_EvalFrameDefault + 778\r\n13      0x55838e2abbfep\r\n14      0x55838e2ac771p\r\n15      0x55838e2b2505p\r\n16      0x55838e2d8147p _PyEval_EvalFrameDefault + 4295\r\n17      0x55838e2ac53bp\r\n18      0x55838e2b2505p\r\n19      0x55838e2d738ap _PyEval_EvalFrameDefault + 778\r\n20      0x55838e2ad289p PyEval_EvalCodeEx + 809\r\n21      0x55838e2ae01cp PyEval_EvalCode + 28\r\n22      0x55838e3303c4p\r\n23      0x55838e3307c1p PyRun_FileExFlags + 161\r\n24      0x55838e3309c3p PyRun_SimpleFileExFlags + 451\r\n25      0x55838e3344b3p Py_Main + 1555\r\n26      0x55838e1fd02ep main + 238\r\n27      0x7f9b5c84db97p __libc_start_main + 231\r\n28      0x55838e2dde0ep\r\n\r\n多分类会报这样的错误，请问是否可以使用预训练好的模型进行多分类呢？可以的话应该修改哪里呢？",
        "state": "closed",
        "user": "bbingy",
        "closed_by": "bbingy",
        "created_at": "2019-03-29T08:50:54+00:00",
        "updated_at": "2019-03-30T15:28:23+00:00",
        "closed_at": "2019-03-30T15:28:23+00:00",
        "comments_count": [
            "tianxin1860",
            "bbingy",
            "bbingy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 67,
        "title": "ParallelExecutor 和 scheduled_lr ",
        "body": "我想用现在模型的参数，在自己的数据集上进行一下pretrain的过程，并且只想用mask_lm_loss进行反向传播。所以我将train.py中的\r\n```\r\n\r\n                scheduled_lr = optimization(\r\n                loss=total_loss,\r\n                warmup_steps=args.warmup_steps,\r\n                num_train_steps=args.num_train_steps,\r\n                learning_rate=args.learning_rate,\r\n                train_program=train_program,\r\n                startup_prog=startup_prog,\r\n                weight_decay=args.weight_decay,\r\n                scheduler=args.lr_scheduler,\r\n                use_fp16=args.use_fp16,\r\n                loss_scaling=args.loss_scaling)\r\n```\r\n中的loss 改为了 mask_lm_loss，同时将\r\n```    \r\n        train_exe = fluid.ParallelExecutor(\r\n        use_cuda=args.use_cuda,\r\n        loss_name=total_loss.name,\r\n        build_strategy=build_strategy,\r\n        exec_strategy=exec_strategy,\r\n        main_program=train_program,\r\n        num_trainers=nccl2_num_trainers,\r\n        trainer_id=nccl2_trainer_id)\r\n```\r\n中的loss_name 改为mask_lm_loss\r\n\r\n请问这样做对吗？如果只改scheduled_lr中的loss，而train_exe中的loss没改，在多GPU训练的时候收集起来的loss和进行反向传播的loss不一致，会有什么问题吗。\r\n\r\n非常感谢你们的工作！",
        "state": "closed",
        "user": "randomtutu",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-27T10:56:59+00:00",
        "updated_at": "2020-05-28T12:52:53+00:00",
        "closed_at": "2020-05-28T12:52:53+00:00",
        "comments_count": [
            "chengduoZH",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 69,
        "title": "paddle.fluid.core.EnforceNotMet: Cannot use CUDAPlace in CPU only version",
        "body": "Traceback (most recent call last):\r\n  File \"/tmp/pycharm_project_909/ERNIE/run_classifier.py\", line 277, in <module>\r\n    main(args)\r\n  File \"/tmp/pycharm_project_909/ERNIE/run_classifier.py\", line 43, in main\r\n    place = fluid.CUDAPlace(0)\r\npaddle.fluid.core.EnforceNotMet: Cannot use CUDAPlace in CPU only version at [/paddle/paddle/fluid/pybind/pybind.cc:731]\r\nPaddlePaddle Call Stacks: \r\n0       0x7fb5162d498dp void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 365\r\n1       0x7fb5162d4cd7p paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int) + 87\r\n2       0x7fb5162b7114p\r\n3       0x7fb5162fc19ep\r\n4             0x4a9151p _PyCFunction_FastCallDict + 513\r\n5             0x451798p _PyObject_FastCallDict + 520\r\n6             0x45187bp _PyObject_Call_Prepend + 203\r\n7             0x451450p PyObject_Call + 96\r\n8             0x4c748bp\r\n9             0x4bebeap\r\n10            0x451632p _PyObject_FastCallDict + 162\r\n11            0x5400f5p\r\n12            0x5451dcp _PyEval_EvalFrameDefault + 15980\r\n13            0x53f331p\r\n14            0x5404c7p\r\n15            0x5451dcp _PyEval_EvalFrameDefault + 15980\r\n16            0x53ffa1p\r\n17            0x540de0p PyEval_EvalCode + 96\r\n18            0x4266f8p PyRun_FileExFlags + 360\r\n19            0x4268ddp PyRun_SimpleFileExFlags + 221\r\n20            0x43b11ap Py_Main + 3418\r\n21            0x41d892p main + 354\r\n22      0x7fb57f9ab445p __libc_start_main + 245\r\n23            0x41d950p\r\ncuda 9 cudnn7 tensorflow-gpu正常运行，这个是什么问题，求解决",
        "state": "closed",
        "user": "xingzhoupy",
        "closed_by": "stale[bot]",
        "created_at": "2019-03-29T07:56:45+00:00",
        "updated_at": "2020-05-28T13:52:38+00:00",
        "closed_at": "2020-05-28T13:52:38+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 74,
        "title": "An error occurred when I run run_dbqa.sh",
        "body": "The error is:\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 276, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 195, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/root/anaconda3/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 303, in run\r\n    self.executor.run(fetch_list, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator matmul error.\r\nPython Callstacks: \r\n  File \"/root/anaconda3/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1317, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/root/anaconda3/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 56, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/root/anaconda3/lib/python3.6/site-packages/paddle/fluid/layers/nn.py\", line 4771, in matmul\r\n    'alpha': float(alpha),\r\n  File \"/media/lixinyi/Office/LARK-develop/ERNIE/model/ernie.py\", line 116, in _build_model\r\n    x=input_mask, y=input_mask, transpose_y=True)\r\n  File \"/media/lixinyi/Office/LARK-develop/ERNIE/model/ernie.py\", line 82, in __init__\r\n    self._build_model(src_ids, position_ids, sentence_ids, input_mask)\r\n  File \"/media/lixinyi/Office/LARK-develop/ERNIE/finetune/classifier.py\", line 49, in create_model\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 94, in main\r\n    ernie_config=ernie_config)\r\n  File \"run_classifier.py\", line 276, in <module>\r\n    main(args)\r\nC++ Callstacks: \r\nCUBLAS: execution failed,  at [/paddle/paddle/fluid/operators/math/blas_impl.cu.h:50]\r\n",
        "state": "closed",
        "user": "lxy1108",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-03T09:16:31+00:00",
        "updated_at": "2020-05-28T12:52:49+00:00",
        "closed_at": "2020-05-28T12:52:49+00:00",
        "comments_count": [
            "guoshengCS",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 73,
        "title": "无法同时进行多个分类任务",
        "body": "您好，在使用sciprt中的run_lcqmc.sh进行分类任务时，若同时跑两个分类任务，就会报错，请问是什么原因",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-02T07:10:04+00:00",
        "updated_at": "2020-05-28T12:52:46+00:00",
        "closed_at": "2020-05-28T12:52:46+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 75,
        "title": "模型转换为pytorch的ckpt并加载之后，同样的id 进行embedding的结果不同",
        "body": "我在自己的数据集上，取得了比较大的提升，因此想要继续修改模型。\r\n\r\n因为paddle文档比较少，因此想要把转换成pytorch。\r\n\r\n我使用 #37 上的脚本，将paddle的ckpt转换为dict,再通过简单的名字对应和tensor的转换，将对应权重加载到pytorch中。\r\n\r\n但是加载后做测试，结果相差很多。\r\n\r\n为了找到不同的地方，我将两个框架的模型跑同一数据的前向传播，将每一步的数据进行对比。\r\n结果发现，两个框架上同样的embedding权重（weight），对相同id的embedding居然不同。\r\n我暂时没有对比两个框架的实现方法有何异同。\r\n\r\n我推测要么是两个框架的embedding实现方法有差别，要么就是这个脚本保存的权重出现了一点问题。\r\n\r\n希望有在做同样的事情的同学和我联系，一起交流。",
        "state": "closed",
        "user": "randomtutu",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-03T12:38:19+00:00",
        "updated_at": "2020-05-28T13:52:43+00:00",
        "closed_at": "2020-05-28T13:52:43+00:00",
        "comments_count": [
            "randomtutu",
            "Mansterteddy",
            "huntzhan",
            "Mansterteddy",
            "randomtutu",
            "randomtutu",
            "arlenzhu",
            "wq343580510",
            "huntzhan",
            "huntzhan",
            "huntzhan",
            "wq343580510",
            "fyubang",
            "fyubang",
            "huntzhan",
            "fyubang",
            "wq343580510",
            "fyubang",
            "wq343580510",
            "huntzhan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 76,
        "title": "关于msra标签增加报错",
        "body": "![image](https://user-images.githubusercontent.com/28988355/55536930-9a735b80-56ed-11e9-879c-b04ac0268548.png)\r\n\r\n分类报错.请问在什么地方可以更改分类数",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "zhanghan1992",
        "created_at": "2019-04-04T07:24:54+00:00",
        "updated_at": "2019-04-17T16:16:49+00:00",
        "closed_at": "2019-04-17T16:16:49+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 77,
        "title": "ERNIE分类只do_valid报错",
        "body": "你好，用ERNIE做finetune的分类任务后，再重新加载新生成的模型只做验证，报错，需要设置args.init_checkpoint，这个参数要如何设置？",
        "state": "closed",
        "user": "Jackie127",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-04T07:54:44+00:00",
        "updated_at": "2019-06-17T04:10:47+00:00",
        "closed_at": "2019-06-17T04:10:47+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 78,
        "title": "when bert use save_inference_model, the __model__ is imcomplete",
        "body": "after I finetune and then\r\n\r\n```shell\r\n$python -u predict_classifier.py --task_name ${TASK_NAME} \\\r\n           --use_cuda false \\ \r\n           --batch_size 1 \\\r\n           --data_dir ${DATA_PATH} \\\r\n           --vocab_path ${BERT_BASE_PATH}/vocab.txt \\\r\n           --do_lower_case true \\\r\n           --init_checkpoint ${INIT_CKPT_PATH} \\\r\n           --max_seq_len 8 \\\r\n           --bert_config_path ${BERT_BASE_PATH}/bert_config.json \\\r\n           --do_predict true \\\r\n           --save_inference_model_path ${SAVE_INFERENCE_PATH}\r\n```\r\n\r\nwhen I open the generated file ```__model__```, I can found errors like(I use paddle 1.3.0):\r\n\r\n```\r\n^AX^R^Dfeed^R^X\r\n^COut^R^Qread_file_0.tmp_3^Z^Dfeed\"^O\r\n^Kop_role_var^P^E\"ü^F\r\n^Lop_callstack^P^EBî^A  File \"/home/xxx/python-2.7.14-paddle-1.3.0/lib/python2.7/site-p\r\nackages/paddle/fluid/framework.py\", line 1382, in _prepend_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\nBÜ^A  File \"/home/xxx/python-2.7.14-paddle-1.3.0/lib/python2.7/site-packages/paddle/flu\r\nid/io.py\", line 843, in prepend_feed_ops\r\n    attrs={'col': i})\r\nBÿ^A  File \"/home/xxx/python-2.7.14-paddle-1.3.0/lib/python2.7/site-packages/paddle/flu\r\nid/io.py\", line 996, in save_inference_model\r\n    prepend_feed_ops(main_program, feeded_var_names)\r\nBQ  File \"predict_classifier.py\", line 147, in main\r\n    main_program=predict_prog)\r\nBE  File \"predict_classifier.py\", line 152, in <module>\r\n    main(args)\r\n\"^S\r\n```",
        "state": "closed",
        "user": "daiwk",
        "closed_by": "daiwk",
        "created_at": "2019-04-07T12:42:13+00:00",
        "updated_at": "2019-04-07T12:50:06+00:00",
        "closed_at": "2019-04-07T12:50:05+00:00",
        "comments_count": [
            "daiwk"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 82,
        "title": "关于max_seq_len的最大值是多少？",
        "body": "如题。self._max_position_seq_len = config['max_position_embeddings']，从配置读取的，是没有限制的嘛？",
        "state": "closed",
        "user": "ghost",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-09T15:37:47+00:00",
        "updated_at": "2019-04-11T02:26:01+00:00",
        "closed_at": "2019-04-11T02:26:01+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 79,
        "title": "在训练好分类模型下，怎么预测单个句子？",
        "body": "",
        "state": "closed",
        "user": "Inspiring26",
        "closed_by": "nbcc",
        "created_at": "2019-04-08T01:56:57+00:00",
        "updated_at": "2019-04-15T02:21:27+00:00",
        "closed_at": "2019-04-15T02:21:26+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 80,
        "title": "运行run_ChnSentiCorp.sh报错 (cpu版)",
        "body": "在运行run_ChnSentiCorp.sh报错 （cpu版），在 进行 模型加载的时候，总是被自动 kill，在监控内存消耗的时候，128G 的内存很快就被打满，是存在内存泄漏问题么？对应参数如下\r\n![image](https://user-images.githubusercontent.com/23313121/55707003-1f73b300-5a15-11e9-8235-bffa72d25fec.png)\r\n![image](https://user-images.githubusercontent.com/23313121/55707016-2b5f7500-5a15-11e9-8874-65be6485722c.png)\r\n",
        "state": "closed",
        "user": "akina2016",
        "closed_by": "akina2016",
        "created_at": "2019-04-08T07:44:34+00:00",
        "updated_at": "2019-04-08T09:13:14+00:00",
        "closed_at": "2019-04-08T09:13:14+00:00",
        "comments_count": [
            "akina2016"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 86,
        "title": "保存ernie embedding inference model报错",
        "body": "报错代码:\r\n`fluid.io.save_inference_model(dirname='./infer_model', feeded_var_names=[pyreader.name],\r\n                                  target_vars=[graph_vars[\"cls_embeddings\"]], executor=exe)`\r\n\r\n报错信息：\r\n`-----------  Configuration Arguments -----------\r\nbatch_size: 1\r\ndata_set: ./task_data/txt_match/test.tsv\r\ndo_lower_case: True\r\nernie_config_path: config/ernie_config.json\r\ninit_pretraining_params: ./checkpoints/step_9000\r\nmax_seq_len: 510\r\noutput_dir: ./test\r\nuse_cuda: True\r\nvocab_path: config/vocab.txt\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: relu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 513\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 2\r\nvocab_size: 18000\r\n------------------------------------------------\r\nDevice count: 2\r\nTotal num examples: 1200\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nreader_double_buffer\r\nW0410 16:55:00.093608 35269 device_context.cc:263] Please NOTE: device: 1, CUDA Capability: 70, Driver API Version: 9.1, Runtime API Version: 9.0\r\nW0410 16:55:00.093653 35269 device_context.cc:271] device: 1, cuDNN Version: 7.0.\r\nLoad pretraining parameters from ./checkpoints/step_9000.\r\n##################################################\r\nTraceback (most recent call last):\r\n  File \"ernir_encoder.py\", line 195, in <module>\r\n    main(args)\r\n  File \"ernir_encoder.py\", line 156, in main\r\n    target_vars=[graph_vars[\"cls_embeddings\"]], executor=exe)\r\n  File \"/home/huyichen/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 954, in save_inference_model\r\n    var, 1., name=\"save_infer_model/scale_{}\".format(i))\r\n  File \"/home/huyichen/anaconda3/lib/python3.7/site-packages/paddle/fluid/layers/nn.py\", line 8857, in scale\r\n    'bias_after_scale': bias_after_scale\r\n  File \"/home/huyichen/anaconda3/lib/python3.7/site-packages/paddle/fluid/layer_helper.py\", line 56, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/huyichen/anaconda3/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 1317, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/huyichen/anaconda3/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 726, in __init__\r\n    self.desc.infer_var_type(self.block.desc)\r\npaddle.fluid.core.EnforceNotMet:  at [/paddle/paddle/fluid/operators/detail/safe_ref.h:28]\r\nPaddlePaddle Call Stacks: \r\n0       0x7f48ecfdd515p void paddle::platform::EnforceNotMet::Init<char const*>(char const*, char const*, int) + 357\r\n1       0x7f48ecfdd899p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 137\r\n2       0x7f48ed84babfp paddle::operators::ScaleOpVarTypeInference::operator()(paddle::framework::OpDesc const&, paddle::framework::BlockDesc*) const + 431\r\n3       0x7f48ed84bba3p std::_Function_handler<void (paddle::framework::OpDesc const&, paddle::framework::BlockDesc*), paddle::framework::details::OpInfoFiller<paddle::operators::ScaleOpVarTypeInference, (paddle::framework::details::OpInfoFillType)3>::operator()(char const*, paddle::framework::OpInfo*) const::{lambda(paddle::framework::OpDesc const&, paddle::framework::BlockDesc*)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::OpDesc const&, paddle::framework::BlockDesc*) + 35\r\n4       0x7f48ed0df292p paddle::framework::OpDesc::InferVarType(paddle::framework::BlockDesc*) const + 98\r\n5       0x7f48ed053333p\r\n6       0x7f48ed0088cep\r\n7       0x556025e52004p _PyMethodDef_RawFastCallKeywords + 612\r\n8       0x556025e52121p _PyCFunction_FastCallKeywords + 33\r\n9       0x556025eae40ep _PyEval_EvalFrameDefault + 21294\r\n10      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n11      0x556025df01e8p _PyFunction_FastCallDict + 984\r\n12      0x556025e06cb3p _PyObject_Call_Prepend + 99\r\n13      0x556025e49c0ap\r\n14      0x556025e522d8p _PyObject_FastCallKeywords + 296\r\n15      0x556025eae98ap _PyEval_EvalFrameDefault + 22698\r\n16      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n17      0x556025df01e8p _PyFunction_FastCallDict + 984\r\n18      0x556025e06cb3p _PyObject_Call_Prepend + 99\r\n19      0x556025dfb7dep PyObject_Call + 110\r\n20      0x556025eaaf1ep _PyEval_EvalFrameDefault + 7742\r\n21      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n22      0x556025e51337p _PyFunction_FastCallKeywords + 903\r\n23      0x556025eaa5d5p _PyEval_EvalFrameDefault + 5365\r\n24      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n25      0x556025e51337p _PyFunction_FastCallKeywords + 903\r\n26      0x556025eaa5d5p _PyEval_EvalFrameDefault + 5365\r\n27      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n28      0x556025e51337p _PyFunction_FastCallKeywords + 903\r\n29      0x556025eaa5d5p _PyEval_EvalFrameDefault + 5365\r\n30      0x556025e510abp _PyFunction_FastCallKeywords + 251\r\n31      0x556025ea97d6p _PyEval_EvalFrameDefault + 1782\r\n32      0x556025deef19p _PyEval_EvalCodeWithName + 761\r\n33      0x556025defdd4p PyEval_EvalCodeEx + 68\r\n34      0x556025defdfcp PyEval_EvalCode + 28\r\n35      0x556025f089e4p\r\n36      0x556025f12bd1p PyRun_FileExFlags + 161\r\n37      0x556025f12dc3p PyRun_SimpleFileExFlags + 451\r\n38      0x556025f13edbp\r\n39      0x556025f13fbcp _Py_UnixMain + 60\r\n40      0x7f4918882830p __libc_start_main + 240\r\n41      0x556025eb8ed2p`\r\n\r\n尝试方案：\r\n参照BERT predict_classifier.py文件找到save_inference_model的使用,  其中feed_target_names参数来自于该行代码:\r\n`predict_pyreader, probs, feed_target_names = create_model(...)`\r\n但是model.classifier中create_model函数的返回值是pyreader, loss, probs, accuracy, num_seqs\r\n似乎这里使用的create_model不是predict_classifier.py第29行导入的函数?\r\n\r\n希望帮我解决save ernie embedding inference model的问题，如果其他地方我有什么理解错误的麻烦指正！谢谢！\r\n",
        "state": "closed",
        "user": "GeminiHu",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-11T01:09:43+00:00",
        "updated_at": "2019-04-13T10:34:39+00:00",
        "closed_at": "2019-04-13T10:34:39+00:00",
        "comments_count": [
            "tianxin1860",
            "GeminiHu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 87,
        "title": "enric_encoder.py 报错 Invoke operator fill_constant error 和 Windows not support stack backtrace yet.",
        "body": "你好，我运行 enric_encoder.py 到 exe.run(startup_prog) 会出现错误，具体错误信息如下：\r\n\r\n ```\r\n File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\executor.py\", line 591, in _run\r\n   exe.run(program.desc, scope, 0, True, True, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator fill_constant error.\r\nPython Callstacks: \r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\framework.py\", line 1382, in _prepend_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\initializer.py\", line 167, in __call__\r\n    stop_gradient=True)\r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\framework.py\", line 1300, in create_parameter\r\n    initializer(param, self)\r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\layer_helper.py\", line 339, in create_parameter\r\n    **attr._to_kwargs(with_initializer=True))\r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\layer_helper.py\", line 424, in append_bias_op\r\n    attr=bias_attr, shape=size, dtype=input_var.dtype, is_bias=True)\r\n  File \"C:\\Users\\Python\\Python36\\site-packages\\paddle\\fluid\\layers\\nn.py\", line 297, in fc\r\n    pre_activation = helper.append_bias_op(pre_bias, dim_start=num_flatten_dims)\r\n  File \"D:\\pycharm\\course\\IR_chat\\LARK-develop\\LARK-develop\\ERNIE\\model\\ernie.py\", line 155, in get_pooled_output\r\n    bias_attr=\"pooled_fc.b_0\")\r\n  File \"D:/pycharm/course/IR_chat/LARK-develop/LARK-develop/ERNIE/ernie_encoder.py\", line 79, in create_model\r\n    cls_feats = ernie.get_pooled_output()\r\n  File \"D:/pycharm/course/IR_chat/LARK-develop/LARK-develop/ERNIE/ernie_encoder.py\", line 131, in main\r\n    args, pyreader_name='reader', ernie_config=ernie_config)\r\n  File \"D:/pycharm/course/IR_chat/LARK-develop/LARK-develop/ERNIE/ernie_encoder.py\", line 185, in <module>\r\n    main(args)\r\nC++ Callstacks: \r\nEnforce failed. Expected allocating <= available, but received allocating:11440875110 > available:11143610112.\r\nInsufficient GPU memory to allocation. at [D:\\1.3.2\\paddle\\paddle\\fluid\\platform\\gpu_info.cc:216]\r\nPaddlePaddle Call Stacks: \r\nWindows not support stack backtrace yet.\r\nW0411 20:25:15.478150 40984 device_context.cc:263] Please NOTE: device: 0, CUDA Capability: 52, Driver API Version: 9.0, Runtime API Version: 8.0\r\nW0411 20:25:15.478150 40984 device_context.cc:271] device: 0, cuDNN Version: 7.0.\r\nW0411 20:25:15.478150 40984 device_context.cc:295] WARNING: device: 0. The installed Paddle is compiled with CUDNN 7.1, but CUDNN version in your machine is 7.0, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\r\n```\r\n\r\n这个问题该怎么解决呢？谢谢",
        "state": "closed",
        "user": "Walleclipse",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-11T12:32:50+00:00",
        "updated_at": "2019-06-17T03:55:21+00:00",
        "closed_at": "2019-06-17T03:55:21+00:00",
        "comments_count": [
            "tianxin1860",
            "Walleclipse",
            "Walleclipse",
            "sneaxiy",
            "Walleclipse",
            "sneaxiy",
            "Walleclipse",
            "Walleclipse",
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 88,
        "title": "关于汉字与数字的映射问题",
        "body": "![image](https://user-images.githubusercontent.com/28988355/56005377-9903ed80-5d02-11e9-8a06-9a11e14c01d7.png)\r\n\r\n为什么你们要单独做一个映射表出来?为什么不用python自带的ord()函数来做映射?为什么?这里有什么原理吗?",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "nbcc",
        "created_at": "2019-04-12T01:10:13+00:00",
        "updated_at": "2019-04-15T02:20:37+00:00",
        "closed_at": "2019-04-15T02:20:37+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 89,
        "title": "能否发布一些基于大型语料训练的模型呢？",
        "body": "",
        "state": "closed",
        "user": "gaikin",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-12T03:20:50+00:00",
        "updated_at": "2019-06-17T04:06:49+00:00",
        "closed_at": "2019-06-17T04:06:49+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 95,
        "title": "ERNIE接CRF层，做系列标注时报错了",
        "body": "做序列标注任务。\r\n修改了ERNIE的sequence_label.py文件，把模型ernie＋fc＋softmax换成ernie＋fc＋crf\r\n结果报错了，如下：\r\n（求解决方案，谢谢）\r\n\r\n> C++ Callstacks: \r\nEnforce failed. Expected emission_weights->NumLevels() == 1UL, but received emission_weights->NumLevels():0 != 1UL:1.\r\nThe Input(Emission) should be a sequence. at [/paddle/paddle/fluid/operators/crf_decoding_op.h:39]\r\n\r\n我的代码：\r\n```\r\nenc_out = ernie.get_sequence_output()\r\n\r\nfeature_out = fluid.layers.fc( input=enc_out, size=args.num_labels, num_flatten_dims=2, \r\n                  param_attr=fluid.ParamAttr( name=\"cls_seq_label_out_w\",         \r\n                                initializer=fluid.initializer.TruncatedNormal(scale=0.02)), \r\n                 bias_attr=fluid.ParamAttr( name=\"cls_seq_label_out_b\", initializer=fluid.initializer.Constant(0.)))\r\n\r\nfeature_out = fluid.layers.reshape(x=feature_out, shape=[-1, 1])\r\nret_labels = fluid.layers.reshape(x=labels, shape=[-1, 1])\r\ncrf_cost = fluid.layers.linear_chain_crf( input=feature_out, label=ret_labels, \r\n                                  param_attr=fluid.ParamAttr(name='crfw', learning_rate=1e-3))\r\nmean_loss = fluid.layers.mean(x=crf_cost)\r\nloss = fluid.layers.mean(x=mean_loss)\r\n\r\ncrf_decode = fluid.layers.crf_decoding( input=feature_out, param_attr=fluid.ParamAttr(name='crfw'))\r\n                                   ret_infers = fluid.layers.reshape(x=crf_decode, shape=[-1, 1])\r\n```",
        "state": "closed",
        "user": "SunnyGJing",
        "closed_by": "SunnyGJing",
        "created_at": "2019-04-13T10:36:31+00:00",
        "updated_at": "2019-04-13T10:55:45+00:00",
        "closed_at": "2019-04-13T10:36:52+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 90,
        "title": "怎么得到单个词的word embedding vector",
        "body": "你好，\r\n按照 [FAQ](https://github.com/PaddlePaddle/LARK/tree/develop/ERNIE#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E5%8F%A5%E5%AD%90%E7%BB%8F%E8%BF%87-ernie-%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84-embedding-%E8%A1%A8%E7%A4%BA)说的那样利用 `ernir_encoder.py `可以得到 `cls_emb.npy` 和 `top_layer_emb.npy` 。但是由于position embedding的存在，`top_layer_emb.npy`  中的每个token的embedding还跟位置有关是不是？如果我想像elmo一样得到一个**字典的word embedding vector**的话该怎么操作呢？\r\n谢谢",
        "state": "closed",
        "user": "Walleclipse",
        "closed_by": "Walleclipse",
        "created_at": "2019-04-12T04:33:12+00:00",
        "updated_at": "2019-04-14T01:09:56+00:00",
        "closed_at": "2019-04-14T01:09:56+00:00",
        "comments_count": [
            "tianxin1860",
            "Walleclipse"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 92,
        "title": "下载的百度预训练模型，可以作为checkpoint继续进行训练吗？",
        "body": "因为bert pytorch版本提供了language model fine tuning的方法，对预训练的model进行language model层面的fine tuning，或者可以理解为预训练模型上再次进行预训练。ERNIE模型现在只找到了下载的model直接进行fine tuning的方法，想知道有没有类似的language model fine tuning的方法。",
        "state": "closed",
        "user": "jeremyjiao",
        "closed_by": "nbcc",
        "created_at": "2019-04-12T10:02:49+00:00",
        "updated_at": "2019-04-15T02:15:18+00:00",
        "closed_at": "2019-04-15T02:15:18+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 91,
        "title": "运行ernie_encoder.py报错TypeError: write() argument must be str, not bytes",
        "body": "原始配置，原始数据，未做任何修改。命令行输出如下：\r\n-----------  Configuration Arguments -----------\r\nbatch_size: 32\r\ndata_set: ../task_data/lcqmc/dev.tsv\r\ndo_lower_case: True\r\nernie_config_path: config/ernie_config.json\r\ninit_pretraining_params: ../model/params\r\nmax_seq_len: 128\r\noutput_dir: ./test\r\nuse_cuda: False\r\nvocab_path: config/vocab.txt\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: relu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 513\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 2\r\nvocab_size: 18000\r\n------------------------------------------------\r\nDevice count: 40\r\nTotal num examples: 8802\r\nLoad pretraining parameters from ../model/params.\r\nTraceback (most recent call last):\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\n  File \"ernie_encoder.py\", line 172, in main\r\n    np.save(cls_emb_file, total_cls_emb)\r\n  File \"/home/tjmu/anaconda3/lib/python3.6/site-packages/numpy/lib/npyio.py\", line 511, in save\r\n    pickle_kwargs=pickle_kwargs)\r\n  File \"/home/tjmu/anaconda3/lib/python3.6/site-packages/numpy/lib/format.py\", line 565, in write_array\r\n    version)\r\n  File \"/home/tjmu/anaconda3/lib/python3.6/site-packages/numpy/lib/format.py\", line 335, in _write_array_header\r\n    fp.write(header_prefix)\r\nTypeError: write() argument must be str, not bytes",
        "state": "closed",
        "user": "xcxxdy",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-12T09:04:53+00:00",
        "updated_at": "2019-06-17T04:07:12+00:00",
        "closed_at": "2019-06-17T04:07:12+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 93,
        "title": "script/run_msra_ner.sh: line 33: 17400 Killed",
        "body": "Load pretraining parameters from model_path/params.\r\nscript/run_msra_ner.sh: line 33: 17400 Killed  \r\n求问下这个是什么原因？",
        "state": "closed",
        "user": "flytoylf",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-13T04:08:31+00:00",
        "updated_at": "2019-06-17T03:58:43+00:00",
        "closed_at": "2019-06-17T03:58:43+00:00",
        "comments_count": [
            "nbcc",
            "nightkid101"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 94,
        "title": "显卡内存不足导致的？但错误日志不明显，辛苦确认下。",
        "body": "同样的脚本，小样本语料都基本是ok的。\r\n大样本就会跪。\r\nbatch size是 64\r\n\r\n猜测是显存不足，但是错误日志看着很不明显，辛苦确认下。\r\n\r\nI0413 02:31:41.502923  6739 TrainerInternal.cpp:165]  Batch=48599 samples=3110336 AvgCost=0.726715 CurrentCost=6.82351 Eval: error=0.0763677  CurrentEval: error=0.46875\r\n*** Aborted at 1555093901 (unix time) try \"date -d @1555093901\" if you are using GNU date ***\r\nPC: @                0x0 (unknown)\r\n*** SIGFPE (@0x8d4166) received by PID 6739 (TID 0x7f7805a54700) from PID 9257318; stack trace: ***\r\n    @     0x7f7842117a30 (unknown)\r\n    @           0x8d4166 paddle::GpuVectorT<>::getAbsMax()\r\n    @           0x8768c2 _ZNSt17_Function_handlerIFvPN6paddle9ParameterEEZNS0_15TrainerInternal13trainOneBatchElRKNS0_9DataBatchEPSt6vectorINS0_8ArgumentESaIS9_EEEUlS2_E_E9_M_invokeERKSt9_Any_dataS2_\r\n    @           0x9db033 paddle::Parameter::incUpdate()\r\n    @           0x6d2259 paddle::FullMatrixProjection::backward()\r\n    @           0x69c18a paddle::MixedLayer::backward()\r\n    @           0x682b20 paddle::ParallelThread::computeThread()\r\n    @     0x7f7837f00530 execute_native_thread_routine\r\n    @     0x7f784210ff61 start_thread\r\n    @     0x7f7837690d0d clone\r\n    @                0x0 (unknown)",
        "state": "closed",
        "user": "onfireisme",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-13T08:55:24+00:00",
        "updated_at": "2020-05-28T13:52:41+00:00",
        "closed_at": "2020-05-28T13:52:41+00:00",
        "comments_count": [
            "onfireisme",
            "kuke",
            "onfireisme",
            "kuke",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 96,
        "title": "ERNIE 接 CRF 层报错（序列标注任务）",
        "body": "做序列标注任务。\r\n修改了ERNIE的sequence_label.py文件，把模型ernie＋fc＋softmax换成ernie＋fc＋crf\r\n结果报错了，如下：\r\n（求解决方案，谢谢）\r\n\r\n> C++ Callstacks: \r\nEnforce failed. Expected emission_weights->NumLevels() == 1UL, but received emission_weights->NumLevels():0 != 1UL:1.\r\nThe Input(Emission) should be a sequence. at [/paddle/paddle/fluid/operators/crf_decoding_op.h:39]\r\n\r\n我的代码：\r\n```\r\nenc_out = ernie.get_sequence_output()\r\n\r\nfeature_out = fluid.layers.fc( input=enc_out, size=args.num_labels, num_flatten_dims=2, \r\n                  param_attr=fluid.ParamAttr( name=\"cls_seq_label_out_w\",         \r\n                                initializer=fluid.initializer.TruncatedNormal(scale=0.02)), \r\n                 bias_attr=fluid.ParamAttr( name=\"cls_seq_label_out_b\", initializer=fluid.initializer.Constant(0.)))\r\n\r\nfeature_out = fluid.layers.flatten(feature_out, axis=2)\r\nret_labels = fluid.layers.flatten(labels, axis=2)\r\ncrf_cost = fluid.layers.linear_chain_crf( input=feature_out, label=ret_labels, \r\n                                  param_attr=fluid.ParamAttr(name='crfw', learning_rate=1e-3))\r\nloss = fluid.layers.mean(x=crf_cost)\r\n\r\ncrf_decode = fluid.layers.crf_decoding( input=feature_out, param_attr=fluid.ParamAttr(name='crfw'))\r\nret_infers = fluid.layers.flatten(crf_decode, axis=2)\r\n```",
        "state": "closed",
        "user": "SunnyGJing",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-13T10:58:57+00:00",
        "updated_at": "2020-05-28T12:52:57+00:00",
        "closed_at": "2020-05-28T12:52:57+00:00",
        "comments_count": [
            "wq343580510",
            "wangmz15",
            "xiaopp123",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 97,
        "title": "关于多张GPU并行计算的方法",
        "body": "一张GPU显存不足，我想多张一起训练，请问在什么地方修改？？？",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-15T10:01:47+00:00",
        "updated_at": "2020-05-28T12:52:39+00:00",
        "closed_at": "2020-05-28T12:52:39+00:00",
        "comments_count": [
            "SunnyGJing",
            "jtyoui",
            "jtyoui",
            "SunnyGJing",
            "AvalonSama",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 102,
        "title": "在开始预训练之前需要把 CUDA、cuDNN、NCCL2 等动态库路径加入到环境变量 LD_LIBRARY_PATH 之中",
        "body": "小白求教",
        "state": "closed",
        "user": "WHQ1111",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-17T03:35:52+00:00",
        "updated_at": "2019-04-17T16:27:43+00:00",
        "closed_at": "2019-04-17T16:27:43+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 99,
        "title": "xnli数据集复现，dev-acc:0.780,test-acc:0.770,没有达到发布的效果",
        "body": "直接运行 bash script/run_xnli.sh   训练后的结果与发布不对，然后把xnli训练集的空格去掉，再训练也没有达到相应的效果",
        "state": "closed",
        "user": "shuying136",
        "closed_by": "tianxin1860",
        "created_at": "2019-04-16T03:14:29+00:00",
        "updated_at": "2019-04-26T05:01:28+00:00",
        "closed_at": "2019-04-22T15:10:02+00:00",
        "comments_count": [
            "tianxin1860",
            "Vincent717"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 107,
        "title": "单机多卡并行pretrain的时候gpu利用率不稳定",
        "body": "求问为什么我pretrain的额时候gpu利用率一会是20-30，一会儿是90%多 最后平均下来只有50%左右，是因为在生成数据mask的时候阻塞了吗？batch_size  in_token（4096）",
        "state": "closed",
        "user": "wq343580510",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-18T11:42:20+00:00",
        "updated_at": "2020-05-28T13:52:42+00:00",
        "closed_at": "2020-05-28T13:52:42+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 111,
        "title": "[ERNIE] Request for the weights of \"masked LM\" and \"next sentence prediction\" layers",
        "body": "Hi, could you help provide the weights of \"masked LM\" and \"next sentence prediction\" layers? Namely as followed:\r\n\r\n```\r\ncls/predictions/transform/dense/bias\r\ncls/predictions/transform/dense/kernel\r\ncls/predictions/transform/LayerNorm/beta\r\ncls/predictions/transform/LayerNorm/gamma\r\ncls/predictions/output_bias\r\ncls/seq_relationship/output_bias\r\ncls/seq_relationship/output_weights\r\n```\r\n\r\nIt seems like the current release (1.0.1) does not contain those weights.",
        "state": "closed",
        "user": "huntzhan",
        "closed_by": "huntzhan",
        "created_at": "2019-04-25T08:27:46+00:00",
        "updated_at": "2019-09-20T04:07:46+00:00",
        "closed_at": "2019-05-05T06:40:22+00:00",
        "comments_count": [
            "linjianz",
            "huntzhan",
            "linjianz"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 110,
        "title": "单机单卡能跑通, 单机多卡会在fluid.ParallelExecutor处报SegmentationFault",
        "body": "[问题描述]\r\n运行script/run_xnli.sh时, 单机单卡能够顺利运行, 但多卡会在fluid.ParallelExecutor处报SegmentationFault\r\n\r\n[报错位置]\r\nrun_classifier.py中\r\n```\r\n167     if args.do_train:\r\n168         print(\"do_train:\")\r\n169         exec_strategy = fluid.ExecutionStrategy()\r\n170         if args.use_fast_executor:\r\n171             exec_strategy.use_experimental_executor = True\r\n172         exec_strategy.num_threads = dev_count\r\n173         exec_strategy.num_iteration_per_drop_scope = args.num_iteration_per_drop_scope\r\n174\r\n175         print(\"init fluid.ParallelExecutor\")  # 此处之后报错\r\n176         train_exe = fluid.ParallelExecutor(\r\n177             use_cuda=args.use_cuda,\r\n178             loss_name=graph_vars[\"loss\"].name,\r\n179             exec_strategy=exec_strategy,\r\n180             main_program=train_program)\r\n181\r\n182         print(\" train_pyreader.decorate_tensor_provider(train_data_generator)\")\r\n183         train_pyreader.decorate_tensor_provider(train_data_generator)\r\n```\r\n[错误信息]\r\n\r\n![image](https://user-images.githubusercontent.com/15260093/56635533-91e0c600-6698-11e9-9118-542b22a6477f.png)\r\n\r\nTheoretical memory usage in training: 9076.691 - 9508.915 MB\r\nW0424 13:34:08.421407  8512 device_context.cc:263] Please NOTE: device: 0, CUDA Capability: 61, Driver API Version: 9.2, Runtime API Version: 9.0\r\nW0424 13:34:08.421470  8512 device_context.cc:271] device: 0, cuDNN Version: 7.0.\r\nW0424 13:34:08.421519  8512 device_context.cc:295] WARNING: device: 0. The installed Paddle is compiled with CUDNN 7.3, but CUDNN version in your machine is 7.0, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\r\nLoad pretraining parameters from ./checkpoint/ernie_stable//params.\r\ndo_train:\r\ninit fluid.ParallelExecutor\r\n*** Aborted at 1556084061 (unix time) try \"date -d @1556084061\" if you are using GNU date ***\r\nPC: @                0x0 (unknown)\r\n*** SIGSEGV (@0x0) received by PID 8512 (TID 0x7f99f42ca700) from PID 0; stack trace: ***\r\n    @     0x7f99f3a81160 (unknown)\r\n    @                0x0 (unknown)\r\nscript/run_xnli.sh: line 44:  8512 Segmentation fault      ${PYTHON} -u run_classifier.py --use_cuda true --do_train true --do_val true --do_test true --verbose true --batch_size 4192 --in_tokens true --init_pretraining_params ${MODEL_PATH}/params --train_set ${TASK_DATA_PATH}/xnli/train.tsv --dev_set ${TASK_DATA_PATH}/xnli/dev.tsv --test_set ${TASK_DATA_PATH}/xnli/test.tsv --vocab_path config/vocab.txt --label_map ${TASK_DATA_PATH}/xnli/label_map.json --ernie_config_path config/ernie_config.json --checkpoints ./checkpoints --save_steps 1000 --weight_decay 0.01 --warmup_proportion 0.0 --validation_steps 25 --epoch 3 --max_seq_len 512 --learning_rate 1e-4 --skip_steps 10 --num_iteration_per_drop_scope 1 --num_labels 3 --random_seed 1\r\n\r\n[运行环境]\r\n```\r\npaddlepaddle-gpu==1.3.0.post85\r\ncuda-9.0\r\ncudnn_v7\r\n```\r\n[运行脚本(script/run_xnli.sh)]\r\n```\r\nexport FLAGS_sync_nccl_allreduce=1\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7\r\nexport LD_LIBRARY_PATH=./env/lib/:$LD_LIBRARY_PATH\r\nexport LD_LIBRARY_PATH=/home/work/cuda-9.0/lib64/:/home/work/cudnn/cudnn_v7/cuda/lib64:/home/work/cuda-9.0/extras/CUPTI/lib64/:$LD_LIBRARY_PATH\r\n\r\nTASK_DATA_PATH=./task_data\r\nMODEL_PATH=./checkpoint/ernie_stable/\r\n\r\nPYTHON=./env/python3/bin/python3\r\n${PYTHON} -u run_classifier.py \\\r\n                   --use_cuda true \\\r\n                   --do_train true \\\r\n                   --do_val true \\\r\n                   --do_test true \\\r\n                   --verbose true \\\r\n                   --batch_size 8192 \\\r\n                   --in_tokens true \\\r\n                   --init_pretraining_params ${MODEL_PATH}/params \\\r\n                   --train_set ${TASK_DATA_PATH}/xnli/train.tsv \\\r\n                   --dev_set ${TASK_DATA_PATH}/xnli/dev.tsv \\\r\n                   --test_set ${TASK_DATA_PATH}/xnli/test.tsv \\\r\n                   --vocab_path config/vocab.txt \\\r\n                   --label_map ${TASK_DATA_PATH}/xnli/label_map.json \\\r\n                   --ernie_config_path config/ernie_config.json \\\r\n                   --checkpoints ./checkpoints \\\r\n                   --save_steps 1000 \\\r\n                   --weight_decay  0.01 \\\r\n                   --warmup_proportion 0.0 \\\r\n                   --validation_steps 25 \\\r\n                   --epoch 3 \\\r\n                   --max_seq_len 512 \\\r\n                   --learning_rate 1e-4 \\\r\n                   --skip_steps 10 \\\r\n                   --num_iteration_per_drop_scope 1 \\\r\n                   --num_labels 3 \\\r\n                   --random_seed 1\r\n```",
        "state": "closed",
        "user": "daizh",
        "closed_by": "daizh",
        "created_at": "2019-04-24T05:53:30+00:00",
        "updated_at": "2019-05-11T06:18:53+00:00",
        "closed_at": "2019-05-11T06:18:53+00:00",
        "comments_count": [
            "MarvinLong",
            "daizh",
            "MarvinLong",
            "daizh"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 112,
        "title": "paddle fliud1.3 fluid.ParallelExecutor killed ",
        "body": "if args.do_train:\r\n        print(\"start exec_strategy!!!\")\r\n        exec_strategy = fluid.ExecutionStrategy()\r\n        exec_strategy.use_experimental_executor = args.use_fast_executor\r\n        exec_strategy.num_threads = 4\r\n        exec_strategy.num_iteration_per_drop_scope = args.num_iteration_per_drop_scope\r\n        train_exe = fluid.ParallelExecutor(  #运行到此处直接被killed\r\n            use_cuda=args.use_cuda,\r\n            loss_name=loss.name,\r\n            exec_strategy=exec_strategy,\r\n            main_program=train_program)\r\n        #train_exe = fluid.Executor(fluid.CPUPlace())\r\n        train_pyreader.decorate_tensor_provider(train_data_generator)\r\n\r\n只显示killed，没有任何别的错误",
        "state": "closed",
        "user": "shouonga",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-28T13:25:26+00:00",
        "updated_at": "2020-05-28T12:52:36+00:00",
        "closed_at": "2020-05-28T12:52:36+00:00",
        "comments_count": [
            "qingqing01",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 109,
        "title": "针对分好词的 contextualized embedding",
        "body": "有针对分好词的 contextualized embedding 能用吗？",
        "state": "closed",
        "user": "allanj",
        "closed_by": "allanj",
        "created_at": "2019-04-19T16:20:32+00:00",
        "updated_at": "2019-06-20T04:06:40+00:00",
        "closed_at": "2019-06-20T04:06:40+00:00",
        "comments_count": [
            "tianxin1860",
            "allanj",
            "tianxin1860",
            "allanj"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 114,
        "title": "将tf bert-finetune好的模型转成paddlepaddle bert，多次输入相同数据得到随机结果",
        "body": "1、使用到的模型是使用tf bert finetune得到的，然后使用paddle convert_params.py转化为paddle使用的参数\r\n2、使用predict_classifier.py加载模型和tf bert参数进行预测（仅预测），但是每次相同的输入，得到不同的结果，结果看起来是随机产生的\r\n\r\n\r\n下面是两次运行的结果，输入都是一样的\r\nexample_id\tother  pandian\r\n0\t【other】:0.487623035908\t【pandian】:0.512376964092\r\n1\t【other】:0.533201098442\t【pandian】:0.466798841953\r\n2\t【other】:0.732181191444\t【pandian】:0.267818838358\r\n3\t【other】:0.45169121027\t【pandian】:0.54830878973\r\n4\t【other】:0.742064535618\t【pandian】:0.257935374975\r\n5\t【other】:0.700235486031\t【pandian】:0.299764573574\r\n\r\nexample_id\tother  pandian\r\n0\t【other】:0.439970225096\t【pandian】:0.560029745102\r\n1\t【other】:0.382961928844\t【pandian】:0.617038071156\r\n2\t【other】:0.561285734177\t【pandian】:0.438714265823\r\n3\t【other】:0.437107682228\t【pandian】:0.562892317772\r\n4\t【other】:0.546676933765\t【pandian】:0.45332300663\r\n5\t【other】:0.534944057465\t【pandian】:0.465055942535",
        "state": "closed",
        "user": "littlepan0413",
        "closed_by": "kuke",
        "created_at": "2019-04-29T13:13:08+00:00",
        "updated_at": "2019-04-30T14:44:21+00:00",
        "closed_at": "2019-04-30T14:44:21+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 113,
        "title": "unhandled cuda error 多卡跑pretrain的时候，cuDNN和NCCL都装了",
        "body": "```\r\nW0429 09:42:47.633998 34675 device_context.cc:261] Please NOTE: device: 0, CUDA Capability: 61, Driver API Version: 9.0, Runtime API Version: 9.0\r\nW0429 09:42:47.638882 34675 device_context.cc:269] device: 0, cuDNN Version: 7.0.\r\nParallelExecutor is deprecated. Please use CompiledProgram and Executor. CompiledProgram is a central place for optimization and Executor is the unified executor. Example can be found in compiler.py.\r\nW0429 09:42:51.247493 34675 graph.h:204] WARN: After a series of passes, the current graph can be quite different from OriginProgram. So, please avoid using the `OriginProgram()` method!\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 357, in <module>\r\n    train(args)\r\n  File \"./train.py\", line 272, in train\r\n    trainer_id=nccl2_trainer_id)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/parallel_executor.py\", line 134, in __init__\r\n    self._compiled_program._compile(place=self._place, scope=self._scope)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/compiler.py\", line 307, in _compile\r\n    scope=self._scope)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/compiler.py\", line 278, in _compile_data_parallel\r\n    self._exec_strategy, self._build_strategy, self._graph)\r\npaddle.fluid.core.EnforceNotMet: unhandled cuda error at [/paddle/paddle/fluid/platform/nccl_helper.h:113]\r\n```\r\npython 3.5\r\ncuda 9.0\r\n在跑ernie的多卡与训练的时候报的错。cudnn和nccl2都装了，这个报错太不明显了。大家有遇到吗？\r\n",
        "state": "closed",
        "user": "fyubang",
        "closed_by": "stale[bot]",
        "created_at": "2019-04-29T09:44:17+00:00",
        "updated_at": "2020-05-28T12:52:40+00:00",
        "closed_at": "2020-05-28T12:52:40+00:00",
        "comments_count": [
            "Biaocsu",
            "fyubang",
            "Biaocsu",
            "fyubang",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 115,
        "title": "做预测时, 是不是ernie_config应该和做训练时不同?",
        "body": "https://github.com/PaddlePaddle/LARK/blob/b9dae026c25602b96adf7ee776ff9f894c912338/ERNIE/run_classifier.py#L134\r\n\r\n预测时, 使用和训练时同样的ernie_config, 会导致attention_probs_dropout_prob\": 0.1,和\"hidden_dropout_prob\": 0.1. 而create_model()又没有区分train和test的参数.\r\n所以测试时应该使用单独的配置, 或给create_model()一个区分train和test的参数.\r\n\r\n不知到我的理解对不对?",
        "state": "closed",
        "user": "Robets2020",
        "closed_by": "Robets2020",
        "created_at": "2019-04-30T10:43:28+00:00",
        "updated_at": "2019-05-08T03:27:21+00:00",
        "closed_at": "2019-05-08T03:27:21+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 117,
        "title": "论文下载",
        "body": "请问ERNIE模型的论文在哪里下载？",
        "state": "closed",
        "user": "Jun-jie-Huang",
        "closed_by": "Jun-jie-Huang",
        "created_at": "2019-05-03T13:22:10+00:00",
        "updated_at": "2019-05-05T04:54:49+00:00",
        "closed_at": "2019-05-05T04:54:49+00:00",
        "comments_count": [
            "Das-Boot"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 122,
        "title": "ELMo中LAC_Demo的network.py中ipdb不适合暴露给用户",
        "body": "network.py 第12行import ipdb\r\nipdb是一种调试工具，不适合暴露给用户，否则可能报错，如下：\r\n<img width=\"864\" alt=\"3a20b5a8c0e34fe9e15d5df2999d1d8c\" src=\"https://user-images.githubusercontent.com/48793257/57214900-f0555f00-701d-11e9-9cdb-0cd059958f98.png\">\r\n",
        "state": "closed",
        "user": "Steffy-zxf",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-06T08:42:42+00:00",
        "updated_at": "2019-06-11T06:49:49+00:00",
        "closed_at": "2019-06-11T06:49:49+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 124,
        "title": "BUG! ELMo中train.py epoch_id 缺少定义",
        "body": "epoch_id 缺少定义（train.py 558行）\r\n![image](https://user-images.githubusercontent.com/48793257/57215864-c3ef1200-7020-11e9-90d9-cceab57fc398.png)\r\n\r\n",
        "state": "closed",
        "user": "Steffy-zxf",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-06T09:04:55+00:00",
        "updated_at": "2019-06-11T06:55:53+00:00",
        "closed_at": "2019-06-11T06:55:53+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 118,
        "title": "[ERNIE] Missing weight `next_sent_fc` in the latest release",
        "body": "Hi Team,\r\n\r\nThanks for releasing the pre-trained model of ERNIE.\r\n\r\nThere's a small issue: the parameters`next_sent_fc.w_0` and `next_sent_fc.b_0` are not included in the latest release. Instead, `next_sent_3cls_fc.b_0` and `next_sent_3cls_fc.w_0` are included, and the name `next_sent_3cls_fc` (for 3-way classification, I think) does not appear in the codebase.\r\n\r\nhttps://github.com/PaddlePaddle/LARK/blob/c1631d04348f361abbd9da7b83f1f8c9c0fe2aab/ERNIE/model/ernie.py#L213-L215\r\n\r\nCould you help provide the original dumps of `next_sent_fc.w_0` and `next_sent_fc.b_0`?\r\n@tianxin1860 @kuke \r\n ",
        "state": "closed",
        "user": "huntzhan",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-05T06:56:14+00:00",
        "updated_at": "2020-05-28T12:52:38+00:00",
        "closed_at": "2020-05-28T12:52:38+00:00",
        "comments_count": [
            "huntzhan",
            "huntzhan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 120,
        "title": "BUG! ELMo模型训练无法运行",
        "body": "模型训练，sh run.sh\r\n发现报错：\r\n![image](https://user-images.githubusercontent.com/48793257/57210358-fbed5980-700e-11e9-93e2-849ea7c746c6.png)\r\n",
        "state": "closed",
        "user": "Steffy-zxf",
        "closed_by": "Steffy-zxf",
        "created_at": "2019-05-06T06:55:41+00:00",
        "updated_at": "2019-05-06T07:09:43+00:00",
        "closed_at": "2019-05-06T07:09:43+00:00",
        "comments_count": [
            "JesseyXujin"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 126,
        "title": "CPU模式grpc超时",
        "body": "木有GPU资源，想用CPU MPI集群跑来试试，预期能跑无非是慢一点（local单trainer能跑通），但报grpc超时，FLAGS_rpc_deadline已经设的很大，看上去是访问pserver的问题？\r\n\r\nF0430 17:17:47.899032 30175 grpc_client.cc:408] BatchBarrierRPC name:[BATCH_BARRIER@RECV], ep:[ip:port], status:[-1] meets grpc error, error_code:4 error_message:Deadline Exceeded error_details:\r\n",
        "state": "closed",
        "user": "superxiaoyu",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-06T09:29:12+00:00",
        "updated_at": "2020-05-28T12:52:51+00:00",
        "closed_at": "2020-05-28T12:52:51+00:00",
        "comments_count": [
            "seiriosPlus",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 119,
        "title": "funetuning 时候，任务数据下载不一致",
        "body": "对应的数据链接只下载到一个文本文件，无法执行readme.md中所描述的“将下载的任务数据解压到 ${TASK_DATA_PATH} 路径下，${TASK_DATA_PATH} 路径包含 LCQMC、XNLI、MSRA-NER、ChnSentCorp、 nlpcc-dbqa 5个任务的训练数据和测试数据；”",
        "state": "closed",
        "user": "fw339wj",
        "closed_by": "zhanghan1992",
        "created_at": "2019-05-05T13:45:13+00:00",
        "updated_at": "2019-08-01T17:48:43+00:00",
        "closed_at": "2019-06-11T07:13:45+00:00",
        "comments_count": [
            "huntzhan",
            "fw339wj",
            "dingjieliu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 127,
        "title": "ERNIE:CPU版跑ChnSentiCorp报Windows not support stack backtrace yet.",
        "body": "开始是内存不足，调整batch_size为2后，内存应该是能满足（实际8G）。但是后面又报错了。\r\n运行环境是win10，CPU，内存8G，paddlepaddle 1.4.1。\r\n---\r\nTheoretical memory usage in training: 3420.067 - 3582.927 MB\r\nwarm validate or test\r\nLoad pretraining parameters from MODEL_PATH/params.\r\nParallelExecutor is deprecated. Please use CompiledProgram and Executor. CompiledProgram is a central place for optimization and Executor is the unified\r\nexecutor. Example can be found in compiler.py.\r\nW0506 20:38:55.854854 15620 graph.h:204] WARN: After a series of passes, the current graph can be quite different from OriginProgram. So, please avoid us\r\ning the `OriginProgram()` method!\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 307, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 201, in main\r\n    main_program=train_program)\r\n  File \"D:\\python3\\lib\\site-packages\\paddle\\fluid\\parallel_executor.py\", line 134, in __init__\r\n    self._compiled_program._compile(place=self._place, scope=self._scope)\r\n  File \"D:\\python3\\lib\\site-packages\\paddle\\fluid\\compiler.py\", line 307, in _compile\r\n    scope=self._scope)\r\n  File \"D:\\python3\\lib\\site-packages\\paddle\\fluid\\compiler.py\", line 278, in _compile_data_parallel\r\n    self._exec_strategy, self._build_strategy, self._graph)\r\npaddle.fluid.core.EnforceNotMet: Fail to allocate CPU memory: size = 263382656 . at [D:\\1.4.1\\paddle\\paddle\\fluid\\memory\\detail\\system_allocator.cc:56]\r\nPaddlePaddle Call Stacks:\r\nWindows not support stack backtrace yet.\r\n",
        "state": "closed",
        "user": "shenlan211314",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-06T12:43:53+00:00",
        "updated_at": "2020-05-28T11:52:43+00:00",
        "closed_at": "2020-05-28T11:52:43+00:00",
        "comments_count": [
            "shenlan211314",
            "shenlan211314",
            "Dkhaha",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 128,
        "title": "关于训练数据处理的几点疑问",
        "body": "[tensoflow 中数据情况]\r\n tensorflow版本中, 最后的明文中不同文档间使用空行切分, 同一个文档间每句是一行.\r\n\r\n[关于LARK的几点疑问]\r\n1. 不同文档间还需要按照空行切分吗? 我看demo中并没有\r\n2. 一个样本是一个文档还是一个段落?\r\n3. sentence_type_ids 和 next_sentence_label判断条件是什么?\r\n4. token_ids中1 和 2是不是表示[CLS] 和 [SEP] ?\r\n\r\n[ 有没有哪位大佬可以提供数据处理脚本参考下, 不胜感激]",
        "state": "closed",
        "user": "MarvinLong",
        "closed_by": "zhanghan1992",
        "created_at": "2019-05-07T02:06:28+00:00",
        "updated_at": "2019-06-11T06:53:58+00:00",
        "closed_at": "2019-06-11T06:53:58+00:00",
        "comments_count": [
            "huntzhan",
            "MarvinLong",
            "huntzhan",
            "MarvinLong"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 131,
        "title": "实体识别中，max_seq_len设置成500，为什么打印预测的dev的label长度有大于500的？",
        "body": "",
        "state": "closed",
        "user": "zle1992",
        "closed_by": "zle1992",
        "created_at": "2019-05-11T12:27:05+00:00",
        "updated_at": "2019-05-12T01:31:45+00:00",
        "closed_at": "2019-05-12T01:31:45+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 130,
        "title": "i tried to do text similarity on LCQMC, but for BERT, i can't get comparable results",
        "body": "I had tried to re-produce results on LCQMC using BERT. I can't achieve 0.87 accuracy, just 0.85. is there something wrong ?",
        "state": "closed",
        "user": "yyht",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-10T06:48:28+00:00",
        "updated_at": "2020-05-28T12:52:45+00:00",
        "closed_at": "2020-05-28T12:52:45+00:00",
        "comments_count": [
            "Olivia-xu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 133,
        "title": "重复声明了cls_feats变量是怎么回事？",
        "body": "https://github.com/PaddlePaddle/LARK/blob/1b54d1444bfde000efa3e71ddf04396c89fd7186/ERNIE/finetune/classifier.py#L51-L55\r\n这个代码怎么回事？(◎-◎；)写错了还是怎么的？",
        "state": "closed",
        "user": "yayaQAQ",
        "closed_by": "yayaQAQ",
        "created_at": "2019-05-13T02:47:38+00:00",
        "updated_at": "2019-05-13T10:02:02+00:00",
        "closed_at": "2019-05-13T10:02:02+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 129,
        "title": "用自己数据多卡做ERNIE语言模型任务的fine tune的时候，没有规律卡在某一步",
        "body": "多卡做ernie语言模型任务的fine tune的时候，经常遇到，运行到一定步数就卡住的情况，卡住的时候，多卡中的部分卡依旧100%，部分卡0%。并且卡的步数没有规律。同步并不报错，怀疑是nccl的问题。运行坏境是8卡p40。\r\n卡住时，gpu这样：\r\n<img width=\"523\" alt=\"github1\" src=\"https://user-images.githubusercontent.com/25549892/57455387-9a8eea00-729d-11e9-90f5-245652a1e218.png\">\r\n日志：\r\n<img width=\"1279\" alt=\"github2\" src=\"https://user-images.githubusercontent.com/25549892/57455393-9cf14400-729d-11e9-9971-5b9f57531147.png\">\r\n脚本的超参：\r\n![github3](https://user-images.githubusercontent.com/25549892/57455400-9f539e00-729d-11e9-8a3e-6f8eca5b8dd7.png)\r\n挺多人遇到类似问题的。\r\n",
        "state": "closed",
        "user": "fyubang",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-09T13:02:28+00:00",
        "updated_at": "2020-05-28T12:52:59+00:00",
        "closed_at": "2020-05-28T12:52:59+00:00",
        "comments_count": [
            "kuke",
            "fyubang",
            "LukeALee",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 132,
        "title": "Report of Training consumption",
        "body": "Can you report the training consumption of ERNIE, such as number of GPU cards and training time? I could not found this in the paper.",
        "state": "closed",
        "user": "zhengwsh",
        "closed_by": "zhanghan1992",
        "created_at": "2019-05-12T09:24:51+00:00",
        "updated_at": "2019-06-18T11:06:12+00:00",
        "closed_at": "2019-06-18T11:06:12+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 134,
        "title": "训练任务killed",
        "body": "下载了bert的demo，在开发机本地运行train.sh，任务直接被killed\r\n![image](https://user-images.githubusercontent.com/14048056/57620381-30d35080-75bb-11e9-8b5d-7e991a8177ba.png)\r\n",
        "state": "closed",
        "user": "MaxLingwei",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-13T12:11:04+00:00",
        "updated_at": "2019-10-12T09:15:09+00:00",
        "closed_at": "2019-06-17T03:51:10+00:00",
        "comments_count": [
            "seiriosPlus",
            "seiriosPlus",
            "Superjomn",
            "jiayouff",
            "wang154917190"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 135,
        "title": "怎么预测被masked的词语？",
        "body": "您好，请问如何使用模型预测被mask的词语呢？\r\n我想要将一个句子的某个词语mask遮住，然后使用模型去预测这个词语，得到候选词和词语的概率，请问是否有相关的接口？🙏",
        "state": "closed",
        "user": "AnShengqiang",
        "closed_by": "AnShengqiang",
        "created_at": "2019-05-15T07:42:54+00:00",
        "updated_at": "2020-03-05T07:52:46+00:00",
        "closed_at": "2019-05-16T11:08:43+00:00",
        "comments_count": [
            "daizh",
            "AnShengqiang",
            "yayaQAQ",
            "yayaQAQ",
            "daizh",
            "yayaQAQ"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 138,
        "title": "ERNIE 中finetuning遇到一个index out of range的问题",
        "body": "在finetuning的文件夹下面的classifier中，遇到一个这样的问题：\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/wxc/Desktop/NLP/NLPCC2019/LARK/ERNIE/run_classifier.py\", line 282, in <module>\r\n    main(args)\r\n  File \"C:/Users/wxc/Desktop/NLP/NLPCC2019/LARK/ERNIE/run_classifier.py\", line 202, in main\r\n    graph_vars, \"train\")\r\n  File \"C:\\Users\\wxc\\Desktop\\NLP\\NLPCC2019\\LARK\\ERNIE\\finetune\\classifier.py\", line 259, in evaluate\r\n    ret[\"learning_rate\"] = float(outputs[4][0])\r\nIndexError: list index out of range\r\nW0518 13:45:05.752697 14328 graph.h:204] WARN: After a series of passes, the current graph can be quite different from OriginProgram. So, please avoid using the `OriginProgram()` method!\r\nI0518 13:45:10.330855 14328 build_strategy.cc:285] SeqOnlyAllReduceOps:0, num_trainers:1\r\n\r\n\r\n代码如下：\r\n\r\n`def evaluate(exe, test_program, test_pyreader, graph_vars, eval_phase):\r\n    train_fetch_list = [\r\n        graph_vars[\"loss\"].name, graph_vars[\"accuracy\"].name,\r\n        graph_vars[\"num_seqs\"].name\r\n    ]\r\n\r\n    if eval_phase == \"train\":\r\n        if \"learning_rate\" in graph_vars:\r\n            train_fetch_list.append(graph_vars[\"learning_rate\"].name)\r\n        outputs = exe.run(fetch_list=train_fetch_list)\r\n        ret = {\"loss\": np.mean(outputs[0]), \"accuracy\": np.mean(outputs[1])}\r\n        print(\"outputs:\", outputs)\r\n\r\n        if \"learning_rate\" in graph_vars:\r\n            ret[\"learning_rate\"] = float(outputs[4][0])\r\n        return ret\r\n\r\n我认为 ret[\"learning_rate\"] = float(outputs[4][0])中应该outputs为[3][0],请确认。",
        "state": "closed",
        "user": "fw339wj",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-18T08:05:22+00:00",
        "updated_at": "2019-06-17T03:47:09+00:00",
        "closed_at": "2019-06-17T03:47:09+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 136,
        "title": "多类别分类任务，预测结果只有一个吗",
        "body": "我通过finetune训练了一个多类别的分类任务，预测的时候，result都只返回了一个结果，没有置信度。这个是正确的吗，有什么方法能获取到置信度嘛",
        "state": "closed",
        "user": "luo1129",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-15T13:37:13+00:00",
        "updated_at": "2020-05-28T12:52:44+00:00",
        "closed_at": "2020-05-28T12:52:44+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 139,
        "title": "pretrain和finetune 支持多GPU计算吗，多个显卡都能用于模型实际的计算？",
        "body": "指定使用多张显卡时，每张卡都会用于模型计算吗？还是实际上只能用一个卡计算，虽然还指定了其他卡，但仅仅是占着，并没有实际用于计算？",
        "state": "closed",
        "user": "xuehui0725",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-19T14:54:28+00:00",
        "updated_at": "2019-06-01T09:46:16+00:00",
        "closed_at": "2019-06-01T09:46:16+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 142,
        "title": "提示GpuMemcpySync错误： unspecified launch failure",
        "body": "原网络正常运行，在此之上添加如下代码（只修改网络内部结构，输入输出接口不变），reader部分却报错，请问可能什么原因\r\n![image](https://user-images.githubusercontent.com/7474360/58165818-197f1c00-7cbb-11e9-997d-c6fc1aa2eb12.png)\r\n\r\n 添加代码（lstm网络）：\r\n![image](https://user-images.githubusercontent.com/7474360/58165958-5fd47b00-7cbb-11e9-8e3d-a359dcfdce2b.png)\r\n",
        "state": "closed",
        "user": "thomas010",
        "closed_by": "thomas010",
        "created_at": "2019-05-22T09:59:53+00:00",
        "updated_at": "2019-05-22T10:01:19+00:00",
        "closed_at": "2019-05-22T10:01:19+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 140,
        "title": "conda下面安装遇到的 request版本冲突问题",
        "body": "Python 3.6.1 :: Anaconda 4.4.0 (x86_64)\r\npip3 install paddlepaddle 时报错\r\n\r\n......\r\nconda 4.6.14 requires ruamel_yaml>=0.11.14, which is not installed.\r\nconda 4.6.14 has requirement requests>=2.12.4, but you'll have requests 2.9.2 which is incompatible.\r\nInstalling collected packages: requests, recordio, funcsigs, opencv-python, kiwisolver, matplotlib, graphviz, paddlepaddle\r\n  Found existing installation: requests 2.21.0\r\n    Uninstalling requests-2.21.0:\r\nCould not install packages due to an EnvironmentError: [Errno 13] Permission denied: '/Users/bird/anaconda/lib/python3.6/site-packages/requests-2.21.0.dist-info/INSTALLER'\r\nConsider using the `--user` option or check the permissions.\r\n\r\n好像conda不允许你替换到他的requests版本哦，你这个2.9.2版本可以升到2.12吗\r\n",
        "state": "closed",
        "user": "linkinbird",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-20T03:06:03+00:00",
        "updated_at": "2020-05-28T12:52:50+00:00",
        "closed_at": "2020-05-28T12:52:50+00:00",
        "comments_count": [
            "JiabinYang",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 141,
        "title": "能问下预训练用的百度百科可以从哪里下载吗？",
        "body": "跪求",
        "state": "closed",
        "user": "fudanchenjiahao",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-22T06:45:05+00:00",
        "updated_at": "2019-06-17T03:52:49+00:00",
        "closed_at": "2019-06-17T03:52:49+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 143,
        "title": "README.md文档：获取embedding时示例运行命令ernir_encoder.py文件名问题",
        "body": "项目中有一个ernie_encoder.py的脚本，README.md中脚本名字写错了。",
        "state": "closed",
        "user": "vanclsky",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-23T06:27:54+00:00",
        "updated_at": "2019-06-17T03:34:53+00:00",
        "closed_at": "2019-06-17T03:34:53+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 144,
        "title": "Compiled with WITH_GPU, but no GPU found in runtime.",
        "body": "为啥老是出现这个问题？之前认为是版本不对所以重新安装对应版本之后解决了，但是不知为啥一天之后又出现在了这个问题？这么不稳定吗？",
        "state": "closed",
        "user": "WHQ1111",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-27T03:46:27+00:00",
        "updated_at": "2020-05-28T10:52:43+00:00",
        "closed_at": "2020-05-28T10:52:43+00:00",
        "comments_count": [
            "xiegegege",
            "LangleyW",
            "xiegegege",
            "LangleyW",
            "xiegegege",
            "LangleyW",
            "wtyn",
            "LangleyW",
            "xiegegege",
            "LangleyW",
            "wtyn",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 146,
        "title": "怎样获取句子分类标签？",
        "body": "情感分类任务finetine之后怎样获取自定句子的情感标签？",
        "state": "closed",
        "user": "WHQ1111",
        "closed_by": "heavengate",
        "created_at": "2019-05-28T07:53:48+00:00",
        "updated_at": "2019-05-28T13:55:10+00:00",
        "closed_at": "2019-05-28T13:55:10+00:00",
        "comments_count": [
            "heavengate"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 145,
        "title": "EMLo本地CPU训练运行，报错，单步调试找不到问题",
        "body": "paddlepaddle1.4.1最新版本，尝试EMLo本地CPU环境单步调试，args文件已妥善配置，运行到\r\n infer_model.build()报错，找不到问题，求助\r\n\r\ndynamic_lstmp() got an unexpected keyword argument 'h_0'\r\n  File \"D:\\myfile\\vscodeProject\\LARK\\ELMo\\lm_model.py\", line 61, in lstmp_encoder\r\n    bias_attr=fluid.ParamAttr(initializer=None))\r\n  File \"D:\\myfile\\vscodeProject\\LARK\\ELMo\\lm_model.py\", line 103, in encoder\r\n    para_name + 'layer{}'.format(i + 1), emb_size, test_mode, args)\r\n  File \"D:\\myfile\\vscodeProject\\LARK\\ELMo\\lm_model.py\", line 210, in build\r\n    args=args)\r\n  File \"D:\\myfile\\vscodeProject\\LARK\\ELMo\\train.py\", line 285, in train\r\n    infer_model.build()\r\n  File \"D:\\myfile\\vscodeProject\\LARK\\ELMo\\train.py\", line 579, in <module>\r\n    train()\r\n  File \"D:\\ProgramData\\Anaconda3\\envs\\tensorflow\\Lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"D:\\ProgramData\\Anaconda3\\envs\\tensorflow\\Lib\\runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"D:\\ProgramData\\Anaconda3\\envs\\tensorflow\\Lib\\runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)",
        "state": "closed",
        "user": "D-DanielYang",
        "closed_by": "D-DanielYang",
        "created_at": "2019-05-28T06:17:31+00:00",
        "updated_at": "2019-05-28T07:22:49+00:00",
        "closed_at": "2019-05-28T07:22:49+00:00",
        "comments_count": [
            "heavengate",
            "D-DanielYang",
            "D-DanielYang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 147,
        "title": "有大哥尝试把ernie部署到服务器上面吗？🙏",
        "body": "我查看了paddlepaddle的部署，但是paddlepaddle只讲了C++版本的部署，和python并没有关系，（并且感觉教程上面的部署其实只是paddlepaddle的C++版本的安装？）虽然加载ernie的模型的时间并不是很长，但是不应当去重复的加载。\r\n或者说，paddlepaddle并不需要部署（或者说没有部署这一操作？），而只是将加载的代码放在外面，然后正常预测就行了？",
        "state": "closed",
        "user": "yayaQAQ",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-28T11:25:19+00:00",
        "updated_at": "2020-05-28T11:52:47+00:00",
        "closed_at": "2020-05-28T11:52:47+00:00",
        "comments_count": [
            "heavengate",
            "yayaQAQ",
            "luo1129",
            "yayaQAQ",
            "kuke",
            "kennyLSN",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 148,
        "title": "如何加载微调好的保存在checkpoints文件夹下的模型进行inference?",
        "body": "在做文本情感分类任务时，发现每次要对目标进行预测需要将模型重新微调一遍，似乎有点麻烦。。。",
        "state": "closed",
        "user": "WHQ1111",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-29T07:59:56+00:00",
        "updated_at": "2020-05-28T12:52:47+00:00",
        "closed_at": "2020-05-28T12:52:47+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 149,
        "title": "bert运行xnli任务时有tensor类型问题",
        "body": "使用paddle develop分支，运行Bert 的xnli任务，对于fp16=false时会有tensor类型的报错，fp16=true时运行正常。\r\n`I0530 03:41:07.354573 44814 parallel_executor.cc:339] The Executor would execute the graph by ParallelGraph Execution which can get better performance,you can force it off by env FLAGS_enable_parallel_graph=0\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 383, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 288, in main\r\n    outputs = train_exe.run(fetch_list=fetch_list)\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 286, in run\r\n    return_numpy=return_numpy)\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 651, in run\r\n    return_numpy=return_numpy)\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 513, in _run_parallel\r\n    exe.run(fetch_var_names, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator adam error.\r\nPython Callstacks:\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1703, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 1291, in _append_optimize_op\r\n    stop_gradient=True)\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 297, in _create_optimization_pass\r\n    param_and_grad)\r\n  File \"/opt/_internal/cpython-3.6.0/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 442, in apply_gradients\r\n    optimize_ops = self._create_optimization_pass(params_grads)\r\n  File \"/ssd1/xiege/model_5.29/models/PaddleNLP/language_representations_kit/LARK_test/LARK/BERT/optimization.py\", line 107, in optimization\r\n    optimizer.apply_gradients(master_param_grads)\r\n  File \"run_classifier.py\", line 187, in main\r\n    loss_scaling=args.loss_scaling)\r\n  File \"run_classifier.py\", line 383, in <module>\r\n    main(args)\r\nC++ Callstacks:\r\nTensor holds the wrong type, it holds ::paddle::platform::float16, but desires to be float at [/ssd1/xiege/paddle_wheel/Paddle/paddle/fluid/framework/tensor_impl.h:30]`",
        "state": "closed",
        "user": "xiegegege",
        "closed_by": "stale[bot]",
        "created_at": "2019-05-30T04:36:58+00:00",
        "updated_at": "2020-05-28T12:52:54+00:00",
        "closed_at": "2020-05-28T12:52:54+00:00",
        "comments_count": [
            "kuke",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 151,
        "title": "ERNIE finetuning报错",
        "body": "1.paddle develop ,python3.6下运行Ernie fine-tuning任务有如下报错：\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 276, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 233, in main\r\n    \"dev\")\r\n  File \"/ssd1/xiege/logs/LARK/ERNIE/finetune/classifier.py\", line 180, in evaluate\r\n    qids.extend(np_qids.reshape(-1).tolist())\r\nAttributeError: 'NoneType' object has no attribute 'reshape'\r\n2.另外在运行预训练时，epoch计数从2开始不是从0开始\r\n<img width=\"846\" alt=\"e26108aca74be1ec5a9f67a8d5ab3b21\" src=\"https://user-images.githubusercontent.com/46314656/58615110-d5a89a00-82ec-11e9-85cc-cd45b5ee90b0.png\">\r\n",
        "state": "closed",
        "user": "xiegegege",
        "closed_by": "tianxin1860",
        "created_at": "2019-05-30T07:09:38+00:00",
        "updated_at": "2019-06-19T12:57:46+00:00",
        "closed_at": "2019-06-19T12:57:46+00:00",
        "comments_count": [
            "tianxin1860",
            "xiegegege",
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 152,
        "title": "ERNIE 推理py代码能否给一下",
        "body": "ERNIE 推理py代码能否给一下？能否封装一个infer.py出来",
        "state": "closed",
        "user": "sicily",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-02T11:32:30+00:00",
        "updated_at": "2019-07-11T02:00:26+00:00",
        "closed_at": "2019-07-11T02:00:26+00:00",
        "comments_count": [
            "tianxin1860",
            "xiaoxue88",
            "Biaocsu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 155,
        "title": "cuda9，cudnn7训练run_ChnSentiCorp.py报错",
        "body": "![image](https://user-images.githubusercontent.com/3928685/58796486-fa27ad80-862f-11e9-9256-594d36c07acf.png)\r\n\r\n错误信息如上，麻烦指点一下，谢谢",
        "state": "closed",
        "user": "sicily",
        "closed_by": "nbcc",
        "created_at": "2019-06-03T10:48:08+00:00",
        "updated_at": "2019-06-18T09:33:04+00:00",
        "closed_at": "2019-06-18T09:33:04+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 153,
        "title": "请问有没有官方交流群",
        "body": "关于paddlepaddle或者ernie有没有官方的微信群或者QQ群？",
        "state": "closed",
        "user": "sicily",
        "closed_by": "stale[bot]",
        "created_at": "2019-06-02T16:37:20+00:00",
        "updated_at": "2020-05-28T11:53:01+00:00",
        "closed_at": "2020-05-28T11:53:01+00:00",
        "comments_count": [
            "foreversolar",
            "itclubhelper",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 154,
        "title": "请问下，finetune的时候dbqa任务这里是用分类方法做的，还是用ranking方法做的？",
        "body": "",
        "state": "closed",
        "user": "fudanchenjiahao",
        "closed_by": "zhanghan1992",
        "created_at": "2019-06-03T09:03:07+00:00",
        "updated_at": "2019-06-11T06:51:27+00:00",
        "closed_at": "2019-06-11T06:51:27+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 156,
        "title": "ERNIE如何加载微调好的保存在checkpoints文件夹下的模型进行任务推断？",
        "body": "每次进行任务推断时都需要把任务重新微调一遍吗？按理说应该有可以加载微调好的模型的方法吧。",
        "state": "closed",
        "user": "WHQ1111",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-05T06:58:58+00:00",
        "updated_at": "2019-06-17T03:27:39+00:00",
        "closed_at": "2019-06-17T03:27:39+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 157,
        "title": "warmup_proportion  bug反馈",
        "body": "![image](https://user-images.githubusercontent.com/15842810/59023769-09eb0000-8883-11e9-885f-cb78b1bebd75.png)\r\nfinetune/classifier.py文件中这个train_fetch_list 好像最多只能有四个元素，而这里取的是index为4的元素。我在跑任务的时候把warmup_proportion调为0.1就会有这个错。烦请作者确认下。\r\n",
        "state": "closed",
        "user": "wq343580510",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-06T09:49:15+00:00",
        "updated_at": "2019-06-17T04:05:20+00:00",
        "closed_at": "2019-06-17T04:05:20+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 159,
        "title": "README.md文档笔误：NER示例数据header",
        "body": "在 【序列标注任务】-> 【1.实体识别】部分\r\n\r\n> 以 MSRA-NER(SIGHAN 2006) 作为示例，数据格式为包含2个字段的tsv文件，2个字段分别为: text_a label, 示例数据如下:\r\n\r\n这里表示数据格式是text_a在前，而label在后；而在给出的例子中，错误地将label放在了text_a之前，这应该是一个笔误，麻烦更正一下。\r\n\r\n> label  text_a\r\n在 这 里 恕 弟 不 恭 之 罪 ， 敢 在 尊 前 一 诤 ： 前 人 论 书 ， 每 曰 “ 字 字 有 来 历 ， 笔 笔 有 出 处 ” ， 细 读 公 字 ， 何 尝 跳 出 前 人 藩 篱 ， 自 隶 变 而 后 ， 直 至 明 季 ， 兄 有 何 新 出 ？    O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O\r\n",
        "state": "closed",
        "user": "xinfeng1i",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-08T06:29:00+00:00",
        "updated_at": "2019-06-11T06:44:49+00:00",
        "closed_at": "2019-06-11T06:44:49+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 160,
        "title": "fluid1.2是否可以运行BERT？",
        "body": "文档中指出需要使用paddle1.3以上训练，但如果只做预测，是否可以使用1.2版本fluid？\r\n比如使用1.2版本paddle，加载预训练的bert或者fine-tune后的bert模型\r\n\r\n如果不支持，希望能具体解释下原因，比如1.2上某些op缺失等..\r\n\r\n谢谢",
        "state": "closed",
        "user": "xiehanlin",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-10T12:40:59+00:00",
        "updated_at": "2019-06-11T06:34:22+00:00",
        "closed_at": "2019-06-11T06:34:22+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 168,
        "title": "向量",
        "body": "",
        "state": "closed",
        "user": "qingwu11",
        "closed_by": "qingwu11",
        "created_at": "2019-06-19T01:58:21+00:00",
        "updated_at": "2019-06-19T01:58:44+00:00",
        "closed_at": "2019-06-19T01:58:44+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 166,
        "title": "服务器docker环境下导入时报错：PermissionError",
        "body": "nvidia-docker run指定--user为当前用户时，导入paddle时报错如下：\r\n\r\n> import paddle\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/python3/lib/python3.6/site-packages/paddle/__init__.py\", line 25, in <module>\r\n    import paddle.dataset\r\n  File \"/usr/local/python3/lib/python3.6/site-packages/paddle/dataset/__init__.py\", line 18, in <module>\r\n    import paddle.dataset.mnist\r\n  File \"/usr/local/python3/lib/python3.6/site-packages/paddle/dataset/mnist.py\", line 23, in <module>\r\n    import paddle.dataset.common\r\n  File \"/usr/local/python3/lib/python3.6/site-packages/paddle/dataset/common.py\", line 55, in <module>\r\n    must_mkdirs(DATA_HOME)\r\n  File \"/usr/local/python3/lib/python3.6/site-packages/paddle/dataset/common.py\", line 48, in must_mkdirs\r\n    os.makedirs(DATA_HOME)\r\n  File \"/usr/local/python3/lib/python3.6/os.py\", line 210, in makedirs\r\n    makedirs(head, mode, exist_ok)\r\n  File \"/usr/local/python3/lib/python3.6/os.py\", line 210, in makedirs\r\n    makedirs(head, mode, exist_ok)\r\n  File \"/usr/local/python3/lib/python3.6/os.py\", line 220, in makedirs\r\n    mkdir(name, mode)\r\nPermissionError: [Errno 13] Permission denied: '/.cache'\r\n\r\n当指定--user为root时，导入paddle正常，可是在服务器上没有root权限......\r\n为什么导入paddle需要root权限？请问有什么解决方法吗？",
        "state": "closed",
        "user": "zhou-wj",
        "closed_by": "zhou-wj",
        "created_at": "2019-06-18T04:32:36+00:00",
        "updated_at": "2024-01-11T09:52:04+00:00",
        "closed_at": "2019-06-18T05:47:40+00:00",
        "comments_count": [
            "zhou-wj",
            "songsurging"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 165,
        "title": "LCQMC 数据集复现",
        "body": "LCQMA数据集复现，模型似乎无效果，shuffle也做了，输出的二维数据似乎都一样，请问有没有人遇到同样的问题",
        "state": "closed",
        "user": "Olivia-xu",
        "closed_by": "zhanghan1992",
        "created_at": "2019-06-17T13:32:46+00:00",
        "updated_at": "2019-08-25T15:41:49+00:00",
        "closed_at": "2019-08-25T15:41:49+00:00",
        "comments_count": [
            "tianxin1860",
            "arbalest339",
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 162,
        "title": "利用docker安裝paddle環境後跑bash script/pretrain.sh報錯",
        "body": "您好，第一次問問題，請大家多多指教；我運行bash script/pretrain.sh報錯，具體錯誤訊息如下:\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 357, in <module>\r\n    train(args)\r\n  File \"./train.py\", line 173, in train\r\n    pyreader_name='train_reader', ernie_config=ernie_config)\r\n  File \"./train.py\", line 66, in create_model\r\n    mask_label, mask_pos, labels)\r\n  File \"/paddle/pytorch/pytorch-pretrained-BERT-master/LARK/ERNIE/model/ernie.py\", line 168, in get_pretraining_output\r\n    mask_feat = fluid.layers.gather(input=reshaped_emb_out, index=mask_pos)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/layers/nn.py\", line 5751, in gather\r\n    outputs={\"Out\": out})\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/layer_helper.py\", line 50, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/framework.py\", line 1207, in append_op\r\n    op = Operator(block=self, desc=op_desc, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/framework.py\", line 656, in __init__\r\n    self.desc.infer_shape(self.block.desc)\r\npaddle.fluid.core.EnforceNotMet:  at [/paddle/paddle/fluid/operators/gather_op.cc:34]\r\nPaddlePaddle Call Stacks:\r\n0       0x7fefc69a6d06p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 486\r\n1       0x7fefc6bbd335p paddle::operators::GatherOp::InferShape(paddle::framework::InferShapeContext*) const + 1365\r\n2       0x7fefc6a5ce56p paddle::framework::OpDesc::InferShape(paddle::framework::BlockDesc const&) const + 886\r\n3       0x7fefc6a09145p void pybind11::cpp_function::initialize<pybind11::cpp_function::initialize<void, paddle::framework::OpDesc, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(void (paddle::framework::OpDesc::*)(paddle::framework::BlockDesc const&) const, pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&)#1}, void, paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(pybind11::cpp_function::initialize<void, paddle::framework::OpDesc, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(void (paddle::framework::OpDesc::*)(paddle::framework::BlockDesc const&) const, pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&)#1}&&, void (*)(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&), pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(pybind11::detail::function_call&)#3}::_FUN(pybind11::detail::function_call) + 213\r\n```\r\n安裝環境如下:\r\n```shell\r\ndocker安裝GPU版本的PaddlePaddle，cuda=9.0，cudnn=7，Paddle:1.1.0(後來升級為Paddle:1.3.1.post97)\r\n```\r\n想問看看如何解決?謝謝",
        "state": "closed",
        "user": "karta282950",
        "closed_by": "stale[bot]",
        "created_at": "2019-06-12T02:18:37+00:00",
        "updated_at": "2020-05-28T12:52:52+00:00",
        "closed_at": "2020-05-28T12:52:52+00:00",
        "comments_count": [
            "kuke",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 167,
        "title": "ner任务fine tuning 报KeyError错误",
        "body": "自己的tsv文件数据集，示例如下：\r\n![image](https://user-images.githubusercontent.com/16330293/59655742-e3578e00-91cd-11e9-80bd-0b72c973035c.png)\r\n执行fine tuning时报KeyError错误：\r\n![image](https://user-images.githubusercontent.com/16330293/59655795-0eda7880-91ce-11e9-9188-07693767f4d9.png)\r\n请问文件整理有什么没满足的要求吗？",
        "state": "closed",
        "user": "Austendeng",
        "closed_by": "Austendeng",
        "created_at": "2019-06-18T05:37:10+00:00",
        "updated_at": "2019-08-09T05:24:35+00:00",
        "closed_at": "2019-06-18T07:26:23+00:00",
        "comments_count": [
            "Austendeng",
            "semal"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 169,
        "title": "fine tuning得到checkpoint后，进行test报raise ex IndexError: list index out of range",
        "body": "序列标注任务，先是进行了fine tuning得到了checkpoint，模仿BERT中的predict_classifier.py写了预测代码，自定义Processor如下：\r\n![image](https://user-images.githubusercontent.com/16330293/59735073-a3a0ad00-9286-11e9-8703-2d14fe1f119e.png)\r\n\r\n测试数据如下：\r\n![image](https://user-images.githubusercontent.com/16330293/59735089-b4e9b980-9286-11e9-9668-5ffbec8c9adb.png)\r\n执行后报错：\r\n![image](https://user-images.githubusercontent.com/16330293/59735110-c16e1200-9286-11e9-94cf-d4f2c7e349a6.png)\r\n请求解答错误原因。\r\n",
        "state": "closed",
        "user": "Austendeng",
        "closed_by": "Austendeng",
        "created_at": "2019-06-19T03:39:12+00:00",
        "updated_at": "2019-06-19T11:12:39+00:00",
        "closed_at": "2019-06-19T11:12:39+00:00",
        "comments_count": [
            "Austendeng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 171,
        "title": "论文中用到的BERT是你们重新训练的，还是直接用谷歌开放的？",
        "body": "在论文里面没有提到这个细节。",
        "state": "closed",
        "user": "rainarch",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-19T08:14:08+00:00",
        "updated_at": "2019-06-21T08:08:06+00:00",
        "closed_at": "2019-06-21T04:51:07+00:00",
        "comments_count": [
            "tianxin1860",
            "rainarch"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 181,
        "title": "使用run_sequence_labeling报错",
        "body": "I0628 17:59:50.612715  1562 build_strategy.cc:285] SeqOnlyAllReduceOps:0, num_trainers:1\r\nTraceback (most recent call last):\r\n  File \"run_sequence_labeling.py\", line 283, in <module>\r\n    main(args)\r\n  File \"run_sequence_labeling.py\", line 203, in main\r\n    dev_count)\r\n  File \"/home/wangzs/ERNIE/finetune/sequence_label.py\", line 228, in evaluate\r\n    outputs[\"lr\"] = float(outputs[4][0])\r\nKeyError: 4\r\n",
        "state": "closed",
        "user": "wzs951015",
        "closed_by": "wzs951015",
        "created_at": "2019-06-28T10:07:28+00:00",
        "updated_at": "2019-06-28T10:07:51+00:00",
        "closed_at": "2019-06-28T10:07:51+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 175,
        "title": "如何理解ERNIE的知识增强？",
        "body": "我能不能这么理解：\r\n\r\n- ERNIE学习词级别先验知识：就是说任意下游任务中，利用ERNIE的seg_label，输入自定义分词结果；\r\n- ERNIE学习实体先验知识：就是说用ERNIE跑多任务预训练时，包含一个通过序列标注任务实现的实体识别任务；\r\n- ERNIE学习实体关系先验知识：就是说用ERNIE跑多任务预训练时，包含一个通过单句分类任务实现的实体关系分类任务。",
        "state": "closed",
        "user": "bipedalBit",
        "closed_by": "stale[bot]",
        "created_at": "2019-06-21T11:18:25+00:00",
        "updated_at": "2020-05-28T12:52:55+00:00",
        "closed_at": "2020-05-28T12:52:55+00:00",
        "comments_count": [
            "wangshuohuan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 173,
        "title": "ERNIE 论文中的完形填空测试应该怎么做？有人做过吗？",
        "body": "最近看到百度的大神们和各位小伙伴都在测试百度ERNIE和BERT中文模型的效果，其中有一项完形填空测试，请问这个测试是怎么做到的？ERNIE模型中就有这个接口么？哪位大神能帮忙解释一下？（我已经了解到ERNIE的训练过程 mask LM任务应该是可以实现这个功能，可是问题是我找不到调用的借口和方法）\r\n",
        "state": "closed",
        "user": "Finley1991",
        "closed_by": "stale[bot]",
        "created_at": "2019-06-21T05:36:33+00:00",
        "updated_at": "2021-01-19T14:58:36+00:00",
        "closed_at": "2020-07-02T08:29:20+00:00",
        "comments_count": [
            "nbcc",
            "ddonng",
            "nbcc",
            "jfkey",
            "jfkey",
            "playedcreat",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 177,
        "title": "数据量大时的预测错误",
        "body": "将chnsenticorp 数据集中的文本替换成自己需要的文本，然后用ernie_encoder.py导出词向量遇到问题。\r\n小数据：5000条以下，正常执行\r\n中等规模2-4万，有时报错，有时正常\r\n10万以上行，都会报错。\r\n\r\n每次报错不同，分两种：\r\n第一种是\r\nLoad pretraining parameters from /home/X/tools/py27/ernie/model/params.\r\nTraceback (most recent call last):\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\n  File \"ernie_encoder.py\", line 160, in main\r\n    return_numpy=False)\r\n  File \"/home/X/.jumbo/lib/python2.7/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 565, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/X/.jumbo/lib/python2.7/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 642, in _run\r\n    exe.run(program.desc, scope, 0, True, True, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator sequence_unpad error.\r\nPython Callstacks:\r\n  File \"/home/X/.jumbo/lib/python2.7/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 1654, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/X/.jumbo/lib/python2.7/lib/python2.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/X/.jumbo/lib/python2.7/lib/python2.7/site-packages/paddle/fluid/layers/nn.py\", line 4120, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"ernie_encoder.py\", line 75, in create_model\r\n    unpad_enc_out = fluid.layers.sequence_unpad(enc_out, length=seq_lens)\r\n  File \"ernie_encoder.py\", line 128, in main\r\n    args, pyreader_name='reader', ernie_config=ernie_config)\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\nC++ Callstacks:\r\nEnforce failed. Expected numel() * SizeOfType(type()) <= memory_size(), but received numel() * SizeOfType(type()):16195584 > memory_size():3735552.\r\nTensor's dims_ is out of bound. Call Tensor::mutable_data first to re-allocate memory.\r\nor maybe the required data-type mismatches the data already stored. at [/paddle/paddle/fluid/framework/tensor.cc:28]\r\nPaddlePaddle Call Stacks:\r\n0       0x7f561f86cb68p void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 360\r\n1       0x7f561f86ceb7p paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int) + 87\r\n2       0x7f56215525cap paddle::framework::Tensor::check_memory_size() const + 394\r\n3       0x7f56211bb903p paddle::operators::math::UnpaddingLoDTensorFunctor<paddle::platform::CUDADeviceContext, float>::operator()(paddle::platform::CUDADeviceContext const&, paddle::framework::LoDTensor const&, paddle::framework::LoDTensor*, int, int, bool, paddle::operators::math::PadLayout) + 611\r\n4       0x7f562069e2a5p paddle::operators::SequenceUnpadOpKernel<paddle::platform::CUDADeviceContext, float>::Compute(paddle::framework::ExecutionContext const&) const + 981\r\n5       0x7f562069e4a3p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::SequenceUnpadOpKernel<paddle::platform::CUDADeviceContext, float>, paddle::operators::SequenceUnpadOpKernel<paddle::platform::CUDADeviceContext, double>, paddle::operators::SequenceUnpadOpKernel<paddle::platform::CUDADeviceContext, int>, paddle::operators::SequenceUnpadOpKernel<paddle::platform::CUDADeviceContext, long> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n6       0x7f56214fe6f6p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, paddle::framework::RuntimeContext*) const + 662\r\n7       0x7f56214fee64p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 292\r\n8       0x7f56214fc78cp paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 332\r\n9       0x7f561f9e18bep paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool) + 382\r\n10      0x7f561f9e26ffp paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool, std::vector<std::string, std::allocator<std::string> > const&, bool) + 143\r\n11      0x7f561f85c35ep\r\n12      0x7f561f89f72ep\r\n13      0x7f56836264e2p PyEval_EvalFrameEx + 29874\r\n14      0x7f56836287fdp PyEval_EvalCodeEx + 2061\r\n15      0x7f5683625982p PyEval_EvalFrameEx + 26962\r\n16      0x7f56836287fdp PyEval_EvalCodeEx + 2061\r\n17      0x7f5683625982p PyEval_EvalFrameEx + 26962\r\n18      0x7f5683625a9dp PyEval_EvalFrameEx + 27245\r\n19      0x7f56836287fdp PyEval_EvalCodeEx + 2061\r\n20      0x7f5683628932p PyEval_EvalCode + 50\r\n21      0x7f5683654882p PyRun_FileExFlags + 146\r\n22      0x7f5683655bf9p PyRun_SimpleFileExFlags + 217\r\n23      0x7f568366bb0dp Py_Main + 3149\r\n24        0x38bfc21b45p __libc_start_main + 245\r\n25            0x400691p\r\n请问这是某一个batch分配现存时的错误吗？reader里没有控制机制吗？\r\n\r\n另一种错误是\r\nLoad pretraining parameters from /home/X/tools/py367gcc48_paddle/ernie/model/params.\r\n*** Aborted at 1561361472 (unix time) try \"date -d @1561361472\" if you are using GNU date ***\r\nPC: @                0x0 (unknown)\r\n*** SIGFPE (@0x7ff61b501850) received by PID 14084 (TID 0x7ff67d886740) from PID 458233936; stack trace: ***\r\n    @       0x38c040f130 (unknown)\r\n    @     0x7ff61b501850 paddle::operators::math::UnpaddingLoDTensorFunctor<>::operator()()\r\n    @     0x7ff61a9e42a5 paddle::operators::SequenceUnpadOpKernel<>::Compute()\r\n    @     0x7ff61a9e44a3 _ZNSt17_Function_handlerIFvRKN6paddle9framework16ExecutionContextEEZNKS1_24OpKernelRegistrarFunctorINS0_8platform9CUDAPlaceELb0ELm0EINS0_9operators21SequenceUnpadOpKernelINS7_17CUDADeviceContextEfEENSA_ISB_dEENSA_ISB_iEENSA_ISB_lEEEEclEPKcSI_iEUlS4_E_E9_M_invokeERKSt9_Any_dataS4_\r\n    @     0x7ff61b8446f6 paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7ff61b844e64 paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7ff61b84278c paddle::framework::OperatorBase::Run()\r\n    @     0x7ff619d278be paddle::framework::Executor::RunPreparedContext()\r\n    @     0x7ff619d286ff paddle::framework::Executor::Run()\r\n    @     0x7ff619ba235e _ZZN8pybind1112cpp_function10initializeIZN6paddle6pybindL18pybind11_init_coreERNS_6moduleEEUlRNS2_9framework8ExecutorERKNS6_11ProgramDescEPNS6_5ScopeEibbRKSt6vectorISsSaISsEEE97_vIS8_SB_SD_ibbSI_EINS_4nameENS_9is_methodENS_7siblingEEEEvOT_PFT0_DpT1_EDpRKT2_ENUlRNS_6detail13function_callEE1_4_FUNES10_\r\n    @     0x7ff619be572e pybind11::cpp_function::dispatcher()\r\n    @     0x7ff67d9ac4e2 PyEval_EvalFrameEx\r\n    @     0x7ff67d9ae7fd PyEval_EvalCodeEx\r\n    @     0x7ff67d9ab982 PyEval_EvalFrameEx\r\n    @     0x7ff67d9ae7fd PyEval_EvalCodeEx\r\n    @     0x7ff67d9ab982 PyEval_EvalFrameEx\r\n    @     0x7ff67d9aba9d PyEval_EvalFrameEx\r\n    @     0x7ff67d9ae7fd PyEval_EvalCodeEx\r\n    @     0x7ff67d9ae932 PyEval_EvalCode\r\n    @     0x7ff67d9da882 PyRun_FileExFlags\r\n    @     0x7ff67d9dbbf9 PyRun_SimpleFileExFlags\r\n    @     0x7ff67d9f1b0d Py_Main\r\n    @       0x38bfc21b45 (unknown)\r\n    @           0x400691 (unknown)\r\n    @                0x0 (unknown)\r\n\r\n相同环境和代码测试多遍（未shuffle），发现出错时两个错误都可能出现，没有什么规律",
        "state": "closed",
        "user": "DominicXWang",
        "closed_by": "tianxin1860",
        "created_at": "2019-06-24T10:45:42+00:00",
        "updated_at": "2019-06-25T06:30:57+00:00",
        "closed_at": "2019-06-25T06:30:57+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 179,
        "title": "ernie做embedding时，对输入的一些疑问",
        "body": "如下图，py_reader里的shape是固定大小的，比如max_seq_len=512时，src_ids的shape为[-1, 512, 1]，而传入的数据的shape是[batch_size, max_len_in_bs, 1]，max_len_in_bs在每个batch是不一样的。是这样的吗？\r\n![image](https://user-images.githubusercontent.com/15082798/60062711-e8b45b80-972c-11e9-9934-4f071b4356b8.png)\r\n",
        "state": "closed",
        "user": "shiyazhou121",
        "closed_by": "shiyazhou121",
        "created_at": "2019-06-25T01:40:08+00:00",
        "updated_at": "2019-06-25T07:09:40+00:00",
        "closed_at": "2019-06-25T06:56:50+00:00",
        "comments_count": [
            "tianxin1860",
            "shiyazhou121"
        ],
        "labels": [
            "user"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 178,
        "title": "pre_train elmo model",
        "body": "预训练好的Elmo模型的文件夹中缺少部分配置文件,请问是否可以提供呢,谢啦",
        "state": "closed",
        "user": "beibei0902",
        "closed_by": "stale[bot]",
        "created_at": "2019-06-25T01:28:27+00:00",
        "updated_at": "2020-05-28T12:52:56+00:00",
        "closed_at": "2020-05-28T12:52:56+00:00",
        "comments_count": [
            "tianxin1860",
            "beibei0902",
            "tianxin1860",
            "beibei0902",
            "tianxin1860",
            "beibei0902",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 180,
        "title": "如何理解batch中序列的mask实现",
        "body": "在同一个batch里，为了统一长度对短序列加入pad=0。经过scale后补位的部分变成-10000，比如mask矩阵如下\r\n[[0 0 -10000]\r\n[0 0 -10000]\r\n[-10000 -10000 -10000]]\r\n在self-attention时，是将q*k后的矩阵加上mask矩阵，经过softmax后，mask[0][2]后mask[1][2]等于0，实现了掩码功能，但第三行是[0.3333, 0.3333, 0.3333]，再乘v后，第三行不为0。\r\n如果是多层mul_heads_attention的话，掩码貌似失去了功能。\r\n\r\n![image](https://user-images.githubusercontent.com/15082798/60231673-a1fd6780-98cc-11e9-8fc0-36139d899483.png)\r\n![image](https://user-images.githubusercontent.com/15082798/60231686-afb2ed00-98cc-11e9-8b37-a846b2bf4b0c.png)\r\n\r\n",
        "state": "closed",
        "user": "shiyazhou121",
        "closed_by": "shiyazhou121",
        "created_at": "2019-06-27T03:21:08+00:00",
        "updated_at": "2019-06-27T06:23:40+00:00",
        "closed_at": "2019-06-27T06:23:40+00:00",
        "comments_count": [
            "kuke",
            "shiyazhou121"
        ],
        "labels": [
            "user"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 182,
        "title": "运行run_msra_ner.sh",
        "body": "I0628 17:59:50.612715 1562 build_strategy.cc:285] SeqOnlyAllReduceOps:0, num_trainers:1\r\nTraceback (most recent call last):\r\nFile \"run_sequence_labeling.py\", line 283, in \r\nmain(args)\r\nFile \"run_sequence_labeling.py\", line 203, in main\r\ndev_count)\r\nFile \"/home/wangzs/ERNIE/finetune/sequence_label.py\", line 228, in evaluate\r\noutputs[\"lr\"] = float(outputs[4][0])\r\nKeyError: 4",
        "state": "closed",
        "user": "wzs951015",
        "closed_by": "wzs951015",
        "created_at": "2019-06-28T10:08:33+00:00",
        "updated_at": "2019-06-28T10:45:31+00:00",
        "closed_at": "2019-06-28T10:45:31+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 183,
        "title": "用ERINE训练自己的NER数据集时，F1和precision都是0",
        "body": "跑测试的[msra_ner](https://ernie.bj.bcebos.com/task_data.tgz)可以跑通，f1能达到95，但是当我用ERINE跑自己的NER数据时，f1和precision都是0\r\n测试结果：\r\n> epoch: 6, progress: 5248/6144, step: 2580, loss: 0.269858, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 3.507191 steps/s\r\n> epoch: 6, progress: 5408/6144, step: 2590, loss: 0.245142, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.484499 steps/s\r\n> epoch: 6, progress: 5568/6144, step: 2600, loss: 0.295873, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.440172 steps/s\r\n> [dev evaluation] f1: 0.000000, precision: 0.000000, recall: 0.000000, elapsed time: 6.710833 s\r\n> [test evaluation] f1: 0.000000, precision: 0.000000, recall: 0.000000, elapsed time: 6.444398 s\r\n> epoch: 6, progress: 5728/6144, step: 2610, loss: 0.175324, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 0.579638 steps/s\r\n> epoch: 6, progress: 5888/6144, step: 2620, loss: 0.284426, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 3.364358 steps/s\r\n> epoch: 6, progress: 6048/6144, step: 2630, loss: 0.073127, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.896042 steps/s\r\n\r\n我已经按照教程里的ner数据格式整理过自己的数据集了，字符之间的特殊符号也教程里的'\\x02'。\r\n以下是我的tsv数据还有label_map.json.\r\n\r\n> 胸\u0002部\u0002C\u0002T\u0002未\u0002见\u0002转\u0002移\u0002征\u0002象\tB-Radiology\u0002I-Radiology\u0002I-Radiology\u0002I-Radiology\u0002O\u0002O\u0002O\u0002O\u0002O\u0002O\r\n\r\n> {\r\n>   \"B-AnatomyPart\": 0,\r\n>   \"I-AnatomyPart\": 1,\r\n>   \"B-Diagnosis\": 2,\r\n>   \"I-Diagnosis\": 3,\r\n>   \"B-Drug\": 4,\r\n>   \"I-Drug\": 5,\r\n>   \"B-Lab\": 6,\r\n>   \"I-Lab\": 7,\r\n>   \"B-Procedure\": 8,\r\n>   \"I-Procedure\": 9,\r\n>   \"B-Radiology\": 10,\r\n>   \"I-Radiology\": 11,\r\n>   \"O\": 12\r\n> }\r\n\r\n![image](https://user-images.githubusercontent.com/45394577/60415826-e3647e80-9c0e-11e9-9b15-acef8dfbe1b5.png)\r\n![360截图18060115626665](https://user-images.githubusercontent.com/45394577/60415889-0c850f00-9c0f-11e9-8bc0-6333b7879aad.png)\r\n\r\n![image](https://user-images.githubusercontent.com/45394577/60415836-ebbcb980-9c0e-11e9-8dd4-60ea1f649509.png)\r\n\r\n",
        "state": "closed",
        "user": "SuMarsss",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-01T06:47:03+00:00",
        "updated_at": "2020-05-28T11:52:51+00:00",
        "closed_at": "2020-05-28T11:52:51+00:00",
        "comments_count": [
            "SuMarsss",
            "tianxin1860",
            "SuMarsss",
            "SuMarsss",
            "tianxin1860",
            "SuMarsss",
            "tianxin1860",
            "arbalest339",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 186,
        "title": "window上用BERT在XNLI任务上Fine-tuning报错",
        "body": "在LARK/BERT目录中，执行python -u run_classifier.py --task_name XNLI --use_cuda true --do_train true --do_val true  --do_test true --batch_size 8192 --in_tokens true --init_pretraining_params chinese_L-12_H-768_A-12/params --data_dir ./XNLI   --checkpoints ./XNLI_checkpoints --save_steps 1000 --weight_decay  0.01 --warmup_proportion 0.0 --validation_steps 25  --epoch 1 --max_seq_len 512 --bert_config_path chinese_L-12_H-768_A-12/bert_config.json --learning_rate 1e-4 --skip_steps 10 --random_seed 1，使用BERT在NLP任务上Fine-tuning,报错信息如下：\r\n![NLI](https://user-images.githubusercontent.com/37854899/60437798-b5e4f880-9c41-11e9-84ff-54c52fa769e8.PNG)\r\n\r\n",
        "state": "closed",
        "user": "JiaXiao243",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-01T12:49:30+00:00",
        "updated_at": "2020-05-28T12:53:02+00:00",
        "closed_at": "2020-05-28T12:53:02+00:00",
        "comments_count": [
            "tianxin1860",
            "JiaXiao243",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 184,
        "title": "ERNIE用CPU提取句向量速度较慢",
        "body": "用ERNIE提取句向量的时候，一句话大概是0.7s的编码时间，没有用GPU，8核的mac跑的，请问下这个速度正常么？ 我同样的配置，用bert-as-service 大概不到0.1s一句话",
        "state": "closed",
        "user": "zhangzhen8230",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-01T07:51:39+00:00",
        "updated_at": "2020-05-28T11:52:41+00:00",
        "closed_at": "2020-05-28T11:52:41+00:00",
        "comments_count": [
            "bipedalBit",
            "treper",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 185,
        "title": "请问PaddleSlim有覆盖ERNIE计划吗？",
        "body": "[bert-as-service](https://github.com/hanxiao/bert-as-service)是一个很方便的BERT句向量编码服务的封装。\r\n我在尝试用ERNIE做相同的事时，发现目前paddle模型的图优化工具还没有覆盖NLP模型。\r\n自测4个CPU的条件下，bert-as-service编码句子的速度是ERNIE的3倍左右，我猜这个差距是因为没有做图优化。",
        "state": "closed",
        "user": "bipedalBit",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-01T08:51:40+00:00",
        "updated_at": "2020-05-28T12:52:58+00:00",
        "closed_at": "2020-05-28T12:52:58+00:00",
        "comments_count": [
            "bipedalBit",
            "nbcc",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 187,
        "title": "使用ERNIE进行长文本分类，若max_seq_len=512则无法fine-tune且超慢",
        "body": "因为是长文本，我将max_seq_len设置为512，由于显存限制batch_size设置10，epoch=3。利用ERNIE进行fine-tune时15个小时一个epoch都没跑完（大概1/2个epoch），然而利用pytorch_bert同样时间已经fine-tune结束了。请问有什么好的建议吗？",
        "state": "closed",
        "user": "Biaocsu",
        "closed_by": "Biaocsu",
        "created_at": "2019-07-02T02:41:53+00:00",
        "updated_at": "2019-07-09T06:26:48+00:00",
        "closed_at": "2019-07-09T06:26:48+00:00",
        "comments_count": [
            "Biaocsu",
            "Biaocsu",
            "tianjie491",
            "Biaocsu",
            "Biaocsu",
            "tianxin1860",
            "tianjie491",
            "Biaocsu",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 189,
        "title": "模型返回的token embedding除了[CLS]还有什么？",
        "body": "在使用[输入句子经过 ERNIE 编码后的 Embedding 表示](https://github.com/PaddlePaddle/LARK/tree/develop/ERNIE#faq) 的功能时，在ChnSentiCorp数据集中，我分别打印了test.tsv中每句话的token embedding(即ernie_encoder.py中的unpad_top_layer_emb)的shape，以及使用tokenization.py中FullTokenizer加载./config/vocab.txt后对每句话进行分词的结果，发现模型返回的token embedding的长度全部都比使用FullTokenizer进行分词后的长度多出2个token。\r\n\r\n理论上来说，模型返回的token embedding中第一维对应的embedding应该是[CLS]的token embedding，这是每句话相较原句分词结果多出来的其中一个token，那多出来的另一个token是什么？它在模型返回的token embedding中位于哪个位置？\r\n\r\n还是说我的分词方法有问题，不该用FullTokenizer加载./config/vocab.txt来分词？（但是数了一下纯中文的句子的字数，确实全都要比模型返回的token embedding少2个token）\r\n\r\n希望解答一下我的疑惑，谢谢！",
        "state": "closed",
        "user": "bb9696aa",
        "closed_by": "bb9696aa",
        "created_at": "2019-07-03T07:04:46+00:00",
        "updated_at": "2019-07-03T10:23:17+00:00",
        "closed_at": "2019-07-03T10:23:16+00:00",
        "comments_count": [
            "tianxin1860",
            "bb9696aa",
            "tianxin1860",
            "bb9696aa"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 188,
        "title": "ernie没有像bert一样预留[unused1]给一些未知的词使用吗",
        "body": "现在做一些特殊序列，一些特殊的符号在bert里面使用[unused]表示，不知道在ernie里面怎么表示，目前看了下 好像都是[unk]的吧",
        "state": "closed",
        "user": "lonePatient",
        "closed_by": "lonePatient",
        "created_at": "2019-07-02T06:21:51+00:00",
        "updated_at": "2020-03-16T17:12:25+00:00",
        "closed_at": "2020-03-16T11:23:15+00:00",
        "comments_count": [
            "tianxin1860",
            "jfkey",
            "lonePatient",
            "jfkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 191,
        "title": "BERT的train参数中，epoch 与  num_train_steps  哪个真正决定训练的迭代轮数？",
        "body": "",
        "state": "closed",
        "user": "apphpp",
        "closed_by": "nbcc",
        "created_at": "2019-07-04T06:36:36+00:00",
        "updated_at": "2019-07-04T07:36:13+00:00",
        "closed_at": "2019-07-04T07:36:13+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 190,
        "title": "实体（比如‘哈尔滨’）被masked时，实体的所有字的MASK机制一样的么？",
        "body": "从batching.py的如下代码看，似乎不太一样哦：\r\nprob = prob_mask[prob_index + index]\r\n                        base_prob = 1.0\r\n                        if index == beg:\r\n                            base_prob = 0.15\r\n                        if base_prob * 0.2 < prob <= base_prob:\r\n                            mask_label.append(sent[index])\r\n                            sent[index] = MASK\r\n                            mask_flag = True\r\n                            mask_pos.append(sent_index * max_len + index)\r\n                        elif base_prob * 0.1 < prob <= base_prob * 0.2:\r\n                            mask_label.append(sent[index])\r\n                            sent[index] = replace_ids[prob_index + index]\r\n                            mask_flag = True\r\n                            mask_pos.append(sent_index * max_len + index)\r\n                        else:\r\n                            mask_label.append(sent[index])\r\n                            mask_pos.append(sent_index * max_len + index)",
        "state": "closed",
        "user": "lexmen318",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-04T01:24:12+00:00",
        "updated_at": "2019-07-10T03:43:29+00:00",
        "closed_at": "2019-07-04T08:45:42+00:00",
        "comments_count": [
            "zhanghan1992",
            "zhanghan1992",
            "lexmen318"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 192,
        "title": "求问这是什么错误？",
        "body": "![image](https://user-images.githubusercontent.com/43852251/60665963-749a5600-9e98-11e9-95d6-89ab624db970.png)\r\n",
        "state": "closed",
        "user": "ghost",
        "closed_by": null,
        "created_at": "2019-07-04T12:15:37+00:00",
        "updated_at": "2019-07-21T08:57:11+00:00",
        "closed_at": "2019-07-21T08:57:11+00:00",
        "comments_count": [
            "kuke"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 195,
        "title": "我想用你们训练好的模型参数来训练我们的文章数据拿到词向量做检索 召回相似的文章 现在怎么拿到经过ERNIE 编码后Embedding对应的句子呢",
        "body": "已经通过 ernie_encoder.py 抽取出到输入句子的 Embedding 表示并做了向量检索，现在拿不到向量对应的句子表示",
        "state": "closed",
        "user": "qq1074123922",
        "closed_by": "qq1074123922",
        "created_at": "2019-07-09T10:53:21+00:00",
        "updated_at": "2019-07-10T08:00:57+00:00",
        "closed_at": "2019-07-10T08:00:57+00:00",
        "comments_count": [
            "kuke",
            "qq1074123922",
            "kuke",
            "qq1074123922",
            "qq1074123922",
            "kuke",
            "qq1074123922"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 205,
        "title": "用resnet网络训练出来的模型",
        "body": "在网上随便照了一张图片，猫识别出来是狗，飞机识别出来的是汽车，只有github上给的照片识别出来是对的，网上找的照片一个没识别出来\r\n",
        "state": "closed",
        "user": "a159879",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-12T12:12:29+00:00",
        "updated_at": "2019-07-16T02:41:40+00:00",
        "closed_at": "2019-07-16T02:41:40+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 198,
        "title": "为什么finetune/classifier.py中设置了is_predict时返回的是pyreader,probs和feed_targets_name而不是pyreader和global_vars？",
        "body": "ERNIE/finetune/classifier.py中定义了    \r\n\r\n       if is_prediction:\r\n        probs = fluid.layers.softmax(logits,name=\"probs\")\r\n        feed_targets_name = [\r\n            src_ids.name, pos_ids.name, sent_ids.name, input_mask.name\r\n        ]\r\n        return pyreader, probs, feed_targets_name\r\n\r\n而train、test、eval时返回的都是pyreader和global_vars，此时可以通过global_vars[\"probs\"].name获取想要fetch的变量，那么如果返回的是pyreader, probs, feed_targets_name，在写predict程序时如何获取想要fetch的probs和labels呢？",
        "state": "closed",
        "user": "LukeALee",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-10T09:02:06+00:00",
        "updated_at": "2020-05-28T12:53:00+00:00",
        "closed_at": "2020-05-28T12:53:00+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 200,
        "title": "ELMo train.py报错",
        "body": "Traceback (most recent call last):\r\n  File \"train.py\", line 580, in <module>\r\n    train()\r\n  File \"train.py\", line 248, in train\r\n    random.seed(args.random_seed)\r\nNameError: name 'random' is not defined",
        "state": "closed",
        "user": "zhengya01",
        "closed_by": "kuke",
        "created_at": "2019-07-11T03:30:32+00:00",
        "updated_at": "2019-07-11T09:33:21+00:00",
        "closed_at": "2019-07-11T09:33:21+00:00",
        "comments_count": [
            "tianxin1860",
            "zhengya01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 204,
        "title": "关于在AIStudio上传数据集",
        "body": "我想利用某位大佬搭建的resnet网络传入自己的植物病害图片进行训练看看，训练集有60种类的病害，我再上传数据集在aistudio上遇到了困难   好像不能传文件夹   只能传压缩文件。求助各位大牛 \r\n                                                                                                                          谢谢\r\n\r\n\r\n",
        "state": "closed",
        "user": "a159879",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-12T08:52:08+00:00",
        "updated_at": "2019-07-16T02:44:01+00:00",
        "closed_at": "2019-07-16T02:44:01+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 206,
        "title": "句子相似度 使用自己数据 finetune效果不好 ",
        "body": "使用run_lcqmc.sh对数据进行finetune具体设置如下\r\n  1 set -eux\r\n  2 \r\n  3 export FLAGS_sync_nccl_allreduce=1\r\n  4 export CUDA_VISIBLE_DEVICES=7\r\n  5 \r\n  6 python -u run_classifier.py \\\r\n  7                    --use_cuda true \\\r\n  8                    --verbose true \\\r\n  9                    --do_train true \\\r\n 10                    --do_val true \\\r\n 11                    --do_test true \\\r\n 12                    --batch_size 32 \\\r\n 13                    --init_pretraining_params model_para/params \\\r\n 14                    --train_set task_data/task_data/mydata/train_badcase.tsv \\\r\n 15                    --dev_set task_data/task_data/mydata/dev_badcase.tsv \\\r\n 16                    --test_set task_data/task_data/mydata/test_badcase.tsv \\\r\n 17                    --vocab_path config/vocab.txt \\\r\n 18                    --checkpoints ./checkpoints \\\r\n 19                    --save_steps 10000 \\\r\n 20                    --weight_decay  0.0 \\\r\n 21                    --warmup_proportion 0.0 \\\r\n 22                    --validation_steps 10900 \\\r\n 23                    --epoch 200 \\\r\n 24                    --max_seq_len 128  \\\r\n 25                    --ernie_config_path config/ernie_config.json \\\r\n 26                    --learning_rate 2e-5 \\                                                                                                                               \r\n 27                    --skip_steps 10 \\\r\n 28                    --num_iteration_per_drop_scope 1 \\\r\n 29                    --num_labels 2 \\\r\n 30                    --random_seed 1",
        "state": "closed",
        "user": "daidaidal",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-14T09:55:28+00:00",
        "updated_at": "2020-05-28T12:53:01+00:00",
        "closed_at": "2020-05-28T12:53:01+00:00",
        "comments_count": [
            "tianxin1860",
            "daidaidal",
            "daidaidal",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 209,
        "title": "请问有没有预训练中文XL-NET的计划呢?",
        "body": "XL-NET现在还没有中文版, 效果应该会比BERT和ERNIE要好. ",
        "state": "closed",
        "user": "daizh",
        "closed_by": "daizh",
        "created_at": "2019-07-17T06:42:14+00:00",
        "updated_at": "2019-07-24T11:46:11+00:00",
        "closed_at": "2019-07-24T11:46:11+00:00",
        "comments_count": [
            "xyzhou-puck",
            "daizh"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 207,
        "title": "ERNIE推理时内存占用过高，内存泄漏？",
        "body": "利用fine-tune好的ERNIE做文本分类任务，推理时关闭CUDA，占用内存12.8G，无法想象，是哪里出现了内存泄漏吗？望检查！相同情况pytorch_bert占用内存900M, tensorflow_bert占用内存850M \r\n若打开CUDA，即CUDA=True，则占用内存836M",
        "state": "closed",
        "user": "Biaocsu",
        "closed_by": "Biaocsu",
        "created_at": "2019-07-16T06:40:00+00:00",
        "updated_at": "2019-07-23T09:29:41+00:00",
        "closed_at": "2019-07-23T09:25:53+00:00",
        "comments_count": [
            "tianxin1860",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu",
            "Biaocsu",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu",
            "tianxin1860",
            "Biaocsu"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 213
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 212,
        "title": "BERT模型的run_classifier文件调用了subprocess，但是并没有import",
        "body": "BERT模型的run_classifier文件调用了subprocess，但是并没有import。所以在运行时会报错，如下：\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 443, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 133, in main\r\n    dev_count = get_device_num()\r\n  File \"run_classifier.py\", line 124, in get_device_num\r\n    device_num = subprocess.check_output(['nvidia-smi','-L']).decode().count('\\n')\r\nNameError: name 'subprocess' is not defined",
        "state": "closed",
        "user": "wwjjy",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-18T05:40:45+00:00",
        "updated_at": "2019-07-18T07:17:17+00:00",
        "closed_at": "2019-07-18T07:17:17+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 215,
        "title": "Elmo 模型训练阶段貌似不能加载预训练的参数",
        "body": "Elmo模型中train文件的train_loop方法中，如果参数指定了load_pretraining_params这个参数的具体值，那么会执行init_pretraining_params方法，而这个方法貌似没有被定义，所以会报错。\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 601, in <module>\r\n    train()\r\n  File \"train.py\", line 327, in train\r\n    train_loop(args, logger, vocab, train_progs, infer_progs, optimizer)\r\n  File \"train.py\", line 443, in train_loop\r\n    init_pretraining_params(\r\nNameError: name 'init_pretraining_params' is not defined",
        "state": "closed",
        "user": "wwjjy",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-18T08:22:09+00:00",
        "updated_at": "2019-07-18T11:55:32+00:00",
        "closed_at": "2019-07-18T11:55:32+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 210,
        "title": "ERNIE推理时使用CPU，内存占用过高",
        "body": "#207 \r\n鉴于之前的issue已经被关闭，但问题仍没解决，现重开。\r\n\r\n我利用更新后的代码，使用CPU进行推理，发现内存占用仍然很高12.8G，已经在Ubuntu服务器及windows本地机器多次实验，结论一致，内存占用过高问题仍没有解决，望核实解决",
        "state": "closed",
        "user": "Biaocsu",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-17T09:05:08+00:00",
        "updated_at": "2019-07-17T10:06:07+00:00",
        "closed_at": "2019-07-17T10:06:07+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 218,
        "title": "ELMo LAC_demo的问题",
        "body": "根据LAC_demo中给的数据运行train文件，有如下错误：\r\n\r\nTraceback (most recent call last):\r\n  File \"LAC_demo/train.py\", line 344, in <module>\r\n    train(args)\r\n  File \"LAC_demo/train.py\", line 275, in train\r\n    cur_batch = next(reader_itr)\r\n  File \"/opt/conda/envs/python27-paddle120-env/lib/python2.7/site-packages/paddle/batch.py\", line 35, in batch_reader\r\n    for instance in r:\r\n  File \"/opt/conda/envs/python27-paddle120-env/lib/python2.7/site-packages/paddle/reader/decorator.py\", line 101, in data_reader\r\n    for e in reader():\r\n  File \"/home/aistudio/LAC_demo/reader.py\", line 58, in reader\r\n    target_idx.append(int(label2id_dict[\"O\"]))\r\nKeyError: 'O'\r\n\r\n查看了以下LAC_demo/data/tag.dic文件中并没有\"O\",所以通过load_reverse_dict方法生成的label2id字典中并没有\"O\"这个关键词。",
        "state": "closed",
        "user": "wwjjy",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-19T02:52:22+00:00",
        "updated_at": "2020-05-28T12:53:05+00:00",
        "closed_at": "2020-05-28T12:53:05+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 217,
        "title": "kpi.py where it is? not in models",
        "body": "thanks",
        "state": "closed",
        "user": "SupDataKing",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-18T12:12:27+00:00",
        "updated_at": "2020-05-28T12:53:03+00:00",
        "closed_at": "2020-05-28T12:53:03+00:00",
        "comments_count": [
            "kuke",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 219,
        "title": "请问是否有尝试过MRC任务，有相关结果吗？",
        "body": "因为最近在做一些阅读理解相关的工作，想试一试ernie，但我看在github上并没有在任何MRC数据集（比如DuReader）上跑出来的结果，不知道有没有人做过？",
        "state": "closed",
        "user": "yifyang",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-22T09:29:47+00:00",
        "updated_at": "2019-08-19T03:08:09+00:00",
        "closed_at": "2019-08-19T03:08:09+00:00",
        "comments_count": [
            "xyzhou-puck"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 220,
        "title": "ValueError: cannot reshape array of size 16 into shape (6,newaxis)",
        "body": "![image](https://user-images.githubusercontent.com/28988355/61642664-f3362680-acd3-11e9-9ada-6227310f9508.png)\r\n outputs = evaluate(train_exe, train_program, train_py_reader, graph_vars, args.num_labels, \"train\",\r\n                                   dev_count)\r\n报错",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-22T14:57:06+00:00",
        "updated_at": "2020-05-28T11:52:36+00:00",
        "closed_at": "2020-05-28T11:52:36+00:00",
        "comments_count": [
            "tianxin1860",
            "jtyoui",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 221,
        "title": "检查paddle是否安装成功失败，module 'paddle.fluid' has no attribute 'install_check'",
        "body": "想安装paddle之后测试ERNIE的性能，paddle版本1.3.1。在使用paddle.fluid.install_check.run_check()的时候爆如下错误\r\n![error](https://user-images.githubusercontent.com/25231706/61674868-6b2e3c00-ad28-11e9-8818-f21f0ff2469e.png)\r\n\r\n\r\n忽略上述问题之后，直接跑ERNIE demo暂时没有发现报错。所以，大概率是1.3.1检验安装成功的属性不是这个。",
        "state": "closed",
        "user": "jackyrpi2016",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-23T00:58:39+00:00",
        "updated_at": "2020-05-28T12:53:04+00:00",
        "closed_at": "2020-05-28T12:53:04+00:00",
        "comments_count": [
            "tianxin1860",
            "jackyrpi2016",
            "jackyrpi2016",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 222,
        "title": "BERT、ERNIE、TextCNN做文本分类任务性能对比",
        "body": "以下模型的推理速度、内存占用等均在‘CPU’上考察\r\n【TextCNN、pytorch_bert、tensorflow_bert、ERNIE文本分类任务性能对比】\r\n【以下性能考察结果均经过多次测试】\r\n\r\n推理时的数据最长文本有75万中文字符，利用100个文本进行测试。\r\n从内存占用及推理速度指标来看，四种算法中，TextCNN均是最优的。\r\n由于bert及ERNIE并未经过多次fine-tune就已经达到较好泛化效果，因此可以认为其泛化能力会相对textcnn更好些。\r\npytorch_bert、tensorflow_bert、ERNIE三者相比较，在内存占用方面相差不是很大；但ERNIE在推理速度方面稍差（**这个蛮重要**），不过ERNIE版本更新很快、另可直接联系其工作团队解答疑问\r\n**长文本预测时**，尝试了将文本截断（例如：文本长度100000， 则分n=100000//510次）预测，因为长文本前510长度有可能没有重要信息。（例如：【‘娱乐’， ‘赌博’】二分类，截断n次，只要有一次预测为‘赌博’那文本就是赌博类别）\r\n\r\n【TextCNN】\r\n推理时模型占用内存大约：546M（稳定）\r\n推理时预测一个文件（完整长文本）平均所需时间：0.095s\r\n多次训练，保存泛化效果最好模型，其在测试集上准确率：95.312%\r\n\r\n【Pytorch_bert】\r\n推理时模型占用内存：942M（峰值）\r\n推理时预测一个文本（前128+后382字符）平均所需时间：1.149S\r\n推理时预测一个文本（前510   *  1长度+尾部数据；相当于预测截断成n个510文本）平均所需时间：2.658s\r\n推理时预测一个文本（前510   *  2长度+尾部数据）平均所需时间：3.529s\r\n推理时预测一个文本（前510   *  5长度+尾部数据）平均所需时间：5.233s\r\n推理时预测一个文本（完整长文本）平均所需时间：38.77s\r\nfine-tune模型，其在测试集上准确率：98.82%\r\n\t\r\n【tensorflow_bert】\r\n推理时模型占用内存：988M（峰值）\r\n推理时预测一个文本（前128+后382字符）平均所需时间：1.332S\r\n推理时预测一个文本（前510  *  1长度+尾部数据）平均所需时间：1.485s\r\n推理时预测一个文本（前510  *  2长度+尾部数据）平均所需时间：3.570s\r\n推理时预测一个文本（前510  *  5长度+尾部数据）平均所需时间：7.033s\r\n推理时预测一个文本（完整长文本）平均所需时间：56.18s\r\nfine-tune模型(调节的参数与pytorch_bert一致)，其在测试集上准确率：98.90%\r\n\r\n【ERNIE】\r\n推理时模型占用内存：1072M（峰值）\r\n推理时预测一个文本（前128+后382字符）平均所需时间：2.227s\r\n推理时预测一个文本（前510  *  1长度+尾部数据）平均所需时间：3.934s\r\n推理时预测一个文本（前510  *  2长度+尾部数据）平均所需时间：6.001s\r\n推理时预测一个文本（前510  *  5长度+尾部数据）平均所需时间：9.835s\r\n推理时预测一个文本（完整长文本）平均所需时间：\r\nfine-tune模型，其在测试集上准确率：98.74%\r\n\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t",
        "state": "closed",
        "user": "Biaocsu",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-24T03:48:11+00:00",
        "updated_at": "2020-05-28T09:52:45+00:00",
        "closed_at": "2020-05-28T09:52:45+00:00",
        "comments_count": [
            "jackyrpi2016",
            "Biaocsu",
            "tianxin1860",
            "jackyrpi2016",
            "Biaocsu",
            "haosiqing",
            "Biaocsu",
            "haosiqing",
            "haosiqing",
            "Biaocsu",
            "sevenold",
            "Biaocsu",
            "jiangix01",
            "Biaocsu",
            "jiangix01",
            "Biaocsu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 223,
        "title": "怎么把ERNIE改造成双塔的结构，双塔共享ernie内部所有参数？",
        "body": "![image](https://user-images.githubusercontent.com/4515954/61769539-3354f080-ae1d-11e9-90f9-9312b1ec4f3f.png)\r\n请问这样可以吗？",
        "state": "closed",
        "user": "yuanzfy",
        "closed_by": "yuanzfy",
        "created_at": "2019-07-24T06:13:42+00:00",
        "updated_at": "2019-07-24T07:04:03+00:00",
        "closed_at": "2019-07-24T07:04:03+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 224,
        "title": "预训练数据预处理-切分边界信息seg_labels如何获取",
        "body": "在ERNIE自定义数据进行预训练中，首先要对数据作预处理，生成与demo数据一样的格式，README文件中说“然后基于 tokenization.py 中的 CharTokenizer 对切分后的数据进行 token 化处理，得到明文的 token 序列及切分边界”、“其中 seg_labels 表示分词边界信息: 0表示词首、1表示非词首、-1为占位符, 其对应的词为 CLS 或者 SEP”，请问这里的切分边界信息seg_labels怎么获取？在tokenization.py文件中没有找到相应的处理函数。",
        "state": "closed",
        "user": "Bodhi-Tree",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-24T11:33:45+00:00",
        "updated_at": "2020-05-28T09:53:05+00:00",
        "closed_at": "2020-05-28T09:53:05+00:00",
        "comments_count": [
            "tianxin1860",
            "Bodhi-Tree",
            "tianxin1860",
            "Bodhi-Tree",
            "tianxin1860",
            "jfkey",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 226,
        "title": "BERT fineturn任务的脚本",
        "body": "请问有没有Readme里用BERT做各种中文fineturn任务的脚本？现在需要先验证BERT的效果。",
        "state": "closed",
        "user": "NotToday",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-25T07:11:10+00:00",
        "updated_at": "2020-05-28T11:52:37+00:00",
        "closed_at": "2020-05-28T11:52:37+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 229,
        "title": "ERNIE英文预训练模型",
        "body": "ERNIE有公开的英文预训练模型吗",
        "state": "closed",
        "user": "1234560o",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-29T09:35:49+00:00",
        "updated_at": "2019-08-19T03:10:26+00:00",
        "closed_at": "2019-08-19T03:10:26+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 228,
        "title": "将情感二分类转化为多分类遇到一些问题",
        "body": "只需把num_labels给成我所需的类别数吗？还需要做什么？谢谢！",
        "state": "closed",
        "user": "sunyh214",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-29T04:09:49+00:00",
        "updated_at": "2020-05-28T11:52:50+00:00",
        "closed_at": "2020-05-28T11:52:50+00:00",
        "comments_count": [
            "OleNet",
            "haosiqing",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 230,
        "title": "官方的vocab.txt报UnicodeDecodeError",
        "body": "想用ernie_encoder.py提取句子embedding，下载的README里的文件，读取vocab.txt报编码错误，文件不对？\r\n`~/workspace/nlp/ernie/ERNIE/ERNIE]$ python -u ernie_encoder.py --use_cuda false --batch_size 32 --output_dir ~/workspace/nlp/ernie/test --init_pretraining_params ~/workspace/nlp/ernie/params --data_set ~/workspace/nlp/ernie/sm.tsv --vocab_path ~/workspace/nlp/ernie/vocab.txt --max_seq_len 128 --ernie_config_path ~/workspace/nlp/ernie/ernie_config.json`\r\n```\r\n-----------  Configuration Arguments -----------\r\nbatch_size: 32\r\ndata_set: ~/workspace/nlp/ernie/sm.tsv\r\ndo_lower_case: True\r\nernie_config_path: ~/workspace/nlp/ernie/ernie_config.json\r\ninit_pretraining_params: ~/workspace/nlp/ernie/params\r\nmax_seq_len: 128\r\noutput_dir: ~/workspace/nlp/ernie/test\r\nuse_cuda: False\r\nvocab_path: ~/workspace/nlp/ernie/vocab.txt\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: relu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 513\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 2\r\nvocab_size: 18000\r\n------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\n  File \"ernie_encoder.py\", line 108, in main\r\n    do_lower_case=args.do_lower_case)\r\n  File \"~/workspace/nlp/ernie/ERNIE/ERNIE/reader/task_reader.py\", line 35, in __init__\r\n    vocab_file=vocab_path, do_lower_case=do_lower_case)\r\n  File \"~/workspace/nlp/ernie/ERNIE/ERNIE/tokenization.py\", line 113, in __init__\r\n    self.vocab = load_vocab(vocab_file)\r\n  File \"~/workspace/nlp/ernie/ERNIE/ERNIE/tokenization.py\", line 73, in load_vocab\r\n    for num, line in enumerate(fin):\r\n  File \"~/anaconda3/lib/python3.6/encodings/ascii.py\", line 26, in decode\r\n    return codecs.ascii_decode(input, self.errors)[0]\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xef in position 33: ordinal not in range(128)\r\n\r\n```",
        "state": "closed",
        "user": "treper",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-29T14:08:04+00:00",
        "updated_at": "2020-05-28T11:52:39+00:00",
        "closed_at": "2020-05-28T11:52:39+00:00",
        "comments_count": [
            "treper",
            "OleNet",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 231,
        "title": "任务数据无法下载 = =",
        "body": "任务数据下载链接，目前点击之后无法下载，显示下面的提示：\r\n{\"code\":\"NoSuchKey\",\"message\":\"The specified key does not exist.\",\"requestId\":\"c9208832-a279-4fa7-a874-c57cbb98f43e\"}\r\n请问这个情况如何解决呢？",
        "state": "closed",
        "user": "lrs1353281004",
        "closed_by": "tianxin1860",
        "created_at": "2019-07-30T03:10:22+00:00",
        "updated_at": "2019-07-30T17:02:11+00:00",
        "closed_at": "2019-07-30T17:02:11+00:00",
        "comments_count": [
            "OleNet",
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 232,
        "title": "where is ERNIE 2.0 ? ",
        "body": "The paper released today mentioned that the code and pretrained model has already been open-sourced. \r\n\r\n",
        "state": "closed",
        "user": "Jiakui",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-30T09:27:58+00:00",
        "updated_at": "2019-08-19T03:09:51+00:00",
        "closed_at": "2019-08-19T03:09:51+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 234,
        "title": "BERT readme 中“预训练 数据预处理”部分， id 化后的数据",
        "body": "BERT readme 中“预训练 数据预处理”部分， id 化后的数据，开头是 1 ，结尾是 2，是代表是CLS和SEP吗，但是在vocab.txt里，CLS和SEP分别对应 101 和 102 ，这部分是否有错误？谢谢",
        "state": "closed",
        "user": "yuzunrui",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-30T11:51:34+00:00",
        "updated_at": "2020-05-28T11:52:40+00:00",
        "closed_at": "2020-05-28T11:52:40+00:00",
        "comments_count": [
            "ak47-1234",
            "yuzunrui",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 238,
        "title": "会公开中文的2.0 large model 吗？",
        "body": "",
        "state": "closed",
        "user": "lopohui",
        "closed_by": "lopohui",
        "created_at": "2019-07-31T03:33:36+00:00",
        "updated_at": "2019-07-31T03:34:28+00:00",
        "closed_at": "2019-07-31T03:34:28+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 237,
        "title": "ERNIE2.0 中文的预训练模型",
        "body": "ERNIE2.0 中文的预训练模型会不会放出来？",
        "state": "closed",
        "user": "shuying136",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-31T02:26:00+00:00",
        "updated_at": "2019-08-19T03:08:55+00:00",
        "closed_at": "2019-08-19T03:08:55+00:00",
        "comments_count": [
            "treper",
            "wq343580510",
            "tolbkni",
            "hzrpku"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 239,
        "title": "ERNIE 2.0  task embedding",
        "body": "论文中预训练的时候不同的任务加入了task embedding，想问下finetune的时候是什么情况？\r\n加没加这个embedding\r\n",
        "state": "closed",
        "user": "wq343580510",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-31T04:00:12+00:00",
        "updated_at": "2020-05-28T11:52:43+00:00",
        "closed_at": "2020-05-28T11:52:43+00:00",
        "comments_count": [
            "nbcc",
            "yangze01",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 243,
        "title": "序列标注任务的预测脚本有没有",
        "body": "我看有分类任务的预测脚本了。\r\n能不能也把序列标注的脚本也给一下？",
        "state": "closed",
        "user": "onfireisme",
        "closed_by": "stale[bot]",
        "created_at": "2019-07-31T09:46:26+00:00",
        "updated_at": "2020-05-28T11:52:48+00:00",
        "closed_at": "2020-05-28T11:52:48+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "lrs1353281004",
            "semal",
            "semal",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 240,
        "title": "when the \"ERNIE 2.0 Large for Chinese\" will be released? thx for answer!",
        "body": "",
        "state": "closed",
        "user": "weizaiff",
        "closed_by": "zhanghan1992",
        "created_at": "2019-07-31T06:07:10+00:00",
        "updated_at": "2019-08-19T02:55:59+00:00",
        "closed_at": "2019-08-19T02:55:59+00:00",
        "comments_count": [
            "XIAOLINSHINE"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 244,
        "title": "计算文本相似度的时候，训练样本finetune要不要分词？",
        "body": "",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T02:43:24+00:00",
        "updated_at": "2019-08-19T02:52:39+00:00",
        "closed_at": "2019-08-19T02:52:39+00:00",
        "comments_count": [
            "XIAOLINSHINE"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 246,
        "title": "ERNIE自定义预训练时，为什么每次迭代打印出来的learning_rate都是0？",
        "body": "如题，在ERNIE自定义预训练时，设置了学习率为0.0001，但每次迭代打印出来的当前学习率为什么都是0呢？\r\n![image](https://user-images.githubusercontent.com/18651447/62271241-b94ee800-b46a-11e9-9c66-227ddaeb7ea3.png)\r\n![image](https://user-images.githubusercontent.com/18651447/62271289-d08dd580-b46a-11e9-96f9-341ed4380387.png)\r\n",
        "state": "closed",
        "user": "Bodhi-Tree",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T06:45:43+00:00",
        "updated_at": "2019-08-19T02:52:52+00:00",
        "closed_at": "2019-08-19T02:52:52+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 245,
        "title": "bert和ernie在msra-ner上的实验",
        "body": "我做了一些实验，使用Bert Chinese model(base, tensorflow版)和ERNIE1.0(base, paddlepaddle实现)在中文ner数据集msra-ner进行实验,发现bert在该[数据集](https://bj.bcebos.com/paddlehub-dataset/msra_ner.tar.gz)（由paddlehub代码中提供的网址下载下来的）上验证集和测试集的f1-score分别是96.1，94.8，与ERNIE论文中的相差比较大，论文中分别是94.0和92.6，ERNIE的实验差别不大。我的计算f1-score方式是计算LOC、PER、ORG这三类的chunk的macro-f1，是否是paddlepaddle调用的评估方式不一样造成的差别在这个过程中还是有其他什么问题？\r\n\r\n数据集 | MSRA-NER | \r\n-- | -- | \r\n任务描述 |  中文实体识别 |\r\n评估指标 | f1-score |\r\nBert | dev: 94.0(96.1)  test: 92.6(94.8) |  \r\nERNIE | dev: 94.5(+0.5)  test: 93.7(+1.1) |\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "1234560o",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T03:34:46+00:00",
        "updated_at": "2019-08-19T02:53:53+00:00",
        "closed_at": "2019-08-19T02:53:53+00:00",
        "comments_count": [
            "MrPig"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 249,
        "title": "bert 预训练代码有个小错误",
        "body": "ERNIE/BERT/reader/pretraining.py\r\n\r\n91行与162行应该统一吧\r\n162行应该是大于号",
        "state": "closed",
        "user": "zle1992",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T11:25:24+00:00",
        "updated_at": "2019-08-19T02:54:35+00:00",
        "closed_at": "2019-08-19T02:54:35+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 247,
        "title": "there is no lcqmc data set in task_data",
        "body": "",
        "state": "closed",
        "user": "steveatgit",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T06:52:15+00:00",
        "updated_at": "2019-08-19T02:48:04+00:00",
        "closed_at": "2019-08-19T02:48:04+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 253,
        "title": "where is those Pre-training tasks?",
        "body": "First of all, many thanks to BaiDu's contribution, you did a really amazing and excellent work.\r\n\r\nMy question is where to find those pre-training tasks that mentioned in the paper and readme, those are as follows:\r\n\r\n- Word-aware Pre-training Tasks\r\n  - Knowledge Masking Task\r\n  - Capitalization Prediction Task\r\n  - Token-Document Relation Prediction Task\r\n- Structure-aware Pre-training Tasks\r\n  - Sentence Reordering Task\r\n  - Sentence Distance Task\r\n- Semantic-aware Pre-training Tasks\r\n  - Discourse Relation Task\r\n  - IR Relevance Task",
        "state": "closed",
        "user": "hscspring",
        "closed_by": "hscspring",
        "created_at": "2019-08-02T04:41:09+00:00",
        "updated_at": "2019-08-02T08:16:51+00:00",
        "closed_at": "2019-08-02T08:16:51+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 250,
        "title": "mask issue during pretraining ",
        "body": "共有2个问题，\r\n1) 在这个函数里 _convert_example_to_record()，  下面的label_id是怎么来的？\r\n` if self.is_inference:\r\n            Record = namedtuple('Record',\r\n                                ['token_ids', 'text_type_ids', 'position_ids'])\r\n            record = Record(\r\n                token_ids=token_ids,\r\n                text_type_ids=text_type_ids,\r\n                position_ids=position_ids)\r\n        else:\r\n            if self.label_map:\r\n                label_id = self.label_map[example.label]\r\n            else:\r\n                label_id = example.label\r\n\r\n            Record = namedtuple('Record', [\r\n                'token_ids', 'text_type_ids', 'position_ids', 'label_id', 'qid'\r\n            ])\r\n\r\n            qid = None\r\n            if \"qid\" in example._fields:\r\n                qid = example.qid\r\n\r\n            record = Record(\r\n                token_ids=token_ids,\r\n                text_type_ids=text_type_ids,\r\n                position_ids=position_ids,\r\n                label_id=label_id,\r\n                qid=qid)`\r\n\r\n2) 论文里面的 incremental learning, 是通过多次数据预处理生成不同的mask labels 实现的吗？ 这样的话需要根据不同的数据跑代码多次？ ",
        "state": "closed",
        "user": "Sherriiie",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-01T11:47:27+00:00",
        "updated_at": "2019-08-19T02:48:40+00:00",
        "closed_at": "2019-08-19T02:48:40+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 255,
        "title": "Is ERNIE_Base_en_stable-2.0.0.tar.gz the ture english version, not multilanguage?",
        "body": "It seems like a multilanguage version according to its vocab.txt, and It contains less words than vocab of bert-base-uncased. You sure about you upload the right one ?",
        "state": "closed",
        "user": "adamluo1995",
        "closed_by": "adamluo1995",
        "created_at": "2019-08-02T14:39:48+00:00",
        "updated_at": "2019-08-04T04:16:22+00:00",
        "closed_at": "2019-08-04T04:16:22+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 251,
        "title": "ERNIE2.0 run_classifier.py fp16 error",
        "body": "Traceback (most recent call last):\r\n  File \"run_classifier.py\", line 405, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 126, in main\r\n    use_fp16=args.use_fp16)\r\n  File \"/home/yaze/remote/ERNIE-develop/optimization.py\", line 117, in optimization\r\n    param_grads, train_program, startup_prog, loss_scaling)\r\n  File \"/home/yaze/remote/ERNIE-develop/utils/fp16.py\", line 85, in create_master_params_grads\r\n    master_grad = master_grad / float(loss_scaling)\r\nTypeError: float() argument must be a string or a number, not 'Variable'",
        "state": "closed",
        "user": "yangze01",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-02T03:57:47+00:00",
        "updated_at": "2020-05-28T11:52:44+00:00",
        "closed_at": "2020-05-28T11:52:44+00:00",
        "comments_count": [
            "tianxin1860",
            "yangze01",
            "yangze01",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 258,
        "title": "ur'strings' are syntax errors in Python 3",
        "body": "In Python 3, you can have a u'string' or an r'string' but a ur'string' is a syntax error...\r\n\r\n$ __python3 -c \"ur'string'\"__  # --> SyntaxError: invalid syntax\r\n\r\nhttps://github.com/PaddlePaddle/ERNIE/blob/develop/utils/cmrc2018_eval.py#L35",
        "state": "closed",
        "user": "cclauss",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-03T11:11:01+00:00",
        "updated_at": "2019-08-19T02:49:47+00:00",
        "closed_at": "2019-08-19T02:49:47+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 261,
        "title": "关于ERNIE2.0预训练代码",
        "body": "请问开放的代码中是否有\"增量训练\"的各种任务的代码呢? (好像没有找到)\r\n如果暂时还未开放这部分代码的话, 请问是否未来有计划开放呢? \r\nERNIE2.0增量训练的概念很吸引人, 希望能够增加自己的pretraining任务~\r\n",
        "state": "closed",
        "user": "daizh",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-05T07:16:57+00:00",
        "updated_at": "2019-08-19T02:49:19+00:00",
        "closed_at": "2019-08-19T02:49:19+00:00",
        "comments_count": [
            "Meiyim",
            "Meiyim",
            "UniqueAndys",
            "ClistaWang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 256,
        "title": "save_inference_model_path生成模型不一致问题",
        "body": "问题描述：使用ernie做完一个文本多分类模型训练。现在发现每次**重新**调用predict_classifier时，利用ckpt成代用save_inference_model持久化模型对同样的输入预测出来的结果概率值不相同。但是如果不调用save_inference_model，而是使用之前的生成持久化模型，则对同样的输入预测是相同的。\r\n测试环境：cpu和gpu都测试，使用ernie2.0的代码，版本一致\r\n",
        "state": "closed",
        "user": "qibaoyuan",
        "closed_by": "qibaoyuan",
        "created_at": "2019-08-03T02:36:58+00:00",
        "updated_at": "2019-08-06T02:34:43+00:00",
        "closed_at": "2019-08-06T02:34:43+00:00",
        "comments_count": [
            "tianxin1860",
            "qibaoyuan",
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 263,
        "title": "关于Token-Document Relation Prediction Task",
        "body": "请问，关于Pre-Training Task，\r\n论文中是这么写的\r\nWe add a task to predict whether the token in a segment appears in other segments of the original document. Empirically, the words that appear in many parts of a document are usually\r\ncommonly-used words or relevant with the main topics of the document. Therefore, through identifying the key words of a document appearing in the segment, the task can enable the ability of a model to capture the key words of the document to some extent\r\n\r\n我有2个问题。\r\n\r\n问题1，是如何在input data中标示要预测的token的？\r\n问题2，一个token在文章中出现很多次的话，这个token可能是很常见的token，也有可能是对于这个文章来说很重要的token。直接预测token是否多次出现，应该不能得到一个判断capture the key words的模型。是否有用TFIDF之类的方法做了进一步的处理？\r\n",
        "state": "closed",
        "user": "tanaka-jp",
        "closed_by": "tanaka-jp",
        "created_at": "2019-08-05T11:08:29+00:00",
        "updated_at": "2019-08-06T06:55:33+00:00",
        "closed_at": "2019-08-06T06:55:33+00:00",
        "comments_count": [
            "OleNet",
            "tanaka-jp",
            "OleNet",
            "tanaka-jp"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 262,
        "title": "关于Sentence Reordering Task的k的数值",
        "body": "ERNIE2.0是一篇非常好的论文，令人振奋。\r\n感谢各位作者的努力。\r\n\r\n我有一个问题想问一下\r\n关于Sentence Reordering Task，论文中写到，\r\nDuring the pre-training process of this task, a given paragraph is randomly split into 1 to m segments and then all of the combinations are shuffled by a random permuted order.\r\nWe let the pre-trained model to reorganize these permuted segments, modeled as a k-class classification problem where k= 1! + 2! + 3! + ... + m! .  \r\n\r\n我的问题是，将一个段落分解为1到m个segment的话，\r\n将被打乱的次序恢复回去，只需要m!种可能性就可以了。\r\n论文中的1! + 2! + 3! + ... + m!的可能性，\r\n是否因为把不相同的segment的个数看作不同情况？\r\n\r\n",
        "state": "closed",
        "user": "tanaka-jp",
        "closed_by": "tanaka-jp",
        "created_at": "2019-08-05T09:43:22+00:00",
        "updated_at": "2019-11-04T13:25:09+00:00",
        "closed_at": "2019-08-06T01:42:54+00:00",
        "comments_count": [
            "Meiyim",
            "tanaka-jp",
            "ShaneTian"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 265,
        "title": "ERNIE 有没有在自己的corpus上进行预训练的教程？",
        "body": "",
        "state": "closed",
        "user": "songtaoshi",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-07T07:14:18+00:00",
        "updated_at": "2019-08-19T02:49:27+00:00",
        "closed_at": "2019-08-19T02:49:27+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 267,
        "title": "ERNIE在DuReader上的实验",
        "body": "请问ERNIE在DuReader实验的相关代码是会放出？\r\n`ERNIE/run_mrc.py`中是针对Squad数据格式的。而DuReader是多文档的阅读理解数据集，和Squad不同。不知道这部分是如何处理的？",
        "state": "closed",
        "user": "dli1",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-07T08:39:07+00:00",
        "updated_at": "2019-08-19T02:41:29+00:00",
        "closed_at": "2019-08-19T02:41:29+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 266,
        "title": "分类预测脚本多次执行不一致问题",
        "body": "直接用ernie的预训练模型做预测，遇到了每次save_inference_model生成的模型不一致的问题，每次执行保存的模型对相同的输入的预测概率值都不一样，check了每次保存的模型 _cls_out_w跟__model__这两个文件的md5值不一样，请问这个是什么问题呢？\r\n执行的是开源代码中的predict_classifier.py脚本，加载的是开源的预训练模型参数。",
        "state": "closed",
        "user": "liuguolian",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-07T07:46:37+00:00",
        "updated_at": "2019-08-19T02:47:02+00:00",
        "closed_at": "2019-08-19T02:47:02+00:00",
        "comments_count": [
            "Meiyim",
            "liuguolian",
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 268,
        "title": "预训练与finetune时的tokenizer不一致",
        "body": "1. 我发现在ernie的pretrain阶段使用的是CharTokenizer,在finetune阶段使用的是FullTokenizer，这两个tokenizer的逻辑还不一样，请问这个是什么原因呢？不会出现两个阶段不对应的问题吗？\r\n\r\n\r\n",
        "state": "closed",
        "user": "prozhuchen",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-07T11:41:04+00:00",
        "updated_at": "2020-05-28T11:52:45+00:00",
        "closed_at": "2020-05-28T11:52:45+00:00",
        "comments_count": [
            "Meiyim",
            "prozhuchen",
            "Meiyim",
            "prozhuchen",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 269,
        "title": "paddle.fluid.core.EnforceNotMet: ptr_ should not be null",
        "body": "在gpu环境执行获取embedding的脚本报错如下：\r\nTraceback (most recent call last):\r\nFile \"ernie_encoder.py\", line 187, in <module>\r\nmain(args)\r\nFile \"ernie_encoder.py\", line 163, in main\r\nreturn_numpy=False)\r\nFile \"/home/slurm/job/tmp/job-120971/python/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 470, in run\r\nself.executor.run(program.desc, scope, 0, True, True)\r\npaddle.fluid.core.EnforceNotMet: ptr_ should not be null\r\nInsufficient GPU memory to allocation. at [/paddle/paddle/fluid/framework/tensor.h:180]\r\nPaddlePaddle Call Stacks: \r\n0 0x7f9e8e8bad06p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 486\r\n1 0x7f9e8fec262cp paddle::framework::Tensor::mutable_data(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>, std::type_index, unsigned long) + 2428\r\n2 0x7f9e8edc1641p paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, float>::Compute(paddle::framework::ExecutionContext const&) const + 225\r\n3 0x7f9e8edc1cd3p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, float>, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, paddle::platform::float16>, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, double> >::operator()(char const*, char const*) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n4 0x7f9e8fe44bbcp paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 492\r\n5 0x7f9e8fe413ffp paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 463\r\n6 0x7f9e8e9889cbp paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool) + 219\r\n7 0x7f9e8e989620p paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool) + 128\r\n8 0x7f9e8e89dfedp\r\n9 0x7f9e8e8d1414p pybind11::cpp_function::dispatcher(_object*, _object*, _object*) + 2596\r\n10 0x7f9eeffa855fp PyEval_EvalFrameEx + 29855\r\n11 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n12 0x7f9eeffa79fcp PyEval_EvalFrameEx + 26940\r\n13 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n14 0x7f9eeffa79fcp PyEval_EvalFrameEx + 26940\r\n15 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n16 0x7f9eeffaa9a2p PyEval_EvalCode + 50\r\n17 0x7f9eeffd3782p PyRun_FileExFlags + 146\r\n18 0x7f9eeffd4af9p PyRun_SimpleFileExFlags + 217\r\n19 0x7f9eeffea82dp Py_Main + 3149\r\n20 0x7f9eef1e7bd5p __libc_start_main + 245\r\n21 0x4007a1p",
        "state": "closed",
        "user": "liuguolian",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-07T16:51:57+00:00",
        "updated_at": "2020-05-28T11:52:46+00:00",
        "closed_at": "2020-05-28T11:52:46+00:00",
        "comments_count": [
            "Meiyim",
            "liuguolian",
            "liuguolian",
            "liuguolian",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 270,
        "title": "请问ERNIE 2.0  为什么没有中文的？",
        "body": "请问 ERNIE 2.0  为什么没有中文的？",
        "state": "closed",
        "user": "90217",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-09T08:13:16+00:00",
        "updated_at": "2019-08-19T02:39:04+00:00",
        "closed_at": "2019-08-19T02:39:04+00:00",
        "comments_count": [
            "huntzhan",
            "XIAOLINSHINE"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 271,
        "title": "关于多答案的阅读理解任务",
        "body": "请问在阅读理解任务，如果一个问题的答案包含2个以上的情况（多个答案出现在文本的不同位置），现在支持模型训练与预测吗？\r\n\r\n如果不支持的话，理论上是否可行？近期是否有更新的计划？\r\n\r\n谢谢！",
        "state": "closed",
        "user": "AzureDreamDing",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-09T11:16:57+00:00",
        "updated_at": "2020-05-28T11:52:56+00:00",
        "closed_at": "2020-05-28T11:52:56+00:00",
        "comments_count": [
            "Meiyim",
            "AzureDreamDing",
            "wang001",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 276,
        "title": "对于预训练mask单词的疑问",
        "body": "在看batching.py的mask一个batch数据的代码时，我发现mask_pos和mask_label一直是一个一维矩阵，在处理最后观察数据维度时也证明了这个结论\r\n```\r\n(Pdb) sent_id.shape\r\n(6, 19, 1)\r\n(Pdb) mask_pos.shape\r\n(9, 1)\r\n```\r\n感觉这个不对吧，mask_pos和mask_label应该是个二维矩阵，比如最后维度应该是(6,9,1)这种的吧？请知晓的同学解答一下疑惑",
        "state": "closed",
        "user": "prozhuchen",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-12T04:00:47+00:00",
        "updated_at": "2019-08-19T02:37:07+00:00",
        "closed_at": "2019-08-19T02:37:07+00:00",
        "comments_count": [
            "prozhuchen",
            "PROoshio"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 275,
        "title": "LARK/BERT finetune 阅读理解任务，多卡预测发现出现数据丢失",
        "body": "利用BERT finetune阅读理解任务（SQuAD），发现源码run_squad.py 预测时用的时单卡，训练时用的是可以多卡，我试着按照多卡训练的方式改写预测，使得预测时也可以支持多卡。以下是 我改写的 多卡预测：\r\n![image](https://user-images.githubusercontent.com/48793257/62844157-ea90a900-bcf1-11e9-9963-79fd645d05a8.png)\r\n\r\n并且同时将batching.py/pad_batch_data()方法的max_len改为 全局的max_seq_len，而不是每个batch下sample的最大长度，\r\n最后运行发现错误，输入的all_features和返回的all_results，数量不一致：\r\n![image](https://user-images.githubusercontent.com/48793257/62844143-caf98080-bcf1-11e9-8168-17eac3b99e6e.png)\r\n\r\n",
        "state": "closed",
        "user": "Steffy-zxf",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-12T03:11:58+00:00",
        "updated_at": "2019-08-12T08:26:37+00:00",
        "closed_at": "2019-08-12T08:26:37+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 277,
        "title": "同样的数据，在gpu上运行跑emb信息跟单机跑的结果不一样",
        "body": "同样的数据，在gpu上运行跑emb信息跟单机跑的结果不一样。\r\n均是用的相同的demo程序，gpu的节点数1，gpu单卡跑的，链接：隐去链接",
        "state": "closed",
        "user": "liuguolian",
        "closed_by": "nbcc",
        "created_at": "2019-08-12T04:26:45+00:00",
        "updated_at": "2019-08-12T05:28:00+00:00",
        "closed_at": "2019-08-12T05:27:59+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 278,
        "title": "ERNIE 2.0 多任务学习的预训练代码何时会放",
        "body": "",
        "state": "closed",
        "user": "Albert-Ma",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-12T15:17:45+00:00",
        "updated_at": "2020-05-28T11:52:49+00:00",
        "closed_at": "2020-05-28T11:52:49+00:00",
        "comments_count": [
            "PROoshio",
            "Albert-Ma",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 280,
        "title": "Pretrain method",
        "body": "Hi, I wanna ask question to understand your paper.\r\nIn your paper, you said “when adding a new task we initialize the parameters of the previous one. ”\r\nIf the previous parameter is initialized, how can the model get knowledge of previous ones? I’m not sure \r\nAnd “Whenever a new task is a introduced,  it would be trained with the previous ones.” this means joint learning or something else?\r\n\r\nAlso I want to know how I can find this procedure in your code",
        "state": "closed",
        "user": "vanche",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-14T09:01:01+00:00",
        "updated_at": "2019-08-19T02:36:05+00:00",
        "closed_at": "2019-08-19T02:36:05+00:00",
        "comments_count": [
            "PROoshio"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 281,
        "title": "NER任务中，如何利用 Fine-tuning 得到的模型对新数据进行批量预测？",
        "body": "官方例子中，给了 predict_classifier.py 来进行分类任务的预测，请问一下对于微调后的 ner 模型，如何进行批量预测呢？",
        "state": "closed",
        "user": "yechens",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-15T04:03:47+00:00",
        "updated_at": "2020-05-28T11:52:59+00:00",
        "closed_at": "2020-05-28T11:52:59+00:00",
        "comments_count": [
            "sandyhouse",
            "yechens",
            "cjliux",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 282,
        "title": "关于ERNIE在MSRA上的数据预处理",
        "body": "ERNIE的msra-ner任务中看到最后一个全连接层的输出等于num_labels，请问一下[CLS]，[SEP]，[PAD]这些的label是被标记为'O'了吗.",
        "state": "closed",
        "user": "ZacBi",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-15T15:19:49+00:00",
        "updated_at": "2019-08-19T02:34:53+00:00",
        "closed_at": "2019-08-19T02:34:53+00:00",
        "comments_count": [
            "PROoshio",
            "ZacBi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 284,
        "title": "运行时报错TypeError: __new__() missing 1 required positional argument: 'text_a'",
        "body": "运行sh script/zh_task/ernie_base/run_ChnSentiCorp.sh时报错TypeError: __new__() missing 1 required positional argument: 'text_a'，\r\n完整报错如下：\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 87, in main\r\n    phase=\"train\")\r\n  File \"/mnt/hgfs/share/ERNIE-develop/reader/task_reader.py\", line 226, in data_generator\r\n    examples = self._read_tsv(input_file)\r\n  File \"/mnt/hgfs/share/ERNIE-develop/reader/task_reader.py\", line 268, in _read_tsv\r\n    example = Example(*line)\r\nTypeError: __new__() missing 1 required positional argument: 'text_a'\r\n好几天了也不会改，请问这是什么原因呢？如何得到解决？",
        "state": "closed",
        "user": "haosiqing",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-16T07:55:47+00:00",
        "updated_at": "2020-05-28T11:52:58+00:00",
        "closed_at": "2020-05-28T11:52:58+00:00",
        "comments_count": [
            "PROoshio",
            "yechens",
            "haosiqing",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 283,
        "title": "OSError: Error in parsing Ernie model config file 'None'",
        "body": "请问这个错误该怎么解决，谢谢~",
        "state": "closed",
        "user": "chaotianjiao",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-16T06:53:50+00:00",
        "updated_at": "2020-09-13T03:34:33+00:00",
        "closed_at": "2019-08-19T02:36:26+00:00",
        "comments_count": [
            "PROoshio",
            "dll1314"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 285,
        "title": "运行时报错run_ChnSentiCorp.sh:  paddle.fluid.core_avx.EnforceNotMet: Invoke operator mul error.",
        "body": "Traceback (most recent call last):\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 221, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 280, in run\r\n    return_numpy=return_numpy)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 666, in run\r\n    return_numpy=return_numpy)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 528, in _run_parallel\r\n    exe.run(fetch_var_names, fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: Invoke operator mul error.\r\n\r\nPython Callstacks:\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1771, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/layers/nn.py\", line 334, in fc\r\n    \"y_num_col_dims\": 1})\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 60, in __compute_qkv\r\n    bias_attr=name + '_query_fc.b_0')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 129, in multi_head_attention\r\n    q, k, v = __compute_qkv(queries, keys, values, n_head, d_key, d_value)\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 273, in encoder_layer\r\n    name=name + '_multi_head_att')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 336, in encoder\r\n    name=name + '_layer_' + str(i))\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/ernie.py\", line 165, in _build_model\r\n    name='encoder')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/ernie.py\", line 93, in __init__\r\n    input_mask)\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/finetune/classifier.py\", line 74, in create_model\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 114, in main\r\n    is_regression=args.is_regression)\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n\r\nC++ Callstacks:\r\nEnforce failed. Expected posix_memalign(&p, alignment, size) == 0, but received posix_memalign(&p, alignment, size):12 != 0:0.\r\nAlloc 524288000 error! at [/paddle/paddle/fluid/memory/detail/system_allocator.cc:57]\r\nPaddlePaddle Call Stacks:\r\n0       0x7f63d4c2db78p void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 360\r\n1       0x7f63d5ff7337p paddle::memory::detail::AlignedMalloc(unsigned long) + 295\r\n2       0x7f63d5ff75f7p paddle::memory::detail::CPUAllocator::Alloc(unsigned long*, unsigned long) + 39\r\n3       0x7f63d5ff4a0ap paddle::memory::detail::BuddyAllocator::RefillPool(unsigned long) + 58\r\n4       0x7f63d5ff521fp paddle::memory::detail::BuddyAllocator::Alloc(unsigned long) + 719\r\n5       0x7f63d5fd5f05p void* paddle::memory::legacy::Alloc<paddle::platform::CPUPlace>(paddle::platform::CPUPlace const&, unsigned long) + 181\r\n6       0x7f63d5fd6c35p paddle::memory::allocation::LegacyAllocator::AllocateImpl(unsigned long) + 405\r\n\r\n情感分类Finetuning时报错，机器配置较差，只用CPU  (6核， 32G内存)， 跑的1.0版本，这里报错是因为配置不够吗？可以通过设置降低参数把代码跑通吗？",
        "state": "closed",
        "user": "SSHLR",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-18T07:41:07+00:00",
        "updated_at": "2019-08-25T15:43:45+00:00",
        "closed_at": "2019-08-25T15:43:45+00:00",
        "comments_count": [
            "zhanghan1992",
            "SSHLR"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 286,
        "title": "GPU Memory error while running script/zh_task/ernie_base/run_drcd.sh",
        "body": "\r\nI was trying to develop a custom Machine comprehension model over squad v1 data by running  script/zh_task/ernie_base/run_drcd.sh, and encountered the following error.  Any help would be appreciated.    \r\n\r\n\r\n\r\n+ export FLAGS_eager_delete_tensor_gb=0\r\n+ FLAGS_eager_delete_tensor_gb=0\r\n+ export FLAGS_sync_nccl_allreduce=1\r\n+ FLAGS_sync_nccl_allreduce=1\r\n+ export CUDA_VISIBLE_DEVICES=0,1,2,3\r\n+ CUDA_VISIBLE_DEVICES=0,1,2,3\r\n+ python -u run_mrc.py --use_cuda true --train_set /home/ubuntu/cibin/squad_v1_1__data/train.json --batch_size 16 --in_tokens false --use_fast_executor true --checkpoints ./checkpoints --vocab_path /home/ubuntu/cibin/ERNIE/pretrained_model/vocab.txt --ernie_config_path /home/ubuntu/cibin/ERNIE/pretrained_model/ernie_config.json --do_train true --do_val true --do_test true --verbose true --save_steps 1000 --validation_steps 100 --warmup_proportion 0.0 --weight_decay 0.01 --epoch 2 --max_seq_len 512 --do_lower_case true --doc_stride 128 --dev_set /home/ubuntu/cibin/squad_v1_1__data/dev.json --test_set /home/ubuntu/cibin/squad_v1_1__data/test.json --learning_rate 5e-5 --num_iteration_per_drop_scope 1 --init_pretraining_params /home/ubuntu/cibin/ERNIE/pretrained_model/params --skip_steps 10\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\ntask_type_vocab_size: 16\r\nvocab_size: 30522\r\n------------------------------------------------\r\nDevice count: 4\r\nNum train examples: 1483\r\nMax train steps: 46\r\nNum warmup steps: 0\r\nmemory_optimize is deprecated. Use CompiledProgram and Executor\r\nTheoretical memory usage in training: 13971.085 - 14636.375 MB\r\nW0819 05:09:46.604622   511 device_context.cc:259] Please NOTE: device: 0, CUDA Capability: 61, Driver API Version: 10.1, Runtime API Version: 10.0\r\nW0819 05:09:46.606772   511 device_context.cc:267] device: 0, cuDNN Version: 7.6.\r\nLoad pretraining parameters from /home/ubuntu/cibin/libor/github/ERNIE/pretrained_model/params.\r\nI0819 05:09:49.962049   511 parallel_executor.cc:329] The number of CUDAPlace, which is used in ParallelExecutor, is 4. And the Program will be copied 4 copies\r\nI0819 05:09:51.959648   511 build_strategy.cc:340] SeqOnlyAllReduceOps:0, num_trainers:1\r\nW0819 05:09:55.706979   569 system_allocator.cc:121] Cannot malloc 9770.01 MB GPU memory. Please shrink FLAGS_fraction_of_gpu_memory_to_use or FLAGS_initial_gpu_memory_in_mb or FLAGS_reallocate_gpu_memory_in_mbenvironment variable to a lower value. Current FLAGS_fraction_of_gpu_memory_to_use value is 0.92. Current FLAGS_initial_gpu_memory_in_mb value is 0. Current FLAGS_reallocate_gpu_memory_in_mb value is 0\r\nF0819 05:09:55.707295   569 legacy_allocator.cc:201] Cannot allocate 139.869873MB in GPU 1, available 648.500000MBtotal 11721506816GpuMinChunkSize 256.000000BGpuMaxChunkSize 9.541025GBGPU memory used: 9.507799GB\r\n*** Check failure stack trace: ***\r\n    @     0x7f4d748e639d  google::LogMessage::Fail()\r\n    @     0x7f4d748e9e4c  google::LogMessage::SendToLog()\r\n    @     0x7f4d748e5ec3  google::LogMessage::Flush()\r\n    @     0x7f4d748eb35e  google::LogMessageFatal::~LogMessageFatal()\r\n    @     0x7f4d768c77d4  paddle::memory::legacy::Alloc<>()\r\n    @     0x7f4d768c7ab5  paddle::memory::allocation::LegacyAllocator::AllocateImpl()\r\n    @     0x7f4d768bbbd5  paddle::memory::allocation::AllocatorFacade::Alloc()\r\n    @     0x7f4d768bbd5a  paddle::memory::allocation::AllocatorFacade::AllocShared()\r\n    @     0x7f4d764b489c  paddle::memory::AllocShared()\r\n    @     0x7f4d7688d924  paddle::framework::Tensor::mutable_data()\r\n    @     0x7f4d74b90ba5  paddle::operators::MatMulGradKernel<>::MatMul()\r\n    @     0x7f4d74b90e1f  paddle::operators::MatMulGradKernel<>::CalcInputGrad()\r\n    @     0x7f4d74b912e7  paddle::operators::MatMulGradKernel<>::Compute()\r\n    @     0x7f4d74b916f3  _ZNSt17_Function_handlerIFvRKN6paddle9framework16ExecutionContextEEZNKS1_24OpKernelRegistrarFunctorINS0_8platform9CUDAPlaceELb0ELm0EINS0_9operators16MatMulGradKernelINS7_17CUDADeviceContextEfEENSA_ISB_dEENSA_ISB_NS7_7float16EEEEEclEPKcSI_iEUlS4_E_E9_M_invokeERKSt9_Any_dataS4_\r\n    @     0x7f4d7682f187  paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7f4d7682f561  paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7f4d7682cb5c  paddle::framework::OperatorBase::Run()\r\n    @     0x7f4d7662805a  paddle::framework::details::ComputationOpHandle::RunImpl()\r\n    @     0x7f4d7661aa00  paddle::framework::details::OpHandleBase::Run()\r\n    @     0x7f4d765fbd76  paddle::framework::details::FastThreadedSSAGraphExecutor::RunOpSync()\r\n    @     0x7f4d765fa9df  paddle::framework::details::FastThreadedSSAGraphExecutor::RunOp()\r\n    @     0x7f4d765fad9f  _ZNSt17_Function_handlerIFvvESt17reference_wrapperISt12_Bind_simpleIFS1_ISt5_BindIFZN6paddle9framework7details28FastThreadedSSAGraphExecutor10RunOpAsyncEPSt13unordered_mapIPNS6_12OpHandleBaseESt6atomicIiESt4hashISA_ESt8equal_toISA_ESaISt4pairIKSA_SC_EEESA_RKSt10shared_ptrINS5_13BlockingQueueImEEEEUlvE_vEEEvEEEE9_M_invokeERKSt9_Any_data\r\n    @     0x7f4d749d3b53  std::_Function_handler<>::_M_invoke()\r\n    @     0x7f4d74869c47  std::__future_base::_State_base::_M_do_set()\r\n    @     0x7f4dc650da99  __pthread_once_slow\r\n    @     0x7f4d765f6422  _ZNSt13__future_base11_Task_stateISt5_BindIFZN6paddle9framework7details28FastThreadedSSAGraphExecutor10RunOpAsyncEPSt13unordered_mapIPNS4_12OpHandleBaseESt6atomicIiESt4hashIS8_ESt8equal_toIS8_ESaISt4pairIKS8_SA_EEES8_RKSt10shared_ptrINS3_13BlockingQueueImEEEEUlvE_vEESaIiEFvvEE6_M_runEv\r\n    @     0x7f4d7486b1c4  _ZZN10ThreadPoolC1EmENKUlvE_clEv\r\n    @     0x7f4da839cc80  (unknown)\r\n    @     0x7f4dc65066ba  start_thread\r\n    @     0x7f4dc623c41d  clone\r\n    @              (nil)  (unknown)\r\nscript/zh_task/ernie_base/run_drcd.sh: line 50:   511 Aborted                 (core dumped) python -u run_mrc.py --use_cuda true --train_set ${TASK_DATA_PATH1}/train.json --batch_size 16 --in_tokens false --use_fast_executor true --checkpoints ./checkpoints --vocab_path ${MODEL_PATH}/vocab.txt --ernie_config_path ${MODEL_PATH}/ernie_config.json --do_train true --do_val true --do_test true --verbose true --save_steps 1000 --validation_steps 100 --warmup_proportion 0.0 --weight_decay 0.01 --epoch 2 --max_seq_len 512 --do_lower_case true --doc_stride 128 --dev_set ${TASK_DATA_PATH}/dev.json --test_set ${TASK_DATA_PATH}/test.json --learning_rate 5e-5 --num_iteration_per_drop_scope 1 --init_pretraining_params ${MODEL_PATH}/params --skip_steps 10\r\n",
        "state": "closed",
        "user": "cibinjohn",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-19T06:23:22+00:00",
        "updated_at": "2019-08-23T06:33:00+00:00",
        "closed_at": "2019-08-23T06:33:00+00:00",
        "comments_count": [
            "zhanghan1992",
            "cibinjohn"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 290,
        "title": "ernie_encoder 中的 token embedding 缺少 0_padding",
        "body": "[词经过 ERNIE 编码后的 Embedding 表示](https://github.com/PaddlePaddle/ERNIE/blob/develop/README.zh.md#faq1-%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E5%8F%A5%E5%AD%90%E8%AF%8D%E7%BB%8F%E8%BF%87-ernie-%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84-embedding-%E8%A1%A8%E7%A4%BA) 没有 zero_padding 。 \r\n例如对 chnsenticorp/dev.tsv 生成的句 embedding 是 (1200,768)，词 embedding 是 (97838,768)，是否考虑填充成 (1200,128,768)？",
        "state": "closed",
        "user": "ydli-ai",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-22T04:18:37+00:00",
        "updated_at": "2019-08-25T15:42:50+00:00",
        "closed_at": "2019-08-25T15:42:50+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 288,
        "title": "Publish ERNIE 2.0 results on paperswithcode.com",
        "body": "Paperswithcode.com is the world reference for observing state of the art results on nlp tasks.\r\nThe community already posted some of your results but for now ERNIE 2.0 has not a single first place on leaderboards. \r\nYour paper claim to beat BERT and even XLnet. \r\nIf that's true then publish your results on paperswithcode.com as every researcher should. https://paperswithcode.com/paper/ernie-20-a-continual-pre-training-framework",
        "state": "closed",
        "user": "LifeIsStrange",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-21T01:04:23+00:00",
        "updated_at": "2019-08-25T15:43:19+00:00",
        "closed_at": "2019-08-25T15:43:19+00:00",
        "comments_count": [
            "wangshuohuan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 291,
        "title": "关于预训练数据大小、GPU设备和时间问题",
        "body": "请问下，ERNIE的预训练是使用的什么数据呢？训练时长和时间花费？",
        "state": "closed",
        "user": "shuxiaobo",
        "closed_by": "shuxiaobo",
        "created_at": "2019-08-23T10:15:18+00:00",
        "updated_at": "2019-08-26T15:23:09+00:00",
        "closed_at": "2019-08-26T15:23:09+00:00",
        "comments_count": [
            "ak47-1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 292,
        "title": "ERNIE (en) pre-training code",
        "body": "Hi!\r\nWhen would the pre-training code be released?",
        "state": "closed",
        "user": "lunayach",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-24T09:44:23+00:00",
        "updated_at": "2020-05-28T11:52:52+00:00",
        "closed_at": "2020-05-28T11:52:52+00:00",
        "comments_count": [
            "ak47-1234",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 295,
        "title": "运行ChnSentiCorp报错",
        "body": "-----------  Configuration Arguments -----------\r\nbatch_size: 24\r\ncheckpoints: ./checkpoints\r\nchunk_scheme: IOB\r\ndev_set: D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/task_data//chnsenticorp/dev.tsv,D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/task_data//chnsenticorp/test.tsv\r\ndiagnostic: None\r\ndiagnostic_save: None\r\ndo_lower_case: True\r\ndo_test: False\r\ndo_train: True\r\ndo_val: True\r\ndoc_stride: 128\r\nenable_ce: False\r\nepoch: 10\r\nernie_config_path: D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/ERNIE_1.0_max-len-512/ernie_config.json\r\nfor_cn: True\r\nin_tokens: False\r\ninit_checkpoint: None\r\ninit_pretraining_params: D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/ERNIE_1.0_max-len-512/params\r\nis_classify: True\r\nis_regression: False\r\nlabel_map_config: None\r\nlearning_rate: 5e-05\r\nloss_scaling: 1.0\r\nlr_scheduler: linear_warmup_decay\r\nmax_answer_length: 100\r\nmax_query_length: 64\r\nmax_seq_len: 256\r\nmetric: simple_accuracy\r\nmetrics: True\r\nn_best_size: 20\r\nnum_iteration_per_drop_scope: 1\r\nnum_labels: 2\r\npredict_batch_size: None\r\nrandom_seed: 1\r\nsave_steps: 1000\r\nshuffle: True\r\nskip_steps: 10\r\ntask_id: 0\r\ntest_save: test_result\r\ntest_set: None\r\ntokenizer: FullTokenizer\r\ntrain_set: D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/task_data//chnsenticorp/train.tsv\r\nuse_cuda: True\r\nuse_fast_executor: False\r\nuse_fp16: False\r\nuse_multi_gpu_test: False\r\nvalidation_steps: 100\r\nverbose: True\r\nvocab_path: D:/Ѹ▒▒▒▒▒▒/ERNIE-develop/ERNIE-develop/ERNIE_1.0_max-len-512/vocab.txt\r\nwarmup_proportion: 0.0\r\nweight_decay: 0.01\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: relu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 513\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 2\r\nvocab_size: 18000\r\n------------------------------------------------\r\nDevice count: 1\r\nNum train examples: 9600\r\nMax train steps: 4000\r\nNum warmup steps: 0\r\nTheoretical memory usage in training: 28739.403 - 30107.946 MB\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 169, in main\r\n    use_fp16=args.use_fp16)\r\n  File \"D:\\Ѹ▒▒▒▒▒▒\\ERNIE-develop\\ERNIE-develop\\utils\\init.py\", line 76, in init_pretraining_params\r\n    predicate=existed_params)\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\io.py\", line 611, in load_vars\r\n    filename=filename)\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\io.py\", line 648, in load_vars\r\n    executor.run(load_prog)\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 651, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 749, in _run\r\n    exe.run(program.desc, scope, 0, True, True, fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: Invoke operator load error.\r\nPython Callstacks:\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 1771, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\io.py\", line 633, in load_vars\r\n    'file_path': os.path.join(load_dirname, new_var.name)\r\n  File \"E:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\io.py\", line 611, in load_vars\r\n    filename=filename)\r\n  File \"D:\\Ѹ▒▒▒▒▒▒\\ERNIE-develop\\ERNIE-develop\\utils\\init.py\", line 76, in init_pretraining_params\r\n    predicate=existed_params)\r\n  File \"run_classifier.py\", line 169, in main\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\nC++ Callstacks:\r\nCannot open file D:\\Ѹ▒▒▒▒▒▒\\ERNIE-develop\\ERNIE-develop\\ERNIE_1.0_max-len-512\\params\\word_embedding for load op at [D:/1.5.1/release_cuda97/paddle\\paddle/fluid/operators/load_op.h:37]\r\nPaddlePaddle Call Stacks:\r\nWindows not support stack backtrace yet.\r\nW0825 18:51:26.312366  4412 device_context.cc:259] Please NOTE: device: 0, CUDA Capability: 61, Driver API Version: 10.0, Runtime API Version: 9.0\r\nW0825 18:51:26.333367  4412 device_context.cc:267] device: 0, cuDNN Version: 7.4.\r\n(paddle)\r\n",
        "state": "closed",
        "user": "lionel-xie",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-25T10:59:08+00:00",
        "updated_at": "2019-08-25T15:42:07+00:00",
        "closed_at": "2019-08-25T15:42:07+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 294,
        "title": "NER任务效果不佳",
        "body": "我在复现时对NER任务在原数据原参数上尝试跑了4次，每一次模型在验证集和测试集上的表现都很差，准确率，召回率，f1，均只有0.5左右。阅读问题列表后我发现我不是个例，也有人在其它任务上也遇到了模型失效的情况，现在尝试的分类任务也是这个问题，已经是最后一个epoch，正确率还是只有0.5。现在环境上唯一的问题可能是我的cudnn版本只有7.2，CUDA9.0，nccl是最新的，这些都没问题。下面贴出最近一次NER任务的运行截图，不知道究竟是怎么回事。\r\n![image](https://user-images.githubusercontent.com/46928336/63644509-131a9900-c71d-11e9-98d3-57a7a52354b0.png)\r\n",
        "state": "closed",
        "user": "arbalest339",
        "closed_by": "zhanghan1992",
        "created_at": "2019-08-25T01:45:38+00:00",
        "updated_at": "2019-08-26T01:06:10+00:00",
        "closed_at": "2019-08-25T10:17:14+00:00",
        "comments_count": [
            "zhanghan1992",
            "zhanghan1992",
            "arbalest339",
            "zhanghan1992",
            "arbalest339"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 297,
        "title": "Experiment using state of the art activation functions",
        "body": "This is an interesting, easy low hanging fruit to try.\r\n\r\n*The experiments show \r\nthat Mish tends to work better than both ReLU and Swish \r\nalong with other standard activation functions in many \r\ndeep networks across challenging datasets. For instance, in \r\nSqueeze Excite Net- 18 for CIFAR 100 classification, the \r\nnetwork with Mish had an increase in Top-1 test accuracy \r\nby 0.494% and 1.671% as compared to the same network \r\nwith Swish and ReLU respectively. The similarity to Swish \r\nalong with providing a boost in performance and its \r\nsimplicity in implementation makes it easier for researchers \r\nand developers to use Mish in their Neural Network \r\nModels.*\r\n\r\nhttps://arxiv.org/abs/1908.08681v1",
        "state": "closed",
        "user": "LifeIsStrange",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-27T01:44:37+00:00",
        "updated_at": "2020-05-28T11:52:53+00:00",
        "closed_at": "2020-05-28T11:52:53+00:00",
        "comments_count": [
            "ak47-1234",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 299,
        "title": "阅读理解 drcd报错 在一轮训练结束的时候报错。",
        "body": "\r\nTraceback (most recent call last):\r\n  File \"run_mrc.py\", line 325, in <module>\r\n    main(args)\r\n  File \"run_mrc.py\", line 251, in main\r\n    args=args)\r\n  File \"/home/aistudio/work/ERNIE/finetune/mrc.py\", line 177, in evaluate\r\n    em, f1, avg, total = eval_file(data_file, output_prediction_file)\r\n  File \"/home/aistudio/work/ERNIE/utils/cmrc2018_eval.py\", line 140, in eval_file\r\n    ground_truth_file = json.load(open(dataset_file, 'rb'))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.5/json/__init__.py\", line 268, in load\r\n    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.5/json/__init__.py\", line 312, in loads\r\n    s.__class__.__name__))\r\nTypeError: the JSON object must be str, not 'bytes'\r\nterminate called without an active exception\r\nAborted (core dumped)\r\n因为我不会用windows启动shell脚本，所以不会改。",
        "state": "closed",
        "user": "natureLanguageQing",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-27T05:32:14+00:00",
        "updated_at": "2020-05-28T11:52:54+00:00",
        "closed_at": "2020-05-28T11:52:54+00:00",
        "comments_count": [
            "ak47-1234",
            "ak47-1234",
            "natureLanguageQing",
            "ak47-1234",
            "natureLanguageQing",
            "natureLanguageQing",
            "natureLanguageQing",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 303,
        "title": "who can share a fine-tune model of Sentence Pair  trained on BQ corpus？",
        "body": "",
        "state": "closed",
        "user": "janelu9",
        "closed_by": "janelu9",
        "created_at": "2019-08-28T07:28:02+00:00",
        "updated_at": "2019-10-12T08:18:42+00:00",
        "closed_at": "2019-10-12T08:18:42+00:00",
        "comments_count": [
            "ak47-1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 304,
        "title": "ERNIE 2.0 pre-training task 中，是否能尝试加入 Autoregressive task？",
        "body": "",
        "state": "closed",
        "user": "Lennon-cheng",
        "closed_by": "Lennon-cheng",
        "created_at": "2019-08-28T09:51:14+00:00",
        "updated_at": "2019-09-06T01:31:51+00:00",
        "closed_at": "2019-09-06T01:31:51+00:00",
        "comments_count": [
            "ak47-1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 300,
        "title": "Experiment using state of the art optimizer",
        "body": "RAdam is consistently better than adam.\r\nhttps://arxiv.org/pdf/1908.03265v1\r\n\r\nLookahead merits to be tried too https://arxiv.org/pdf/1907.08610v1.pdf\r\nMaybe it can be used on top of RAdam.",
        "state": "closed",
        "user": "LifeIsStrange",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-27T12:34:12+00:00",
        "updated_at": "2022-04-14T02:02:37+00:00",
        "closed_at": "2020-07-27T11:59:24+00:00",
        "comments_count": [
            "ak47-1234",
            "nbcc",
            "LifeIsStrange",
            "stale[bot]",
            "LifeIsStrange",
            "stale[bot]",
            "LifeIsStrange"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 306,
        "title": "运行过程中电脑关机，程序还没有运行完，再开机发现多了一个checkpoint文件夹，有没有可能恢复继续运行？",
        "body": "运行过程中电脑关机，程序还没有运行完，再开机发现多了一个checkpoint文件夹，有没有可能恢复继续运行？\r\n\r\n\r\n![11](https://user-images.githubusercontent.com/50686292/63923428-21e4b100-ca79-11e9-9370-a8f184059de1.png)\r\n![22](https://user-images.githubusercontent.com/50686292/63923435-24470b00-ca79-11e9-86fd-bb34b1ea8e75.png)\r\n![33](https://user-images.githubusercontent.com/50686292/63923438-25783800-ca79-11e9-8396-d8a4b4d40d7c.png)\r\n",
        "state": "closed",
        "user": "haosiqing",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-29T08:22:13+00:00",
        "updated_at": "2020-05-28T11:52:57+00:00",
        "closed_at": "2020-05-28T11:52:57+00:00",
        "comments_count": [
            "haosiqing",
            "ak47-1234",
            "haosiqing",
            "ak47-1234",
            "haosiqing",
            "haosiqing",
            "ak47-1234",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 307,
        "title": "请问这个qid是什么？为什么在训练的时候加上？而推理的时候去掉",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/088a5ce635e9f1529a17cfe8f477bb9427f65ec0/reader/task_reader.py#L347",
        "state": "closed",
        "user": "wang001",
        "closed_by": "stale[bot]",
        "created_at": "2019-08-29T14:38:00+00:00",
        "updated_at": "2020-05-28T11:52:55+00:00",
        "closed_at": "2020-05-28T11:52:55+00:00",
        "comments_count": [
            "ak47-1234",
            "wang001",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 311,
        "title": "ernie是否可以将三句话作为输入进行分类",
        "body": "我的输入是个三元组：格式如下： \r\n`**[CLS]A[SEP]B[SEP]C[SEP]**`\r\n\r\nA:是query，B和C是推荐的title。我的目的：是想对AB之间相关性和AC之间的相关性进行比较，label（0：代表AB的相关性>AC, 1:代表AB的相关性<AC）\r\n当用SEP分割时：\r\ntokens:`[CLS]你的名字[SEP]名字是什么[SEP]名字叫[SEP]`\r\ntext_type_id:`0 0 0 0 0 0 1 1 1 1 1 1 2 2 2 2`\r\n\r\n这样的输入会报错：不太清楚代码哪里规定了text_type_id只能是[0,1]\r\n![image](https://user-images.githubusercontent.com/18109329/64099549-1e646900-cd9c-11e9-9f44-4d22c2a45fc4.png)\r\n\r\n如果我想用ERNIE达到这个分类的目的，怎么处理输入或者有什么其他更好的办法？\r\n",
        "state": "closed",
        "user": "Kevinlsy",
        "closed_by": "nbcc",
        "created_at": "2019-09-02T08:11:34+00:00",
        "updated_at": "2019-09-03T01:48:28+00:00",
        "closed_at": "2019-09-03T01:48:28+00:00",
        "comments_count": [
            "nbcc",
            "Kevinlsy",
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 312,
        "title": "哪个脚本是运行mask的finetuning任务的",
        "body": "",
        "state": "closed",
        "user": "yowrhihoil",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-03T08:23:27+00:00",
        "updated_at": "2020-05-28T11:53:00+00:00",
        "closed_at": "2020-05-28T11:53:00+00:00",
        "comments_count": [
            "MrPig",
            "yowrhihoil",
            "MrPig",
            "yowrhihoil",
            "MrPig",
            "yowrhihoil",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 317,
        "title": "运行ernie_encoder.py报错TypeError: write() argument must be str, not bytes",
        "body": "",
        "state": "closed",
        "user": "chenchengshuai",
        "closed_by": "chenchengshuai",
        "created_at": "2019-09-10T06:31:18+00:00",
        "updated_at": "2019-09-10T06:36:14+00:00",
        "closed_at": "2019-09-10T06:36:14+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 316,
        "title": "修改代码，打印的错误信息无法定位错误代码位置",
        "body": "如题：修改了ernie的代码，调试过程中发现错误，但是错误信息无法定位到错误代码位置\r\n```\r\nshare_vars_from is set, scope is ignored.\r\nI0910 11:16:58.119014  6704 parallel_executor.cc:329] The number of CUDAPlace, which is used in ParallelExecutor, is 1. And the Program will be copied 1 copies\r\nI0910 11:16:58.132833  6704 build_strategy.cc:340] SeqOnlyAllReduceOps:0, num_trainers:1\r\nexample.label 1\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/home/work/anaconda2/envs/paddle_gpu/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n    self.run()\r\n  File \"/home/work/anaconda2/envs/paddle_gpu/lib/python2.7/threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/home/work/anaconda2/envs/paddle_gpu/lib/python2.7/site-packages/paddle/fluid/layers/io.py\", line 593, in __provider_thread__\r\n    raise ex\r\nKeyError: u'1'\r\n```\r\n求问，如何设置才能正确打印错误信息的代码位置",
        "state": "closed",
        "user": "littlepan0413",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-10T03:35:35+00:00",
        "updated_at": "2020-05-28T11:53:02+00:00",
        "closed_at": "2020-05-28T11:53:02+00:00",
        "comments_count": [
            "tianxin1860",
            "littlepan0413",
            "apphpp",
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 320,
        "title": "core.31749 ERNIE部署在centos下，生产大量的文件。文件名叫做core.31xx。每一个文件大概有1G左右",
        "body": "![image](https://user-images.githubusercontent.com/28988355/64663169-83dfe600-d47d-11e9-8164-9c12fd10509b.png)\r\n",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-11T02:18:43+00:00",
        "updated_at": "2020-05-28T11:53:03+00:00",
        "closed_at": "2020-05-28T11:53:03+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 318,
        "title": "运行predict_classfier.py报错Type names and field names must be valid identifiers: \"['text_a']\"",
        "body": "使用predict_classfier.py加载模型进行批量预测，报错提示Type names and field names must be valid identifiers: \"['text_a']\"，预测的文本格式为单列tsv文件，标签名为text_a，如果改为两列['text_a','label'],其中label列中数据填空‘’，运行不报错。正确的预测文件格式应该是怎样的？",
        "state": "closed",
        "user": "silverspruce",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-10T07:41:20+00:00",
        "updated_at": "2020-06-06T09:23:10+00:00",
        "closed_at": "2020-06-06T09:23:10+00:00",
        "comments_count": [
            "silverspruce",
            "tianxin1860",
            "Magic-Fy",
            "operaculus",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 321,
        "title": "sequenceUnpadOp访问空指针",
        "body": "ernie模型未做修改，只修改了输入数据。\r\n\r\n*** Aborted at 1568186213 (unix time) try \"date -d @1568186213\" if you are using GNU date ***\r\nPC: @ 0x0 (unknown)\r\n*** SIGFPE (@0x7f07a4276f29) received by PID 13469 (TID 0x7f0804608700) from PID 18446744072168632105; stack trace: ***\r\n@ 0x7f0803dbe160 (unknown)\r\n@ 0x7f07a4276f29 paddle::operators::math::UnpaddingLoDTensorFunctor<>::operator()()\r\n@ 0x7f07a397a79f paddle::operators::SequenceUnpadOpKernel<>::Compute()\r\n@ 0x7f07a397a943 _ZNSt17_Function_handlerIFvRKN6paddle9framework16ExecutionContextEEZNKS1_24OpKernelRegistrarFunctorINS0_8platform9CUDAPlaceELb0ELm0EJNS0_9operators21SequenceUnpadOpKernelINS7_17CUDADeviceContextEfEENSA_ISB_dEENSA_ISB_iEENSA_ISB_lEEEEclEPKcSI_EUlS4_E_E9_M_invokeERKSt9_Any_dataS4_\r\n@ 0x7f07a43eebbc paddle::framework::OperatorWithKernel::RunImpl()\r\n@ 0x7f07a43eb3ff paddle::framework::OperatorBase::Run()\r\n@ 0x7f07a2f329cb paddle::framework::Executor::RunPreparedContext()\r\n@ 0x7f07a2f33620 paddle::framework::Executor::Run()\r\n@ 0x7f07a2e47fed _ZZN8pybind1112cpp_function10initializeIZN6paddle6pybindL13pybind11_initEvEUlRNS2_9framework8ExecutorERKNS4_11ProgramDescEPNS4_5ScopeEibbE64_vIS6_S9_SB_ibbEINS_4nameENS_9is_methodENS_7siblingEEEEvOT_PFT0_DpT1_EDpRKT2_ENUlRNS_6detail13function_callEE1_4_FUNEST_\r\n@ 0x7f07a2e7b414 pybind11::cpp_function::dispatcher()\r\n@ 0x7f08040d955f PyEval_EvalFrameEx\r\n@ 0x7f08040db86d PyEval_EvalCodeEx\r\n@ 0x7f08040d89fc PyEval_EvalFrameEx\r\n@ 0x7f08040db86d PyEval_EvalCodeEx\r\n@ 0x7f08040d89fc PyEval_EvalFrameEx\r\n@ 0x7f08040db86d PyEval_EvalCodeEx\r\n@ 0x7f08040db9a2 PyEval_EvalCode\r\n@ 0x7f0804104782 PyRun_FileExFlags\r\n@ 0x7f0804105af9 PyRun_SimpleFileExFlags\r\n@ 0x7f080411b82d Py_Main\r\n@ 0x7f0803318bd5 __libc_start_main\r\n@ 0x4007a1 (unknown)\r\n@ 0x0 (unknown)",
        "state": "closed",
        "user": "buaasky",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-11T07:35:08+00:00",
        "updated_at": "2020-05-28T11:53:04+00:00",
        "closed_at": "2020-05-28T11:53:04+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 322,
        "title": "Problem with run_drcd.sh",
        "body": "- I was going to replicate the results of DRCD with ERNIE and encountered a problem. I did as follows:\r\n\r\n  1. Download ERNIE1.0 (max_len_512) (2.0 is not available yet) into a directory. i.e., /home/weidi.xwd/weidi.xwd/models/ERNIE_1.0_max-len-512/ \r\n  2. Install the paddlepaddle and download the ERNIE project.\r\n  3. Download DRCD dataset into a directory, i.e., /home/weidi.xwd/weidi.xwd/data/raw/DRCD-master/.\r\n  4. Modify the MODEL_PATH and TASK_DATA_PATH as :\r\n\r\n`\r\nset -eux\r\n\r\nexport FLAGS_eager_delete_tensor_gb=0\r\nexport FLAGS_sync_nccl_allreduce=1\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3\r\nMODEL_PATH=\"/home/weidi.xwd/weidi.xwd/models/ERNIE_1.0_max-len-512/\"\r\nTASK_DATA_PATH=\"/home/weidi.xwd/weidi.xwd/data/raw/DRCD-master/\"\r\n\r\n\r\npython ./finetune_launch.py  \\\r\n    --nproc_per_node 8 \\\r\n    --selected_gpus 0,1,2,3,4,5,6,7 \\\r\n    --node_ips $(hostname -i) \\\r\n    --node_id 0 \\\r\nrun_mrc.py --use_cuda true\\\r\n                    --batch_size 16 \\\r\n                    --in_tokens false\\\r\n                    --use_fast_executor true \\\r\n                    --checkpoints ./checkpoints \\\r\n                    --vocab_path ${MODEL_PATH}/vocab.txt  \\\r\n                    --ernie_config_path ${MODEL_PATH}/ernie_config.json \\\r\n                    --do_train true \\\r\n                    --do_val true \\\r\n                    --do_test true \\\r\n                    --verbose true \\\r\n                    --save_steps 1000 \\\r\n                    --validation_steps 100 \\\r\n                    --warmup_proportion 0.0 \\\r\n                    --weight_decay  0.01 \\\r\n                    --epoch 2 \\\r\n                    --max_seq_len 512 \\\r\n                    --do_lower_case true \\\r\n                    --doc_stride 128 \\\r\n                    --train_set ${TASK_DATA_PATH}/drcd/train.json \\\r\n                    --dev_set ${TASK_DATA_PATH}/drcd/dev.json \\\r\n                    --test_set ${TASK_DATA_PATH}/drcd/test.json \\\r\n                    --learning_rate 5e-5 \\\r\n                    --num_iteration_per_drop_scope 1 \\\r\n                    --init_pretraining_params ${MODEL_PATH}/params \\\r\n                    --skip_steps 10\r\n`\r\nThen, an error is thrown:\r\n\r\n![image](https://user-images.githubusercontent.com/7287692/64684045-f4efbf80-d4b6-11e9-94ad-85723acae139.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "wead-hsu",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-11T09:11:11+00:00",
        "updated_at": "2020-05-28T10:52:37+00:00",
        "closed_at": "2020-05-28T10:52:37+00:00",
        "comments_count": [
            "wead-hsu",
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 323,
        "title": "XNLI test数据集有多少数据",
        "body": "你好，我看ERNIE paper汇报的是2.5K in test dataset which is different from mine.\r\nCould you give me details?",
        "state": "closed",
        "user": "shizhediao",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-12T00:00:24+00:00",
        "updated_at": "2020-05-28T10:52:36+00:00",
        "closed_at": "2020-05-28T10:52:36+00:00",
        "comments_count": [
            "shizhediao",
            "tianxin1860",
            "shizhediao",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 327,
        "title": "split()还可以返回两个参数呢？",
        "body": "file_,mask_word_prob =file_.strip().split('\\t')",
        "state": "closed",
        "user": "NeilGY",
        "closed_by": "NeilGY",
        "created_at": "2019-09-18T09:15:39+00:00",
        "updated_at": "2019-09-18T09:30:52+00:00",
        "closed_at": "2019-09-18T09:30:52+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 324,
        "title": "ERNIE有没有网络裁剪，或者其他用来加速的方式",
        "body": "",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-12T03:36:21+00:00",
        "updated_at": "2020-05-28T11:53:05+00:00",
        "closed_at": "2020-05-28T11:53:05+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 326,
        "title": "CUDA_VISIBLE_DEVICES=0,1,2,3设置多卡跑run_sequence_labeling.py跑不起来，代码有bug",
        "body": "CUDA_VISIBLE_DEVICES=0,1,2,3设置多卡跑run_sequence_labeling.py跑不起来，代码有bug",
        "state": "closed",
        "user": "hitwangshuai",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-18T08:05:38+00:00",
        "updated_at": "2020-05-28T10:52:38+00:00",
        "closed_at": "2020-05-28T10:52:38+00:00",
        "comments_count": [
            "OleNet",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 328,
        "title": "is encode() api available?",
        "body": "such as https://github.com/hanxiao/bert-as-service by xiaohan, is ernie have the encode() function \r\nand make it easier to encode a sentence to a vector",
        "state": "closed",
        "user": "ares5221",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-19T08:33:39+00:00",
        "updated_at": "2020-05-28T10:52:40+00:00",
        "closed_at": "2020-05-28T10:52:40+00:00",
        "comments_count": [
            "OleNet",
            "ares5221",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 329,
        "title": "显存不足报错了，有什么办法可以解决？",
        "body": "[INFO] 2019-09-22 23:04:45,993 [run_sequence_labeling.py:  262]:        epoch: 0, progress: 992/20864, step: 10, loss: 0.134486, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 0.492997 steps/s\r\nW0922 23:04:48.649623 32055 system_allocator.cc:121] Cannot malloc 64.0002 MB GPU memory. Please shrink FLAGS_fraction_of_gpu_memory_to_use or FLAGS_initial_gpu_memory_in_mb or FLAGS_reallocate_gpu_memory_in_mbenvironment variable to a lower value. Current FLAGS_fraction_of_gpu_memory_to_use value is 0.5. Current FLAGS_initial_gpu_memory_in_mb value is 0. Current FLAGS_reallocate_gpu_memory_in_mb value is 0\r\nF0922 23:04:48.649775 32055 legacy_allocator.cc:201] Cannot allocate 64.000000MB in GPU 0, available 60.062500MBtotal 11996954624GpuMinChunkSize 256.000000BGpuMaxChunkSize 5.246019GBGPU memory used: 10.955627GB",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-23T03:04:49+00:00",
        "updated_at": "2020-05-28T10:52:40+00:00",
        "closed_at": "2020-05-28T10:52:40+00:00",
        "comments_count": [
            "jtyoui",
            "jtyoui",
            "jtyoui",
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 330,
        "title": "ERNIE多机多卡多线程，fiunte分类任务，出现not ready endpoints",
        "body": "二机16卡finetune二分类任务，在run_classify.py之前调用finetune_lauch.py，第二节节点用不上，一直出现not ready endpointsL\r\n![image](https://user-images.githubusercontent.com/24203046/65421073-632c6e80-de35-11e9-8e1e-ba6a3a634b49.png)\r\n![image](https://user-images.githubusercontent.com/24203046/65421130-92db7680-de35-11e9-9e9c-e0754c143b42.png)\r\n![image](https://user-images.githubusercontent.com/24203046/65421298-fe254880-de35-11e9-90fd-513e802c4150.png)\r\n\r\n",
        "state": "closed",
        "user": "sunbrother99",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-23T11:13:28+00:00",
        "updated_at": "2020-05-28T10:52:41+00:00",
        "closed_at": "2020-05-28T10:52:41+00:00",
        "comments_count": [
            "Meiyim",
            "sunbrother99",
            "Meiyim",
            "sunbrother99",
            "sunbrother99",
            "Meiyim",
            "sunbrother99",
            "Meiyim",
            "sunbrother99",
            "sunbrother99",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 331,
        "title": "请问是否有在新数据上继续fineturn的接口",
        "body": "就像word2vec一样，加载预训练模型后，在小数据集上继续fineturning",
        "state": "closed",
        "user": "woyijkl1",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-24T06:46:32+00:00",
        "updated_at": "2020-05-28T10:52:42+00:00",
        "closed_at": "2020-05-28T10:52:42+00:00",
        "comments_count": [
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 332,
        "title": "你们的ERNIE2.0版本中文预训练模型还没有开放计划吗？",
        "body": "期待ing",
        "state": "closed",
        "user": "tianjie491",
        "closed_by": "tianjie491",
        "created_at": "2019-09-24T07:32:16+00:00",
        "updated_at": "2019-12-20T09:58:42+00:00",
        "closed_at": "2019-12-20T09:58:42+00:00",
        "comments_count": [
            "XIAOLINSHINE"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 334,
        "title": "用模型预测的结果怎么保留啊",
        "body": "",
        "state": "closed",
        "user": "wxlduter",
        "closed_by": "stale[bot]",
        "created_at": "2019-09-26T02:08:55+00:00",
        "updated_at": "2020-05-28T10:52:44+00:00",
        "closed_at": "2020-05-28T10:52:44+00:00",
        "comments_count": [
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 336,
        "title": "InferenceClient的请求参数，可以提供一个demo吗？",
        "body": "from propeller.service.client import InferenceClient\r\nclient = InferenceClient('tcp://localhost:8113')\r\nresult = client(sentence_id, position_id, token_type_id, input_mask)",
        "state": "closed",
        "user": "nx04",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-11T03:16:28+00:00",
        "updated_at": "2020-05-28T10:52:46+00:00",
        "closed_at": "2020-05-28T10:52:46+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 337,
        "title": "可以提供命名实体识别的上线demo? ",
        "body": "1）实体识别生成inference_model demo\r\n2）实体识别在线预测demo",
        "state": "closed",
        "user": "nx04",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-11T09:22:21+00:00",
        "updated_at": "2020-05-28T10:52:46+00:00",
        "closed_at": "2020-05-28T10:52:45+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 338,
        "title": "如何利用 Fine-tuning 得到的模型对短文本进行命名实体识别？",
        "body": "需要能够InferenceClient客户端，方便做成服务，用于线上预测",
        "state": "closed",
        "user": "nx04",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-11T09:29:56+00:00",
        "updated_at": "2020-05-28T10:52:47+00:00",
        "closed_at": "2020-05-28T10:52:47+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 339,
        "title": "中文和英文pretrained model",
        "body": "如果我需要bilingual的英文和中文 ERNIE pretrained model 有哪些选择？能合并ERNIE 1.0 中文 和ERNIE 2.0 英文模型？",
        "state": "closed",
        "user": "echan00",
        "closed_by": "echan00",
        "created_at": "2019-10-12T02:55:28+00:00",
        "updated_at": "2019-10-24T03:37:02+00:00",
        "closed_at": "2019-10-24T03:37:02+00:00",
        "comments_count": [
            "WeiyueSu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 341,
        "title": "InferenceClient SyntaxError: invalid syntax",
        "body": "from propeller.service.client import InferenceClient\r\n  File \"propeller/service/client.py\", line 77\r\n    async def get(coroutine_idx=0, num_coroutine=1):\r\n            ^\r\nSyntaxError: invalid syntax\r\n\r\npython2.7.16\r\n在用propeller包服务 然后各种报错啊",
        "state": "closed",
        "user": "janelu9",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-12T08:17:49+00:00",
        "updated_at": "2020-05-28T10:52:49+00:00",
        "closed_at": "2020-05-28T10:52:49+00:00",
        "comments_count": [
            "Meiyim",
            "janelu9",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 340,
        "title": "will support tensorflow in the future?",
        "body": "I've red the readme.md and found that ERNIE is just a micro-innovation based on BERT, but BERT is really a innovation. Learning text with priori knowledge is quite like what we humans do. For consideration of maintainence, we'd like to do the same improvement on BERT based on tensorflow instead of doing something on another platform. You know, information, like document, help, etc. for PaddlePaddle is not enough, except building a much larger echo in the feature to build the confidence of developers of AI.",
        "state": "closed",
        "user": "linzaihui",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-12T03:38:53+00:00",
        "updated_at": "2020-05-28T10:52:48+00:00",
        "closed_at": "2020-05-28T10:52:48+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 342,
        "title": "sentence pair分类任务改成四分类",
        "body": "除了将sh脚本中的num_labels改为4，还需要改什么吗？\r\n\r\n跑的结果比BERT差很多，怀疑有问题\r\n我的label为0,1,2,3。",
        "state": "closed",
        "user": "zhengyima",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-12T11:45:37+00:00",
        "updated_at": "2020-05-28T10:52:50+00:00",
        "closed_at": "2020-05-28T10:52:50+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 343,
        "title": "encode.sh报错：The shape of Input(Length) should be [batch_size]",
        "body": "Hi, 我在使用encode.py来计算一句话的embedding, 正如Readme介绍的那样：https://github.com/PaddlePaddle/ERNIE#faq1-how-to-get-sentencetokens-embedding-of-ernie \r\n\r\n我的encode脚本为：\r\n\r\n```shell\r\nTASK_DATA_PATH=.\r\nMODEL_PATH=/path/to/model\r\nexport FLAGS_sync_nccl_allreduce=1\r\nexport CUDA_VISIBLE_DEVICES=4\r\n\r\npython -u ernie_encoder.py \\\r\n                   --use_cuda true \\\r\n                   --batch_size 3 \\\r\n                   --output_dir \"./test\" \\\r\n                   --init_pretraining_params ${MODEL_PATH}/trained_chinese/params \\\r\n                   --data_set ${TASK_DATA_PATH}/baidu_input/dev.tsv \\\r\n                   --vocab_path ${MODEL_PATH}/vocab.txt \\\r\n                   --max_seq_len 128 \\\r\n                   --ernie_config_path ${MODEL_PATH}/ernie_config.json\r\n```\r\n其中，baidu_input/dev.tsv 如下：\r\n\r\n```shell\r\nlabel\\ttext_a\\n\r\n0\\t你吃了么\\n\r\n1\\t我吃过了\\n\r\n0\\t谢谢你啊\\n\r\n```\r\n模型报错：\r\n```shell\r\nDevice count: 1\r\nTotal num examples: 3\r\nWARNING:root:paddle.fluid.layers.py_reader() may be deprecated in the near future. Please use paddle.fluid.io.PyReader() instead.\r\nTraceback (most recent call last):\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\n  File \"ernie_encoder.py\", line 130, in main\r\n    args, pyreader_name='reader', ernie_config=ernie_config)\r\n  File \"ernie_encoder.py\", line 77, in create_model\r\n    unpad_enc_out = fluid.layers.sequence_unpad(enc_out, length=seq_lens)\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/layers/nn.py\", line 4842, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 2116, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 1499, in __init__\r\n    self.desc.infer_shape(self.block.desc)\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::SequenceUnpadOp::InferShape(paddle::framework::InferShapeContext*) const\r\n3   paddle::framework::OpDesc::InferShape(paddle::framework::BlockDesc const&) const\r\n\r\n------------------------------------------\r\nPython Call Stacks (More useful to users):\r\n------------------------------------------\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 2116, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/mapingshuo/paddle_release_home/python-distribute/lib/python2.7/site-packages/paddle/fluid/layers/nn.py\", line 4842, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"ernie_encoder.py\", line 77, in create_model\r\n    unpad_enc_out = fluid.layers.sequence_unpad(enc_out, length=seq_lens)\r\n  File \"ernie_encoder.py\", line 130, in main\r\n    args, pyreader_name='reader', ernie_config=ernie_config)\r\n  File \"ernie_encoder.py\", line 182, in <module>\r\n    main(args)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nPaddleCheckError: Expected len_dims.size() == 1, but received len_dims.size():2 != 1:1.\r\nThe shape of Input(Length) should be [batch_size]. at [/home/mapingshuo/Paddle/paddle/fluid/operators/sequence_ops/sequence_unpad_op.cc:41]\r\n  [operator < sequence_unpad > error]\r\n```\r\n请问是什么原因，谢谢",
        "state": "closed",
        "user": "mapingshuo",
        "closed_by": "mapingshuo",
        "created_at": "2019-10-15T04:58:46+00:00",
        "updated_at": "2019-11-25T02:54:09+00:00",
        "closed_at": "2019-11-25T02:53:41+00:00",
        "comments_count": [
            "tianxin1860",
            "mapingshuo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 344,
        "title": "微调时不能稳定地梯度下降是什么原因呢",
        "body": "![image](https://user-images.githubusercontent.com/37259833/67091309-e2b42000-f1de-11e9-937c-edb1aa726f9b.png)\r\n![image](https://user-images.githubusercontent.com/37259833/67091375-0b3c1a00-f1df-11e9-97a5-04040245135b.png)\r\n",
        "state": "closed",
        "user": "ciwenjia",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-18T11:39:53+00:00",
        "updated_at": "2020-05-28T10:52:51+00:00",
        "closed_at": "2020-05-28T10:52:51+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 345,
        "title": "单机多卡预训练ernie1.0出现 SendRPC name:[NCCLID], ep:[10.12.35.45:6171], status:[-1] meets grpc error, error_code:4 error_message:Deadline Exceeded error_details:",
        "body": "版本、环境信息：\r\n   1）PaddlePaddle版本：1.5.1\r\n   3）GPU： Tesla V100\r\n   4）系统环境：Linux，Python2.7版本\r\n\r\n训练信息\r\n   1）单机，多卡\r\n   2）显存信息 16160MiB\r\n   3）Operator信息 Linux\r\n\r\n问题描述：请详细描述您的问题，同步贴出报错信息、日志、可复现的代码片段\r\n\r\n[INFO] 2019-10-18 19:25:08,789 [ train.py: 210]: Device count 2\r\n[INFO] 2019-10-18 19:25:08,789 [ train.py: 211]: theoretical memory usage:\r\n[INFO] 2019-10-18 19:25:08,833 [ train.py: 213]: (9526.169296073915, 9979.796405410767, 'MB')\r\n[INFO] 2019-10-18 19:25:08,833 [ train.py: 217]: args.is_distributed: True\r\n[INFO] 2019-10-18 19:25:08,834 [ train.py: 225]: train_id == 0, sleep 60s\r\n[INFO] 2019-10-18 19:26:08,894 [ train.py: 229]: worker_endpoints:[u'10.12.35.45:6170', u'10.12.35.45:6171'] trainers_num:2 current_endpoint:10.12.35.45:6170 trainer_id:0\r\nW1018 19:26:10.103168 119202 device_context.cc:259] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 9.2, Runtime API Version: 9.0\r\nW1018 19:26:10.106727 119202 device_context.cc:267] device: 0, cuDNN Version: 7.0.\r\nW1018 19:26:10.106756 119202 device_context.cc:293] WARNING: device: 0. The installed Paddle is compiled with CUDNN 7.3, but CUDNN version in your machine is 7.0, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\r\nI1018 19:26:10.428246 119202 rpc_client.h:101] init rpc client with trainer_id 0\r\nF1018 19:29:10.429860 119306 grpc_client.cc:414] SendRPC name:[NCCLID], ep:[10.12.35.45:6171], status:[-1] meets grpc error, error_code:4 error_message:Deadline Exceeded error_details:\r\n*** Check failure stack trace: ***\r\n@ 0x7f515d89127d google::LogMessage::Fail()\r\n@ 0x7f515d894d2c google::LogMessage::SendToLog()\r\n@ 0x7f515d890da3 google::LogMessage::Flush()\r\n@ 0x7f515d89623e google::LogMessageFatal::~LogMessageFatal()\r\n@ 0x7f515f1620da paddle::operators::distributed::GRPCClient::Proceed()\r\n@ 0x7f5182a6b8a0 execute_native_thread_routine\r\n@ 0x7f519367b1c3 start_thread\r\n@ 0x7f5192ca312d __clone\r\n@ (nil) (unknown)",
        "state": "closed",
        "user": "zuole",
        "closed_by": "zuole",
        "created_at": "2019-10-18T11:53:56+00:00",
        "updated_at": "2019-10-21T09:11:34+00:00",
        "closed_at": "2019-10-21T09:11:34+00:00",
        "comments_count": [
            "tianxin1860",
            "zuole",
            "dingsiyu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 346,
        "title": "请问哪里可以下载ernie 2.0中文的预训练模型？",
        "body": "",
        "state": "closed",
        "user": "CChengz",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-22T01:51:41+00:00",
        "updated_at": "2020-07-27T02:59:24+00:00",
        "closed_at": "2020-07-27T02:59:24+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "shishishu",
            "mbabby",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "ERNIE2.0 wanted"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 347,
        "title": "用Python预测库预测ERNIE结果不对",
        "body": "环境paddle-1.5.2.post97 cuda9 python3.6\r\n存储模型是用的\r\nsave_inferrence_model(path,exe,[srd,type,pos,mask],[prob],train_program)\r\n预测时候用的\r\nconfig = AnalysisConfig(args.model_dir)\r\nconfig.enable_gpu()\r\npredictor = create_paddle_predictor(config)\r\noutputs = predictor.run(inputs)\r\n但是output出来的结果跟我用常规的\r\nexe.run(feed=input)方法出来的结果不一样\r\n具体变量处理方式如下\r\n![image](https://user-images.githubusercontent.com/24219258/67263898-07104500-f4dc-11e9-9a9d-ab2d88e90063.png)\r\n求解",
        "state": "closed",
        "user": "janelu9",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-22T06:56:02+00:00",
        "updated_at": "2020-05-28T10:52:52+00:00",
        "closed_at": "2020-05-28T10:52:52+00:00",
        "comments_count": [
            "janelu9",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 348,
        "title": "propeller server RuntimeError: Cant run the envent loop",
        "body": "环境paddle-1.5.2.post97 cuda9 python3.6\r\n存储模型是用的\r\nsave_inferrence_model(path,exe,[srd,type,pos,mask],[prob],train_program)\r\n用目录下的prospeller起服务的后，推断时出现了如下错误，不知是何故：\r\n![微信图片_20191022153301](https://user-images.githubusercontent.com/24219258/67265868-5dcc4d80-f4e1-11e9-899a-c017e30f81a2.jpg)\r\n",
        "state": "closed",
        "user": "janelu9",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-22T07:34:25+00:00",
        "updated_at": "2020-05-28T10:52:53+00:00",
        "closed_at": "2020-05-28T10:52:53+00:00",
        "comments_count": [
            "Meiyim",
            "janelu9",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 349,
        "title": "sh script/zh_task/ernie_base/run_msra_ner.sh报错",
        "body": "我在按照教程运行sh script/zh_task/ernie_base/run_msra_ner.sh时报以下错误，请问可能是什么问题？ \r\n\r\n File \"/home/juncheng/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2423, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/juncheng/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/juncheng/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/layers/nn.py\", line 5697, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"/home/juncheng/project/ernie/ERNIE-develop/finetune/sequence_label.py\", line 79, in create_model\r\n    lod_labels = fluid.layers.sequence_unpad(labels, seq_lens)\r\n  File \"run_sequence_labeling.py\", line 109, in main\r\n    ernie_config=ernie_config)\r\n  File \"run_sequence_labeling.py\", line 354, in <module>\r\n    main(args)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nPaddleCheckError: Expected len_dims.size() == 1, but received len_dims.size():2 != 1:1.\r\nThe shape of Input(Length) should be [batch_size]. at [/paddle/paddle/fluid/operators/sequence_ops/sequence_unpad_op.cc:41]\r\n  [operator < sequence_unpad > error]\r\n",
        "state": "closed",
        "user": "yinjuncheng",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-23T02:30:32+00:00",
        "updated_at": "2020-05-28T10:52:55+00:00",
        "closed_at": "2020-05-28T10:52:55+00:00",
        "comments_count": [
            "Meiyim",
            "yinjuncheng",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 350,
        "title": "使用ERNIE做SQUAD得到的效果极其的差。em和f1都为个位数",
        "body": "",
        "state": "closed",
        "user": "baymaxZ0Z0",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-23T09:01:38+00:00",
        "updated_at": "2020-05-28T10:52:54+00:00",
        "closed_at": "2020-05-28T10:52:54+00:00",
        "comments_count": [
            "dingsiyu",
            "baymaxZ0Z0",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 351,
        "title": "批量预测和单条数据预测结果差别很大",
        "body": "使用 ERNIE 1.0 进行命名实体预测，批量预测的结果和单条数据预测的结果差别很大，是不是因为 padding 的时候带来的 0 填充导致的？有没有办法解决或优化？",
        "state": "closed",
        "user": "semal",
        "closed_by": "semal",
        "created_at": "2019-10-24T05:09:08+00:00",
        "updated_at": "2019-11-11T11:10:25+00:00",
        "closed_at": "2019-11-11T11:10:25+00:00",
        "comments_count": [
            "dingsiyu",
            "semal",
            "Meiyim",
            "semal",
            "Meiyim",
            "semal",
            "semal"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 356,
        "title": "小数据集预训练的时候，next_sentence_label 什么时候设置成0",
        "body": "如题 ",
        "state": "closed",
        "user": "woyijkl1",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-29T07:51:44+00:00",
        "updated_at": "2020-08-19T01:14:25+00:00",
        "closed_at": "2020-05-28T10:52:56+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]",
            "ghost"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 353,
        "title": "如何用自己的数据做预训练？",
        "body": "看到这个[预训练 (ERNIE 1.0)](https://github.com/PaddlePaddle/ERNIE/blob/develop/README.zh.md#预训练-ernie-10)想用自己的数据进行预训练\r\n\r\n执行了这个脚本[script/zh_task/pretrain.sh](https://github.com/PaddlePaddle/ERNIE/blob/develop/script/zh_task/pretrain.sh)\r\n\r\n这个脚本跑不起来 报错\r\n`[root@localhost zh_task]# sh ./pretrain.sh \r\n+ export FLAGS_eager_delete_tensor_gb=0\r\n+ FLAGS_eager_delete_tensor_gb=0\r\n+ export FLAGS_sync_nccl_allreduce=1\r\n+ FLAGS_sync_nccl_allreduce=1\r\n+ export CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7\r\n+ CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7\r\n++ hostname -i\r\n+ python3 /root/ERNIE/pretrain_launch.py --nproc_per_node 8 --selected_gpus 0,1,2,3,4,5,6,7 --node_ips ::1 127.0.0.1 --node_id 0 ./train.py --use_cuda True --is_distributed False --use_fast_executor True --weight_sharing True --in_tokens true --batch_size 8192 --vocab_path ./config/vocab.txt --train_filelist ./data/train_filelist --valid_filelist ./data/valid_filelist --validation_steps 100 --num_train_steps 1000000 --checkpoints ./checkpoints --save_steps 10000 --ernie_config_path ./config/ernie_config.json --learning_rate 1e-4 --use_fp16 false --weight_decay 0.01 --max_seq_len 512 --skip_steps 10\r\nusage: pretrain_launch.py [-h] [--ernie_config_path ERNIE_CONFIG_PATH]\r\n                          [--init_checkpoint INIT_CHECKPOINT]\r\n                          [--checkpoints CHECKPOINTS]\r\n                          [--weight_sharing WEIGHT_SHARING]\r\n                          [--generate_neg_sample GENERATE_NEG_SAMPLE]\r\n                          [--epoch EPOCH] [--learning_rate LEARNING_RATE]\r\n                          [--lr_scheduler {linear_warmup_decay,noam_decay}]\r\n                          [--weight_decay WEIGHT_DECAY]\r\n                          [--num_train_steps NUM_TRAIN_STEPS]\r\n                          [--warmup_steps WARMUP_STEPS]\r\n                          [--save_steps SAVE_STEPS]\r\n                          [--validation_steps VALIDATION_STEPS]\r\n                          [--use_fp16 USE_FP16]\r\n                          [--use_dynamic_loss_scaling USE_DYNAMIC_LOSS_SCALING]\r\n                          [--init_loss_scaling INIT_LOSS_SCALING]\r\n                          [--incr_every_n_steps INCR_EVERY_N_STEPS]\r\n                          [--decr_every_n_nan_or_inf DECR_EVERY_N_NAN_OR_INF]\r\n                          [--incr_ratio INCR_RATIO] [--decr_ratio DECR_RATIO]\r\n                          [--skip_steps SKIP_STEPS] [--verbose VERBOSE]\r\n                          [--train_filelist TRAIN_FILELIST]\r\n                          [--valid_filelist VALID_FILELIST]\r\n                          [--test_filelist TEST_FILELIST]\r\n                          [--vocab_path VOCAB_PATH]\r\n                          [--max_seq_len MAX_SEQ_LEN]\r\n                          [--batch_size BATCH_SIZE] [--in_tokens IN_TOKENS]\r\n                          [--is_distributed IS_DISTRIBUTED]\r\n                          [--use_cuda USE_CUDA]\r\n                          [--use_fast_executor USE_FAST_EXECUTOR]\r\n                          [--do_test DO_TEST]\r\npretrain_launch.py: error: unrecognized arguments: --node_id 0 ./train.py\r\n`",
        "state": "closed",
        "user": "sz547073165",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-28T07:19:44+00:00",
        "updated_at": "2020-07-20T03:10:44+00:00",
        "closed_at": "2020-05-28T10:53:00+00:00",
        "comments_count": [
            "Meiyim",
            "woyijkl1",
            "Meiyim",
            "woyijkl1",
            "sz547073165",
            "sz547073165",
            "stale[bot]",
            "hrwise-nlp"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 355,
        "title": "预测时出现addle.fluid.core_avx.EnforceNotMet: cudaGetDeviceCount failed in paddle::platform::GetCUDADeviceCount",
        "body": "在单卡单机上出现问题，无法运行\r\npaddle.fluid.core_avx.EnforceNotMet: cudaGetDeviceCount failed in paddle::platform::GetCUDADeviceCount: unknown error at [/paddle/paddle/fluid/platform/gpu_info.cc:97]\r\n\r\n\r\n详细错误信息\r\n  File \"/home/work/src/event_relation_mt_models.py\", line 39, in <module>\r\n    max_seq_len=max_seq_len, batch_size=batch_size)\r\n  File \"/home/work/paddle_gpu_env/python/lib/python2.7/site-packages/baidu/kgx/models/mt_ernie_classifier.py\", line 89, in __init__\r\n    self.__start_model()\r\n  File \"/home/work/paddle_gpu_env/python/lib/python2.7/site-packages/baidu/kgx/models/mt_ernie_classifier.py\", line 93, in __start_model\r\n    dev_list = fluid.cuda_places()\r\n  File \"/home/work/paddle_gpu_env/python/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 136, in cuda_places\r\n    device_ids = _cuda_ids()\r\n  File \"/home/work/paddle_gpu_env/python/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 101, in _cuda_ids\r\n    device_ids = six.moves.range(core.get_cuda_device_count())\r\npaddle.fluid.core_avx.EnforceNotMet: cudaGetDeviceCount failed in paddle::platform::GetCUDADeviceCount: unknown error at [/paddle/paddle/fluid/platform/gpu_info.cc:97]\r\nPaddlePaddle Call Stacks:\r\n0       0x7f71aba8de10p void paddle::platform::EnforceNotMet::Init<char const*>(char const*, char const*, int) + 352\r\n1       0x7f71aba8e189p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 137\r\n2       0x7f71adbf70bcp paddle::platform::GetCUDADeviceCount() + 1036\r\n3       0x7f71aba89abap\r\n4       0x7f71abac0d36p\r\n5       0x7f72fa472989p PyEval_EvalFrameEx + 28553\r\n6       0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n7       0x7f72fa472345p PyEval_EvalFrameEx + 26949\r\n8       0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n9       0x7f72fa472345p PyEval_EvalFrameEx + 26949\r\n10      0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n11      0x7f72fa472345p PyEval_EvalFrameEx + 26949\r\n12      0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n13      0x7f72fa3ebf85p\r\n14      0x7f72fa3b9df3p PyObject_Call + 67\r\n15      0x7f72fa3c89cdp\r\n16      0x7f72fa3b9df3p PyObject_Call + 67\r\n17      0x7f72fa427bafp\r\n18      0x7f72fa42446fp\r\n19      0x7f72fa3b9df3p PyObject_Call + 67\r\n20      0x7f72fa46f4a6p PyEval_EvalFrameEx + 15014\r\n21      0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n22      0x7f72fa4751f2p PyEval_EvalCode + 50\r\n23      0x7f72fa489e7cp PyImport_ExecCodeModuleEx + 140\r\n24      0x7f72fa48a1dep\r\n25      0x7f72fa48b0d9p\r\n26      0x7f72fa48bd37p PyImport_ImportModuleLevel + 471\r\n27      0x7f72fa4699ffp\r\n28      0x7f72fa3b9df3p PyObject_Call + 67\r\n29      0x7f72fa46b417p PyEval_CallObjectWithKeywords + 71\r\n30      0x7f72fa46f8c7p PyEval_EvalFrameEx + 16071\r\n31      0x7f72fa4750bdp PyEval_EvalCodeEx + 2061\r\n32      0x7f72fa4751f2p PyEval_EvalCode + 50\r\n33      0x7f72fa49df42p PyRun_FileExFlags + 146\r\n34      0x7f72fa49f2d9p PyRun_SimpleFileExFlags + 217\r\n35      0x7f72fa4b500dp Py_Main + 3149\r\n36      0x7f72f96b2bd5p __libc_start_main + 245\r\n37            0x4007a1p\r\n\r\ngpu信息\r\n![image](https://user-images.githubusercontent.com/6512760/67680180-b01bdb80-f9c5-11e9-87ac-c9bd5822d6f9.png)\r\n",
        "state": "closed",
        "user": "littlepan0413",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-28T13:00:17+00:00",
        "updated_at": "2020-05-28T10:52:57+00:00",
        "closed_at": "2020-05-28T10:52:57+00:00",
        "comments_count": [
            "Meiyim",
            "littlepan0413",
            "Meiyim",
            "liupluswei",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 358,
        "title": "使用python -m propeller.tools.start_server，报错。",
        "body": "用propeller.tools.start_server启动好ernie模型，调用萃取模型脚本，报错 \r\n\r\n> Exception: /paddle/paddle/fluid/operators/lookup_table_op.cu:43 Assertion `id < N` failed. Variable value (input) of OP(fluid.layers.embedding) expected >= 0 and < 18000, but got 1073741824. Please check input value.\r\n\r\n看了下我的 input\r\n[[   1   96  128 1603  204   62 1114    2  706  809 1172  226  128 1528\r\n  3976  208  249 2310   18   21   96  289   65  369   52   96  128 1528\r\n  3976  208  249    8  128 1528 1603  953  100  128  361    2]] [[0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n  1 1 1 1]]\r\n并没发现任何问题。求解答。",
        "state": "closed",
        "user": "austinkk",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-30T16:29:39+00:00",
        "updated_at": "2020-05-28T10:52:58+00:00",
        "closed_at": "2020-05-28T10:52:58+00:00",
        "comments_count": [
            "jerrywgz",
            "austinkk",
            "Meiyim",
            "austinkk",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 359,
        "title": "做lcqmc数据集什么样的参数最好啊，batch_size,epoch,lr等？",
        "body": "为什么我有时32好有时64好",
        "state": "closed",
        "user": "wxlduter",
        "closed_by": "stale[bot]",
        "created_at": "2019-10-31T08:41:34+00:00",
        "updated_at": "2020-05-28T10:52:59+00:00",
        "closed_at": "2020-05-28T10:52:59+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 361,
        "title": "ernie是基于字训练还是基于词训练的啊",
        "body": "",
        "state": "closed",
        "user": "wxlduter",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-03T06:50:14+00:00",
        "updated_at": "2020-05-28T09:53:04+00:00",
        "closed_at": "2020-05-28T09:53:04+00:00",
        "comments_count": [
            "PROoshio",
            "Meiyim",
            "wq343580510",
            "jfkey",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 362,
        "title": "Process finished with exit code -1073741676 (0xC0000094)",
        "body": "在pycharm，用自己数据预训练，执行[train.py](https://github.com/PaddlePaddle/ERNIE/blob/develop/ernie/train.py)到一半的时候终止了，出现了这个code。\r\n\r\n有时候能执行完，有时候强制中断，执行的程度不好说，有人碰到过类似的吗？\r\n\r\npaddlepaddle 1.5.2\r\nPython 3.7.4\r\n\r\n如：\r\n\r\n`\r\n[INFO] 2019-11-05 18:59:32,298 [    train.py:  318]:\tfeed_queue size 70\r\n[INFO] 2019-11-05 18:59:32,298 [    train.py:  323]:\tcurrent learning_rate:0.000095\r\n[INFO] 2019-11-05 18:59:32,298 [    train.py:  343]:\tepoch: 1, progress: 1/1, step: 510, loss: 5.830832, ppl: 287.308990, next_sent_acc: 1.000000, speed: 0.431771 steps/s, file: C:/Users/Admin/Desktop/work/20190920nlp/nlp01/dataset2/pre_data_train.tsv.gz, mask_type: mask_word\r\n[INFO] 2019-11-05 19:00:05,023 [    train.py:  318]:\tfeed_queue size 70\r\n[INFO] 2019-11-05 19:00:05,024 [    train.py:  323]:\tcurrent learning_rate:0.000095\r\n[INFO] 2019-11-05 19:00:05,024 [    train.py:  343]:\tepoch: 1, progress: 1/1, step: 520, loss: 5.694308, ppl: 212.865204, next_sent_acc: 1.000000, speed: 0.305581 steps/s, file: C:/Users/Admin/Desktop/work/20190920nlp/nlp01/dataset2/pre_data_train.tsv.gz, mask_type: mask_word\r\n\r\nProcess finished with exit code -1073741676 (0xC0000094)\r\n`",
        "state": "closed",
        "user": "sz547073165",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-06T02:06:46+00:00",
        "updated_at": "2020-05-28T10:53:01+00:00",
        "closed_at": "2020-05-28T10:53:01+00:00",
        "comments_count": [
            "GT-ZhangAcer",
            "sz547073165",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 363,
        "title": "搭建向量服务器后客户端请求报错：Assertion `id < N` failed",
        "body": "**第一步：使用docker安装paddle**\r\ndocker pull hub.baidubce.com/paddlepaddle/paddle:1.6.0-gpu-cuda10.0-cudnn7\r\n\r\ndocker run --runtime nvidia --name paddle -p 8129:8888 -it -v $PWD:/paddle hub.baidubce.com/paddlepaddle/paddle:1.6.0-gpu-cuda10.0-cudnn7 /bin/bash\r\n\r\n在容器内使用python解释器检查显示Your Paddle Fluid is installed succesfully!\r\n\r\n**第二步：设置变量以及安装所需包**\r\nexport CUDA_VISIBLE_DEVICES=0\r\n\r\npip3 install zmq\r\n\r\nexport PYTHONPATH=./:$PYTHONPATH\r\n\r\n解压中文与训练模型\r\n\r\n等等等\r\n\r\n**第三步：开启向量服务器**\r\n\r\npython3 ernie/service/encoder_server.py -m ./inf_model/ -p 8888 -v --encode_layer pooler\r\n\r\n显示如下：\r\n[INFO] 2019-11-06 03:03:51,781 [encoder_server.py:   65]:\tpropeller server listent on port 8888\r\n[INFO] 2019-11-06 03:03:51,783 [   server.py:  131]:\tInferenceProxy starting...\r\n[DEBUG] 2019-11-06 03:03:51,784 [   server.py:   65]:\trun_worker 0\r\n[DEBUG] 2019-11-06 03:03:51,785 [   server.py:   68]:\tcuda_env 0\r\n[INFO] 2019-11-06 03:03:51,787 [   server.py:  140]:\tQueue init done\r\n[DEBUG] 2019-11-06 03:03:53,028 [   server.py:   76]:\tPredictor building 0\r\n[DEBUG] 2019-11-06 03:03:53,028 [   server.py:   50]:\tcreate predictor on card 0\r\nI1106 03:03:53.876863   559 analysis_predictor.cc:88] Profiler is deactivated, and no profiling report will be generated.\r\nI1106 03:03:53.893898   559 op_compatible_info.cc:201] The default operator required version is missing. Please update the model version.\r\nI1106 03:03:53.893931   559 analysis_predictor.cc:847] MODEL VERSION: 0.0.0\r\nI1106 03:03:53.893942   559 analysis_predictor.cc:849] PREDICTOR VERSION: 1.6.0\r\n--- Running analysis [ir_graph_build_pass]\r\n--- Running analysis [ir_graph_clean_pass]\r\n--- Running analysis [ir_analysis_pass]\r\n--- Running IR pass [is_test_pass]\r\n--- Running IR pass [simplify_with_basic_ops_pass]\r\n--- Running IR pass [conv_affine_channel_fuse_pass]\r\n--- Running IR pass [conv_eltwiseadd_affine_channel_fuse_pass]\r\n--- Running IR pass [conv_bn_fuse_pass]\r\n--- Running IR pass [conv_eltwiseadd_bn_fuse_pass]\r\n--- Running IR pass [multihead_matmul_fuse_pass]\r\nI1106 03:03:55.595218   559 graph_pattern_detector.cc:96] ---  detected 12 subgraphs\r\n--- Running IR pass [fc_fuse_pass]\r\nI1106 03:03:55.610505   559 graph_pattern_detector.cc:96] ---  detected 12 subgraphs\r\nI1106 03:03:55.618679   559 graph_pattern_detector.cc:96] ---  detected 25 subgraphs\r\n--- Running IR pass [fc_elementwise_layernorm_fuse_pass]\r\nI1106 03:03:55.633041   559 graph_pattern_detector.cc:96] ---  detected 24 subgraphs\r\n--- Running IR pass [conv_elementwise_add_act_fuse_pass]\r\n--- Running IR pass [conv_elementwise_add2_act_fuse_pass]\r\n--- Running IR pass [conv_elementwise_add_fuse_pass]\r\n--- Running IR pass [transpose_flatten_concat_fuse_pass]\r\n--- Running IR pass [runtime_context_cache_pass]\r\n--- Running analysis [ir_params_sync_among_devices_pass]\r\nI1106 03:03:55.645728   559 ir_params_sync_among_devices_pass.cc:41] Sync params from CPU to GPU\r\n--- Running analysis [adjust_cudnn_workspace_size_pass]\r\n--- Running analysis [inference_op_replace_pass]\r\n--- Running analysis [ir_graph_to_program_pass]\r\nI1106 03:03:55.840788   559 analysis_predictor.cc:473] ======= optimize end =======\r\n[DEBUG] 2019-11-06 03:03:55,841 [   server.py:   78]:\tPredictor 0\r\n\r\n应该是正确启动了\r\n\r\n**第四步：客户端请求**\r\n\r\npython代码如下：\r\n`from ernie.service.client import ErnieClient`\r\n`client = ErnieClient('./config/vocab.txt', host='localhost', port=8888)`\r\n`ret = client(['谁有狂三这张高清的', '英雄联盟什么英雄最好'])`\r\n\r\n客户端报错：\r\n[INFO] 2019-11-06 03:10:14,655 [   client.py:   60]:\tConnecting to server... tcp://localhost:8888\r\n[ERROR] 2019-11-06 03:10:24,685 [   client.py:   91]:\tResource temporarily unavailable\r\nTraceback (most recent call last):\r\n  File \"/home/ERNIE/propeller/service/client.py\", line 88, in get\r\n    reply = await socket.recv(zmq.NOBLOCK)\r\n  File \"/usr/lib/python3.5/asyncio/futures.py\", line 363, in __iter__\r\n    return self.result()  # May raise too.\r\n  File \"/usr/lib/python3.5/asyncio/futures.py\", line 274, in result\r\n    raise self._exception\r\n  File \"/usr/local/lib/python3.5/dist-packages/zmq/_future.py\", line 315, in _add_recv_event\r\n    r = recv(**kwargs)\r\n  File \"zmq/backend/cython/socket.pyx\", line 796, in zmq.backend.cython.socket.Socket.recv\r\n  File \"zmq/backend/cython/socket.pyx\", line 832, in zmq.backend.cython.socket.Socket.recv\r\n  File \"zmq/backend/cython/socket.pyx\", line 191, in zmq.backend.cython.socket._recv_copy\r\n  File \"zmq/backend/cython/socket.pyx\", line 186, in zmq.backend.cython.socket._recv_copy\r\n  File \"zmq/backend/cython/checkrc.pxd\", line 19, in zmq.backend.cython.checkrc._check_rc\r\nzmq.error.Again: Resource temporarily unavailable\r\nTraceback (most recent call last):\r\n  File \"test_client.py\", line 3, in <module>\r\n    ret = client(['\\u8c01\\u6709\\u72c2\\u4e09\\u8fd9\\u5f20\\u9ad8\\u6e05\\u7684', '\\u82f1\\u96c4\\u8054\\u76df\\u4ec0\\u4e48\\u82f1\\u96c4\\u6700\\u597d'])\r\n  File \"/home/ERNIE/ernie/service/client.py\", line 73, in __call__\r\n    ret, = super(ErnieClient, self).__call__(sen_ids, token_type_ids)\r\n  File \"/home/ERNIE/propeller/service/client.py\", line 102, in __call__\r\n    raise RuntimeError('Client call failed')\r\nRuntimeError: Client call failed\r\n\r\n服务端报错：\r\nW1106 03:21:16.098963  1561 device_context.cc:235] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 10.1, Runtime API Version: 10.0\r\nW1106 03:21:16.105224  1561 device_context.cc:243] device: 0, cuDNN Version: 7.5.\r\nW1106 03:21:19.452029  1561 naive_executor.cc:43] The NaiveExecutor can not work properly if the cmake flag ON_INFER is not set.\r\nW1106 03:21:19.452064  1561 naive_executor.cc:45] Unlike the training phase, all the scopes and variables will be reused to save the allocation overhead.\r\nW1106 03:21:19.452075  1561 naive_executor.cc:48] Please re-compile the inference library by setting the cmake flag ON_INFER=ON if you are running Paddle Inference\r\nF1106 03:21:20.245061  1561 device_context.cc:318] cudaStreamSynchronize unspecified launch failure errno: 4\r\n\r\n一堆以下内容：\r\nException: /paddle/paddle/fluid/operators/lookup_table_op.cu:43 Assertion `id < N` failed. Variable value (input) of OP(fluid.layers.embedding) expected >= 0 and < 18000, but got 4656722015836110848. Please check input value.\r\nException: /paddle/paddle/fluid/operators/lookup_table_op.cu:43 Assertion `id < N` failed. Variable value (input) of OP(fluid.layers.embedding) expected >= 0 and < 18000, but got 4656722015836110848. Please check input value.\r\n\r\n*** Check failure stack trace: ***\r\n    @     0x7fa91bd2811d  google::LogMessage::Fail()\r\n    @     0x7fa91bd2bbcc  google::LogMessage::SendToLog()\r\n    @     0x7fa91bd27c43  google::LogMessage::Flush()\r\n    @     0x7fa91bd2d0de  google::LogMessageFatal::~LogMessageFatal()\r\n    @     0x7fa91e50b587  paddle::platform::CUDADeviceContext::Wait()\r\n    @     0x7fa91e4a0163  paddle::framework::TransDataDevice()\r\n    @     0x7fa91e49f11e  paddle::framework::TransformData()\r\n    @     0x7fa91e48212b  paddle::framework::OperatorWithKernel::PrepareData()\r\n    @     0x7fa91e483508  paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7fa91e483af3  paddle::framework::OperatorWithKernel::RunImpl()\r\n    @     0x7fa91e47e2b3  paddle::framework::OperatorBase::Run()\r\n    @     0x7fa91e438ef0  paddle::framework::NaiveExecutor::Run()\r\n    @     0x7fa91be04cac  paddle::AnalysisPredictor::Run()\r\n    @     0x7fa91bcf7cd6  _ZZN8pybind1112cpp_function10initializeIZN6paddle6pybind12_GLOBAL__N_121BindAnalysisPredictorEPNS_6moduleEEUlRNS2_17AnalysisPredictorERKSt6vectorINS2_12PaddleTensorESaISA_EEE_SC_IS8_SE_EINS_4nameENS_9is_methodENS_7siblingEEEEvOT_PFT0_DpT1_EDpRKT2_ENUlRNS_6detail13function_callEE1_4_FUNESW_\r\n    @     0x7fa91bbfc176  pybind11::cpp_function::dispatcher()\r\n    @           0x4e1307  PyCFunction_Call\r\n    @           0x535fcb  PyEval_EvalFrameEx\r\n    @           0x53a81b  PyEval_EvalCodeEx\r\n    @           0x4e3537  (unknown)\r\n    @           0x5c3bd7  PyObject_Call\r\n    @           0x532a22  PyEval_EvalFrameEx\r\n    @           0x53af6a  PyEval_EvalCodeEx\r\n    @           0x4e3423  (unknown)\r\n    @           0x5c3bd7  PyObject_Call\r\n    @           0x4f08be  (unknown)\r\n    @           0x5c3bd7  PyObject_Call\r\n    @           0x55fbf6  (unknown)\r\n    @           0x5c3bd7  PyObject_Call\r\n    @           0x5354af  PyEval_EvalFrameEx\r\n    @           0x53af6a  PyEval_EvalCodeEx\r\n    @           0x4e3537  (unknown)\r\n    @           0x5c3bd7  PyObject_Call\r\n\r\n请问是我的环境问题吗还是什么问题呢？谢谢",
        "state": "closed",
        "user": "fengyunshuo",
        "closed_by": "fengyunshuo",
        "created_at": "2019-11-06T03:27:57+00:00",
        "updated_at": "2019-11-07T06:28:20+00:00",
        "closed_at": "2019-11-07T06:28:20+00:00",
        "comments_count": [
            "Meiyim",
            "fengyunshuo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 364,
        "title": "where can we find ERNIE tiny?",
        "body": "ERNIE_TINY什么时候开源？还找不到呢。\r\nernie_tiny的报道https://cloud.tencent.com/developer/news/468388",
        "state": "closed",
        "user": "brightmart",
        "closed_by": "kirayummy",
        "created_at": "2019-11-07T06:07:19+00:00",
        "updated_at": "2020-11-05T07:32:08+00:00",
        "closed_at": "2019-11-22T03:14:27+00:00",
        "comments_count": [
            "kirayummy",
            "kirayummy",
            "yguo33",
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 367,
        "title": "请问能直接使用ernie对句子进行打分吗？比如perplexity",
        "body": "你好，请问能否提供计算输入 sentence 的 perplexity 的样例代码或者思路呢，感谢~",
        "state": "closed",
        "user": "loserdog-err",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-17T07:40:54+00:00",
        "updated_at": "2020-05-28T10:53:02+00:00",
        "closed_at": "2020-05-28T10:53:02+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 366,
        "title": "There is no next data",
        "body": "我在使用ERNE去预测实体的时候，会出现：There is no next data. at [D:\\1.6.1\\paddle\\paddle\\fluid\\operators\\reader\\read_op.cc:90] 这句话，不知道是什么意思？\r\n\r\n```ssh\r\nWARNING:root:paddle.fluid.layers.py_reader() may be deprecated in the near future. Please use paddle.fluid.io.DataLoader.from_generator() instead.\r\nThere is no next data. at [D:\\1.6.1\\paddle\\paddle\\fluid\\operators\\reader\\read_op.cc:90]\r\n[6, 6, 6, 4, 5, 5]\r\nThere is no next data. at [D:\\1.6.1\\paddle\\paddle\\fluid\\operators\\reader\\read_op.cc:90]\r\n[6, 6, 6, 4, 5, 5]\r\n```",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-15T09:50:45+00:00",
        "updated_at": "2020-05-28T10:53:03+00:00",
        "closed_at": "2020-05-28T10:53:03+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 368,
        "title": "server not ready; not ready endpoints",
        "body": "错误：\r\n![image](https://user-images.githubusercontent.com/27318679/69021578-435b9600-09f3-11ea-951c-a4be72bb0018.png)\r\n跑的是run_drcd.sh 脚本:  \r\n![image](https://user-images.githubusercontent.com/27318679/69021825-1a87d080-09f4-11ea-9594-4f838388c794.png)\r\n用4个gpu分了4个进程去跑，其中第一个进程的log总是报\"server not ready, wait 3 sec to retry\" \"not ready endpoints\"的错误。  \r\n其他可能的相关信息：  \r\n1.第3个进程的json文件写入出现了“ raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\n json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\"的错误。估计是写入的数据为空。  \r\n2. ernie 版本: ERNIE 1.0 Base for Chinese with params config and vocabs  \r\n3. 操作系统版本：Ubuntu 16.04.6 LTS (GNU/Linux 4.15.0-58-generic x86_64)  \r\n4. cuda版本：cuda9.0\r\n\r\n",
        "state": "closed",
        "user": "Heavenlinguistics",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-18T03:24:05+00:00",
        "updated_at": "2022-07-23T04:58:08+00:00",
        "closed_at": "2020-05-28T10:53:04+00:00",
        "comments_count": [
            "oyjxer",
            "Meiyim",
            "Heavenlinguistics",
            "oyjxer",
            "stale[bot]",
            "lllulll"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 369,
        "title": "distill 中3.对无标注数据和数据增强数据进行一定比例混合，这句话怎么理解",
        "body": "",
        "state": "closed",
        "user": "paulpaul91",
        "closed_by": "kirayummy",
        "created_at": "2019-11-18T06:41:58+00:00",
        "updated_at": "2019-11-22T03:12:53+00:00",
        "closed_at": "2019-11-22T03:12:53+00:00",
        "comments_count": [
            "kirayummy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 370,
        "title": "训练完成之后报\"无法分配内存(cannot malloc memory)\"",
        "body": "训练完成之后报了无法分配内存的错误：\r\n![image](https://user-images.githubusercontent.com/27318679/69300526-633ac600-0c4e-11ea-9b6f-949df0855b21.png)\r\n由下图可知训练已经完成:  \r\n![image](https://user-images.githubusercontent.com/27318679/69300230-8749d780-0c4d-11ea-9833-7d1002e9dde1.png)\r\n只训练了两个epoch,且上面的log已经显示输出了最后的验证结果和测试结果。且查看checkpoints文件夹也输出了训练到最后一个step的checkpoint。  \r\n所以为什么已经成功训练完了还会报出无法分配内存的错误呢？这样的错误是否会影响已经保存的checkpoint的效果呢？",
        "state": "closed",
        "user": "Heavenlinguistics",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-21T03:06:04+00:00",
        "updated_at": "2020-05-28T09:52:38+00:00",
        "closed_at": "2020-05-28T09:52:38+00:00",
        "comments_count": [
            "oyjxer",
            "Heavenlinguistics",
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 372,
        "title": "关于num_seqs Variable的一个小问题",
        "body": "请问finetune/classifier.py中的num_seqs是一个var tensor 也不在feedlist中 怎么就直接获取了batch_size",
        "state": "closed",
        "user": "wq343580510",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-22T06:39:07+00:00",
        "updated_at": "2020-05-28T09:52:37+00:00",
        "closed_at": "2020-05-28T09:52:37+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 375,
        "title": "Floating point exception (core dumped)",
        "body": "I1126 10:30:02.161927 733376 parallel_executor.cc:329] The number of CUDAPlace, which is used in ParallelExecutor, is 1. And the Program will be copied 1 copies\r\nI1126 10:30:02.339908 733376 build_strategy.cc:340] SeqOnlyAllReduceOps:0, num_trainers:1\r\nFloating point exception (core dumped)\r\n\r\n完全不知道哪个地方出错。请问，会是什么原因导致如上问题，该如何排查呢？",
        "state": "closed",
        "user": "liuLannister",
        "closed_by": "liuLannister",
        "created_at": "2019-11-26T05:00:28+00:00",
        "updated_at": "2019-11-26T11:23:52+00:00",
        "closed_at": "2019-11-26T11:23:52+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 373,
        "title": "README中的时间延迟是否写反了？",
        "body": "如下图：\r\n![image](https://user-images.githubusercontent.com/12854979/69503880-31c93f80-0f59-11ea-9bf7-1939ca17007a.png)\r\nERNIE-tiny和ERNIE2.0的延迟似乎写反了",
        "state": "closed",
        "user": "AnShengqiang",
        "closed_by": "Meiyim",
        "created_at": "2019-11-24T23:58:50+00:00",
        "updated_at": "2019-11-25T06:15:20+00:00",
        "closed_at": "2019-11-25T06:15:20+00:00",
        "comments_count": [
            "Meiyim",
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 377,
        "title": "希望能增加不同 pooling 的策略",
        "body": "![image](https://user-images.githubusercontent.com/5009351/69729385-2ba5af80-1161-11ea-820a-0d702b131549.png)\r\n参考 bert-as-service，希望向量服务器增加不同的 pooling 策略..\r\n\r\n\r\n",
        "state": "closed",
        "user": "semal",
        "closed_by": "stale[bot]",
        "created_at": "2019-11-27T14:13:24+00:00",
        "updated_at": "2020-05-28T09:52:40+00:00",
        "closed_at": "2020-05-28T09:52:40+00:00",
        "comments_count": [
            "MrPig",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 376,
        "title": "requirement.txt sklearn==0.0 安装失败",
        "body": "![image](https://user-images.githubusercontent.com/5009351/69720502-b54b8200-114d-11ea-81fa-07921caa4389.png)\r\n安装这个包的时候报错：\r\nCould not install packages due to an EnvironmentError: ('Received response with content-encoding: gzip, but failed to decode it.', error('Error -3 while decompressing data: incorrect header check',))\r\n",
        "state": "closed",
        "user": "semal",
        "closed_by": "semal",
        "created_at": "2019-11-27T11:41:00+00:00",
        "updated_at": "2019-12-10T02:16:48+00:00",
        "closed_at": "2019-12-10T02:16:48+00:00",
        "comments_count": [
            "MrPig"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 378,
        "title": "8卡速度和单卡一样",
        "body": "The number of CUDAPlace, which is used in ParallelExecutor, is 8. And the Program will be copied 8 copies。\r\n我看8个显卡都占满了，但速度和单卡一样，求大神帮忙解决一下。",
        "state": "closed",
        "user": "xiaoxuesheng1234",
        "closed_by": "xiaoxuesheng1234",
        "created_at": "2019-12-02T07:36:48+00:00",
        "updated_at": "2019-12-05T03:14:54+00:00",
        "closed_at": "2019-12-05T03:14:54+00:00",
        "comments_count": [
            "xiaoxuesheng1234",
            "Lizhengo",
            "xiaoxuesheng1234",
            "Lizhengo",
            "xiaoxuesheng1234",
            "xiaoxuesheng1234",
            "Lizhengo",
            "Meiyim",
            "xiaoxuesheng1234",
            "Meiyim",
            "xiaoxuesheng1234",
            "xiaoxuesheng1234",
            "Meiyim",
            "xiaoxuesheng1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 379,
        "title": "ERNIE/ernie/utils/args.py 里边的prepare_log方法里os.path.exists少加了一个s",
        "body": "![image](https://user-images.githubusercontent.com/17738610/70208376-5ea30100-1768-11ea-9518-88fa731b27b8.png)\r\n\r\nERNIE/ernie/utils/args.py 里边的prepare_log方法里os.path.exists少加了一个s，会报错",
        "state": "closed",
        "user": "Dilyar93",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-05T06:06:59+00:00",
        "updated_at": "2020-05-28T09:52:39+00:00",
        "closed_at": "2020-05-28T09:52:39+00:00",
        "comments_count": [
            "Lizhengo",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 380,
        "title": "Error in using the CPU version of paddlepaddle-1.5.2",
        "body": "My environment is Python3.6 and paddlepaddle-1.5.2(cpu version) \r\nI download the model of \"ERNIE 1.0 Base for Chinese(max-len-512)\"\r\nI run the example of lcqmc task and I got a Exception :\r\n\r\n\"I1205 17:34:24.159621 28051 parallel_executor.cc:334] The number of CPUPlace, which is used in ParallelExecutor, is 32. And the Program will be copied 32 copies\r\nI1205 17:34:59.254444 28051 build_strategy.cc:340] SeqOnlyAllReduceOps:0, num_trainers:1\r\nTraceback (most recent call last):\r\n  File \"./ernie/run_classifier.py\", line 447, in <module>\r\n    main(args)\r\n  File \"./ernie/run_classifier.py\", line 257, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 280, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 672, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 534, in _run_parallel\r\n    exe.run(fetch_var_names, fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: Invoke operator softmax_with_cross_entropy error.\r\nPython Call stacks: \r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1774, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/layers/nn.py\", line 6425, in softmax_with_cross_entropy\r\n    'axis': axis\r\n  File \"~/ERNIE/ernie/finetune/classifier.py\", line 111, in create_model\r\n    logits=logits, label=labels, return_softmax=True)\r\n  File \"./ernie/run_classifier.py\", line 119, in main\r\n    is_regression=args.is_regression)\r\n  File \"./ernie/run_classifier.py\", line 447, in <module>\r\n    main(args)\r\nC++ Call stacks: \r\n at [/paddle/paddle/fluid/operators/math/cross_entropy.cc:56]\r\nPaddlePaddle Call Stacks: \r\n0       0x7f91ea0b3270p void paddle::platform::EnforceNotMet::Init<char const*>(char const*, char const*, int) + 352\r\n1       0x7f91ea0b35e9p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 137\r\n2       0x7f91eb110473p paddle::operators::math::CrossEntropyFunctor<paddle::platform::CPUDeviceContext, float>::operator()(paddle::platform::CPUDeviceContext const&, paddle::framework::Tensor*, paddle::framework::Tensor const*, paddle::framework::Tensor const*, bool, int, int) + 739\r\n3       0x7f91ea4861cep paddle::operators::SoftmaxWithCrossEntropyKernel<float>::Compute(paddle::framework::ExecutionContext const&) const + 1566\r\n4       0x7f91ea486413p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CPUPlace, false, 0ul, paddle::operators::SoftmaxWithCrossEntropyKernel<float>, paddle::operators::SoftmaxWithCrossEntropyKernel<double> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n5       0x7f91eb410ae7p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, paddle::framework::RuntimeContext*) const + 375\r\n6       0x7f91eb411251p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 529\r\n7       0x7f91eb40c1f4p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 260\r\n8       0x7f91eb1fcf13p\r\n9       0x7f91eb1fcbacp paddle::framework::details::ComputationOpHandle::RunImpl() + 124\r\n10      0x7f91eb1eec4cp paddle::framework::details::OpHandleBase::Run(bool) + 28\r\n11      0x7f91eb1d31a6p paddle::framework::details::FastThreadedSSAGraphExecutor::RunOpSync(paddle::framework::details::OpHandleBase*) + 310\r\n12      0x7f91eb1d1f0fp paddle::framework::details::FastThreadedSSAGraphExecutor::RunOp(paddle::framework::details::OpHandleBase*, std::shared_ptr<paddle::framework::BlockingQueue<unsigned long> > const&, unsigned long*) + 47\r\n13      0x7f91eb1d22cfp\r\n14      0x7f91ea2c6353p std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, void> >::_M_invoke(std::_Any_data const&) + 35\r\n15      0x7f91ea1738a7p std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&) + 39\r\n16        0x318b20cb23p pthread_once + 83\r\n17      0x7f91eb1cdb72p\r\n18      0x7f91ea174e64p ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const + 404\r\n19      0x7f91f692a6e0p\r\n20        0x318b207851p\r\n21        0x318aee767dp clone + 109\r\n\r\nterminate called without an active exception\"",
        "state": "closed",
        "user": "veridone",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-05T09:44:33+00:00",
        "updated_at": "2020-05-28T09:52:55+00:00",
        "closed_at": "2020-05-28T09:52:55+00:00",
        "comments_count": [
            "jamjarred",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 382,
        "title": "ernie代码在处理batch数据时是否存在bug？",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/develop/ernie/reader/task_reader.py\r\n![image](https://user-images.githubusercontent.com/6512760/70375752-b98d5180-193c-11ea-8049-f26f95ca10d3.png)\r\n这里如果dev_count > 1，最后循环结束 all_dev_batches内数据长度小于dev_count就不会处理了？造成数据丢失？",
        "state": "closed",
        "user": "littlepan0413",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-07T14:01:01+00:00",
        "updated_at": "2020-05-28T09:52:41+00:00",
        "closed_at": "2020-05-28T09:52:41+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 383,
        "title": "加载finetune好的ernie发现很多权重加载不了（保存的模型中也没有对应权重）",
        "body": "问题：使用ernie进行finetune，下载的模型是\r\n这样，finetune之后保存的模型少了很多变量，\r\n原来的fc.c_0没有了，只有带beta 和moment的，请问这个是什么原因呢？\r\n环境：在孔明集群训练\r\nlog:http://yq01-sys-hic-p40-0060.yq01.baidu.com:8388/v1/slurmjobs/155440/workspace\r\n",
        "state": "closed",
        "user": "bit-pku-zdf",
        "closed_by": "bit-pku-zdf",
        "created_at": "2019-12-09T07:42:58+00:00",
        "updated_at": "2019-12-09T08:35:49+00:00",
        "closed_at": "2019-12-09T08:35:49+00:00",
        "comments_count": [
            "dingsiyu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 384,
        "title": "请问设置use_multi_gpu_test=true的情况为什么预测时还是仅使用了一张卡？",
        "body": "",
        "state": "closed",
        "user": "QianShengWu",
        "closed_by": "QianShengWu",
        "created_at": "2019-12-10T11:50:22+00:00",
        "updated_at": "2019-12-12T03:31:34+00:00",
        "closed_at": "2019-12-12T03:31:34+00:00",
        "comments_count": [
            "jiweibo",
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 385,
        "title": "RuntimeError: know type float64",
        "body": "问题详情：\r\n```script\r\nTask exception was never retrieved\r\nfuture: <Task finished coro=<InferenceClient.__call__.<locals>.get() done, defined at /home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/client.py:77> exception=RuntimeError('know type float64',)>\r\nTraceback (most recent call last):\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/client.py\", line 84, in get\r\n    request = serv_utils.nparray_list_serialize(arr_list)\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/utils.py\", line 105, in nparray_list_serialize\r\n    slot_list = [numpy_to_slot(arr) for arr in arr_list]\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/utils.py\", line 105, in <listcomp>\r\n    slot_list = [numpy_to_slot(arr) for arr in arr_list]\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/utils.py\", line 55, in numpy_to_slot\r\n    raise RuntimeError('know type %s' % arr.dtype)\r\nRuntimeError: know type float64\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 33, in <module>\r\n    ret = client(query)\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/ernie/service/client.py\", line 79, in __call__\r\n    ret, = super(ErnieClient, self).__call__(sen_ids, token_type_ids)\r\n  File \"/home/tianlun/tools/ERNIE/ERNIE-develop/propeller/service/client.py\", line 102, in __call__\r\n    raise RuntimeError('Client call failed')\r\nRuntimeError: Client call failed\r\n```\r\n向量化请求，前面的n条一直成功，突然失败了，为什么，失败处的数据单独拿出来请求没有问题。",
        "state": "closed",
        "user": "lunlu",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-18T08:13:44+00:00",
        "updated_at": "2020-05-28T09:52:42+00:00",
        "closed_at": "2020-05-28T09:52:42+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 386,
        "title": "For Prediction i run the below script but i got an error \"infer_classifyer.py: error: unrecognized arguments: \\\"",
        "body": "```\r\n%%python -u infer_classifyer.py \\\\\r\n    --ernie_config_path MODEL_PATH//ernie_config.json \\\\\r\n    --init_checkpoint \"./checkpoints//step_100\" \\\\\r\n    --save_inference_model_path .//saved_model \\\\\r\n    --predict_set  TASK_DATA_PATH//RTE//test.tsv \\\\\r\n    --vocab_path MODEL_PATH//vocab.txt \\\\\r\n    --num_labels 2\r\n\r\n```\r\nafter running this i got this error infer_classifyer.py: error: unrecognized arguments: \\\r\nplease guide me",
        "state": "closed",
        "user": "mrawais",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-22T18:34:01+00:00",
        "updated_at": "2020-05-28T09:52:43+00:00",
        "closed_at": "2020-05-28T09:52:43+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 387,
        "title": "ERNIE 模型转pb",
        "body": "有尝试过将ernie模型转pb的实践吗",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "stale[bot]",
        "created_at": "2019-12-24T03:24:27+00:00",
        "updated_at": "2020-05-28T09:52:44+00:00",
        "closed_at": "2020-05-28T09:52:44+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 388,
        "title": "同一条输入每次预测结果不同",
        "body": "用ERNIE做序列标注任务，模型部分代码用的是1.0的，每次输入相同时，ret_infers给出不同的结果，概率也不一样。",
        "state": "closed",
        "user": "hweidream",
        "closed_by": "hweidream",
        "created_at": "2019-12-25T03:40:14+00:00",
        "updated_at": "2019-12-25T09:36:20+00:00",
        "closed_at": "2019-12-25T09:36:20+00:00",
        "comments_count": [
            "WeiyueSu",
            "hweidream",
            "hweidream"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 390,
        "title": "Operator \"gen_nccl_id\" has not been registered",
        "body": "我測試了好幾天，一直出現這個問題沒法解，我是用CPU版本執行drcd\r\nERINE版本是release/r2.1.0\r\n\r\n[指令]\r\n sh script/zh_task/ernie_base/run_drcd.sh\r\n\r\n[run_drcd.sh]\r\n將use_cuda 改成false\r\n\r\npython3 ./finetune_launch.py  \\\r\n    --nproc_per_node 1\\\r\n    --selected_gpus 0,1,2,3,4,5,6,7 \\\r\n    --node_ips $(hostname -i) \\\r\n    --node_id 0 \\\r\nrun_mrc.py --use_cuda false\\\r\n                    --batch_size 4 \\\r\n                    --in_tokens false\\\r\n                    --use_fast_executor true \\\r\n                    --checkpoints ./checkpoints \\\r\n                    --vocab_path ${MODEL_PATH}/vocab.txt  \\\r\n                    --ernie_config_path ${MODEL_PATH}/ernie_config.json \\\r\n                    --do_train true \\\r\n                    --do_val true \\\r\n                    --do_test true \\\r\n                    --verbose true \\\r\n                    --save_steps 1000 \\\r\n                    --validation_steps 100 \\\r\n                    --warmup_proportion 0.0 \\\r\n                    --weight_decay  0.01 \\\r\n                    --epoch 2 \\\r\n                    --max_seq_len 512 \\\r\n                    --do_lower_case true \\\r\n                    --doc_stride 128 \\\r\n                    --train_set ${TASK_DATA_PATH}/drcd/train.json \\\r\n                    --dev_set ${TASK_DATA_PATH}/drcd/dev.json \\\r\n                    --test_set ${TASK_DATA_PATH}/drcd/test.json \\\r\n                    --learning_rate 5e-5 \\\r\n                    --num_iteration_per_drop_scope 1 \\\r\n                    --init_pretraining_params ${MODEL_PATH}/params \\\r\n                    --skip_steps 10\r\n\r\n\r\n[LOG]\r\n2020-01-01 13:17:42,817-INFO: worker_endpoints:['10.144.225.77:6170'] trainers_num:1 current_endpoint XXXXXXXX:6170               trainer_id:0\r\n[INFO] 2020-01-01 13:17:42,817 [  run_mrc.py:  169]:    worker_endpoints:['XXXXXXXX:6170'] trainers_num:1 current_endpoint:XXXXXXXX:6170               trainer_id:0\r\nTraceback (most recent call last):\r\n  File \"run_mrc.py\", line 365, in <module>\r\n    main(args)\r\n  File \"run_mrc.py\", line 180, in main\r\n    startup_program=startup_prog)\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/paddle/fluid/transpiler/distribute_transpiler.py\", line 571, in transpile\r\n    wait_port=self.config.wait_port)\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/paddle/fluid/transpiler/distribute_transpiler.py\", line 355, in _transpile_nccl2\r\n    self.config.hierarchical_allreduce_inter_nranks\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 2488, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1788, in __init__\r\n    proto = OpProtoHolder.instance().get_op_proto(type)\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1670, in get_op_proto\r\n    raise ValueError(\"Operator \\\"%s\\\" has not been registered.\" % type)\r\nValueError: Operator \"gen_nccl_id\" has not been registered.\r\n",
        "state": "closed",
        "user": "JasonChang",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-01T13:19:19+00:00",
        "updated_at": "2020-05-28T09:52:46+00:00",
        "closed_at": "2020-05-28T09:52:46+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 391,
        "title": "ValueError: need at least one array to concatenate",
        "body": "I am getting following error\r\nValueError: need at least one array to concatenate\r\n\r\nComplete reproduceable file is as follows\r\nhttps://github.com/talhaanwarch/ERNIE_OLID/blob/master/ERNIE.ipynb",
        "state": "closed",
        "user": "talhaanwarch",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-02T13:54:06+00:00",
        "updated_at": "2020-05-28T09:52:49+00:00",
        "closed_at": "2020-05-28T09:52:49+00:00",
        "comments_count": [
            "tianxin1860",
            "talhaanwarch",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 392,
        "title": "Missing use_task_id in pre-trained ERNIE-en-base",
        "body": "Download ` https://ernie.bj.bcebos.com/ERNIE_Base_en_stable-2.0.0.tar.gz`, uncompress and the `ernie_config.json` does not have a value for `use_task_id`.\r\n\r\n```json\r\n{\r\n  \"attention_probs_dropout_prob\": 0.1, \r\n  \"hidden_act\": \"gelu\", \r\n  \"hidden_dropout_prob\": 0.1, \r\n  \"hidden_size\": 768, \r\n  \"initializer_range\": 0.02, \r\n  \"max_position_embeddings\": 512, \r\n  \"num_attention_heads\": 12, \r\n  \"num_hidden_layers\": 12, \r\n  \"sent_type_vocab_size\": 4, \r\n  \"task_type_vocab_size\": 16, \r\n  \"vocab_size\": 30522\r\n}\r\n```\r\n\r\nAs a consequence, when attempting to save the model using `save_inference_model` (so that I can convert it to ONNX using the paddle2onnx tool), it would complain the task id input is missing after pruning the model for inference inside `save_inference_model` as shown in my debug outputs by modifying the save method locally:\r\n\r\n```text\r\ncloned 2 -> read_file_0.tmp_0 VarType.LOD_TENSOR False\r\ncloned 6 -> _input_reader_reader VarType.READER True\r\ncloned 32 -> read_file_0.tmp_6 VarType.LOD_TENSOR False\r\ncloned 41 -> read_file_0.tmp_5 VarType.LOD_TENSOR False\r\ncloned 44 -> read_file_0.tmp_4 VarType.LOD_TENSOR False\r\ncloned 63 -> read_file_0.tmp_1 VarType.LOD_TENSOR False\r\ncloned 219 -> read_file_0.tmp_3 VarType.LOD_TENSOR False\r\ncloned 374 -> read_file_0.tmp_2 VarType.LOD_TENSOR False\r\npruned 116 -> read_file_0.tmp_4 VarType.LOD_TENSOR False\r\npruned 117 -> read_file_0.tmp_0 VarType.LOD_TENSOR False\r\npruned 129 -> read_file_0.tmp_1 VarType.LOD_TENSOR False\r\npruned 718 -> read_file_0.tmp_2 VarType.LOD_TENSOR False\r\n```\r\n\r\nFor your reference, my model saving codes look like\r\n\r\n```python\r\n# cloned and modified from `ernie/finetune/classifier`\r\ndef create_model(args,\r\n                 pyreader_name,\r\n                 ernie_config,\r\n                 is_prediction=False,\r\n                 task_name=\"\",\r\n                 is_classify=False,\r\n                 is_regression=False,\r\n                 ernie_version=\"1.0\"):\r\n     ...\r\n    (src_ids, sent_ids, pos_ids, task_ids, input_mask, labels,\r\n     qids) = fluid.layers.read_file(pyreader)\r\n\r\n    ernie = ErnieModel(\r\n    ...\r\n    cls_feats = ernie.get_pooled_output()\r\n    inputs = (src_ids, sent_ids, pos_ids, task_ids, input_mask)\r\n    return inputs, cls_feats, pyreader, (labels, qids)\r\n\r\n# imitating `run_classifier.py`\r\nstartup_prog = fluid.Program()\r\ntrain_program = fluid.Program()\r\n\r\nwith fluid.program_guard(train_program, startup_prog):\r\n    with fluid.unique_name.guard():\r\n        inputs, ernie_latent, train_pyreader, _ = create_model(\r\n            args,\r\n            pyreader_name='input_reader',\r\n            ernie_config=ernie_config,\r\n            is_classify=args.is_classify,\r\n            is_regression=args.is_regression)\r\n\r\n        # exe.run(startup_prog) . # i think there is no need to run this\r\n        init_pretraining_params(\r\n            exe,\r\n            args.init_pretraining_params,\r\n            main_program=startup_prog,\r\n            use_fp16=args.use_fp16)\r\n    fluid.io.save_inference_model(dirname=\"/ernie_onnx_path\",\r\n                                 feeded_var_names=[var.name for var in inputs],\r\n                                 target_vars=[ernie_latent],\r\n                                 main_program=train_program,\r\n                                 executor=exe)\r\n```\r\n\r\nAfter I set `use_task_id` to `true` in the config file, saving the inference model will work. Please confirm if that's the right fix (and fix the pre-trained archive.)",
        "state": "closed",
        "user": "winston-zillow",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-02T20:24:10+00:00",
        "updated_at": "2020-05-28T09:52:47+00:00",
        "closed_at": "2020-05-28T09:52:47+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 393,
        "title": "Which dataset i used for multilabel classification ",
        "body": "I used RTE for multiple label classification,. Is it correct?",
        "state": "closed",
        "user": "mrawais",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-03T03:09:36+00:00",
        "updated_at": "2020-05-28T09:52:48+00:00",
        "closed_at": "2020-05-28T09:52:48+00:00",
        "comments_count": [
            "tianxin1860",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 395,
        "title": "In-place reshaping is not compatible with ONNX",
        "body": "When trying to export the model to ONNX using paddle2onnx, the in-place reshapings used by ERNIE cause error since ONNX doesn't seem to support in-place operation. Please consider changing `in_place` to `False`.\r\n\r\nPull request at https://github.com/PaddlePaddle/ERNIE/pull/394\r\n",
        "state": "closed",
        "user": "winston-zillow",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-06T18:11:00+00:00",
        "updated_at": "2020-05-28T09:52:51+00:00",
        "closed_at": "2020-05-28T09:52:51+00:00",
        "comments_count": [
            "Meiyim",
            "winston-zillow",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 396,
        "title": "Segmentation fault (core dumped) in sh script/zh_task/ernie_base/run_msra_ner.sh on CONLL 2003",
        "body": "I run the  `sh script/zh_task/ernie_base/run_msra_ner.sh` which is changed a little bit (only the paths to files and false for using CUDA)\r\n```\r\n+ export FLAGS_eager_delete_tensor_gb=0\r\n+ export FLAGS_sync_nccl_allreduce=1\r\n+ export CUDA_VISIBLE_DEVICES=0\r\n+ export PYTHONPATH=./ernie:\r\n+ python -u ./ernie/run_sequence_labeling.py --use_cuda false --do_train true --do_val true --do_test true --batch_size 16 --init_pretraining_params /mnt/d/Programming/Code/Playground/ERNIE-develop/model/params --num_labels 50 --chunk_scheme IOB --label_map_config /mnt/d/Programming/Code/Playground/ERNIE-develop/data/label_map.json --train_set /mnt/d/Programming/Code/Playground/ERNIE-develop/data/eng.train.ernie.tsv --dev_set /mnt/d/Programming/Code/Playground/ERNIE-develop/data/eng.testa.ernie.tsv --test_set /mnt/d/Programming/Code/Playground/ERNIE-develop/data/eng.testb.ernie.tsv --vocab_path /mnt/d/Programming/Code/Playground/ERNIE-develop/model/vocab.txt --ernie_config_path /mnt/d/Programming/Code/Playground/ERNIE-develop/model/ernie_config.json --checkpoints ./checkpoints --save_steps 100000 --weight_decay 0.01 --warmup_proportion 0.0 --validation_steps 100 --use_fp16 false --epoch 6 --max_seq_len 256 --learning_rate 5e-5 --skip_steps 10 --num_iteration_per_drop_scope 1 --random_seed 1\r\nSegmentation fault (core dumped)\r\n```\r\ndata looks according to your format\r\n```\r\nCRICKET - LEICESTERSHIRE TAKE OVER AT TOP AFTER INNINGS VICTORY .\t O O I-ORG O O O O O O O O\r\n LONDON 1996-08-30\t I-LOC O\r\n West Indian all-rounder Phil Simmons took four for 38 on Friday as Leicestershire beat Somerset by an innings and 39 runs in two days to take over at the head of the county championship .\t I-MISC I-MISC O I-PER I-PER O O O O O O O I-ORG O I-ORG O O O O O O O O O O O O O O O O O O O O\r\n Their stay on top , though , may be short-lived as title rivals Essex , Derbyshire and Surrey all closed in on victory while Kent made up for lost time in their rain-affected match against Nottinghamshire .\t O O O O O O O O O O O O O I-ORG O I-ORG O I-ORG O O O O O O I-ORG O O O O O O O O O O I-ORG O\r\n After bowling Somerset out for 83 on the opening morning at Grace Road , Leicestershire extended their first innings by 94 runs before being bowled out for 296 with England discard Andy Caddick taking three for 83 .\t O O I-ORG O O O O O O O O I-LOC I-LOC O I-ORG O O O O O O O O O O O O O O I-LOC O I-PER I-PER O O O O O\r\n```\r\nand mapping file label_map.json have this format\r\n```\r\n{\r\n\t\"B-LOC\" : 0,\r\n\t\"I-LOC\" : 1,\r\n\r\n\t\"B-ORG\" : 2,\r\n\t\"I-ORG\" : 3,\r\n\r\n\t\"B-MISC\" : 4,\r\n\t\"I-MISC\" : 5,\r\n\r\n\t\"B-PER\" : 6,\r\n\t\"I-PER\" : 7,\r\n\r\n\t\"O\" : 8,\r\n\t\"UNK\" : 9\r\n}\r\n```\r\nDo you know where can be a problem or how to solve it",
        "state": "closed",
        "user": "petrLorenc",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-07T10:48:21+00:00",
        "updated_at": "2020-05-28T09:52:50+00:00",
        "closed_at": "2020-05-28T09:52:50+00:00",
        "comments_count": [
            "OleNet",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 397,
        "title": "ernie tiny 的finetune_classifier异常",
        "body": "下载了ernie tiny的config, 启动finetune_classifier时，参照reademe的说明：\r\n# 1 线上GPU 容器环境下：\r\n```\r\nERNIE tiny 模型采用了subword粒度输入，需要在数据前处理中加入切词(segmentation)并使用sentence piece进行tokenization. segmentation 以及 tokenization 需要使用的模型包含在了 ERNIE tiny 的预训练模型文件中，分别是 ./subword/dict.wordseg.pickle 和 ./subword/spm_cased_simp_sampled.model.\r\n目前./example/下的代码针对 ERNIE tiny 的前处理进行了适配只需在脚本中通过 --sentence_piece_model 引入tokenization 模型，再通过 --word_dict 引入 segmentation 模型之后即可进行 ERNIE tiny 的 Fine-tune。\r\n```\r\n指定了--sentence_piece_model 和--word_dict参数，\r\n```\r\n# for ernie tiny\r\npython3.6 ernie/finetune_classifier.py \\\r\n    --data_dir ${TASK_DATA_PATH}/chnsenticorp/  \\\r\n    --warm_start_from ${MODEL_PATH}/params \\\r\n    --vocab_file ${MODEL_PATH}/vocab.txt \\\r\n    --max_seqlen 128 \\\r\n    --sentence_piece_model ${MODEL_PATH}/subword/spm_cased_simp_sampled.model \\\r\n    --word_dict ${MODEL_PATH}/subword/dict.wordseg.pickle \\\r\n    --run_config '{\r\n        \"model_dir\": \"output\",\r\n        \"max_steps\": '$((10 * 9600 / 32))',\r\n        \"save_steps\": 100,\r\n        \"log_steps\": 10,\r\n        \"max_ckpt\": 1,\r\n        \"skip_steps\": 0,\r\n        \"eval_steps\": 100\r\n    }' \\\r\n    --hparam ${MODEL_PATH}/ernie_config.json \\\r\n    --hparam '{ # model definition\r\n        \"sent_type_vocab_size\": None,    # default term in official config\r\n        \"use_task_id\": False,\r\n        \"task_id\": 0,\r\n        }' \\\r\n    --hparam '{ # learn\r\n      \"warmup_proportion\":  0.1,\r\n      \"weight_decay\": 0.01,\r\n      \"use_fp16\": 0,\r\n      \"learning_rate\": 0.00005,\r\n      \"num_label\": 2,\r\n      \"batch_size\": 32\r\n    }'\r\n```\r\n![B8C6E20AF49CF70A3E3D59490](https://user-images.githubusercontent.com/10727709/71900819-85a28780-3199-11ea-8995-5f2957995e81.jpg)\r\n# 2 本地mac环境下\r\n线上gpu环境下的docker容器里的ernie tiny 的finetune是使用github上的ernie代码，根据readme说明下载了相关的数据、模型文件，修改了启动的python命令，跑的，报https://github.com/PaddlePaddle/ERNIE/issues/397的错误。\r\n\r\n因为本地没有gpu，直接跑会报错，我根据错误提示将几处cuda_places替换为cpu_places，发现本地用cpu可以跑通，不再报类型转换的错误。 **但是线上gpu环境下的代码和本地差的就是这几处cpu_places的替换，数据、模型一致，却报了类型转换错误。**\r\n```\r\n...\r\n[INFO] 2020-01-08 12:42:39,990 [monitored_executor.py:  230]:\twarm start: encoder_layer_2_post_ffn_layer_norm_bias\r\n[INFO] 2020-01-08 12:42:39,990 [monitored_executor.py:  230]:\twarm start: pooled_fc.w_0\r\n[INFO] 2020-01-08 12:42:39,990 [monitored_executor.py:  230]:\twarm start: pooled_fc.b_0\r\n[DEBUG] 2020-01-08 12:42:41,849 [monitored_executor.py:  281]:\tfreezing program\r\n[INFO] 2020-01-08 12:42:41,849 [monitored_executor.py:  269]:\treplica id 0 of 1\r\n[DEBUG] 2020-01-08 12:42:41,884 [monitored_executor.py:  283]:\tdone freezing\r\n[INFO] 2020-01-08 12:42:41,884 [monitored_executor.py:  284]:\t********** Start Loop ************\r\n[DEBUG] 2020-01-08 12:42:41,884 [monitored_executor.py:  289]:\ttrain loop has hook <propeller.paddle.train.hooks.StopAtStepHook object at 0x12d108cc0>\r\n[DEBUG] 2020-01-08 12:42:41,885 [monitored_executor.py:  289]:\ttrain loop has hook <propeller.paddle.train.hooks.LoggingHook object at 0x12d29c5c0>\r\n[DEBUG] 2020-01-08 12:42:41,885 [monitored_executor.py:  289]:\ttrain loop has hook <propeller.paddle.train.trainer.train_and_eval.<locals>.EvalHookOnTrainLoop object at 0x1391a93c8>\r\n[DEBUG] 2020-01-08 12:42:41,885 [monitored_executor.py:  289]:\ttrain loop has hook <propeller.paddle.train.hooks.CheckpointSaverHook object at 0x12d2d3080>\r\nI0108 12:42:42.160605 3072451456 parallel_executor.cc:421] The number of CPUPlace, which is used in ParallelExecutor, is 1. And the Program will be copied 1 copies\r\nI0108 12:42:42.206982 3072451456 build_strategy.cc:363] SeqOnlyAllReduceOps:0, num_trainers:1\r\nI0108 12:42:42.243758 3072451456 parallel_executor.cc:285] Inplace strategy is enabled, when build_strategy.enable_inplace = True\r\nI0108 12:42:42.325690 3072451456 parallel_executor.cc:315] Cross op memory reuse strategy is enabled, when build_strategy.memory_optimize = True or garbage collection strategy is disabled, which is not recommended\r\nI0108 12:42:42.351922 3072451456 parallel_executor.cc:368] Garbage collection strategy is enabled, when FLAGS_eager_delete_tensor_gb = 0\r\n[DEBUG] 2020-01-08 12:47:09,765 [    hooks.py:  207]:\tstep: 10\tsteps/sec: -1.00000\tloss: 0.77125\tlr:[1.6666667e-06]\r\n[DEBUG] 2020-01-08 12:51:13,554 [    hooks.py:  207]:\tstep: 20\tsteps/sec: 0.03969\tloss: 0.77323\tlr:[3.3333333e-06]\r\n[DEBUG] 2020-01-08 12:56:19,886 [    hooks.py:  207]:\tstep: 30\tsteps/sec: 0.03903\tloss: 0.71317\tlr:[5.e-06]\r\n[INFO] 2020-01-08 12:59:26,841 [monitored_executor.py:  336]:\t********** Stop Loop ************\r\n```",
        "state": "closed",
        "user": "leyiwang",
        "closed_by": "leyiwang",
        "created_at": "2020-01-07T13:40:45+00:00",
        "updated_at": "2020-01-08T08:57:43+00:00",
        "closed_at": "2020-01-08T08:57:43+00:00",
        "comments_count": [
            "Meiyim",
            "leyiwang",
            "Meiyim",
            "leyiwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 398,
        "title": "ernie tiny模型pretrain问题",
        "body": "你好，因为现实中的任务场景比较复杂，非单一的文本分类和序列标注任务。和想使用特定领域的语料对ernie tiny进行无监督的pretrain。参考了README中关于预训练的说明：[预训练 (ERNIE 1.0)]（https://github.com/PaddlePaddle/ERNIE/blob/develop/README.zh.md#%E9%A2%84%E8%AE%AD%E7%BB%83-ernie-10），对金融财务的语料做了预处理。因为要对原ernie tiny模型进行训练，所以使用了sentence piece做tokenize。最终将一个样本表示成“;”分割5部分存储到gz压缩文件中。其中，因为ernie tiny本身是词语粒度的，所以seg_labels中除了SPE和CLS外的位置都设为了0，即都做词首处理。\r\n\r\n将词表指定为ernie tiny的词表，使用script/pretrain.sh脚本训练，并将ernie_config_path指定为ernie tiny的。启动训练任务后，学习率正常，大于0；\r\n但是，当添加 --init_checkpoint ./config/params对ernie tiny模型参数初始化时，发现打印出的日志中每次迭代学习率都是0？\r\n",
        "state": "closed",
        "user": "leyiwang",
        "closed_by": "leyiwang",
        "created_at": "2020-01-08T13:40:39+00:00",
        "updated_at": "2020-01-10T10:18:10+00:00",
        "closed_at": "2020-01-10T10:18:10+00:00",
        "comments_count": [
            "OleNet",
            "leyiwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 399,
        "title": "Why is the fine tuning process executed 5 times in the SST-2 task?",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/da04e0b44fed78217dc4dd86edad020b2792cb04/script/en_glue/ernie_base/SST-2/task.sh#L20\r\n\r\nI am familiarizing with the ERNIE model and found that the finetuning process is executed 5 times with the same random seed (1).\r\nCould you please tell me what is the purpose of doing so?\r\n\r\nThanks",
        "state": "closed",
        "user": "AMR-KELEG",
        "closed_by": "AMR-KELEG",
        "created_at": "2020-01-10T11:42:45+00:00",
        "updated_at": "2020-01-27T18:49:34+00:00",
        "closed_at": "2020-01-27T18:49:33+00:00",
        "comments_count": [
            "Meiyim",
            "AMR-KELEG",
            "Meiyim",
            "AMR-KELEG"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 400,
        "title": "Can you evaluate ERNIE2.0(zh) model in the benchmark of CLUE?",
        "body": "ERNIE especially ERNIE2.0 has achieved very brilliant result in a number of NLP tasks, and making great contribution to the development of NLP. Our organization, CLUE, is devoted to promoting the progress of Chinese NLP. We has chosen 9 representative Chinese tasks and the leaderboard is open now (including human's performance). We sincerely hope you can evaluate ERNIE models in our benchmark !\r\n\r\nCLUE Group: https://github.com/CLUEbenchmark/CLUE\r\nCLUE Benchmark: https://www.cluebenchmarks.com/",
        "state": "closed",
        "user": "yechens",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-12T01:07:34+00:00",
        "updated_at": "2020-05-28T09:52:52+00:00",
        "closed_at": "2020-05-28T09:52:52+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 403,
        "title": "获取embedding错误",
        "body": "使用FAQ1的方式抽取embedding，发现输出不符合预期\r\n输入为\r\n![in](https://user-images.githubusercontent.com/24364049/72676973-3aaa3d80-3ad2-11ea-8b44-c4e7e107158c.png)\r\n输出为\r\n![1](https://user-images.githubusercontent.com/24364049/72676995-60cfdd80-3ad2-11ea-9c8a-8ed71dc3b23d.png)\r\n很多0.999  计算cos距离时，差距也不太明显\r\n\r\n",
        "state": "closed",
        "user": "niantianlei",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-19T07:44:04+00:00",
        "updated_at": "2020-05-28T09:52:54+00:00",
        "closed_at": "2020-05-28T09:52:54+00:00",
        "comments_count": [
            "Meiyim",
            "niantianlei",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "user"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 404,
        "title": "Pre-training code for 2.0",
        "body": "Hi,\r\nIs there any plan of releasing 2.0 pre-training code?",
        "state": "closed",
        "user": "zyfedward",
        "closed_by": "Meiyim",
        "created_at": "2020-01-19T11:09:10+00:00",
        "updated_at": "2020-05-20T09:04:42+00:00",
        "closed_at": "2020-05-20T09:04:42+00:00",
        "comments_count": [
            "Meiyim",
            "Meiyim"
        ],
        "labels": [
            "user"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 405,
        "title": "fetch embedding error",
        "body": "I want to obtain d400 embedding then modify `hidden_size` to 400.\r\nit has error as follow:\r\n![aee38e6c85f0aaf55fe362a13](https://user-images.githubusercontent.com/24364049/72711272-a8726a00-3ba3-11ea-93b3-9749ad8306e8.png)\r\n",
        "state": "closed",
        "user": "niantianlei",
        "closed_by": "stale[bot]",
        "created_at": "2020-01-20T08:42:07+00:00",
        "updated_at": "2020-05-28T09:52:53+00:00",
        "closed_at": "2020-05-28T09:52:53+00:00",
        "comments_count": [
            "PROoshio",
            "niantianlei",
            "PROoshio",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 406,
        "title": "ERNIE2.0 预训练数据集",
        "body": "请问ERNIE2.0 预训练任务IR relevance的相关数据集是否有公开？感谢~",
        "state": "closed",
        "user": "caiyinqiong",
        "closed_by": "stale[bot]",
        "created_at": "2020-02-01T13:42:24+00:00",
        "updated_at": "2020-05-28T09:52:56+00:00",
        "closed_at": "2020-05-28T09:52:56+00:00",
        "comments_count": [
            "zhanghan1992",
            "caiyinqiong",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 410,
        "title": "取ernie 2.0 embedding的相关问题",
        "body": "想问下如何取ernie 2.0 的token -level embedding? readme中给出的[FAQ1: How to get sentence/tokens embedding of ERNIE?](https://github.com/PaddlePaddle/ERNIE#faq1-how-to-get-sentencetokens-embedding-of-ernie)是针对ernie 1.0的\r\n\r\n方便给个demo吗",
        "state": "closed",
        "user": "Akeepers",
        "closed_by": "Akeepers",
        "created_at": "2020-02-20T02:40:17+00:00",
        "updated_at": "2020-02-20T05:10:29+00:00",
        "closed_at": "2020-02-20T05:10:29+00:00",
        "comments_count": [
            "MrPig",
            "Akeepers",
            "Akeepers"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 409,
        "title": "异步调试问题",
        "body": " ****\r\n![Snipaste_2020-02-18_15-16-54](https://user-images.githubusercontent.com/43194667/74712648-c34b0380-5261-11ea-80ab-727a6b55bd8c.png)\r\n\r\n\r\n你好   我想了解一下 ERNIE 里面具体的  py reader 的异步处理机制,想一步一步调试看看\r\n但是 在具体调试的时候却无法进入 IO 模块 代码细节  无法在具体的代码行中停留\r\n请问这是什么原因    windows 系统  pycharm IDE\r\n",
        "state": "closed",
        "user": "18106574249",
        "closed_by": "stale[bot]",
        "created_at": "2020-02-18T07:15:15+00:00",
        "updated_at": "2020-05-28T09:52:59+00:00",
        "closed_at": "2020-05-28T09:52:58+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 412,
        "title": "run_sequence_labeling only accepts \"\\x02\" as delimiter regardless of the language.",
        "body": "I am trying to use ERNIE for English NER task on customized dataset. After exploration, it works only when the tokens are separated by \"\\x02\" instead of \" \". This is not intuitive to use and not documented anywhere.",
        "state": "closed",
        "user": "jacklxc",
        "closed_by": "stale[bot]",
        "created_at": "2020-02-21T00:53:27+00:00",
        "updated_at": "2020-05-28T09:52:59+00:00",
        "closed_at": "2020-05-28T09:52:59+00:00",
        "comments_count": [
            "MrPig",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 413,
        "title": "想请教一下Ernie训练数据格式问题",
        "body": "做文本二分类，训练数据格式必须是：label text_a，然后第一列必须是数字么？ \r\n可以将第一行更改掉么，第一列可以是字符串么？改的函数文件是哪里呢",
        "state": "closed",
        "user": "whiker92",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-03T03:29:57+00:00",
        "updated_at": "2020-05-28T09:53:00+00:00",
        "closed_at": "2020-05-28T09:53:00+00:00",
        "comments_count": [
            "dingsiyu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 417,
        "title": "How do I properly continue finetuning a checkpoint?",
        "body": "When I attempt to continue finetuning using checkpoint (that was the result of another finetuning procedure), the model stagnates after a while. Basically, I get identical predictions after every epoch. Is this a known problem, maybe I'm doing something incorrectly?\r\nTo initialize finetuning with a checkpoint, I use the \"--init_checkpoint\" argument.",
        "state": "closed",
        "user": "drunkinlove",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-11T09:45:58+00:00",
        "updated_at": "2020-05-28T09:53:03+00:00",
        "closed_at": "2020-05-28T09:53:03+00:00",
        "comments_count": [
            "oyxuan-11",
            "drunkinlove",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 416,
        "title": "Can I use an ERNIE checkpoint to extract embeddings+vocabulary?",
        "body": "Is there a snippet available that I can use to extract the embedding matrix with the corresponding vocabulary?",
        "state": "closed",
        "user": "drunkinlove",
        "closed_by": "drunkinlove",
        "created_at": "2020-03-09T13:54:45+00:00",
        "updated_at": "2020-03-11T12:33:11+00:00",
        "closed_at": "2020-03-11T12:33:11+00:00",
        "comments_count": [
            "Meiyim",
            "drunkinlove",
            "Meiyim",
            "drunkinlove"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 420,
        "title": "对于sentence reordering task，随机打乱segment的实现在脚本什么位置？",
        "body": "关于：将一个sentence划分为M个segments，随机打乱segments，通过一个分类任务去预测打乱的顺序类别。\r\n疑问1：打乱segments在哪个脚本文件的哪个函数实现的呢？\r\n疑问2：sentence reordering 的损失在哪个脚本文件的哪个函数实现的呢？",
        "state": "closed",
        "user": "jfkey",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-16T14:32:49+00:00",
        "updated_at": "2020-06-19T08:06:09+00:00",
        "closed_at": "2020-06-19T08:06:09+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 421,
        "title": "ERNIE在Windows上异步并行运算问题",
        "body": "我在Windows上调试ERNIE，发现相同的代码在AI Studio可以正常运行，在Windows本地上却卡在一个地方动不了，且并不报错，程序也仍然运行，最长时间运行半小时后，也不会报错，用单步调试，定位为run_classifier.py的第257行train_exe.run(fetch_list=[])，前面所有代码都能正常输出，而后续的代码无法执行。我猜测是异步并行运算代码在Windows与Linux执行方式可能有所不同。以下是我的环境配置。\r\n硬件环境：CPU i7-8700k，内存32G，显卡NVDIA1080 8G独显\r\n软件环境：Windows 10专业版，Visual Studio2019，Python 3.7",
        "state": "closed",
        "user": "Shelly111111",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-17T10:58:18+00:00",
        "updated_at": "2020-05-28T09:53:06+00:00",
        "closed_at": "2020-05-28T09:53:06+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 424,
        "title": "Metrics中Precision, Recall, F1代码错误",
        "body": "详见PR: https://github.com/PaddlePaddle/ERNIE/pull/423",
        "state": "closed",
        "user": "JasonVann",
        "closed_by": "JasonVann",
        "created_at": "2020-04-09T03:23:30+00:00",
        "updated_at": "2020-04-09T04:26:10+00:00",
        "closed_at": "2020-04-09T04:26:10+00:00",
        "comments_count": [
            "JasonVann"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 425,
        "title": "在test阶段如何使用多卡？",
        "body": "在训练阶段，配置了多张gpu卡进行训练，在val（test）阶段，看起来只使用了一张gpu卡在跑数据，导致速度很慢，有什么方法能在val（test）阶段使用多张gpu卡吗？",
        "state": "closed",
        "user": "wangty163",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-13T09:04:10+00:00",
        "updated_at": "2020-06-20T11:35:27+00:00",
        "closed_at": "2020-06-20T11:35:27+00:00",
        "comments_count": [
            "PROoshio",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 427,
        "title": "ERNIE 2.0 中文模型",
        "body": "请问ERNIE 2.0 中文模型有开放出来的计划吗？",
        "state": "closed",
        "user": "InsaneLife",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-17T04:27:58+00:00",
        "updated_at": "2020-11-20T18:02:22+00:00",
        "closed_at": "2020-11-20T18:02:22+00:00",
        "comments_count": [
            "PROoshio",
            "Meiyim",
            "InsaneLife",
            "Meiyim",
            "InsaneLife",
            "cdj0311",
            "mvb-ai",
            "xiamaozi11",
            "hugofgh",
            "ChenzhengUESTC",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "ERNIE2.0 wanted"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 429,
        "title": " 请问ERNIE有tensorflow版本吗？",
        "body": "",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-21T09:58:01+00:00",
        "updated_at": "2020-07-27T02:59:26+00:00",
        "closed_at": "2020-07-27T02:59:26+00:00",
        "comments_count": [
            "oyjxer",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 431,
        "title": "propeller在线预测",
        "body": "使用propeller构建在线预测服务端时，出现僵尸子进程，是什么原因？不过服务倒是能正常预测\r\n![image](https://user-images.githubusercontent.com/20808676/80056450-d4acd680-8556-11ea-8031-89b58a6e4726.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "xiaoqingydf",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-23T03:42:07+00:00",
        "updated_at": "2020-06-30T10:35:02+00:00",
        "closed_at": "2020-06-30T10:35:02+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 432,
        "title": "Jupter Notebook",
        "body": "Would you be able to add a Jupter Notebook?",
        "state": "closed",
        "user": "BigSalmon2",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-30T18:57:02+00:00",
        "updated_at": "2020-07-07T18:41:25+00:00",
        "closed_at": "2020-07-07T18:41:25+00:00",
        "comments_count": [
            "Meiyim",
            "BigSalmon2",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 437,
        "title": "ERNIE的分词(字)问题",
        "body": "ERNIE是使用tokenization.py 里的 CharTokenizer() 来分词(字)的吗？\r\n我自己测试的时候，发现tokenization.CharTokenizer()存在这么一个问题：\r\n例如：text = '大家好%werw-', CharTokenizer(text)的结果为['[UNK]']  ==> 这是因为text中的'%'和‘-’不在vocab.txt中\r\n\r\n但是，tokenization.FullTokenizer(text)的结果为['大', '家', '好', '[UNK]', 'we', '##r', '##w', '[UNK]']\r\n\r\n为什么要设计CharTokenizer()函数呢?当有“非法”出现时，它直接返回['[UNK]']，原本句子的结构都被破坏了。我在训练时，texts中很有可能出现“非法字符”,那这个非法句子就应该作废吗？\r\n",
        "state": "closed",
        "user": "ZhengQuancheng",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-13T07:26:50+00:00",
        "updated_at": "2020-07-30T01:08:31+00:00",
        "closed_at": "2020-07-30T01:08:31+00:00",
        "comments_count": [
            "MrPig",
            "ZhengQuancheng",
            "qmzorvim123",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 438,
        "title": "如何扩充词库",
        "body": "我的训练数据中有很多名称会被解析为unk，但我的下游任务必须获得这些名称的embedding，所以所有名称都被解析成相同的UNK向量会极度影响任务结果，我想请教一下大家应该如何扩充词库？\r\n我试过直接在vocab.txt文件后添加词汇、修改ernie_config.json中的vocab_size，然后在word_embedding文件中的矩阵的基础上，增加了相应词汇的词向量，它们的值为float64类型的随机向量。但这样在训练时会报错，提示：\r\n\r\n**InvalidArgumentError:** Tensor holds the wrong type, it holds float, but desires to be double.**\r\n  [Hint: Expected valid == true, but received valid:0 != true:1.] at (/paddle/paddle/fluid/framework/tensor_impl.h:33)\r\n  [operator < elementwise_add > error]\r\n\r\n所以我应该如何扩充词库？新的词哪怕是随机向量也没关系，只要他们不同即可。",
        "state": "closed",
        "user": "wanyue-wy",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-13T14:33:52+00:00",
        "updated_at": "2020-07-20T04:05:36+00:00",
        "closed_at": "2020-07-20T04:05:36+00:00",
        "comments_count": [
            "MrPig",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 408,
        "title": "关于FAQ1的embedding预测结果相似度较高问题",
        "body": "采用FAQ1，对于“请问一下西直门站怎么走”与“昨天老师又留了好多作业”获取embedding后，采用余弦相似度判断，两者之间为0.82，这合理吗？有点高了吧",
        "state": "closed",
        "user": "lunlu",
        "closed_by": "stale[bot]",
        "created_at": "2020-02-14T08:54:22+00:00",
        "updated_at": "2020-05-28T09:52:58+00:00",
        "closed_at": "2020-05-28T09:52:58+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 411,
        "title": "请问多标签分类任务的数据格式应该是什么样的？",
        "body": "列名应该是什么？数据准备好之后只需要修改num_label就可以了么？",
        "state": "closed",
        "user": "lpl22-github",
        "closed_by": "lpl22-github",
        "created_at": "2020-02-20T20:32:10+00:00",
        "updated_at": "2020-02-21T10:46:22+00:00",
        "closed_at": "2020-02-21T10:46:22+00:00",
        "comments_count": [
            "MrPig",
            "lpl22-github",
            "DannyIsFunny",
            "lpl22-github"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 422,
        "title": "请问：“实验所用的 DuReader 抽取类、单文档子集为内部数据集。” 具体指什么意思呢？",
        "body": "想确认一下：\r\n是你们对Dureader做了很多预处理，但是预处理后的数据集不方便公开呢，还是是Dureader有一个内部版本，你们在内部版本做的实验？\r\n",
        "state": "closed",
        "user": "dz-w",
        "closed_by": "stale[bot]",
        "created_at": "2020-04-03T18:54:09+00:00",
        "updated_at": "2020-06-09T20:11:07+00:00",
        "closed_at": "2020-06-09T20:11:07+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 426,
        "title": "有必要在训练前去除停用词吗？",
        "body": "请问有必要在训练前去除停用词吗？为什么呢？我做的是中文情感分类相关的任务。",
        "state": "closed",
        "user": "haozheshz",
        "closed_by": "ysh329",
        "created_at": "2020-04-14T04:23:08+00:00",
        "updated_at": "2020-04-15T03:42:22+00:00",
        "closed_at": "2020-04-15T03:42:22+00:00",
        "comments_count": [
            "PROoshio",
            "haozheshz"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 430,
        "title": "run_classifier.py 验证时出错",
        "body": "如果do_train=False, do_val、do_test为True时, \r\nrun_classifier.py 第342, 347行 current_epoch, steps参数 由于未定义问题抛出 UnboundLocalError: local variable 'steps' referenced before assignment\r\n",
        "state": "closed",
        "user": "ubuntu733",
        "closed_by": "ubuntu733",
        "created_at": "2020-04-21T11:32:03+00:00",
        "updated_at": "2020-04-28T12:10:02+00:00",
        "closed_at": "2020-04-28T12:10:02+00:00",
        "comments_count": [
            "oyjxer"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 439,
        "title": "from paddle.fluid.layers import core出现错误",
        "body": "```\r\n>>> from paddle.fluid.layers import core\r\n/home/disk2/zhaoshen02/model/convert/python36/lib/python3.6/site-packages/sklearn/externals/joblib/_multiprocessing_helpers.py:38: UserWarning: [Errno 13] Permission denied.  joblib will operate in serial mode\r\n  warnings.warn('%s.  joblib will operate in serial mode' % (e,))\r\n/home/disk2/zhaoshen02/model/convert/python36/lib/python3.6/site-packages/sklearn/externals/joblib/externals/cloudpickle/cloudpickle.py:47: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\nW0514 10:20:54.407647 19234 init.cc:128] Compiled with WITH_GPU, but no GPU found in runtime.\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: generic_type: type \"VarBase\" is already registered!\r\n```\r\n\r\n导入时出现问题，请问如何解决？\r\n",
        "state": "closed",
        "user": "425985877",
        "closed_by": "baiyfbupt",
        "created_at": "2020-05-14T02:25:20+00:00",
        "updated_at": "2020-07-13T05:33:06+00:00",
        "closed_at": "2020-07-13T05:33:06+00:00",
        "comments_count": [
            "baiyfbupt",
            "425985877",
            "baiyfbupt",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 435,
        "title": "如何扩充字典vocab.txt",
        "body": "请问如何扩充vocab.txt字典？\r\n可以在文件末尾直接添加所需要的符号吗？",
        "state": "closed",
        "user": "ZhengQuancheng",
        "closed_by": "ZhengQuancheng",
        "created_at": "2020-05-04T02:17:55+00:00",
        "updated_at": "2020-05-10T17:12:42+00:00",
        "closed_at": "2020-05-10T17:12:42+00:00",
        "comments_count": [
            "oyjxer",
            "ZhengQuancheng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 419,
        "title": "Is English pre-training data available?",
        "body": "Is English data ERNIE 2.0 was pretrained on available (Encyclopedia, BookCorpus, Reddit)? I'm particularly interested in building a frequency dictionary for the training data. ",
        "state": "closed",
        "user": "drunkinlove",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-13T13:16:05+00:00",
        "updated_at": "2020-06-23T12:05:27+00:00",
        "closed_at": "2020-06-23T12:05:27+00:00",
        "comments_count": [
            "PROoshio",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 414,
        "title": "ERNIE2.0 训练自己数据集",
        "body": "在自己的数据集上finetune时，由于很多中文字不在volab.txt中，导致很多字都被tokenization成UNK。请问是否需要根据自己的数据集来扩充volab.txt？",
        "state": "closed",
        "user": "nizihan",
        "closed_by": "stale[bot]",
        "created_at": "2020-03-04T11:05:31+00:00",
        "updated_at": "2020-05-28T09:53:02+00:00",
        "closed_at": "2020-05-28T09:53:01+00:00",
        "comments_count": [
            "kirayummy",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 440,
        "title": "load inference model之后执行预测时报错\"should be Variable or str\"",
        "body": "用save_inference_model的方式保存了模型文件，在执行预测时加载模型:\r\n```python\r\n[self.predict_prog, self.feed_target_names, self.fetch_targets] = (fluid.io.load_inference_model(dirname=args.init_checkpoint, executor=self.exe))\r\nself.predict_exe = fluid.ParallelExecutor(\r\n            use_cuda=args.use_cuda, main_program=self.predict_prog)\r\nnp_vecs = self.predict_exe.run(fetch_list=[self.fetch_targets])\r\n```\r\n\r\n之后报错\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 147, in <module>\r\n    main()\r\n  File \"main.py\", line 81, in main\r\n    predictor.process_file(input_filename,input_filename+'.txt')\r\n  File \"/home/disk0/wangzhe23/qb_shuangta_12_128/predict.py\", line 100, in process_file\r\n    np_vecs = self.predict_exe.run(fetch_list=[self.fetch_targets])\r\n  File \"/home/disk0/wangzhe23/tools/python27_paddle_1.5.0/lib/python2.7/site-packages/paddle/fluid/parallel_executor.py\", line 280, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/disk0/wangzhe23/tools/python27_paddle_1.5.0/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 665, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/disk0/wangzhe23/tools/python27_paddle_1.5.0/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 526, in _run_parallel\r\n    fetch_var_names = list(map(_to_name_str, fetch_list))\r\n  File \"/home/disk0/wangzhe23/tools/python27_paddle_1.5.0/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 247, in _to_name_str\r\n    raise TypeError(str(var) + \" should be Variable or str\")\r\nTypeError: [name: \"save_infer_model/scale_0\"\r\ntype {\r\n  type: LOD_TENSOR\r\n  lod_tensor {\r\n    tensor {\r\n      data_type: FP32\r\n      dims: -1\r\n      dims: 128\r\n    }\r\n    lod_level: 0\r\n  }\r\n}\r\npersistable: false\r\n] should be Variable or str\r\n```\r\n\r\n这个save_infer_model/scale_0输出的向量就是我需要的output向量，不知道为什么会有这样的错误，排查了很久没有解决，辛苦review一下是哪里的问题",
        "state": "closed",
        "user": "thuwangzhe",
        "closed_by": "baiyfbupt",
        "created_at": "2020-05-14T03:46:54+00:00",
        "updated_at": "2020-07-13T11:56:47+00:00",
        "closed_at": "2020-07-13T11:56:47+00:00",
        "comments_count": [
            "baiyfbupt",
            "thuwangzhe",
            "baiyfbupt",
            "thuwangzhe",
            "baiyfbupt",
            "thuwangzhe",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 441,
        "title": "请问如何对finetune好的ernie使用fluid.save_inference_model呢？",
        "body": "",
        "state": "closed",
        "user": "ChaunceyBai98",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-17T11:01:36+00:00",
        "updated_at": "2020-07-24T15:03:27+00:00",
        "closed_at": "2020-07-24T12:46:53+00:00",
        "comments_count": [
            "ChaunceyBai98",
            "ChaunceyBai98",
            "Lizhengo",
            "ChaunceyBai98",
            "Lizhengo",
            "ChaunceyBai98",
            "ChaunceyBai98",
            "Lizhengo",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 443,
        "title": "save_inference_model报错",
        "body": "参考ernie中的infer_classify.py代码写的mrc的inference模型，在调用save_inference_model时报错如下：\r\n\r\n![image](https://user-images.githubusercontent.com/17971652/82215550-2b38e500-994a-11ea-9181-2b1baa7eee26.png)\r\n\r\n",
        "state": "closed",
        "user": "hweidream",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-18T11:38:34+00:00",
        "updated_at": "2020-07-27T02:59:25+00:00",
        "closed_at": "2020-07-27T02:59:25+00:00",
        "comments_count": [
            "QianShengWu",
            "hweidream",
            "QianShengWu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 451,
        "title": "fp16模型预测报错",
        "body": "您好，\r\n        使用旧版代码fine-tuning的fp16的模型，c++前向预测的时候会出Core，报如下的错，请问这是什么问题？\r\n训练模型：\r\n        ernie:repro分支； paddle:1.7.2版本\r\nc++预测：\r\n        代码：repro分支inference/gpu/inference.cc  paddle版本：1.8.0_release\r\n\r\nInvalidArgumentError: The DataType of multihead_matmul Op's duplicable Variable BiasQK must be consistent. The current variable type is (::paddle::platform::float16), but the previous variable type is (float). at (Paddle-release-1.8/paddle/fluid/framework/operator.cc:1298)\r\n",
        "state": "closed",
        "user": "yaobh",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-20T07:15:31+00:00",
        "updated_at": "2020-08-02T14:16:57+00:00",
        "closed_at": "2020-08-02T14:16:57+00:00",
        "comments_count": [
            "kirayummy",
            "Meiyim",
            "yaobh",
            "yaobh",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 442,
        "title": "C++ Call Stacks (More useful to developers):0   std::string paddle::platfo",
        "body": "![image](https://user-images.githubusercontent.com/46865239/82187562-2ca0e800-991f-11ea-89a4-b9f13efa0ffe.png)\r\nI donot know why this happened in some of my kernel on AI studio,while the others not when I am trying to use Baidu AI studio gpu.",
        "state": "closed",
        "user": "qmzorvim123",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-18T07:51:24+00:00",
        "updated_at": "2020-07-24T09:41:01+00:00",
        "closed_at": "2020-07-24T09:41:01+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 453,
        "title": "install ERNIE ERROR",
        "body": "安装ERNIE报错，\r\n1. git 安装文档命令报错\r\npip install -r requirement.txt 改改改成 pip install -r requirements.txt,只有requirements.txt这个文件\r\n2. 安装 ernie 需要 paddlepaddle-gpu 版本，希望文档可以再完善一点，现在一直报错",
        "state": "closed",
        "user": "shaoshuaig",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-21T02:54:12+00:00",
        "updated_at": "2020-07-27T08:59:24+00:00",
        "closed_at": "2020-07-27T08:59:24+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 456,
        "title": "ERNIE demo 命令有误",
        "body": "python3 ./demo/finetune_classifier_dygraph.py \\\r\n    --from_pretrained ernie_1.0 \\\r\n    --data_dir ./data/xnli\r\n\r\n实际上应该是\r\npython3 ./demo/finetune_classifier_dygraph.py \\\r\n    --from_pretrained ernie-1.0 \\\r\n    --data_dir ./data/xnli",
        "state": "closed",
        "user": "shaoshuaig",
        "closed_by": "Meiyim",
        "created_at": "2020-05-21T10:31:01+00:00",
        "updated_at": "2020-05-22T02:49:14+00:00",
        "closed_at": "2020-05-22T02:49:14+00:00",
        "comments_count": [
            "kirayummy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 454,
        "title": "怎样让ERNIE模型每次训练的结果都是一样的？",
        "body": "我使用PaddleHub加载ERNIE模型，相关参数数据集都没改过，但是我每次的运行结果都不一致。\r\n我该怎样设置参数(比如随机数种子)来使模型每次运行的结果都一致",
        "state": "closed",
        "user": "ZhengQuancheng",
        "closed_by": "ZhengQuancheng",
        "created_at": "2020-05-21T06:21:34+00:00",
        "updated_at": "2020-05-23T23:30:00+00:00",
        "closed_at": "2020-05-23T23:30:00+00:00",
        "comments_count": [
            "Lizhengo",
            "kinghuin",
            "daizh",
            "ZhengQuancheng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 460,
        "title": "这么久了还不开放中文模型，难道在中文上效果不好？",
        "body": "这么久了还不开放中文模型，难道在中文上效果不好？",
        "state": "closed",
        "user": "cdj0311",
        "closed_by": "cdj0311",
        "created_at": "2020-05-22T10:07:13+00:00",
        "updated_at": "2020-05-26T06:38:37+00:00",
        "closed_at": "2020-05-26T06:38:37+00:00",
        "comments_count": [
            "dingsiyu",
            "cdj0311"
        ],
        "labels": [
            "ERNIE2.0 wanted"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 461,
        "title": "ernie有类似于tf的create_pretraing_data.py的处理明文输入的转换为非明文输入 直接给ernie预训练的文件吗？",
        "body": "",
        "state": "closed",
        "user": "qmzorvim123",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-24T01:57:59+00:00",
        "updated_at": "2020-07-31T02:47:21+00:00",
        "closed_at": "2020-07-31T02:47:21+00:00",
        "comments_count": [
            "dingsiyu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 462,
        "title": "propeller 有没有封装好的第三方库???",
        "body": "No module named 'propeller' ",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-25T02:52:57+00:00",
        "updated_at": "2020-07-31T05:29:40+00:00",
        "closed_at": "2020-07-31T04:29:40+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 472,
        "title": "README里面有一个链接错了",
        "body": "\r\n![image](https://user-images.githubusercontent.com/5755812/83134558-1e20b080-a117-11ea-86ce-aa733c00a7d1.png)\r\n\r\n![image](https://user-images.githubusercontent.com/5755812/83134486-047f6900-a117-11ea-9237-be4d4a0f7910.png)\r\n\r\nhttps://ernie.bj.bcebos.com/ernie1.0_zh_inference_model.tar.gz.\r\n多了个点",
        "state": "closed",
        "user": "qhpeklh5959",
        "closed_by": "Meiyim",
        "created_at": "2020-05-28T11:12:31+00:00",
        "updated_at": "2020-05-29T13:45:12+00:00",
        "closed_at": "2020-05-29T13:45:12+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 463,
        "title": "Number of places must be 1 in dygraph mode",
        "body": "`[WARNING] 2020-05-24 23:17:34,694 [modeling_ernie.py:  224]:\tparam:classifier.bias not set in pretrained model, skip\r\n/usr/local/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py:718: UserWarning: Varibale [ mlm_bias mlm.weight mlm.bias mlm_ln.weight mlm_ln.bias ] are not used, because not included in layers state_dict\r\n  format(\" \".join(unused_para_list)))\r\nTraceback (most recent call last):\r\n  File \"ERNIE/demo/finetune_ner_dygraph.py\", line 136, in <module>\r\n    for step, (ids, sids, aligned_label, label, orig_pos) in enumerate(tqdm(train_ds.start())):\r\n  File \"/mnt/ERNIE/propeller/paddle/data/functional.py\", line 77, in start\r\n    r.decorate_batch_generator(_gen, places=places)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/reader.py\", line 1678, in decorate_batch_generator\r\n    self._loader.set_batch_generator(reader, places)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/reader.py\", line 947, in set_batch_generator\r\n    \"Number of places must be 1 in dygraph mode\"\r\nAssertionError: Number of places must be 1 in dygraph mode`",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "jtyoui",
        "created_at": "2020-05-25T03:20:42+00:00",
        "updated_at": "2020-05-26T03:42:38+00:00",
        "closed_at": "2020-05-26T03:42:38+00:00",
        "comments_count": [
            "Meiyim",
            "jtyoui"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 467,
        "title": "怎么去使用finetune_ner_dygraph",
        "body": "请问一下:\r\n   我跑完这个代码: https://github.com/PaddlePaddle/ERNIE/blob/develop/demo/finetune_ner_dygraph.py  \r\n请问跑完之后怎么去使用呢??\r\n\r\n我根据代码去使用得到的结果全是预测6,\r\n`['这', '也', '是', '美', '国', '、', '俄', '罗', '斯', '等', '石', '油', '、', '天', '然', '气', '都', '很', '丰', '富', '的', '国', '家', '搞', '代', '用', '燃', '料', '的', '原', '因']\r\n[6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6]`\r\n很显然美国和俄罗斯都没有识别出现,\r\n\r\n我不知道是不是我的测试代码有问题.\r\n测试代码:\r\n```python\r\n        with graph.guard():\r\n            para_dict, _ = graph.load_dygraph(self.save_model)\r\n            model = ErnieModelForTokenClassification.from_pretrained(\r\n                self.pretreatment_model,\r\n                num_labels=len(self.labels_index) + 1)\r\n            model.set_dict(para_dict)\r\n            place = fluid.CUDAPlace(0) if self.gpu else None\r\n            with graph.base._switch_tracer_mode_guard_(is_train=False):\r\n                model.eval()\r\n                for step, (ids, sids, aligned_label, label, orig_pos) in enumerate(test_ds.start(place)):\r\n                    chine, pre_labels = [], []\r\n                    for id_ in ids.numpy():\r\n                        chine.append(list(map(lambda x: self.index_vocab.get(x, 0), id_)))\r\n                    loss, logic = model(ids, sids, labels=aligned_label)\r\n                    for pos, lo, la in zip(orig_pos.numpy(), logic.numpy(), label.numpy()):\r\n                        _dic = OrderedDict()\r\n                        for p, l in zip(pos, lo):\r\n                            _dic.setdefault(p, []).append(l)\r\n                        del _dic[-100]\r\n                        merged_lo = np.array([np.array(l).mean(0) for _, l in six.iteritems(_dic)])\r\n                        merged_pred = np.argmax(merged_lo, -1)\r\n                        la = la[np.where(la != -100)]\r\n                        if len(la) > len(merged_pred):\r\n                            print('accuracy loss due to truncation: label len:%d, truncate to %d' % (\r\n                                len(la), len(merged_pred)))\r\n                            merged_pred = np.pad(merged_pred, [0, len(la) - len(merged_pred)], mode='constant',\r\n                                                 constant_values=-100)\r\n                        pre_labels.append(merged_pred)\r\n                    for c, l in zip(chine, pre_labels):\r\n                        print(c)\r\n                        print(l)\r\n                        print()\r\n                    return\r\n```\r\n",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "jtyoui",
        "created_at": "2020-05-26T03:40:36+00:00",
        "updated_at": "2020-08-03T02:33:00+00:00",
        "closed_at": "2020-08-03T02:33:00+00:00",
        "comments_count": [
            "Meiyim",
            "jtyoui",
            "Meiyim",
            "liruishaer",
            "jtyoui",
            "liruishaer",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 466,
        "title": "Cuda error(77), an illegal memory access was encountered.",
        "body": "`140it [03:24,  1.25s/it]train loss 0.00011\r\n150it [03:39,  1.63s/it]train loss 0.00007\r\n160it [03:55,  1.49s/it]train loss 0.00009\r\n166it [04:03,  1.33s/it]Traceback (most recent call last):\r\n  File \"es.py\", line 85, in <module>\r\n    opt.minimize(loss)\r\n  File \"</usr/local/lib/python3.6/site-packages/decorator.py:decorator-gen-65>\", line 2, in minimize\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/dygraph/base.py\", line 273, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 837, in minimize\r\n    loss, startup_program=startup_program, params_grads=params_grads)\r\n  File \"/usr/local/lib/python3.6/site-packages/ernie/optimization.py\", line 158, in apply_optimize\r\n    L.assign(p * (1. - self.wd * self.current_step_lr()), p)\r\n  File \"</usr/local/lib/python3.6/site-packages/decorator.py:decorator-gen-62>\", line 2, in current_step_lr\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 216, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/optimizer.py\", line 349, in current_step_lr\r\n    if current_lr:\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 215, in __bool__\r\n    return self.__nonzero__()\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 212, in __nonzero__\r\n    return bool(np.all(tensor.__array__() > 0))\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<char const*>(char const*&&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int)\r\n2   paddle::platform::GpuMemcpySync(void*, void const*, unsigned long, cudaMemcpyKind)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nExternalError:  Cuda error(77), an illegal memory access was encountered.\r\n  [Advise: The device encountered a load or store instruction on an invalid memory address. This leaves the process in an inconsistentstate and any further CUDA work will return the same error. To continue using CUDA, the process must be terminated and relaunched. ] at (/paddle/paddle/fluid/platform/gpu_info.cc:281)\r\n\r\n`",
        "state": "closed",
        "user": "jtyoui",
        "closed_by": "Meiyim",
        "created_at": "2020-05-26T01:11:43+00:00",
        "updated_at": "2021-03-23T19:29:19+00:00",
        "closed_at": "2020-05-30T15:30:23+00:00",
        "comments_count": [
            "Meiyim",
            "nvliajia",
            "Meiyim",
            "nvliajia",
            "Meiyim",
            "nvliajia",
            "paulpaul91"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 470,
        "title": "蒸馏Demo无法运行。",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/develop/distill/README.md\r\n数据的结构和代码中指定的结构对应不上，无法运行。",
        "state": "closed",
        "user": "gongweibao",
        "closed_by": "Meiyim",
        "created_at": "2020-05-27T11:34:10+00:00",
        "updated_at": "2020-05-27T15:36:45+00:00",
        "closed_at": "2020-05-27T15:36:45+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 469,
        "title": "ERNIE-GEN 什么时候发布中文版预训练模型？",
        "body": "",
        "state": "closed",
        "user": "jiezouguihuafu",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-27T01:17:26+00:00",
        "updated_at": "2020-08-16T09:03:05+00:00",
        "closed_at": "2020-08-16T09:03:05+00:00",
        "comments_count": [
            "dingsiyu",
            "Meiyim",
            "jiezouguihuafu",
            "Meiyim",
            "bojone",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "ERNIE2.0 wanted"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 468,
        "title": "通过累计损失模拟大batch",
        "body": "paddle有没有类似pytorch中，通过累计损失，一定step之后再反向传播，从而达到模拟大batch size的方法？",
        "state": "closed",
        "user": "luckysheep861",
        "closed_by": "luckysheep861",
        "created_at": "2020-05-26T17:06:09+00:00",
        "updated_at": "2020-05-27T12:06:58+00:00",
        "closed_at": "2020-05-27T12:06:58+00:00",
        "comments_count": [
            "GT-ZhangAcer",
            "luckysheep861"
        ],
        "labels": [
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 474,
        "title": "文本相似度计算结果不符合预期",
        "body": "使用官方的“快速上手”代码，得到几组词的向量\r\n```python\r\nimport numpy as np\r\nimport paddle.fluid.dygraph as D\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\nfrom ernie.modeling_ernie import ErnieModel\r\n\r\nD.guard().__enter__() # activate paddle `dygrpah` mode\r\n\r\nmodel = ErnieModel.from_pretrained('ernie-1.0')    # Try to get pretrained model from server, make sure you have network connection\r\ntokenizer = ErnieTokenizer.from_pretrained('ernie-1.0')\r\n\r\nids, _ = tokenizer.encode('hello world')\r\nids = D.to_variable(np.expand_dims(ids, 0))  # insert extra `batch` dimension\r\npooled, encoded = model(ids)                 # eager execution\r\nprint(pooled.numpy())                        # convert  results to numpy\r\n```\r\n我根据词向量计算余弦相似度，缺没得到预期的值：\r\n```python3\r\ndef cos_sim(vector_a, vector_b):\r\n    \"\"\"计算两组向量的余弦值\"\"\"\r\n    vector_a = np.mat(vector_a)\r\n    vector_b = np.mat(vector_b)\r\n    num = float(vector_a * vector_b.T)\r\n    denom = np.linalg.norm(vector_a) * np.linalg.norm(vector_b)\r\n    cos = num / denom\r\n    sim = 0.5 + 0.5 * cos\r\n    return sim\r\n\r\ndef calc_cos_sim(ws):\r\n    res = list()\r\n    for w in ws:\r\n        ids, _ = tokenizer.encode(w)\r\n        ids = D.to_variable(np.expand_dims(ids, 0))\r\n        pooled, encoded = model(ids)\r\n        res.append(list(pooled.numpy()[0]))\r\n    return cos_sim(res[0], res[1])\r\n\r\n\r\nif __name__ == '__main__':\r\n    # activate paddle `dygrpah` mode\r\n    with D.guard():\r\n        model = ErnieModel.from_pretrained('ernie-1.0')\r\n        tokenizer = ErnieTokenizer.from_pretrained('ernie-1.0')\r\n        pairs = [('法师', '律师'), ('医院', '法院'), ('展架', '展柜')]\r\n        for p in pairs:\r\n            print(f'{p} {calc_cos_sim(p)}')\r\n```\r\nA、('法师', '律师') 0.9383215354753538\r\nB、('医院', '法院') 0.978857960588891\r\nC、('展架', '展柜') 0.9633232497133388\r\n\r\n实际上，C组应该更接近1，而A、B更远离1。\r\n\r\n另：每次计算出来的值也不完全相同，有小的波动，如我再次运行：\r\nA、('法师', '律师') 0.956882570176395\r\nB、('医院', '法院') 0.9377995660564593\r\nC、('展架', '展柜') 0.9481575568652009",
        "state": "closed",
        "user": "ihejunqiu",
        "closed_by": "ihejunqiu",
        "created_at": "2020-05-29T08:25:26+00:00",
        "updated_at": "2020-06-08T02:29:09+00:00",
        "closed_at": "2020-06-08T02:29:09+00:00",
        "comments_count": [
            "Meiyim",
            "ihejunqiu"
        ],
        "labels": [
            "update readme"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 475,
        "title": "demo中自然语言推断XNLI的结果没有达到宣称值",
        "body": "自然语言推断任务中， ERNIE-base 在XNLI 数据集上的宣称精度是79.7%， 但是跑实际demo只有76.6%（中间过程中的最好精度是79.0%）， 用的pretrain_model为ERNIE 1.0 Base 中文。 脚本为demo/finetune_classifier_dygraph.py。请问要达到宣称精度需要修改demo中的参数吗？",
        "state": "closed",
        "user": "leo038",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-29T11:17:14+00:00",
        "updated_at": "2020-08-08T04:22:38+00:00",
        "closed_at": "2020-08-08T04:22:38+00:00",
        "comments_count": [
            "Meiyim",
            "Meiyim",
            "leo038",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 477,
        "title": "机器阅读理解任务demo报错AttributeError: 'NoneType' object has no attribute 'nranks'",
        "body": "执行脚本：\r\npython3 ./ERNIE-develop/demo/finetune_mrc_dygraph.py --from_pretrained ./pretrain_model/    --train_file  ./cmrc2018/train/train.json  --dev_file  ./cmrc2018/dev/dev.json\r\n\r\n报错信息：\r\nTraceback (most recent call last):\r\n  File \"./ERNIE-develop/demo/finetune_mrc_dygraph.py\", line 169, in <module>\r\n    train(model, train_dataset, dev_dataset, dev_examples, dev_features, tokenizer, args)\r\n  File \"./ERNIE-develop/demo/finetune_mrc_dygraph.py\", line 97, in train\r\n    scaled_loss = model.scale_loss(loss)\r\n  File \"/home/xxx/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/parallel.py\", line 333, in scale_loss\r\n    if not self._is_data_parallel_mode():\r\n  File \"/home/xxx/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/parallel.py\", line 457, in _is_data_parallel_mode\r\n    return self._strategy.nranks > 1\r\nAttributeError: 'NoneType' object has no attribute 'nranks'\r\n",
        "state": "closed",
        "user": "leo038",
        "closed_by": "stale[bot]",
        "created_at": "2020-05-30T08:36:52+00:00",
        "updated_at": "2020-08-08T04:22:39+00:00",
        "closed_at": "2020-08-08T04:22:39+00:00",
        "comments_count": [
            "Meiyim",
            "leo038",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "update readme"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 493,
        "title": "finetune_classifier.py 报错",
        "body": "环境\r\npaddle1.8\r\nCUDA 9.0\r\nPython 3.6\r\n\r\n信息\r\nfeature_pb2.py line22 报错\r\nTypeError：Couldn’t parse file content!",
        "state": "closed",
        "user": "hnliu-git",
        "closed_by": "hnliu-git",
        "created_at": "2020-06-12T03:01:31+00:00",
        "updated_at": "2020-06-12T03:11:04+00:00",
        "closed_at": "2020-06-12T03:11:04+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 476,
        "title": "demo中情感分析的用例报错",
        "body": "运行脚本：\r\n\r\n python3 ./ERNIE-develop/demo/finetune_sentiment_analysis_dygraph.py --from_pretrained ./pretrain_model/    --data_dir ./chnsenticorp/   --max_steps=10000\r\n\r\n报错信息：\r\nTraceback (most recent call last):\r\n  File \"./ERNIE-develop/demo/finetune_sentiment_analysis_dygraph.py\", line 119, in <module>\r\n    for step, d in enumerate(tqdm(dev_ds.start(), desc='evaluating %d' % epoch)):\r\n  File \"/home/xxx/ERNIE/ERNIE-develop/propeller/paddle/data/functional.py\", line 77, in start\r\n    r.decorate_batch_generator(_gen, places=places)\r\n  File \"/home/xxx/.local/lib/python3.6/site-packages/paddle/fluid/reader.py\", line 1678, in decorate_batch_generator\r\n    self._loader.set_batch_generator(reader, places)\r\n  File \"/home/xxx/.local/lib/python3.6/site-packages/paddle/fluid/reader.py\", line 947, in set_batch_generator\r\n    \"Number of places must be 1 in dygraph mode\"\r\nAssertionError: Number of places must be 1 in dygraph mode\r\n",
        "state": "closed",
        "user": "leo038",
        "closed_by": "Meiyim",
        "created_at": "2020-05-29T11:34:20+00:00",
        "updated_at": "2020-05-30T15:30:24+00:00",
        "closed_at": "2020-05-30T15:30:24+00:00",
        "comments_count": [
            "Meiyim",
            "leo038"
        ],
        "labels": [
            "update readme"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 483,
        "title": "make pretrain data 找不到module paddel",
        "body": "我在运行 make pretrain data 的时候，显示一直找不到 Paddle 这是怎么回事呢？ ModuleNotFoundError: No module named 'paddle'",
        "state": "closed",
        "user": "BinzhuWang",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-02T03:55:09+00:00",
        "updated_at": "2020-08-21T15:13:04+00:00",
        "closed_at": "2020-08-21T15:13:04+00:00",
        "comments_count": [
            "GT-ZhangAcer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 479,
        "title": "ResourceExhaustedError：Out of memory error on GPU 0.",
        "body": "错误信息：\r\nRuntimeError: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\nWindows not support stack backtrace yet.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nResourceExhaustedError: \r\n\r\nOut of memory error on GPU 0. Cannot allocate 25.000244MB memory on GPU 0, available memory is only 2.349999MB.\r\n\r\nPlease check whether there is any other process using GPU 0.\r\n1. If yes, please stop them, or start PaddlePaddle on another GPU.\r\n2. If no, please try one of the following suggestions:\r\n   1) Decrease the batch size of your model.\r\n   2) FLAGS_fraction_of_gpu_memory_to_use is 0.50 now, please set it to a higher value but less than 1.0.\r\n      The command is `export FLAGS_fraction_of_gpu_memory_to_use=xxx`.\r\n\r\n at (D:\\1.7.1\\paddle\\paddle\\fluid\\memory\\detail\\system_allocator.cc:150)\r\n\r\n\r\n部分代码（基本是按照教程写的）：\r\n    for j in range(len(train_data) // BATCH):\r\n        feature, label = get_batch_data(train_data, j)\r\n        loss, _ = ernie(feature, labels=label) # ernie模型的返回值包含(loss, logits)；其中logits目前暂时不需要使用\r\n        loss.backward()\r\n        optimizer.minimize(loss)\r\n        ernie.clear_gradients()\r\n        if j % 10 == 0:\r\n            print('train %d: loss %.5f' % (j, loss.numpy()))\r\n        # evaluate\r\n        if j % 100 == 0:\r\n            all_pred, all_label = [], []\r\n            with D.base._switch_tracer_mode_guard_(is_train=False): # 在这个with域内ernie不会进行梯度计算；\r\n                ernie.eval() # 控制模型进入eval模式，这将会关闭所有的dropout；\r\n                for j in range(len(test_data) // BATCH):\r\n                    feature, label = get_batch_data(test_data, j)\r\n                    loss, logits = ernie(feature, labels=label)\r\n                    all_pred.extend(L.argmax(logits, -1).numpy())\r\n                    all_label.extend(label.numpy())\r\n                ernie.train()\r\n            f1 = f1_score(all_label, all_pred, average='macro')\r\n            acc = (np.array(all_label) == np.array(all_pred)).astype(np.float32).mean()\r\n            print('acc %.5f' % acc)\r\n调试的啥时候出错的地方是loss, _ = ernie(feature, labels=label) 这一行\r\n在代码前面加了\r\nos.environ['FLAGS_fraction_of_gpu_memory_to_use'] = \"0.9\"\r\nos.environ[\"FLAGS_eager_delete_tensor_gb\"] = \"0\"\r\n并且把batch调成1依然还是出现同样的错误，希望各位大佬不吝赐教，感激感激！",
        "state": "closed",
        "user": "Firework471",
        "closed_by": "Firework471",
        "created_at": "2020-05-31T15:01:05+00:00",
        "updated_at": "2020-06-04T07:38:16+00:00",
        "closed_at": "2020-06-04T07:38:16+00:00",
        "comments_count": [
            "oyxuan-11",
            "Firework471",
            "Firework471",
            "Meiyim",
            "Firework471",
            "Meiyim",
            "Firework471",
            "Firework471"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 486,
        "title": "使用ernie1.0做ernie-gen的时候[ATTN]标签怎么处理啊",
        "body": "使用ernie1.0做ernie-gen的时候[ATTN]标签怎么处理啊，替换吗？直接用会报错",
        "state": "closed",
        "user": "cedar33",
        "closed_by": "cedar33",
        "created_at": "2020-06-09T16:33:42+00:00",
        "updated_at": "2020-06-10T02:47:52+00:00",
        "closed_at": "2020-06-10T02:47:52+00:00",
        "comments_count": [
            "cedar33"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 492,
        "title": "README中提供的示例inference_model不可用",
        "body": "https://github.com/PaddlePaddle/ERNIE github给的“你也可从此处下载一个预先制作好的ernie-1.0 base模型的 inference_model”，https://ernie.bj.bcebos.com/ernie1.0_zh_inference_model.tar.gz 下下来的模型，使用时报错  \r\n\r\nCannot open file pretrain/inf_model//__model__\r\n\r\n![image](https://user-images.githubusercontent.com/11084132/84354086-dc9e0400-abf2-11ea-9fd7-f33e8bcb0381.png)\r\n",
        "state": "closed",
        "user": "Ramlinbird",
        "closed_by": "Ramlinbird",
        "created_at": "2020-06-11T06:50:24+00:00",
        "updated_at": "2020-06-15T02:46:31+00:00",
        "closed_at": "2020-06-15T02:46:31+00:00",
        "comments_count": [
            "Meiyim",
            "Ramlinbird"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 494,
        "title": "ernie-gen使用时，用cnn语料做生成式摘要的的模型启动`run_seq2seq.sh`报错",
        "body": "ernie-gen使用时，用cnn生成式摘要的的模型启动`run_seq2seq.sh`报错\r\n```\r\nInvalidArgumentError: Broadcast dimension mismatch. Operands could not be broadcast together with the shape of X = [8, 20, 768] and the shape of Y = [0, 20, 768]. Received [8] in X is not equal to [0] in Y.\r\n```\r\n报错位置代码\r\n```python\r\n    def _gen_input(self, emb_ids, input_mask):\r\n        emb_out = None\r\n        for emb_name, emb_id in emb_ids.items():\r\n            emb = fluid.layers.embedding(\r\n                input=emb_id,\r\n                size=[self._emb_vocab_size[emb_name], self._emb_size],\r\n                dtype=self._emb_dtype,\r\n                param_attr=fluid.ParamAttr(\r\n                    name=emb_name, initializer=self._param_initializer))\r\n            logging.info(\"************************_gen_input_emb:\"+emb_name+\"******************************\")\r\n            logging.info(emb.shape)\r\n            if emb_out:\r\n                logging.info(emb_out.shape)\r\n            emb_out = emb_out + emb if emb_out else emb\r\n```\r\n文件\r\n`ernie-gen/model/ernie.py`",
        "state": "closed",
        "user": "cedar33",
        "closed_by": "cedar33",
        "created_at": "2020-06-12T04:04:12+00:00",
        "updated_at": "2020-06-12T14:03:20+00:00",
        "closed_at": "2020-06-12T14:03:20+00:00",
        "comments_count": [
            "cedar33"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 496,
        "title": "动态图特征抽取器，静态图模型，运行时cuda初始化报错",
        "body": "请教一个问题，想用ernie_tiny动态图作为一个输入处理器，得到句子的向量表达，作为特征输入到后面的模型中，如下图\r\n![image](https://user-images.githubusercontent.com/11084132/84613556-05c1db80-aef6-11ea-91bb-492d3480558c.png)\r\n运行时报错\r\n![image](https://user-images.githubusercontent.com/11084132/84613575-1c683280-aef6-11ea-9fdc-335025dbcb79.png)\r\n请问这个如何解决呢？谢谢～\r\n",
        "state": "closed",
        "user": "Ramlinbird",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-15T02:51:23+00:00",
        "updated_at": "2020-08-21T15:13:05+00:00",
        "closed_at": "2020-08-21T15:13:05+00:00",
        "comments_count": [
            "GT-ZhangAcer",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 497,
        "title": "ernie动态图，按照说明运行微调示例，报错KeyError: b'entailment\\r'",
        "body": "使用 动态图 模型进行finetune:\r\n```\r\npython3 ./demo/finetune_classifier_dygraph.py \\\r\n       --from_pretrained ernie-1.0 \\\r\n       --data_dir ./data/xnli  \r\n```\r\n结果报错\r\n```\r\ntraining: 0it [00:00, ?it/s][ERROR] 2020-06-15 15:14:58,971 [functional.py:   69]:      b'entailment\\r'\r\nTraceback (most recent call last):\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\paddle\\data\\functional.py\", line 66, in _gen\r\n    for idx, i in enumerate(self.generator()):\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 240, in _gen\r\n    buf = list(itertools.islice(iterable, batch_size))\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 135, in _gen\r\n    for i in dataset():\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\data\\functional.py\", line 139, in _gen\r\n    yield fn(i)\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\paddle\\data\\feature_column.py\", line 371, in _parse_txt_file\r\n    for feature, column in zip(features, self._columns)\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\paddle\\data\\feature_column.py\", line 371, in <listcomp>\r\n    for feature, column in zip(features, self._columns)\r\n  File \"D:\\project\\nlp\\ERNIE\\demo\\propeller\\paddle\\data\\feature_column.py\", line 127, in raw_to_instance\r\n    ids = self.vocab[raw]\r\nKeyError: b'entailment\\r'\r\n2020-06-15 15:14:58,972-WARNING: DygraphDataLoader reader thread raised an exception.\r\ntraining: 0it [00:00, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"./demo/finetune_classifier_dygraph.py\", line 119, in <module>\r\n    for step, d in enumerate(tqdm(train_ds.start(place), desc='training')):\r\n  File \"C:\\Users\\LERRY\\Anaconda3\\envs\\ernie\\lib\\site-packages\\tqdm\\std.py\", line 1129, in __iter__\r\n    for obj in iterable:\r\n  File \"C:\\Users\\LERRY\\Anaconda3\\envs\\ernie\\lib\\site-packages\\paddle\\fluid\\reader.py\", line 804, in __next__\r\n    return self._reader.read_next_var_list()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\nWindows not support stack backtrace yet.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (D:\\1.8.1\\paddle\\paddle/fluid/operators/reader/blocking_queue.h:141)\r\n\r\n```",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-15T07:19:21+00:00",
        "updated_at": "2020-08-22T09:00:57+00:00",
        "closed_at": "2020-08-22T09:00:57+00:00",
        "comments_count": [
            "Meiyim",
            "lerry-lee",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 501,
        "title": "使用finetune_sentiment_analysis_dygraph.py训练模型报错",
        "body": "用4张2080Ti训练模型报错\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Place CUDAPlace(0) is not supported, Please check that your paddle compiles with WITH_GPU option or check that your train process hold the correct gpu_id if you use Executor at (/paddle/paddle/fluid/platform/device_context.cc:67)\r\n\r\n还有一个报错信息是AttributeError: 'Popen' object has no attribute 'join'",
        "state": "closed",
        "user": "dmsong-star",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-19T07:19:47+00:00",
        "updated_at": "2020-09-03T15:26:06+00:00",
        "closed_at": "2020-09-03T15:26:06+00:00",
        "comments_count": [
            "tianxin1860",
            "dmsong-star",
            "tianxin1860",
            "dmsong-star",
            "tianxin1860",
            "dmsong-star",
            "haozhe-an",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 500,
        "title": "一个log的小问题，控制台日志输出两次",
        "body": "使用的是ERNIE静态图，如下，在训练/推理时，日志输出会出现2次，但两次的格式不同\r\n```\r\n2020-06-19 02:25:45,347-INFO: attention_probs_dropout_prob: 0.1\r\n[INFO] 2020-06-19 02:25:45,347 [    ernie.py:   52]:\tattention_probs_dropout_prob: 0.1\r\n2020-06-19 02:25:45,347-INFO: hidden_act: relu\r\n[INFO] 2020-06-19 02:25:45,347 [    ernie.py:   52]:\thidden_act: relu\r\n2020-06-19 02:25:45,347-INFO: hidden_dropout_prob: 0.1\r\n[INFO] 2020-06-19 02:25:45,347 [    ernie.py:   52]:\thidden_dropout_prob: 0.1\r\n2020-06-19 02:25:45,347-INFO: hidden_size: 768\r\n[INFO] 2020-06-19 02:25:45,347 [    ernie.py:   52]:\thidden_size: 768\r\n2020-06-19 02:25:45,347-INFO: initializer_range: 0.02\r\n[INFO] 2020-06-19 02:25:45,347 [    ernie.py:   52]:\tinitializer_range: 0.02\r\n2020-06-19 02:25:45,348-INFO: max_position_embeddings: 513\r\n[INFO] 2020-06-19 02:25:45,348 [    ernie.py:   52]:\tmax_position_embeddings: 513\r\n2020-06-19 02:25:45,348-INFO: num_attention_heads: 12\r\n[INFO] 2020-06-19 02:25:45,348 [    ernie.py:   52]:\tnum_attention_heads: 12\r\n2020-06-19 02:25:45,348-INFO: num_hidden_layers: 12\r\n[INFO] 2020-06-19 02:25:45,348 [    ernie.py:   52]:\tnum_hidden_layers: 12\r\n2020-06-19 02:25:45,348-INFO: type_vocab_size: 2\r\n[INFO] 2020-06-19 02:25:45,348 [    ernie.py:   52]:\ttype_vocab_size: 2\r\n2020-06-19 02:25:45,348-INFO: vocab_size: 18000\r\n[INFO] 2020-06-19 02:25:45,348 [    ernie.py:   52]:\tvocab_size: 18000\r\n```\r\n我检查了log的用法，似乎没有问题，那么请问这是什么原因呢？",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "Meiyim",
        "created_at": "2020-06-19T02:33:33+00:00",
        "updated_at": "2020-06-29T06:10:36+00:00",
        "closed_at": "2020-06-29T06:10:36+00:00",
        "comments_count": [
            "Meiyim",
            "lerry-lee",
            "Meiyim",
            "lerry-lee"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 495,
        "title": "Ernie2.0用save_dygrap保存的模型，如何进行增量训练 ",
        "body": "",
        "state": "closed",
        "user": "wang91zhe",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-15T02:13:13+00:00",
        "updated_at": "2020-08-25T07:50:40+00:00",
        "closed_at": "2020-08-25T07:50:40+00:00",
        "comments_count": [
            "zhuzhf",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 498,
        "title": "ernie(dynamic)使用示例xnli语料fine_tune后，调用预测服务InferenceClient，返回结果问题",
        "body": "使用xnli微调后\r\n先启动了微调保存的inference_model，在linux上调用示例中的预测服务\r\n```\r\nfrom propeller.service.client import InferenceClient\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\n\r\nclient = InferenceClient('tcp://localhost:8881')\r\ntokenizer = ErnieTokenizer.from_pretrained('ernie-1.0')\r\nids, sids = tokenizer.encode('hello world')\r\nids = np.expand_dims(ids, 0)\r\nsids = np.expand_dims(sids, 0)\r\nresult = client(ids, sids)\r\n```\r\n返回结果为\r\n```\r\n[array([[-0.0460582 , 0.28323928, -0.00521138]], dtype=float32)]\r\n```\r\n这个numpy array代表了什么含义呢？\r\n如果我把输入改为（看了方法参数encode(text,pair)）\r\n```\r\nids, sids = tokenizer.encode('你好世界','你好中国')\r\n```\r\n结果为\r\n```\r\n[array([[-0.08907083, -0.28950262, -0.01538226]], dtype=float32)]\r\n```\r\n如果是三个类别的概率，但加和并不为1，所以返回的array的含义是什么呢？",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-16T04:14:37+00:00",
        "updated_at": "2020-08-23T02:00:55+00:00",
        "closed_at": "2020-08-23T02:00:55+00:00",
        "comments_count": [
            "Meiyim",
            "lerry-lee",
            "Meiyim",
            "lerry-lee",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 502,
        "title": "ERNIE-GEN 训练过程中评估时报错 Can't locate XML/Parser.pm in @INC ",
        "body": "![image](https://user-images.githubusercontent.com/25901705/85219773-2ea40e00-b3d9-11ea-8383-9521f71ae3b0.png)\r\n训练一个epoc后执行评估，pyrouge评估摘要结果报错，请问需要修改什么环境变量吗？用的都是开源代码默认配置。",
        "state": "closed",
        "user": "Weili-NLP",
        "closed_by": "zhanghan1992",
        "created_at": "2020-06-21T08:09:07+00:00",
        "updated_at": "2020-06-22T03:12:28+00:00",
        "closed_at": "2020-06-22T03:12:28+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 503,
        "title": "生成中文词向量",
        "body": "你好，ERNIE模型能够生成中文的词级别向量，而不是生成字级别向量么？",
        "state": "closed",
        "user": "hvuehu",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-22T03:10:31+00:00",
        "updated_at": "2020-09-08T05:20:32+00:00",
        "closed_at": "2020-09-08T05:20:32+00:00",
        "comments_count": [
            "tianxin1860",
            "hvuehu",
            "guowhite",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 504,
        "title": "ERNIE命名实体识别，sequence_unpad出错，报错error: The shape of Input(Length) should be [batch_size]",
        "body": "### 环境配置\r\n* paddle 1.8.2\r\n* CUDA 9.0\r\n* cuDNN 7.6\r\n* python 2.7.15\r\n* ernie 2.2.0\r\n* linux centos 6\r\n### 报错信息\r\n> Traceback (most recent call last):\r\n  File \"run_sequence_labeling.py\", line 375, in <module>\r\n    main(args)\r\n  File \"run_sequence_labeling.py\", line 114, in main\r\n    ernie_config=ernie_config)\r\n  File \"/home/work/lujinchao/ERNIE-2.2.0/finetune/sequence_label.py\", line 79, in create_model\r\n    lod_labels = fluid.layers.sequence_unpad(labels, seq_lens)\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/layers/sequence_lod.py\", line 1057, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 2610, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 1971, in __init__\r\n    self.desc.infer_shape(self.block.desc)\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n> C++ Call Stacks (More useful to developers):\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&&&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::SequenceUnpadOp::InferShape(paddle::framework::InferShapeContext*) const\r\n3   paddle::framework::OpDesc::InferShape(paddle::framework::BlockDesc const&) const\r\n\r\n> Python Call Stacks (More useful to users):\r\nFile \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/framework.py\", line 2610, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/work/lujinchao/python/lib/python2.7/site-packages/paddle/fluid/layers/sequence_lod.py\", line 1057, in sequence_unpad\r\n    outputs={'Out': out})\r\n  File \"/home/work/lujinchao/ERNIE-2.2.0/finetune/sequence_label.py\", line 79, in create_model\r\n    lod_labels = fluid.layers.sequence_unpad(labels, seq_lens)\r\n  File \"run_sequence_labeling.py\", line 114, in main\r\n    ernie_config=ernie_config)\r\n  File \"run_sequence_labeling.py\", line 375, in <module>\r\n    main(args)\r\n\r\n> Error Message Summary:\r\nInvalidArgumentError: The shape of Input(Length) should be [batch_size]. But received (2)\r\n  [Hint: Expected len_dims.size() == 1, but received len_dims.size():2 != 1:1.] at (/paddle/paddle/fluid/operators/sequence_ops/sequence_unpad_op.cc:52)\r\n  [operator < sequence_unpad > error]",
        "state": "closed",
        "user": "lujinchao",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-22T11:07:17+00:00",
        "updated_at": "2020-09-04T06:56:06+00:00",
        "closed_at": "2020-09-04T06:56:06+00:00",
        "comments_count": [
            "tianxin1860",
            "lujinchao",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 505,
        "title": "ERNIE输入，数据中词、实体等切分问题",
        "body": "查阅资料了解到，ERNIE预训练的输入，利用内部词法分析工具对句对数据进行字、词、实体等不同粒度的切分，然后基于 tokenization.py 中的 CharTokenizer 对切分后的数据进行 token 化处理，得到明文的 token 序列及切分边界，然后将明文数据根据词典config/vocab.txt 映射为 id 数据，在训练过程中，根据切分边界对连续的 token 进行随机 mask 操作。\r\n有两个问题。\r\n1.  对输入数据进行字、词、实体等不同粒度的切分这一步是可以自定义的吗？也就是说，针对自己的数据切分一些特定的词、实体等；\r\n2. 微调时有没有mask机制？比如文本分类任务，是直接将输入数据送入ERNIE得到表示向量然后计算softmax_cross_entropy，还是ERNIE内部也会进行随机mask？",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-22T13:25:17+00:00",
        "updated_at": "2020-09-03T03:38:16+00:00",
        "closed_at": "2020-09-03T03:38:16+00:00",
        "comments_count": [
            "tianxin1860",
            "lerry-lee",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 508,
        "title": "ERNIE results should be compared to ProphetNet in the README",
        "body": "ProphetNet (https://github.com/microsoft/ProphetNet) gets better results than some of the models you compare ERNIE to. \r\nMaybe you should mention these results in the README.",
        "state": "closed",
        "user": "weissercn",
        "closed_by": "stale[bot]",
        "created_at": "2020-06-30T22:02:53+00:00",
        "updated_at": "2020-09-05T22:50:04+00:00",
        "closed_at": "2020-09-05T22:50:04+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 506,
        "title": "Pretrain Enrie-Gen",
        "body": "Hello \r\ncan you please provide the script to re-train the model from scratch ? ",
        "state": "closed",
        "user": "secsrexion",
        "closed_by": "tianxin1860",
        "created_at": "2020-06-26T10:40:38+00:00",
        "updated_at": "2020-06-28T09:47:25+00:00",
        "closed_at": "2020-06-28T09:47:25+00:00",
        "comments_count": [
            "tianxin1860"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 510,
        "title": "ernie-tiny finetune的脚本",
        "body": "请问有ernie-tiny finetune的脚本吗",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-03T06:44:28+00:00",
        "updated_at": "2020-09-11T08:24:18+00:00",
        "closed_at": "2020-09-11T08:24:18+00:00",
        "comments_count": [
            "Meiyim",
            "kennyLSN",
            "Meiyim",
            "kennyLSN",
            "Meiyim",
            "kennyLSN",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 507,
        "title": "动态图有 batch 接口吗？",
        "body": "我想要拿到一个句子的 ernie 向量表示，但是发现首页给出的接口只支持单个句子，这样的话跑起来有点慢，想问下这个支持 batch 接口吗？\r\n\r\n```python\r\nids, _ = tokenizer.encode('hello world')\r\nids = D.to_variable(np.expand_dims(ids, 0))  # insert extra `batch` dimension\r\npooled, encoded = model(ids)                 # eager execution\r\nprint(pooled.numpy())                        # convert  results to numpy\r\n```",
        "state": "closed",
        "user": "Halfish",
        "closed_by": "Halfish",
        "created_at": "2020-06-29T06:55:59+00:00",
        "updated_at": "2020-06-29T09:47:13+00:00",
        "closed_at": "2020-06-29T08:19:02+00:00",
        "comments_count": [
            "Halfish"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 511,
        "title": "Why Ernie is downloading pre-trained model from server every time?",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/9b6c6837f85ca8b232237bb9001710d820e11b95/ernie/modeling_ernie.py#L193\r\n\r\nI have a question regarding loading the pre-trained model. In this particular line, it's not checking if the pre-trained dir exist or not instead condition is directly downloading the model first with temp file dir.\r\n\r\nSuggestion :\r\n\r\nInstead of creating a tempdir, create one static dir and store the weights there later, check if the weights are there before downloading from URL.\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "monk1337",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-03T12:12:24+00:00",
        "updated_at": "2020-09-09T12:52:00+00:00",
        "closed_at": "2020-09-09T12:52:00+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 513,
        "title": "ernie-tiny 使用GPU finetune",
        "body": "用GPU finetune的时候，会报importError:libcublas.so cannot open shared object file...\r\n\r\n但是在cuda lib中是有libcublas.so.9.0的，请问这种情况该怎么做？",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-06T08:13:39+00:00",
        "updated_at": "2020-09-12T03:29:31+00:00",
        "closed_at": "2020-09-12T03:29:31+00:00",
        "comments_count": [
            "Meiyim",
            "kennyLSN",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 512,
        "title": "问题关于ERNIE句对匹配预测在run_classifier.py和infer_classifyer.py的差距",
        "body": "我有一个问题关于QQP数据集的句对匹配标注预测在ERNIE-repro上。 在同样的数据集上（QQP的dev.tsv），用infer_classifyer.py在最后的checkpoint预测出的标注与在run_classifier.py在训练完成时test生成的标注有很大的不同。而且前者（infer_classifyer）与实际ground标注的准确率很低（acc=0.6）。请问这种情况有由什么原因造成，还是infer_classifyer的应用方法不对？\r\n\r\n一下为运行infer_classifyer的命令 (MODEL_PATH是model.en.2.0, TASK_DATA_PATH是glue_data_processed/QQP)：\r\n\r\npython3 -u ernie/infer_classifyer.py \\\r\n    --ernie_config_path ${MODEL_PATH}/ernie_config.json \\\r\n    --init_checkpoint  checkpoints/step_34114/ \\\r\n    --predict_set  ${TASK_DATA_PATH}/dev.tsv \\\r\n    --vocab_path ${MODEL_PATH}/vocab.txt \\\r\n    --num_labels 2 \\\r\n    --save_inference_model_path ./saved_model\r\n\r\n",
        "state": "closed",
        "user": "kevin3567",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-03T22:50:22+00:00",
        "updated_at": "2020-09-12T03:29:30+00:00",
        "closed_at": "2020-09-12T03:29:30+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 514,
        "title": "ERNIE static graph 是否支持增量训练",
        "body": "意思是第一次在预训练模型基础上微调，以后继续在上次微调的基础上接着微调训练.\r\n直接更改`init_pretraining_params`为上次保存的checkpoints是否可以？",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-07T01:31:26+00:00",
        "updated_at": "2020-10-05T10:38:42+00:00",
        "closed_at": "2020-10-05T10:38:42+00:00",
        "comments_count": [
            "Meiyim",
            "lerry-lee",
            "lerry-lee",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 516,
        "title": "使用repro分支下的ernie-gen 报错",
        "body": "运行环境python==2.7.14  paddle-gpu=1.7.2     训练的是demo数据，预训练模型使用ernie_base_2.0英文版  错误如下\r\n![image](https://user-images.githubusercontent.com/24364049/86996923-74394700-c1df-11ea-9e18-e7c350f0c4c8.png)\r\n",
        "state": "closed",
        "user": "niantianlei",
        "closed_by": "zhanghan1992",
        "created_at": "2020-07-09T04:27:45+00:00",
        "updated_at": "2020-07-09T07:29:06+00:00",
        "closed_at": "2020-07-09T07:29:06+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": [
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 517,
        "title": "ernie-tiny 句向量",
        "body": "同一句话，用ernie-tiny 计算句向量两次，两次的向量不一样，请问这是什么原因？权重不是固化了吗",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "Meiyim",
        "created_at": "2020-07-09T06:12:24+00:00",
        "updated_at": "2020-07-10T17:30:09+00:00",
        "closed_at": "2020-07-10T17:30:09+00:00",
        "comments_count": [
            "Meiyim",
            "kennyLSN"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 515,
        "title": "when will the approach for the champion VCR datasets can be supported?",
        "body": "",
        "state": "closed",
        "user": "runzeer",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-07T13:38:50+00:00",
        "updated_at": "2020-12-01T11:37:57+00:00",
        "closed_at": "2020-12-01T11:37:57+00:00",
        "comments_count": [
            "yinweichong",
            "yinweichong",
            "TangDonnie",
            "HimariO",
            "TangDonnie",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 518,
        "title": "Fix",
        "body": "",
        "state": "closed",
        "user": "hnliu-git",
        "closed_by": "hnliu-git",
        "created_at": "2020-07-09T07:21:23+00:00",
        "updated_at": "2020-07-09T07:41:35+00:00",
        "closed_at": "2020-07-09T07:31:25+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 519,
        "title": "请问支持其他类型的预训练语言模型权重吗？",
        "body": "paddle hub支持roberta等其他模型，ernie怎么加载呢？",
        "state": "closed",
        "user": "Maybewuss",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-10T04:08:57+00:00",
        "updated_at": "2020-09-18T13:50:52+00:00",
        "closed_at": "2020-09-18T13:50:52+00:00",
        "comments_count": [
            "Meiyim",
            "Maybewuss",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 521,
        "title": "ernie-tiny的run_classifier",
        "body": "ernie-tiny没有提供专门的run_classifier.py，可以和之前的base版本复用吗",
        "state": "closed",
        "user": "kennyLSN",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-13T01:24:18+00:00",
        "updated_at": "2020-09-18T07:45:11+00:00",
        "closed_at": "2020-09-18T07:45:11+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 520,
        "title": "NER recognition",
        "body": "Hi \r\n I was getting assertion error while using ernie on my own data .I was able to run it for MSRA NER data\r\ni did the pre processing on my text of removing null values converting it to utf-8 and saving it as tsv file\r\n\r\n warnings.warn(\"Caution! 'set_gradient_clip' is not recommended \"\r\n[INFO] 2020-07-11 06:44:08,114 [     init.py:   88]:\tLoad pretraining parameters from /axp/rim/emvgml/dev/Vishesh/ernie/ernie_gen_large/params.\r\nTraceback (most recent call last):\r\n  File \"/axp/rim/emvgml/dev/Vishesh/ernie/ERNIE-repro/ernie/reader/task_reader.py\", line 270, in f\r\n    for i in wrapper():\r\n  File \"/axp/rim/emvgml/dev/Vishesh/ernie/ERNIE-repro/ernie/reader/task_reader.py\", line 261, in wrapper\r\n    examples, batch_size, phase=phase):\r\n  File \"/axp/rim/emvgml/dev/Vishesh/ernie/ERNIE-repro/ernie/reader/task_reader.py\", line 223, in _prepare_batch_data\r\n    self.tokenizer)\r\n  File \"/axp/rim/emvgml/dev/Vishesh/ernie/ERNIE-repro/ernie/reader/task_reader.py\", line 403, in _convert_example_to_record\r\n    tokens, labels = self._reseg_token_label(tokens, labels, tokenizer)\r\n  File \"/axp/rim/emvgml/dev/Vishesh/ernie/ERNIE-repro/ernie/reader/task_reader.py\", line 397, in _reseg_token_label\r\n    assert len(ret_tokens) == len(ret_labels)\r\nAssertionError\r\n/adshome/vgupt137/.local/lib/python3.6/site-packages/paddle/fluid/executor.py:1070: UserWarning: The following exception is not an EOF exception.\r\n  \"The following exception is not an EOF exception.\")\r\n",
        "state": "closed",
        "user": "sasuke96",
        "closed_by": "Meiyim",
        "created_at": "2020-07-11T13:54:38+00:00",
        "updated_at": "2020-07-15T09:35:29+00:00",
        "closed_at": "2020-07-15T09:35:29+00:00",
        "comments_count": [
            "Meiyim",
            "sasuke96",
            "Meiyim",
            "sasuke96"
        ],
        "labels": [
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 523,
        "title": "VCR任务的代码",
        "body": "您好，请问什么时候可以公布VCR任务的代码和预训练模型？\r\n谢谢您",
        "state": "closed",
        "user": "Frankszc",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-16T08:30:29+00:00",
        "updated_at": "2020-12-01T07:52:44+00:00",
        "closed_at": "2020-12-01T07:52:44+00:00",
        "comments_count": [
            "yinweichong",
            "Frankszc",
            "yinweichong",
            "TangDonnie",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 524,
        "title": "Readme中dbqa下载的数据是空的",
        "body": "readme给出的[dbqa数据集](https://ernie-github.cdn.bcebos.com/data-dbqa.tar.gz)里面啥也没有",
        "state": "closed",
        "user": "wangxicoding",
        "closed_by": "wangxicoding",
        "created_at": "2020-07-20T13:40:28+00:00",
        "updated_at": "2020-07-30T02:20:19+00:00",
        "closed_at": "2020-07-30T02:20:19+00:00",
        "comments_count": [
            "Meiyim",
            "wangxicoding",
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 525,
        "title": "ERNIE_GEN 使用fp16混合精度训练报错 InvalidArgumentError: Tensor holds the wrong type, it holds float, but desires to be ::paddle::platform::float16.",
        "body": "CUDA：10.1，cudnn：7.6，V100 32g\r\n使用paddlepaddle1.7.2和paddlepaddle1.8.3都报如下错误，请问什么原因？\r\n\r\n\r\n2429 Python Call Stacks (More useful to users):\r\n2430 ------------------------------------------\r\n2431   File \"paddle1.7_py3.6/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 2525, in append_op\r\n2432     attrs=kwargs.get(\"attrs\", None))\r\n2433   File \"paddle1.7_py3.6/lib/python3.6/site-packages/paddle/fluid/layers/math_op_patch.py\", line 243, in _\r\n     _impl__\r\n2434     attrs={'axis': axis})\r\n2435   File \"model/optimization.py\", line 1\r\n     38, in optimization\r\n2436     param.name] * weight_decay * scheduled_lr\r\n2437   File \"run_seq2seq.py\", line 152, in main\r\n2438     epsilon=args.epsilon)\r\n2439   File \"run_seq2seq.py\", line 355, in <module>\r\n2440     main(args)\r\n2441 \r\n2442 ----------------------\r\n2443 Error Message Summary:\r\n2444 ----------------------\r\n2445 InvalidArgumentError: Tensor holds the wrong type, it holds float, but desires to be ::paddle::platform::float16.\r\n2446   [Hint: Expected valid == true, but received valid:0 != true:1.] at (/paddle/paddle/fluid/framework/tensor_impl.h:33)\r\n2447   [operator < elementwise_mul > error]",
        "state": "closed",
        "user": "Weili-NLP",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-25T12:59:35+00:00",
        "updated_at": "2020-10-03T13:48:01+00:00",
        "closed_at": "2020-10-03T13:48:01+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 533,
        "title": "替换保存接口和目标不一样",
        "body": "替换保存接口后保存的是动态图检测点，和保存推理模型的目标不一致",
        "state": "closed",
        "user": "hello-web",
        "closed_by": "hello-web",
        "created_at": "2020-07-31T04:01:04+00:00",
        "updated_at": "2020-07-31T04:20:42+00:00",
        "closed_at": "2020-07-31T04:20:42+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 526,
        "title": "Ernie1.0 how to use 2 gpu not 8 gpu.",
        "body": "When I change number of GPUs from 8 to 2, in log it shows an error below.\r\n\r\nserver not ready,  wait 3 second to retry...\r\n\r\nCould you give me some suggestions about this error? Many thanks.",
        "state": "closed",
        "user": "CuiMingyu",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-25T13:28:37+00:00",
        "updated_at": "2020-10-03T13:48:02+00:00",
        "closed_at": "2020-10-03T13:48:02+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 528,
        "title": "请问如何给ernie加入新的词呢？",
        "body": "",
        "state": "closed",
        "user": "wangleiai",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-27T06:52:17+00:00",
        "updated_at": "2020-10-04T04:38:28+00:00",
        "closed_at": "2020-10-04T04:38:28+00:00",
        "comments_count": [
            "Meiyim",
            "wangleiai",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 531,
        "title": "ERNIE-VIL",
        "body": "什么时候开源ERNIE-VIL的代码？",
        "state": "closed",
        "user": "zizheng777",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-29T06:41:40+00:00",
        "updated_at": "2020-12-18T06:48:31+00:00",
        "closed_at": "2020-12-18T06:48:31+00:00",
        "comments_count": [
            "yinweichong",
            "zizheng777",
            "weiyx16",
            "yinweichong",
            "Pter61",
            "TangDonnie",
            "Liu0329",
            "TangDonnie",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 529,
        "title": "ernie-gen training is not running",
        "body": "After following instructions from readme, model is not training.\r\n```\r\nDevice count: 1, gpu_id: 0\r\nNum train examples: 60407\r\nMax train steps: 151017\r\nNum warmup steps: 15101\r\n```\r\nLogs stuck here and doesn't show anything else.\r\n\r\nThe only thing that I've changed was set `export CUDA_VISIBLE_DEVICES=\"0\"`",
        "state": "closed",
        "user": "alibi123",
        "closed_by": "alibi123",
        "created_at": "2020-07-28T10:03:24+00:00",
        "updated_at": "2020-07-29T04:13:40+00:00",
        "closed_at": "2020-07-29T04:13:40+00:00",
        "comments_count": [
            "Meiyim",
            "alibi123"
        ],
        "labels": [
            "repro"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 530,
        "title": "Fine-tuning ernie-gen for different languages",
        "body": "Is it possible to fine-tune ernie-gen for other languages. I've tried to use multilingual bert's vocab file and change vocab_size in model config, but if I do so, pretrained model weights cannot be loaded.\r\n\r\nDid anyone try to do that?\r\n",
        "state": "closed",
        "user": "alibi123",
        "closed_by": "stale[bot]",
        "created_at": "2020-07-29T04:16:34+00:00",
        "updated_at": "2020-11-08T16:18:45+00:00",
        "closed_at": "2020-11-08T16:18:45+00:00",
        "comments_count": [
            "Meiyim",
            "secsrexion",
            "Meiyim",
            "secsrexion",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 532,
        "title": "完型填空的例子能正确运行，导出推理模型不报错，但是推理模型为无效模型。",
        "body": "\r\n\r\n# coding=gbk\r\n\r\nimport os\r\nimport re\r\nimport time\r\nimport logging\r\nimport json\r\nfrom random import random\r\nfrom tqdm import tqdm\r\nfrom functools import reduce, partial\r\n\r\nimport numpy as np\r\nimport logging\r\nimport argparse\r\n\r\nimport paddle\r\nimport paddle.fluid as F\r\nimport paddle.fluid.dygraph as FD\r\nimport paddle.fluid.layers as L\r\n\r\nfrom propeller import log\r\nimport propeller.paddle as propeller\r\n\r\nlog.setLevel(logging.DEBUG)\r\nlogging.getLogger().setLevel(logging.DEBUG)\r\n\r\n\r\n#from model.bert import BertConfig, BertModelLayer\r\n#from ernie.modeling_ernie import ErnieModel, ErnieModelForSequenceClassification\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer, ErnieTinyTokenizer\r\nfrom ernie.optimization import AdamW, LinearDecay\r\nfrom ernie.modeling_ernie import ErnieModelForPretraining, ErnieModel\r\n\r\n\r\nif __name__ == '__main__':\r\n    parser = argparse.ArgumentParser('save_inference_model with ERNIE')\r\n    parser.add_argument('--from_pretrained', type=str, required=True, help='pretrained model directory or tag')\r\n    parser.add_argument('--inference_model_dir', type=str, default=None, help='inference model output directory')\r\n\r\n\r\n    args = parser.parse_args()\r\n\r\n    tokenizer = ErnieTokenizer.from_pretrained(args.from_pretrained)\r\n    rev_dict = {v: k for k, v in tokenizer.vocab.items()}\r\n    rev_dict[tokenizer.pad_id] = '' # replace [PAD]\r\n    rev_dict[tokenizer.sep_id] = '' # replace [PAD]\r\n    rev_dict[tokenizer.unk_id] = '' # replace [PAD]\r\n\r\n    @np.vectorize\r\n    def rev_lookup(i):\r\n        return rev_dict[i]\r\n\r\n    place = F.CPUPlace()\r\n    with FD.guard(place):\r\n        model = ErnieModelForPretraining.from_pretrained(args.from_pretrained)\r\n\r\n        src, _ = tokenizer.encode('戊戌变法，又称百日维新，是 [MASK] [MASK] [MASK] 、梁启超等维新派人士通过光绪帝进行 的一场资产阶级改良。')\r\n        print(src)\r\n        src_ids = np.expand_dims(src, 0)\r\n        src_ids = FD.to_variable(src_ids)\r\n\r\n        if args.inference_model_dir is not None:\r\n            log.debug('saving inference model')\r\n            class InferemceModel(ErnieModelForPretraining):\r\n                def __init__(self, *args, **kwargs):\r\n                    super(InferemceModel, self).__init__(*args, **kwargs)\r\n                    #del self.pooler_heads\r\n                def forward(self, src_ids, *args, **kwargs):\r\n                    #mlm_pos = kwargs.pop('mlm_pos', np.int64(3))\r\n                    pooled, encoded = ErnieModel.forward(self, src_ids, *args, **kwargs)\r\n                    encoded_2d = L.gather_nd(encoded, L.where(src_ids == 3))\r\n                    encoded_2d = self.mlm(encoded_2d)\r\n                    encoded_2d = self.mlm_ln(encoded_2d)\r\n                    logits_2d = L.matmul(encoded_2d, self.word_emb.weight, transpose_y=True) + self.mlm_bias\r\n                    return logits_2d\r\n\r\n            model.__class__ = InferemceModel \r\n            logits = model(src_ids)\r\n            _, static_model = FD.TracedLayer.trace(model, inputs=[src_ids])\r\n            static_model.save_inference_model(args.inference_model_dir)\r\n            \r\n            logits = logits.numpy()\r\n            output_ids = np.argmax(logits, -1)\r\n            seg_txt = rev_lookup(output_ids)\r\n            print(''.join(seg_txt))\r\n\r\n以上为复现代码\r\n问题：完型填空的例子能正确运行，导出推理模型不报错，但是推理模型为无效模型，不能进行正确推理。\r\n导出的模型文件参考文件名：\r\n__model__\r\ncreate_parameter_0.b_0\r\nembedding_[0-2].w_0\r\nlayer_norm_[0-25].b_0\r\nlayer_norm_[0-25].w_0\r\nlinear_[0-74].b_0\r\nlinear_[0-74].w_0",
        "state": "closed",
        "user": "hello-web",
        "closed_by": "hello-web",
        "created_at": "2020-07-29T09:30:37+00:00",
        "updated_at": "2020-08-01T08:40:25+00:00",
        "closed_at": "2020-08-01T08:40:25+00:00",
        "comments_count": [
            "kirayummy",
            "hello-web",
            "kirayummy",
            "hello-web",
            "hello-web"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 536,
        "title": "请问用aistudio进行ERNIE预训练时，进度一直不动是什么原因",
        "body": "![image](https://user-images.githubusercontent.com/59902846/89617723-52ee7800-d8bd-11ea-9c7d-5f9b151b9820.png)\r\n",
        "state": "closed",
        "user": "Cxh-001",
        "closed_by": "Cxh-001",
        "created_at": "2020-08-07T06:52:17+00:00",
        "updated_at": "2020-08-10T13:01:16+00:00",
        "closed_at": "2020-08-10T13:01:16+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 537,
        "title": "【论文复现】finetune_sentiment_analysis_dygraph.py 中出现grad_clip未定义的错误。",
        "body": "查了下optimiza.py文件中的AdamW类进行初始化时，确实没有grad_clip参数，导致出现了错误。\r\n将finetune_sentiment_analysis_dygraph.py文件中104行中的参数删除后，程序能够正常运行。\r\n也许是我有哪里没有注意到，是自己错误导致程序无法运行。",
        "state": "closed",
        "user": "maotiamo",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-09T09:14:28+00:00",
        "updated_at": "2020-10-16T02:48:05+00:00",
        "closed_at": "2020-10-16T02:48:05+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 534,
        "title": "AiStudio环境，python3.7，paddle1.8.0，ernie报错如下",
        "body": "Traceback (most recent call last):\r\n  File \"make_pretrain_data.py\", line 126, in <module>\r\n    from ernie.tokenizing_ernie import _wordpiece\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/ernie/__init__.py\", line 4, in <module>\r\n    from .ernie import *\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/ernie/ernie.py\", line 6, in <module>\r\n    from transformers import (\r\nImportError: cannot import name 'AutoModel' from 'transformers' (/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/transformers/__init__.py)",
        "state": "closed",
        "user": "hlzonWang",
        "closed_by": "hlzonWang",
        "created_at": "2020-07-31T17:58:43+00:00",
        "updated_at": "2020-08-01T04:27:32+00:00",
        "closed_at": "2020-08-01T04:27:32+00:00",
        "comments_count": [
            "Meiyim",
            "hlzonWang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 535,
        "title": "requirement incompatible",
        "body": "visualdl 2.0.0b8 has requirement six>=1.14.0, but you'll have six 1.11.0 which is incompatible.",
        "state": "closed",
        "user": "georgeliu95",
        "closed_by": "georgeliu95",
        "created_at": "2020-08-04T05:58:51+00:00",
        "updated_at": "2020-08-05T01:28:25+00:00",
        "closed_at": "2020-08-05T01:25:45+00:00",
        "comments_count": [
            "dingsiyu",
            "georgeliu95"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 539,
        "title": "您好，官方给出ERNIE预训练代码跑不通，输出一直是0it [00:00, ?it/s]，无法用其进行预训练，请问是什么原因",
        "body": "使用的是官方给出的demo目录下的pretrain/pretrain_dygraph.py 代码，无法正常输出loss。\r\n在自己的gpu服务器和aistudio都跑过，都会出现这种问题。\r\n输出一直是0it [00:00, ?it/s]\r\n环境：\r\npaddle1.7+\r\nnumpy\r\npyzmq==18.0.2\r\nsix==1.11.0\r\nsklearn==0.0\r\nsentencepiece==0.1.8\r\njieba==0.39\r\nvisualdl>=2.0.0b7",
        "state": "closed",
        "user": "Cxh-001",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-10T13:13:54+00:00",
        "updated_at": "2021-10-30T12:34:38+00:00",
        "closed_at": "2020-10-16T16:06:58+00:00",
        "comments_count": [
            "oyxuan-11",
            "Cxh-001",
            "Meiyim",
            "Cxh-001",
            "Meiyim",
            "Cxh-001",
            "stale[bot]",
            "SuixueWang",
            "SuixueWang",
            "liuli996624"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 538,
        "title": "UnicodeDecodeError: 'gbk' codec can't decode byte 0x8c in position 27: illegal multibyte sequence",
        "body": "\r\n![微信截图_20200810193842](https://user-images.githubusercontent.com/8059137/89779331-abce4280-db41-11ea-9ded-c1771a3c3d07.png)\r\n\r\n# 1.代码\r\n`import paddlehub as hub\r\n\r\nmodule = hub.Module(name=\"ernie_gen_couplet\")\r\n\r\ntest_texts = [\"大江向东我向西\"]\r\ntest_texts\r\nresults = module.generate(texts=test_texts, use_gpu=True, beam_width=5)\r\nfor result in results:\r\n    print(result)\r\n`\r\n# 2.报错\r\n`[2020-08-10 19:37:22,252] [    INFO] - Installing ernie_gen_couplet module\r\n[2020-08-10 19:37:22,578] [    INFO] - Module ernie_gen_couplet already installed in C:\\Users\\Administrator\\.paddlehub\\modules\\ernie_gen_couplet\r\nTraceback (most recent call last):\r\n  File \"C:/Users/Administrator/PycharmProjects/cbowtest/test3.py\", line 3, in <module>\r\n    module = hub.Module(name=\"ernie_gen_couplet\")\r\n  File \"C:\\Anaconda3\\envs\\paddlegpu\\lib\\site-packages\\paddlehub\\module\\module.py\", line 102, in __new__\r\n    name=name, version=version, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\paddlegpu\\lib\\site-packages\\paddlehub\\module\\module.py\", line 178, in init_with_name\r\n    return cls.init_with_directory(directory=module_dir[0], **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\paddlegpu\\lib\\site-packages\\paddlehub\\module\\module.py\", line 200, in init_with_directory\r\n    user_module = _item(directory=directory, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\paddlegpu\\lib\\site-packages\\paddlehub\\module\\module.py\", line 146, in __init__\r\n    self._initialize(**kwargs)\r\n  File \"C:\\Users\\Administrator\\.paddlehub\\modules\\ernie_gen_couplet\\module.py\", line 59, in _initialize\r\n    for i, j in enumerate(ernie_vocab_file.readlines())\r\nUnicodeDecodeError: 'gbk' codec can't decode byte 0x8c in position 27: illegal multibyte sequence`\r\n",
        "state": "closed",
        "user": "livingbody",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-10T11:38:18+00:00",
        "updated_at": "2020-10-17T04:17:46+00:00",
        "closed_at": "2020-10-17T04:17:46+00:00",
        "comments_count": [
            "livingbody",
            "kinghuin",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 541,
        "title": "为什么ernie_config的max_position_embeddings的大小为513？",
        "body": "",
        "state": "closed",
        "user": "Maybewuss",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-12T05:08:26+00:00",
        "updated_at": "2020-10-20T08:51:21+00:00",
        "closed_at": "2020-10-20T08:51:21+00:00",
        "comments_count": [
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 540,
        "title": "一个异想天开的想法",
        "body": "最近pytorch1.6发布，微软接手windows社区的维护。\r\n所以，有没有可能和transformers合作，维护一个paddle版本的transformers。。",
        "state": "closed",
        "user": "Maybewuss",
        "closed_by": "Maybewuss",
        "created_at": "2020-08-11T16:11:51+00:00",
        "updated_at": "2020-08-19T10:59:59+00:00",
        "closed_at": "2020-08-19T10:59:59+00:00",
        "comments_count": [
            "oyxuan-11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 542,
        "title": "AI studio 报错ModuleNotFoundError: No module named 'ernie.tokenizing_ernie'",
        "body": "# AI studio 报错ModuleNotFoundError: No module named 'ernie.tokenizing_ernie'\r\n如下图",
        "state": "closed",
        "user": "livingbody",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-13T11:37:37+00:00",
        "updated_at": "2020-10-19T13:36:09+00:00",
        "closed_at": "2020-10-19T13:36:09+00:00",
        "comments_count": [
            "livingbody",
            "livingbody",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 544,
        "title": "....",
        "body": "",
        "state": "closed",
        "user": "ghost",
        "closed_by": null,
        "created_at": "2020-08-19T13:46:15+00:00",
        "updated_at": "2020-08-20T07:19:37+00:00",
        "closed_at": "2020-08-20T04:55:37+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 543,
        "title": "任务中的2标签是什么意思？",
        "body": "![image](https://user-images.githubusercontent.com/40688514/90582015-49d7a200-e1ff-11ea-8493-cb3d747157a1.png)\r\n",
        "state": "closed",
        "user": "ghost",
        "closed_by": null,
        "created_at": "2020-08-19T01:37:30+00:00",
        "updated_at": "2020-08-19T02:37:13+00:00",
        "closed_at": "2020-08-19T02:36:41+00:00",
        "comments_count": [
            "Meiyim",
            "ghost"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 546,
        "title": "请问在下载model进行gzip的时候 permission denied问题该怎么解决",
        "body": "报错位置：\r\nD:\\Python\\anaconda3\\lib\\gzip.py in __init__(self, filename, mode, compresslevel, fileobj, mtime)\r\n    161             mode += 'b'\r\n    162         if fileobj is None:\r\n--> 163             fileobj = self.myfileobj = builtins.open(filename, mode or 'rb')\r\n    164         if filename is None:\r\n    165             filename = getattr(fileobj, 'name', '')\r\n\r\nPermissionError: [Errno 13] Permission denied: 'C:\\\\Windows\\\\TEMP\\\\tmp6x21utgg'",
        "state": "closed",
        "user": "zxhhh97",
        "closed_by": "Meiyim",
        "created_at": "2020-08-20T07:01:57+00:00",
        "updated_at": "2021-04-26T05:45:51+00:00",
        "closed_at": "2020-09-15T09:17:11+00:00",
        "comments_count": [
            "JKwanghao",
            "JKwanghao",
            "Meiyim",
            "kinghuin",
            "xrzlizheng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 547,
        "title": "warning: Could not find remote branch dygraph to clone.怎么解决？",
        "body": "我在执行git clone https://github.com/PaddlePaddle/ERNIE.git -b dygraph --single-branch ./ERNIE时报warning: Could not find remote branch dygraph to clone，请问如何解决？",
        "state": "closed",
        "user": "cheeryoung79",
        "closed_by": "cheeryoung79",
        "created_at": "2020-08-29T20:38:19+00:00",
        "updated_at": "2020-08-31T09:33:52+00:00",
        "closed_at": "2020-08-31T09:33:52+00:00",
        "comments_count": [
            "Meiyim",
            "cheeryoung79"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 548,
        "title": "No module named 'propeller'该怎么办",
        "body": "我在aistudio中paddle1.8下用!pip install paddle-ernie安装 ernie，执行from propeller import log时报No module named 'propeller'，该如何处理？\r\n",
        "state": "closed",
        "user": "cheeryoung79",
        "closed_by": "cheeryoung79",
        "created_at": "2020-08-29T21:18:59+00:00",
        "updated_at": "2021-05-15T14:20:13+00:00",
        "closed_at": "2020-08-30T21:01:39+00:00",
        "comments_count": [
            "cheeryoung79",
            "shynxon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 549,
        "title": "尝试CPU加载fine tune后模型预测时报Cannot use GPU错误",
        "body": "环境：\r\npaddlepaddle-gpu 1.7.2.post107\r\n\r\n相关代码：\r\nwith D.guard():\r\n    ernie = ErnieModelForSequenceClassification.from_pretrained('./pretrained_model/ernie-1.0', num_labels=len(id2class))\r\n    ernie.load_dict(D.load_dygraph(\"./models/classification_ernie\", keep_name_table=True))\r\n\r\n报错内容：\r\nW0831 10:48:07.792364 37899 init.cc:127] Compiled with WITH_GPU, but no GPU found in runtime.\r\n2020-08-31 10:48:07,817-INFO: pretrain dir ./pretrained_model/ernie-1.0 not in {'ernie-1.0': 'https://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz', 'ernie-2.0-en': 'https://ernie-github.cdn.bcebos.com/model-ernie2.0-en.1.tar.gz', 'ernie-2.0-large-en': 'https://ernie-github.cdn.bcebos.com/model-ernie2.0-large-en.1.tar.gz', 'ernie-tiny': 'https://ernie-github.cdn.bcebos.com/model-ernie_tiny.1.tar.gz', 'ernie-gen-base-en': 'https://ernie-github.cdn.bcebos.com/model-ernie-gen-base-en.1.tar.gz', 'ernie-gen-large-en': 'https://ernie-github.cdn.bcebos.com/model-ernie-gen-large-en.1.tar.gz'}, read from local\r\nE0831 10:48:07.834282 37899 pybind.cc:1223] Cannot use GPU because there is no GPU detected on your machine.",
        "state": "closed",
        "user": "vForce825",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-31T03:01:39+00:00",
        "updated_at": "2020-11-06T06:38:07+00:00",
        "closed_at": "2020-11-06T06:38:07+00:00",
        "comments_count": [
            "Meiyim",
            "vForce825",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 550,
        "title": "关于三阶段mask任务的结合问题",
        "body": "您好！就是在论文中（ernie1.0），您提到在知识结合的预训练过程中，采用了三种mask方式：基本的字符mask，实体mask，短语mask。我想问一下，具体这三种处理的方式在实际的预训练过程中是怎样结合的，另外，实体mask和短语mask还会保证每句15%的mask比例吗？下面是我的一些猜想：\r\n没有实体和短语的采用字符mask，有实体和短语的，随机mask当中的实体和短语，保证每句话不超过15%的mask比例",
        "state": "closed",
        "user": "stevenheleah",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-31T07:56:54+00:00",
        "updated_at": "2020-11-14T13:31:00+00:00",
        "closed_at": "2020-11-14T13:31:00+00:00",
        "comments_count": [
            "OleNet",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 551,
        "title": "RuntimeError: Parameter file [ ./ernie1.0_for_cmrc2019.pdparams ] not exists怎么办？",
        "body": "我在执行sd,_ = D.load_dygraph('./ernie1.0_for_cmrc2019') # 加载基于cmrc 数据集训练的阅读理解模型，时，报RuntimeError: Parameter file [ ./ernie1.0_for_cmrc2019.pdparams ] not exists怎么办？",
        "state": "closed",
        "user": "cheeryoung79",
        "closed_by": "stale[bot]",
        "created_at": "2020-08-31T20:08:07+00:00",
        "updated_at": "2020-11-08T01:26:51+00:00",
        "closed_at": "2020-11-08T01:26:51+00:00",
        "comments_count": [
            "tianxin1860",
            "cheeryoung79",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 553,
        "title": "请问，如果load下载好的预训练ernie模型文件",
        "body": "",
        "state": "closed",
        "user": "xttian",
        "closed_by": "xttian",
        "created_at": "2020-09-02T03:20:16+00:00",
        "updated_at": "2020-09-02T03:46:43+00:00",
        "closed_at": "2020-09-02T03:46:43+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 552,
        "title": "ERNIE is not using GPU?",
        "body": "I am using this code to extract the embeddings for my dataset. It's quite slow and running on CPU only. \r\nI am able to use TensorFlow and PyTorch with GPU. How I can enable GPU for ERNIE?\r\n\r\n```\r\nimport numpy as np\r\nimport paddle.fluid.dygraph as D\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\nfrom ernie.modeling_ernie import ErnieModel\r\n\r\nD.guard().__enter__() # activate paddle `dygrpah` mode\r\n\r\nmodel = ErnieModel.from_pretrained('ernie-1.0')    # Try to get pretrained model from server, make sure you have network connection\r\nmodel.eval()\r\ntokenizer = ErnieTokenizer.from_pretrained('ernie-1.0')\r\n\r\nids, _ = tokenizer.encode('hello world')\r\nids = D.to_variable(np.expand_dims(ids, 0))  # insert extra `batch` dimension\r\npooled, encoded = model(ids)                 # eager execution\r\nprint(pooled.numpy())                        # convert  results to numpy\r\n```\r\n\r\nTo verify the gpu I ran this script :\r\n\r\n`python3 -c 'import paddle.fluid as f;f.install_check.run_check()'`\r\n\r\nOutput is\r\n\r\n```\r\nRunning Verify Fluid Program ... \r\nYour Paddle Fluid works well on SINGLE GPU or CPU.\r\nW0831 20:17:07.630717 23699 build_strategy.cc:170] fusion_group is not enabled for Windows/MacOS now, and only effective when running with CUDA GPU.\r\nW0831 20:17:07.653642 23699 fuse_all_reduce_op_pass.cc:74] Find all_reduce operators: 2. To make the speed faster, some all_reduce ops are fused during training, af\r\nter fusion, the number of all_reduce ops is 1.\r\nYour Paddle Fluid works well on MUTIPLE GPU or CPU.\r\nYour Paddle Fluid is installed successfully! Let's start deep Learning with Paddle Fluid now\r\n```",
        "state": "closed",
        "user": "monk1337",
        "closed_by": "monk1337",
        "created_at": "2020-08-31T20:14:51+00:00",
        "updated_at": "2020-09-01T22:40:03+00:00",
        "closed_at": "2020-09-01T22:40:02+00:00",
        "comments_count": [
            "tianxin1860",
            "monk1337"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 554,
        "title": "We Only support load_dygraph in imperative mode, please use fluid.dygraph.guard() as context to run it in imperative Mode该怎么办？",
        "body": "我在Ask ERNIE项目中执行ernie = ErnieModelForQuestionAnswering.from_pretrained('ernie-1.0')时，报\r\nWe Only support load_dygraph in imperative mode, please use fluid.dygraph.guard() as context to run it in imperative Mode，我该怎么办？",
        "state": "closed",
        "user": "cheeryoung79",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-02T21:57:00+00:00",
        "updated_at": "2020-11-14T08:37:23+00:00",
        "closed_at": "2020-11-14T08:37:23+00:00",
        "comments_count": [
            "cheeryoung79",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 555,
        "title": " ErnieModelForSequenceClassification 存储为动态图模型，加载做预测报错",
        "body": "raceback (most recent call last):\r\n  File \"re_predict.py\", line 123, in <module>\r\n    _, pred_relation_types = re_model(FD.to_variable(val_tokens_group), FD.to_variable(val_segments_group))\r\n  File \"/home/xuetao/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 461, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/xuetao/anaconda3/envs/paddle/lib/python3.7/site-packages/ernie/modeling_ernie.py\", line 386, in forward\r\n    logits = self.classifier(hidden)\r\n  File \"/home/xuetao/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 461, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/xuetao/anaconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/dygraph/nn.py\", line 941, in forward\r\n    pre_bias = _varbase_creator(dtype=input.dtype)\r\nAttributeError: 'NoneType' object has no attribute 'dtype'\r\n",
        "state": "closed",
        "user": "xttian",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-03T11:30:28+00:00",
        "updated_at": "2020-11-14T13:31:01+00:00",
        "closed_at": "2020-11-14T13:31:01+00:00",
        "comments_count": [
            "OleNet",
            "xttian",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 558,
        "title": "请问源代码中的注释\"\"\"doc\"\"\"应该去哪里找",
        "body": "请问源代码中的注释\r\n\"\"\"doc\"\"\"\r\n应该去哪里找",
        "state": "closed",
        "user": "mofengboy",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-08T15:07:47+00:00",
        "updated_at": "2020-11-15T03:15:15+00:00",
        "closed_at": "2020-11-15T03:15:15+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 556,
        "title": "ERNIE2.0 中文的预训练模型近期会放出来吗",
        "body": "",
        "state": "closed",
        "user": "tujie-jiangye",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-07T07:51:25+00:00",
        "updated_at": "2020-11-21T12:22:32+00:00",
        "closed_at": "2020-11-21T12:22:32+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "tujie-jiangye",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "ERNIE2.0 wanted"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 557,
        "title": "产出ERNIE向量报错",
        "body": "您好，我按照release2.0分支下的 **FAQ1** 教程获取ERNIE句子向量，运行ernie_encode.py文件报错。\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/33422503/92457192-8131e100-f1f6-11ea-9409-fb70d59cc2b3.png)\r\n\r\n麻烦看看，谢谢！",
        "state": "closed",
        "user": "KaiyuanGao",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-08T09:13:31+00:00",
        "updated_at": "2020-11-21T12:22:31+00:00",
        "closed_at": "2020-11-21T12:22:31+00:00",
        "comments_count": [
            "Meiyim",
            "KaiyuanGao",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 559,
        "title": "Windows中ernie下载错误&运行时类型错误",
        "body": "复现方式\r\n```python\r\nimport paddlehub as hub\r\nmodule = hub.Module(name='ernie_gen')    # windows报gzip的错误，linux不会\r\nmodule.finetune(train_path=r'C:\\\\test.txt', use_gpu=False, max_steps=5, batch_size=1, max_encode_len=5, max_decode_len=5, log_interval=1)   # windows报tensor类型错误，linux不会\r\n```\r\n其中C:\\\\test.txt可以随便构建2行\r\n```\r\n1    a    b\r\n2    c    d\r\n```\r\n这个module的源码可见 [这里](https://github.com/PaddlePaddle/PaddleHub/blob/release/v1.8/hub_module/modules/text/text_generation/ernie_gen/module.py)\r\n基本就是本repo下示例的封装\r\n\r\ngzip的错误同 https://github.com/PaddlePaddle/ERNIE/issues/546\r\ntensor类型的错误见：\r\n![image](https://user-images.githubusercontent.com/11913168/92719304-88dbbc00-f395-11ea-80db-7fb2b4c6bfd5.png)\r\n",
        "state": "closed",
        "user": "kinghuin",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-10T10:47:43+00:00",
        "updated_at": "2020-11-22T14:03:16+00:00",
        "closed_at": "2020-11-22T14:03:16+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 561,
        "title": "动态图版本的 ERNIE-GEN 链接失效",
        "body": "说明里面有提到\r\n\r\n动态图版本的 ERNIE-GEN 代码更加简洁灵活，使用请参考 ERNIE-GEN Dygraph。\r\n\r\n但对应链接点进去，并不是  ERNIE-GEN Dygraph的代码。\r\n\r\n想请教， ERNIE-GEN Dygraph 的源代码开放吗？能否给出链接",
        "state": "closed",
        "user": "herb711",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-13T08:59:32+00:00",
        "updated_at": "2020-11-20T11:49:39+00:00",
        "closed_at": "2020-11-20T11:49:39+00:00",
        "comments_count": [
            "Meiyim",
            "herb711",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 562,
        "title": "ernie 动态图fine-tuning报错： KeyError",
        "body": "![image](https://user-images.githubusercontent.com/23031310/93079767-36650d00-f6bf-11ea-9d80-6125b001d807.png)\r\n",
        "state": "closed",
        "user": "mapingshuo",
        "closed_by": "mapingshuo",
        "created_at": "2020-09-14T11:19:36+00:00",
        "updated_at": "2020-09-15T10:19:36+00:00",
        "closed_at": "2020-09-15T10:19:36+00:00",
        "comments_count": [
            "mapingshuo",
            "Meiyim",
            "mapingshuo",
            "mapingshuo",
            "Meiyim",
            "mapingshuo"
        ],
        "labels": [
            "update readme"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 563,
        "title": "ernie 1.0的代码和提供的模型数据名称 不吻合",
        "body": "![image](https://user-images.githubusercontent.com/28981936/93856803-27e4aa00-fcec-11ea-93c9-e8167fe8509b.png)\r\nnext sentence预测的加载文件的名称是这个，但是提供的下载地址里面\r\n![image](https://user-images.githubusercontent.com/28981936/93856920-58c4df00-fcec-11ea-84c9-bfc8458734ab.png)\r\n只有next_sent_3cls_fc.b_0、next_sent_3cls_fc.w_0这两个文件",
        "state": "closed",
        "user": "dianhuasici",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-22T07:57:28+00:00",
        "updated_at": "2020-11-28T10:48:55+00:00",
        "closed_at": "2020-11-28T10:48:55+00:00",
        "comments_count": [
            "dianhuasici",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 578,
        "title": "ERNIE-GEN 迁移学习时，弹出警告信息",
        "body": "[<paddle.fluid.core_avx.VarBase object at 0x7fa04cbc3270>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca21b30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca219b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca23d70>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca23070>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04efb0>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04e8b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04ec70>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04e130>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04e070>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04ea70>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04e8f0>]\r\n[<paddle.fluid.core_avx.VarBase object at 0x7fa04973aaf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bcf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b0f0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986ba30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b570>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b6b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b270>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b8f0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b3b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b9b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b9f0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bfb0>]\r\n[<paddle.fluid.core_avx.VarBase object at 0x7fa049701230>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522a70>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522cb0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522b70>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca23ab0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04ca23d70>, <paddle.fluid.core_avx.VarBase object at 0x7fa1a0160cf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa14cb8a230>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04cdf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04ccf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04ce30>, <paddle.fluid.core_avx.VarBase object at 0x7fa06e04cf30>]\r\n[<paddle.fluid.core_avx.VarBase object at 0x7fa0497012b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522a30>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522db0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522fb0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522e30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bfb0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bb30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b8f0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bd70>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b9b0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049532030>, <paddle.fluid.core_avx.VarBase object at 0x7fa049532a70>]\r\n[<paddle.fluid.core_avx.VarBase object at 0x7fa049522970>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522bf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522c30>, <paddle.fluid.core_avx.VarBase object at 0x7fa049522e70>, <paddle.fluid.core_avx.VarBase object at 0x7fa04d520d30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bbf0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b770>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bdb0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bd30>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b1f0>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986bb70>, <paddle.fluid.core_avx.VarBase object at 0x7fa04986b7f0>]",
        "state": "closed",
        "user": "herb711",
        "closed_by": "herb711",
        "created_at": "2020-10-12T13:50:49+00:00",
        "updated_at": "2020-10-12T13:52:49+00:00",
        "closed_at": "2020-10-12T13:52:49+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 564,
        "title": "Single sentence multi class classification",
        "body": "Hi \r\nI want to understand what type of pre preprocessing will i have to do to my data and what are the changes i have to do in SST2 script and run_classfier code to solve a single sentence multi class classification problem using ernie 2.0 Large\r\nI have around 182 labels( they are in text format)\r\ndo i have to add label_map_config file in script?\r\nis there any change required in run_classifier code?",
        "state": "closed",
        "user": "sasuke96",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-23T18:43:02+00:00",
        "updated_at": "2020-11-30T06:48:35+00:00",
        "closed_at": "2020-11-30T06:48:35+00:00",
        "comments_count": [
            "PROoshio",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 575,
        "title": "Is there any methods can help me reproduce your performance in the GLUE benchmark? ",
        "body": "I trained ernie model according to your instruction, but I cannot reach the performance in the GLUE benchmark.  ",
        "state": "closed",
        "user": "CosimoFang",
        "closed_by": "stale[bot]",
        "created_at": "2020-09-27T06:04:57+00:00",
        "updated_at": "2020-12-18T03:48:31+00:00",
        "closed_at": "2020-12-18T03:48:31+00:00",
        "comments_count": [
            "zhanghan1992",
            "CosimoFang",
            "CosimoFang",
            "OleNet",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 577,
        "title": "请问ERNIE-ViL视觉问答任务什么时候可以开源呢",
        "body": "请问ERNIE-ViL视觉问答任务什么时候可以开源呢，我们团队准备用做baseline，但是相对应的任务还没开源，所以现在想问问负责人大概什么时候可以开源。",
        "state": "closed",
        "user": "Pter61",
        "closed_by": "Pter61",
        "created_at": "2020-10-03T07:53:30+00:00",
        "updated_at": "2020-10-05T12:50:32+00:00",
        "closed_at": "2020-10-05T12:50:32+00:00",
        "comments_count": [
            "TangDonnie",
            "Pter61"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 576,
        "title": "ERNIE-GAN迁移学习，无法读取自制数据集",
        "body": "在进行迁移学习时，使用官网的 NLPCC2016问答数据集 ，可以正常进行迁移学习\r\n\r\n但是使用同样格式的自制数据集，进行训练时，就会报错。（**特别强调**，自制数据集已经调整到用txt打开后从肉眼上看，和官网数据集一模一样）\r\n\r\n对比过自制数据集和# NLPCC2016问答数据集 的格式和区别。感觉没有不同。\r\n\r\n将 # NLPCC2016问答数据集 重新读入，再写成文件，也会报错。\r\n\r\n当然，这个不是ERNIE-GAN本身的问题。但是格式一致的文件。为什么，读取的时候，会有区别呢？希望帮忙答复。\r\n\r\n这是读写数据的代码（将NLPCC2016里的数据读出来，一点不改，然后写到新的文件里面去）\r\n```\r\ndef readdata(myfile, data_name):\r\n    with open(data_name, 'w', encoding='utf-8') as fw:\r\n        with open(myfile, 'r', encoding='utf-8') as f:\r\n            line = f.readline()\r\n            print(line)\r\n            while line:\r\n                fw.writelines(line)\r\n                line = f.readline()\r\n```\r\n\r\n这是自制数据集时的程序（也是用过直接读取文件的方法，但是也是不行）\r\n```\r\nimport json, random\r\nimport codecs\r\n\r\ndef makedata_zhongyi(json_dir, data_name):\r\n    with open(json_dir, 'r', encoding='UTF-8') as f:\r\n        train_datas = json.load(f)\r\n\r\n        with codecs.open(data_name, 'w', \"utf-8\") as f:\r\n            for data in train_datas:\r\n                for text in data['annotations']:\r\n                    Q = text['Q'].replace('\\n', '')\r\n                    A = text['A'].replace('\\n', '')         \r\n                    rows = '1' +'\\t'+ Q +'\\t'+ A +'\\n'\r\n                    f.writelines(rows.replace(' ', ''))\r\n```\r\n",
        "state": "closed",
        "user": "herb711",
        "closed_by": "herb711",
        "created_at": "2020-09-27T06:19:01+00:00",
        "updated_at": "2020-10-16T12:57:35+00:00",
        "closed_at": "2020-10-16T12:57:35+00:00",
        "comments_count": [
            "zhanghan1992",
            "herb711",
            "herb711",
            "herb711",
            "zhanghan1992",
            "herb711",
            "herb711"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 581,
        "title": "module 'paddle' has no attribute 'version'",
        "body": "python 3.6, paddle 1.7 官网快速入手范例导入报错，版本接口改了么？\r\n![image](https://user-images.githubusercontent.com/19962900/96086087-4ce7c980-0ef4-11eb-8315-cce28706a1f7.png)\r\n",
        "state": "closed",
        "user": "biubiuyi",
        "closed_by": "biubiuyi",
        "created_at": "2020-10-15T06:40:36+00:00",
        "updated_at": "2020-10-15T07:26:01+00:00",
        "closed_at": "2020-10-15T07:26:01+00:00",
        "comments_count": [
            "biubiuyi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 579,
        "title": "ERNIE-GEN 可以用于多轮对话吗？",
        "body": "如题。",
        "state": "closed",
        "user": "DesmonDay",
        "closed_by": "DesmonDay",
        "created_at": "2020-10-14T03:31:56+00:00",
        "updated_at": "2020-10-26T10:45:47+00:00",
        "closed_at": "2020-10-26T10:45:47+00:00",
        "comments_count": [
            "zhanghan1992",
            "DesmonDay",
            "DesmonDay",
            "zhanghan1992",
            "DesmonDay"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 582,
        "title": "save_dir中的模型如何转换为inference_model?",
        "body": "刚看paddle 和 ernie， 请指点一下",
        "state": "closed",
        "user": "qwer10",
        "closed_by": "stale[bot]",
        "created_at": "2020-10-17T10:19:48+00:00",
        "updated_at": "2020-12-26T12:20:06+00:00",
        "closed_at": "2020-12-26T12:20:06+00:00",
        "comments_count": [
            "oyjxer",
            "qwer10",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 583,
        "title": "ernie-vil pretained performance issue",
        "body": "请问ernie-vil vcr-pretrained model 是还需要 fine-tuned 才能达到paper里的效果吗？我这边按照instruction直接用vcr-pretrain base model 做了vcr qa的inference但效果只有20%左右，想知道是什么原因。谢谢！\r\n<img width=\"807\" alt=\"Screen Shot 2020-10-27 at 22 38 23\" src=\"https://user-images.githubusercontent.com/31550874/97651207-cffb3a80-1a31-11eb-94f8-db8b37adb3f5.png\">\r\n\r\n",
        "state": "closed",
        "user": "yuewan2",
        "closed_by": "yuewan2",
        "created_at": "2020-10-30T01:58:17+00:00",
        "updated_at": "2020-10-30T03:30:53+00:00",
        "closed_at": "2020-10-30T03:30:53+00:00",
        "comments_count": [
            "TangDonnie",
            "yuewan2"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 584,
        "title": "infer_classifyer.py结果不正确",
        "body": "使用infer_classifyer.py加载模型预测每次结果都不一样。\r\npaddle版本1.8。\r\n代码来源repro分支。",
        "state": "closed",
        "user": "gromzhu",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-02T10:50:31+00:00",
        "updated_at": "2021-02-14T02:51:13+00:00",
        "closed_at": "2021-02-14T02:51:13+00:00",
        "comments_count": [
            "oyxuan-11",
            "y455471846b",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 585,
        "title": "使用baidu ai studio来重新运行pretrain预训练的问题",
        "body": "在百度的环境\r\n![image](https://user-images.githubusercontent.com/55949550/98205287-ce220180-1f72-11eb-8ce2-fc438276ae42.png)\r\n中运行readme文件\r\n![image](https://user-images.githubusercontent.com/55949550/98205377-ff023680-1f72-11eb-991d-39683af1af5e.png)\r\n出现很多bug\r\n首先是第一个制作预训练数据，需要的是paddlepaddle-gpu1.7的环境和paddle-propeller==0.3.1dev1以及paddle-ernie，说明文档中没有说明。\r\n到运行下面开始预训练的时候需要热启的模型参数、字典、json文件也做好放在\r\n![image](https://user-images.githubusercontent.com/55949550/98205717-98c9e380-1f73-11eb-928e-f051cd3a9ccb.png)\r\n最后还是报错\r\n![O64YUBJAB4HAW~3@ LY{)0K](https://user-images.githubusercontent.com/55949550/98205799-bf881a00-1f73-11eb-969d-75471c0b2d20.png)\r\n这个开始以为是版本问题因为在文档中只有1.8之后的版本中才有这个方法属性。\r\n但是改了1.8的版本也不行，应该是上面的\r\n![@)CZ8REDH J{(69)3FZ93}L](https://user-images.githubusercontent.com/55949550/98205935-fc541100-1f73-11eb-8c06-b96b614954d6.png)\r\n返回值有问题。\r\n请问到底怎么才能在baidu的环境里自己重新预训练模型呢？打扰了！\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "luming159",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-05T06:35:33+00:00",
        "updated_at": "2021-01-22T04:10:46+00:00",
        "closed_at": "2021-01-22T04:10:46+00:00",
        "comments_count": [
            "luming159",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 586,
        "title": "在使用ERNIE1.0模型做命名实体识别时出现了问题！",
        "body": "TensorRT dynamic library (libnvinfer.so) that Paddle depends on is not configured correctly. (error code is libnvinfer.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if TensorRT is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure TensorRT dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX;Traceback (most recent call last):\r\n  File \"demo/finetune_ner_dygraph.py\", line 65, in <module>\r\n    tokenizer = ErnieTokenizer.from_pretrained(args.from_pretrained)\r\n  File \"/home/fanyongfeng/NER/ERNIE/ernie/tokenizing_ernie.py\", line 94, in from_pretrained\r\n    if not pretrain_dir.exists():\r\nAttributeError: 'str' object has no attribute 'exists'\r\nINFO 2020-11-05 16:22:47,411 utils.py:274] terminate all the procs\r\nERROR 2020-11-05 16:22:47,411 utils.py:416] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-11-05 16:22:50,414 utils.py:274] terminate all the procs\r\n\r\n\r\n用的数据集是MSRA的中文数据，模型是ERNIE1.0\r\npython3 -m paddle.distributed.launch demo/finetune_ner_dygraph.py  --data_dir data/msra_ner --max_steps 10000 --from_pretrained pretrain_dir/model-ernie1.0 --save_dir output\r\n",
        "state": "closed",
        "user": "FYF1997",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-05T08:32:10+00:00",
        "updated_at": "2021-01-15T09:54:09+00:00",
        "closed_at": "2021-01-15T09:54:09+00:00",
        "comments_count": [
            "oyxuan-11",
            "FYF1997",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 588,
        "title": "no --init_pretraining_params argument in ernie-vil",
        "body": "I am currently trying to fine-tune ernie-vil and I use the --init_checkpoint argument to continue training my checkpoint. However, the performance does not change much after continuously training the model for 50000 steps. I came across #417 and notice that I should be using --init_pretraining_params instead of --init_checkpoint. However, there does not seem to have --init_pretraining_params implemented in ernie-vil. What should I do?",
        "state": "closed",
        "user": "yuewan2",
        "closed_by": "yuewan2",
        "created_at": "2020-11-05T17:07:59+00:00",
        "updated_at": "2020-11-10T08:19:17+00:00",
        "closed_at": "2020-11-10T08:19:17+00:00",
        "comments_count": [
            "oyxuan-11",
            "yuewan2",
            "TangDonnie",
            "yuewan2"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 587,
        "title": "有没有大佬用ERNIE做过NER啊，共享一下，谢谢大佬！！！！",
        "body": "可以通过1548670824@qq.com联系我，感谢大佬",
        "state": "closed",
        "user": "FYF1997",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-05T08:34:57+00:00",
        "updated_at": "2021-01-15T05:54:09+00:00",
        "closed_at": "2021-01-15T05:54:09+00:00",
        "comments_count": [
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 589,
        "title": "./ernie/reader/pretraining.py  中trainer_nums 含义",
        "body": "./ernie/reader/pretraining.py  中84行 self.trainer_nums 含义，与分布式训练是什么关系\r\n",
        "state": "closed",
        "user": "paulpaul91",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-07T14:27:34+00:00",
        "updated_at": "2021-01-15T05:54:11+00:00",
        "closed_at": "2021-01-15T05:54:11+00:00",
        "comments_count": [
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 590,
        "title": "Single GPU with error no nranks",
        "body": "While retraining i met this issues:\r\n**Command:**\r\n!python3 -m paddle.distributed.launch \\\r\n--log_dir ./log  \\\r\n-- ./ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py \\\r\n--data_dir ./cnndm/cnndm \\\r\n--save_dir ./model \\\r\n--noise_prob 0.7 \\\r\n--label_smooth 0.1 \\\r\n--predict_output_dir ./pred \\\r\n--max_steps $((287113*30/64)) \\\r\n--from_pretrained ./ernie \r\n\r\n**Error:**\r\nINFO 2020-11-10 03:51:16,368 launch.py:213] get cluster from args:job_server:None pods:['rank:0 id:None addr:127.0.0.1 port:None visible_gpu:[] trainers:[\"gpu:[\\'0\\'] endpoint:127.0.0.1:51215 rank:0\"]'] job_stage_flag:None hdfs:None\r\nINFO 2020-11-10 03:51:16,368 utils.py:372] start trainer proc:['/usr/bin/python3', '-u', './ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py', '--data_dir', './cnndm/cnndm', '--save_dir', './model', '--noise_prob', '0.7', '--label_smooth', '0.1', '--predict_output_dir', './pred', '--max_steps', '134584', '--from_pretrained', './ernie'] env:{'FLAGS_selected_gpus': '0', 'PADDLE_TRAINER_ID': '0', 'PADDLE_CURRENT_ENDPOINT': '127.0.0.1:51215', 'PADDLE_TRAINERS_NUM': '1', 'PADDLE_TRAINER_ENDPOINTS': '127.0.0.1:51215'}\r\nINFO 2020-11-10 03:51:37,404 utils.py:274] terminate all the procs\r\nERROR 2020-11-10 03:51:37,404 utils.py:418] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-11-10 03:51:40,407 utils.py:274] terminate all the procs\r\n\r\n**Log file:**\r\nTraceback (most recent call last):\r\n  File \"./ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 319, in <module>\r\n    seq2seq(ernie, tokenizer, args)\r\n  File \"./ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 254, in seq2seq\r\n    scaled_loss = model.scale_loss(loss)\r\n  File \"/usr/local/lib/python3.6/dist-packages/paddle/fluid/dygraph/parallel.py\", line 333, in scale_loss\r\n    if not self._is_data_parallel_mode():\r\n  File \"/usr/local/lib/python3.6/dist-packages/paddle/fluid/dygraph/parallel.py\", line 457, in _is_data_parallel_mode\r\n    return self._strategy.nranks > 1\r\nAttributeError: 'NoneType' object has no attribute 'nranks'",
        "state": "closed",
        "user": "tuority",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-10T05:53:10+00:00",
        "updated_at": "2021-01-31T06:34:14+00:00",
        "closed_at": "2021-01-31T06:34:14+00:00",
        "comments_count": [
            "Meiyim",
            "tuority",
            "HuimengZhang",
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 591,
        "title": "没有在线推理的示例脚本吗",
        "body": "demo中finetune_classifier_dygraph.py 这个脚本 按照这个得到了fintune模型，但是没有找到提供在线推理的脚本。",
        "state": "closed",
        "user": "LiuYi217",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-12T07:15:46+00:00",
        "updated_at": "2021-01-22T10:02:03+00:00",
        "closed_at": "2021-01-22T10:02:03+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 592,
        "title": "该模型适用于文本校对吗？",
        "body": "",
        "state": "closed",
        "user": "Baililily",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-12T08:26:01+00:00",
        "updated_at": "2021-01-22T10:02:02+00:00",
        "closed_at": "2021-01-22T10:02:02+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 593,
        "title": "求教：ernie如果要使用领域数据pretrain，麻烦问下现在ernie tokenizer要怎么使用？",
        "body": "ernie如果要使用领域数据pretrain，麻烦问下现在ernie tokenizer要怎么使用？",
        "state": "closed",
        "user": "nicexw",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-12T08:47:18+00:00",
        "updated_at": "2021-01-22T10:02:02+00:00",
        "closed_at": "2021-01-22T10:02:02+00:00",
        "comments_count": [
            "luming159",
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 594,
        "title": "做NER，但是要迁移数据集，使用txt文档，数据集的组织方式一样，该怎么修改代码？",
        "body": "数据集组织方式如下：\r\n藏 书 本 来 就 是 所 有 传 统 收 藏 门 类 中 的 第 一 大 户 ， 只 是 我 们 结 束 温 饱 的 时 间 太 短 而 已 。 O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O \r\n以 家 乡 的 历 史 文 献 、 特 定 历 史 时 期 书 刊 、 某 一 名 家 或 名 著 的 多 种 出 版 物 为 专 题 ， 注 意 精 品 、 非 卖 品 、 纪 念 品 ， 集 成 系 列 ， 那 收 藏 的 过 程 就 已 经 够 您 玩 味 无 穷 了 。 O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O \r\n精 品 、 专 题 、 系 列 、 稀 见 程 度 才 是 质 量 的 核 心 。 O O O O O O O O O O O O O O O O O O O O O \r\n藏 书 的 数 量 多 少 不 能 反 映 收 藏 的 质 量 ， 更 不 是 工 薪 层 的 承 受 范 围 。 O O O O O O O O O O O O O O O O O O O O O O O O O O O O O \r\n书 籍 浩 如 烟 海 ， 靠 个 人 的 精 力 与 财 力 不 可 能 广 而 博 之 。 O O O O O O O O O O O O O O O O O O O O O O O O \r\n闲 钱 、 闲 地 方 、 闲 工 夫 固 然 重 要 ， 但 藏 书 要 有 文 化 底 蕴 ， 对 于 书 所 传 达 出 来 的 美 感 和 情 趣 ， 要 放 到 一 定 的 专 业 背 景 下 才 能 显 现 。 O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O \r\n对 于 靠 藏 品 增 值 来 致 富 的 说 法 ， 我 们 不 敢 非 议 ， 但 从 没 听 说 过 哪 位 藏 书 家 靠 书 发 财 了 。 O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O \r\n去 年 ， 我 们 又 被 评 为 “ 北 京 市 首 届 家 庭 藏 书 状 元 明 星 户 ” 。 O O O O O O O O O O B-LOC I-LOC I-LOC O O O O O O O O O O O O O \r\n然 而 海 外 图 书 价 格 奇 昂 ， 非 工 薪 层 所 能 承 受 。 O O O O O O O O O O O O O O O O O O O O \r\n我 俩 都 是 从 事 食 品 生 产 营 销 工 作 的 。 O O O O O O O O O O O O O O O O \r\n\r\n文本格式为TXT文档，编码方式为UTF-8，大佬指导一下，谢谢！原来的part.0文件之间的空格是stx，我试过直接把txt文本改成。o文本，但是运行的时候发生了错误！",
        "state": "closed",
        "user": "FYF1997",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-13T06:37:24+00:00",
        "updated_at": "2021-01-22T10:02:01+00:00",
        "closed_at": "2021-01-22T10:02:01+00:00",
        "comments_count": [
            "FYF1997",
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 596,
        "title": "ernie-vil 在 vcr 数据集上 finetune 报错",
        "body": "使用 ERNIE-ViL base 在 vcr 数据集上进行 finetune 时，出现以下错误：\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"finetune.py\", line 464, in <module>\r\n    main(args)\r\n  File \"finetune.py\", line 371, in main\r\n    epoch=args.epoch,)\r\n  File \"/home/wmd/workspace/ERNIE-repro/ernie-vil/reader/vcr_finetuning.py\", line 424, in __init__\r\n    ImageFeaturesH5Reader(task_conf['feature_lmdb_path'])\r\n  File \"/home/wmd/workspace/ERNIE-repro/ernie-vil/reader/_image_features_reader.py\", line 27, in __init__\r\n    lock=False, readahead=False, meminit=False)\r\nlmdb.Error: ./data/vcr/VCR_resnet101_faster_rcnn_genome_pickle2.lmdb: No such file or directory\r\n```\r\n文档里说明数据使用的是 vilbert 的数据，但是在 vilbert 提供的下载链接里并没有`VCR_resnet101_faster_rcnn_genome_pickle2.lmdb`，只有 `VCR_gt_resnet101_faster_rcnn_genome.lmdb`。\r\n请问`VCR_resnet101_faster_rcnn_genome_pickle2.lmdb`该如何获取？\r\n",
        "state": "closed",
        "user": "MindaWu",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-18T06:24:30+00:00",
        "updated_at": "2021-02-20T11:17:48+00:00",
        "closed_at": "2021-02-20T11:17:48+00:00",
        "comments_count": [
            "zhuzhf",
            "MindaWu",
            "TangDonnie",
            "MindaWu",
            "TangDonnie",
            "Tclz",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 595,
        "title": "可以在现在预训练模型基础上增加领域数据继续训练吗？",
        "body": "如题？",
        "state": "closed",
        "user": "semal",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-17T03:45:24+00:00",
        "updated_at": "2021-01-29T04:14:29+00:00",
        "closed_at": "2021-01-29T04:14:29+00:00",
        "comments_count": [
            "zhuzhf",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 597,
        "title": "Hello, I want to use NER to predict new data and return the marked data",
        "body": "Hello, I want to use NER to predict the new data and return the marked data, that is, I want to develop an interface by myself, I wonder if you have any good Suggestions, thank you for your advice!",
        "state": "closed",
        "user": "FYF1997",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-24T10:58:54+00:00",
        "updated_at": "2021-02-01T12:53:02+00:00",
        "closed_at": "2021-02-01T12:53:02+00:00",
        "comments_count": [
            "tianxin1860",
            "FYF1997",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 599,
        "title": "英文的完形填空任务，相关的模型参数",
        "body": "\r\n在你们提供的链接中 [完形填空](https://aistudio.baidu.com/aistudio/projectdetail/433491)\r\n我尝试去做英文的完形填空，发现效果很差，是因为这部分参数没有提供，`param:mlm_bias not set in pretrained model, skip`\r\n请问，近期是否会 release 相关weights？\r\n",
        "state": "closed",
        "user": "ShiYaya",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-29T06:07:57+00:00",
        "updated_at": "2021-02-06T14:28:48+00:00",
        "closed_at": "2021-02-06T14:28:48+00:00",
        "comments_count": [
            "tianxin1860",
            "ShiYaya",
            "tianxin1860",
            "ShiYaya",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 598,
        "title": "ERNIE运行Demo中的finetune_seq2seq_dygraph.py出现问题",
        "body": "# 在ai studio中运行如下代码：\r\n\r\n```\r\n!python ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py \\\r\n--from_pretrained ernie-1.0 \\\r\n--data_dir work/datasets/medical \\\r\n--max_steps 128 \\\r\n--save_dir work/save\r\n```\r\n\r\n发生错误。错误显示如下：\r\n\r\n\r\n[INFO] 2020-11-24 23:23:28,189 [modeling_ernie.py:  201]:\tget pretrain dir from https://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz\r\n[DEBUG] 2020-11-24 23:23:28,190 [file_utils.py:   58]:\thttps://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz cached in /home/aistudio/.paddle-ernie-cache\r\n[DEBUG] 2020-11-24 23:23:28,190 [modeling_ernie.py:  242]:\tinit ErnieModel with config: {'attention_probs_dropout_prob': 0.1, 'hidden_act': 'relu', 'hidden_dropout_prob': 0.1, 'hidden_size': 768, 'initializer_range': 0.02, 'max_position_embeddings': 513, 'num_attention_heads': 12, 'num_hidden_layers': 12, 'type_vocab_size': 2, 'vocab_size': 18000, 'return_additional_info': True, 'has_pooler': False}\r\nW1124 23:23:28.191437   207 device_context.cc:252] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 10.1, Runtime API Version: 9.0\r\nW1124 23:23:28.196331   207 device_context.cc:260] device: 0, cuDNN Version: 7.6.\r\n[INFO] 2020-11-24 23:23:31,189 [modeling_ernie.py:  219]:\tloading pretrained model from /home/aistudio/.paddle-ernie-cache/466eabcffd6d6a83ae9cb97dd1a167bd\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:717: UserWarning: Varibale [ pooler.weight pooler.bias ] are not used, because not included in layers state_dict\r\n  format(\" \".join(unused_para_list)))\r\n[INFO] 2020-11-24 23:23:34,437 [tokenizing_ernie.py:   89]:\tget pretrain dir from https://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz\r\n[DEBUG] 2020-11-24 23:23:34,437 [file_utils.py:   58]:\thttps://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz cached in /home/aistudio/.paddle-ernie-cache\r\n[DEBUG] 2020-11-24 23:23:34,447 [tokenizing_ernie.py:  134]:\tregex: (\\[PAD\\])|(\\[SEP\\])|(\\[UNK\\])|(\\[CLS\\])|([a-zA-Z0-9]+|\\S)\r\n[INFO] 2020-11-24 23:23:34,449 [finetune_seq2seq_dygraph.py:   83]:\tTraining starts with args: Namespace(attn_token='[MASK]', beam_width=5, bsz=8, data_dir='work/datasets/medical', eval_bsz=20, eval_steps=5000, from_pretrained='ernie-1.0', inference_model_dir=None, init_checkpoint=None, label_smooth=0.1, length_penalty=1.0, lr=5e-05, max_decode_len=120, max_encode_len=640, max_steps=128, noise_prob=0.7, predict_output_dir=None, save_dir='work/save', skip_eval_steps=1, tgt_type_id=3, use_random_noice=False, warmup_proportion=0.1, wd=0.01)\r\n[INFO] 2020-11-24 23:23:34,453 [feature_column.py:  353]:\treading raw files from work/datasets/medical/train/1.tsv\r\n[INFO] 2020-11-24 23:23:34,453 [feature_column.py:  353]:\treading raw files from work/datasets/medical/dev/1.tsv\r\n[DEBUG] 2020-11-24 23:23:34,453 [finetune_seq2seq_dygraph.py:  216]:\tshard 0 of 1\r\n[ERROR] 2020-11-24 23:23:34,456 [functional.py:   69]:\t'[NOISE]'\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/ERNIE/propeller/paddle/data/functional.py\", line 66, in _gen\r\n    for idx, i in enumerate(self.generator()):\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 135, in _gen\r\n    for i in dataset():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 240, in _gen\r\n    buf = list(itertools.islice(iterable, batch_size))\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 74, in _gen\r\n    buf.append(next(iterable))\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 148, in _gen\r\n    for i in ret:\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 282, in _wrapper\r\n    for item in _gen():\r\n  File \"/home/aistudio/ERNIE/propeller/data/functional.py\", line 137, in _gen\r\n    yield fn(*i)\r\n  File \"ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 130, in map_fn\r\n    tgt_ids = make_some_noice(tgt_ids) #corrupted\r\n  File \"ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 110, in make_some_noice\r\n    noice_ids = np.ones_like(ids) * tokenizer.vocab['[NOISE]']\r\nKeyError: '[NOISE]'\r\n[WARNING] 2020-11-24 23:23:34,458 [   reader.py:  912]:\tDygraphDataLoader reader thread raised an exception.\r\nTraceback (most recent call last):\r\n  File \"ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 318, in <module>\r\n    seq2seq(ernie, tokenizer, args)\r\n  File \"ERNIE/demo/seq2seq/finetune_seq2seq_dygraph.py\", line 234, in seq2seq\r\n    for step, data in enumerate(train_ds.start(place)):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 804, in __next__\r\n    return self._reader.read_next_var_list()\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n",
        "state": "closed",
        "user": "herb711",
        "closed_by": "stale[bot]",
        "created_at": "2020-11-27T05:22:53+00:00",
        "updated_at": "2021-02-05T04:48:13+00:00",
        "closed_at": "2021-02-05T04:48:13+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 601,
        "title": "通过两种方式获得的ERNIE编码后的embedding不同？",
        "body": "你好，我使用了两种方式来获取ERNIE编码的embedding表示：\r\n第一种：https://github.com/PaddlePaddle/ERNIE/blob/repro/README.zh.md#faq1-%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E5%8F%A5%E5%AD%90%E8%AF%8D%E7%BB%8F%E8%BF%87-ernie-%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84-embedding-%E8%A1%A8%E7%A4%BA\r\n第二种：https://github.com/PaddlePaddle/ERNIE#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B\r\n使用的模型是原始的ernie1.0模型。\r\n当我使用这两种方式**编码一个句子时，得到的句子向量和token向量相同**。但是**当输入两个句子时，生成向量不同**。不太清楚是不是我输入格式的问题，求解。\r\n第一种我的dev.tsv文件内容如下：\r\ntext_a\\ttext_b\\tlabel\\n\r\nhello world\\thello world\\t0\r\n第二种我的输入如下：\r\n...\r\nids, _ = tokenizer.encode('hello world', 'hello world')\r\n...\r\n环境：\r\npaddlepaddle-gpu==1.8.0.post107\r\npython==3.6.9\r\npaddle-ernie==0.0.4.dev1",
        "state": "closed",
        "user": "BossRobin",
        "closed_by": "BossRobin",
        "created_at": "2020-12-08T08:15:09+00:00",
        "updated_at": "2020-12-09T09:41:11+00:00",
        "closed_at": "2020-12-09T09:41:11+00:00",
        "comments_count": [
            "Meiyim",
            "BossRobin",
            "Meiyim",
            "BossRobin"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 602,
        "title": "使用paddle serving时，如何在推理时自定义指定fetch返回变量用于保存模型",
        "body": "`\r\nclient.predict(feed={\"x\": data}, fetch=[\"price\"])\r\n`\r\n类似上面的“x\"和\"price\"如何在代码中根据需求，自定义输入输出变量，比如分类任务取中间softmax结果返回，而不是最终的某个类别",
        "state": "closed",
        "user": "lerry-lee",
        "closed_by": "lerry-lee",
        "created_at": "2020-12-08T08:44:43+00:00",
        "updated_at": "2020-12-09T02:56:06+00:00",
        "closed_at": "2020-12-09T02:56:06+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 603,
        "title": "ERNIE2.0 中文版还没发布吗",
        "body": "ERNIE2.0 中文版还发布吗",
        "state": "closed",
        "user": "flyerjia",
        "closed_by": "stale[bot]",
        "created_at": "2020-12-10T08:45:46+00:00",
        "updated_at": "2021-02-19T16:10:06+00:00",
        "closed_at": "2021-02-19T16:10:06+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 606,
        "title": "ernie_gen的对话任务相关疑问",
        "body": "背景:ernie_gen使用ernie-1.0初始化，做中文对话任务。\r\n对话任务需要提供：role_type_size，我看默认是3，对应是user, bot, knowledge\r\n1.如果我的任务不需要knowledge字段，ernie-1.0的pretrain model能复用么?\r\n2.role_type我看是一问一答，支持用户连续说n个吗，即role_type连续几句都是0\r\n3.ernie-1.0中的embedding表示（token/position/src_ids）要和ernie-gen 对话任务表示要是一样的吗\r\n",
        "state": "closed",
        "user": "lonelydancer",
        "closed_by": "stale[bot]",
        "created_at": "2020-12-28T10:16:39+00:00",
        "updated_at": "2021-03-06T11:08:23+00:00",
        "closed_at": "2021-03-06T11:08:23+00:00",
        "comments_count": [
            "oyjxer",
            "lonelydancer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 605,
        "title": "ernie/__init__.py中paddle版本号判断不完善",
        "body": "`ernie/__init__.py`中paddle版本号判断方式为\r\n```\r\nimport paddle\r\npaddle_version = [int(i) for i in paddle.__version__.split('.')]\r\nif paddle_version[1] < 7:\r\n    raise RuntimeError('paddle-ernie requires paddle 1.7+, got %s' %\r\n                       paddle.__version__)\r\n\r\n```\r\n\r\n但我的paddle版本号为`2.0.0-rc1`，这会导致int('0-rc1')，从而报错\r\n不妨把这部分改为：\r\n\r\n```\r\nimport paddle\r\npaddle_version = [i for i in paddle.__version__.split('.')]\r\nif 10 * int(paddle_version[0]) + int(paddle_version[1]) < 17:\r\n    raise RuntimeError('paddle-ernie requires paddle 1.7+, got %s' %\r\n                       paddle.__version__)\r\n```\r\n",
        "state": "closed",
        "user": "llgithubll",
        "closed_by": "llgithubll",
        "created_at": "2020-12-26T04:12:23+00:00",
        "updated_at": "2020-12-27T03:43:25+00:00",
        "closed_at": "2020-12-27T03:43:25+00:00",
        "comments_count": [
            "Meiyim"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 607,
        "title": "加载模型失败runtimerror",
        "body": "我跑ErnieModelForSequenceClassification的例子、\r\n训练好的模型用paddle.fluid.save_dygraph(model.state_dict(), \"./model/xxx\")\r\n然后加载模型 model.load_dict(stat_dict=paddle.fluid.load_dygraph(\"./model/xxx\"))报错\r\nRuntimeError:Parameter not found, Can\"t not find [ln.weight] in stat+distuse_structured_name is set to [True]",
        "state": "closed",
        "user": "q2044757581",
        "closed_by": "stale[bot]",
        "created_at": "2020-12-28T12:57:11+00:00",
        "updated_at": "2021-03-12T13:21:50+00:00",
        "closed_at": "2021-03-12T13:21:50+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 608,
        "title": "使用ernie finetune得到的模型做infer的时候报错",
        "body": "使用ernie finetune得到的模型做infer的时候报错，请问如何解决？\r\nError Message Summary:\r\nInvalidArgumentError: The DataType of fused_fc_elenentwise_layernom Op's duplicable Variable Biasl must be consistent. The current variable type is (float)， but the previous variable type is (::paddle.platform::floatlb).  at(/paddle/paddle/fluid/franeuork/operator.cc: 1298)\r\n[operator < fused_fc_elementwise_layernorm > error]\r\n",
        "state": "closed",
        "user": "stillme617",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-04T13:26:01+00:00",
        "updated_at": "2021-03-14T14:56:14+00:00",
        "closed_at": "2021-03-14T14:56:14+00:00",
        "comments_count": [
            "Meiyim",
            "stillme617",
            "stillme617",
            "Meiyim",
            "stillme617",
            "Meiyim",
            "stillme617",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 611,
        "title": "ernie 1.0 使用InferenceClient请求推理服务，服务出core报错",
        "body": "你好，\r\n我finetune了 zh_task/ernie_base/run_ChnSentiCorp.sh 任务，用infer_classiyer.py生成model后，启动服务。\r\n用inferernce_client 请求服务，出core\r\ncore信息：\r\nW0108 15:06:05.752475 12697 naive_executor.cc:50] Please re-compile the inference library by setting the cmake flag ON_INFER=ON if you are running Paddle Inference\r\nW0108 15:06:05.754022 12697 init.cc:209] Warning: PaddlePaddle catches a failure signal, it may not work properly\r\nW0108 15:06:05.754050 12697 init.cc:211] You could check whether you killed PaddlePaddle thread/process accidentally or report the case to PaddlePaddle\r\nW0108 15:06:05.754053 12697 init.cc:214] The detail failure signal is:\r\n\r\nW0108 15:06:05.754058 12697 init.cc:217] *** Aborted at 1610089565 (unix time) try \"date -d @1610089565\" if you are using GNU date ***\r\nW0108 15:06:05.754962 12697 init.cc:217] PC: @                0x0 (unknown)\r\nW0108 15:06:05.765040 12697 init.cc:217] *** SIGSEGV (@0x50) received by PID 12697 (TID 0x7fc77e498740) from PID 80; stack trace: ***\r\nW0108 15:06:05.767349 12697 init.cc:217]     @     0x7fc77ded2040 (unknown)\r\nW0108 15:06:05.770890 12697 init.cc:217]     @     0x7fc77e290c98 (unknown)\r\nW0108 15:06:05.773365 12697 init.cc:217]     @     0x7fc77e29927d (unknown)\r\nW0108 15:06:05.774482 12697 init.cc:217]     @     0x7fc77dffa1ef _dl_catch_exception\r\nW0108 15:06:05.775518 12697 init.cc:217]     @     0x7fc77e29898a (unknown)\r\nW0108 15:06:05.776628 12697 init.cc:217]     @     0x7fc77dff92bd (unknown)\r\nW0108 15:06:05.777694 12697 init.cc:217]     @     0x7fc77dffa1ef _dl_catch_exception\r\nW0108 15:06:05.778731 12697 init.cc:217]     @     0x7fc77dffa27f _dl_catch_error\r\nW0108 15:06:05.779821 12697 init.cc:217]     @     0x7fc77dff93e9 __libc_dlopen_mode\r\nW0108 15:06:05.780933 12697 init.cc:217]     @     0x7fc77dfc3f05 (unknown)\r\nW0108 15:06:05.781955 12697 init.cc:217]     @     0x7fc77dc83907 __pthread_once_slow\r\nW0108 15:06:05.783041 12697 init.cc:217]     @     0x7fc77dfc3fdf backtrace\r\nW0108 15:06:05.789768 12697 init.cc:217]     @     0x7fc681d83815 paddle::platform::GetTraceBackString<>()\r\nW0108 15:06:05.796608 12697 init.cc:217]     @     0x7fc681d83ba1 paddle::platform::EnforceNotMet::EnforceNotMet()\r\nW0108 15:06:05.800225 12697 init.cc:217]     @     0x7fc683a6a7ea paddle::operators::MultiHeadMatMulOp::InferShape()\r\nW0108 15:06:05.802749 12697 init.cc:217]     @     0x7fc684a54c06 paddle::framework::OperatorWithKernel::RunImpl()\r\nW0108 15:06:05.806273 12697 init.cc:217]     @     0x7fc684a55193 paddle::framework::OperatorWithKernel::RunImpl()\r\nW0108 15:06:05.807960 12697 init.cc:217]     @     0x7fc684a4e3d0 paddle::framework::OperatorBase::Run()\r\nW0108 15:06:05.814075 12697 init.cc:217]     @     0x7fc6849f1cc3 paddle::framework::NaiveExecutor::Run()\r\nW0108 15:06:05.820092 12697 init.cc:217]     @     0x7fc68218d66c paddle::AnalysisPredictor::Run()\r\nW0108 15:06:05.822775 12697 init.cc:217]     @     0x7fc682062326 _ZZN8pybind1112cpp_function10initializeIZN6paddle6pybind12_GLOBAL__N_121BindAnalysisPredictorEPNS_6moduleEEUlRNS2_17AnalysisPredictorERKSt6vectorINS2_12PaddleTensorESaISA_EEE_SC_IS8_SE_EINS_4nameENS_9is_methodENS_7siblingEEEEvOT_PFT0_DpT1_EDpRKT2_ENUlRNS_6detail13function_callEE1_4_FUNESW_\r\nW0108 15:06:05.823576 12697 init.cc:217]     @     0x7fc681dbe221 pybind11::cpp_function::dispatcher()\r\nW0108 15:06:05.823698 12697 init.cc:217]     @     0x559f5899dac8 PyEval_EvalFrameEx\r\nW0108 15:06:05.823783 12697 init.cc:217]     @     0x559f58993e0a PyEval_EvalCodeEx\r\nW0108 15:06:05.823876 12697 init.cc:217]     @     0x559f589af94c (unknown)\r\nW0108 15:06:05.823938 12697 init.cc:217]     @     0x559f5897f70e PyObject_Call\r\nW0108 15:06:05.824028 12697 init.cc:217]     @     0x559f58998a29 PyEval_EvalFrameEx\r\nW0108 15:06:05.824107 12697 init.cc:217]     @     0x559f58993e0a PyEval_EvalCodeEx\r\nW0108 15:06:05.824198 12697 init.cc:217]     @     0x559f589af6a9 (unknown)\r\nW0108 15:06:05.824290 12697 init.cc:217]     @     0x559f589c7e1e (unknown)\r\nW0108 15:06:05.824349 12697 init.cc:217]     @     0x559f5897f70e PyObject_Call\r\nW0108 15:06:05.824440 12697 init.cc:217]     @     0x559f58a2480b (unknown)\r\n\r\n生成model命令：\r\npython -u infer_classifyer.py \\\r\n    --ernie_config_path ${MODEL_PATH}/ernie_config.json \\\r\n    --init_checkpoint \"../checkpoints/step_1000\" \\\r\n    --save_inference_model_path ./saved_model \\\r\n    --predict_set  ${TASK_DATA_PATH}/chnsenticorp/test.tsv \\\r\n    --vocab_path ${MODEL_PATH}/vocab.txt \\\r\n    --num_labels 2\r\n\r\n服务端：\r\n环境python2.7、paddle1.7.2\r\n启动服务命令：python -m propeller.tools.start_server -m ernie/saved_model//step_1000_inference_model -p 9999\r\n\r\n客户端\r\npython3.7， paddle1.8.1\r\n\r\n",
        "state": "closed",
        "user": "lonelydancer",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-08T07:23:12+00:00",
        "updated_at": "2021-03-21T16:06:35+00:00",
        "closed_at": "2021-03-21T16:06:35+00:00",
        "comments_count": [
            "Meiyim",
            "lonelydancer",
            "Meiyim",
            "lonelydancer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix",
            "Paddle-Issue"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 609,
        "title": "文本分类启动失败",
        "body": "我用的paddle2.0.0预处理数据集我下到本地了.请问放到模型里的开发和测试文件夹中的part.0文件是不用动的吧？就用这个格式么？？还是要改成TSV格式才可以啊.\r\n我现在启动报错为：\r\n[INFO] 2021-01-05 00:07:54,727 [feature_column.py: 350]: reading raw files from D:\\Code\\paddle\\chnsenticorp\\train\\part.0 [INFO] 2021-01-05 00:07:54,727 [feature_column.py: 350]: reading raw files from D:\\Code\\paddle\\chnsenticorp\\dev\\part.0 W0105 00:07:54.729367 14360 device_context.cc:320] Please NOTE: device: 0, GPU Compute Capability: 6.1, Driver API Version: 11.1, Runtime API Version: 11.0 W0105 00:07:54.840369 14360 device_context.cc:330] device: 0, cuDNN Version: 8.0. param:classifier.weight not set in pretrained model, skip param:classifier.bias not set in pretrained model, skip WARNING:root:DataLoader reader thread raised an exception.\r\n然后这是我的启动命令：\r\npython finetune_classifier.py --from_pretrained=\"D:\\Code\\paddle\\model-ernie1.0.1\" --max_seqlen=128 --bsz=8 --data_dir=\"D:\\Code\\paddle\\chnsenticorp\" --epoch=\"2\" --warmup_proportion=0.1 --lr=\"5e-5\" --inference_model_dir=\"D:/Code/paddle/shuchumoxing\" --save_dir=\"D:\\Code\\paddle\\models_out\"",
        "state": "closed",
        "user": "hdyzhuxun",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-04T16:16:38+00:00",
        "updated_at": "2021-03-14T14:56:15+00:00",
        "closed_at": "2021-03-14T14:56:15+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 613,
        "title": "训练时对dev评估结果，与直接预测dev结果不一致",
        "body": "预测代码\r\n![image](https://user-images.githubusercontent.com/33724161/104404673-2e967600-5596-11eb-976e-dab4638e3e72.png)\r\n评估代码\r\n![image](https://user-images.githubusercontent.com/33724161/104404688-3bb36500-5596-11eb-8625-041666aec76b.png)\r\n\r\n我demo训练了一个模型，准确度为：\r\n![image](https://user-images.githubusercontent.com/33724161/104404776-74533e80-5596-11eb-9ece-755bfa031047.png)\r\n然后直接用这个模型预测dev文件：\r\n准确度只有0.56左右\r\n\r\n请问是训练和评估过程的batch_size和预测时的batch_size不同导致的吗，我现在只能猜测是自定义模型中的这个部分出了问题\r\n![image](https://user-images.githubusercontent.com/33724161/104404892-b11f3580-5596-11eb-9d31-163f7a659d02.png)\r\n",
        "state": "closed",
        "user": "zqleee",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-13T03:59:28+00:00",
        "updated_at": "2021-03-22T12:29:46+00:00",
        "closed_at": "2021-03-22T12:29:46+00:00",
        "comments_count": [
            "zqleee",
            "oyxuan-11",
            "zqleee",
            "zqleee",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 616,
        "title": "完型填空",
        "body": "可以提供一个返回前n个适宜词的方法吗？万分感谢~！\r\n下面方法仅返回一个答案，而且没有词检验（如果一个填空中包含两个[MASK]，第一个mask取字典中概率最高的那个字，第二个mask也取字典中概率最高的那个字，有时这两个mask拼接起来不是一个词）。\r\n\r\n\r\n在最新开源的[ERNIE动态图模型](https://github.com/PaddlePaddle/ERNIE/tree/dygraph)当中，做完形填空将会更加简单方便.\r\n\r\n继承`ErnieModelForPretraining`并改写`forward`方法，便可以实现简单的完形填空逻辑(仅限ernie1.0中文模型；enire2.0等英文模型因为没有发布mask_lm任务相关的weight文件所以还无法做到完形填空)；\r\n\r\n请参考：\r\n```python\r\nimport os\r\nimport numpy as np\r\n\r\nimport paddle.fluid as F\r\nimport paddle.fluid.layers as L\r\nimport paddle.fluid.dygraph as D\r\nfrom ernie.modeling_ernie import ErnieModelForPretraining, ErnieModel\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\n\r\nclass ErnieCloset(ErnieModelForPretraining):\r\n    def __init__(self, *args, **kwargs):\r\n        super(ErnieCloset, self).__init__(*args, **kwargs)\r\n        del self.pooler_heads\r\n    def forward(self, src_ids, *args, **kwargs):\r\n        pooled, encoded = ErnieModel.forward(self, src_ids, *args, **kwargs)\r\n        encoded_2d = L.gather_nd(encoded, L.where(src_ids == mask_id))\r\n        encoded_2d = self.mlm(encoded_2d)\r\n        encoded_2d = self.mlm_ln(encoded_2d)\r\n        logits_2d = L.matmul(encoded_2d, self.word_emb.weight, transpose_y=True) + self.mlm_bias\r\n        return logits_2d\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    model_dir = 'ernie-1.0'\r\n\r\n    D.guard().__enter__()\r\n    tokenizer = ErnieTokenizer.from_pretrained(model_dir)\r\n    rev_dict = {v: k for k, v in tokenizer.vocab.items()}\r\n    rev_dict[tokenizer.pad_id] = '' # replace [PAD]\r\n    rev_dict[tokenizer.sep_id] = '' # replace [PAD]\r\n    rev_dict[tokenizer.unk_id] = '' # replace [PAD]\r\n\r\n    @np.vectorize\r\n    def rev_lookup(i):\r\n        return rev_dict[i]\r\n\r\n    ernie = ErnieCloset.from_pretrained(model_dir)\r\n    ernie.eval()\r\n\r\n    ids, _ = tokenizer.encode('戊戌变法，又称百日维新，是 [MASK] [MASK] [MASK] 、梁启超等维新派人士通过光绪帝进行 的一场资产阶级改良。')\r\n    mask_id = tokenizer.mask_id\r\n    print(ids)\r\n    ids = np.expand_dims(ids, 0)\r\n    ids = D.to_variable(ids)\r\n    logits = ernie(ids).numpy()\r\n    output_ids = np.argmax(logits, -1)\r\n    seg_txt = rev_lookup(output_ids)\r\n    print(seg_txt)\r\n```\r\n\r\n_Originally posted by @Meiyim in https://github.com/PaddlePaddle/ERNIE/issues/173#issuecomment-619491262_",
        "state": "closed",
        "user": "ouhongxu",
        "closed_by": "ouhongxu",
        "created_at": "2021-01-19T14:59:47+00:00",
        "updated_at": "2021-07-27T02:42:08+00:00",
        "closed_at": "2021-02-01T15:27:32+00:00",
        "comments_count": [
            "zhuzhf",
            "ZTurboX"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 617,
        "title": "如何加载finetune的模型做预测",
        "body": "我已经用自己的数据集finetune了一个模型，模型参数保存在了一个'infer_model'文件夹里 那么我要如何加载这个模型去做predict呢。 之前尝试了https://github.com/PaddlePaddle/ERNIE里在线预测的方式，只改动了模型路径，但是最后输出的结果[array([[ 1.5209239,  2.910406 , -5.0615687]], dtype=float32)]emmmmm貌似不是很能理解，所以我要如何实现这个predict的过程呢。 py3.6  paddle2.0",
        "state": "closed",
        "user": "EDkami9399",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-22T07:14:43+00:00",
        "updated_at": "2021-04-06T07:46:44+00:00",
        "closed_at": "2021-04-06T07:46:44+00:00",
        "comments_count": [
            "WeiyueSu",
            "EDkami9399",
            "zhuzhf",
            "EDkami9399",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 615,
        "title": "release/r2.1.0 版本是否代码是否能够跑多机分布",
        "body": "release/r2.1.0 版本是否代码是否能够跑多机分布",
        "state": "closed",
        "user": "paulpaul91",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-18T09:01:11+00:00",
        "updated_at": "2021-04-04T08:35:05+00:00",
        "closed_at": "2021-04-04T08:35:05+00:00",
        "comments_count": [
            "WeiyueSu",
            "paulpaul91",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 618,
        "title": "ernie-gen的position embedding",
        "body": "您好，最近看您ernie-gen的论文，真的是非常棒的工作，想请教您一个问题：\r\nT5中通过特殊字符来表示那些地方被mask了，那些地方需要预测。请问ernie-gen是和mass一样通过位置的方式吗，ernie-gen中decoder输入词的位置是其在原始input中的位置吗？\r\n感谢回复！",
        "state": "closed",
        "user": "pvop",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-22T11:41:18+00:00",
        "updated_at": "2021-04-10T20:13:37+00:00",
        "closed_at": "2021-04-10T20:13:37+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 619,
        "title": "二次训练，有能跑通的吗？",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/develop/demo/pretrain/README.md\r\n\r\n上面的官方说明（这个说明有点混乱。。。），是需要什么版本进行训练？有没有能跑通的？\r\n\r\n期待并感谢官方的回答！",
        "state": "closed",
        "user": "FankLi",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-25T06:50:41+00:00",
        "updated_at": "2021-04-02T18:27:28+00:00",
        "closed_at": "2021-04-02T18:27:28+00:00",
        "comments_count": [
            "zhuzhf",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 612,
        "title": "ernie文本分类泛化能力很差是什么原因？",
        "body": "在训练集大约70左右的准确率，测试集60%左右，但是使用微调后的模型分类新的文本效果很差，只有43%左右，新文本的类别分布比例和训练集测试集都是差不多的，请问是什么原因导致的？",
        "state": "closed",
        "user": "stillme617",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-11T08:21:38+00:00",
        "updated_at": "2021-03-19T16:38:17+00:00",
        "closed_at": "2021-03-19T16:38:17+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 620,
        "title": "预训练代码 for ERNIE ViL",
        "body": "请教是否能够开源ERNIR ViL的预训练代码呢？尤其是如何用scene graph parser进行词性的识别，以及最后对应预训练任务的处理？谢谢",
        "state": "closed",
        "user": "HarveyGuo960817",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-26T08:58:50+00:00",
        "updated_at": "2021-06-04T09:42:17+00:00",
        "closed_at": "2021-04-27T23:27:02+00:00",
        "comments_count": [
            "TangDonnie",
            "HarveyGuo960817",
            "stale[bot]",
            "weihao20"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 621,
        "title": "ERNIE-GEN无法安装",
        "body": "更新之后，ERNIE-GEN就无法运行了。\r\n之前运行以下命令：\r\n在paddle1.8\r\n```\r\n!pip install --upgrade paddlehub\r\n!pip install paddle-ernie\r\n!hub install ernie_gen==1.0.2\r\n```\r\n然后代码：\r\n```\r\nimport paddlehub as hub\r\n\r\n# 加载ernie_gen模型\r\nmodule = hub.Module(name=\"ernie_gen\")\r\n```\r\n直接报错：\r\n```\r\n[2021-01-28 15:46:50,362] [    INFO] - Installing ernie_gen module\r\n---------------------------------------------------------------------------RuntimeError                              Traceback (most recent call last)~/.paddlehub/modules/ernie_gen/module.py in <module>\r\n     24 try:\r\n---> 25     from ernie.modeling_ernie import ErnieModelForGeneration\r\n     26     from ernie.tokenizing_ernie import ErnieTokenizer\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/ernie/__init__.py in <module>\r\n     22     raise RuntimeError('propeller 0.2 requires paddle 2.0+, got %s' %\r\n---> 23                        paddle.__version__)\r\n     24 \r\nRuntimeError: propeller 0.2 requires paddle 2.0+, got 1.8.4\r\nDuring handling of the above exception, another exception occurred:\r\nImportError                               Traceback (most recent call last)<ipython-input-6-7a5911e08702> in <module>\r\n      2 \r\n      3 # 加载ernie_gen模型\r\n----> 4 module = hub.Module(name=\"ernie_gen\")\r\n      5 \r\n      6 train_data_file = os.path.join(new_dataset_dir, \"lcsts_train_500k.txt\")\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/module.py in __new__(cls, name, directory, module_dir, version, **kwargs)\r\n    100             if name:\r\n    101                 module = cls.init_with_name(\r\n--> 102                     name=name, version=version, **kwargs)\r\n    103             elif directory:\r\n    104                 module = cls.init_with_directory(directory=directory, **kwargs)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/module.py in init_with_name(cls, name, version, **kwargs)\r\n    169         extra = {\"command\": \"install\"}\r\n    170         result, tips, module_dir = default_module_manager.install_module(\r\n--> 171             module_name=name, module_version=version, extra=extra)\r\n    172         if not result:\r\n    173             logger.error(tips)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in install_module(self, module_name, module_dir, module_package, module_version, upgrade, extra)\r\n    125         with tmp_dir() as _dir:\r\n    126             if module_name:\r\n--> 127                 self.all_modules(update=True)\r\n    128                 module_info = self.modules_dict.get(module_name, None)\r\n    129                 if module_info:\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in all_modules(self, update)\r\n    103                     shutil.move(sub_dir_path, new_sub_dir_path)\r\n    104                     sub_dir_path = new_sub_dir_path\r\n--> 105                 valid, info = self.check_module_valid(sub_dir_path)\r\n    106                 if valid:\r\n    107                     module_name = info['name']\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in check_module_valid(self, module_path)\r\n     70                     sys.path.insert(0, dirname)\r\n     71                     _module = importlib.import_module(\r\n---> 72                         \"{}.module\".format(basename))\r\n     73                     for _item, _cls in inspect.getmembers(\r\n     74                             _module, inspect.isclass):\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/__init__.py in import_module(name, package)\r\n    125                 break\r\n    126             level += 1\r\n--> 127     return _bootstrap._gcd_import(name[level:], package, level)\r\n    128 \r\n    129 \r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _gcd_import(name, package, level)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _find_and_load(name, import_)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _find_and_load_unlocked(name, import_)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _load_unlocked(spec)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap_external.py in exec_module(self, module)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _call_with_frames_removed(f, *args, **kwds)\r\n~/.paddlehub/modules/ernie_gen/module.py in <module>\r\n     28 except:\r\n     29     raise ImportError(\r\n---> 30         \"The module requires additional dependencies: ernie. You can install ernie via 'pip install paddle-ernie'\"\r\n     31     )\r\n     32 import paddlehub as hub\r\nImportError: The module requires additional dependencies: ernie. You can install ernie via 'pip install paddle-ernie'\r\n```\r\n这报错信息也是醉了，能再迷惑一些？？？\r\n版本更新，不兼容没关系，连以前的代码也用不了了，这是什么操作？\r\n这还是在baidu的AIStudio上有运行。\r\n\r\n在paddle2.0下就更别说了，根本连pip install都安装不了。",
        "state": "closed",
        "user": "Green-li",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-28T07:51:48+00:00",
        "updated_at": "2021-04-10T20:13:38+00:00",
        "closed_at": "2021-04-10T20:13:38+00:00",
        "comments_count": [
            "uuleaf",
            "KPatr1ck",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 622,
        "title": "hub install ernie_gen==1.0.2 安装成功，但引入报错",
        "body": "在AIStudio 以及以下docker环境，均无法跑通ernie_gen\r\nnvidia-docker pull registry.baidubce.com/paddlepaddle/paddle:2.0.0-gpu-cuda10.2-cudnn7\r\nnvidia-docker pull registry.baidubce.com/paddlepaddle/paddle:2.0.0-gpu-cuda10.2-cudnn7\r\nnvidia-docker pull registry.baidubce.com/paddlepaddle/paddle:1.8.5-gpu-cuda10.0-cudnn7\r\n\r\n#安装流程\r\n_paddlehub 从1.8.0 到2.0.0 都试了了，paddle-ernie的dev各个版本也都用穷举安装了，没有一个跑通的_\r\npython3 -m pip install paddlehub -i https://mirror.baidu.com/pypi/simple\r\npython3 -m pip install paddle-ernie -i https://mirror.baidu.com/pypi/simple\r\nhub install ernie_gen==1.0.2\r\n![image](https://user-images.githubusercontent.com/6434727/106361321-4886d580-6358-11eb-8f8e-117bf563b2bc.png)\r\n\r\n#跑训练的时候报错\r\n\r\n![image](https://user-images.githubusercontent.com/6434727/106361339-5f2d2c80-6358-11eb-8b4c-c3c532628f6d.png)\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "uuleaf",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-30T16:08:01+00:00",
        "updated_at": "2021-05-08T14:02:34+00:00",
        "closed_at": "2021-05-08T14:02:34+00:00",
        "comments_count": [
            "uuleaf",
            "iceriver97",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 623,
        "title": "Ernie-M (multilingual) availability",
        "body": "hi \r\naccording to paper (https://arxiv.org/abs/2012.15674) ernie-m \r\npre-trained models will be made publicly available\r\n\r\nis it available yet?\r\n\r\nso excited to try since it outperform xtreme task\r\n\r\nthanks",
        "state": "closed",
        "user": "acul3",
        "closed_by": "acul3",
        "created_at": "2021-01-30T17:15:22+00:00",
        "updated_at": "2021-12-04T10:42:10+00:00",
        "closed_at": "2021-02-01T12:39:18+00:00",
        "comments_count": [
            "oyxuan-11",
            "acul3",
            "yaysummeriscoming",
            "wangshuohuan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 626,
        "title": "动态图执行ernie pretrain过程的教程能否更详细",
        "body": "包括使用的数据集、可正常执行的脚本",
        "state": "closed",
        "user": "pangyoki",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-01T10:37:39+00:00",
        "updated_at": "2021-04-13T01:36:34+00:00",
        "closed_at": "2021-04-11T04:22:57+00:00",
        "comments_count": [
            "tianxin1860",
            "pangyoki",
            "pangyoki",
            "stale[bot]",
            "447428054"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 624,
        "title": "想从头训练，不知还是否有教程啥的",
        "body": "",
        "state": "closed",
        "user": "FightingFighting",
        "closed_by": "stale[bot]",
        "created_at": "2021-01-31T22:35:58+00:00",
        "updated_at": "2021-04-10T04:40:28+00:00",
        "closed_at": "2021-04-10T04:40:28+00:00",
        "comments_count": [
            "FightingFighting",
            "TangDonnie",
            "FightingFighting",
            "TangDonnie",
            "FightingFighting",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 627,
        "title": "请问ERNIE-GEN的评价代码中为什么要去掉预测文件中「单词数小于4的句子」呢？",
        "body": "您好，我看到在`eval/tasks/cnndm/cnndm/eval.py:254`的评价代码中，会把预测文件中「单词数小于4的句子」去掉。\r\n\r\n这样去掉句子会导致rouge结果下降吧？请问为什么要这么做呢？\r\n\r\n十分感谢！\r\n\r\n```\r\ndef process_eval(eval_fn):\r\n....\r\n    pred_list = []\r\n    with open(eval_fn, \"r\") as f_in:\r\n        for l in f_in:\r\n            buf = []\r\n            for sentence in l.strip().split(\"[X_SEP]\"):\r\n                sentence = fix_tokenization(sentence)\r\n                if any(get_f1(sentence, s) > 1.0 for s in buf):\r\n                    continue\r\n                s_len = len(sentence.split())\r\n                if s_len <= 4:     # 去掉单词数小于4的句子？\r\n                    continue\r\n                buf.append(sentence)\r\n            if args.duplicate_rate and args.duplicate_rate < 1:\r\n                buf = remove_duplicate(buf, args.duplicate_rate)\r\n            if args.trunc_len:\r\n                num_left = args.trunc_len\r\n                trunc_list = []\r\n                for bit in buf:\r\n                    tk_list = bit.split()\r\n                    n = min(len(tk_list), num_left)\r\n                    trunc_list.append(' '.join(tk_list[:n]))\r\n                    num_left -= n\r\n                    if num_left <= 0:\r\n                        break\r\n            else:\r\n                trunc_list = buf\r\n            line = \"\\n\".join(trunc_list)\r\n            pred_list.append(line)\r\n    with open(eval_fn+'.post', 'w') as f_out:\r\n        for l in pred_list:\r\n            f_out.write(l.replace('\\n', ' [X_SEP] ').strip())\r\n            f_out.write('\\n')\r\n\r\n```",
        "state": "closed",
        "user": "daizh",
        "closed_by": "zhanghan1992",
        "created_at": "2021-02-02T04:27:11+00:00",
        "updated_at": "2021-02-02T05:56:52+00:00",
        "closed_at": "2021-02-02T05:56:52+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 629,
        "title": "ERNIE的tokenizer可以加入special token吗，像bert的[unused1]",
        "body": "如题\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\n我看ERNIE字典里没保留这些special token，如果需要用到的话，应该怎么办呢？",
        "state": "closed",
        "user": "cocoa0409",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-05T07:34:01+00:00",
        "updated_at": "2021-04-14T21:38:28+00:00",
        "closed_at": "2021-04-14T21:38:28+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 630,
        "title": "https://github.com/PaddlePaddle/LARK/tree/develop/ERNIE 找不到",
        "body": "https://github.com/PaddlePaddle/LARK/tree/develop/ERNIE 找不到了",
        "state": "closed",
        "user": "onePlusFour",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-05T09:07:25+00:00",
        "updated_at": "2021-04-27T23:27:01+00:00",
        "closed_at": "2021-04-27T23:27:01+00:00",
        "comments_count": [
            "Meiyim",
            "onePlusFour",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 631,
        "title": "ernie-vil finetuning下游任务卡住",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/f6628ee8dfac2809ad42ebe9c8985fab8d8f2b9b/ernie-vil/finetune.py#L829\r\n\r\n使用flickr30k数据finetune image retrieval和text retrieval任务，运行到这个会卡住\r\npaddle1.8 + python2.7",
        "state": "closed",
        "user": "wanglc2008",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-06T11:40:27+00:00",
        "updated_at": "2021-04-17T20:48:02+00:00",
        "closed_at": "2021-04-17T20:48:02+00:00",
        "comments_count": [
            "TangDonnie",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 632,
        "title": "subprocess.CalledProcessError returned non-zero exit status 1 in ernie-gen/utils/finetune_launch.py",
        "body": "I am trying to fine-tune the ernie-gen base model for squad-qg task, but I get the following error.\r\n\r\n-----------  Configuration Arguments -----------\r\ncurrent_node_ip: 11.111.0.8\r\nlog_prefix:\r\nnode_id: 0\r\nnode_ips: 11.111.0.8\r\nprint_config: True\r\nsplit_log_path: log\r\ntraining_script: ./run_seq2seq.py\r\ntraining_script_args: ['--use_cuda', 'true', '--do_train', 'true', '--do_val', 'true', '--do_test', 'true', '--do_pred', 'false', '--train_set', './Data/datasets/squad_qg//train.tsv', '--dev_set', './Data/datasets/squad_qg//dev.tsv', '--test_set', './Data/datasets/squad_qg//test.tsv', '--pred_set', './Data/datasets/squad_qg//', '--epoch', '10', '--tokenizer', 'FullTokenizer', '--tokenized_input', 'true', '--task_type', 'normal', '--role_type_size', '0', '--turn_type_size', '0', '--max_src_len', '512', '--max_tgt_len', '96', '--max_dec_len', '48', '--hidden_dropout_prob', '0.1', '--attention_probs_dropout_prob', '-1', '--random_noise', 'true', '--noise_prob', '0.7', '--continuous_position', 'true', '--tgt_type_id', '3', '--batch_size', '4', '--learning_rate', '2.5e-5', '--lr_scheduler', 'linear_warmup_decay', '--warmup_proportion', '0.1', '--weight_decay', '0.01', '--weight_sharing', 'True', '--label_smooth', '0.1', '--do_decode', 'true', '--beam_size', '5', '--length_penalty', '1.0', '--init_pretraining_params', 'ernie_gen_base/params', '--vocab_path', 'ernie_gen_base/vocab.txt', '--ernie_config_path', 'ernie_gen_base/ernie_config.json', '--checkpoints', './checkpoints', '--save_and_valid_by_epoch', 'true', '--eval_script', 'sh', './eval/tasks/squad_qg/eval.sh', '--eval_mertrics', 'Bleu_4,METEOR,ROUGE_L', '--random_seed', '83513']\r\n------------------------------------------------\r\nall_trainer_endpoints:  11.111.0.8:6170,11.111.0.8:6171,11.111.0.8:6172,11.111.0.8:6173 , node_id:  0 , current_ip:  11.111.0.8 , num_nodes:  1 , node_ips:  ['11.111.0.8'] , gpus_per_proc:  1 , selected_gpus_per_proc:  [[0], [1], [2], [3]] , nranks:  4\r\nTraceback (most recent call last):\r\n  File \"./utils/finetune_launch.py\", line 175, in <module>\r\n    main(lanch_args)\r\n  File \"./utils/finetune_launch.py\", line 166, in main\r\n    start_procs(args)\r\n  File \"./utils/finetune_launch.py\", line 136, in start_procs\r\n    raise subprocess.CalledProcessError(returncode=procs[i].returncode,\r\nsubprocess.CalledProcessError: Command '['/usr/bin/python3', '-u', './run_seq2seq.py', '--use_cuda', 'true', '--do_train', 'true', '--do_val', 'true', '--do_test', 'true', '--do_pred', 'false', '--train_set', './Data/datasets/squad_qg//train.tsv', '--dev_set', './Data/datasets/squad_qg//dev.tsv', '--test_set', './Data/datasets/squad_qg//test.tsv', '--pred_set', './Data/datasets/squad_qg//', '--epoch', '10', '--tokenizer', 'FullTokenizer', '--tokenized_input', 'true', '--task_type', 'normal', '--role_type_size', '0', '--turn_type_size', '0', '--max_src_len', '512', '--max_tgt_len', '96', '--max_dec_len', '48', '--hidden_dropout_prob', '0.1', '--attention_probs_dropout_prob', '-1', '--random_noise', 'true', '--noise_prob', '0.7', '--continuous_position', 'true', '--tgt_type_id', '3', '--batch_size', '4', '--learning_rate', '2.5e-5', '--lr_scheduler', 'linear_warmup_decay', '--warmup_proportion', '0.1', '--weight_decay', '0.01', '--weight_sharing', 'True', '--label_smooth', '0.1', '--do_decode', 'true', '--beam_size', '5', '--length_penalty', '1.0', '--init_pretraining_params', 'ernie_gen_base/params', '--vocab_path', 'ernie_gen_base/vocab.txt', '--ernie_config_path', 'ernie_gen_base/ernie_config.json', '--checkpoints', './checkpoints', '--save_and_valid_by_epoch', 'true', '--eval_script', 'sh', './eval/tasks/squad_qg/eval.sh', '--eval_mertrics', 'Bleu_4,METEOR,ROUGE_L', '--random_seed', '83513']' returned non-zero exit status 1.",
        "state": "closed",
        "user": "darshan22",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-17T18:05:09+00:00",
        "updated_at": "2021-04-27T23:27:03+00:00",
        "closed_at": "2021-04-27T23:27:03+00:00",
        "comments_count": [
            "Meiyim",
            "darshan22",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 634,
        "title": "请问中文模型2.0版本啥时候开源呢",
        "body": "有时间表吗",
        "state": "closed",
        "user": "Cypress12",
        "closed_by": "stale[bot]",
        "created_at": "2021-02-27T16:21:49+00:00",
        "updated_at": "2021-09-28T23:39:35+00:00",
        "closed_at": "2021-09-28T23:39:35+00:00",
        "comments_count": [
            "XIAOLINSHINE",
            "loujie0822",
            "nbcc",
            "stale[bot]",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 635,
        "title": "tokenizing_ernie.truncate长度问题",
        "body": "在使用tokenizing_ernie对句对进行编码的时候：\r\n\r\nErnieTokenizer.encode(text_a, text_b, max_seq_len-3)\r\n\r\n最后在规范化句子总长度时会调用truncate：\r\nhttps://github.com/PaddlePaddle/ERNIE/blob/develop/ernie/tokenizing_ernie.py#L187\r\n\r\n`\r\ndef truncate(self, id1, id2, seqlen):\r\n        len1 = len(id1)\r\n        len2 = len(id2)\r\n        half = seqlen // 2\r\n        if len1 > len2:\r\n            len1_truncated, len2_truncated = max(half, seqlen - len2), min(\r\n                half, len2)\r\n        else:\r\n            len1_truncated, len2_truncated = min(half, seqlen - len1), max(\r\n                half, seqlen - len1)\r\n        return id1[:len1_truncated], id2[:len2_truncated]\r\n\r\n`\r\n假设原始的text_a,text_b即 id1, id2的长度是138和258，设置的max_len=128 ，那么此时seqlen=max_len-3=125\r\nlen1=138, len2=258, 那么len1_truncated=-13，len2_truncated=62， 那么id1[:len1_truncated]的长度就是125， id2[:len2_truncated]就是62， 经过build_for_ernie加上cls，sep,sep后总长度就是125+62+3=190 ,和预设置的max_len=128不一致？请问这个怎么理解呢？",
        "state": "closed",
        "user": "Mryangkaitong",
        "closed_by": "Mryangkaitong",
        "created_at": "2021-03-02T02:31:13+00:00",
        "updated_at": "2021-03-03T07:17:13+00:00",
        "closed_at": "2021-03-03T07:17:13+00:00",
        "comments_count": [
            "PROoshio"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 636,
        "title": "/dev/shm没有写权限，是否影响CPU多核训练性能",
        "body": "厂内MPI集群，用CPU多核训练，export了CPU_NUM=16，但是从监控看使用的核数只有8核，比设定值少了一半（使用了dataset，使用train_exe.train_from_dataset输入训练数据，dataset线程数设置了16）\r\n看日志有一个报错信息，\r\n/home/disk1/normandy/maybach/app-user-20210311235839-11063/workspace/python27-gcc820/lib/python2.7/site-packages/sklearn/externals/joblib/_multiprocessing_helpers.py:38: UserWarning: [Errno 13] Permission denied. joblib will operate in serial mode\r\nwarnings.warn('%s. joblib will operate in serial mode' % (e,))\r\n不清楚/dev/shm不可用是否影响了CPU多核性能的使用\r\n",
        "state": "closed",
        "user": "yzhw9981",
        "closed_by": "stale[bot]",
        "created_at": "2021-03-14T12:17:34+00:00",
        "updated_at": "2021-05-23T17:37:16+00:00",
        "closed_at": "2021-05-23T17:37:16+00:00",
        "comments_count": [
            "Irene-smile",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 637,
        "title": "Paddle-Inference-Demo  ernie-varlen 运行报错 TensorRT's tensor input requires at least 2 dimensions, but input read_file_0.tmp_0 has 1 dims.",
        "body": "运行 demo  ernie-varlen \r\nhttps://github.com/PaddlePaddle/Paddle-Inference-Demo/tree/master/c%2B%2B/ernie-varlen\r\n\r\nLinux环境：\r\nCentOS Linux release 7.4.1708 (Core) \r\nLinux version 3.10.0-693.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC) ) #1 SMP Tue Aug 22 21:09:27 UTC 2017\r\n\r\n前向库：\r\nhttps://paddle-inference-lib.bj.bcebos.com/2.0.0-rc0-gpu-cuda10-cudnn7-avx-mkl/paddle_inference.tgz\r\n模型：\r\ndemo页面自带的 ernie_model_4.tar.gz\r\nTR:\r\nTensorRT-6.0.1.5.CentOS-7.6.x86_64-gnu.cuda-10.0.cudnn7.6.tar.gz\r\n编译通过，运行模型出现如下错误：\r\n\r\n./build/ernie_varlen_test --model_dir=./ernie_model_4\r\n\r\n报错：\r\n\r\n> I0316 20:46:29.055225 163963 tensorrt_subgraph_pass.cc:118] ---  detect a sub-graph with 81 nodes\r\n\r\nW0316 20:46:29.058228 163963 tensorrt_subgraph_pass.cc:293] The Paddle lib links the 6015 version TensorRT, make sure the runtime TensorRT you are using is no less than this version, otherwise, there might be Segfault!\r\nI0316 20:46:29.058288 163963 tensorrt_subgraph_pass.cc:329] Prepare TRT engine (Optimize model structure, Select OP kernel etc). This process may cost a lot of time.\r\nI0316 20:46:29.536973 163963 op_converter.h:187] trt input [matmul_0.tmp_0] dynamic shape info not set, please check and retry.\r\nterminate called after throwing an instance of 'paddle::platform::EnforceNotMet'\r\n  what():  \r\n\r\n>   --------------------------------------\r\n> C++ Traceback (most recent call last):\r\n>   --------------------------------------\r\n0   paddle_infer::CreatePredictor(paddle::AnalysisConfig const&)\r\n1   paddle_infer::Predictor::Predictor(paddle::AnalysisConfig const&)\r\n2   std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig, (paddle::PaddleEngineKind)2>(paddle::AnalysisConfig const&)\r\n3   paddle::AnalysisPredictor::Init(std::shared_ptr<paddle::framework::Scope> const&, std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n4   paddle::AnalysisPredictor::PrepareProgram(std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n5   paddle::AnalysisPredictor::OptimizeInferenceProgram()\r\n6   paddle::inference::analysis::Analyzer::RunAnalysis(paddle::inference::analysis::Argument*)\r\n7   paddle::inference::analysis::IrAnalysisPass::RunImpl(paddle::inference::analysis::Argument*)\r\n8   paddle::inference::analysis::IRPassManager::Apply(std::unique_ptr<paddle::framework::ir::Graph, std::default_delete<paddle::framework::ir::Graph> >)\r\n9   paddle::framework::ir::Pass::Apply(paddle::framework::ir::Graph*) const\r\n10  paddle::inference::analysis::TensorRtSubgraphPass::ApplyImpl(paddle::framework::ir::Graph*) const\r\n11  paddle::inference::analysis::TensorRtSubgraphPass::CreateTensorRTOp(paddle::framework::ir::Node*, paddle::framework::ir::Graph*, std::vector<std::string, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> >*) const\r\n12  paddle::inference::tensorrt::OpConverter::ConvertBlockToTRTEngine(paddle::framework::BlockDesc*, paddle::framework::Scope const&, std::vector<std::string, std::allocator<std::string> > const&, std::unordered_set<std::string, std::hash<std::string>, std::equal_to<std::string>, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> > const&, paddle::inference::tensorrt::TensorRTEngine*)\r\n13  paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n14  paddle::platform::GetCurrentTraceBackString()\r\n> ----------------------\r\n> Error Message Summary:\r\n> ----------------------\r\n> InvalidArgumentError: TensorRT's tensor input requires at least 2 dimensions, but input read_file_0.tmp_0 has 1 dims.\r\n  [Hint: Expected shape.size() > 1UL, but received shape.size():1 <= 1UL:1.] (at /paddle/paddle/fluid/inference/tensorrt/engine.h:78)\r\n",
        "state": "closed",
        "user": "ustcdane",
        "closed_by": "stale[bot]",
        "created_at": "2021-03-17T02:47:45+00:00",
        "updated_at": "2021-05-28T07:39:41+00:00",
        "closed_at": "2021-05-28T07:39:41+00:00",
        "comments_count": [
            "ustcdane",
            "zlsh80826",
            "ustcdane",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 638,
        "title": "ernie gen的超参length_penalty代表什么呢？什么情况需要修改？",
        "body": "ernie gen的超参length_penalty代表什么呢？什么情况需要修改？",
        "state": "closed",
        "user": "gaolexx",
        "closed_by": "stale[bot]",
        "created_at": "2021-03-19T10:07:11+00:00",
        "updated_at": "2022-04-02T23:30:05+00:00",
        "closed_at": "2021-06-14T06:37:28+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]",
            "network-opinion"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 639,
        "title": "The exact English pretraining data and Chinese pretraining data that are exact same to the BERT paper's pretraining data.",
        "body": "Any one know where to get them?\r\nThank you and thank you.",
        "state": "closed",
        "user": "guotong1988",
        "closed_by": "guotong1988",
        "created_at": "2021-03-23T05:16:40+00:00",
        "updated_at": "2021-04-20T00:52:06+00:00",
        "closed_at": "2021-04-20T00:52:06+00:00",
        "comments_count": [
            "OleNet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 640,
        "title": "中文ERNIE 2.0 版本的预训练模型是否会提供？",
        "body": "看到网页上提供了ERNIE 1.0版本的中文预训练模型，但还是base的，后面会提供更多的关于中文的预训练模型吗，尤其是ERNIE 2.0版本的。",
        "state": "closed",
        "user": "linmuchuiyang",
        "closed_by": "stale[bot]",
        "created_at": "2021-03-23T08:28:02+00:00",
        "updated_at": "2021-05-31T04:56:46+00:00",
        "closed_at": "2021-05-31T04:56:46+00:00",
        "comments_count": [
            "Irene-smile",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 644,
        "title": "develop 分支的python环境配置是什么？",
        "body": "",
        "state": "closed",
        "user": "lonelydancer",
        "closed_by": "lonelydancer",
        "created_at": "2021-04-14T11:35:34+00:00",
        "updated_at": "2021-04-14T11:56:31+00:00",
        "closed_at": "2021-04-14T11:56:31+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 642,
        "title": "Pretrain代码执行不通问题",
        "body": "Code中存在下面2个错误\r\n1.  make_pretrain_data中\r\nfrom propeller.data import feature_pb2, example_pb2\r\n路径错误\r\n2. readme中的脚本，需要加上save_dir 参数，pretrain 中batch_size需要设置\r\n\r\n修改后执行一直卡在如图界面，python 3.6.2，paddlepaddle-gpu 2.0.1\r\n![image](https://user-images.githubusercontent.com/35593767/113546297-483bdc80-961e-11eb-89f1-ee2de875d740.png)\r\n执行顺序按照readme\r\n python3 ./demo/pretrain/make_pretrain_data.py ./demo/pretrain/test.txt ./demo/pretrain/output_file.gz --vocab /home/ytkj/root1/lizheng/2021April/MRC/experiment/DuReader-Checklist-BASELINE/finetuned_model/vocab.txt\r\n\r\npython3 -m paddle.distributed.launch ./demo/pretrain/pretrain.py     --data_dir \"/home/ytkj/root1/lizheng/2021April/pretrain/ERNIE-develop/demo/pretrain/output_file.gz\"     --from_pretrained /home/ytkj/root1/lizheng/2021April/model/model-ernie1.0.1 --save_dir ./demo/pretrain/Output\r\n\r\n使用数据为readme给出示例\r\n![AQ96_ SEB_`~Q9EGL4V IE3](https://user-images.githubusercontent.com/35593767/113546443-93ee8600-961e-11eb-85f7-5b7372ecda69.jpg)\r\n\r\n执行view_pretrian_gz.py显示如下，未出现空的问题\r\n```\r\n***content\r\n0 0 3 5 5 8 8 8 8 13 13 16 16 19 21 21 24 26 26 29 29 32 32 35 37 37 40 42 42 45 45 48 50 52 52 55 55 55 59 59 62 62 65 65 68 70 70 73 75 75 78 78 81 81 81 85 87 87 87 87 92 94 94 97 99 101 101 104 106 106 109 111 111 114 116 118 118 121 121 124 126 126 129 131 131 134 136 136 139 141 141 141 145 147 147 150 150 153 153 156 158 158 161 161 161 165 167 169 169 172 172 175 177 177 180 182 182 185 187 187 190 192 192 195 197 197 200 200 203 205 207 207 210 212 212 215 215 218 220 220 223 225 225 228 228 231 231 234 236 236 239 239 242 244 244 244 244 249 251 251 254 256 258 258 261 261 261 261 266 268 268 271 273 275 277 277 277 281 283 283 283 283 283 283 290 292 292 292 296 298 300 300 303 303 306 306 309 311 311 314 316 318 320 322 322 322 326 326 329 331 331 334 334 337 339 339 342 344 346 346 349 349 352 354 354 357 359 359 362 364 364 367 367 370 372 372 375 375 378 380 382 385 385 388 390 390 390 390 395 395 398 400 400 403 405 407 407 410 410 413 415 415 418 418 421 421 424 426 426 429 431 431 434 434 437 439 439 442 442 445 447 447 450 450 453\r\n179|18|10|217|29|1092|500|405|545|166|229|179|150|6|215|307|6|282|73|22|107|411|143|43|1125|642|5|7|232|18|147|4|158|908|106|591|130|335|479|37|193|220|147|18|5|7|106|12043|179|18|1053|93|1571|528|73|14|2067|1001|426|38|5|175|29|4|190|159|179|6|159|559|6|150|130|14|51|122|82|193|498|107|287|70|5|394|788|83|66|21|12043|179|18|50|115|1403|117|47|309|1125|642|4|13|15|53|220|73|102|5|2646|313|22|107|158|352|91|5|53|38|107|91|393|12|81|202|200|678|2011|426|234|39|5|91|38|12043|168|672|179|18|5|264|474|54|287|29|238|10|27|8|54|395|82|21|205|12|16|48|172|1009|5|7|375|12043|51|179|18|168|89|1125|642|5|328|606|4|748|11|422|1710|107|6|188|861|16|302|256|631|107|422|749|130|103|5|422|140|179|18|68|89|518|48|394|373|4|83|11|422|905|2159|312|155|9|263|13|678|2011|5|239|38|12043|158|312|36|88|440|4|179|18|5|34|117|518|303|607|16|533|31|96|1345|71|117|4|268|1227|203|623|5|68|419|441|685|36|195|4|196|13|102|5|147|18|34|87|14|179|18|648|102|240|123|5|276|756|4|600|175|179|18|5|120|537|34|117|4|339|268|508|139|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 0 4 6 8 10 10 13 15 15 18 18 21 21 24 24 27 29 29 32 34 36 36 39 39 42 44 44 47 49 49 52 52 52 52 57 57 60 62 64 64 64 68 68 71 73 75 75 78 78 78 82 84 84 87 89 91 91 94 94 97 97 100 102 102 105 105 108 110 110 113 115 115 118 120 122 124 126 126 129 129 132 132 135 137 139 141 141 144 144 147 149 151 151 154 156 158 158 161 161 164 166 168 168 171 173 173 173 177 177 180 180 183 185 187 189 189 192 192 195 197 197 197 201 201 204 206 206 209 211 211 214 216 216 219 219 222 224 224 227 227 230 230 233 233 233 237 237 240 240 243 245 245 245 249 249 252 254 254 257 257 257 261 261 264 264 267 269 269 272 272 272 276 278 278 281 283 283 286 288 288 291 291 294 294 297 299 299 302 304 304 307 309 309 312 312 315 317 317 320 322 322 325 325 328 328 328 332 334 334 337 339 341 341 344 344 347 347 350 352 354 356 356 359 361 361 364 364 367 369 371 373 373 376 378 378 381 383 383 386 388 390 390 393 395 397 397 400 402 404 406 406 409\r\n644|137|1265|78|77|10|7|106|52|451|1204|1814|629|31|58|347|635|5|1265|85|4|113|170|277|87|11|5|128|367|4|172|10|1036|2148|628|8|602|2148|29|5|101|1406|497|7|314|12043|380|479|37|1046|1902|292|5|7|106|4|10|1265|85|382|60|502|17|49|1439|73|83|33|5|1647|1238|4|311|132|1265|1647|12043|105|9|8|178|644|137|1265|10|3128|1647|1439|73|83|33|5|4|153|3128|1647|5|2713|85|2279|19|4|635|128|367|5|1204|635|114|7|314|34|325|36|4|113|48|22|67|190|31|597|87|39|629|58|5|182|561|12043|578|132|5|1647|1238|1210|224|1306|176|379|1742|557|374|763|644|137|1265|60|223|390|505|1057|575|1647|1265|1741|985|4|196|13|575|1647|1265|48|22|1204|575|39|805|662|335|16|373|5|1647|1238|4|47|180|54|644|137|1265|32|1204|575|39|1238|712|5|1529|1098|10|9|309|156|847|12043|342|178|11|984|382|643|136|167|346|139|5|914|1010|4|11|101|1406|1752|103|490|596|101|4|174|1265|85|157|364|11|101|76|4|845|10|1204|575|39|1647|1238|5|469|314|4|113|197|496|47|76|1265|85|155|520|578|1647|1238|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 3 5 5 8 8 8 8 13 13 16 16 19 21 21 24 26 26 29 29 32 32 35 37 37 40 42 42 45 45 48 50 52 52 55 55 55 59 59 62 62 65 65 68 70 70 73 75 75 78 78 81 81 81 85 87 87 87 87 92 94 94 97 99 101 101 104 106 106 109 111 111 114 116 118 118 121 121 124 126 126 129 131 131 134 136 136 139 141 141 141 145 147 147 150 150 153 153 156 158 158 161 161 161 165 167 169 169 172 172 175 177 177 180 182 182 185 187 187 190 192 192 195 197 197 200 200 203 205 207 207 210 212 212 215 215 218 220 220 223 225 225 228 228 231 231 234 236 236 239 239 242 244 244 244 244 249 251 251 254 256 258 258 261 261 261 261 266 268 268 271 273 275 277 277 277 281 283 283 283 283 283 283 290 292 292 292 296 298 300 300 303 303 306 306 309 311 311 314 316 318 320 322 322 322 326 326 329 331 331 334 334 337 339 339 342 344 346 346 349 349 352 354 354 357 359 359 362 364 364 367 367 370 372 372 375 375 378 380 382 385 385 388 390 390 390 390 395 395 398 400 400 403 405 407 407 410 410 413 415 415 418 418 421 421 424 426 426 429 431 431 434 434 437 439 439 442 442 445 447 447 450 450 453\r\n179|18|10|217|29|1092|500|405|545|166|229|179|150|6|215|307|6|282|73|22|107|411|143|43|1125|642|5|7|232|18|147|4|158|908|106|591|130|335|479|37|193|220|147|18|5|7|106|12043|179|18|1053|93|1571|528|73|14|2067|1001|426|38|5|175|29|4|190|159|179|6|159|559|6|150|130|14|51|122|82|193|498|107|287|70|5|394|788|83|66|21|12043|179|18|50|115|1403|117|47|309|1125|642|4|13|15|53|220|73|102|5|2646|313|22|107|158|352|91|5|53|38|107|91|393|12|81|202|200|678|2011|426|234|39|5|91|38|12043|168|672|179|18|5|264|474|54|287|29|238|10|27|8|54|395|82|21|205|12|16|48|172|1009|5|7|375|12043|51|179|18|168|89|1125|642|5|328|606|4|748|11|422|1710|107|6|188|861|16|302|256|631|107|422|749|130|103|5|422|140|179|18|68|89|518|48|394|373|4|83|11|422|905|2159|312|155|9|263|13|678|2011|5|239|38|12043|158|312|36|88|440|4|179|18|5|34|117|518|303|607|16|533|31|96|1345|71|117|4|268|1227|203|623|5|68|419|441|685|36|195|4|196|13|102|5|147|18|34|87|14|179|18|648|102|240|123|5|276|756|4|600|175|179|18|5|120|537|34|117|4|339|268|508|139|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 0 4 6 8 10 10 13 15 15 18 18 21 21 24 24 27 29 29 32 34 36 36 39 39 42 44 44 47 49 49 52 52 52 52 57 57 60 62 64 64 64 68 68 71 73 75 75 78 78 78 82 84 84 87 89 91 91 94 94 97 97 100 102 102 105 105 108 110 110 113 115 115 118 120 122 124 126 126 129 129 132 132 135 137 139 141 141 144 144 147 149 151 151 154 156 158 158 161 161 164 166 168 168 171 173 173 173 177 177 180 180 183 185 187 189 189 192 192 195 197 197 197 201 201 204 206 206 209 211 211 214 216 216 219 219 222 224 224 227 227 230 230 233 233 233 237 237 240 240 243 245 245 245 249 249 252 254 254 257 257 257 261 261 264 264 267 269 269 272 272 272 276 278 278 281 283 283 286 288 288 291 291 294 294 297 299 299 302 304 304 307 309 309 312 312 315 317 317 320 322 322 325 325 328 328 328 332 334 334 337 339 341 341 344 344 347 347 350 352 354 356 356 359 361 361 364 364 367 369 371 373 373 376 378 378 381 383 383 386 388 390 390 393 395 397 397 400 402 404 406 406 409\r\n644|137|1265|78|77|10|7|106|52|451|1204|1814|629|31|58|347|635|5|1265|85|4|113|170|277|87|11|5|128|367|4|172|10|1036|2148|628|8|602|2148|29|5|101|1406|497|7|314|12043|380|479|37|1046|1902|292|5|7|106|4|10|1265|85|382|60|502|17|49|1439|73|83|33|5|1647|1238|4|311|132|1265|1647|12043|105|9|8|178|644|137|1265|10|3128|1647|1439|73|83|33|5|4|153|3128|1647|5|2713|85|2279|19|4|635|128|367|5|1204|635|114|7|314|34|325|36|4|113|48|22|67|190|31|597|87|39|629|58|5|182|561|12043|578|132|5|1647|1238|1210|224|1306|176|379|1742|557|374|763|644|137|1265|60|223|390|505|1057|575|1647|1265|1741|985|4|196|13|575|1647|1265|48|22|1204|575|39|805|662|335|16|373|5|1647|1238|4|47|180|54|644|137|1265|32|1204|575|39|1238|712|5|1529|1098|10|9|309|156|847|12043|342|178|11|984|382|643|136|167|346|139|5|914|1010|4|11|101|1406|1752|103|490|596|101|4|174|1265|85|157|364|11|101|76|4|845|10|1204|575|39|1647|1238|5|469|314|4|113|197|496|47|76|1265|85|155|520|578|1647|1238|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 3 5 5 8 8 8 8 13 13 16 16 19 21 21 24 26 26 29 29 32 32 35 37 37 40 42 42 45 45 48 50 52 52 55 55 55 59 59 62 62 65 65 68 70 70 73 75 75 78 78 81 81 81 85 87 87 87 87 92 94 94 97 99 101 101 104 106 106 109 111 111 114 116 118 118 121 121 124 126 126 129 131 131 134 136 136 139 141 141 141 145 147 147 150 150 153 153 156 158 158 161 161 161 165 167 169 169 172 172 175 177 177 180 182 182 185 187 187 190 192 192 195 197 197 200 200 203 205 207 207 210 212 212 215 215 218 220 220 223 225 225 228 228 231 231 234 236 236 239 239 242 244 244 244 244 249 251 251 254 256 258 258 261 261 261 261 266 268 268 271 273 275 277 277 277 281 283 283 283 283 283 283 290 292 292 292 296 298 300 300 303 303 306 306 309 311 311 314 316 318 320 322 322 322 326 326 329 331 331 334 334 337 339 339 342 344 346 346 349 349 352 354 354 357 359 359 362 364 364 367 367 370 372 372 375 375 378 380 382 385 385 388 390 390 390 390 395 395 398 400 400 403 405 407 407 410 410 413 415 415 418 418 421 421 424 426 426 429 431 431 434 434 437 439 439 442 442 445 447 447 450 450 453\r\n179|18|10|217|29|1092|500|405|545|166|229|179|150|6|215|307|6|282|73|22|107|411|143|43|1125|642|5|7|232|18|147|4|158|908|106|591|130|335|479|37|193|220|147|18|5|7|106|12043|179|18|1053|93|1571|528|73|14|2067|1001|426|38|5|175|29|4|190|159|179|6|159|559|6|150|130|14|51|122|82|193|498|107|287|70|5|394|788|83|66|21|12043|179|18|50|115|1403|117|47|309|1125|642|4|13|15|53|220|73|102|5|2646|313|22|107|158|352|91|5|53|38|107|91|393|12|81|202|200|678|2011|426|234|39|5|91|38|12043|168|672|179|18|5|264|474|54|287|29|238|10|27|8|54|395|82|21|205|12|16|48|172|1009|5|7|375|12043|51|179|18|168|89|1125|642|5|328|606|4|748|11|422|1710|107|6|188|861|16|302|256|631|107|422|749|130|103|5|422|140|179|18|68|89|518|48|394|373|4|83|11|422|905|2159|312|155|9|263|13|678|2011|5|239|38|12043|158|312|36|88|440|4|179|18|5|34|117|518|303|607|16|533|31|96|1345|71|117|4|268|1227|203|623|5|68|419|441|685|36|195|4|196|13|102|5|147|18|34|87|14|179|18|648|102|240|123|5|276|756|4|600|175|179|18|5|120|537|34|117|4|339|268|508|139|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 0 4 6 8 10 10 13 15 15 18 18 21 21 24 24 27 29 29 32 34 36 36 39 39 42 44 44 47 49 49 52 52 52 52 57 57 60 62 64 64 64 68 68 71 73 75 75 78 78 78 82 84 84 87 89 91 91 94 94 97 97 100 102 102 105 105 108 110 110 113 115 115 118 120 122 124 126 126 129 129 132 132 135 137 139 141 141 144 144 147 149 151 151 154 156 158 158 161 161 164 166 168 168 171 173 173 173 177 177 180 180 183 185 187 189 189 192 192 195 197 197 197 201 201 204 206 206 209 211 211 214 216 216 219 219 222 224 224 227 227 230 230 233 233 233 237 237 240 240 243 245 245 245 249 249 252 254 254 257 257 257 261 261 264 264 267 269 269 272 272 272 276 278 278 281 283 283 286 288 288 291 291 294 294 297 299 299 302 304 304 307 309 309 312 312 315 317 317 320 322 322 325 325 328 328 328 332 334 334 337 339 341 341 344 344 347 347 350 352 354 356 356 359 361 361 364 364 367 369 371 373 373 376 378 378 381 383 383 386 388 390 390 393 395 397 397 400 402 404 406 406 409\r\n644|137|1265|78|77|10|7|106|52|451|1204|1814|629|31|58|347|635|5|1265|85|4|113|170|277|87|11|5|128|367|4|172|10|1036|2148|628|8|602|2148|29|5|101|1406|497|7|314|12043|380|479|37|1046|1902|292|5|7|106|4|10|1265|85|382|60|502|17|49|1439|73|83|33|5|1647|1238|4|311|132|1265|1647|12043|105|9|8|178|644|137|1265|10|3128|1647|1439|73|83|33|5|4|153|3128|1647|5|2713|85|2279|19|4|635|128|367|5|1204|635|114|7|314|34|325|36|4|113|48|22|67|190|31|597|87|39|629|58|5|182|561|12043|578|132|5|1647|1238|1210|224|1306|176|379|1742|557|374|763|644|137|1265|60|223|390|505|1057|575|1647|1265|1741|985|4|196|13|575|1647|1265|48|22|1204|575|39|805|662|335|16|373|5|1647|1238|4|47|180|54|644|137|1265|32|1204|575|39|1238|712|5|1529|1098|10|9|309|156|847|12043|342|178|11|984|382|643|136|167|346|139|5|914|1010|4|11|101|1406|1752|103|490|596|101|4|174|1265|85|157|364|11|101|76|4|845|10|1204|575|39|1647|1238|5|469|314|4|113|197|496|47|76|1265|85|155|520|578|1647|1238|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 3 5 5 8 8 8 8 13 13 16 16 19 21 21 24 26 26 29 29 32 32 35 37 37 40 42 42 45 45 48 50 52 52 55 55 55 59 59 62 62 65 65 68 70 70 73 75 75 78 78 81 81 81 85 87 87 87 87 92 94 94 97 99 101 101 104 106 106 109 111 111 114 116 118 118 121 121 124 126 126 129 131 131 134 136 136 139 141 141 141 145 147 147 150 150 153 153 156 158 158 161 161 161 165 167 169 169 172 172 175 177 177 180 182 182 185 187 187 190 192 192 195 197 197 200 200 203 205 207 207 210 212 212 215 215 218 220 220 223 225 225 228 228 231 231 234 236 236 239 239 242 244 244 244 244 249 251 251 254 256 258 258 261 261 261 261 266 268 268 271 273 275 277 277 277 281 283 283 283 283 283 283 290 292 292 292 296 298 300 300 303 303 306 306 309 311 311 314 316 318 320 322 322 322 326 326 329 331 331 334 334 337 339 339 342 344 346 346 349 349 352 354 354 357 359 359 362 364 364 367 367 370 372 372 375 375 378 380 382 385 385 388 390 390 390 390 395 395 398 400 400 403 405 407 407 410 410 413 415 415 418 418 421 421 424 426 426 429 431 431 434 434 437 439 439 442 442 445 447 447 450 450 453\r\n179|18|10|217|29|1092|500|405|545|166|229|179|150|6|215|307|6|282|73|22|107|411|143|43|1125|642|5|7|232|18|147|4|158|908|106|591|130|335|479|37|193|220|147|18|5|7|106|12043|179|18|1053|93|1571|528|73|14|2067|1001|426|38|5|175|29|4|190|159|179|6|159|559|6|150|130|14|51|122|82|193|498|107|287|70|5|394|788|83|66|21|12043|179|18|50|115|1403|117|47|309|1125|642|4|13|15|53|220|73|102|5|2646|313|22|107|158|352|91|5|53|38|107|91|393|12|81|202|200|678|2011|426|234|39|5|91|38|12043|168|672|179|18|5|264|474|54|287|29|238|10|27|8|54|395|82|21|205|12|16|48|172|1009|5|7|375|12043|51|179|18|168|89|1125|642|5|328|606|4|748|11|422|1710|107|6|188|861|16|302|256|631|107|422|749|130|103|5|422|140|179|18|68|89|518|48|394|373|4|83|11|422|905|2159|312|155|9|263|13|678|2011|5|239|38|12043|158|312|36|88|440|4|179|18|5|34|117|518|303|607|16|533|31|96|1345|71|117|4|268|1227|203|623|5|68|419|441|685|36|195|4|196|13|102|5|147|18|34|87|14|179|18|648|102|240|123|5|276|756|4|600|175|179|18|5|120|537|34|117|4|339|268|508|139|12043\r\n***end\r\n==============================\r\n***content\r\n0 0 0 4 6 8 10 10 13 15 15 18 18 21 21 24 24 27 29 29 32 34 36 36 39 39 42 44 44 47 49 49 52 52 52 52 57 57 60 62 64 64 64 68 68 71 73 75 75 78 78 78 82 84 84 87 89 91 91 94 94 97 97 100 102 102 105 105 108 110 110 113 115 115 118 120 122 124 126 126 129 129 132 132 135 137 139 141 141 144 144 147 149 151 151 154 156 158 158 161 161 164 166 168 168 171 173 173 173 177 177 180 180 183 185 187 189 189 192 192 195 197 197 197 201 201 204 206 206 209 211 211 214 216 216 219 219 222 224 224 227 227 230 230 233 233 233 237 237 240 240 243 245 245 245 249 249 252 254 254 257 257 257 261 261 264 264 267 269 269 272 272 272 276 278 278 281 283 283 286 288 288 291 291 294 294 297 299 299 302 304 304 307 309 309 312 312 315 317 317 320 322 322 325 325 328 328 328 332 334 334 337 339 341 341 344 344 347 347 350 352 354 356 356 359 361 361 364 364 367 369 371 373 373 376 378 378 381 383 383 386 388 390 390 393 395 397 397 400 402 404 406 406 409\r\n644|137|1265|78|77|10|7|106|52|451|1204|1814|629|31|58|347|635|5|1265|85|4|113|170|277|87|11|5|128|367|4|172|10|1036|2148|628|8|602|2148|29|5|101|1406|497|7|314|12043|380|479|37|1046|1902|292|5|7|106|4|10|1265|85|382|60|502|17|49|1439|73|83|33|5|1647|1238|4|311|132|1265|1647|12043|105|9|8|178|644|137|1265|10|3128|1647|1439|73|83|33|5|4|153|3128|1647|5|2713|85|2279|19|4|635|128|367|5|1204|635|114|7|314|34|325|36|4|113|48|22|67|190|31|597|87|39|629|58|5|182|561|12043|578|132|5|1647|1238|1210|224|1306|176|379|1742|557|374|763|644|137|1265|60|223|390|505|1057|575|1647|1265|1741|985|4|196|13|575|1647|1265|48|22|1204|575|39|805|662|335|16|373|5|1647|1238|4|47|180|54|644|137|1265|32|1204|575|39|1238|712|5|1529|1098|10|9|309|156|847|12043|342|178|11|984|382|643|136|167|346|139|5|914|1010|4|11|101|1406|1752|103|490|596|101|4|174|1265|85|157|364|11|101|76|4|845|10|1204|575|39|1647|1238|5|469|314|4|113|197|496|47|76|1265|85|155|520|578|1647|1238|12043\r\n***end\r\n==============================\r\n```\r\n\r\n降低paddle版本到1.8又出现版本报错\r\nRuntimeError: propeller 0.2 requires paddle 2.0+, got 1.8.5",
        "state": "closed",
        "user": "447428054",
        "closed_by": "stale[bot]",
        "created_at": "2021-04-05T06:51:15+00:00",
        "updated_at": "2021-07-01T15:12:33+00:00",
        "closed_at": "2021-06-22T13:27:29+00:00",
        "comments_count": [
            "Meiyim",
            "447428054",
            "447428054",
            "Meiyim",
            "447428054",
            "Meiyim",
            "447428054",
            "447428054",
            "Meiyim",
            "447428054",
            "447428054",
            "stale[bot]",
            "kaishxu",
            "447428054",
            "kaishxu"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 643,
        "title": "第一次 eval 之后 50 step 就卡死，稳定复现，请问可能是什么原因？",
        "body": "![image](https://user-images.githubusercontent.com/4951846/114339018-e122a880-9b86-11eb-85d9-1048d46f256e.png)\r\n",
        "state": "closed",
        "user": "modkzs",
        "closed_by": "stale[bot]",
        "created_at": "2021-04-12T04:02:02+00:00",
        "updated_at": "2021-06-29T03:39:16+00:00",
        "closed_at": "2021-06-29T03:39:16+00:00",
        "comments_count": [
            "OleNet",
            "modkzs",
            "OleNet",
            "modkzs",
            "jeffzhengye",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 647,
        "title": "ernie gen 使用ernie1.0模型embding报超限",
        "body": "fluid.layers.Print(emb)\r\nTensor[embedding_0.tmp_0]\r\n      shape: [2,60,768,]\r\n      dtype: f\r\n      data: 0.0585266,-1.94562,-0.00707711,0.0469638,0.0341952,0.0208065,0.00281218,0.0415801,0.00205135,-0.0208324,0.0759426,-0.039805,-0.0627916,0.063557,-0.000659953,-     0.0229071,-0.00485523,-0.0150948,-0.00476583,-0.0729113,\r\n1619435593      The place is:CUDAPlace(0)\r\nfluid.layers.Print(emb_id)\r\nTensor[placeholder_0]\r\n      shape: [2,60,1,]\r\n      dtype: l\r\n      data: 1,2219,157,12045,900,835,12045,462,6309,12045,340,980,92,12045,283,284,59,959,61,15,\r\nError: /paddle/paddle/fluid/operators/lookup_table_op.cu:43 Assertion `id < N` failed. Variable value (input) of OP(fluid.layers.embedding) expected >= 0 and < 2, but got 3. Please check input value.\r\n",
        "state": "closed",
        "user": "sgcsky",
        "closed_by": "sgcsky",
        "created_at": "2021-04-26T11:30:43+00:00",
        "updated_at": "2021-04-27T03:43:20+00:00",
        "closed_at": "2021-04-27T03:43:20+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 645,
        "title": "请问有propeller的相关资料吗或者使用说明",
        "body": "1、propeller的作用和功能是什么样的?有相关的使用说明吗\r\n2、ernie动态图训练保存模型保存的是.pbparams的格式，这个和checkpoint模型有什么区别，或者说动态图如何保存称为checkpoint格式的模型？",
        "state": "closed",
        "user": "dickobe",
        "closed_by": "stale[bot]",
        "created_at": "2021-04-15T12:40:36+00:00",
        "updated_at": "2021-06-25T12:24:28+00:00",
        "closed_at": "2021-06-25T12:24:28+00:00",
        "comments_count": [
            "Meiyim",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 646,
        "title": "paddle 1.8 ernie生成文本分类模型后，使用paddle inference tensorRT库报错",
        "body": "docker环境\r\ndocker pull hub.baidubce.com/paddlepaddle/paddle:1.8.0-gpu-cuda10.0-cudnn7-trt6\r\npython2.7 / ernie v2.4.0\r\n操作步骤：\r\n运行 finetune_classifier_dygraph.py,得到model后，使用paddle_inference_demo中的例子做推理加速。\r\n\r\n错误信息：\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Operator skip_layernorm has not been registered\r\n  [Hint: op_info_ptr should not be null.] at (/paddle /trt_refine_int8/paddle/fluid/framework/op_info.h:140)\r\n\r\n相关代码&模型:\r\n链接: https://pan.baidu.com/s/1xVIyc2ntboVq_f7hse4uyg 提取码: gudn 复制这段内容后打开百度网盘手机App，操作更方便哦\r\n\r\n",
        "state": "closed",
        "user": "lonelydancer",
        "closed_by": "stale[bot]",
        "created_at": "2021-04-22T05:53:10+00:00",
        "updated_at": "2021-08-10T15:15:48+00:00",
        "closed_at": "2021-08-10T15:15:48+00:00",
        "comments_count": [
            "lonelydancer",
            "OleNet",
            "lonelydancer",
            "shangzhizhou",
            "lonelydancer",
            "shangzhizhou",
            "fengxiaoshuai",
            "lonelydancer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 648,
        "title": "您好，运行ernie-vil的时候遇到了问题，想请教一下问题出在哪里",
        "body": "运行 bash run_inference.sh vcr qa test conf/vcr/model_conf_vcr model/vcr_base/vocab.txt model/vcr_base/ernie_vil_config.base.json model/vcr_base/params res 时，会在\r\n\r\n逐行检查是在\r\n```\r\n    if args.do_test: \r\n\r\n        predict = predict_wrapper(\r\n            args,\r\n            exe,\r\n            ernie_config,\r\n            task_group,\r\n            test_prog=test_prog,\r\n            pyreader=test_pyreader,\r\n            graph_vars=model_outputs)\r\n\r\n        result = predict()\r\n```\r\n断开的，报错类型是\r\n```\r\n\r\nW0430 16:08:51.703033 47477 device_context.cc:252] Please NOTE: device: 6, CUDA Capability: 75, Driver API Version: 10.1, Runtime API Version: 10.0\r\nW0430 16:08:51.706655 47477 device_context.cc:260] device: 6, cuDNN Version: 7.6.\r\nW0430 16:08:55.096704 47477 init.cc:226] Warning: PaddlePaddle catches a failure signal, it may not work properly\r\nW0430 16:08:55.096745 47477 init.cc:228] You could check whether you killed PaddlePaddle thread/process accidentally or report the case to PaddlePaddle\r\nW0430 16:08:55.096748 47477 init.cc:231] The detail failure signal is:\r\n\r\nW0430 16:08:55.096752 47477 init.cc:234] *** Aborted at 1619770135 (unix time) try \"date -d @1619770135\" if you are using GNU date ***\r\nW0430 16:08:55.097874 47477 init.cc:234] PC: @                0x0 (unknown)\r\nW0430 16:08:55.097999 47477 init.cc:234] *** SIGBUS (@0x7f0f41ed000a) received by PID 47477 (TID 0x7f11829d9740) from PID 1106051082; stack trace: ***\r\nW0430 16:08:55.098835 47477 init.cc:234]     @     0x7f11827968a0 (unknown)\r\nW0430 16:08:55.099324 47477 init.cc:234]     @     0x7f10df79cfaa mdb_page_search\r\nW0430 16:08:55.099797 47477 init.cc:234]     @     0x7f10df79e665 mdb_cursor_set\r\nW0430 16:08:55.100253 47477 init.cc:234]     @     0x7f10df79f34e mdb_get\r\nW0430 16:08:55.100703 47477 init.cc:234]     @     0x7f10df79426d trans_get\r\nW0430 16:08:55.101560 47477 init.cc:234]     @     0x7f1182acd2f4 PyEval_EvalFrameEx\r\nW0430 16:08:55.102403 47477 init.cc:234]     @     0x7f1182aceb19 PyEval_EvalCodeEx\r\nW0430 16:08:55.103186 47477 init.cc:234]     @     0x7f1182a576ea function_call\r\nW0430 16:08:55.104038 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.104800 47477 init.cc:234]     @     0x7f1182a41a5d instancemethod_call\r\nW0430 16:08:55.105628 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.106406 47477 init.cc:234]     @     0x7f1182a8bb04 slot_tp_init\r\nW0430 16:08:55.107197 47477 init.cc:234]     @     0x7f1182a883bb type_call\r\nW0430 16:08:55.108031 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.108855 47477 init.cc:234]     @     0x7f1182ac9199 PyEval_EvalFrameEx\r\nW0430 16:08:55.109688 47477 init.cc:234]     @     0x7f1182aceb19 PyEval_EvalCodeEx\r\nW0430 16:08:55.110455 47477 init.cc:234]     @     0x7f1182a577d7 function_call\r\nW0430 16:08:55.111289 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.112067 47477 init.cc:234]     @     0x7f1182a41a5d instancemethod_call\r\nW0430 16:08:55.112900 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.113696 47477 init.cc:234]     @     0x7f1182a8bb04 slot_tp_init\r\nW0430 16:08:55.114476 47477 init.cc:234]     @     0x7f1182a883bb type_call\r\nW0430 16:08:55.115315 47477 init.cc:234]     @     0x7f1182a32b83 PyObject_Call\r\nW0430 16:08:55.116145 47477 init.cc:234]     @     0x7f1182ac9199 PyEval_EvalFrameEx\r\nW0430 16:08:55.116973 47477 init.cc:234]     @     0x7f1182aceb19 PyEval_EvalCodeEx\r\nW0430 16:08:55.117791 47477 init.cc:234]     @     0x7f1182acbfe8 PyEval_EvalFrameEx\r\nW0430 16:08:55.118633 47477 init.cc:234]     @     0x7f1182aceb19 PyEval_EvalCodeEx\r\nW0430 16:08:55.119463 47477 init.cc:234]     @     0x7f1182acbfe8 PyEval_EvalFrameEx\r\nW0430 16:08:55.120293 47477 init.cc:234]     @     0x7f1182aceb19 PyEval_EvalCodeEx\r\nW0430 16:08:55.121110 47477 init.cc:234]     @     0x7f1182aced3a PyEval_EvalCode\r\nW0430 16:08:55.121901 47477 init.cc:234]     @     0x7f1182ae80ad run_mod\r\nW0430 16:08:55.122728 47477 init.cc:234]     @     0x7f1182ae9258 PyRun_FileExFlags\r\n```",
        "state": "closed",
        "user": "2235161562",
        "closed_by": "2235161562",
        "created_at": "2021-04-30T08:14:05+00:00",
        "updated_at": "2021-05-21T11:09:05+00:00",
        "closed_at": "2021-05-21T11:09:05+00:00",
        "comments_count": [
            "yinweichong"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 649,
        "title": "您好, 嘗試重製ernie-vil-VCR-task pretrained model 在 VCR task validation split 的結果, 表現不理想 ",
        "body": "ERNIE團隊您們好,\r\n\r\n目前拿公開的ernie-vil-VCR-task-pretrained model (large & base) 預訓練好的參數, 重製VCR task的結果, 但表現遠低於版上的結果:\r\n1. model-ernie-vil-large-VCR-task-pre-en 在 VCR-QA validation split 僅得 avg acc: 23.5\r\n2. model-ernie-vil-base-VCR-task-pre-en 在 VCR-QA validation split 僅得 avg acc: 43.9\r\n\r\n嘗試找出問題原因, 但還是有幾個問題想請教:\r\n1. 從results.txt 結果實際算acc, large可得 65, base 可得 67, 檢查代碼似乎沒問題\r\n![acc](https://user-images.githubusercontent.com/20028769/116684968-ef0f6080-a9b1-11eb-92ca-73fd48eceb84.png)\r\n\r\n2. 檢查results.txt 結果, 每個qid multiple choices (4) 的 softmax scores 都差不多落在 0.25, 推測提供的預訓練模型參數有些問題, 否則應該對multiple choices 問題的選擇更有自信\r\n\r\n\r\n希望您們能提供一些方向解決無法重製實驗結果的問題, 感謝您們\r\n\r\n",
        "state": "closed",
        "user": "Mallory24",
        "closed_by": "stale[bot]",
        "created_at": "2021-04-30T10:49:57+00:00",
        "updated_at": "2021-08-27T22:25:45+00:00",
        "closed_at": "2021-08-27T22:25:45+00:00",
        "comments_count": [
            "yinweichong",
            "Mallory24",
            "yinweichong",
            "Tclz",
            "Tclz",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 666,
        "title": "Can't find ERNIE-Gram Pretrained Model",
        "body": "The open-source link of ERNIE-Gram is invalid and I can't open it.",
        "state": "closed",
        "user": "boy-be-ambitious",
        "closed_by": "boy-be-ambitious",
        "created_at": "2021-05-21T02:26:19+00:00",
        "updated_at": "2021-05-21T02:27:30+00:00",
        "closed_at": "2021-05-21T02:27:30+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 650,
        "title": "ERNIE是基于字级别训练的吗？最后能得到的也是字向量？",
        "body": "",
        "state": "closed",
        "user": "lonngxiang",
        "closed_by": "zhanghan1992",
        "created_at": "2021-05-07T07:44:49+00:00",
        "updated_at": "2021-05-10T03:01:21+00:00",
        "closed_at": "2021-05-10T03:01:20+00:00",
        "comments_count": [
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 664,
        "title": "Ernie-doc 模型 further pretrain",
        "body": "请问erniedoc 的中文base模型支持在自己的领域语料上做further pretrain吗？\r\n",
        "state": "closed",
        "user": "wangchichi1999",
        "closed_by": "dingsiyu",
        "created_at": "2021-05-21T01:59:02+00:00",
        "updated_at": "2021-05-27T05:18:45+00:00",
        "closed_at": "2021-05-27T05:18:45+00:00",
        "comments_count": [
            "dingsiyu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 671,
        "title": "请问后续会开源ERNIE-Gram的预训练代码吗？",
        "body": "想了解一下，有开源ERNIE-Gram的预训练代码的计划吗？",
        "state": "closed",
        "user": "RyanHuangNLP",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-21T07:29:55+00:00",
        "updated_at": "2021-09-09T04:58:15+00:00",
        "closed_at": "2021-09-09T04:58:15+00:00",
        "comments_count": [
            "nbcc",
            "ume-technology",
            "ume-technology",
            "nbcc",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 674,
        "title": "ernie-doc的文本分类效果不理想",
        "body": "具体参数配置如下：\r\nbatch_size: 16\r\ncheckpoints: ./output\r\ndecr_every_n_nan_or_inf: 2\r\ndecr_ratio: 0.8\r\ndev_set: ./data/THUCNews/dev.txt\r\ndo_lower_case: True\r\ndo_test: False\r\ndo_train: True\r\ndo_val: True\r\ndoc_stride: 128\r\nepoch: 5\r\nernie_config_path: ./configs/base/zh/ernie_config.json\r\neval_all: False\r\nfor_cn: True\r\nin_tokens: False\r\nincr_every_n_steps: 100\r\nincr_ratio: 5.0\r\ninit_checkpoint: \r\ninit_loss_scaling: 1.0\r\ninit_pretraining_params: \r\nis_distributed: False\r\nis_zh: True\r\nlabel_map_config: \r\nlayer_decay_ratio: 0.8\r\nlearning_rate: 0.00015\r\nlr_scheduler: linear_warmup_decay\r\nmax_answer_length: 100\r\nmax_query_length: 64\r\nmax_seq_len: 100\r\nmetrics: True\r\nn_best_size: 20\r\nnum_iteration_per_drop_scope: 10\r\nnum_labels: 10\r\nrandom_seed: 1\r\nrel_pos_params_sharing: False\r\nrepeat_input: False\r\nsave_steps: 10000\r\nskip_steps: 10\r\nstream_job: None\r\ntest_set: ./data/THUCNews/test.txt\r\ntokenizer: FullTokenizer\r\ntrain_all: False\r\ntrain_set: ./data/THUCNews/train.txt\r\nuse_amp: False\r\nuse_cuda: True\r\nuse_dynamic_loss_scaling: False\r\nuse_fast_executor: True\r\nuse_recompute: False\r\nuse_vars: False\r\nvalidation_steps: 100\r\nverbose: False\r\nvocab_path: ./configs/base/zh/vocab.txt\r\nwarmup_proportion: 0.1\r\nweight_decay: 0.01\r\nweight_sharing: True\r\n\r\nfinetuning start\r\nattention_probs_dropout_prob: 0.1\r\nepsilon: 1e-12\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nmemory_len: 128\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\ntask_type_vocab_size: 3\r\nvocab_size: 28000\r\n\r\nargs.is_distributed: False\r\nDevice count 4, trainer_id:0\r\nargs.vocab_path ./configs/base/zh/vocab.txt\r\nDevice count: 4, trainer_id: 0\r\nNum train examples: 180000\r\nMax train steps: 14062\r\nNum warmup steps: 1406\r\n\r\nW0523 22:12:34.754221 14073 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 6.1, Driver API Version: 10.2, Runtime API Version: 10.2\r\nW0523 22:12:34.758791 14073 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 5248/180000, step: 10, ave loss: 2.280549, ave acc: 0.176471, time cost: 4.076458, speed: 2.453110 steps/s, learning_rate: 0.000001\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 5888/180000, step: 20, ave loss: 2.332018, ave acc: 0.000000, time cost: 3.281870, speed: 3.047043 steps/s, learning_rate: 0.000002\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 6528/180000, step: 30, ave loss: 2.327189, ave acc: 0.058824, time cost: 3.284722, speed: 3.044398 steps/s, learning_rate: 0.000003\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 7168/180000, step: 40, ave loss: 2.282611, ave acc: 0.117647, time cost: 3.292336, speed: 3.037358 steps/s, learning_rate: 0.000004\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 7808/180000, step: 50, ave loss: 2.297273, ave acc: 0.117647, time cost: 3.289208, speed: 3.040246 steps/s, learning_rate: 0.000005\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 8448/180000, step: 60, ave loss: 2.354424, ave acc: 0.058824, time cost: 3.298677, speed: 3.031518 steps/s, learning_rate: 0.000006\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 9088/180000, step: 70, ave loss: 2.271231, ave acc: 0.117647, time cost: 3.301912, speed: 3.028548 steps/s, learning_rate: 0.000007\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 9728/180000, step: 80, ave loss: 2.345518, ave acc: 0.058824, time cost: 3.331487, speed: 3.001663 steps/s, learning_rate: 0.000008\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 10368/180000, step: 90, ave loss: 2.306730, ave acc: 0.000000, time cost: 3.303587, speed: 3.027012 steps/s, learning_rate: 0.000009\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 11008/180000, step: 100, ave loss: 2.327241, ave acc: 0.058824, time cost: 3.320735, speed: 3.011382 steps/s, learning_rate: 0.000011\r\nprocessining example: 1000\r\nprocessining example: 2000\r\ndata num: 2512\r\n[100_eval evaluation] ave loss: 2.302494, ave acc: 0.104299, data_num: 2512, elapsed time: 19.938949 s",
        "state": "closed",
        "user": "Phoebe0126",
        "closed_by": "dingsiyu",
        "created_at": "2021-05-23T14:22:13+00:00",
        "updated_at": "2021-05-27T08:46:38+00:00",
        "closed_at": "2021-05-27T08:46:38+00:00",
        "comments_count": [
            "dingsiyu",
            "Phoebe0126"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 679,
        "title": "单机多卡训练时加载预训练模型出错",
        "body": "PaddlePaddle版本：2.0.2\r\nGPU：GTX 1080 Ti *4\r\n系统环境：centos 7, python 3.7\r\n\r\n在使用 python -m paddle.distributed.launch normaltrain.py 进行单机多卡训练时出错。经过试验发现是在载入预训练模型时出了问题。在载入ERNIE模型时报如下错误：\r\n\r\n![image](https://user-images.githubusercontent.com/32788240/119588204-e4a28400-be02-11eb-968f-66ae375aa58e.png)\r\n\r\n但是在不加载任何预训练模型，只使用基础API搭建自己的模型时可以用单机多卡训练。\r\n\r\n并且对于ERNIE，使用单机单卡去微调是完全没有问题的。\r\n\r\n我已经在Paddle提了issue并被建议到ERNIE来提issue。\r\nhttps://github.com/PaddlePaddle/Paddle/issues/33012#issue-896323645",
        "state": "closed",
        "user": "junfeizhu",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-26T01:18:02+00:00",
        "updated_at": "2021-08-01T06:50:13+00:00",
        "closed_at": "2021-08-01T06:50:13+00:00",
        "comments_count": [
            "nbcc",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 681,
        "title": "ERNIE-Gram：How to use ernie-gram to predict masked ngram fragments?",
        "body": "Hello, thank you very much for your contribution: ERNIE-Gram, this is very helpful.\r\n\r\nI would like to use ERNIE-Gram for prediction of masked ngram fragments, is it possible to provide the relevant code snippet?😃\r\n\r\nThanks for your help!",
        "state": "closed",
        "user": "AnShengqiang",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-26T02:46:15+00:00",
        "updated_at": "2021-09-19T13:05:22+00:00",
        "closed_at": "2021-09-19T13:05:22+00:00",
        "comments_count": [
            "PROoshio",
            "bigprince97",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 682,
        "title": "ERNIE 有相关的接口文档吗",
        "body": "今天想用paddle2.0 跑一下 ERNIE，但是没有发现相关的文档，不太清楚有哪些接口可以调用。",
        "state": "closed",
        "user": "hailong23-jin",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-26T12:32:20+00:00",
        "updated_at": "2021-08-06T16:07:32+00:00",
        "closed_at": "2021-08-06T16:07:32+00:00",
        "comments_count": [
            "Mrwhite132613",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 683,
        "title": "Ernie-Doc使用linear_warmup_decay学习率一直为0",
        "body": "运行配置如下：\r\nis_zh=\"True\"\r\nrepeat_input=\"False\"\r\ntrain_all=\"Fasle\"\r\neval_all=\"False\"\r\nuse_vars=\"False\"\r\nuse_amp=\"False\"\r\nuse_recompute=\"False\"\r\nrel_pos_params_sharing=\"False\"\r\nlr_scheduler=\"linear_warmup_decay\"\r\nvocab_path=\"./configs/base/zh/vocab.txt\"\r\nconfig_path=\"./configs/base/zh/ernie_config.json\"\r\ninit_model_checkpoint=\"model-ernie-doc-base-zh\"\r\ninit_model_pretraining=\"\"\r\n\r\nepoch=1\r\nwarmup=0.1\r\nmax_len=512\r\nlr_rate=7e-5\r\nbatch_size=16\r\nweight_decay=0.01\r\nnum_labels=2\r\nsave_steps=5000\r\nvalidation_steps=5000\r\nlayer_decay_ratio=0.8\r\n\r\n\r\n<img width=\"1200\" alt=\"image\" src=\"https://user-images.githubusercontent.com/18455572/119762571-8ba91d80-bee0-11eb-91e5-2757e9e1ac14.png\">\r\n",
        "state": "closed",
        "user": "jy1993",
        "closed_by": "jy1993",
        "created_at": "2021-05-27T03:42:11+00:00",
        "updated_at": "2021-08-31T02:10:43+00:00",
        "closed_at": "2021-05-27T06:35:41+00:00",
        "comments_count": [
            "sjy1203",
            "jy1993",
            "sjy1203",
            "jy1993",
            "wangddddddd",
            "wangddddddd"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 685,
        "title": "这个ERNIE finetuning后的模型可以用Paddle Inference去加载预测吗",
        "body": "",
        "state": "closed",
        "user": "szq261299",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-27T09:03:46+00:00",
        "updated_at": "2021-08-06T08:26:43+00:00",
        "closed_at": "2021-08-06T08:26:43+00:00",
        "comments_count": [
            "dingsiyu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 686,
        "title": "请问信息抽取的任务，是怎么实现，有demo 吗？",
        "body": "",
        "state": "closed",
        "user": "songsh",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-29T13:14:22+00:00",
        "updated_at": "2021-08-06T16:07:33+00:00",
        "closed_at": "2021-08-06T16:07:33+00:00",
        "comments_count": [
            "Mrwhite132613",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 687,
        "title": "ERINIE-doc的预训练数据",
        "body": "请问，ERINIE-doc的预训练数据的CC-NEWS和STORIES的获取和处理方式能分享一下吗？",
        "state": "closed",
        "user": "xyltt",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-30T09:32:32+00:00",
        "updated_at": "2021-08-06T08:26:42+00:00",
        "closed_at": "2021-08-06T08:26:42+00:00",
        "comments_count": [
            "dingsiyu",
            "xyltt",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 689,
        "title": "paddle 2.x RNIE分类结果集返回概率",
        "body": "![image](https://user-images.githubusercontent.com/3104500/120419780-aaeaf380-c395-11eb-904c-dcbfaf24a1a2.png)\r\n\r\n怎么在结果集中返回概率，以前1.6的时候是会返回的。",
        "state": "closed",
        "user": "godsoul",
        "closed_by": "godsoul",
        "created_at": "2021-06-02T03:28:54+00:00",
        "updated_at": "2021-06-02T04:38:24+00:00",
        "closed_at": "2021-06-02T04:38:24+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 688,
        "title": "关于ernie-doc整篇文档的分类处理",
        "body": "![2B59A35A-1A3A-4B1C-9EAE-936F66390B86](https://user-images.githubusercontent.com/43496733/120157666-d8189400-c225-11eb-94a8-09a0a2e24a5c.jpeg)\r\n请问论文中的这个处理具体在代码文件的哪一部分呢？\r\n",
        "state": "closed",
        "user": "Phoebe0126",
        "closed_by": "stale[bot]",
        "created_at": "2021-05-31T07:37:31+00:00",
        "updated_at": "2021-08-14T10:49:51+00:00",
        "closed_at": "2021-08-14T10:49:51+00:00",
        "comments_count": [
            "zpp13",
            "Phoebe0126",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 690,
        "title": "通过ERNIE finetuning后利用--inference_model_dir参数保存的模型无法用Paddle Inference去加载预测",
        "body": "训练过程中添加了args.inference_model_dir参数如下：\r\n    if args.inference_model_dir is not None:\r\n        class InferenceModel(ErnieModelForSequenceClassification):\r\n            def forward(self, ids, sids):\r\n                _, logits = super(InferenceModel, self).forward(ids, sids)\r\n                return logits\r\n        model.__class__ = InferenceModel\r\n        log.debug('saving inference model')\r\n        src_placeholder = P.zeros([2, 2], dtype='int64')\r\n        sent_placehodler = P.zeros([2, 2], dtype='int64')\r\n        _, static = P.jit.TracedLayer.trace(\r\n            model, inputs=[src_placeholder, sent_placehodler])\r\n        static.save_inference_model(str(args.inference_model_dir))\r\n        log.debug('done')\r\n最后保存的文件格式为：inference_model.pdiparams和inference_model.pdmodel两个文件，无法用inference中的代码去加载预测。",
        "state": "closed",
        "user": "xiaoranchenwai",
        "closed_by": "xiaoranchenwai",
        "created_at": "2021-06-02T06:19:43+00:00",
        "updated_at": "2022-05-17T17:27:33+00:00",
        "closed_at": "2021-06-04T09:43:25+00:00",
        "comments_count": [
            "xuyifan-0731"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 691,
        "title": "FileNotFoundError: [Errno 2] No such file or directory: '../data/coco_object_0.35_tot.ids' ",
        "body": "\r\n当运行 ernie-unimo 中的 run_img2txt.py 时，   ./model_files/config/ 、 ./model_files/dict/ 里面的文件找不到，\r\n 比如：FileNotFoundError: [Errno 2] No such file or directory: './model_files/config/unimo_base_en.json'\r\n\r\n如果换成绝对路径可以，但是有很多个这些相对路径在项目中，不方便一一更改成绝对路径\r\n\r\n请问是我的操作有什么问题吗？\r\n\r\n",
        "state": "closed",
        "user": "wingdi",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-02T09:46:40+00:00",
        "updated_at": "2021-08-08T17:38:06+00:00",
        "closed_at": "2021-08-08T17:38:06+00:00",
        "comments_count": [
            "wingdi",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 692,
        "title": "retrospective feed mechanism的开启机制",
        "body": "请问retrospective feed mechanism是根据repeat_input来判断是否开启吗？\r\n那做文本分类任务时，是默认没有开启吗？\r\n我试着改成TRUE，迭代了三次以后，效果并没有变好，请问是什么原因呢？\r\n可能是我理解错了，期待您的回答，谢谢",
        "state": "closed",
        "user": "zpp13",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-02T09:52:19+00:00",
        "updated_at": "2021-08-08T10:33:46+00:00",
        "closed_at": "2021-08-08T10:33:46+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 694,
        "title": "ERNIE-VIL下游任务测试结果不稳定",
        "body": "您好，我在一个和VCR类似的下游任务（复用了VCR那部分的代码）上finetuning了erniesmall，但测试时发现，同一个val或者test划分，得到的准确率虽然接近，并不相同，为了排除数据集的问题，我将某条数据复制了1000倍，作为验证集进行测试，发现每次测试的结果都不尽相同。这里贴出了三次运行的结果：\r\n**第一次**\r\n```\r\n~/vilio/vilio/ernie-vil$ python test_run.py \r\n\r\nfinetuning tasks start\r\nattention_probs_dropout_prob: 0.1\r\nclass_attr_size: 401\r\nclass_size: 1601\r\nco_hidden_size: 1024\r\nco_intermediate_size: 1024\r\nco_num_attention_heads: 8\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\nt_biattention_id: [6, 7, 8, 9, 10, 11]\r\ntask_type_vocab_size: 16\r\ntype_vocab_size: 2\r\nv_biattention_id: [0, 1, 2, 3, 4, 5]\r\nv_hidden_size: 1024\r\nv_intermediate_size: 1024\r\nv_num_attention_heads: 8\r\nvocab_size: 30522\r\n------------------------------------------------\r\ntask:  [{'task': 'PMR', 'num_choice': 4, 'annotations_jsonpath_train': './data/pmr/annotations/train.jsonl', 'annotations_jsonpath_val': './data/pmr/annotations/val.jsonl', 'annotations_jsonpath_test': './data/pmr/annotations/test.jsonl', 'feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'gt_feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'unisex_names_table': './data/pmr/annotations/unisex_names_table.csv', 'Proprocessor': 'PreprocessorBasic', 'tokenizer_name': 'FullTokenizer', 'tagger_path': './script/ntc.pickle', 'nltk_data_path': './nltk_data', 'fusion_method': 'mul', 'dropout_rate': 0.1, 'max_seq_len': 60, 'use_gt_fea': False, 'task_prefix': 'pmr'}]\r\n2021-06-09 16:19:43,389-WARNING: paddle.fluid.layers.py_reader() may be deprecated in the near future. Please use paddle.fluid.io.DataLoader.from_generator() instead.\r\ntheoretical memory usage: \r\n(5271.439203643799, 5522.4601181030275, 'MB')\r\nW0609 16:19:44.479754 15199 device_context.cc:252] Please NOTE: device: 4, CUDA Capability: 75, Driver API Version: 11.2, Runtime API Version: 9.0\r\nW0609 16:19:44.481159 15199 device_context.cc:260] device: 4, cuDNN Version: 8.0.\r\nStart to load Faster-RCNN detected objects from ./data/pmr/annotations/pmr_10-36.tsv\r\nLoaded 1 images in file ./data/pmr/annotations/pmr_10-36.tsv in 23 seconds.\r\nonly butd feature\r\nLoad pretraining parameters from ./output_pmr/step_15000train.\r\ntesting on pmr val split\r\ntask name list :  ['mean_0.tmp_0', 'accuracy_0.tmp_0', 'arg_max_0.tmp_0', 'read_file_0.tmp_9', 'read_file_0.tmp_8', 'reshape2_120.tmp_0']\r\ncur_step: 10 cur_acc: 1.0\r\ncur_step: 20 cur_acc: 1.0\r\ncur_step: 30 cur_acc: 1.0\r\ncur_step: 40 cur_acc: 0.9984375\r\ncur_step: 50 cur_acc: 0.99875\r\ncur_step: 60 cur_acc: 0.9979166666666667\r\nEXCEPTING\r\nLEN: 1075 1075\r\n<class 'pandas.core.frame.DataFrame'>\r\nRangeIndex: 1075 entries, 0 to 1074\r\nData columns (total 3 columns):\r\n #   Column  Non-Null Count  Dtype  \r\n---  ------  --------------  -----  \r\n 0   id      1075 non-null   int64  \r\n 1   proba   1075 non-null   float64\r\n 2   label   1075 non-null   int64  \r\ndtypes: float64(1), int64(2)\r\nmemory usage: 25.3 KB\r\nNone\r\naverage_acc: 0.9981617647058824\r\n\r\n```\r\n### 第二次\r\n```\r\nfinetuning tasks start\r\nattention_probs_dropout_prob: 0.1\r\nclass_attr_size: 401\r\nclass_size: 1601\r\nco_hidden_size: 1024\r\nco_intermediate_size: 1024\r\nco_num_attention_heads: 8\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\nt_biattention_id: [6, 7, 8, 9, 10, 11]\r\ntask_type_vocab_size: 16\r\ntype_vocab_size: 2\r\nv_biattention_id: [0, 1, 2, 3, 4, 5]\r\nv_hidden_size: 1024\r\nv_intermediate_size: 1024\r\nv_num_attention_heads: 8\r\nvocab_size: 30522\r\n------------------------------------------------\r\ntask:  [{'task': 'PMR', 'num_choice': 4, 'annotations_jsonpath_train': './data/pmr/annotations/train.jsonl', 'annotations_jsonpath_val': './data/pmr/annotations/val.jsonl', 'annotations_jsonpath_test': './data/pmr/annotations/test.jsonl', 'feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'gt_feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'unisex_names_table': './data/pmr/annotations/unisex_names_table.csv', 'Proprocessor': 'PreprocessorBasic', 'tokenizer_name': 'FullTokenizer', 'tagger_path': './script/ntc.pickle', 'nltk_data_path': './nltk_data', 'fusion_method': 'mul', 'dropout_rate': 0.1, 'max_seq_len': 60, 'use_gt_fea': False, 'task_prefix': 'pmr'}]\r\n2021-06-09 16:22:23,550-WARNING: paddle.fluid.layers.py_reader() may be deprecated in the near future. Please use paddle.fluid.io.DataLoader.from_generator() instead.\r\ntheoretical memory usage: \r\n(5271.439203643799, 5522.4601181030275, 'MB')\r\nW0609 16:22:24.612071 15347 device_context.cc:252] Please NOTE: device: 4, CUDA Capability: 75, Driver API Version: 11.2, Runtime API Version: 9.0\r\nW0609 16:22:24.613502 15347 device_context.cc:260] device: 4, cuDNN Version: 8.0.\r\nStart to load Faster-RCNN detected objects from ./data/pmr/annotations/pmr_10-36.tsv\r\nLoaded 1 images in file ./data/pmr/annotations/pmr_10-36.tsv in 23 seconds.\r\nonly butd feature\r\nLoad pretraining parameters from ./output_pmr/step_15000train.\r\ntesting on pmr val split\r\ntask name list :  ['mean_0.tmp_0', 'accuracy_0.tmp_0', 'arg_max_0.tmp_0', 'read_file_0.tmp_9', 'read_file_0.tmp_8', 'reshape2_120.tmp_0']\r\ncur_step: 10 cur_acc: 1.0\r\ncur_step: 20 cur_acc: 1.0\r\ncur_step: 30 cur_acc: 0.9979166666666667\r\ncur_step: 40 cur_acc: 0.9984375\r\ncur_step: 50 cur_acc: 0.99875\r\ncur_step: 60 cur_acc: 0.9989583333333333\r\nEXCEPTING\r\nLEN: 1075 1075\r\n<class 'pandas.core.frame.DataFrame'>\r\nRangeIndex: 1075 entries, 0 to 1074\r\nData columns (total 3 columns):\r\n #   Column  Non-Null Count  Dtype  \r\n---  ------  --------------  -----  \r\n 0   id      1075 non-null   int64  \r\n 1   proba   1075 non-null   float64\r\n 2   label   1075 non-null   int64  \r\ndtypes: float64(1), int64(2)\r\nmemory usage: 25.3 KB\r\nNone\r\naverage_acc: 0.9981617647058824\r\n```\r\n### 第三次\r\n```\r\nfinetuning tasks start\r\nattention_probs_dropout_prob: 0.1\r\nclass_attr_size: 401\r\nclass_size: 1601\r\nco_hidden_size: 1024\r\nco_intermediate_size: 1024\r\nco_num_attention_heads: 8\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\nt_biattention_id: [6, 7, 8, 9, 10, 11]\r\ntask_type_vocab_size: 16\r\ntype_vocab_size: 2\r\nv_biattention_id: [0, 1, 2, 3, 4, 5]\r\nv_hidden_size: 1024\r\nv_intermediate_size: 1024\r\nv_num_attention_heads: 8\r\nvocab_size: 30522\r\n------------------------------------------------\r\ntask:  [{'task': 'PMR', 'num_choice': 4, 'annotations_jsonpath_train': './data/pmr/annotations/train.jsonl', 'annotations_jsonpath_val': './data/pmr/annotations/val.jsonl', 'annotations_jsonpath_test': './data/pmr/annotations/test.jsonl', 'feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'gt_feature_lmdb_path': './data/pmr/annotations/pmr_10-36.tsv', 'unisex_names_table': './data/pmr/annotations/unisex_names_table.csv', 'Proprocessor': 'PreprocessorBasic', 'tokenizer_name': 'FullTokenizer', 'tagger_path': './script/ntc.pickle', 'nltk_data_path': './nltk_data', 'fusion_method': 'mul', 'dropout_rate': 0.1, 'max_seq_len': 60, 'use_gt_fea': False, 'task_prefix': 'pmr'}]\r\n2021-06-09 16:23:45,356-WARNING: paddle.fluid.layers.py_reader() may be deprecated in the near future. Please use paddle.fluid.io.DataLoader.from_generator() instead.\r\ntheoretical memory usage: \r\n(5271.439203643799, 5522.4601181030275, 'MB')\r\nW0609 16:23:46.432518 15492 device_context.cc:252] Please NOTE: device: 4, CUDA Capability: 75, Driver API Version: 11.2, Runtime API Version: 9.0\r\nW0609 16:23:46.433915 15492 device_context.cc:260] device: 4, cuDNN Version: 8.0.\r\nStart to load Faster-RCNN detected objects from ./data/pmr/annotations/pmr_10-36.tsv\r\nLoaded 1 images in file ./data/pmr/annotations/pmr_10-36.tsv in 24 seconds.\r\nonly butd feature\r\nLoad pretraining parameters from ./output_pmr/step_15000train.\r\ntesting on pmr val split\r\ntask name list :  ['mean_0.tmp_0', 'accuracy_0.tmp_0', 'arg_max_0.tmp_0', 'read_file_0.tmp_9', 'read_file_0.tmp_8', 'reshape2_120.tmp_0']\r\ncur_step: 10 cur_acc: 0.99375\r\ncur_step: 20 cur_acc: 0.996875\r\ncur_step: 30 cur_acc: 0.9958333333333333\r\ncur_step: 40 cur_acc: 0.996875\r\ncur_step: 50 cur_acc: 0.99625\r\ncur_step: 60 cur_acc: 0.9958333333333333\r\nEXCEPTING\r\nLEN: 1075 1075\r\n<class 'pandas.core.frame.DataFrame'>\r\nRangeIndex: 1075 entries, 0 to 1074\r\nData columns (total 3 columns):\r\n #   Column  Non-Null Count  Dtype  \r\n---  ------  --------------  -----  \r\n 0   id      1075 non-null   int64  \r\n 1   proba   1075 non-null   float64\r\n 2   label   1075 non-null   int64  \r\ndtypes: float64(1), int64(2)\r\nmemory usage: 25.3 KB\r\nNone\r\naverage_acc: 0.9963235294117647\r\n```\r\n我之前猜测会不会是忘了设置evaluation模式了，但仔细看了finetune.py里的代码，发现已经有了这句`test_prog = test_prog.clone(for_test=True)`，所以应该不是这个的问题。\r\n您能否帮我分析下可能的原因吗？谢谢",
        "state": "closed",
        "user": "corlder",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-09T08:33:02+00:00",
        "updated_at": "2021-10-11T04:24:21+00:00",
        "closed_at": "2021-10-11T04:24:21+00:00",
        "comments_count": [
            "yinweichong",
            "corlder",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 693,
        "title": "请问finetune xnli 为什么达不到论文效果？",
        "body": "",
        "state": "closed",
        "user": "SusannaWull",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-02T11:55:45+00:00",
        "updated_at": "2021-08-14T06:52:07+00:00",
        "closed_at": "2021-08-14T06:52:07+00:00",
        "comments_count": [
            "PROoshio",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 695,
        "title": "ernie-gen SQuAD finetuning error",
        "body": "Hi, I'm having some problems while trying to finetune ernie-gen on SQuAD. Here are the logs:\r\n\r\n```\r\n-----------  Configuration Arguments -----------\r\nattention_probs_dropout_prob: -1.0\r\nbatch_size: 1\r\nbeam_size: 1\r\ncheckpoints: ./checkpoints\r\ncontinuous_position: True\r\ndecr_every_n_nan_or_inf: 2\r\ndecr_ratio: 0.8\r\ndev_set: ./datasets/squad_qg//dev.tsv\r\ndo_decode: True\r\ndo_lower_case: True\r\ndo_pred: False\r\ndo_test: False\r\ndo_train: True\r\ndo_val: False\r\nepoch: 10\r\nernie_config_path: ernie_gen_base/ernie_config.json\r\neval_mertrics: Bleu_4,METEOR,ROUGE_L\r\neval_script: bash ./eval/tasks/squad_qg/eval.sh\r\nhidden_dropout_prob: 0.1\r\nin_tokens: False\r\nincr_every_n_steps: 100\r\nincr_ratio: 2.0\r\ninit_checkpoint: None\r\ninit_loss_scaling: 128.0\r\ninit_pretraining_params: ernie_gen_base/params\r\nis_distributed: True\r\nlabel_smooth: 0.1\r\nlearning_rate: 2.5e-05\r\nlength_penalty: 1.0\r\nlr_scheduler: linear_warmup_decay\r\nmax_dec_len: 48\r\nmax_seq_len: 400\r\nmax_dec_len: 48\r\nmax_seq_len: 400\r\nmax_src_len: 400\r\nmax_tgt_len: 96\r\nnoise_prob: 0.7\r\nnum_iteration_per_drop_scope: 1\r\npred_batch_size: 0\r\npred_set: ./datasets/squad_qg//pred.tsv\r\nrandom_noise: True\r\nrandom_seed: 93001\r\nrole_type_size: 0\r\nsave_and_valid_by_epoch: True\r\nsave_steps: 10000\r\nskip_steps: 10\r\nsrc_do_lower_case: True\r\nsrc_tokenizer: FullTokenizer\r\nsrc_vocab_path: None\r\nstream_job: None\r\ntask_type: normal\r\ntest_set: ./datasets/squad_qg//test.tsv\r\ntgt_type_id: 3\r\ntokenized_input: True\r\ntokenizer: FullTokenizer\r\ntrain_set: ./datasets/squad_qg//train.tsv\r\nturn_type_size: 0\r\nuse_cuda: True\r\nuse_dynamic_loss_scaling: False\r\nuse_fast_executor: True\r\nuse_fp16: False\r\nuse_multi_gpu_test: True\r\nvalidation_steps: 1000\r\nverbose: True\r\nvocab_path: ernie_gen_base/vocab.txt\r\nwarmup_proportion: 0.1\r\nweight_decay: 0.01\r\nweight_sharing: True\r\n------------------------------------------------\r\nattention_probs_dropout_prob: 0.1\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nintermediate_size: 3072\r\nmax_position_embeddings: 1024\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\ntype_vocab_size: 4\r\nvocab_size: 30522\r\n------------------------------------------------\r\nDevice count: 1, gpu_id: 0\r\nNum train examples: 75722\r\nMax train steps: 757220\r\nNum warmup steps: 75722\r\nTheoretical memory usage in training: 10074.366 - 10554.098 MB\r\nargs.is_distributed: True\r\nworker_endpoints:['172.16.173.123:6170'] trainers_num:1 current_endpoint:172.16.173.123:6170               trainer_id:0\r\n\r\n\r\nAPI is deprecated since 2.0.0 Please use FleetAPI instead.\r\nWIKI: https://github.com/PaddlePaddle/Fleet/blob/develop/markdown_doc/transpiler\r\n\r\n\r\n\r\n\r\nW0609 12:27:54.821136 19909 device_context.cc:237] Please NOTE: device: 0, CUDA Capability: 61, Driver API Version: 11.3, Runtime API Version: 10.0\r\nW0609 12:27:54.823410 19909 device_context.cc:245] device: 0, cuDNN Version: 7.6.\r\nI0609 12:27:55.246949 19909 rpc_client.h:107] init rpc client with trainer_id 0\r\nLoad pretraining parameters from ernie_gen_base/params.\r\nI0609 12:27:56.123220 19909 parallel_executor.cc:440] The Program will be executed on CUDA using ParallelExecutor, 1 cards are used, so 1 programs are executed in parallel.\r\nI0609 12:27:56.197180 19909 build_strategy.cc:365] SeqOnlyAllReduceOps:0, num_trainers:1\r\nI0609 12:27:56.563462 19909 parallel_executor.cc:307] Inplace strategy is enabled, when build_strategy.enable_inplace = True\r\nI0609 12:27:56.644340 19909 parallel_executor.cc:375] Garbage collection strategy is enabled, when FLAGS_eager_delete_tensor_gb = 1\r\n/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py:789: UserWarning: The following exception is not an EOF exception.\r\n  \"The following exception is not an EOF exception.\")\r\nTraceback (most recent call last):\r\n  File \"./run_seq2seq.py\", line 313, in <module>\r\n    main(args)\r\n  File \"./run_seq2seq.py\", line 264, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 302, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 790, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 785, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 850, in _run_impl\r\n    return_numpy=return_numpy)\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 684, in _run_parallel\r\n    tensors = exe.run(fetch_var_names)._move_to_list()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::framework::Tensor::mutable_data(paddle::platform::Place const&, paddle::framework::proto::VarType_Type, unsigned long)\r\n3   paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, float>::Compute(paddle::framework::ExecutionContext const&) const\r\n4   std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, float>, paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, double>, paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, int>, paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, long>, paddle::operators::ElementwiseAddKernel<paddle::platform::CUDADeviceContext, paddle::platform::float16> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&)\r\n5   paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, paddle::platform::Place const&, paddle::framework::RuntimeContext*) const\r\n6   paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, paddle::platform::Place const&) const\r\n7   paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, paddle::platform::Place const&)\r\n8   paddle::framework::details::ComputationOpHandle::RunImpl()\r\n9   paddle::framework::details::FastThreadedSSAGraphExecutor::RunOpSync(paddle::framework::details::OpHandleBase*)\r\n10  paddle::framework::details::FastThreadedSSAGraphExecutor::RunOp(paddle::framework::details::OpHandleBase*, std::shared_ptr<paddle::framework::BlockingQueue<unsigned long> > const&, unsigned long*)\r\n11  std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, void> >::_M_invoke(std::_Any_data const&)\r\n12  std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n13  ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n------------------------------------------\r\nPython Call Stacks (More useful to users):\r\n------------------------------------------\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 2525, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/test/anaconda3/lib/python3.6/site-packages/paddle/fluid/layers/math_op_patch.py\", line 243, in __impl__\r\n    attrs={'axis': axis})\r\n  File \"/home/test/ERNIE/ernie-gen/model/ernie.py\", line 139, in _gen_input\r\n    emb_out = emb_out + emb if emb_out else emb\r\n  File \"/home/test/ERNIE/ernie-gen/model/ernie.py\", line 139, in _gen_input\r\n    emb_out = emb_out + emb if emb_out else emb\r\n  File \"/home/test/ERNIE/ernie-gen/model/ernie.py\", line 173, in encode\r\n    query_emb_out, n_head_query_attn_mask = self._gen_input(emb_ids[1], input_mask[1])\r\n  File \"/home/test/ERNIE/ernie-gen/model/ernie.py\", line 228, in _build_model\r\n    self._enc_out = self.encode(emb_ids, input_mask, gather_idx, remove_query=False)\r\n  File \"/home/test/ERNIE/ernie-gen/model/ernie.py\", line 128, in __init__\r\n    self._build_model(emb_ids, input_mask, gather_idx)\r\n  File \"/home/test/ERNIE/ernie-gen/finetune/seq2seq.py\", line 159, in create_model\r\n    task_type=self.task_type)\r\n  File \"./run_seq2seq.py\", line 125, in main\r\n    train_pyreader, graph_vars = ernie_gen.create_model()\r\n  File \"./run_seq2seq.py\", line 313, in <module>\r\n    main(args)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: When calling this method, the Tensor's numel must be equal or larger than zero. Please check Tensor::dims, or Tensor::Resize has been called first. The Tensor's shape is [-1, 12, 768] now\r\n  [Hint: Expected numel() >= 0, but received numel():-9216 < 0:0.] at (/paddle/paddle/fluid/framework/tensor.cc:45)\r\n  [operator < elementwise_add > error]\r\nterminate called without an active exception\r\nW0609 12:27:57.065218 19984 init.cc:209] Warning: PaddlePaddle catches a failure signal, it may not work properly\r\nW0609 12:27:57.065241 19984 init.cc:211] You could check whether you killed PaddlePaddle thread/process accidentally or report the case to PaddlePaddle\r\nW0609 12:27:57.065248 19984 init.cc:214] The detail failure signal is:\r\n\r\nW0609 12:27:57.065258 19984 init.cc:217] *** Aborted at 1623241677 (unix time) try \"date -d @1623241677\" if you are using GNU date ***\r\nW0609 12:27:57.067502 19984 init.cc:217] PC: @                0x0 (unknown)\r\nW0609 12:27:57.067590 19984 init.cc:217] *** SIGABRT (@0x3e800004dc5) received by PID 19909 (TID 0x7fc601ed4700) from PID 19909; stack trace: ***\r\nW0609 12:27:57.069734 19984 init.cc:217]     @     0x7fc73321f890 (unknown)\r\nW0609 12:27:57.071744 19984 init.cc:217]     @     0x7fc732e5ae97 gsignal\r\nW0609 12:27:57.073776 19984 init.cc:217]     @     0x7fc732e5c801 abort\r\nW0609 12:27:57.075096 19984 init.cc:217]     @     0x7fc709a82892 __gnu_cxx::__verbose_terminate_handler()\r\nW0609 12:27:57.076014 19984 init.cc:217]     @     0x7fc709a80f69 __cxxabiv1::__terminate()\r\nW0609 12:27:57.077248 19984 init.cc:217]     @     0x7fc709a80fab std::terminate()\r\nW0609 12:27:57.078239 19984 init.cc:217]     @     0x7fc709a80c7c __gxx_personality_v0\r\nW0609 12:27:57.079216 19984 init.cc:217]     @     0x7fc71957abc8 _Unwind_ForcedUnwind_Phase2\r\nW0609 12:27:57.080211 19984 init.cc:217]     @     0x7fc71957aeae _Unwind_ForcedUnwind\r\nW0609 12:27:57.081902 19984 init.cc:217]     @     0x7fc73321df10 __GI___pthread_unwind\r\nW0609 12:27:57.083508 19984 init.cc:217]     @     0x7fc733215ae5 __pthread_exit\r\nW0609 12:27:57.084079 19984 init.cc:217]     @     0x562d02a8fa09 PyThread_exit_thread\r\nW0609 12:27:57.084221 19984 init.cc:217]     @     0x562d02929d12 PyEval_RestoreThread.cold.739\r\nW0609 12:27:57.086426 19984 init.cc:217]     @     0x7fc6de79a889 pybind11::gil_scoped_release::~gil_scoped_release()\r\nW0609 12:27:57.086639 19984 init.cc:217]     @     0x7fc6de7470e4 _ZZN8pybind1112cpp_function10initializeIZN6paddle6pybindL22pybind11_init_core_avxERNS_6moduleEEUlRNS2_9operators6reader22LoDTensorBlockingQueueERKSt6vectorINS2_9framework9LoDTensorESaISC_EEE60_bIS9_SG_EINS_4nameENS_9is_methodENS_7siblingEEEEvOT_PFT0_DpT1_EDpRKT2_ENUlRNS_6detail13function_callEE1_4_FUNESY_\r\nW0609 12:27:57.088801 19984 init.cc:217]     @     0x7fc6de7b8c41 pybind11::cpp_function::dispatcher()\r\nW0609 12:27:57.089345 19984 init.cc:217]     @     0x562d029d8c54 _PyCFunction_FastCallDict\r\nW0609 12:27:57.089700 19984 init.cc:217]     @     0x562d02a60c0e call_function\r\nW0609 12:27:57.090265 19984 init.cc:217]     @     0x562d02a8375a _PyEval_EvalFrameDefault\r\nW0609 12:27:57.090816 19984 init.cc:217]     @     0x562d02a5bd58 PyEval_EvalCodeEx\r\nW0609 12:27:57.091143 19984 init.cc:217]     @     0x562d02a5c8e6 function_call\r\nW0609 12:27:57.091691 19984 init.cc:217]     @     0x562d029d8a5e PyObject_Call\r\nW0609 12:27:57.092248 19984 init.cc:217]     @     0x562d02a84e37 _PyEval_EvalFrameDefault\r\nW0609 12:27:57.092581 19984 init.cc:217]     @     0x562d02a5ac5b fast_function\r\nW0609 12:27:57.092916 19984 init.cc:217]     @     0x562d02a60b95 call_function\r\nW0609 12:27:57.093463 19984 init.cc:217]     @     0x562d02a8375a _PyEval_EvalFrameDefault\r\nW0609 12:27:57.093794 19984 init.cc:217]     @     0x562d02a5ac5b fast_function\r\nW0609 12:27:57.094127 19984 init.cc:217]     @     0x562d02a60b95 call_function\r\nW0609 12:27:57.094672 19984 init.cc:217]     @     0x562d02a8375a _PyEval_EvalFrameDefault\r\nW0609 12:27:57.095175 19984 init.cc:217]     @     0x562d02a5b2db _PyFunction_FastCallDict\r\nW0609 12:27:57.095664 19984 init.cc:217]     @     0x562d029d901f _PyObject_FastCallDict\r\nW0609 12:27:57.096171 19984 init.cc:217]     @     0x562d029ddaa3 _PyObject_Call_Prepend\r\nW0609 12:27:57.096171 19984 init.cc:217]     @     0x562d029ddaa3 _PyObject_Call_Prepend\r\n```\r\n\r\nI don't know what's going on, I've tried with different paddle versions (until version 2.0.2, version 2.1.0 give me some errors). At the begining I though that maybe it was some GPU memory problems (I only have one GPU with ~12GB), but I reduced the batch size to 1 and max_seq_len, max_src_len to 400, and now the theorical memory in usage in training is 10074.366 - 10554.098 MB. I've tried to predict with the pretrained ernie-gen, and it works, but, as it is supposed, the predictions are not fine. I appreciate your help.",
        "state": "closed",
        "user": "cberrioa",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-09T10:17:34+00:00",
        "updated_at": "2021-10-20T02:27:27+00:00",
        "closed_at": "2021-10-20T02:27:27+00:00",
        "comments_count": [
            "stale[bot]",
            "satkatai",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 696,
        "title": "what's the meaning of \"L\" in lines 224",
        "body": "",
        "state": "closed",
        "user": "xunfeiniao",
        "closed_by": "xunfeiniao",
        "created_at": "2021-06-10T07:03:37+00:00",
        "updated_at": "2021-06-10T07:06:43+00:00",
        "closed_at": "2021-06-10T07:05:59+00:00",
        "comments_count": [
            "xunfeiniao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 697,
        "title": "What's the meaning of \"L\" in 224 lines?",
        "body": "",
        "state": "closed",
        "user": "xunfeiniao",
        "closed_by": "nbcc",
        "created_at": "2021-06-10T07:34:16+00:00",
        "updated_at": "2021-07-04T02:49:19+00:00",
        "closed_at": "2021-07-04T02:49:19+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 698,
        "title": "请问想做个图文检索的下游任务，用什么模型好",
        "body": "我看到unimo与vil两个模型好像都能做，两者在这方面有什么区别，请问哪个效果好点或者更好实现点？",
        "state": "closed",
        "user": "Yaningkong",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-10T11:32:57+00:00",
        "updated_at": "2021-10-05T00:52:01+00:00",
        "closed_at": "2021-10-05T00:52:01+00:00",
        "comments_count": [
            "yinweichong",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 699,
        "title": "ernie-doc的中文阅读理解效果为什么比不上clue里的Bert-base？",
        "body": "![image](https://user-images.githubusercontent.com/68112258/121523273-9c9d7700-ca28-11eb-9f0d-2a867171b8be.png)\r\n如图，在CMRC2018数据集上，ernie-doc汇报的结果是76.1，CLUE榜单上bert-base是80.5；在C3数据集上，ernie-doc汇报的结果是76.5，CLUE榜单上bert-base是77.03。看起来不如bert-base，想问下为啥是这样，是训练或者评估的设置上有什么区别吗？",
        "state": "closed",
        "user": "lxww302",
        "closed_by": "lxww302",
        "created_at": "2021-06-10T12:20:38+00:00",
        "updated_at": "2021-06-15T08:46:35+00:00",
        "closed_at": "2021-06-15T08:46:35+00:00",
        "comments_count": [
            "dingsiyu",
            "lxww302"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 896,
        "title": "ernie-doc在对cmrc2018数据集fine-tune时突然训崩了",
        "body": "![image](https://user-images.githubusercontent.com/68112258/122026909-397f5c00-cdfd-11eb-9347-485976b1cf6d.png)\r\n\r\n如图，采用官方的代码fine-tune时，每隔100step评估一次，前两次评估都很正常，第二次评估指标em: 70.146008, f1: 88.630763，已经很好了，但没有达到论文的结果；在第2次与第3次评估之间训练集avg loss突然从0.124285下降到0.001645，第三次评估效果已经炸了。能稳定复现，请问可能是哪里的问题呢",
        "state": "closed",
        "user": "lxww302",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-06-15T09:22:22+00:00",
        "updated_at": "2023-03-10T00:18:10+00:00",
        "closed_at": "2023-03-10T00:18:10+00:00",
        "comments_count": [
            "dingsiyu",
            "YingZiqiang",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 701,
        "title": "ernie-doc在DuReader数据上的实验",
        "body": "![image](https://user-images.githubusercontent.com/68112258/122033719-5f0f6400-ce03-11eb-92a6-75135c1a2a33.png)\r\n如图，公开的DuReader数据有zhidao和search两个dev集，其中各有5000个question，好像跟这里的统计不一致。请问是有一个ernie-doc的非公开子集吗，方便将其开源吗？这样有新的工作可以跟贵工作更公平的比较。",
        "state": "closed",
        "user": "lxww302",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-15T10:05:28+00:00",
        "updated_at": "2021-09-07T00:04:25+00:00",
        "closed_at": "2021-09-07T00:04:25+00:00",
        "comments_count": [
            "dingsiyu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 702,
        "title": "一年多了中文ernie-gen还不开源吗？",
        "body": "",
        "state": "closed",
        "user": "cedar33",
        "closed_by": "nbcc",
        "created_at": "2021-06-21T06:32:57+00:00",
        "updated_at": "2021-07-04T02:47:39+00:00",
        "closed_at": "2021-07-04T02:47:38+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 703,
        "title": "ernie-doc的读两遍和memory传递机制是怎么实现的？",
        "body": "1. task_reader里的self.features_all里面的特征只存了按segment切分的一遍特征，模型里也没有看到哪里做了特殊处理，请问这个读两遍机制是在哪里实现的？\r\n2. memory传递倒是看到了相关代码，可是没有看到同一个query不同segment之间memory的传递机制",
        "state": "closed",
        "user": "lxww302",
        "closed_by": "stale[bot]",
        "created_at": "2021-06-22T12:56:03+00:00",
        "updated_at": "2021-11-30T00:45:17+00:00",
        "closed_at": "2021-11-30T00:45:17+00:00",
        "comments_count": [
            "sjy1203",
            "lxww302",
            "jc-ryan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 709,
        "title": "ernie静态图模型快照如何转动态图？",
        "body": "您好，我现在有几个训好的静态图模型，想把参数迁移到动态图中，请问应该怎么做呢？\r\n\r\n十分感谢！",
        "state": "closed",
        "user": "daizh",
        "closed_by": "daizh",
        "created_at": "2021-06-28T12:05:50+00:00",
        "updated_at": "2021-08-01T12:38:54+00:00",
        "closed_at": "2021-08-01T12:38:54+00:00",
        "comments_count": [
            "Meiyim",
            "daizh"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 710,
        "title": "pretrain model差异",
        "body": "哈咯，想问下，中文ERNIE_1.0_max-len-512和中文model-ernie1.0.1有什么差异吗？我想自己预训练ERNIE模型，然后再在ERNIE-GEN上finetune，不知道会不会出问题？",
        "state": "closed",
        "user": "kaishxu",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-01T12:05:11+00:00",
        "updated_at": "2021-09-10T23:14:03+00:00",
        "closed_at": "2021-09-10T23:14:03+00:00",
        "comments_count": [
            "YuxiangLu",
            "kaishxu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 711,
        "title": "PADDLE  出现异常，Google or  BAIDU 全部找不到相关的文章",
        "body": "如题所述，这样的问题导致学习起来太费劲了。  不想读了。。。。。。。。大家有什么好的学习办法嘛？",
        "state": "closed",
        "user": "ume-technology",
        "closed_by": "nbcc",
        "created_at": "2021-07-02T09:13:16+00:00",
        "updated_at": "2021-07-04T02:46:29+00:00",
        "closed_at": "2021-07-04T02:46:28+00:00",
        "comments_count": [
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 712,
        "title": "CPU 跑 gram 分支的 NER demo 报错",
        "body": "AssertionError: The setting of Parameter-Server must has server_num or servers.\r\n\r\n报错信息如上。 找了半天没有找到相关 paddle 的报错信息。 这种是 CPU 的任务启动不对？  CPU 的任务应该怎么启动",
        "state": "closed",
        "user": "ume-technology",
        "closed_by": "nbcc",
        "created_at": "2021-07-05T06:35:54+00:00",
        "updated_at": "2021-07-08T02:20:08+00:00",
        "closed_at": "2021-07-08T02:20:08+00:00",
        "comments_count": [
            "ume-technology",
            "nbcc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 713,
        "title": "ERNIE的词表中的##开头的token的用途？",
        "body": "ERNIE的词表文件中有很多##开头的字，但ernie本身就是基于字的模型，那为什么还需要这些##开头的字呢？",
        "state": "closed",
        "user": "KinvenW",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-08T12:48:03+00:00",
        "updated_at": "2021-10-02T06:09:43+00:00",
        "closed_at": "2021-10-02T06:09:43+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 716,
        "title": "What&Where are the $vocab_file, $ernie_vil_config in VCR inference?",
        "body": "Hello,\r\nI want to run the vcr inference (Q->A and Q->AR) ,using code in the README.md:\r\n   Task Q->A: sh run_inference.sh vcr qa $split(val/test) conf/vcr/model_conf_vcr $vocab_file $ernie_vil_config $model_params $res_file\r\n\r\nAnd, however, I couldn't find what are vocab_file and ernie_vil_config files, so I can't run this code:\r\n\r\nThe code I used is following:\r\n\r\n```\r\nsh run_inference.sh vcr qa test conf/vcr/model_conf_vcr \\\r\n        $vocab_file \\\r\n        $ernie_vil_config \\\r\n        model/vcr/model-ernie-vil-base-VCR-task-pre-en/ \\\r\n        result.log\r\n```\r\n$vocab_file and $ernir_vil_config must be replaced. What are they?\r\n\r\nThanks,",
        "state": "closed",
        "user": "greeksharifa",
        "closed_by": "greeksharifa",
        "created_at": "2021-07-19T03:40:43+00:00",
        "updated_at": "2021-07-19T05:01:07+00:00",
        "closed_at": "2021-07-19T05:01:07+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 714,
        "title": "English version for Ernie?",
        "body": "I saw the recent publication of Ernie 3.0 (I cannot seem to gain access-one has\r\nto log in to Baidu) and wondered if there were any English versions\r\nof Google Colab (or ipython/jupyter) notebooks to try out Ernie? Thank you.",
        "state": "closed",
        "user": "metaphorz",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-14T17:24:53+00:00",
        "updated_at": "2021-09-21T01:15:51+00:00",
        "closed_at": "2021-09-21T01:15:51+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 715,
        "title": "When you unify NLU and NLG in the same model, do you apply uni-directional masking?",
        "body": "NLG models usually use uni-directional masking, i.e. a token can only attend to earlier tokens, not later tokens. NLU models usually don't use uni-directional masking and attend bi-directionally. How do you address this problem?",
        "state": "closed",
        "user": "cmsflash",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-17T00:16:34+00:00",
        "updated_at": "2021-10-05T00:52:18+00:00",
        "closed_at": "2021-10-05T00:52:18+00:00",
        "comments_count": [
            "oyjxer",
            "cmsflash",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 717,
        "title": "ERNIE-M Release Data",
        "body": "I saw an older issue which said ERNIE-M is expected to be released in May 2021, Wanted to know the expected timeline for ERNIE-M release. Thanks",
        "state": "closed",
        "user": "sumanthd17",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-19T07:39:30+00:00",
        "updated_at": "2021-12-04T10:41:38+00:00",
        "closed_at": "2021-09-26T17:18:23+00:00",
        "comments_count": [
            "stale[bot]",
            "ricardorei",
            "wangshuohuan"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 719,
        "title": "erine基础模型疑问",
        "body": "       在基础ErineModel中encoder输出项中，第一项为pooled，第二项为encoded ，在后续分类等任务中直接使用了pooled作为前置feature。有个疑问：\r\n        在源代码中pooled是获取的[encoded的切片实现的](https://github.com/PaddlePaddle/ERNIE/blob/develop/ernie/modeling_ernie.py#L466)\r\n        if self.pooler is not None:\r\n              pooled = F.tanh(self.pooler(encoded[:, 0, :]))\r\n\r\n      想请问，这个地方在erine中做了切片处理，有做过其他效果对比嘛，比如全局平均或者其他方式",
        "state": "closed",
        "user": "yinnxinn",
        "closed_by": "yinnxinn",
        "created_at": "2021-07-26T06:35:22+00:00",
        "updated_at": "2021-07-27T13:17:01+00:00",
        "closed_at": "2021-07-27T13:17:01+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 718,
        "title": "Can't open VCR_resnet101_faster_rcnn_genome_pickle2.lmdb: ValueError: unsupported pickle protocol: 3",
        "body": "I want to run the VCR inference(run_inference.sh)  in python 2.7, however, this error occurred:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"finetune.py\", line 868, in <module>\r\n    main(args)\r\n  File \"finetune.py\", line 802, in main\r\n    graph_vars=model_outputs)\r\n  File \"finetune.py\", line 436, in predict_wrapper\r\n    epoch=args.epoch)\r\n  File \"/home/ywjang/ERNIE-repro/ernie-vil/reader/vcr_finetuning.py\", line 414, in __init__\r\n    ImageFeaturesH5Reader(task_conf['feature_lmdb_path'])\r\n  File \"/home/ywjang/ERNIE-repro/ernie-vil/reader/_image_features_reader.py\", line 34, in __init__\r\n    self._image_ids = pickle.loads(txn.get('keys'.encode()))\r\nValueError: unsupported pickle protocol: 3\r\n```\r\n\r\nfeature_path is `u'./data/vcr/VCR_resnet101_faster_rcnn_genome_pickle2.lmdb')`,\r\n\r\nAnd,  the error `ValueError: unsupported pickle protocol: 3` occur usually with pickle protocol version, so I tried to convert the protocol of lmdb(mdb) files:\r\n\r\n```\r\npickle.dump(pickle.load(open('data.mdb', 'rb')), open('data2.mdb', 'wb'), protocol=2)\r\n```\r\n\r\nAnd now, another error occurred:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n_pickle.UnpicklingError: invalid load key, '\\x00'.\r\n```\r\n\r\nIs this github code working?\r\n\r\np.s. in python 3.5, another error occurred:\r\n\r\n```\r\nuse gt featurre\r\nTraceback (most recent call last):\r\n  File \"finetune.py\", line 868, in <module>\r\n    main(args)\r\n  File \"finetune.py\", line 802, in main\r\n    graph_vars=model_outputs)\r\n  File \"finetune.py\", line 436, in predict_wrapper\r\n    epoch=args.epoch)\r\n  File \"/home/ywjang/ERNIE-repro/ernie-vil/reader/vcr_finetuning.py\", line 424, in __init__\r\n    epoch, is_test, feature_reader_dict, random_seed, task_index, len(task_conf_group)))\r\n  File \"/home/ywjang/ERNIE-repro/ernie-vil/reader/vcr_finetuning.py\", line 186, in __init__\r\n    self.tokenize()\r\n  File \"/home/ywjang/ERNIE-repro/ernie-vil/reader/vcr_finetuning.py\", line 255, in tokenize\r\n    q_str = \" \".join(tokens_a)\r\nTypeError: sequence item 0: expected str instance, bytes found\r\n```\r\n\r\n",
        "state": "closed",
        "user": "greeksharifa",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-19T14:03:20+00:00",
        "updated_at": "2021-10-05T00:52:18+00:00",
        "closed_at": "2021-10-05T00:52:18+00:00",
        "comments_count": [
            "yinweichong",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 720,
        "title": "可否提供 ERNITE-ViL 下游任务所用的特征",
        "body": "ERNIE-Vil 的下游任务 VQA, IR&TR 使用到 bottom-up attention 提取特征, 然而提取所需的tool需要使用到的caffe不好安装, 请问能提供下载链接吗?",
        "state": "closed",
        "user": "coldmanck",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-26T07:44:35+00:00",
        "updated_at": "2021-10-05T00:52:00+00:00",
        "closed_at": "2021-10-05T00:52:00+00:00",
        "comments_count": [
            "yinweichong",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 721,
        "title": "模型推理",
        "body": "直接用ernie1.0做mask任务，线上服务怎样压缩模型和加速推理呢",
        "state": "closed",
        "user": "ZTurboX",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-27T02:48:42+00:00",
        "updated_at": "2021-10-05T00:51:58+00:00",
        "closed_at": "2021-10-05T00:51:58+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 723,
        "title": "ernie-gen",
        "body": "",
        "state": "closed",
        "user": "renmada",
        "closed_by": "zhanghan1992",
        "created_at": "2021-07-27T19:21:53+00:00",
        "updated_at": "2021-07-29T08:11:09+00:00",
        "closed_at": "2021-07-29T08:11:09+00:00",
        "comments_count": [
            "renmada",
            "zhanghan1992"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 722,
        "title": "ernie inference",
        "body": "有ernie 线上paddle inference 示例吗",
        "state": "closed",
        "user": "ZTurboX",
        "closed_by": "stale[bot]",
        "created_at": "2021-07-27T03:18:23+00:00",
        "updated_at": "2021-10-05T00:51:59+00:00",
        "closed_at": "2021-10-05T00:51:59+00:00",
        "comments_count": [
            "oyjxer",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 724,
        "title": "Ernie 3.0 Progressive Pretraining Schedules",
        "body": "Loved the Ernie 3.0 paper!\r\n \r\nI have a question about the “progressive pretraining” settings:\r\n \r\nIn section 3.3.1 on page 6, it says:\r\n \r\n> We propose to progressively, smoothly, simultaneously increase: input sequence length, batch size, learning rate, dropout rate.\r\n \r\nIn section 5, how do the smaller models get to the same loss as the large model in only 10 hours on 8 v100s?\r\n \r\n> As shown in Tab. 11, we record the time for the loss value of the model converges to the same as that of the ERNIE 3.0.\r\n \r\nIn section 5, it seems that only batch size and sequence length are scheduled. And “dropout keeps 0 in the progressive warmup stage”. Is this correct?\r\n \r\n \r\nTo summarize, my 2 questions are:\r\n1) Which variables should be increased during training?\r\n2) How many steps (and with what schedules) are the models in section 5 trained for?\r\n \r\n \r\nThanks in advance and let me know if I should ask somewhere else!",
        "state": "closed",
        "user": "sshleifer",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-02T16:03:02+00:00",
        "updated_at": "2022-01-10T10:25:52+00:00",
        "closed_at": "2021-12-09T05:12:17+00:00",
        "comments_count": [
            "stale[bot]",
            "sshleifer",
            "stale[bot]",
            "XiaoqingNLP"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 725,
        "title": "请问是否有计划提供中文ERNIE2.0和ERNIE3.0",
        "body": "请问是否有具体的时间计划对外提供中文ERNIE2.0和ERNIE3.0",
        "state": "closed",
        "user": "lbda1",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-04T09:35:07+00:00",
        "updated_at": "2021-10-16T03:01:43+00:00",
        "closed_at": "2021-10-16T03:01:43+00:00",
        "comments_count": [
            "nbcc",
            "lbda1",
            "lbda1",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 726,
        "title": "Ernie1.0的dialog language model",
        "body": "请问Ernie1.0里的dialog language model预训练任务，这种多于2句的任务是怎么进行数据预处理的？处理的代码在哪里？没有找到。\r\n另外fine tune的时候也可以用这种多句的任务吗？该如何输入token type id呢？是输入0,1,2...吗？",
        "state": "closed",
        "user": "nkjsy",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-05T07:56:13+00:00",
        "updated_at": "2021-10-17T23:55:50+00:00",
        "closed_at": "2021-10-17T23:55:50+00:00",
        "comments_count": [
            "WeiyueSu",
            "nkjsy",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 727,
        "title": "ernie2.0英文数据的预训练源码有公开吗",
        "body": "ernie的预训练任务的源码目前有公开吗？想了解句法的两个任务的实现",
        "state": "closed",
        "user": "linwhitehat",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-06T08:44:02+00:00",
        "updated_at": "2021-10-17T23:55:49+00:00",
        "closed_at": "2021-10-17T23:55:49+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 729,
        "title": "加载unimo参数，对句子向量化，同一个句子两次向量化结果不同",
        "body": null,
        "state": "closed",
        "user": "xiaolufan",
        "closed_by": "xiaolufan",
        "created_at": "2021-08-12T08:26:06+00:00",
        "updated_at": "2021-08-12T08:38:20+00:00",
        "closed_at": "2021-08-12T08:38:20+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 728,
        "title": "ernie1.0预训练后的模型怎么用",
        "body": "ernie1.0预训练后的模型怎么用，模型为ckpt.bin和ernie1.0原先的模型不一样，原先的为模型文件夹，现在是一个文件",
        "state": "closed",
        "user": "Zengpr",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-09T02:29:27+00:00",
        "updated_at": "2021-10-17T23:55:48+00:00",
        "closed_at": "2021-10-17T23:55:48+00:00",
        "comments_count": [
            "WeiyueSu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 730,
        "title": "inference_model是否支持batch形式的输入",
        "body": "刚接触paddle，有几处地方不太清楚\r\n\r\n1. 在demo/finetune_classifier.py中的保存inference_mode这里，为什么placeholder的形状是(2，2)而不是其他的，个人理解应该是batch_size x seq_len 才对，但是inference时确实可以用，不太清楚原因\r\n\r\n```\r\n  src_placeholder = P.zeros([2, 2], dtype='int64')\r\n  sent_placehodler = P.zeros([2, 2], dtype='int64')\r\n  _, static = P.jit.TracedLayer.trace(\r\n      model, inputs=[src_placeholder, sent_placehodler])\r\n```\r\n\r\n2. 目前希望用训练好的模型进行推理预测，但是在使用GPU进行推理时发现报如下错误，当修改batch为1时才能正常预测。如果使用CPU就可以用更大的batch,输入的shape都是batch_size x 130。使用aistudio环境测试也是同样的问题，并不是显存不足的问题。\r\n\r\n```\r\nOSError: (External)  Cublas error, `CUBLAS_STATUS_INTERNAL_ERROR`. An internal cuBLAS operation failed. This error is usually caused by a cudaMemcpyAsync() failure.  (at C:\\home\\workspace\\Paddle_release2\\paddle/fluid/operators/math/blas_impl.cu.h:35)\r\n  [operator < fc > error]\r\n```\r\n\r\n目前的代码是基于finetune_sentiment_analysis.py，预训练模型使用的是ernie-gram-zh\r\n",
        "state": "closed",
        "user": "zero0kiriyu",
        "closed_by": "zero0kiriyu",
        "created_at": "2021-08-12T16:01:57+00:00",
        "updated_at": "2021-08-13T08:14:05+00:00",
        "closed_at": "2021-08-13T08:14:05+00:00",
        "comments_count": [
            "zero0kiriyu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 732,
        "title": "Questions about NLPCC-DBQA task",
        "body": "Dear authors,\r\n\r\nI have seen the ERNIE2 achieves great success on the NLPCC-DBQA task from ERNIE 3 paper. I wonder can you give me some hints on how you apply ERNIE2 to the DBQA task i.e. semantic parsing or information retrieving (embedding)? Thanks a lot. BTW, the NLPCC-DBQA task is listed inside the \"Closed Nook QA category\" in the ERNIE3 paper, and it may not be the \"DBQA\" task I think i.e. using a knowledge graph to do QA.\r\n\r\nBest Regards,\r\nZhang Yong",
        "state": "closed",
        "user": "chuckhope",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-15T03:20:56+00:00",
        "updated_at": "2021-10-21T16:46:55+00:00",
        "closed_at": "2021-10-21T16:46:55+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 895,
        "title": "ernie-develop本地数据预训练后效果变差",
        "body": "请问ernie-develop按照说明进行本地数据预训练后效果变差，训练越久效果越差是什么原因呢？不管是字粒度还是词粒度都是",
        "state": "closed",
        "user": "Zengpr",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-08-13T03:56:36+00:00",
        "updated_at": "2023-03-01T00:21:26+00:00",
        "closed_at": "2023-03-01T00:21:26+00:00",
        "comments_count": [
            "ZeyuChen",
            "ZHUI",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 735,
        "title": "ERINE-vil on indomain dataset",
        "body": "您好，请问你们有测试过erine-vil只在indomain数据上预训练的效果吗",
        "state": "closed",
        "user": "LilAnthony123",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-18T06:27:37+00:00",
        "updated_at": "2021-10-24T07:24:51+00:00",
        "closed_at": "2021-10-24T07:24:50+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 886,
        "title": "ERNIE-Doc只开源了静态图的版本吗，有没有开源最新的动态度的版本",
        "body": "English | 简体中文\r\n\r\n** 欢迎试用动态图实现的ERNIE，请checkout 分支:dygraph **\r\n\r\n官方reademe这个分支名字没找到，能否告知下，最新版本，谢谢",
        "state": "closed",
        "user": "AI-Mart",
        "closed_by": "ZeyuChen",
        "created_at": "2021-08-15T08:33:00+00:00",
        "updated_at": "2021-08-17T06:09:19+00:00",
        "closed_at": "2021-08-17T06:09:19+00:00",
        "comments_count": [
            "ZeyuChen",
            "AI-Mart",
            "joey12300",
            "AI-Mart",
            "joey12300",
            "AI-Mart",
            "AI-Mart",
            "AI-Mart",
            "ZeyuChen"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 885,
        "title": "ERNIE-Doc 官方源代码在aistudio运行失败，也不报错",
        "body": "运行 sh scripts/run_imdb.sh\r\n\r\n\r\n提示以下信息，但是没有进入训练，直接退出了。\r\ncurrent_node_ip: 172.29.180.233\r\nnode_id: 0\r\nnode_ips: 172.29.180.233\r\nnproc_per_node: 2\r\nprint_config: True\r\nselected_gpus: 0,1\r\nsplit_log_path: log\r\ntraining_script: ./run_classifier.py\r\ntraining_script_args: ['--use_cuda', 'true', '--is_distributed', 'true', '--use_fast_executor', 'true', '--tokenizer', 'BPETokenizer', '--use_amp', 'False', '--do_train', 'true', '--do_val', 'true', '--do_test', 'false', '--batch_size', '16', '--init_checkpoint', '', '--init_pretraining_params', '', '--train_set', './data/imdb//train.txt', '--dev_set', './data/imdb//test.txt', '--test_set', './data/imdb//test.txt', '--vocab_path', './configs/base/en/vocab.txt', '--checkpoints', './output', '--save_steps', '100000', '--weight_decay', '0.01', '--warmup_proportion', '0.1', '--validation_steps', '700', '--epoch', '3', '--max_seq_len', '512', '--ernie_config_path', './configs/base/en/ernie_config.json', '--learning_rate', '7e-5', '--skip_steps', '10', '--num_iteration_per_drop_scope', '10', '--layer_decay_ratio', '1', '--num_labels', '2', '--is_zh', 'False', '--use_vars', 'False', '--init_loss_scaling', '32768', '--use_recompute', 'False', '--random_seed', '1']\r\n------------------------------------------------\r\nall_trainer_endpoints:  172.29.180.233:6170,172.29.180.233:6171 , node_id:  0 , current_ip:  172.29.180.233 , num_nodes:  1 , node_ips:  ['172.29.180.233'] , gpus_per_proc:  1 , selected_gpus_per_proc:  [['0'], ['1']] , nranks:  2\r\naistudio@j",
        "state": "closed",
        "user": "AI-Mart",
        "closed_by": "ZeyuChen",
        "created_at": "2021-08-15T11:48:16+00:00",
        "updated_at": "2021-08-17T06:09:00+00:00",
        "closed_at": "2021-08-17T06:08:59+00:00",
        "comments_count": [
            "ZeyuChen",
            "AI-Mart",
            "AI-Mart",
            "ZeyuChen"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 738,
        "title": "Ernie-doc run_imdb.sh 的时候为什么learning_rate一直等于0.00000呢？？",
        "body": "导致准确率只有百分之五十几，没有改任何config的参数",
        "state": "closed",
        "user": "wangddddddd",
        "closed_by": "stale[bot]",
        "created_at": "2021-08-30T15:51:35+00:00",
        "updated_at": "2021-11-07T09:46:54+00:00",
        "closed_at": "2021-11-07T09:46:54+00:00",
        "comments_count": [
            "dingsiyu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 944,
        "title": "ernie-doc的演示脚本读取数据格式不对路径不对跑不起来",
        "body": "在自己下载了iflytek的数据并放到data下之后，运行sh scripts/run_iflytek.sh 日志里显示\r\n`\r\nTraceback (most recent call last):\r\n  File \"./run_classifier.py\", line 306, in <module>\r\n    main(args)\r\n  File \"./run_classifier.py\", line 128, in main\r\n    phase=\"train\")\r\n  File \"/data/hanzhang/ernie/ERNIE/ernie-doc/reader/task_reader.py\", line 243, in data_generator\r\n    examples = self._read_tsv(input_file)\r\n  File \"/data/hanzhang/ernie/ERNIE/ernie-doc/reader/task_reader.py\", line 277, in _read_tsv\r\n    with open(input_file, \"r\") as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: './data/finetune/task_data//iflytek/train/1'\r\n`\r\n这path拼接的完全不对啊，肯定是跑不起来的。\r\n发布方之前运行iflytek的时候使用的不是这个分支的代码？",
        "state": "closed",
        "user": "AntikaSmith",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-08-30T07:36:54+00:00",
        "updated_at": "2023-02-25T00:19:08+00:00",
        "closed_at": "2023-02-25T00:19:07+00:00",
        "comments_count": [
            "ZeyuChen",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 943,
        "title": "ERNIE-Doc讯飞长文本分类的数据集缺少，是否提供样式？",
        "body": null,
        "state": "closed",
        "user": "sherlcok314159",
        "closed_by": "sherlcok314159",
        "created_at": "2021-08-29T02:52:42+00:00",
        "updated_at": "2021-09-06T07:40:21+00:00",
        "closed_at": "2021-09-06T07:40:21+00:00",
        "comments_count": [
            "ZeyuChen"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 739,
        "title": "persona-chat数据处理问题",
        "body": "你好，\r\n1. 我想用自己的数据进行finetune, persona-chat数据处理的脚本或者规则，可以简单介绍下吗\r\n2. 对于tsv中有3个字段：knowledge, src, tgt, 如果我没有 knowledge 这个字段的数据，那么应该如何处理？是不是置空？还是如何处理",
        "state": "closed",
        "user": "jennywei1987",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-01T08:52:15+00:00",
        "updated_at": "2021-11-09T19:46:44+00:00",
        "closed_at": "2021-11-09T19:46:44+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 740,
        "title": "ImportError: cannot import name 'feature_pb2' from 'propeller.paddle.data' (/data/home/scv1927/archive/ERNIE/propeller/paddle/data/__init__.py)",
        "body": "ImportError: cannot import name 'feature_pb2' from 'propeller.paddle.data' (/data/home/scv1927/archive/ERNIE/propeller/paddle/data/__init__.py)",
        "state": "closed",
        "user": "GuocaiL",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-04T14:10:43+00:00",
        "updated_at": "2021-11-23T08:13:14+00:00",
        "closed_at": "2021-11-23T08:13:14+00:00",
        "comments_count": [
            "GuocaiL",
            "ABAPPLO",
            "crrongyan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1008,
        "title": "Where is the whole entity and phrase mask method for Ernie pretrain data?",
        "body": "Does anyone know where could find it?,it is import for me,thank you.",
        "state": "closed",
        "user": "AQA6666",
        "closed_by": "chenxiaozeng",
        "created_at": "2021-09-11T08:22:50+00:00",
        "updated_at": "2021-11-09T10:34:19+00:00",
        "closed_at": "2021-11-09T10:34:19+00:00",
        "comments_count": [
            "ZeyuChen",
            "chenxiaozeng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 744,
        "title": "run_config = dict(default_run_config, **json.loads(args.run_config))   File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/__init__.py\", line 348, in loads     return _default_decoder.decode(s)   File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/decoder.py\", line 337, in decode     obj, end = self.raw_decode(s, idx=_w(s, 0).end())   File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/decoder.py\", line 355, in raw_decode     raise JSONDecodeError(\"Expecting value\", s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)",
        "body": "![image](https://user-images.githubusercontent.com/43643599/133193974-1f606206-bb67-4dd3-851a-5c6ccc306640.png)\r\nrun_config = dict(default_run_config, **json.loads(args.run_config))\r\n  File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/__init__.py\", line 348, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/data/home/scv1927/.conda/envs/py37/lib/python3.7/json/decoder.py\", line 355, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)",
        "state": "closed",
        "user": "GuocaiL",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-14T04:14:36+00:00",
        "updated_at": "2021-11-23T08:13:16+00:00",
        "closed_at": "2021-11-23T08:13:16+00:00",
        "comments_count": [
            "crrongyan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 742,
        "title": "self.sp_model.Load(sp_model_path)报错， 把pathlib的路径转换成str就OK",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/develop/ernie/tokenizing_ernie.py#L272",
        "state": "closed",
        "user": "jjxyai",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-13T09:22:17+00:00",
        "updated_at": "2021-11-23T08:13:12+00:00",
        "closed_at": "2021-11-23T08:13:12+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 743,
        "title": "ernie-gram 只有字的embedding，会开源预训练的包含ngram的的预训练模型么？",
        "body": "看开源的ernie-gram版本只有字的embedding，会开源包含ngram参数的预训练之后模型么？",
        "state": "closed",
        "user": "wxh001qq",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-13T12:34:06+00:00",
        "updated_at": "2021-11-23T08:13:13+00:00",
        "closed_at": "2021-11-23T08:13:13+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 745,
        "title": "利用ERNIE进行知识蒸馏",
        "body": "知识蒸馏完，我应该怎么去调用蒸馏后的模型，我怎么去验证蒸馏比以前的要好，官方的代码都没有给出调用模型的代码，对比的代码，请问有大佬可以提供一下吗https://aistudio.baidu.com/aistudio/projectdetail/439460",
        "state": "closed",
        "user": "LCreatorGH",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-14T08:28:18+00:00",
        "updated_at": "2021-11-23T08:13:15+00:00",
        "closed_at": "2021-11-23T08:13:15+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 747,
        "title": "PaddleNLP/examples/language_model/ernie-doc/  能否提供predict代码和deploy代码",
        "body": "PaddleNLP/examples/language_model/ernie-doc/  能否提供predict代码和deploy代码，想要训练好的模型进行预测和部署，试下效果，能否把这部分代码增加上，谢谢。",
        "state": "closed",
        "user": "AI-Mart",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-15T12:57:25+00:00",
        "updated_at": "2021-11-23T08:13:17+00:00",
        "closed_at": "2021-11-23T08:13:17+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 746,
        "title": "develp 分支 基于paddle 2.0 的 ERNIE 1.0 继续pretrain 训练无法跑通 经分析是代码有问题",
        "body": "1. propeller 有问题 需要用repro分支下的propeller \r\n2. pretrain.py  中 make_pretrain_dataset() 函数 导致程序跑不起来 这个坑太大 改不动，跑的时候会报train_ds 不是 paddle.io.Dataset的子类的错       train_ds = make_pretrain_dataset('train', args.data_dir, vocab=tokenizer.vocab, args=args)",
        "state": "closed",
        "user": "nlper-77",
        "closed_by": "nlper-77",
        "created_at": "2021-09-15T09:13:02+00:00",
        "updated_at": "2021-09-16T09:58:00+00:00",
        "closed_at": "2021-09-16T09:58:00+00:00",
        "comments_count": [
            "ZeyuChen",
            "nlper-77"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 748,
        "title": "中文ernie-gram的权重没有 relative position bias",
        "body": "论文里中文任务的finetune是去掉relative position bias的结果吗",
        "state": "closed",
        "user": "renmada",
        "closed_by": "renmada",
        "created_at": "2021-09-28T04:16:11+00:00",
        "updated_at": "2021-09-30T02:10:06+00:00",
        "closed_at": "2021-09-30T02:10:06+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 749,
        "title": "如何加载ernie-doc的预训练模型",
        "body": "下载了nenie-doc的预训练模型（model-ernie-doc-base-zh.tar.gz），如何加载呢，请大神些指导，感谢",
        "state": "closed",
        "user": "spirit832",
        "closed_by": "spirit832",
        "created_at": "2021-09-28T09:36:46+00:00",
        "updated_at": "2021-10-02T05:30:58+00:00",
        "closed_at": "2021-10-02T05:30:58+00:00",
        "comments_count": [
            "spirit832"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 751,
        "title": "ernie-gen的inference代码",
        "body": "请问ernie-gen做prediction的代码，可以提供吗。感谢感谢",
        "state": "closed",
        "user": "jennywei1987",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-30T08:42:20+00:00",
        "updated_at": "2021-12-07T21:21:57+00:00",
        "closed_at": "2021-12-07T21:21:57+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 750,
        "title": "ernie1.0中文对符号的处理",
        "body": "您好，请问ernie1.0是不是少了『_』的embedding, 因为我发现vocab里面，下划线是没有的，用word转id时，转成UNK，转回来的时候就转不回来了，谢谢",
        "state": "closed",
        "user": "Fujiaoji",
        "closed_by": "stale[bot]",
        "created_at": "2021-09-29T01:58:15+00:00",
        "updated_at": "2021-12-06T05:40:05+00:00",
        "closed_at": "2021-12-06T05:40:05+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 752,
        "title": "动态图模型 pretrain_dygraph.py",
        "body": "请问是否可以提供/demo/pretrain/pretrain_dygraph.py  这个脚本呢",
        "state": "closed",
        "user": "MabelLIng",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-04T08:27:26+00:00",
        "updated_at": "2021-12-11T14:35:33+00:00",
        "closed_at": "2021-12-11T14:35:33+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 753,
        "title": "ernie-1.0论文里说的训练数据开源了吗？",
        "body": "我们想复现ernie-1.0的预训练，所以想知道数据集是否开源了？\r\n论文：https://arxiv.org/pdf/1904.09223.pdf",
        "state": "closed",
        "user": "XBWGC",
        "closed_by": "XBWGC",
        "created_at": "2021-10-09T02:26:06+00:00",
        "updated_at": "2021-12-09T11:57:06+00:00",
        "closed_at": "2021-12-09T11:57:06+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 755,
        "title": "paddleslim如何压缩ernie-tiny",
        "body": "我看网上介绍说paddleslim可以压缩ernie-tiny，使得模型可以做到1ms？这个有案例代码？\r\n![2D7AB4F321E58CD5D511589B23C6B0F4](https://user-images.githubusercontent.com/29837553/137061154-6a156ccb-beb0-49da-9ff4-b723506cea76.jpg)\r\n",
        "state": "closed",
        "user": "tianchiguaixia",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-13T03:16:03+00:00",
        "updated_at": "2021-12-21T04:14:17+00:00",
        "closed_at": "2021-12-21T04:14:17+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 756,
        "title": "在跑Abstractive Text Summarization的demo时，报错AssertionError: The setting of Parameter-Server must has server_num or servers.",
        "body": "平台：macOS 11.6 (非M1芯片)\r\n报错: AssertionError: The setting of Parameter-Server must has server_num or servers.\r\nPaddle安装的为CPU版本，请问有无具体解决办法，谢谢",
        "state": "closed",
        "user": "ZJUAlexChen",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-19T18:39:51+00:00",
        "updated_at": "2021-12-28T12:30:39+00:00",
        "closed_at": "2021-12-28T12:30:39+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 754,
        "title": "ERNIE-doc能否支持长度大于512的句子输入？",
        "body": "ERNIE-doc能否支持长度大于512的句子输入？这个目前有实现吗？",
        "state": "closed",
        "user": "geolvr",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-11T08:22:57+00:00",
        "updated_at": "2022-01-09T01:31:42+00:00",
        "closed_at": "2022-01-09T01:31:42+00:00",
        "comments_count": [
            "liucongg",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 757,
        "title": "请问下，ERNIE-Layout是否有开源计划？如果有的话什么时候开源？",
        "body": "请问下，ERNIE-Layout是否有开源计划？如果有的话什么时候开源？",
        "state": "closed",
        "user": "cjt222",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-20T10:20:39+00:00",
        "updated_at": "2021-12-28T12:30:40+00:00",
        "closed_at": "2021-12-28T12:30:40+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 759,
        "title": "ERNIE导出静态模型后采用paddle inference的GPU推断报错",
        "body": "```python\r\n使用下述代码将ERNIE转换为 inference model\r\n\r\nmodel = ErnieModel.from_pretrained(\"./model/pretrain\", name='', has_pooler=False)   \r\nx_spec = InputSpec(shape=[None, 15], dtype='int64', name='src_ids')                \r\ny_spec = InputSpec(shape=[None, 15], dtype='int64', name='sent_ids')\r\nmodel = P.jit.to_static(model, input_spec=[x_spec, y_spec])\r\npath = \"./model/inference_model/ernie\"\r\nP.jit.save(model, path) \r\n\r\n\r\n然后使用下述paddle inference的C++代码调用转换好的模型，采用GPU方式做推断\r\n\r\npaddle_infer::Config config;\r\nconfig.SetModel(\"./inference_model/ernie.pdmodel\", \"./inference_model/ernie.pdiparams\");\r\nconfig.EnableUseGpu(500, 3);\r\nconfig.SwitchIrOptim(true);\r\nconfig.EnableMemoryOptim();\r\nauto predictor = paddle_infer::CreatePredictor(config);\r\nauto input_names = predictor->GetInputNames();\r\nauto src_ids = predictor->GetInputHandle(input_names[0]);\r\nauto sent_ids = predictor->GetInputHandle(input_names[1]);\r\n......\r\n\r\n\r\n结果报错如下\r\nError Message Summary:\r\n----------------------\r\nExternalError:  Cuda error(700), an illegal memory access was encountered.\r\n  [Advise: Please search for the error code(700) on website( https://docs.nvidia.com/cuda/archive/10.0/cuda-runtime-api/group__CUDART__TYPES.html#group__CUDART__TYPES_1g3f51e3575c2178246db0a94a430e0038 ) to get Nvidia's official solution about CUDA Error.] (at /paddle/paddle/fluid/platform/gpu_info.cc:382)\r\n\r\nAborted (core dumped)\r\n\r\n如果不采用GPU而只用CPU做推断就没有任何问题。\r\n\r\n但是，如果使用同样的代码转换下述动转静的使用文档里的模型：\r\n\r\nimport paddle\r\nfrom paddle.jit import to_static\r\n\r\nclass SimpleNet(paddle.nn.Layer):\r\n    def __init__(self):\r\n        super(SimpleNet, self).__init__()\r\n        self.linear = paddle.nn.Linear(10, 3)\r\n\r\n    def forward(self, x, y):\r\n        out = self.linear(x)\r\n        out = out + y\r\n        return out\r\n\r\nnet = SimpleNet()\r\nnet = paddle.jit.to_static(net)  # 动静转换\r\n\r\n用同样的方式使用paddle inference的C++代码做GPU方式的推理就能够跑得起来，CPU自然不在话下\r\n\r\n那么问题是ERNIE模型为什么采用GPU推断会报错？\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "TTGeek",
        "closed_by": "stale[bot]",
        "created_at": "2021-10-31T03:36:56+00:00",
        "updated_at": "2022-01-07T03:20:32+00:00",
        "closed_at": "2022-01-07T03:20:32+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 760,
        "title": "GLUE榜单上的ERNIE模型是多个模型的Ensemble，具体是怎么Ensemble的呢？",
        "body": "![image](https://user-images.githubusercontent.com/48342447/139777616-6992b100-f95d-42ba-974d-de738920ece7.png)\r\n如图是https://gluebenchmark.com/leaderboard的截图，可以看到那个ERNIE模型是ensemble出来的。\r\n具体是怎么做的呢？是直接平均的吗？还是用了某种Boost算法？\r\n被Ensemble的各个模型又都是什么样子的呢？\r\n我看了ERNIE1.0和2.0的论文，都没有提到具体的Ensemble方法。",
        "state": "closed",
        "user": "Azuresonance",
        "closed_by": "stale[bot]",
        "created_at": "2021-11-02T02:38:09+00:00",
        "updated_at": "2022-01-09T01:31:41+00:00",
        "closed_at": "2022-01-09T01:31:41+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1528,
        "title": "ernie-doc转onnx报错",
        "body": "使用paddle.onnx.export将ernie-doc模型转成onnx时报错！！！不知道是什么问题？有大佬可以帮忙看一下吗？\r\n是ernie-doc不支持onnx的部分操作，还是我写的有问题！！\r\n报错：\r\nValueError: In transformed code:\r\n\r\n    File \"/home/aistudio/work/model.py\", line 32, in forward (* user code *)\r\n        sequence_output, _, _ = self.ernie_doc(input_ids, memories, token_type_ids, position_ids, attention_mask)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n        outputs = self.forward(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlenlp/transformers/ernie_doc/modeling.py\", line 661, in forward (* user code *)\r\n        attn_mask=n_head_self_attn_mask)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n        outputs = self.forward(*inputs, **kwargs)\r\n    File \"/tmp/tmp9br9k_yu.py\", line 30, in forward\r\n        __for_loop_var_index_1, rel_pos, new_mem, attn_mask, i, rel_task])\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n        loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n        loop_vars = body(*loop_vars)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlenlp/transformers/ernie_doc/modeling.py\", line 295, in forward (* user code *)\r\n        attn_mask)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n        outputs = self.forward(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlenlp/transformers/ernie_doc/modeling.py\", line 254, in forward (* user code *)\r\n        rel_task, memory, attn_mask)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n        outputs = self.forward(*inputs, **kwargs)\r\n    File \"/tmp/tmptre_yhrt.py\", line 42, in forward\r\n        True)) == 3), true_fn_7, false_fn_7, (), (), ())\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 208, in convert_ifelse\r\n        return_vars)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 231, in _run_paddle_cond\r\n        lambda: false_fn(*false_args))\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layers/control_flow.py\", line 2403, in cond\r\n        origin_true_output = true_fn()\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 230, in <lambda>\r\n        return control_flow.cond(pred, lambda: true_fn(*true_args),\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlenlp/transformers/ernie_doc/modeling.py\", line 167, in forward (* user code *)\r\n        \"Inputs: quries, keys, values, rel_pos and rel_task should all be 3-D tensors.\"\r\n    ValueError: Inputs: quries, keys, values, rel_pos and rel_task should all be 3-D tensors.\r\n\r\nmodel代码：\r\n```\r\nclass QAModel(ErnieDocPretrainedModel):\r\n    base_model_prefix = \"ernie_doc\"\r\n    def __init__(self, ernie_doc):\r\n        super(QAModel, self).__init__()\r\n        self.ernie_doc = ernie_doc\r\n        self.dropout = nn.Dropout(self.ernie_doc.config[\"hidden_dropout_prob\"])\r\n        self.linear = nn.Linear(self.ernie_doc.config[\"hidden_size\"], 2)\r\n        self.apply(self.init_weights)\r\n\r\n    def forward(self, input_ids, token_type_ids, attention_mask, position_ids, memories=None, start_label=None,\r\n                end_label=None):\r\n        if  memories is None:\r\n            memories = [paddle.zeros([input_ids.shape[0], 128, 768], dtype=\"float32\") for _ in range(12)]\r\n        sequence_output, _, _ = self.ernie_doc(input_ids, memories, token_type_ids, position_ids, attention_mask)\r\n        sequence_output = self.dropout(sequence_output)\r\n        logits = self.linear(sequence_output)\r\n        start_logits, end_logits = paddle.transpose(logits, perm=[2, 0, 1])\r\n        pred_start_label, pred_end_label = paddle.argmax(start_logits, axis=-1), paddle.argmax(end_logits, axis=-1)\r\n        outputs = (start_logits, end_logits, pred_start_label, pred_end_label)\r\n        if start_label is not None and end_label is not None:\r\n            start_position = paddle.unsqueeze(start_label, axis=-1)\r\n            end_position = paddle.unsqueeze(end_label, axis=-1)\r\n            start_loss = paddle.nn.functional.cross_entropy(\r\n                input=start_logits, label=start_position)\r\n            end_loss = paddle.nn.functional.cross_entropy(\r\n                input=end_logits, label=end_position)\r\n            loss = (start_loss + end_loss) / 2\r\n            outputs = (loss,) + outputs\r\n        return outputs\r\n```\r\n\r\n转onnx代码：\r\n```\r\ndef save_onnx_model(args):\r\n    model = QAModel.from_pretrained(args.model_path)\r\n    model.eval()\r\n\r\n    input_ids = paddle.static.InputSpec([1, args.max_len, 1], \"int64\", \"input_ids\")\r\n    attention_mask = paddle.static.InputSpec([1, args.max_len, 1], \"float32\", \"attention_mask\")\r\n    token_type_ids = paddle.static.InputSpec([1, args.max_len, 1], \"int64\", \"token_type_ids\")\r\n    position_ids = paddle.static.InputSpec([1, args.max_len +args.max_len+args.memory_len, 1], \"int64\", \"position_ids\")\r\n    paddle.onnx.export(model, args.onnx_model_path,\r\n                       input_spec=[input_ids, token_type_ids, attention_mask, position_ids], opset_version=10)\r\n\r\n    onnx_model = onnx.load(args.onnx_model_path + \".onnx\")\r\n    onnx.checker.check_model(onnx_model)\r\n```\r\n\r\n执行代码：\r\n```\r\ndef set_args():\r\n    \"\"\"设置训练模型所需参数\"\"\"\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument('--device', default='0', type=str, help='')\r\n    parser.add_argument('--test_path', default='data/cmrc_dev.json', type=str, help='')\r\n    parser.add_argument('--vocab_path', default=\"ernie-doc/vocab.txt\", type=str, help='')\r\n    parser.add_argument('--max_len', type=int, default=512, help='')\r\n    parser.add_argument('--max_query_len', type=int, default=128, help='')\r\n    parser.add_argument('--n_best_size', type=int, default=5, help='')\r\n    parser.add_argument('--max_answer_length', type=int, default=128, help='')\r\n    parser.add_argument('--memory_len', default=128, type=int, help='')\r\n    parser.add_argument('--model_path', default=\"ernie-doc/\", type=str, help='')\r\n    parser.add_argument('--onnx_model_path', default=\"output_dir/checkpoint_onnx/model\", type=str, help='')\r\n    parser.add_argument('--static_model_path', default=\"output_dir/checkpoint_static/model\", type=str, help='')\r\n    parser.add_argument('--use_mkldnn', type=bool, default=True, help='')\r\n    return parser.parse_args()\r\n\r\n\r\nif __name__ == '__main__':\r\n    args = set_args()\r\n    save_onnx_model(args)\r\n```\r\n",
        "state": "closed",
        "user": "liucongg",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-10-27T11:32:15+00:00",
        "updated_at": "2023-02-17T00:19:29+00:00",
        "closed_at": "2023-02-17T00:19:29+00:00",
        "comments_count": [
            "ZeyuChen",
            "liucongg",
            "liucongg",
            "ZeyuChen",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 761,
        "title": "ERNIE-vil的vqa任务的数据集是怎么输入的呢",
        "body": "我从VQA官网上下载了这些数据集\r\n<img width=\"1045\" alt=\"image\" src=\"https://user-images.githubusercontent.com/82857532/140037662-954d142c-adb0-4b37-b1c9-97f30976f52f.png\">\r\n\r\n想询问一下是怎么使用这些数据的",
        "state": "closed",
        "user": "Takeru0618",
        "closed_by": "stale[bot]",
        "created_at": "2021-11-03T09:38:55+00:00",
        "updated_at": "2022-03-09T02:27:30+00:00",
        "closed_at": "2022-03-09T02:27:30+00:00",
        "comments_count": [
            "BinglengTang",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 762,
        "title": "ernie-doc预训练脚本执行问题请协助。",
        "body": "目前已搭建环境，并执行到如下两个截图，无法进展下一步，请协助，非常感谢！\r\n 执行脚本：\r\nsudo bash  scripts/run_dureader.sh\r\n\r\n输出日志为：\r\n-----------  Configuration Arguments -----------\r\ncurrent_node_ip: 127.0.1.1\r\nnode_id: 0\r\nnode_ips: 127.0.1.1\r\nnproc_per_node: 4\r\nprint_config: True\r\nselected_gpus: 0,1,2,3\r\nsplit_log_path: log\r\ntraining_script: run_mrc.py\r\ntraining_script_args: ['--use_cuda', 'true', '--is_distributed', 'true', '--batch_size', '16', '--in_tokens', 'false', '--use_fast_executor', 'true', '--checkpoints', './output', '--vocab_path', './configs/base/zh/vocab.txt', '--do_train', 'true', '--do_val', 'true', '--do_test', 'false', '--save_steps', '10000', '--validation_steps', '100', '--warmup_proportion', '0.1', '--weight_decay', '0.01', '--epoch', '5', '--max_seq_len', '512', '--ernie_config_path', './configs/base/zh/ernie_config.json', '--do_lower_case', 'true', '--doc_stride', '128', '--train_set', './data/finetune/task_data/dureader//train.json', '--dev_set', './data/finetune/task_data/dureader//dev.json', '--test_set', './data/finetune/task_data/dureader//test.json', '--learning_rate', '2.75e-4', '--num_iteration_per_drop_scope', '1', '--lr_scheduler', 'linear_warmup_decay', '--layer_decay_ratio', '0.8', '--is_zh', 'True', '--repeat_input', 'False', '--train_all', 'Fasle', '--eval_all', 'False', '--use_vars', 'False', '--init_checkpoint', '', '--init_pretraining_params', '', '--init_loss_scaling', '32768', '--use_recompute', 'False', '--skip_steps', '10']\r\n------------------------------------------------\r\nall_trainer_endpoints:  127.0.1.1:6170,127.0.1.1:6171,127.0.1.1:6172,127.0.1.1:6173 , node_id:  0 , current_ip:  127.0.1.1 , num_nodes:  1 , node_ips:  ['127.0.1.1'] , gpus_per_proc:  1 , selected_gpus_per_proc:  [['0'], ['1'], ['2'], ['3']] , nranks:  4\r\n",
        "state": "closed",
        "user": "gaoyuan211",
        "closed_by": "stale[bot]",
        "created_at": "2021-11-04T06:33:28+00:00",
        "updated_at": "2022-01-12T01:15:10+00:00",
        "closed_at": "2022-01-12T01:15:10+00:00",
        "comments_count": [
            "gaoyuan211",
            "gaoyuan211",
            "gaoyuan211",
            "gaoyuan211",
            "gaoyuan211",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 765,
        "title": "pretrain.py raising AttributeError: 'PosixPath' object has no attribute 'tell'",
        "body": "When I try to run this command :\r\n```\r\n!python ./demo/pretrain/pretrain.py \\\r\n--data_dir \"path/to/train_data.gz\" \\\r\n--from_pretrained \"ernie-2.0-en\" --save_dir \"path/to/dir/\" \\\r\n--max_seqlen 100\r\n```\r\n\r\nI get this error :\r\n\r\n```\r\nFile \"./demo/pretrain/pretrain.py\", line 346, in <module>\r\n    model = ErnieModelForPretraining.from_pretrained(args.from_pretrained)\r\n  File \"/content/ERNIE/ernie/modeling_ernie.py\", line 293, in from_pretrained\r\n    m = P.load(state_dict_path)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/framework/io.py\", line 928, in load\r\n    with _open_file_buffer(path, 'rb') as f:\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/io.py\", line 111, in _open_file_buffer\r\n    return _buffer_reader(path_or_buffer)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/io.py\", line 86, in __init__\r\n    self.initial_tell = self.buffer.tell()\r\nAttributeError: 'PosixPath' object has no attribute 'tell'\r\n```\r\nHow should I fix it?",
        "state": "closed",
        "user": "peppocola",
        "closed_by": "peppocola",
        "created_at": "2021-11-13T15:50:25+00:00",
        "updated_at": "2022-04-29T07:17:56+00:00",
        "closed_at": "2021-11-15T09:28:42+00:00",
        "comments_count": [
            "peppocola",
            "Meiyim",
            "musitafa0032",
            "l-i-p-f"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 766,
        "title": "batch size problems in ./demo/pretrain.py",
        "body": "in `pretrain.py` at line 370, the batch size is set to 0\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"./demo/pretrain/pretrain.py\", line 370, in <module>\r\n    train_ds, places=P.CUDAPlace(env.dev_id), batch_size=0)):\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/reader.py\", line 391, in __init__\r\n    \"batch_size should be None or a positive value when \" \\\r\nAssertionError: batch_size should be None or a positive value when batch_sampler is not given\r\n```\r\n\r\nwhen trying to set to some positive integer (32) the code enters a loop and never ends.",
        "state": "closed",
        "user": "peppocola",
        "closed_by": "stale[bot]",
        "created_at": "2021-11-15T09:30:37+00:00",
        "updated_at": "2022-01-21T13:42:31+00:00",
        "closed_at": "2022-01-21T13:42:31+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 767,
        "title": "ERNIE-M Release Data (related to #717)",
        "body": "I am bumping #717 because it seems like no one replied.\r\n\r\nIs there any release date for ERNIE-M?",
        "state": "closed",
        "user": "ricardorei",
        "closed_by": "stale[bot]",
        "created_at": "2021-11-18T10:58:47+00:00",
        "updated_at": "2022-02-11T06:42:17+00:00",
        "closed_at": "2022-02-11T06:42:17+00:00",
        "comments_count": [
            "wangshuohuan",
            "wangshuohuan",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1527,
        "title": "ERINE-health is released?",
        "body": "Is the ERINE-health PLM will be released ?",
        "state": "closed",
        "user": "anbo724",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-11-28T01:31:11+00:00",
        "updated_at": "2023-02-10T01:22:18+00:00",
        "closed_at": "2023-02-10T01:22:18+00:00",
        "comments_count": [
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 769,
        "title": "Output of pretrain_static.py",
        "body": "I have successfully trained the ERNIE model by using the ERNIE/demo/pretrain/pretrain_static.py for 1000000 steps. The output is the checkpoint_folder. How can I obtain also the **saved_weights.pdparams** file?",
        "state": "closed",
        "user": "marcopoli",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-01T09:45:39+00:00",
        "updated_at": "2022-02-11T06:42:19+00:00",
        "closed_at": "2022-02-11T06:42:18+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 771,
        "title": "NER源码阅读的一点问题",
        "body": "finetune_ner.py 文件evaluation中以下代码中：\r\n_dic字典中没有存放[UNK]标志位的对应lo数组，但是后面la数组没有将对应位置去除，而只是remove了pad\r\n假设原始lo的shape是50， 在经历了_dic的处理后变成merged_lo，shape只有43，假设la的shape是69，好像代码里会直接padding成69进行f1计算，这样在计算f1值时不就造成错位吗？\r\n                   \r\n                `merged_lo = np.array([np.array(l).mean(0) for _, l in six.iteritems(_dic)])\r\n                merged_preds = np.argmax(merged_lo, -1)\r\n                la = la[np.where(la != (other_tag_id + 1))]  # remove pad`",
        "state": "closed",
        "user": "promisejia",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-03T08:14:26+00:00",
        "updated_at": "2022-02-11T06:42:16+00:00",
        "closed_at": "2022-02-11T06:42:16+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 774,
        "title": "ernie-vil: how to get same val acc using VCR finetuning model ",
        "body": "Thanks for your great work. I am using the VCR finetuning model to evaluate validation set. However, I could not get a correct accuracy score as you reported in the paper? \r\nI got 40% val accuracy [the paper: 77%] when I used the [ERNIE-ViL-VCR-task-pretrain base] model and preprocessed data by ViLBERT.\r\nIf you have any advice I should follow up, could you please let me know?\r\nThank you very much!",
        "state": "closed",
        "user": "yanan1989",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-06T18:36:48+00:00",
        "updated_at": "2022-03-09T02:27:29+00:00",
        "closed_at": "2022-03-09T02:27:29+00:00",
        "comments_count": [
            "BinglengTang",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 775,
        "title": "ernie-layout开源计划",
        "body": "ernie-layout有开源计划吗",
        "state": "closed",
        "user": "ZTurboX",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-07T07:04:42+00:00",
        "updated_at": "2022-02-12T23:17:17+00:00",
        "closed_at": "2022-02-12T23:17:17+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 776,
        "title": "ernie-m下载的权重好像没有看到vocab文件？",
        "body": "![ernie_m](https://user-images.githubusercontent.com/21125331/145760916-fa2218ae-2842-4e48-95d1-c64d364c2dc1.png)\r\n如题，下载了ernie-m的预训练模型并用winrar在window10底下解压了。但好像只有个config还有param文件夹---里面是每一层的参数\r\n，没有看到用于初始化tokenizer的vocab或者其他类似的文件。。\r\n请问这个是我下载的有错误么，还是说解压的方式不对\r\n",
        "state": "closed",
        "user": "another1s",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-13T06:08:05+00:00",
        "updated_at": "2022-02-27T07:10:18+00:00",
        "closed_at": "2022-02-27T07:10:18+00:00",
        "comments_count": [
            "oyjxer",
            "another1s",
            "another1s",
            "oyjxer",
            "oyjxer",
            "oyxuan-11",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1524,
        "title": "ernie与ernie-tiny",
        "body": "您好，请问paddlenlp对于 paddle.transformer 里面的Ernietokenizer.from_pretrain(\"ernie-tiny\")与ErnieTinyTokenizer.from_pretrain(\"ernie-tiny\")有什么区别吗，不太知道选择哪一个",
        "state": "closed",
        "user": "Fujiaoji",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-12-15T09:14:52+00:00",
        "updated_at": "2023-02-09T01:18:56+00:00",
        "closed_at": "2023-02-09T01:18:56+00:00",
        "comments_count": [
            "ZeyuChen",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1525,
        "title": "ERNIE/ernie-m/reader/task_reader.py issue with Jupyter Notebook",
        "body": "Hi there,\r\n\r\nfor ERNIE/ernie-m/reader/task_reader.py , line 36-40\r\n\r\n```\r\nif six.PY3:\r\n    import io\r\n    sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding=\"utf-8\")\r\n    sys.stderr = io.TextIOWrapper(sys.stderr.buffer, encoding=\"utf-8\")\r\n```\r\nmay have \"OutStream object has no attribute buffer\" problem when using in Jupyter notebook.\r\n\r\n\r\nOne possible modification ?\r\n```\r\nif six.PY3:\r\n    import io\r\n    sys.stdout = io.TextIOWrapper(getattr(sys.stdout, \"buffer\", sys.stdout), encoding=\"utf-8\")\r\n    sys.stderr = io.TextIOWrapper(getattr(sys.stderr, \"buffer\", sys.stderr), encoding=\"utf-8\")\r\n```\r\n\r\nBest",
        "state": "closed",
        "user": "ericshijian",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-12-21T07:11:41+00:00",
        "updated_at": "2023-02-09T01:18:39+00:00",
        "closed_at": "2023-02-09T01:18:39+00:00",
        "comments_count": [
            "ZeyuChen",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1526,
        "title": "target is out of class_dimension's upper bound in pretrain",
        "body": "python3 pretrain.py \r\n\r\n/models/projects/q4/tool/v1/ERNIE/ernie/modeling_ernie.py:296: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead\r\n  log.warn('param:%s not set in pretrained model, skip' % k)\r\n************* 8\r\nTraceback (most recent call last):\r\n  File \"./demo/pretrain/pretrain.py\", line 385, in <module>\r\n    nsp_labels=nsp_label)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 914, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/paddle/fluid/dygraph/parallel.py\", line 701, in forward\r\n    outputs = self._layers(*inputs, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 914, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/models/projects/q4/tool/v1/ERNIE/ernie/modeling_ernie.py\", line 734, in forward\r\n    mlm_loss = F.cross_entropy(logits_2d, mlm_labels)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/paddle/nn/functional/loss.py\", line 1671, in cross_entropy\r\n    format(invalid_label[0], input.shape[axis] - 1))\r\nValueError: Target(Tensor(shape=[1], dtype=int64, place=CUDAPlace(2), stop_gradient=True, \r\n       [28676])) is out of class_dimension's upper bound(17999)",
        "state": "closed",
        "user": "JingWang-RU",
        "closed_by": "github-actions[bot]",
        "created_at": "2021-12-14T05:48:52+00:00",
        "updated_at": "2023-02-10T01:22:01+00:00",
        "closed_at": "2023-02-10T01:22:01+00:00",
        "comments_count": [
            "JingWang-RU",
            "JingWang-RU",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 780,
        "title": "propeller documents(propeller 文档)",
        "body": "请问 propeller 框架有可供学习的文档吗",
        "state": "closed",
        "user": "cwings316",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-23T03:45:56+00:00",
        "updated_at": "2022-03-09T02:27:28+00:00",
        "closed_at": "2022-03-09T02:27:28+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 781,
        "title": "ernie-tiny  跑finetune报错",
        "body": "python ./demo/finetune_sentiment_analysis.py --from_pretrained ernie-tiny --data_dir ./data/chnsenticorp/ --save_dir ./tmp/chnsenticorp-tiny --max_steps 1000\r\n\r\n报错\r\n\r\n[DEBUG] 2021-12-29 09:04:35,800 [file_utils.py:   63]:    extacting... to /root/.paddle-ernie-cache/d3edb567a8cec58ff2b4b83d5c4f5bff/tmp\r\nTraceback (most recent call last):\r\n  File \"./demo/finetune_sentiment_analysis.py\", line 87, in <module>\r\n    tokenizer = ErnieTokenizer.from_pretrained(args.from_pretrained)\r\n  File \"/paddle/liuxudong04/zhengya01/gongxingbu/ERNIE/ernie/tokenizing_ernie.py\", line 104, in from_pretrained\r\n    url, force_download=force_download)\r\n  File \"/paddle/liuxudong04/zhengya01/gongxingbu/ERNIE/ernie/file_utils.py\", line 65, in _fetch_from_remote\r\n    tf.extractall(path=str(cached_dir_model))\r\n  File \"/usr/lib/python3.7/tarfile.py\", line 2002, in extractall\r\n    numeric_owner=numeric_owner)\r\n  File \"/usr/lib/python3.7/tarfile.py\", line 2044, in extract\r\n    numeric_owner=numeric_owner)\r\n  File \"/usr/lib/python3.7/tarfile.py\", line 2114, in _extract_member\r\n    self.makefile(tarinfo, targetpath)\r\n  File \"/usr/lib/python3.7/tarfile.py\", line 2163, in makefile\r\n    copyfileobj(source, target, tarinfo.size, ReadError, bufsize)\r\n  File \"/usr/lib/python3.7/tarfile.py\", line 253, in copyfileobj\r\n    buf = src.read(remainder)\r\n  File \"/usr/lib/python3.7/gzip.py\", line 287, in read\r\n    return self._buffer.read(size)\r\n  File \"/usr/lib/python3.7/_compression.py\", line 68, in readinto\r\n    data = self.read(len(byte_view))\r\n  File \"/usr/lib/python3.7/gzip.py\", line 493, in read\r\n    raise EOFError(\"Compressed file ended before the \"\r\nEOFError: Compressed file ended before the end-of-stream marker was reached\r\n",
        "state": "closed",
        "user": "zhengya01",
        "closed_by": "stale[bot]",
        "created_at": "2021-12-29T09:07:01+00:00",
        "updated_at": "2022-03-16T03:43:06+00:00",
        "closed_at": "2022-03-16T03:43:06+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 782,
        "title": "实验数据集",
        "body": "你好，请问ernie 3.0论文中提到的KBQG数据集是哪个呢，在4.1.2章节，给出的脚注16似乎是一个QA任务",
        "state": "closed",
        "user": "cdhx",
        "closed_by": "stale[bot]",
        "created_at": "2022-01-04T07:43:52+00:00",
        "updated_at": "2022-03-16T03:43:07+00:00",
        "closed_at": "2022-03-16T03:43:07+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 783,
        "title": "词粒度问题",
        "body": "完形填空任务时，如何基于词粒度预测。输入是分好词的句子，把句子中某个词mask,预测该mask",
        "state": "closed",
        "user": "ZTurboX",
        "closed_by": "stale[bot]",
        "created_at": "2022-01-07T02:26:22+00:00",
        "updated_at": "2022-03-16T03:43:08+00:00",
        "closed_at": "2022-03-16T03:43:08+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 784,
        "title": "Modeling_ernie.py 中from_pertrained有bug",
        "body": "环境：\r\n win10\r\npython3.7\r\npaddle2.2\r\n\r\n问题：\r\n在使用快速开始教程时，代码报错，打印信息：\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\socks.py:58: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\nfrom collections import Callable\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\win32\\lib\\pywintypes.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\nimport imp, sys, os\r\nW0108 00:24:50.315569 18852 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 8.6, Driver API Version: 11.5, Runtime API Version: 11.1\r\nW0108 00:24:50.327234 18852 device_context.cc:465] device: 0, cuDNN Version: 8.1.\r\nTraceback (most recent call last):\r\nFile \".\\topic_main.py\", line 6, in\r\nmodel = ErnieModel.from_pretrained('ernie-1.0') # Try to get pretrained model from server, make sure you have network connection\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ernie\\modeling_ernie.py\", line 293, in from_pretrained\r\nm = P.load(state_dict_path)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\paddle\\framework\\io.py\", line 928, in load\r\nwith _open_file_buffer(path, 'rb') as f:\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\io.py\", line 111, in _open_file_buffer\r\nreturn _buffer_reader(path_or_buffer)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\io.py\", line 86, in init\r\nself.initial_tell = self.buffer.tell()\r\nAttributeError: 'WindowsPath' object has no attribute 'tell'\r\n\r\n经查发现在Modeling_ernie.py中，传入了WindowsPath对象到load函数中，单词函数仅接受IO类型或字符串，故可修改原代码第200行from_pretrained函数为：\r\n```\r\n    def from_pretrained(cls,\r\n                        pretrain_dir_or_url,\r\n                        force_download=False,\r\n                        **kwargs):\r\n        if not Path(pretrain_dir_or_url).exists() and str(\r\n                pretrain_dir_or_url) in cls.resource_map:\r\n            url = cls.resource_map[str(pretrain_dir_or_url)]\r\n            log.info('get pretrain dir from %s' % url)\r\n            pretrain_dir = _fetch_from_remote(url, force_download)\r\n        else:\r\n            log.info('pretrain dir %s not in %s, read from local' %\r\n                     (pretrain_dir_or_url, repr(cls.resource_map)))\r\n            pretrain_dir = Path(pretrain_dir_or_url)\r\n\r\n        if not pretrain_dir.exists():\r\n            raise ValueError('pretrain dir not found: %s, optional: %s' % (pretrain_dir, cls.resource_map.keys()))\r\n        state_dict_path = pretrain_dir / 'saved_weights.pdparams'\r\n        config_path = pretrain_dir / 'ernie_config.json'\r\n\r\n        if not config_path.exists():\r\n            raise ValueError('config path not found: %s' % config_path)\r\n        name_prefix = kwargs.pop('name', None)\r\n        cfg_dict = dict(json.loads(config_path.open().read()), **kwargs)\r\n        model = cls(cfg_dict, name=name_prefix)\r\n\r\n        log.info('loading pretrained model from %s' % pretrain_dir)\r\n\r\n        if state_dict_path.exists():\r\n            m = P.load(str(state_dict_path.resolve()))\r\n            for k, v in model.state_dict().items():\r\n                if k not in m:\r\n                    log.warn('param:%s not set in pretrained model, skip' % k)\r\n                    m[k] = v  # FIXME: no need to do this in the future\r\n            model.set_state_dict(m)\r\n        else:\r\n            raise ValueError('weight file not found in pretrain dir: %s' %\r\n                             pretrain_dir)\r\n        return model\r\n```",
        "state": "closed",
        "user": "softsweetengineer",
        "closed_by": "stale[bot]",
        "created_at": "2022-01-07T17:20:57+00:00",
        "updated_at": "2022-03-16T03:43:09+00:00",
        "closed_at": "2022-03-16T03:43:09+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1589,
        "title": "使用pretrained model預測值每個session都不同",
        "body": "你好，我想請教關於模型預測的問題。\r\n\r\n我用照著PaddlePaddle官方教程 [『NLP经典项目集』02：使用预训练模型ERNIE优化情感分析](https://aistudio.baidu.com/aistudio/projectdetail/1294333)去試著使用預訓練模型進行預測發生了不同session預測的值都不一樣的狀況。\r\n\r\n以下是我用來load model的code，裏面也是節錄自教程。\r\n```py\r\nMODEL_NAME = \"ernie-tiny\"\r\nmodel = paddlenlp.transformers.ErnieForSequenceClassification.from_pretrained(\r\n    MODEL_NAME, num_classes=2\r\n)\r\ntokenizer = paddlenlp.transformers.ErnieTokenizer.from_pretrained(MODEL_NAME)\r\n```\r\n\r\n下面兩個session是我測出來的兩次結果。\r\n\r\n- Session 1\r\n  \r\n  ```py\r\n  [2022-01-13 17:15:50,895] [    INFO] - Already cached /Users/natlee/.paddlenlp/models/ernie-tiny/ernie_tiny.pdparams\r\n  [2022-01-13 17:16:01,427] [    INFO] - Already cached /Users/natlee/.paddlenlp/models/ernie-tiny/vocab.txt\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[ 0.13549286, -0.13806482]])\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[0.12553988, 0.00673731]])\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[ 0.33032602, -0.19545904]])\r\n  Label: negative  Data: 这个宾馆比较陈旧了，特价的房间也很一般。总体来说一般\r\n  Label: negative  Data: 怀着十分激动的心情放映，可是看着看着发现，在放映完毕后，出现一集米老鼠的动画片\r\n  Label: negative  Data: 作为老的四星酒店，房间依然很整洁，相当不错。机场接机服务很好，可以在车上办理入住手续，节省时间。\r\n  ```\r\n\r\n- Session 2\r\n\r\n  ```py\r\n  [2022-01-13 17:16:08,730] [    INFO] - Already cached /Users/natlee/.paddlenlp/models/ernie-tiny/ernie_tiny.pdparams\r\n  [2022-01-13 17:16:17,867] [    INFO] - Already cached /Users/natlee/.paddlenlp/models/ernie-tiny/vocab.txt\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[ 0.02667004, -0.73497981]])\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[ 0.19348651, -0.19219553]])\r\n  Tensor(shape=[1, 2], dtype=float32, place=CPUPlace, stop_gradient=False,\r\n         [[-0.15158278, -0.18138279]])\r\n  Label: negative  Data: 这个宾馆比较陈旧了，特价的房间也很一般。总体来说一般\r\n  Label: negative  Data: 怀着十分激动的心情放映，可是看着看着发现，在放映完毕后，出现一集米老鼠的动画片\r\n  Label: negative  Data: 作为老的四星酒店，房间依然很整洁，相当不错。机场接机服务很好，可以在车上办理入住手续，节省时间。\r\n  ```\r\n\r\n針對教程裏面提供的預測資料第三筆`作为老的四星酒店，房间依然很整洁，相当不错。机场接机服务很好，可以在车上办理入住手续，节省时间。`來說，第一個session預測的時候，logits是`[ 0.33032602, -0.19545904]`，第二次則變成`[-0.15158278, -0.18138279]`。\r\n\r\n想問是我的姿勢錯誤還是後面有一個random在影響模型預測結果？\r\n\r\n我使用的機器如下：\r\n\r\n```\r\n機型名稱：\tMacBook Pro(2019, 3 ports)\r\n機型識別碼：\tMacBookPro15,2\r\n處理器名稱：\t四核心Intel Core i5\r\n處理器速度：\t2.4 GHz\r\nOS:             macOS Monterey version of 12.0.1\r\nPython version: 3.8.5\r\nPackage:        paddlenlp==2.2.3\r\n                paddlepaddle==2.2.1\r\n```\r\n\r\n謝謝！\r\n\r\n\r\n",
        "state": "closed",
        "user": "NatLee",
        "closed_by": "NatLee",
        "created_at": "2022-01-13T09:42:00+00:00",
        "updated_at": "2022-01-14T17:26:34+00:00",
        "closed_at": "2022-01-14T17:26:34+00:00",
        "comments_count": [
            "JunnYu",
            "NatLee",
            "JunnYu",
            "NatLee",
            "NatLee",
            "JunnYu",
            "NatLee"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 788,
        "title": "用预训练模型做finetune的推荐硬件配置",
        "body": "RT",
        "state": "closed",
        "user": "maplelinfy",
        "closed_by": "stale[bot]",
        "created_at": "2022-02-16T10:17:09+00:00",
        "updated_at": "2022-04-27T10:01:41+00:00",
        "closed_at": "2022-04-27T10:01:41+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1645,
        "title": "ERNIE 1.0  预训练阶段, 三种mask的顺序",
        "body": "你好! 想问一下,在ERNIE 1.0  预训练阶段  , 字-level,  短语-level, 实体-level   是\r\n方式一:\r\n        如源码一样,  \r\n   \r\n             `       for index, file_ in enumerate(files):\r\n\r\n                             file_, mask_word_prob = file_.strip().split(\"\\t\")\r\n\r\n                           mask_word = (np.random.random() < float(mask_word_prob))\r\n\r\n                        if mask_word:\r\n\r\n                             self.mask_type = \"mask_word\"\r\n\r\n                        else:\r\n\r\n                            self.mask_type = \"mask_char\"\r\n\r\n                      ... \r\n                \r\n                             sample.append(mask_word)\r\n`\r\n      对不同的文件, 通过random的方式 随机选择 是 mask_word 还是 mask_char?  那么文件是不复用吗?  mask_word和mask_char 是按文件交替进行?\r\n\r\n还是\r\n方式二:\r\n    多阶段训练:\r\n       比如 百科数据,  先全部进行mask  char ;  \r\n      然后 所有数据都分词成短语, 全部进行mask word; \r\n      最后 所有数据都切成 实体, 全部进行mask word;\r\n也就是每个数据集都会用3次, 然后  mask_word和mask_char 不是交替进行, 而是 mask_char 都预训练完后, 再继续mask_word  ?\r\n \r\n        \r\n",
        "state": "closed",
        "user": "MosBest",
        "closed_by": "github-actions[bot]",
        "created_at": "2022-01-26T03:46:55+00:00",
        "updated_at": "2023-02-07T01:17:05+00:00",
        "closed_at": "2023-02-07T01:17:05+00:00",
        "comments_count": [
            "ZHUI",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 789,
        "title": "ERNIE-M",
        "body": "请问 ERNIE-M 有和 MT5 做对比吗？",
        "state": "closed",
        "user": "ume-technology",
        "closed_by": "stale[bot]",
        "created_at": "2022-02-18T04:50:33+00:00",
        "updated_at": "2022-04-27T10:01:40+00:00",
        "closed_at": "2022-04-27T10:01:40+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1646,
        "title": "ernie 多卡运行报错，求助！",
        "body": "W0124 17:39:37.448936  6056 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 278, in <module>\r\n    train()\r\n  File \"./train.py\", line 142, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nW0124 17:40:17.741384  6238 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 278, in <module>\r\n    train()\r\n  File \"./train.py\", line 142, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nW0124 17:41:52.834609  6531 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 278, in <module>\r\n    train()\r\n  File \"./train.py\", line 142, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nW0124 17:42:44.001705  6730 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 277, in <module>\r\n    train()\r\n  File \"./train.py\", line 141, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nW0124 17:44:47.706532  7116 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 277, in <module>\r\n    train()\r\n  File \"./train.py\", line 141, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nusage: seq2seq model with ERNIE-GEN [-h] --model_name_or_path\r\n                                    MODEL_NAME_OR_PATH --output_dir OUTPUT_DIR\r\n                                    [--max_encode_len MAX_ENCODE_LEN]\r\n                                    [--max_decode_len MAX_DECODE_LEN]\r\n                                    [--batch_size BATCH_SIZE]\r\n                                    [--learning_rate LEARNING_RATE]\r\n                                    [--weight_decay WEIGHT_DECAY]\r\n                                    [--adam_epsilon ADAM_EPSILON]\r\n                                    [--num_epochs NUM_EPOCHS]\r\n                                    [--warmup_proportion WARMUP_PROPORTION]\r\n                                    [--logging_steps LOGGING_STEPS]\r\n                                    [--save_steps SAVE_STEPS]\r\n                                    [--device {cpu,gpu,xpu}]\r\n                                    [--beam_width BEAM_WIDTH]\r\n                                    [--noise_prob NOISE_PROB]\r\n                                    [--use_random_noice]\r\n                                    [--label_smooth LABEL_SMOOTH]\r\n                                    [--length_penalty LENGTH_PENALTY]\r\n                                    [--init_checkpoint INIT_CHECKPOINT]\r\n                                    [--save_dir SAVE_DIR]\r\nseq2seq model with ERNIE-GEN: error: unrecognized arguments: ；\r\nW0124 17:47:22.507128  7650 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 277, in <module>\r\n    train()\r\n  File \"./train.py\", line 141, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\nW0124 17:48:10.260015  7841 dynamic_loader.cc:238] You may need to install 'nccl2' from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle.\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 277, in <module>\r\n    train()\r\n  File \"./train.py\", line 141, in train\r\n    paddle.distributed.init_parallel_env()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py\", line 196, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n\r\n\r\n\r\nI0124 17:39:37.448693  6061 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:38861 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017179 (unix time) try \"date -d @1643017179\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001780) received by PID 6061 (TID 0x7f451f2d9740) from PID 6016 ***]\r\n\r\nI0124 17:40:17.740386  6243 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:59285 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017219 (unix time) try \"date -d @1643017219\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001831) received by PID 6243 (TID 0x7fdb0a4f8740) from PID 6193 ***]\r\n\r\nI0124 17:41:52.845729  6536 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:54531 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017314 (unix time) try \"date -d @1643017314\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f40000195a) received by PID 6536 (TID 0x7fa218d91740) from PID 6490 ***]\r\n\r\nI0124 17:42:43.999094  6735 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:42583 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017365 (unix time) try \"date -d @1643017365\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001a20) received by PID 6735 (TID 0x7f1402a47740) from PID 6688 ***]\r\n\r\nI0124 17:44:47.704035  7121 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:46035 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017489 (unix time) try \"date -d @1643017489\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001ba3) received by PID 7121 (TID 0x7f0554a97740) from PID 7075 ***]\r\n\r\nusage: seq2seq model with ERNIE-GEN [-h] --model_name_or_path\r\n                                    MODEL_NAME_OR_PATH --output_dir OUTPUT_DIR\r\n                                    [--max_encode_len MAX_ENCODE_LEN]\r\n                                    [--max_decode_len MAX_DECODE_LEN]\r\n                                    [--batch_size BATCH_SIZE]\r\n                                    [--learning_rate LEARNING_RATE]\r\n                                    [--weight_decay WEIGHT_DECAY]\r\n                                    [--adam_epsilon ADAM_EPSILON]\r\n                                    [--num_epochs NUM_EPOCHS]\r\n                                    [--warmup_proportion WARMUP_PROPORTION]\r\n                                    [--logging_steps LOGGING_STEPS]\r\n                                    [--save_steps SAVE_STEPS]\r\n                                    [--device {cpu,gpu,xpu}]\r\n                                    [--beam_width BEAM_WIDTH]\r\n                                    [--noise_prob NOISE_PROB]\r\n                                    [--use_random_noice]\r\n                                    [--label_smooth LABEL_SMOOTH]\r\n                                    [--length_penalty LENGTH_PENALTY]\r\n                                    [--init_checkpoint INIT_CHECKPOINT]\r\n                                    [--save_dir SAVE_DIR]\r\nseq2seq model with ERNIE-GEN: error: unrecognized arguments: ；\r\nI0124 17:47:22.505717  7655 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:57815 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017644 (unix time) try \"date -d @1643017644\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001db8) received by PID 7655 (TID 0x7fcaad388740) from PID 7608 ***]\r\n\r\nI0124 17:48:10.259455  7846 gen_comm_id_helper.cc:181] Server listening on: 127.0.0.1:54663 successful.\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::imperative::NCCLParallelContext::BcastNCCLId(std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >&, int, int)\r\n2   void paddle::platform::RecvBroadCastCommID<ncclUniqueId>(int, std::string, std::vector<ncclUniqueId, std::allocator<ncclUniqueId> >*)\r\n3   paddle::framework::SignalHandle(char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1643017692 (unix time) try \"date -d @1643017692\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x1f400001e6a) received by PID 7846 (TID 0x7f3271e1b740) from PID 7786 ***]\r\n\r\n\r\n",
        "state": "closed",
        "user": "gaoyuan211",
        "closed_by": "github-actions[bot]",
        "created_at": "2022-01-25T01:58:23+00:00",
        "updated_at": "2023-02-07T01:17:10+00:00",
        "closed_at": "2023-02-07T01:17:10+00:00",
        "comments_count": [
            "linjieccc",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 791,
        "title": "config/vocab.txt中没有大写的‘捌’",
        "body": "最近在学习ERNIE的过程中发现，ERNIE的字典中没有大写的‘捌’这个字符，其余大写数字均有。\r\n为什么会出现这种情况呢？遇到这种情况应该怎么处理呢？直接在字典最后将‘捌’加入再训练模型吗？",
        "state": "closed",
        "user": "shaonanqinghuaizongshishi",
        "closed_by": "stale[bot]",
        "created_at": "2022-03-02T02:03:06+00:00",
        "updated_at": "2022-05-25T23:35:48+00:00",
        "closed_at": "2022-05-25T23:35:48+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 794,
        "title": "请问ernie-gen更改哪个超参可以生成长句子呢，我想做文本摘要，但是卡在50个汉字不动了",
        "body": "train_path(str): 训练集路径。训练集的格式应为：\"序号\\t输入文本\\t标签\"，例如：\"1\\t床前明月光\\t疑是地上霜\"\r\ndev_path(str): 验证集路径。验证集的格式应为：\"序号\\t输入文本\\t标签\"，例如：\"1\\t举头望明月\\t低头思故乡\"\r\nsave_dir(str): 模型保存以及验证集预测输出路径。\r\ninit_ckpt_path(str): 模型初始化加载路径，可实现增量训练。\r\nuse_gpu(bool): 是否使用GPU。\r\nmax_steps(int): 最大训练步数。\r\nbatch_size(int): 训练时的batch大小。\r\nmax_encode_len(int): 最长编码长度。\r\nmax_decode_len(int): 最长解码长度。\r\nlearning_rate(float): 学习率大小。\r\nwarmup_proportion(float): 学习率warmup比例。\r\nweight_decay(float): 权值衰减大小。\r\nnoise_prob(float): 噪声概率，详见ernie gen论文。\r\nlabel_smooth(float): 标签平滑权重。\r\nbeam_width(int): 验证集预测时的beam大小。\r\nlength_penalty(float): 验证集预测时的长度惩罚权重。\r\nlog_interval(int): 训练时的日志打印间隔步数。\r\nsave_interval(int): 训练时的模型保存间隔部署。验证集将在模型保存完毕后进行预测。",
        "state": "closed",
        "user": "network-opinion",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-02T23:31:25+00:00",
        "updated_at": "2022-08-11T07:45:27+00:00",
        "closed_at": "2022-06-12T12:19:59+00:00",
        "comments_count": [
            "stale[bot]",
            "lcs1225"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 795,
        "title": "ernie-gram-zh词表中存在重复的token: $ ",
        "body": "vocab.txt\r\n```\r\n....\r\n$\t12084\r\n...\r\n$\t18005\r\n...\r\n```\r\n不知道是故意为之还是写了bug\r\n<img width=\"1385\" alt=\"WX20220404-003454@2x\" src=\"https://user-images.githubusercontent.com/16462374/161438239-07b0b37d-862d-4f40-8142-7a7b2765b7b4.png\">\r\n\r\n",
        "state": "closed",
        "user": "nghuyong",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-03T16:35:47+00:00",
        "updated_at": "2022-06-12T12:19:58+00:00",
        "closed_at": "2022-06-12T12:19:58+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 1819,
        "title": "ERNIE-DOC预训练模型用于paddlenlp做文本分类的Demo",
        "body": "有大佬成功使用ERNIE-DOC的预训练模型进行文本分类的吗？我按照ERNIE-1.0的代码报错了，提示缺少att_mask。。。",
        "state": "closed",
        "user": "llllearner",
        "closed_by": "github-actions[bot]",
        "created_at": "2022-03-22T12:13:28+00:00",
        "updated_at": "2023-01-25T00:17:58+00:00",
        "closed_at": "2023-01-25T00:17:58+00:00",
        "comments_count": [
            "ZeyuChen",
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 796,
        "title": "请问有CV大模型吗",
        "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
        "state": "closed",
        "user": "raychiu0202",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-09T00:32:42+00:00",
        "updated_at": "2022-07-14T07:41:31+00:00",
        "closed_at": "2022-07-14T07:41:31+00:00",
        "comments_count": [
            "raychiu0202",
            "ZeyuChen",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 797,
        "title": "ernie-gram",
        "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - Browser [e.g. chrome, safari]\r\n - Version [e.g. 22]\r\n\r\n**Smartphone (please complete the following information):**\r\n - Device: [e.g. iPhone6]\r\n - OS: [e.g. iOS8.1]\r\n - Browser [e.g. stock browser, safari]\r\n - Version [e.g. 22]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
        "state": "closed",
        "user": "wjzqbb",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-26T03:02:41+00:00",
        "updated_at": "2022-07-14T07:40:57+00:00",
        "closed_at": "2022-07-14T07:40:57+00:00",
        "comments_count": [
            "wjzqbb",
            "ZeyuChen",
            "renyan01",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 799,
        "title": "ernie-vil数据问题",
        "body": "ernie-vil下载代码后发现data文件夹下缺少vcr文件夹，可否提供一下，运行的时候提示缺少args.task_group_json",
        "state": "closed",
        "user": "renyan01",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-27T08:09:27+00:00",
        "updated_at": "2022-07-14T07:40:41+00:00",
        "closed_at": "2022-07-14T07:40:41+00:00",
        "comments_count": [
            "renyan01",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 798,
        "title": "Where can I find the training dataset like XNLI ？",
        "body": "I want to run the XNLI fine-tune task. I find the pretrained model and fine-tune scripts in README, but I didn't find the XNLI dataset. Where can I find it?\r\n Or should I download XNLI_MT_1.0 and process it by myself? And How?\r\nI don't know what is train.all.tsv like and what is label_map.json...\r\n",
        "state": "closed",
        "user": "13269279918",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-26T13:54:56+00:00",
        "updated_at": "2022-07-14T07:40:33+00:00",
        "closed_at": "2022-07-14T07:40:33+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 800,
        "title": "复现ERNIE-GEN的Persona-chat数据集时出现错误",
        "body": "当我执行\r\n```\r\nMODEL=\"base\"      # base or large or large_430g\r\nTASK=\"personachat\"   # cnndm, coqa, gigaword, squad_qg or persona-chat\r\nsh run_seq2seq.sh ./configs/${MODEL}/${TASK}_conf\r\n```\r\n这是log文件的输出\r\n```\r\n-----------  Configuration Arguments -----------\r\ncurrent_node_ip: 127.0.1.1\r\nlog_prefix: \r\nnode_id: 0\r\nnode_ips: 127.0.1.1\r\nprint_config: True\r\nsplit_log_path: log\r\ntraining_script: ./run_seq2seq.py\r\ntraining_script_args: ['--use_cuda', 'true', '--do_train', 'true', '--do_val', 'true', '--do_test', 'true', '--do_pred', 'false', '--train_set', 'datasets/persona_chat/train.tsv', '--dev_set', 'datasets/persona_chat/dev.2k.tsv', '--test_set', 'datasets/persona_chat/test.tsv', '--pred_set', 'datasets/persona_chat/', '--epoch', '10', '--tokenizer', 'FullTokenizer', '--tokenized_input', 'true', '--task_type', 'normal', '--role_type_size', '0', '--turn_type_size', '0', '--max_src_len', '192', '--max_tgt_len', '64', '--max_dec_len', '32', '--hidden_dropout_prob', '0.1', '--attention_probs_dropout_prob', '-1', '--random_noise', 'true', '--noise_prob', '0.5', '--continuous_position', 'true', '--tgt_type_id', '3', '--batch_size', '16', '--learning_rate', '3e-5', '--lr_scheduler', 'linear_warmup_decay', '--warmup_proportion', '0.1', '--weight_decay', '0.01', '--weight_sharing', 'True', '--label_smooth', '0.1', '--do_decode', 'true', '--beam_size', '5', '--length_penalty', '0.6', '--init_pretraining_params', 'ernie_gen_base/params', '--vocab_path', 'ernie_gen_base/vocab.txt', '--ernie_config_path', 'ernie_gen_base/ernie_config.json', '--checkpoints', './checkpoints', '--save_and_valid_by_epoch', 'true', '--eval_script', 'sh', './eval/tasks/persona_chat/eval.sh', '--eval_mertrics', 'rouge-1,rouge-2,rouge-l', '--random_seed', '38956']\r\n------------------------------------------------\r\nall_trainer_endpoints:  127.0.1.1:6170,127.0.1.1:6171,127.0.1.1:6172 , node_id:  0 , current_ip:  127.0.1.1 , num_nodes:  1 , node_ips:  ['127.0.1.1'] , gpus_per_proc:  1 , selected_gpus_per_proc:  [[0], [1], [2]] , nranks:  3\r\n```\r\n\r\n这是conf文件\r\n```\r\n#load model\r\nvocab_path=\"ernie_gen_base/vocab.txt\"\r\nconfig_path=\"ernie_gen_base/ernie_config.json\"\r\ninit_model=\"ernie_gen_base/params\"\r\n\r\n#input\r\nmax_src_len=192\r\nmax_tgt_len=64\r\ntokenized_input=\"true\"\r\ncontinuous_position=\"true\"\r\nbatch_size=16\r\nin_tokens=\"false\"\r\ntgt_type_id=3\r\n\r\n#decode\r\ndo_decode=\"true\"\r\nmax_dec_len=32\r\nbeam_size=5\r\nlength_penalty=0.6\r\nuse_multi_gpu_test=\"true\"\r\n\r\n#train\r\nepoch=10\r\nweight_decay=0.01\r\nlabel_smooth=0.1\r\nhidden_dropout_prob=0.1\r\nsave_and_valid_by_epoch=\"true\"\r\n#lr\r\nwarmup_proportion=0.1\r\nlr_scheduler=\"linear_warmup_decay\"\r\nlearning_rate=3e-5\r\n#noise\r\nrandom_noise=\"true\"\r\nnoise_prob=0.5\r\n\r\n#dataset\r\ndata_path=\"datasets/persona_chat\"\r\ntrain_set=\"train.tsv\"\r\ndev_set=\"dev.2k.tsv\"\r\ntest_set=\"test.tsv\"\r\ndo_train=\"true\"\r\ndo_val=\"true\"\r\ndo_test=\"true\"\r\ndo_pred=\"false\"\r\n\r\n#evaluate\r\neval_script=\"sh ./eval/tasks/persona_chat/eval.sh\"\r\n#eval_mertrics=\"rouge-1,rouge-2,rouge-l,bleu-1,bleu-2,bleu-3,bleu-4,dist-1,dis-2,dist-3,dist-4\"\r\neval_mertrics=\"rouge-1,rouge-2,rouge-l\"\r\n```",
        "state": "closed",
        "user": "xiang-xiang-zhu",
        "closed_by": "stale[bot]",
        "created_at": "2022-04-29T08:47:09+00:00",
        "updated_at": "2022-07-14T07:41:14+00:00",
        "closed_at": "2022-07-14T07:41:14+00:00",
        "comments_count": [
            "xiang-xiang-zhu",
            "xiang-xiang-zhu",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 819,
        "title": "产品文档中的代码在本项目中找不到？",
        "body": "专业版开发套件ERNIE产品文档地址：https://ai.baidu.com/ai-doc/ERNIE/6kmk93v71",
        "state": "closed",
        "user": "wjddd",
        "closed_by": "wjddd",
        "created_at": "2022-05-20T06:52:47+00:00",
        "updated_at": "2022-05-27T08:57:51+00:00",
        "closed_at": "2022-05-27T08:57:51+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 818,
        "title": "安装后第一次跑报AttributeError: 'WindowsPath' object has no attribute 'tell'",
        "body": "应该是执行：model = ErnieModel.from_pretrained('ernie-1.0')时报如下错，windows中的pycharm里跑的，版本2.3.0\r\n\r\n[INFO] 2022-05-20 14:36:48,313 [modeling_ernie.py:  267]:    get pretrain dir from https://ernie-github.cdn.bcebos.com/model-ernie1.0.1.tar.gz\r\n[INFO] 2022-05-20 14:36:54,157 [modeling_ernie.py:  285]:    loading pretrained model from C:\\Users\\xwhmajun\\.paddle-ernie-cache\\466eabcffd6d6a83ae9cb97dd1a167bd\r\nTraceback (most recent call last):\r\n  File \"D:\\anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 3457, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-2-7cbf84344b97>\", line 1, in <module>\r\n    runfile('E:/telecom/telework/python/geekbangpython-master/geekbangpython-master/chinese_match/paddle_baidu.py', wdir='E:/telecom/telework/python/geekbangpython-master/geekbangpython-master/chinese_match')\r\n  File \"D:\\Program Files\\PyCharm 2020.1\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"D:\\Program Files\\PyCharm 2020.1\\plugins\\python\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"E:/telecom/telework/python/geekbangpython-master/geekbangpython-master/chinese_match/paddle_baidu.py\", line 18, in <module>\r\n    model = ErnieModel.from_pretrained('ernie-1.0')\r\n  File \"D:\\anaconda3\\lib\\site-packages\\ernie\\ernie\\modeling_ernie.py\", line 293, in from_pretrained\r\n    m = P.load(state_dict_path)\r\n  File \"C:\\Users\\xwhmajun\\AppData\\Roaming\\Python\\Python39\\site-packages\\paddle\\framework\\io.py\", line 947, in load\r\n    with _open_file_buffer(path, 'rb') as f:\r\n  File \"C:\\Users\\xwhmajun\\AppData\\Roaming\\Python\\Python39\\site-packages\\paddle\\fluid\\io.py\", line 111, in _open_file_buffer\r\n    return _buffer_reader(path_or_buffer)\r\n  File \"C:\\Users\\xwhmajun\\AppData\\Roaming\\Python\\Python39\\site-packages\\paddle\\fluid\\io.py\", line 86, in __init__\r\n    self.initial_tell = self.buffer.tell()\r\nAttributeError: 'WindowsPath' object has no attribute 'tell'\r\n\r\n",
        "state": "closed",
        "user": "Daminan0919",
        "closed_by": "stale[bot]",
        "created_at": "2022-05-20T06:41:15+00:00",
        "updated_at": "2022-09-28T03:54:50+00:00",
        "closed_at": "2022-09-28T03:54:50+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 822,
        "title": "ERNIE-GeoL有开源的计划么？",
        "body": "ERNIE-GeoL有开源的计划么？",
        "state": "closed",
        "user": "wyqnumber",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-01T07:40:59+00:00",
        "updated_at": "2022-08-12T01:34:58+00:00",
        "closed_at": "2022-08-12T01:34:58+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 823,
        "title": "Ernie3.0 词表有问题",
        "body": "Ernie3.0的vocab中存在$词重复的现象，不知能否解决？\r\n",
        "state": "closed",
        "user": "Davion-Liu",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-08T06:58:16+00:00",
        "updated_at": "2022-09-20T19:31:32+00:00",
        "closed_at": "2022-09-20T19:31:32+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 826,
        "title": "如果通用模型持续预训练，下游任务的模型层需要重新简单训练吗？",
        "body": "<img width=\"885\" alt=\"image\" src=\"https://user-images.githubusercontent.com/20497531/172976864-dbd21feb-a56e-4b3b-8c5c-13672153bfd8.png\">\r\n看论文的时候想到的，如果不需要的话，是为什么呢？任务层的效果变化幅度怎么样？下游任务可能会变得更差吗？\r\n如果需要的话，重新一轮会需要多久呢？",
        "state": "closed",
        "user": "yayaQAQ",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-10T02:19:09+00:00",
        "updated_at": "2022-09-28T03:54:52+00:00",
        "closed_at": "2022-09-28T03:54:52+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 828,
        "title": "ERNIE3.0文本生成",
        "body": "您好，请问一下开源的ERNIE3.0模型是否支持生成任务？因为在ernie和paddlenlp项目中的example中ernie3.0均未使用于生成任务，生成任务使用的都是ernie-gen。",
        "state": "closed",
        "user": "ssrssrcode",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-22T10:50:53+00:00",
        "updated_at": "2022-09-28T03:54:48+00:00",
        "closed_at": "2022-09-28T03:54:48+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 829,
        "title": "C++想比较两个文档相似度，准备调用paddle inference+ernie3.0模型(ErnieMatchingSiamesePairwise)，怎么把string转化为input tensor，有示例吗？",
        "body": "用ERNIE\\applications\\tasks\\text_matching\\run_infer.py，预测data\\predict_data\\infer.txt数据，两个完全不同的短文本比较：\r\n: run_infer.py:50 * 9640 ('在家电脑做什么兼职好呢\\t海 尔 全自 动 洗 衣 机', '[0.22760319709777832, 0.7723968029022217]')，\r\n这两个结果字段代表什么意思？有文档说明吗？怎么才能求出文本的相似度得分？",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-29T07:26:06+00:00",
        "updated_at": "2022-09-28T03:54:49+00:00",
        "closed_at": "2022-09-28T03:54:49+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 830,
        "title": "文本生成任务在推理（测试）中“infer_data_params.json”这个json文件在哪呢？",
        "body": "你好，我想借助你们的模型测试一下文本生成的效果，在下载了预训练模型和代码后，执行测试代码提示发现缺少“infer_data_params.json”文件，请问这个文件在哪里可以得到呢？谢谢！\r\n![params](https://user-images.githubusercontent.com/17705192/176395078-59159b3c-430d-4d70-93d4-4fb001c96e58.png)\r\n",
        "state": "closed",
        "user": "ScarletBlaze",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-29T08:52:34+00:00",
        "updated_at": "2022-10-15T21:28:55+00:00",
        "closed_at": "2022-10-15T21:28:55+00:00",
        "comments_count": [
            "webYFDT",
            "deandean82",
            "freecui",
            "freecui",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 831,
        "title": "使用ERNIE\\applications\\tasks\\text_matching python示例代码测试文本相似度得分问题",
        "body": "测试数据infer.txt文件中，两段短文本比较，完全不同的两个文本：\r\n: run_infer.py:50 * 9640 ('在家电脑做什么兼职好呢\\t海 尔 全自 动 洗 衣 机', '[0.22760319709777832, 0.7723968029022217]')，\r\n这两个结果字段代表什么意思？有文档说明吗？怎么才能求出文本的相似度得分？",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-06-29T11:33:03+00:00",
        "updated_at": "2022-09-28T03:54:51+00:00",
        "closed_at": "2022-09-28T03:54:51+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 832,
        "title": "关于5.20开源的ERNIE-GEN模型",
        "body": "您好，感谢你们的工作，请问关于5.20开源的ERNIE-GEN模型请问相关使用有说明文档吗，和2020.5公布的ERNIE-GEN有什么区别吗。",
        "state": "closed",
        "user": "Kunlun-Zhu",
        "closed_by": "Kunlun-Zhu",
        "created_at": "2022-06-30T09:50:53+00:00",
        "updated_at": "2022-09-23T08:02:09+00:00",
        "closed_at": "2022-07-28T05:35:19+00:00",
        "comments_count": [
            "webYFDT",
            "buluxianfeng",
            "freecui",
            "yijunL"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 833,
        "title": "请教ernie3.0(ERNIE\\applications\\tasks\\text_matching)文本相似度比较问题",
        "body": "1。比较文本文本相似度得分，使用哪个模型+数据集合适，有现成的模型+数据集可以用吗，求推荐\r\n2。长文本相似度比较，有示例吗？是不是把长文本拆分<=512字再比较，之后再算法合并各段落相似度得分，得到总文本总相似度得分\r\n3。目前ERNIE\\applications\\tasks\\text_matching使用READMD推荐的ernie_3.0_base_ch预训练模型+lcqmc数据集训练，lcqmc数据集的train.tsv第3列是lable 0,1，不是neg_title，能用lcqmc数据集训练吗？若能用需要修改ERNIE\\applications\\tasks\\text_matching哪些部分?\r\n测试示例：\r\nrun_trainer.py使用ernie_3.0_base_ch预训练模型+lcqmc数据集训练的模型：感觉相似度得分低(1,4句),相似度得分偏高(3句)，不能用ernie预训练模型+lcqmc数据集训练?\r\nINFO: 07-05 15:48:39: run_infer.py:51 * 2380 ('男人和女人哪个更容易出轨？\\t女人和男人哪个更容易出轨', '[0.10919833183288574, 0.8908016681671143]', '0.7816033363342285')\r\nINFO: 07-05 15:48:39: run_infer.py:51 * 2380 ('怎么更改苹果手机图标\\t怎么样把苹果手机的图标更改', '[0.03157150745391846, 0.9684284925460815]', '0.9368569850921631')\r\nINFO: 07-05 15:48:40: run_infer.py:51 * 2380 ('带有“风雨”的词语有什么\\t风雨适合农村的成语是什么', '[0.01712048053741455, 0.9828795194625854]', '0.9657590389251709')\r\nINFO: 07-05 15:48:40: run_infer.py:51 * 2380 ('音乐播放器怎么下载？\\t怎么下载音乐播放器呢', '[0.06915783882141113, 0.9308421611785889]', '0.8616843223571777')",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-05T08:09:58+00:00",
        "updated_at": "2022-09-28T03:54:53+00:00",
        "closed_at": "2022-09-28T03:54:53+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 834,
        "title": "请教若文本相似度评分比较,使用ERNIE\\applications\\tasks\\text_matching示例+ernie_3.0_base_ch预训练模型问题",
        "body": "1.用啥数据集训练合适,求推荐?有通用的模型可以直接下载用吗？\r\n2.若用lcqmc数据集训练,第3列是lable0,1列，和ERNIE\\applications\\tasks\\text_matching要求的neg_title文本不一致，怎么修改text_matching示例调用的模块?",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-07T01:32:42+00:00",
        "updated_at": "2022-09-28T03:54:54+00:00",
        "closed_at": "2022-09-28T03:54:54+00:00",
        "comments_count": [
            "webYFDT",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 836,
        "title": "想使用ERNIE\\applications\\tasks\\text_matching示例程序+ernie_3.0_base_ch预训练模型,比较两个文本相似度得分,有问题吗?",
        "body": "1.使用哪个数据集训练合适，想使用lcqmc数据集，但lcqmc数据集的train.tsv第3列是lable 0,1，text_matching代码要求第3列neg_title列，这样训练是不是有问题？需要修改ERNIE\\applications\\tasks\\text_matching代码吗?需要把lcqmc数据集test.tsv第3列的lable0,1转化为随机的neg_title列吗，需要修改哪些文件？\r\n\r\n2.若lcqmc数据集不适合，使用哪个模型+数据集适合得出文本的相似度得分，求推荐?",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-11T05:49:59+00:00",
        "updated_at": "2022-09-28T03:54:58+00:00",
        "closed_at": "2022-09-28T03:54:58+00:00",
        "comments_count": [
            "webYFDT",
            "lbz0920",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 837,
        "title": "关于ERNIE-Vil",
        "body": "请问斯坦福nlp生成场景图的那段代码在哪里呢",
        "state": "closed",
        "user": "ahustr",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-12T09:40:32+00:00",
        "updated_at": "2022-09-28T03:54:55+00:00",
        "closed_at": "2022-09-28T03:54:55+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 841,
        "title": "ernie-1.0预测后相同predicate相同subject不同object的关系只有第一个subject被标记",
        "body": "+ 我在使用ernie-1.0时发现，在同一句话中出现的具有相同predicate的同一个subject但对应不同object的关系只有第一个subject被标记\r\n+ 例如：\r\n   + “李白是《静夜思》的作者，杜甫是《登高》的作者，李白写了《将进酒》。”\r\n   + 第二个“李白”在输出的labels中并未标记，我无法准确decode出正确的关系。\r\n+ 请问是什么原因有人知道吗？是我在使用模型时忽略掉了一些参数，还是ernie-1.0本身就是这样的？",
        "state": "closed",
        "user": "DuChongyang",
        "closed_by": "DuChongyang",
        "created_at": "2022-07-22T04:28:12+00:00",
        "updated_at": "2022-08-08T08:36:35+00:00",
        "closed_at": "2022-08-08T08:36:35+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 838,
        "title": "请问怎么用Ernie-vil在自己的数据集上检测图文相似度",
        "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
        "state": "closed",
        "user": "Catrin-baze",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-13T07:39:06+00:00",
        "updated_at": "2022-09-28T03:54:57+00:00",
        "closed_at": "2022-09-28T03:54:57+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 842,
        "title": "analysis_config.cc:610] EnableMKLDNN() only works when IR optimization is enabled.",
        "body": "use the modle ernie_3.0_base_ch_open ， there is  an error:analysis_config.cc:610] EnableMKLDNN() only works when IR optimization is enabled.",
        "state": "closed",
        "user": "freecui",
        "closed_by": "freecui",
        "created_at": "2022-07-27T03:08:13+00:00",
        "updated_at": "2022-07-28T07:59:27+00:00",
        "closed_at": "2022-07-28T07:59:27+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 840,
        "title": "ERNIE\\applications\\tasks\\text_matching/run_infer.py:文本相似度比对问题(batch_size=8,max_seq_len=512)",
        "body": "predictor.run()刚开始运行执行时间短，越往后批次时间越长，每次比对8组文本对(batch_size=8),为啥越往后predictor.run()运行越慢,占用的内存没释放吗？导致后面越来越慢，这怎么解决？内存使用率99%，cpu使用率16%，卡死了比蜗牛还慢，每次predictor.run()(执行时间72s,380s,520s......执行时间越来越长)\r\n调小batch_size(8=>4)，内存使用率71%,cpu25%max_seq_len？predictor.run()(每次执行时间11s~12s基本固定),界面等其他操作正常不卡死\r\n解决文本比对慢问题，调整batch_size,max_seq_len等参数能提高速度吗？还是需要修改ERNIE\\applications\\tasks\\text_matching/inference/custom_inference.py代码?",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-19T03:59:50+00:00",
        "updated_at": "2022-09-28T03:55:00+00:00",
        "closed_at": "2022-09-28T03:55:00+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 839,
        "title": "请教ERNIE\\applications\\tasks\\text_matching+ernie3.0训练模型:两个长文本比较,文本相似度速度慢问题",
        "body": "1.目前实现:两个长文本分别切句后,按句子交叉比对(或组合成<max_seq_len:512段落交叉比对),例如两个文本7,8个句子,目前7*8=56个文本对比较,交叉比对后找到相似度最高的文本对作为语义最相近的文本对,最后根据每个得分最高文本对的相似度得分*len(str_srci+str_desti)/整个文本长度str_src+str_dest=长文本相似度得分\r\n交叉比对速度太慢了,有优化方法吗?还是这种方法不对,需要使用其他文本比对方法?",
        "state": "closed",
        "user": "lbz0920",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-18T08:34:18+00:00",
        "updated_at": "2022-09-28T03:54:59+00:00",
        "closed_at": "2022-09-28T03:54:59+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 843,
        "title": "How large is the ERNIE-SAT and other models?",
        "body": "Hi developer in baidu,\r\n\r\nThanks for the wonderful work.\r\nMay I ask how many parameters are there in model such as ERNIE-SAT and ERNIE-ViL model?\r\nIt seems hard to find information on this, it would help us a lot, thanks.\r\n\r\nBest",
        "state": "closed",
        "user": "Kunlun-Zhu",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-28T01:54:53+00:00",
        "updated_at": "2022-10-15T21:28:56+00:00",
        "closed_at": "2022-10-15T21:28:56+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 844,
        "title": "Error Message Summary---ernie_gen",
        "body": "--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle_infer::Predictor::Predictor(paddle::AnalysisConfig const&)\r\n1   std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig, (paddle::PaddleEngineKind)2>(paddle::AnalysisConfig const&)\r\n2   paddle::AnalysisPredictor::Init(std::shared_ptr<paddle::framework::Scope> const&, std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n3   paddle::AnalysisPredictor::PrepareProgram(std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n4   paddle::framework::NaiveExecutor::CreateVariables(paddle::framework::ProgramDesc const&, int, bool, paddle::framework::Scope*)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1658994960 (unix time) try \"date -d @1658994960\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 59 (TID 0x7f205a14c740) from PID 0 ***]\r\n\r\nSegmentation fault (core dumped)",
        "state": "closed",
        "user": "freecui",
        "closed_by": "stale[bot]",
        "created_at": "2022-07-28T07:58:18+00:00",
        "updated_at": "2022-10-28T23:23:57+00:00",
        "closed_at": "2022-10-28T23:23:57+00:00",
        "comments_count": [
            "freecui",
            "freecui",
            "freecui",
            "freecui",
            "freecui",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 846,
        "title": "ernie3.0有像2.0那样提供cpu版本的docker镜像和gpu版本的docker镜像下载链接吗",
        "body": "之前ernie2.0的时候是可以申请现在cpu和gpu版环境都配置好的docker镜像下载，ernie3.0也有吗",
        "state": "closed",
        "user": "Spider4U",
        "closed_by": "stale[bot]",
        "created_at": "2022-08-03T01:19:47+00:00",
        "updated_at": "2022-10-28T23:23:55+00:00",
        "closed_at": "2022-10-28T23:23:55+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 848,
        "title": "请问如何修改生成文本的长度",
        "body": "paddlehub内置ERNIE-gen生成的文本只有50个字，更改哪个超参能输出变长？",
        "state": "closed",
        "user": "lcs1225",
        "closed_by": "lcs1225",
        "created_at": "2022-08-09T07:43:33+00:00",
        "updated_at": "2022-08-11T07:42:21+00:00",
        "closed_at": "2022-08-11T07:42:21+00:00",
        "comments_count": [
            "lcs1225"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 849,
        "title": "ernie-doc 超长文本的拆分、memory 传递、文档传入两次，这些具体应该怎么做呢？",
        "body": "1. task_reader 里的 self.features_all 里面的特征只存了按 segment 切分的一遍特征，模型里好像没有看到哪里做了特殊处理，这个读两遍机制具体应该怎么实现啊？\r\n2. memory 传递倒是看到了相关代码，可是没有看到同一个 query 不同 segment 之间 memory 的传递具体是怎么传的呢？是训练的时候手动判断文档是否结束，然后初始化 memory ？\r\n3. Ernie3.0 好像编码方式和 ernie-doc 是一样的？如果是的话，Ernie3.0 能对超长文本做类似的操作吗？",
        "state": "closed",
        "user": "zhejia",
        "closed_by": "stale[bot]",
        "created_at": "2022-08-09T11:32:25+00:00",
        "updated_at": "2022-10-28T23:23:56+00:00",
        "closed_at": "2022-10-28T23:23:56+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleNLP",
        "number": 2995,
        "title": "从头开始 pre-training",
        "body": "请问我怎么使用自己的数据 continue training？\r\n不是在下游任务，是 pre-training",
        "state": "closed",
        "user": "Amazing-J",
        "closed_by": "github-actions[bot]",
        "created_at": "2022-07-28T14:20:17+00:00",
        "updated_at": "2022-12-22T16:16:19+00:00",
        "closed_at": "2022-12-22T16:16:19+00:00",
        "comments_count": [
            "github-actions[bot]",
            "github-actions[bot]"
        ],
        "labels": [
            "stale"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 850,
        "title": "训练ERNIE-Gen报错",
        "body": "按照readme中命令 python run_trainer_ernie_gen.py --param_path ./examples/cls_ernie_gen_infilling_ch.json 训练模型报错，有人遇到过这个问题吗\r\n<img width=\"947\" alt=\"7422deb7e0953cccc59db12cb902964\" src=\"https://user-images.githubusercontent.com/29704155/184064820-4ca9a8f2-8c74-4f2d-a450-4a7f6f11d0b1.png\">\r\n![d00f952e2c0b1401d102e17bddd7228](https://user-images.githubusercontent.com/29704155/184064826-b2e11cb0-f27c-465a-b698-18d07da759cc.jpg)\r\n\r\n",
        "state": "closed",
        "user": "lcs1225",
        "closed_by": "lcs1225",
        "created_at": "2022-08-11T04:28:47+00:00",
        "updated_at": "2022-09-02T09:38:57+00:00",
        "closed_at": "2022-09-02T09:38:57+00:00",
        "comments_count": [
            "fb8py",
            "lcs1225"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 847,
        "title": "Ernie m large model file corrupted",
        "body": "Hello, I downloaded the model-ernie-m-large.tar.gz file to my computer, but when unzipping it shows that the archive is corrupt, why does that happen?",
        "state": "closed",
        "user": "selephantjy",
        "closed_by": "stale[bot]",
        "created_at": "2022-08-04T06:49:12+00:00",
        "updated_at": "2023-01-10T07:05:41+00:00",
        "closed_at": "2023-01-10T07:05:41+00:00",
        "comments_count": [
            "oyjxer",
            "selephantjy",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 853,
        "title": "Where is ERNIE-Gen（Chinese）pretrained model?",
        "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
        "state": "closed",
        "user": "JoanZhou",
        "closed_by": "JoanZhou",
        "created_at": "2022-08-23T07:41:44+00:00",
        "updated_at": "2022-08-23T08:45:43+00:00",
        "closed_at": "2022-08-23T08:44:29+00:00",
        "comments_count": [
            "JoanZhou"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 854,
        "title": "ernie3.0有server启动方式吗",
        "body": "ernie3.0有server启动方式吗，可以调用api的",
        "state": "closed",
        "user": "Spider4U",
        "closed_by": "Spider4U",
        "created_at": "2022-08-25T02:40:30+00:00",
        "updated_at": "2022-08-31T12:27:44+00:00",
        "closed_at": "2022-08-31T12:27:44+00:00",
        "comments_count": [
            "Kennycao123"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 855,
        "title": "700多M的ERNIE-VIL2 在coco-CN的跨模态检索上显著好于2.3G的华为WUKONG",
        "body": "根据两者官网和自己复现，性能基本属实，请问可以公开是如何训练的嘛？如果用的也是公开数据集，就打破了我对跨模态pretrain的模型大小和性能关系的认知。还是说ERNIE用的是 fine-tune的结果。因为我看Wukong的finetune结果和ERNIE的比较接近",
        "state": "closed",
        "user": "bendanzzc",
        "closed_by": "bendanzzc",
        "created_at": "2022-08-28T13:57:54+00:00",
        "updated_at": "2023-01-15T14:19:27+00:00",
        "closed_at": "2022-12-09T08:20:10+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 857,
        "title": "ERNIE-GEN 运行预置的文本生成任务在评估验证集阶段报错",
        "body": "在AIStudio运行https://github.com/PaddlePaddle/ERNIE/tree/94a2367ba7f0f83b48330233450ea095d8dc9382/applications/tasks/text_generation\r\n中的生成任务在验证集评估阶段报错\r\n\r\nINFO: 09-12 18:18:23: ernie_gen_infilling_dataset_reader.py:156 * 140473676896000 set data_generator and start.......\r\nsort: 多字符标签\"$\\\\t\"\r\nERROR: 09-12 18:18:28: custom_static_generation_trainer.py:113 * 140473676896000 traceback.format_exc():Traceback (most recent call last):\r\n  File \"/home/aistudio/work/ERNIE/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 94, in do_train\r\n    self.do_evaluate(self.data_set_reader.dev_reader, InstanceName.EVALUATE, steps)\r\n  File \"/home/aistudio/work/ERNIE/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 157, in do_evaluate\r\n    self.model_class.get_metrics(fetch_output_dict, meta_info, phase, reader)\r\n  File \"/home/aistudio/work/ERNIE/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 496, in get_metrics\r\n    eval_res = self.eval.eval(outfile, phase, reader.features[phase])\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 62, in eval\r\n    eval_res[mertric] = eval_func(refs, preds)\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 75, in bleu\r\n    return _compute_bleu(refs, preds, max_order=4)[0]\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 126, in _compute_bleu\r\n    ratio = float(translation_length) / reference_length\r\nZeroDivisionError: float division by zero",
        "state": "closed",
        "user": "yijunL",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-12T10:41:50+00:00",
        "updated_at": "2022-12-21T00:17:31+00:00",
        "closed_at": "2022-12-21T00:17:31+00:00",
        "comments_count": [
            "yijunL",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 862,
        "title": "ERNIE3.0完形填空",
        "body": "`from ernie.modeling_ernie import ErnieModelForPretraining, ErnieModel\r\nfrom ernie.tokenizing_ernie import ErnieTokenizer\r\nimport paddle.fluid.layers as L\r\nimport paddle.fluid.dygraph as D\r\n\r\nclass ErnieCloset(ErnieModelForPretraining):\r\n    def __init__(self, *args, **kwargs):\r\n        super(ErnieCloset, self).__init__(*args, **kwargs)\r\n        del self.pooler_heads\r\n    def forward(self, src_ids, *args, **kwargs):\r\n        pooled, encoded = ErnieModel.forward(self, src_ids, *args, **kwargs)\r\n        encoded_2d = L.gather_nd(encoded, L.where(src_ids == mask_id))\r\n        encoded_2d = self.mlm(encoded_2d)\r\n        encoded_2d = self.mlm_ln(encoded_2d)\r\n        # 转换为token预测结果\r\n        logits_2d = L.matmul(encoded_2d, self.word_emb.weight, transpose_y=True) + self.mlm_bias\r\n        return logits_2d\r\n`\r\n\r\n利用如上ErnieModelForPretraining这种方法来进行中文完形填空任务时，只能加载如下预训练模型optional: dict_keys(['ernie-1.0', 'ernie-2.0-en', 'ernie-2.0-large-en', 'ernie-tiny', 'ernie-gen-base-en', 'ernie-gen-large-en', 'ernie-gram-zh', 'ernie-gram-en'])，请问ernie 3.0做中文完形填空有什么方法或者建议吗？\r\n\r\n",
        "state": "closed",
        "user": "lucky-dreamer-nn",
        "closed_by": "lucky-dreamer-nn",
        "created_at": "2022-09-28T06:30:05+00:00",
        "updated_at": "2022-09-28T09:03:30+00:00",
        "closed_at": "2022-09-28T09:03:30+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 856,
        "title": "The 'shape' in ReshapeOp is invalid. The input tensor X'size must be equal to the capacity of 'shape'. But received X's shape = [16, 12, 512, 1152], X's size = 113246208, 'shape' is [10000000, 12, 1152, 512], the capacity of 'shape' is 70778880000000.   [Hint: Expected capacity == in_size, but received capacity:70778880000000 != in_size:113246208.] (at ..\\paddle/fluid/operators/reshape_op.cc:204)",
        "body": "为啥会报这个错误，",
        "state": "closed",
        "user": "yyy4444",
        "closed_by": "stale[bot]",
        "created_at": "2022-08-30T07:16:55+00:00",
        "updated_at": "2022-11-13T16:16:53+00:00",
        "closed_at": "2022-11-13T16:16:53+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 858,
        "title": "官方样例训练报错ValueError: CUDA_VISIBLE_DEVICES shoule be set only 1 card if you use `python` to launch fleet program.",
        "body": "![image](https://user-images.githubusercontent.com/55732208/189824257-6afa3410-b3cd-4c6e-a257-904d83d21e21.png)\r\n![1663049808377](https://user-images.githubusercontent.com/55732208/189824389-59e622ad-f8b5-4583-9db0-8259002b8b5b.jpg)\r\n\r\n想请大佬帮忙看下这个运行问题，我这边用的是官方给出的文本分类样例，显示无法运行，这种情况怎么处理呢？多谢啦~\r\nhttps://github.com/PaddlePaddle/ERNIE\r\n",
        "state": "closed",
        "user": "xiaobie-lhm",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-13T06:20:02+00:00",
        "updated_at": "2022-12-21T00:17:29+00:00",
        "closed_at": "2022-12-21T00:17:29+00:00",
        "comments_count": [
            "Ryan-XC",
            "xiaobie-lhm",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 860,
        "title": "序列标注任务预测配置文件中修改max_seq_len值后，还需要做哪些修改",
        "body": "序列标注任务中我想增加输入端文本最大长度，除了在预测配置文件中修改max_seq_len值后，还需要做哪些修改",
        "state": "closed",
        "user": "Spider4U",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-26T01:37:36+00:00",
        "updated_at": "2023-03-03T09:31:27+00:00",
        "closed_at": "2023-01-10T07:05:40+00:00",
        "comments_count": [
            "stale[bot]",
            "nTjing"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 859,
        "title": "文本生成官方样例报错ZeroDivisionError: float division by zero",
        "body": "https://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tasks/text_generation\r\n您好，在跑上述网站的官方案例时出现报错，请问一下这个问题应该如何解决呢?多谢多谢~\r\nERROR: 09-19 03:16:20: custom_static_generation_trainer.py:113 * 140290840864576 traceback.format_exc():Traceback (most recent call last):\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 94, in do_train\r\n    self.do_evaluate(self.data_set_reader.dev_reader, InstanceName.EVALUATE, steps)\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 157, in do_evaluate\r\n    self.model_class.get_metrics(fetch_output_dict, meta_info, phase, reader)\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 496, in get_metrics\r\n    eval_res = self.eval.eval(outfile, phase, reader.features[phase])\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 62, in eval\r\n    eval_res[mertric] = eval_func(refs, preds)\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 75, in bleu\r\n    return _compute_bleu(refs, preds, max_order=4)[0]\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 126, in _compute_bleu\r\n    ratio = float(translation_length) / reference_length\r\nZeroDivisionError: float division by zero\r\n",
        "state": "closed",
        "user": "xiaobie-lhm",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-19T06:49:46+00:00",
        "updated_at": "2022-12-21T00:17:30+00:00",
        "closed_at": "2022-12-21T00:17:30+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 861,
        "title": "文本生成官方案例 运行报错 ZeroDivisionError: float division by zero     请教解决方法",
        "body": "INFO: 09-27 08:59:02: ernie_gen_infilling_dataset_reader.py:156 * 140497794008896 set data_generator and start.......\r\nsort: multi-character tab ‘$\\\\t’\r\nERROR: 09-27 08:59:03: custom_static_generation_trainer.py:113 * 140497794008896 traceback.format_exc():Traceback (most recent call last):\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 107, in do_train\r\n    self.do_evaluate(self.data_set_reader.dev_reader, InstanceName.EVALUATE, steps)\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 157, in do_evaluate\r\n    self.model_class.get_metrics(fetch_output_dict, meta_info, phase, reader)\r\n  File \"/paddle/ERNIE-ernie-kit-open-v1.0/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 496, in get_metrics\r\n    eval_res = self.eval.eval(outfile, phase, reader.features[phase])\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 62, in eval\r\n    eval_res[mertric] = eval_func(refs, preds)\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 75, in bleu\r\n    return _compute_bleu(refs, preds, max_order=4)[0]\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 126, in _compute_bleu\r\n    ratio = float(translation_length) / reference_length\r\nZeroDivisionError: float division by zero\r\n\r\n您好，我在运行ernie框架中的文本生成案例时，出现了这个报错，想请教下这个可以怎样解决呢？\r\nhttps://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tasks/text_generation",
        "state": "closed",
        "user": "xiaobie-lhm",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-27T09:21:08+00:00",
        "updated_at": "2023-03-18T21:45:06+00:00",
        "closed_at": "2023-03-18T21:45:06+00:00",
        "comments_count": [
            "xiaobie-lhm",
            "leesurelye",
            "xiaobie-lhm",
            "leesurelye",
            "xiaobie-lhm",
            "leesurelye",
            "xiaobie-lhm",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 865
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 863,
        "title": "ernie-vil在data/vqa路径下缺少val_part_sample文件",
        "body": "在运行ernie-vil推理run_inference.sh时，发现在data/vqa路径下缺少val_part_sample文件：\r\n![image](https://user-images.githubusercontent.com/51437324/192921849-d29266a1-2f64-4470-8306-f2a387a9952d.png)\r\n麻烦提供下下载链接~",
        "state": "closed",
        "user": "ttyuuuuuuuuuu",
        "closed_by": "stale[bot]",
        "created_at": "2022-09-29T02:04:08+00:00",
        "updated_at": "2023-01-10T07:05:42+00:00",
        "closed_at": "2023-01-10T07:05:42+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 864,
        "title": "能否提供COCO-CN数据集下载地址",
        "body": "官方下载路径http://lixirong.net/data/coco-cn/coco-cn_retrieval_data.tar.gz 已失效，无法联系上原作者",
        "state": "closed",
        "user": "JH-Xie",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-08T09:30:05+00:00",
        "updated_at": "2023-01-10T07:05:43+00:00",
        "closed_at": "2023-01-10T07:05:43+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 867,
        "title": "根目录README启动预测命令描述错误",
        "body": "**错误命令**\r\npython run_infer.py --param_path ./examples/cls_enrie_fc_ch_infer.json\r\n\r\n**正确命令**\r\npython run_infer.py --param_path ./examples/cls_ernie_fc_ch_infer.json\r\n\r\n**错误处**\r\nernie 写成了 enrie， r和n的位置写错了",
        "state": "closed",
        "user": "yy8zhong",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-22T02:44:03+00:00",
        "updated_at": "2023-01-10T07:05:37+00:00",
        "closed_at": "2023-01-10T07:05:37+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 866,
        "title": "请问文本生成的最大长度在哪里设置，上限为多少？",
        "body": "![image](https://user-images.githubusercontent.com/75989862/195072871-d08542ba-bbbf-4131-b710-fb0e8077edd2.png)\r\nAdd any other context or screenshots about the feature request here.\r\n请问文本生成的最大长度在哪里设置？\r\n我想基于该模型做摘要生成，因此把输入改成为\r\n![Uploading image.png…]()\r\n得到的结果为4个32个tokens的句子，想请问一下问题在哪里？感觉是参数的设置出问题了\r\n![image](https://user-images.githubusercontent.com/75989862/195073635-33b60ff9-b0a8-46d8-8b96-4f97232c26ff.png)\r\n",
        "state": "closed",
        "user": "BaiIIzt",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-11T11:11:43+00:00",
        "updated_at": "2023-01-10T07:05:44+00:00",
        "closed_at": "2023-01-10T07:05:44+00:00",
        "comments_count": [
            "BaiIIzt",
            "BaiIIzt",
            "wj-Mcat",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 869,
        "title": "basic_dataset_reader.py进行数据集读取编码错误",
        "body": "**环境**\r\nWin10 python3.7 主分支代码\r\n\r\n**报错提示**\r\nTraceback (most recent call last):\r\n  File \"../../..\\erniekit\\data\\data_set_reader\\basic_dataset_reader.py\", line 132, in read_files\r\n    for linenum, line in enumerate(reader):\r\nUnicodeDecodeError: 'gbk' codec can't decode byte 0x84 in position 22: illegal multibyte sequence\r\n\r\n**需修改文件**\r\nerniekit\\data\\data_set_reader\\basic_dataset_reader.py\r\n\r\n**修改位置**\r\n第120行  \r\nwith open(file_path, \"r+\") as f:\r\n\r\n**修改后代码**\r\nwith open(file_path, \"r+\", encoding='utf-8') as f:\r\n\r\n**其他建议:**\r\n - 在该行后打印下读取文件地址，方便定位问题（一开始还以为是数据文件编码格式问题，实际不是）",
        "state": "closed",
        "user": "yy8zhong",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-22T02:58:48+00:00",
        "updated_at": "2023-01-10T07:05:38+00:00",
        "closed_at": "2023-01-10T07:05:38+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 868,
        "title": "vocabulary.py读取vocabulary文件编码错误",
        "body": "**环境**\r\nWin10 python3.7 主分支代码\r\n\r\n**报错提示**\r\nFile \"../../..\\erniekit\\data\\vocabulary.py\", line 21, in __init__\r\n    self.vocab_dict, self.id_dict = self.load_vocab()\r\n  File \"../../..\\erniekit\\data\\vocabulary.py\", line 31, in load_vocab\r\n    for num, line in enumerate(file_vocab):\r\nUnicodeDecodeError: 'gbk' codec can't decode byte 0x8c in position 35: illegal multibyte sequence\r\n\r\n**需修改文件**\r\nerniekit\\data\\vocabulary.py\r\n\r\n**修改位置**\r\n第30行  \r\nfile_vocab = open(self.vocab_path)\r\n\r\n**修改后代码**\r\nfile_vocab = open(self.vocab_path, 'r+', encoding='utf-8')\r\n\r\n**其他建议:**\r\n - 在该行后打印读取文件地址，方便定位问题（一开始还以为是数据文件编码格式问题，实际不是）",
        "state": "closed",
        "user": "yy8zhong",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-22T02:55:32+00:00",
        "updated_at": "2023-01-10T07:05:37+00:00",
        "closed_at": "2023-01-10T07:05:36+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 870,
        "title": "环境安装描述不完善，建议给出requirements.txt，指明依赖模块对应版本",
        "body": "**问题描述**\r\n如题\r\n\r\n**按提示安装基础依赖**\r\n- paddlepaddle 2.3.2\r\n- python 3.7\r\n\r\n**仍需单独安装模块**\r\n- sentencepiece\r\n- nltk\r\n- scikit-learn\r\n- ...\r\n",
        "state": "closed",
        "user": "yy8zhong",
        "closed_by": "stale[bot]",
        "created_at": "2022-10-22T03:27:07+00:00",
        "updated_at": "2023-01-10T07:05:40+00:00",
        "closed_at": "2023-01-10T07:05:40+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 871,
        "title": "训练任务部分没有文中提到的Word Polarity Prediction和Aspect-sentiment Pair Prediction的代码？",
        "body": "\r\n./senta/models/ernie_language_model.py文件中有关于情感词极性预测和方面情感词对预测的部分都被注释了\r\n![image](https://user-images.githubusercontent.com/29059844/197377154-666dd393-cb56-461e-92e2-74353c76dc33.png)\r\n回到ErnieModel中也没有找到get_senti_output和get_pair_output的代码，请问这部分是没有开源吗？求解答！",
        "state": "closed",
        "user": "ppd118",
        "closed_by": "ppd118",
        "created_at": "2022-10-23T06:20:27+00:00",
        "updated_at": "2022-10-23T06:23:37+00:00",
        "closed_at": "2022-10-23T06:23:37+00:00",
        "comments_count": [
            "ppd118"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 872,
        "title": "ERNIE-GEN的数据集格式和配置文件",
        "body": "我想要训练诗词生成的模型，只需要一个源文本和目标文本，但是ERNIE-GEN的样例是问题生成模型，数据有三个字段。\r\n\r\n应该如何配置？",
        "state": "closed",
        "user": "CrSjimo",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-06T03:26:20+00:00",
        "updated_at": "2023-03-18T21:45:41+00:00",
        "closed_at": "2023-03-18T21:45:41+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 874,
        "title": "数据增强的词向量在哪下载",
        "body": "[ERNIE](https://github.com/PaddlePaddle/ERNIE)/[applications](https://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications)/[tools](https://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tools)/[data](https://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tools/data)/data_aug/",
        "state": "closed",
        "user": "yuanjie-ai",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-08T07:17:20+00:00",
        "updated_at": "2023-03-18T21:47:32+00:00",
        "closed_at": "2023-03-18T21:47:31+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 875,
        "title": "请问如何在ernie vil 2.0模型上进行finetune",
        "body": "请问如何在ernie vil 2.0模型上进行finetune，老分支repro里面有vil训练代码，但是会报关于paddle版本的bug，新的分支ernie-kit-open-v1.0貌似没有vil finetune的代码，请问想finetune vil 是否需要自己开发训练部分代码呢？",
        "state": "closed",
        "user": "ZhuangLii",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-08T12:53:14+00:00",
        "updated_at": "2023-03-18T21:45:54+00:00",
        "closed_at": "2023-03-18T21:45:54+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 876,
        "title": "ERNIE-ViL在vcr任务上读取抽取的图像特征时报错：lmdb.InvalidError: ./VCR_gt_resnet101_faster_rcnn_genome.lmdb: MDB_INVALID: File is not an LMDB file",
        "body": "我下载了[ViLBERT](https://www.dropbox.com/sh/9pgxc3njd3iq03o/AADXgnT1HmEdrds7aujTncBGa?dl=0)公开的VCR数据图像特征（```VCR_resnet101_faster_rcnn_genome.lmdb```和```VCR_gt_resnet101_faster_rcnn_genome.lmdb```），但是在读取时出现了报错：```lmdb.InvalidError: ./VCR_gt_resnet101_faster_rcnn_genome.lmdb: MDB_INVALID: File is not an LMDB file```。有人遇到过这个问题吗？\r\n\r\n报错的代码在```_image_features_reader.py, line 27```，如下是摘出来的报错部分：\r\n```python\r\nimport lmdb\r\n\r\npath = \"./VCR_gt_resnet101_faster_rcnn_genome.lmdb\"\r\nenv = lmdb.open(path, map_size=int(1e12), max_readers=1, readonly=True, lock=False, readahead=False, meminit=False) # 此处报错\r\n```\r\n这是我放特征文件的目录结构：\r\n![屏幕截图(23)](https://user-images.githubusercontent.com/58219543/201264265-65d0fe3b-105d-49fc-a8f0-65d6830ccc4f.png)\r\n\r\nps.试过把两个lmbd目录的名字里加上```_pickle2```（按conf文件里的设置一样），还是相同的报错。\r\n",
        "state": "closed",
        "user": "GoGoJoestar",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-11T04:44:13+00:00",
        "updated_at": "2023-03-18T21:47:51+00:00",
        "closed_at": "2023-03-18T21:47:51+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 880,
        "title": "请问 Ernie3.0 的训练过程可视化应该怎么做？",
        "body": "**Describe the bug**\r\n找到了以前的文心文档 https://ai.baidu.com/ai-doc/ERNIE/ykmg8jkix，但这个repo好像已经更新成现在的了。目前的Ernie3.0的序列标注任务里也没写这一部分的内容。请问这里的静态图trainer应该怎么写，然后用visualDL做可视化。\r\n\r\nhttps://github.com/PaddlePaddle/ERNIE/blob/ernie-kit-open-v1.0/applications/tasks/sequence_labeling/trainer/custom_trainer.py\r\n\r\n<img width=\"392\" alt=\"image\" src=\"https://user-images.githubusercontent.com/52349810/204484600-b74885f1-b061-40fd-8ba7-ea7e17c31092.png\">\r\n\r\n",
        "state": "closed",
        "user": "1nnoh",
        "closed_by": "1nnoh",
        "created_at": "2022-11-29T08:59:40+00:00",
        "updated_at": "2022-12-05T03:15:19+00:00",
        "closed_at": "2022-12-05T03:15:19+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 877,
        "title": "ernie-gen模型训练出错",
        "body": "ernie-gen模型初始化完成，do_train过程中出现ValueError\r\n![7NCGWVCO_}E_4B7_GJ@76G3](https://user-images.githubusercontent.com/72325891/201306729-f7e2c4d0-9d55-4ca5-b655-950bf4c20734.png)\r\n\r\n![7G4MF 3WVUIU1E1 `SXT6{H](https://user-images.githubusercontent.com/72325891/201306965-4eedcee2-5d50-4ffd-8e68-c81ec7d909c5.png)\r\n",
        "state": "closed",
        "user": "palcya",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-11T09:13:53+00:00",
        "updated_at": "2025-06-27T03:10:28+00:00",
        "closed_at": "2025-06-27T03:10:28+00:00",
        "comments_count": [
            "stale[bot]",
            "AromaticHydrocarbon",
            "kichare",
            "stale[bot]",
            "hello-word-1",
            "stale[bot]",
            "zhousteven",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 878,
        "title": "主动学习的代码是被删了吗？",
        "body": "从这个项目里面看到\r\nhttps://aistudio.baidu.com/aistudio/projectdetail/4897371?channelType=0&channel=0\r\n但是下载后没发现对应文件\r\n/applications/tasks/text_classification/examples/cls_ernie_fc_ch_train_with_dal_infer.json\r\nrun_infer_with_active_learning.py\r\n是我找错了还是已经删除了？",
        "state": "closed",
        "user": "zouhan6806504",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-14T08:14:14+00:00",
        "updated_at": "2023-03-18T21:44:41+00:00",
        "closed_at": "2023-03-18T21:44:41+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 879,
        "title": "在文本匹配任务finetune后，如何获取两个文本的句向量？",
        "body": "使用ernie-kit-open-v1.0分支的文本匹配代码训练后，在推理时只能获得文本匹配的结果，请问如何获得两个文本的句向量？",
        "state": "closed",
        "user": "JinMitaka",
        "closed_by": "stale[bot]",
        "created_at": "2022-11-29T06:07:16+00:00",
        "updated_at": "2023-04-02T05:23:13+00:00",
        "closed_at": "2023-04-02T05:23:13+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 881,
        "title": "受限解码问题",
        "body": "ERNIE 3.0论文提到针对zero-shot下的抽取式阅读理解任务，采用了一种受限解码，来保证模型生成的结果源自文中。请问具体是怎么做的呢？代码有公开吗？\r\n\r\n<img width=\"675\" alt=\"image\" src=\"https://user-images.githubusercontent.com/24309565/208347698-a176e198-d6a9-416c-b6d2-ed89bcfdd38e.png\">\r\n",
        "state": "closed",
        "user": "zdgithub",
        "closed_by": "stale[bot]",
        "created_at": "2022-12-19T04:30:30+00:00",
        "updated_at": "2023-04-02T05:23:13+00:00",
        "closed_at": "2023-04-02T05:23:13+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 882,
        "title": "出现了一个直接执行evaluate找不到文件路径的问题",
        "body": "\r\npython                               3.6.5\r\npaddlepaddle                       2.3.2\r\npaddlepaddle-gpu                   2.1.2.post101\r\n\r\n按提示做预测\r\nhttps://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tasks/text_generation\r\n\r\npython run_infer.py --param_path ./examples/cls_ernie_gen_infilling_ch_infer.json\r\n\r\n报了这个错\r\n  File \"../../../erniekit/controller/inference.py\", line 38, in __init__\r\n    self.parser_input_keys()\r\n  File \"../../../erniekit/controller/inference.py\", line 106, in parser_input_keys\r\n    param_dict = params.from_file(data_params_path)\r\n  File \"../../../erniekit/utils/params.py\", line 50, in from_file\r\n    json_file = json.loads(evaluate_file(filename), strict=False)\r\n  File \"../../../erniekit/utils/params.py\", line 44, in evaluate_file\r\n    with open(filename, \"r\") as evaluation_file:\r\nFileNotFoundError: [Errno 2] No such file or directory: 'output/ernie_gen_ch/save_inference_model/inference_step_39421/infer_data_params.json'\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "dataCoderX10",
        "closed_by": "stale[bot]",
        "created_at": "2023-01-12T11:08:37+00:00",
        "updated_at": "2023-04-02T05:23:14+00:00",
        "closed_at": "2023-04-02T05:23:14+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 883,
        "title": "ERNIE-GeoL会开源吗",
        "body": "对ERNIE-GeoL的工作很感兴趣，本身也在做一些地理相关的工作，但是在model_hub没有找到erine-geol，所以是还没有发布代码和ckpt对吗？那么请问什么时候会开源呢",
        "state": "closed",
        "user": "lazylml",
        "closed_by": "stale[bot]",
        "created_at": "2023-01-14T13:21:13+00:00",
        "updated_at": "2023-04-02T05:23:16+00:00",
        "closed_at": "2023-04-02T05:23:16+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 884,
        "title": "BasicDataSetReader在多进程多卡的时候,每个进程都会读取相同的数据, 再通过trainer_id划分么？",
        "body": "BasicDataSetReader在多进程多卡的时候,每个进程都会读取相同的数据, 再通过trainer_id划分么？\r\n如果这样的话， np.random.shuffle(examples) 会导致出现不一致？",
        "state": "closed",
        "user": "gitforhf",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-02T04:16:12+00:00",
        "updated_at": "2023-06-10T11:27:34+00:00",
        "closed_at": "2023-06-10T11:27:34+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 885,
        "title": "执行例子demo报错问题",
        "body": "\r\nhttps://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tasks/text_generation\r\n在m1上按照文档执行这个例子,\r\n出现如下错误\r\n```\r\n    from paddle.fluid.core_avx import PaddleTensor, PaddleDType\r\nModuleNotFoundError: No module named 'paddle.fluid.core_avx'\r\n\r\nERROR: 02-17 11:22:10: register.py:46 * 8386347328 module {key} not found: {e}\r\n```\r\n\r\npip list:\r\n```\r\nastor              0.8.1\r\ncertifi            2022.12.7\r\ncharset-normalizer 3.0.1\r\nclick              8.1.3\r\ndecorator          5.1.1\r\nidna               3.4\r\njoblib             1.2.0\r\nnltk               3.8.1\r\nnumpy              1.24.2\r\nopt-einsum         3.3.0\r\npaddle-bfloat      0.1.7\r\npaddlepaddle       2.4.1\r\nPillow             9.4.0\r\npip                23.0\r\npowerline-status   2.7\r\nprotobuf           3.20.0\r\nregex              2022.10.31\r\nrequests           2.28.2\r\nscikit-learn       1.2.1\r\nscipy              1.10.0\r\nsentencepiece      0.1.97\r\nsetuptools         65.5.0\r\nsix                1.16.0\r\n\r\n```",
        "state": "closed",
        "user": "fucktx",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-17T05:06:31+00:00",
        "updated_at": "2023-06-10T11:27:36+00:00",
        "closed_at": "2023-06-10T11:27:36+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 886,
        "title": "模型参数不存在问题",
        "body": "加载预训练模型后，fine-tune时出现如下信息：\r\n[WARNING] 2023-02-19 21:50:13,140 [modeling_ernie.py:  296]:    param:classifier.weight not set in pretrained model, skip\r\n[WARNING] 2023-02-19 21:50:13,140 [modeling_ernie.py:  296]:    param:classifier.bias not set in pretrained model, skip\r\n UserWarning: The program will return to single-card operation. Please check 1, whether you use spawn or fleetrun to start the program. 2, Whether it is a multi-card program. 3, Is the current environment multi-card.\r\n  warnings.warn(\"The program will return to single-card operation. \"\r\nLAUNCH INFO 2023-02-19 21:50:37,544 Exit code 3221226505\r\n",
        "state": "closed",
        "user": "qq941134965",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-19T13:55:04+00:00",
        "updated_at": "2023-06-10T11:27:35+00:00",
        "closed_at": "2023-06-10T11:27:35+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 888,
        "title": "训练文本生成的时候出错",
        "body": "env\r\n```\r\nLinux version 3.10.0-1160.62.1.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC) ) #1 SMP Tue Apr 5 16:57:59 UTC 2022\r\n\r\npaddlenlp               2.3.5              \r\npaddlepaddle-gpu        2.3.2 \r\n```\r\n\r\n\r\nERROR: 02-20 12:04:54: custom_static_generation_trainer.py:113 * 140627310425920 traceback.format_exc():Traceback (most recent call last):\r\n  File \"/home/xx/ERNIE/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 107, in do_train\r\n    self.do_evaluate(self.data_set_reader.dev_reader, InstanceName.EVALUATE, steps)\r\n  File \"/home/xx/ERNIE/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 149, in do_evaluate\r\n    self.model_class.add_metric_result(cur_output_dict, phase)\r\n  File \"/home/xx/ERNIE/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 414, in add_metric_result\r\n    seq_ids = forward_output_dict[\"finished_ids\"]\r\nKeyError: 'finished_ids'\r\n\r\nINFO: 02-20 12:04:54: static_trainer_ernie_gen.py:470 * 140627310425920 save model on static....\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::ThreadPoolTempl<paddle::framework::StlThreadEnvironment>::WorkerLoop(int)\r\n1   paddle::framework::InterpreterCore::RunInstructionAsync(unsigned long, std::vector<std::atomic<unsigned long>, std::allocator<std::atomic<unsigned long> > >*, std::vector<std::atomic<unsigned long>, std::allocator<std::atomic<unsigned long> > >*)\r\n2   paddle::framework::InterpreterCore::CheckGC(paddle::framework::Instruction const&, std::vector<std::atomic<unsigned long>, std::allocator<std::atomic<unsigned long> > >*)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1676865894 (unix time) try \"date -d @1676865894\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x8b0) received by PID 140307 (TID 0x7fe4a5fff700) from PID 2224 ***]\r\n\r\nSegmentation fault",
        "state": "closed",
        "user": "fucktx",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-20T05:36:58+00:00",
        "updated_at": "2023-08-13T05:29:41+00:00",
        "closed_at": "2023-08-13T05:29:41+00:00",
        "comments_count": [
            "liyunlaiii",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 887,
        "title": "ERNIE-GEN 生成式问答，数据格式问题",
        "body": "使用 ERNIE-GEN的样例是问题生成模型，数据有三个字段，想要进行生成式问答，只有问题和答案，如何进行参数设置。",
        "state": "closed",
        "user": "caseware66",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-20T04:52:05+00:00",
        "updated_at": "2023-06-10T11:27:37+00:00",
        "closed_at": "2023-06-10T11:27:37+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 889,
        "title": "保存模型时报错",
        "body": "\r\n![image](https://user-images.githubusercontent.com/37127150/221458884-a32f0e3d-bdb1-45ea-b00b-c095d0f5499d.png)\r\n 运行代码为：python run_trainer.py --param_path ./examples/cls_ernie_fc_ch.json\r\n",
        "state": "closed",
        "user": "jiyuwangbupt",
        "closed_by": "stale[bot]",
        "created_at": "2023-02-27T02:30:22+00:00",
        "updated_at": "2023-06-10T11:27:40+00:00",
        "closed_at": "2023-06-10T11:27:40+00:00",
        "comments_count": [
            "guoguo12343",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 890,
        "title": "序列标注任务 训练报错",
        "body": "<img width=\"956\" alt=\"image\" src=\"https://user-images.githubusercontent.com/113650779/222683459-54a9afc8-cef6-4be0-8e69-45e619dc40d2.png\">\r\n我的环境：\r\n<img width=\"316\" alt=\"image\" src=\"https://user-images.githubusercontent.com/113650779/222683706-eecf665f-07fe-4724-af0e-04d089eb4699.png\">\r\n\r\n运行序列标注任务是时 报错 说是没有erniekit模块",
        "state": "closed",
        "user": "nTjing",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-03T09:28:38+00:00",
        "updated_at": "2023-06-10T11:27:38+00:00",
        "closed_at": "2023-06-10T11:27:38+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 891,
        "title": "在原先已经训练好的分类模型基础上怎么在新一批的数据中继续训练",
        "body": "一开始训练的分类模型已经完成，后来有了新一批数据，我想在之前训练好的模型上继续训练新数据，我该怎么修改配置文件，谢谢！",
        "state": "closed",
        "user": "Spider4U",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-03T09:41:17+00:00",
        "updated_at": "2023-06-10T11:27:41+00:00",
        "closed_at": "2023-06-10T11:27:41+00:00",
        "comments_count": [
            "Josoope",
            "Spider4U",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 893,
        "title": "请问ERNIE3.0的预训练数据有开源吗？",
        "body": "ERNIE3.0的论文里说构建了一个4TB文本+50M个facts的数据集进行预训练，请问数据集如何获取呢？",
        "state": "closed",
        "user": "robin087",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-13T10:28:50+00:00",
        "updated_at": "2023-06-10T11:27:42+00:00",
        "closed_at": "2023-06-10T11:27:42+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 892,
        "title": "请问训练json文件怎么配置",
        "body": null,
        "state": "closed",
        "user": "Josoope",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-13T07:30:49+00:00",
        "updated_at": "2023-06-10T11:27:39+00:00",
        "closed_at": "2023-06-10T11:27:39+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 894,
        "title": "[BUG] create_program_desc(): incompatible function arguments",
        "body": "我在运行ERINE3.0文本分类的启动训练模型时，中间能够正常打印损失和精确率的日志，但在最后一步报错了，请问这个问题该怎么解决呢？\r\n```\r\nTraceback (most recent call last):\r\n  File \"D:/project_hyb/20230310_中文LLM/ERNIE/applications/tasks/text_classification/run_trainer.py\", line 130, in <module>\r\n    run_trainer(_params)\r\n  File \"D:/project_hyb/20230310_中文LLM/ERNIE/applications/tasks/text_classification/run_trainer.py\", line 107, in run_trainer\r\n    trainer.do_train()\r\n  File \"D:\\project_hyb\\20230310_中文LLM\\ERNIE\\applications\\tasks\\text_classification\\trainer\\custom_dynamic_trainer.py\", line 115, in do_train\r\n    self.save_models(steps, example)\r\n  File \"D:\\project_hyb\\20230310_中文LLM\\ERNIE\\erniekit\\controller\\dynamic_trainer.py\", line 173, in save_models\r\n    phase=\"save_inference\")\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\decorator.py\", line 232, in fun\r\n    return caller(func, *(extras + args), **kw)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\paddle\\fluid\\wrapped_decorator.py\", line 26, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 534, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"D:\\project_hyb\\20230310_中文LLM\\ERNIE\\erniekit\\common\\jit_wenxin.py\", line 37, in trace\r\n    out = _trace_wenxin(layer, inputs, phase=\"save_inference\")\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\decorator.py\", line 232, in fun\r\n    return caller(func, *(extras + args), **kw)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\paddle\\fluid\\wrapped_decorator.py\", line 26, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\erine3\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 534, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"D:\\project_hyb\\20230310_中文LLM\\ERNIE\\erniekit\\common\\jit_wenxin.py\", line 75, in _trace_wenxin\r\n    fetch_prefix, tmp_prefix)\r\nTypeError: create_program_desc(): incompatible function arguments. The following argument types are supported:\r\n    1. (self: paddle.fluid.libpaddle.ProgramDescTracer, arg0: List[paddle.fluid.libpaddle.VarBase], arg1: str, arg2: List[paddle.fluid.libpaddle.VarBase], arg3: str, arg4: str) -> Tuple[paddle::framework::ProgramDesc, List[str], List[str], List[paddle.fluid.libpaddle.VarBase]]\r\n\r\nInvoked with: <paddle.fluid.libpaddle.ProgramDescTracer object at 0x000001EF6E35AD70>, [Tensor(shape=[8, 168], dtype=int64, place=Place(gpu:0), stop_gradient=True,\r\n       [[1    , 96   , 1198 , ..., 0    , 0    , 0    ],\r\n        [1    , 242  , 213  , ..., 0    , 0    , 0    ],\r\n        [1    , 768  , 136  , ..., 0    , 0    , 0    ],\r\n        ...,\r\n        [1    , 458  , 143  , ..., 0    , 0    , 0    ],\r\n        [1    , 208  , 1000 , ..., 0    , 0    , 0    ],\r\n        [1    , 634  , 692  , ..., 1260 , 12044, 2    ]]), Tensor(shape=[8, 168], dtype=int64, place=Place(gpu:0), stop_gradient=True,\r\n       [[0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0],\r\n        ...,\r\n        [0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0]])], 'feed_', [Tensor(shape=[8, 2], dtype=float32, place=Place(gpu:0), stop_gradient=False,\r\n       [[0.00053400, 0.99946600],\r\n        [0.00079978, 0.99920028],\r\n        [0.00063857, 0.99936146],\r\n        [0.99457103, 0.00542894],\r\n        [0.00071414, 0.99928588],\r\n        [0.99798137, 0.00201871],\r\n        [0.99878722, 0.00121276],\r\n        [0.99851328, 0.00148677]])], 'fetch_', 't_'\r\n```\r\n",
        "state": "closed",
        "user": "cs1137195420",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-17T12:50:57+00:00",
        "updated_at": "2024-07-11T15:40:55+00:00",
        "closed_at": "2023-06-10T11:27:33+00:00",
        "comments_count": [
            "julianzhao88",
            "cs1137195420",
            "julianzhao88",
            "cs1137195420",
            "julianzhao88",
            "stale[bot]",
            "ob6123"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 896,
        "title": "worker_num > 1 时会导致数据重复读取？",
        "body": "https://github.com/PaddlePaddle/ERNIE/blob/70bad885f44ff36de378aa82309e3600998b498d/erniekit/data/data_set_reader/basic_dataset_reader.py#L109\r\n\r\n从这部分代码来看，没有处理worker_num>1的情况？会导致多个worker读取重复的数据？",
        "state": "closed",
        "user": "HC-2016",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-22T08:42:20+00:00",
        "updated_at": "2023-06-10T11:27:32+00:00",
        "closed_at": "2023-06-10T11:27:32+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 898,
        "title": "ernie-vil2模型在aic数据集上的检索结果跟论文结果对不上，想请教一下",
        "body": "<img width=\"1041\" alt=\"image\" src=\"https://user-images.githubusercontent.com/22003927/228834555-abccf013-2346-4580-8016-881345a21a22.png\">\r\n感谢paddle的开源，以上是ernie-vil2模型在coco-cn跟aic两个数据集的检索结果对比，coco-cn基本能对齐，但是aic数据集在i2t检索的结果上相较论文低了很多，我是采用aic数据集dev split文件的前10k进行测试的，每个图片取5个caption中的第一个，想请教下是数据集哪里处理的不对吗，还望指教一下～",
        "state": "closed",
        "user": "will-wiki",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-30T12:25:54+00:00",
        "updated_at": "2023-08-13T05:29:41+00:00",
        "closed_at": "2023-08-13T05:29:41+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 895,
        "title": "> 你好，请问训练json文件应该怎么配置呀",
        "body": "              > 你好，请问训练json文件应该怎么配置呀\r\n\r\nhttps://aistudio.baidu.com/aistudio/projectdetail/5255526\r\n\r\n_Originally posted by @Mr-IT007 in https://github.com/PaddlePaddle/ERNIE/issues/891#issuecomment-1465795452_\r\n            是在jupyter里运行吗",
        "state": "closed",
        "user": "Josoope",
        "closed_by": "stale[bot]",
        "created_at": "2023-03-18T13:59:58+00:00",
        "updated_at": "2023-06-10T11:27:43+00:00",
        "closed_at": "2023-06-10T11:27:43+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 899,
        "title": " No module named 'erniekit.common'",
        "body": "当我执行下面语句的时候\r\n!python run_trainer_ernie_gen.py --param_path ./examples/cls_ernie_gen_infilling_ch.json \r\n报错了，\r\n我是按照官方文档写的代码，原封不动的\r\nTraceback (most recent call last):\r\n  File \"run_trainer_ernie_gen.py\", line 8, in <module>\r\n    from erniekit.common.register import RegisterSet\r\nModuleNotFoundError: No module named 'erniekit.common'\r\n\r\n\r\n这是版本兼容的问题吗？？",
        "state": "closed",
        "user": "BAOKAIGE",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-03T13:23:13+00:00",
        "updated_at": "2023-08-13T05:30:35+00:00",
        "closed_at": "2023-08-13T05:30:35+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 900,
        "title": "Inference of document representation from Ernie-doc",
        "body": "Hi, I was wondering if you could guide me on how to use your code to infer a single document representation using the pre-trained Ernie-doc model. The model is not listed on huggingface so I could use the usual AutoTokenizer and AutoModel for loading the pre-trained checkpoint and obtain the requested embedding vector.\r\n\r\nThanks",
        "state": "closed",
        "user": "Marwa-Essam81",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-04T12:51:29+00:00",
        "updated_at": "2023-09-17T10:08:33+00:00",
        "closed_at": "2023-09-17T10:08:33+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 902,
        "title": "ERNIE-GEN returns multiple inference models",
        "body": "I am using ERNIE-GEN to do text generation as shown in [here](https://github.com/PaddlePaddle/ERNIE/tree/ernie-kit-open-v1.0/applications/tasks/text_generation). After training ERNIE, the folder `save_inference_model` contains multiple inference models. In the training process, every 10 steps a model is saved. So the folder `save_inference_model` contains inference models every 10 steps up to 260 steps, and also a 261-step model which is shown as the final evaluation from the modelling console. I found that the predictions from inference models of 250, 260, 261 steps are the same. Does this mean that the final-step inference model is the final model for inference?\r\n\r\nScreenshot of the folder `save_inference_model`:\r\n<img width=\"997\" alt=\"Screenshot 2023-04-18 at 10 19 27\" src=\"https://user-images.githubusercontent.com/86920951/232653404-88585cbd-13b8-481e-902a-3b50963d239c.png\">\r\n\r\nSteps 259-261 output from console:\r\n`INFO: 04-18 06:03:34: custom_static_generation_trainer.py:79 * 8611209856 epoch 19 progress 99/100 pyreader queue size 0 learning_rate 0.0\r\nINFO: 04-18 06:03:34: ernie_infilling_generation.py:484 * 8611209856 step: 259, loss: 2.174187, ppl: 8.795, speed: 0.015 steps/s\r\nINFO: 04-18 06:03:34: ernie_gen_infilling_dataset_reader.py:156 * 8611209856 set data_generator and start.......\r\nINFO: 04-18 06:04:16: ernie_infilling_generation.py:508 * 8611209856 [259_evaluate evaluation] bleu: 0.282412, elapsed time: 34.381865 s\r\nINFO: 04-18 06:04:36: custom_static_generation_trainer.py:79 * 8611209856 epoch 19 progress 99/100 pyreader queue size 0 learning_rate 0.0\r\nINFO: 04-18 06:04:36: ernie_infilling_generation.py:484 * 8611209856 step: 260, loss: 2.275375, ppl: 9.732, speed: 0.016 steps/s\r\nINFO: 04-18 06:04:36: ernie_gen_infilling_dataset_reader.py:156 * 8611209856 set data_generator and start.......\r\nINFO: 04-18 06:05:15: ernie_infilling_generation.py:508 * 8611209856 [260_evaluate evaluation] bleu: 0.282412, elapsed time: 33.458970 s\r\nINFO: 04-18 06:05:15: static_trainer_ernie_gen.py:470 * 8611209856 save model on static....\r\nINFO: 04-18 06:05:27: custom_static_generation_trainer.py:106 * 8611209856 Final evaluate result: \r\nINFO: 04-18 06:05:27: ernie_gen_infilling_dataset_reader.py:156 * 8611209856 set data_generator and start.......\r\nINFO: 04-18 06:06:12: ernie_infilling_generation.py:508 * 8611209856 [261_evaluate evaluation] bleu: 0.282412, elapsed time: 37.477112 s\r\nINFO: 04-18 06:06:12: static_trainer_ernie_gen.py:470 * 8611209856 save model on static....\r\nINFO: 04-18 06:06:24: <stdin>:15 * 8611209856 end of run train and eval .....`",
        "state": "closed",
        "user": "JinghongZeng",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-18T02:23:15+00:00",
        "updated_at": "2023-09-17T10:05:05+00:00",
        "closed_at": "2023-09-17T10:05:05+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 903,
        "title": "请问ERNIE 1.0 的python、paddlepaddle等使用的版本",
        "body": "https://github.com/PaddlePaddle/ERNIE/tree/develop/demo/pretrain \r\npython3 ./demo/pretrain/make_pretrain_data.py input_file  output_file.gz --vocab /path/to/ernie1.0/vocab.txt\r\n代码在运行的时候出现很多问题，不知道是不是版本的问题，所以想请教一下需要的版本：\r\npython\r\npaddlepaddle等\r\n谢谢",
        "state": "closed",
        "user": "prigioni",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-19T03:21:45+00:00",
        "updated_at": "2023-09-17T10:03:39+00:00",
        "closed_at": "2023-09-17T10:03:38+00:00",
        "comments_count": [
            "prigioni",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 904,
        "title": "3.0版本序列标注任务中load_parameters和load_checkpoint参数对应的是save_inference_model路径和save_checkpoints路径吗",
        "body": "3.0版本序列标注任务中load_parameters和load_checkpoint参数对应的是save_inference_model路径和save_checkpoints路径吗",
        "state": "closed",
        "user": "Spider4U",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-19T04:14:09+00:00",
        "updated_at": "2023-09-17T10:04:42+00:00",
        "closed_at": "2023-09-17T10:04:42+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 905,
        "title": "文本分类任务如何增加Ernie_Doc模型，目前只支持3类模型",
        "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
        "state": "closed",
        "user": "mttsun",
        "closed_by": "stale[bot]",
        "created_at": "2023-04-25T01:12:12+00:00",
        "updated_at": "2023-09-17T10:05:16+00:00",
        "closed_at": "2023-09-17T10:05:16+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 906,
        "title": "请问训练ERNIE需要怎样的硬件配置？",
        "body": "**Is your feature request related to a problem? Please describe.**\r\n希望在首页的readme或者wiki之类的文档中增加训练ERNIE模型需要的硬件要求\r\n\r\n**Describe the solution you'd like**\r\nreadme中写明需要至少要多少显存？\r\n",
        "state": "closed",
        "user": "runzhi214",
        "closed_by": "stale[bot]",
        "created_at": "2023-05-12T09:10:25+00:00",
        "updated_at": "2023-09-17T10:07:13+00:00",
        "closed_at": "2023-09-17T10:07:12+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 908,
        "title": "run  sample throws error with official paddle docker image",
        "body": "**Describe the bug**\r\n\r\n\r\n**To Reproduce**\r\ndocker run -it --name paddle242 paddlepaddle/paddle:2.4.2-gpu-cuda11.7-cudnn8.4-trt8.4\r\ngit clone https://github.com/PaddlePaddle/ERNIE.git\r\ncd ERNIE\r\ncd ./applications/models_hub\r\nsh download_ernie_3.0_base_ch.sh\r\ncd ../../\r\ncd ./applications/tasks/text_generation\r\n\r\npython run_infer.py --param_path ./examples/cls_ernie_gen_infilling_ch_infer.json\r\n\r\n**Error  output**\r\n\r\n**throws  No module named 'sentencepiece' error**\r\n\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\n/usr/local/lib/python3.7/dist-packages/paddle/fluid/framework.py:635: UserWarning: You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\r\n  \"You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\"\r\nINFO: 06-04 09:21:13: params.py:43 * 140527343998784 ./examples/cls_ernie_gen_infilling_ch_infer.json\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/tokenization_wp.py\", line 32, in <module>\r\n    import sentencepiece as sp\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/tokenization_erniem.py\", line 34, in <module>\r\n    import sentencepiece as spm\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/tokenization_mix.py\", line 31, in <module>\r\n    from .tokenization_wp import FullTokenizer\r\n  File \"../../../erniekit/data/tokenizer/tokenization_wp.py\", line 32, in <module>\r\n    import sentencepiece as sp\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/tokenization_spm.py\", line 34, in <module>\r\n    import sentencepiece as spm\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/mrc_tokenizer.py\", line 21, in <module>\r\n    import sentencepiece as sp\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\nERROR: 06-04 09:21:13: register.py:106 * 140527343998784 error in import modules\r\nERROR: 06-04 09:21:13: register.py:107 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 103, in import_modules\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"../../../erniekit/data/tokenizer/doie_ernie_tiny_tokenizer.py\", line 18, in <module>\r\n    import sentencepiece as sp\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\n\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\n/usr/local/lib/python3.7/dist-packages/paddle/fluid/framework.py:635: UserWarning: You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\r\n  \"You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\"\r\nINFO: 06-04 09:26:40: params.py:43 * 139652022368064 ./examples/cls_ernie_gen_infilling_ch_infer.json\r\n\r\n\r\nERROR: 06-04 09:21:13: register.py:124 * 140527343998784 error in import ernie_gen_infilling_dataset_reader\r\nERROR: 06-04 09:21:13: register.py:125 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 121, in import_new_module\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/ERNIE/applications/tasks/text_generation/data_set_reader/ernie_gen_infilling_dataset_reader.py\", line 23, in <module>\r\n    from paddle.fluid.core_avx import PaddleTensor, PaddleDType\r\nModuleNotFoundError: No module named 'paddle.fluid.core_avx'\r\n\r\nERROR: 06-04 09:21:13: register.py:124 * 140527343998784 error in import ernie_infilling_generation\r\nERROR: 06-04 09:21:13: register.py:125 * 140527343998784 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 121, in import_new_module\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/ERNIE/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 21, in <module>\r\n    from erniekit.metrics.gen_eval import GenerationEval\r\n  File \"../../../erniekit/metrics/gen_eval.py\", line 25, in <module>\r\n    from erniekit.data.tokenizer.tokenization_wp import BasicTokenizer\r\n  File \"../../../erniekit/data/tokenizer/tokenization_wp.py\", line 32, in <module>\r\n    import sentencepiece as sp\r\nModuleNotFoundError: No module named 'sentencepiece'\r\n\r\n\r\n# tried fixes\r\n\r\n`pip install sentencepiece`\r\n\r\nInstalling collected packages: sentencepiece\r\nSuccessfully installed sentencepiece-0.1.99\r\n\r\n\r\n\r\nWARNING: 06-04 09:26:40: register.py:25 * 139652022368064 Key WordsegTokenizer already in registry tokenizer.\r\nERROR: 06-04 09:26:40: register.py:124 * 139652022368064 error in import ernie_gen_infilling_dataset_reader\r\nERROR: 06-04 09:26:40: register.py:125 * 139652022368064 traceback.format_exc():\r\nTraceback (most recent call last):\r\n  File \"../../../erniekit/common/register.py\", line 121, in import_new_module\r\n    importlib.import_module(full_name)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/ERNIE/applications/tasks/text_generation/data_set_reader/ernie_gen_infilling_dataset_reader.py\", line 23, in <module>\r\n    from paddle.fluid.core_avx import PaddleTensor, PaddleDType\r\nModuleNotFoundError: No module named 'paddle.fluid.core_avx'\r\n\r\nERROR: 06-04 09:26:40: register.py:46 * 139652022368064 module {key} not found: {e}\r\nTraceback (most recent call last):\r\n  File \"run_infer.py\", line 60, in <module>\r\n    dataset_reader = dataset_reader_from_params(dataset_reader_params_dict)\r\n  File \"run_infer.py\", line 21, in dataset_reader_from_params\r\n    dataset_reader.build()\r\n  File \"../../../erniekit/data/data_set_ernie3.py\", line 60, in build\r\n    dataset_reader_class = RegisterSet.data_set_reader.__getitem__(dataset_reader_name)\r\n  File \"../../../erniekit/common/register.py\", line 47, in __getitem__\r\n    raise e\r\n  File \"../../../erniekit/common/register.py\", line 44, in __getitem__\r\n    return self._dict[key]\r\nKeyError: 'InfillingGenReader'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "RockNHawk",
        "closed_by": "stale[bot]",
        "created_at": "2023-06-04T09:27:29+00:00",
        "updated_at": "2023-09-17T10:06:45+00:00",
        "closed_at": "2023-09-17T10:06:45+00:00",
        "comments_count": [
            "RockNHawk",
            "RockNHawk",
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 909,
        "title": "请问ernie-gen有中文的预训练模型吗？",
        "body": "请问ernie-gen有中文的预训练模型吗？\r\n",
        "state": "closed",
        "user": "xiehuanyi",
        "closed_by": "stale[bot]",
        "created_at": "2023-06-05T13:31:42+00:00",
        "updated_at": "2023-09-17T10:06:03+00:00",
        "closed_at": "2023-09-17T10:06:03+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 907,
        "title": "What languages does ERNIE support",
        "body": "There does not seem to be a place where I can find related information. What languages does ERNIE support as of now? If I want to add another language, should I do fine-tuning or should I train from scratch?",
        "state": "closed",
        "user": "Hegelim",
        "closed_by": "stale[bot]",
        "created_at": "2023-05-16T22:49:08+00:00",
        "updated_at": "2023-09-17T10:06:03+00:00",
        "closed_at": "2023-09-17T10:06:03+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 910,
        "title": "ERNIE中的text_generation训练报错",
        "body": "配置信息：device: 0, GPU Compute Capability: 6.1, Driver API Version: 12.2, Runtime API Version: 11.2\r\n\r\n报错信息：\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if arr.dtype == np.object:\r\nERROR: 06-16 14:18:42: custom_static_generation_trainer.py:113 * 14080 traceback.format_exc():Traceback (most recent call last):\r\n  File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\trainer\\custom_static_generation_trainer.py\", line 55, in do_train\r\n    self.train_exe.run(fetch_list=[], return_numpy=True)\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\parallel_executor.py\", line 307, in run\r\n    return_numpy=return_numpy)\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1262, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\six.py\", line 719, in reraise\r\n    raise value\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1260, in run\r\n    return_merged=return_merged)\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1415, in _run_impl\r\n    return_merged=return_merged)\r\n  File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1065, in _run_parallel\r\n    tensors = exe.run(fetch_var_names, return_merged)._move_to_list()\r\nValueError: In user code:\r\n\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\run_trainer_ernie_gen.py\", line 121, in <module>\r\n      run_trainer(_params)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\run_trainer_ernie_gen.py\", line 100, in run_trainer\r\n      trainer = build_trainer(trainer_params_dict, dataset_reader, model, num_train_examples)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\run_trainer_ernie_gen.py\", line 83, in build_trainer\r\n      trainer = trainer_class(params=params_dict, data_set_reader=dataset_reader, model=model)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\trainer\\custom_static_generation_trainer.py\", line 27, in __init__\r\n      BaseStaticTrainerErnieGen.__init__(self, params, data_set_reader, model)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\controller\\static_trainer_ernie_gen.py\", line 65, in __init__\r\n      self.init_env_static()\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\controller\\static_trainer_ernie_gen.py\", line 310, in init_env_static\r\n      self.init_static_model_net()\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\controller\\static_trainer_ernie_gen.py\", line 345, in init_static_model_net\r\n      self.init_static_train_net()\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\controller\\static_trainer_ernie_gen.py\", line 366, in init_static_train_net\r\n      fields_dict, phase=InstanceName.TRAINING)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\model\\ernie_infilling_generation.py\", line 133, in forward\r\n      emb_dict = self.make_embedding(fields_dict, phase)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\applications\\tasks\\text_generation\\model\\ernie_infilling_generation.py\", line 383, in make_embedding\r\n      two_stream=self.two_stream\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\modules\\ernie_gen.py\", line 116, in __init__\r\n      input_mask, gather_idx, role_ids, turn_ids)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\modules\\ernie_gen.py\", line 272, in _build_model\r\n      role_ids=role_ids, turn_ids=turn_ids)\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\modules\\ernie_gen.py\", line 204, in encode\r\n      role_ids=role_ids[0], turn_ids=turn_ids[0])\r\n    File \"D:\\lenovo\\ERNIE\\ERNIE\\erniekit\\modules\\ernie_gen.py\", line 135, in _gen_input\r\n      is_sparse=False)\r\n    File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\layers\\nn.py\", line 521, in embedding\r\n      'padding_idx': padding_idx\r\n    File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\layer_helper.py\", line 43, in append_op\r\n      return self.main_program.current_block().append_op(*args, **kwargs)\r\n    File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 3184, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"D:\\tool\\anaconda3\\envs\\erine-demo\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 2224, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    InvalidArgumentError: Tensor holds the wrong type, it holds int, but desires to be int64_t.\r\n      [Hint: Expected valid == true, but received valid:0 != true:1.] (at ..\\paddle/fluid/framework/tensor_impl.h:33)\r\n      [operator < lookup_table > error]",
        "state": "closed",
        "user": "hello-word-1",
        "closed_by": "stale[bot]",
        "created_at": "2023-06-16T06:27:20+00:00",
        "updated_at": "2025-04-26T03:47:15+00:00",
        "closed_at": "2025-04-26T03:47:15+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 911,
        "title": "text match model , an illegal memory access was encountered. ",
        "body": "报错信息：\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1492: UserWarning: Skip loading for concat_fc.weight. concat_fc.w is not found in the provided dict.\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1492: UserWarning: Skip loading for concat_fc.bias. concat.b is not found in the provided dict.\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1492: UserWarning: Skip loading for output_layer.weight. linear_74.w_0 is not found in the provided dict.\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1492: UserWarning: Skip loading for output_layer.bias. linear_74.b_0 is not found in the provided dict.\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nTraceback (most recent call last):\r\n  File \"run_trainer.py\", line 124, in <module>\r\n    run_trainer(_params)\r\n  File \"run_trainer.py\", line 101, in run_trainer\r\n    trainer.do_train()\r\n  File \"/home/aistudio/work/ERNIE/applications/tasks/text_matching/trainer/custom_dynamic_trainer.py\", line 55, in do_train\r\n    forward_out = self.model_class(example, phase=InstanceName.TRAINING)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/work/ERNIE/applications/tasks/text_matching/model/ernie_matching_siamese_pointwise.py\", line 68, in forward\r\n    task_ids=text_task_ids)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"../../../erniekit/modules/ernie.py\", line 169, in forward\r\n    sent_embedded = self.sent_emb(sent_ids)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/common.py\", line 1469, in forward\r\n    name=self._name)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/functional/input.py\", line 206, in embedding\r\n    'remote_prefetch', False, 'padding_idx', padding_idx)\r\nOSError: (External) CUDA error(700), an illegal memory access was encountered. \r\n  [Hint: 'cudaErrorIllegalAddress'. The device encountered a load or store instruction on an invalid memory address. This leaves the process in an inconsistentstate and any further CUDA work will return the same error. To continue using CUDA, the process must be terminated and relaunched. ] (at /paddle/paddle/phi/backends/gpu/cuda/cuda_info.cc:258)\r\n  [operator < lookup_table_v2 > error]\r\n\r\n我参考了https://github.com/PaddlePaddle/ERNIE/issues/466 ，不过这里比较久远了。\r\n使用的环境是ai studio 上的V100 环境，paddlepaddle-gpu==2.3.2, paddlenlp==2.3.2",
        "state": "closed",
        "user": "shikeno",
        "closed_by": "stale[bot]",
        "created_at": "2023-07-13T03:29:26+00:00",
        "updated_at": "2025-04-26T03:47:16+00:00",
        "closed_at": "2025-04-26T03:47:16+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 912,
        "title": "接入ernie做的文本分类场景  发现cpu利用率特别高   gpu利用率比较低  需要从哪个方向排查呢",
        "body": null,
        "state": "closed",
        "user": "mi9944",
        "closed_by": "stale[bot]",
        "created_at": "2023-07-13T06:31:02+00:00",
        "updated_at": "2025-04-26T03:47:17+00:00",
        "closed_at": "2025-04-26T03:47:17+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 913,
        "title": "ERNIE 3.0是否可以商用？",
        "body": "Hi~你好，我在您的GitHub里面没有发现license（https://github.com/PaddlePaddle/ERNIE），特此想向您请教一下ERNIE 3.0是否可以商用呢？",
        "state": "closed",
        "user": "FutureForMe",
        "closed_by": "stale[bot]",
        "created_at": "2023-08-04T07:43:40+00:00",
        "updated_at": "2025-06-27T03:10:20+00:00",
        "closed_at": "2025-06-27T03:10:20+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 914,
        "title": "Documentation for training and fine-tunning \"ernie-sat\"",
        "body": "I want to train this on other languages.\r\n",
        "state": "closed",
        "user": "kdcyberdude",
        "closed_by": "stale[bot]",
        "created_at": "2023-08-07T11:00:01+00:00",
        "updated_at": "2025-06-27T03:10:23+00:00",
        "closed_at": "2025-06-27T03:10:23+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 915,
        "title": "向ERNIE-zh 3.0词表中添加词汇有数量限制吗？",
        "body": "之前的一个issue现实扩充vocab.txt字典不要超过1.8w, 但是3.0版本词表本身大小已经超过1.8w. 请问一下向ERNIE-zh 3.0词表中添加词汇有数量限制吗？\r\n\r\n              可以的，只要不超过1.8w就好\r\n\r\n_Originally posted by @oyjxer in https://github.com/PaddlePaddle/ERNIE/issues/435#issuecomment-624419755_\r\n            ",
        "state": "closed",
        "user": "yiwang454",
        "closed_by": "stale[bot]",
        "created_at": "2023-08-10T12:16:59+00:00",
        "updated_at": "2025-06-27T03:10:25+00:00",
        "closed_at": "2025-06-27T03:10:25+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 916,
        "title": "ernie模型只能是先训练再使用，预训练模型不能直接用？而且启动参数也没有说明啊",
        "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
        "state": "closed",
        "user": "oyehko",
        "closed_by": "stale[bot]",
        "created_at": "2023-08-16T15:22:47+00:00",
        "updated_at": "2025-06-27T03:10:27+00:00",
        "closed_at": "2025-06-27T03:10:27+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 917,
        "title": "预训练的时候在加载模型的过程中卡住",
        "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n在我预训练模型的时候，模型加载的一晚上还在加载。显存没有跑满。\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. cd /home/pengc/ernie/ernie-develop/demo\r\n2. python pretrain.py --data_dir \"../data/*.gz\" --from_pretrained ../ernie-gram-zh --save_dir ./outabtrain_1012\r\n\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n期待模型开始训练，日志输出内容\r\n![054A01C8-4E38-4b0c-860F-060009F1ABB6](https://github.com/PaddlePaddle/ERNIE/assets/73683903/f2fa0d29-cf1e-4b91-a0f2-704221409e35)\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n运行环境：Ubuntu18.04\r\n显卡：A800*2\r\nPython：3.8.18\r\ncuDNN：8.4\r\nPaddlePaddle-GPU： 2.5.1.post120\r\n运行指令：如图\r\n\r\n",
        "state": "closed",
        "user": "amanyara",
        "closed_by": "stale[bot]",
        "created_at": "2023-10-13T01:37:23+00:00",
        "updated_at": "2025-06-27T03:10:29+00:00",
        "closed_at": "2025-06-27T03:10:29+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 918,
        "title": "ERNIE模型用做图像描述",
        "body": "请问有使用ERNIE模型用作图像描述 图像生成文本内容的实验吗？ \r\n是否还需要在前面接一个图片特征提取模型呢？\r\n可以公开相关代码吗？\r\n谢谢。",
        "state": "closed",
        "user": "kukuhaza",
        "closed_by": "stale[bot]",
        "created_at": "2023-10-18T06:38:36+00:00",
        "updated_at": "2025-06-27T03:10:36+00:00",
        "closed_at": "2025-06-27T03:10:36+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 919,
        "title": "ERNIE/applications/task/text_classification：infer阶段vocab.txt是否只支持40000个词？",
        "body": "(ValueError: (invalidargument) variable value (input) of op(fluid.layers.embedding) expected >= 0 and < 40000, but got 40240. please check input value.)\r\n\r\n我替换了自己的词表后，有40240个词，训练阶段（run_trainer）没问题，但是infer阶段出现了如上报错。\r\n所以，vocab.txt最多只能有40000个词吗？\r\n",
        "state": "closed",
        "user": "alice-create",
        "closed_by": "stale[bot]",
        "created_at": "2024-05-28T06:34:58+00:00",
        "updated_at": "2025-06-27T03:10:36+00:00",
        "closed_at": "2025-06-27T03:10:36+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 920,
        "title": "运行PaddlePaddle的ERNIE3.0教程的示例代码报错",
        "body": "链接：\r\nhttps://aistudio.baidu.com/modelsdetail/21/intro\r\n\r\n按照上面的步骤执行代码，执行到以下代码报错：\r\n# 分类任务\r\n# 该脚本共支持 CLUE 中 7 个分类任务，超参不全相同，因此分类任务中的超参配置利用 config.yml 配置\r\n!python PaddleNLP/model_zoo/ernie-3.0/run_seq_cls.py  \\\r\n    --task_name iflytek \\\r\n    --model_name_or_path ernie-3.0-medium-zh \\\r\n    --do_train\r\n\r\n一开始报没有--output_dir参数，加上参数之后，报：\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/_distutils_hack/__init__.py:33: UserWarning: Setuptools is replacing distutils.\r\n  warnings.warn(\"Setuptools is replacing distutils.\")\r\n[2024-06-11 16:19:45,271] [    INFO] - The default value for the training argument `--report_to` will change in v5 (from all installed integrations to none). In v5, you will need to use `--report_to all` to get the same behavior as now. You should start updating your code and make this info disappear :-).\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/PaddleNLP/model_zoo/ernie-3.0/run_seq_cls.py\", line 179, in <module>\r\n    main()\r\n  File \"/home/aistudio/PaddleNLP/model_zoo/ernie-3.0/run_seq_cls.py\", line 41, in main\r\n    model_args, data_args, training_args = parser.parse_args_into_dataclasses()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/paddlenlp/trainer/argparser.py\", line 232, in parse_args_into_dataclasses\r\n    raise ValueError(f\"Some specified arguments are not used by the PdArgumentParser: {remaining_args}\")\r\nValueError: Some specified arguments are not used by the PdArgumentParser: ['--task_name', 'iflytek']\r\n\r\n",
        "state": "closed",
        "user": "luyan518",
        "closed_by": "stale[bot]",
        "created_at": "2024-06-11T08:37:09+00:00",
        "updated_at": "2025-06-27T03:10:42+00:00",
        "closed_at": "2025-06-27T03:10:42+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 936
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 921,
        "title": "请问有Java调用的demo示例吗？",
        "body": "请问有Java调用的demo示例吗？",
        "state": "closed",
        "user": "13050509570",
        "closed_by": "stale[bot]",
        "created_at": "2024-06-21T07:44:00+00:00",
        "updated_at": "2025-06-27T03:10:43+00:00",
        "closed_at": "2025-06-27T03:10:43+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 922,
        "title": "无法计算BELU",
        "body": "日志如下:\r\n\r\nsort: multi-character tab ‘$/t’\r\nWARNING: 07-27 00:09:40: register.py:25 * 140311556190400 Key WordsegTokenizer already in registry tokenizer.\r\nERROR: 07-27 00:12:04: custom_static_generation_trainer.py:113 * 140311556190400 traceback.format_exc():Traceback (most recent call last):\r\nFile \"/mnt/ernie-gen/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 94, in do_train\r\nself.do_evaluate(self.data_set_reader.dev_reader, InstanceName.EVALUATE, steps)\r\nFile \"/mnt/ernie-gen/applications/tasks/text_generation/trainer/custom_static_generation_trainer.py\", line 157, in do_evaluate\r\nself.model_class.get_metrics(fetch_output_dict, meta_info, phase, reader)\r\nFile \"/mnt/ernie-gen/applications/tasks/text_generation/model/ernie_infilling_generation.py\", line 496, in get_metrics\r\neval_res = self.eval.eval(outfile, phase, reader.features[phase])\r\nFile \"/mnt/ernie-gen/erniekit/metrics/gen_eval.py\", line 62, in eval\r\neval_res[mertric] = eval_func(refs, preds)\r\nFile \"/mnt/ernie-gen/erniekit/metrics/gen_eval.py\", line 75, in bleu\r\nreturn _compute_bleu(refs, preds, max_order=4)[0]\r\nFile \"/mnt/ernie-gen/erniekit/metrics/gen_eval.py\", line 126, in _compute_bleu\r\nratio = float(translation_length) / reference_length\r\nZeroDivisionError: float division by zero\r\n\r\n无法计算BELU，但是最后能够得到预测模型的文件，请问是哪里出现了问题，",
        "state": "closed",
        "user": "2232293826",
        "closed_by": "stale[bot]",
        "created_at": "2024-07-27T04:06:41+00:00",
        "updated_at": "2025-06-27T03:10:47+00:00",
        "closed_at": "2025-06-27T03:10:47+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 924,
        "title": "ERINE-doc调用",
        "body": "在使用demo时：\r\nimport numpy as np\r\nimport paddle\r\nfrom paddlenlp.transformers import ErnieDocModel\r\nfrom paddlenlp.transformers import ErnieDocTokenizer\r\n\r\ndef get_related_pos(insts, seq_len, memory_len=128):\r\n  beg = seq_len + seq_len + memory_len\r\n  r_position = [list(range(beg - 1, seq_len - 1, -1)) + \\\r\n              list(range(0, seq_len)) for i in range(len(insts))]\r\n  return np.array(r_position).astype('int64').reshape([len(insts), beg, 1])\r\n\r\ntokenizer = ErnieDocTokenizer.from_pretrained('ernie-doc-base-zh')\r\nmodel = ErnieDocModel.from_pretrained('ernie-doc-base-zh')\r\n\r\ninputs = tokenizer(\"长文本\")\r\ninputs = {k:paddle.to_tensor([v + [0] * (128-len(v))]).unsqueeze(-1) for (k, v) in inputs.items()}\r\n\r\nmemories = [paddle.zeros([1, 128, 768], dtype=\"float32\") for _ in range(12)]\r\nposition_ids = paddle.to_tensor(get_related_pos(inputs['input_ids'], 128, 128))\r\nattn_mask = paddle.ones([1, 128, 1])\r\n\r\ninputs['memories'] = memories\r\ninputs['position_ids'] = position_ids\r\ninputs['attn_mask'] = attn_mask\r\n\r\noutputs = model(**inputs)\r\n\r\nencoder_output = outputs[0]\r\npooled_output = outputs[1]\r\nnew_mem = outputs[2]\r\n请问ERINE-doc不是号称可以处理长文本吗 为什么在当输出文本超过512tokens时 依然出现：Token indices sequence length is longer than the specified maximum sequence length for this model (566 > 512). Running this sequence through the model will result in indexing errors",
        "state": "closed",
        "user": "xiankangW-gi",
        "closed_by": "stale[bot]",
        "created_at": "2024-12-14T15:32:37+00:00",
        "updated_at": "2025-06-27T03:10:50+00:00",
        "closed_at": "2025-06-27T03:10:50+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 925,
        "title": "请问为什么在训练完成后无法启动预测",
        "body": "在训练完成后我使用命令：python run_infer.py --param_path ./examples/cls_ernie_fc_ch_infer.json来启动预测，\n但是报错缺失了文件 \n[Errno 2] No such file or directory: './output/cls_ernie_3.0_base_fc_ch_dy/save_checkpoints/checkpoints_step_200\\\\infer_data_params.json'\n但是在训练过程中我并没有生成这个json文件。\n\n完整报错：\nINFO: 01-19 14:36:45: params.py:43 * 13200 ./output/cls_ernie_3.0_base_fc_ch_dy/save_checkpoints/checkpoints_step_200\\infer_data_params.json\nTraceback (most recent call last):\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\run_infer.py\", line 71, in <module>\n    inference = build_inference(inference_params_dict, dataset_reader, parse_predict_result)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\run_infer.py\", line 30, in build_inference\n    inference = inference_class(params=params_dict, data_set_reader=dataset_reader, parser_handler=parser_handler)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\inference\\custom_inference.py\", line 24, in __init__\n    BaseInference.__init__(self, params, data_set_reader, parser_handler)\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\../../..\\erniekit\\controller\\inference.py\", line 38, in __init__\n    self.parser_input_keys()\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\../../..\\erniekit\\controller\\inference.py\", line 106, in parser_input_keys\n    param_dict = params.from_file(data_params_path)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\../../..\\erniekit\\utils\\params.py\", line 50, in from_file\n    json_file = json.loads(evaluate_file(filename), strict=False)\n                           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Zhang\\Desktop\\attend\\ERNIE-ernie-kit-open-v1.0\\ERNIE-ernie-kit-open-v1.0\\applications\\tasks\\text_classification\\../../..\\erniekit\\utils\\params.py\", line 44, in evaluate_file\n    with open(filename, \"r\") as evaluation_file:\n         ^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: './output/cls_ernie_3.0_base_fc_ch_dy/save_checkpoints/checkpoints_step_200\\\\infer_data_params.json'\n",
        "state": "closed",
        "user": "bailiancg",
        "closed_by": "stale[bot]",
        "created_at": "2025-01-19T06:44:04+00:00",
        "updated_at": "2025-06-27T03:10:51+00:00",
        "closed_at": "2025-06-27T03:10:51+00:00",
        "comments_count": [
            "stale[bot]"
        ],
        "labels": [
            "wontfix"
        ]
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 942,
        "title": "[Bug] Performance of post-trained model ERNIE-4.5-21B-A3B MMLU",
        "body": "77.2 > 76.0",
        "state": "closed",
        "user": "AIBionics",
        "closed_by": "aigcliu",
        "created_at": "2025-06-30T03:51:43+00:00",
        "updated_at": "2025-06-30T04:15:17+00:00",
        "closed_at": "2025-06-30T04:15:17+00:00",
        "comments_count": [
            "aigcliu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 947,
        "title": "有关4.5 21b a3b Benchmark成绩的疑问",
        "body": "https://yiyan.baidu.com/blog/zh/posts/ernie4.5/\n关于这篇文章中，a3b simple qa的成绩远强于qwen3，但根据我对话的感受，他们simple qa的成绩半斤八两，没有这么大的差距，请问这是什么原因呢？",
        "state": "closed",
        "user": "snnh",
        "closed_by": "snnh",
        "created_at": "2025-06-30T13:12:30+00:00",
        "updated_at": "2025-07-02T13:45:07+00:00",
        "closed_at": "2025-07-02T13:45:07+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 944,
        "title": "We have ERNIE 4.5 Turbo open sourced",
        "body": "Hi Baidu Team,\n\nThank you for your incredible work on ERNIE 4.5 - the improvements in performance and efficiency are very impressive. The 4.5-turbo variant in particular seems like a powerful model with great potential for developers.\n\nI wanted to ask: are there any plans to open-source ERNIE 4.5-turbo?\n\nOpen-sourcing it would be a huge step forward for the community - enabling more developers to build on your work, increasing cost-effectiveness for a wide range of applications, and positioning Baidu as a leader in open Al development.\n\nLooking forward to your response and future updates. Thanks again!",
        "state": "closed",
        "user": "NSbuilder",
        "closed_by": "NSbuilder",
        "created_at": "2025-06-30T06:28:45+00:00",
        "updated_at": "2025-07-01T03:15:36+00:00",
        "closed_at": "2025-06-30T15:12:18+00:00",
        "comments_count": [
            "Yuyuyang",
            "NSbuilder",
            "snnh",
            "NSbuilder",
            "snnh",
            "NSbuilder",
            "snnh",
            "NSbuilder",
            "snnh",
            "NSbuilder",
            "snnh",
            "NSbuilder",
            "shyeetsao",
            "snnh"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 949,
        "title": "VIT Packed sequence轮转划分算法",
        "body": "”在 ViT 编码器的数据并行组中，按 token 数升序排列所有 packed sequence。然后，采用轮转划分算法，将这些 sequence 分配至各个设备，使每个设备上的总 token 数尽量均衡”\n![Image](https://github.com/user-attachments/assets/dffb81bb-254c-43ef-8120-72ad0fff8717)\n\n这里会导致DP15的token数大于DP0，更改一下分配算法会不会好一点， 第一轮DP0、DP1......DP14、DP15， 第二轮DP15、DP14......DP1、DP0，第三轮DP0、DP1......DP14、DP15",
        "state": "open",
        "user": "tal2009",
        "closed_by": null,
        "created_at": "2025-06-30T23:43:01+00:00",
        "updated_at": "2025-07-01T03:40:37+00:00",
        "closed_at": null,
        "comments_count": [
            "jerrywgz",
            "jerrywgz"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 958,
        "title": "Stuck during inference",
        "body": "Hi, I have a stuck during inference in the following code:\n\n  generated_ids = model.generate(\n          inputs=inputs['input_ids'].to(device),\n          **inputs,\n          max_new_tokens=128\n          )\n\nI keep the same setting as described in the doc. I don't know why.",
        "state": "open",
        "user": "pILLOW-1",
        "closed_by": null,
        "created_at": "2025-07-01T07:19:27+00:00",
        "updated_at": "2025-07-02T03:34:21+00:00",
        "closed_at": null,
        "comments_count": [
            "pILLOW-1",
            "BossPi",
            "pILLOW-1",
            "BossPi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 963,
        "title": "Which ERNIE MoE Implementation Should I Use for Pretraining?",
        "body": "Hello, I would like to try MoE pre-training.\nI noticed that the code in `ERNIE/examples/pre-training/ernie` and `ERNIE/ernie/ `seems to be somewhat different.\n\nIf I want to train a model like ERNIE 4.5, should I follow the code in the top-level `ERNIE/ernie/ `directory?",
        "state": "closed",
        "user": "yeontaek",
        "closed_by": "yeontaek",
        "created_at": "2025-07-02T03:20:57+00:00",
        "updated_at": "2025-07-04T07:36:39+00:00",
        "closed_at": "2025-07-04T07:36:39+00:00",
        "comments_count": [
            "JiabinYang",
            "yeontaek",
            "FeixLiu",
            "yeontaek",
            "ForFishes",
            "yeontaek",
            "FeixLiu",
            "yeontaek"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 966,
        "title": "🚀[Fine-tuning] ERNIE-4.5-MoE Megatron Training Implementation and Best Practices👋",
        "body": "Thanks to the open-sourcing of the ERNIE-4.5 series—this is truly exciting.\n\nWe have added Megatron training support for both ERNIE-4.5 and ERNIE-4.5-MoE (CPT/SFT/DPO). For best practices, please refer to this PR: https://github.com/modelscope/ms-swift/pull/4757\n\n\nTraining shell:\n```shell\n# 4 * 51GiB, 16s/it\nCUDA_VISIBLE_DEVICES=0,1,2,3 \\\nmegatron sft \\\n    --load ERNIE-4.5-21B-A3B-PT-mcore \\\n    --dataset 'AI-ModelScope/alpaca-gpt4-data-zh#500' \\\n              'AI-ModelScope/alpaca-gpt4-data-en#500' \\\n              'swift/self-cognition#500' \\\n    --expert_model_parallel_size 4 \\\n    --moe_grouped_gemm true \\\n    --moe_shared_expert_overlap true \\\n    --moe_aux_loss_coeff 0.01 \\\n    --micro_batch_size 4 \\\n    --global_batch_size 16 \\\n    --recompute_granularity full \\\n    --recompute_method uniform \\\n    --recompute_num_layers 1 \\\n    --finetune true \\\n    --cross_entropy_loss_fusion true \\\n    --lr 1e-5 \\\n    --lr_warmup_fraction 0.05 \\\n    --min_lr 1e-6 \\\n    --save megatron_output/ERNIE-4.5-21B-A3B-PT \\\n    --eval_interval 100 \\\n    --save_interval 100 \\\n    --max_length 2048 \\\n    --max_epochs 1 \\\n    --num_workers 8 \\\n    --dataset_num_proc 8 \\\n    --no_save_optim true \\\n    --no_save_rng true \\\n    --sequence_parallel true \\\n    --optimizer_cpu_offload true \\\n    --use_precision_aware_optimizer true \\\n    --attention_backend flash \\\n    --model_author swift \\\n    --model_name swift-robot\n```\n\nTraining GPU memory usage:\n![image](https://github.com/user-attachments/assets/734a9183-0148-4f09-bb1c-baa791ce6ed2)\n\nTraining log:\n![image](https://github.com/user-attachments/assets/45fdc5d8-4b15-409f-a696-15f6dda13337)\n\n\nResults:\n![image](https://github.com/user-attachments/assets/cc55b412-935a-47e6-9ae3-2dd6b6d77b55)\n",
        "state": "open",
        "user": "Jintao-Huang",
        "closed_by": null,
        "created_at": "2025-07-02T06:44:41+00:00",
        "updated_at": "2025-07-08T02:39:13+00:00",
        "closed_at": null,
        "comments_count": [
            "lugimzzz"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 969,
        "title": "datasets ArrowInvalid: cannot mix list and non-list, non-null values",
        "body": "Currently contributing a fine-tuning tutorial for the `ERNIE-4.5-0.3B-PT` model to [self-llm](https://github.com/datawhalechina/self-llm?tab=readme-ov-file#%E5%B7%B2%E6%94%AF%E6%8C%81%E6%A8%A1%E5%9E%8B).  \nWhen using `datasets` to load data and performing LoRA fine-tuning with the `ERNIE-4.5-0.3B-PT` model, a data loading issue arises. The same code was tested with `Qwen3` and `MiniCPM`, and no errors occurred.  \nIt is suspected that the issue might be related to the tokenizer of the `ERNIE-4.5-0.3B-PT` model. Please investigate as soon as possible~\n\n\n```python\ndef process_func(example):\n    MAX_LENGTH = 1024 # 设置最大序列长度为1024个token\n    input_ids, attention_mask, labels = [], [], [] # 初始化返回值\n    # 适配chat_template\n    instruction = tokenizer(\n        f\"<|begin_of_sentence|>现在你要扮演皇帝身边的女人--甄嬛\\n\" \n        f\"User: {example['instruction']}\\n\"  \n        f\"Assistant: \",  \n        add_special_tokens=False   \n    )\n    response = tokenizer(f\"{example['output']}<|end_of_sentence|>\", add_special_tokens=False)\n    # 将instructio部分和response部分的input_ids拼接，并在末尾添加eos token作为标记结束的token\n    input_ids = instruction[\"input_ids\"] + response[\"input_ids\"] + [tokenizer.pad_token_id]\n    # 注意力掩码，表示模型需要关注的位置\n    attention_mask = instruction[\"attention_mask\"] + response[\"attention_mask\"] + [1]\n    # 对于instruction，使用-100表示这些位置不计算loss（即模型不需要预测这部分）\n    labels = [-100] * len(instruction[\"input_ids\"]) + response[\"input_ids\"] + [tokenizer.pad_token_id]  \n    if len(input_ids) > MAX_LENGTH:  # 超出最大序列长度截断\n        input_ids = input_ids[:MAX_LENGTH]\n        attention_mask = attention_mask[:MAX_LENGTH]\n        labels = labels[:MAX_LENGTH]\n    return {\n        \"input_ids\": input_ids,\n        \"attention_mask\": attention_mask,\n        \"labels\": labels\n    }\n\ntokenized_id = ds.map(process_func, remove_columns=ds.column_names)\ntokenized_id\n```\n\nBUG:\n```BUG\nFile [~/miniconda3/lib/python3.12/site-packages/pyarrow/array.pxi:45](https://a183477-a7a1-979efdf2.nmb1.seetacloud.com:8443/jupyter/lab/tree/autodl-tmp/~/miniconda3/lib/python3.12/site-packages/pyarrow/array.pxi#line=44), in pyarrow.lib._sequence_to_array()\n\nFile [~/miniconda3/lib/python3.12/site-packages/pyarrow/error.pxi:155](https://a183477-a7a1-979efdf2.nmb1.seetacloud.com:8443/jupyter/lab/tree/autodl-tmp/~/miniconda3/lib/python3.12/site-packages/pyarrow/error.pxi#line=154), in pyarrow.lib.pyarrow_internal_check_status()\n\nFile [~/miniconda3/lib/python3.12/site-packages/pyarrow/error.pxi:92](https://a183477-a7a1-979efdf2.nmb1.seetacloud.com:8443/jupyter/lab/tree/autodl-tmp/~/miniconda3/lib/python3.12/site-packages/pyarrow/error.pxi#line=91), in pyarrow.lib.check_status()\n\nArrowInvalid: cannot mix list and non-list, non-null values\n```",
        "state": "closed",
        "user": "KMnO4-zx",
        "closed_by": "KMnO4-zx",
        "created_at": "2025-07-02T10:33:53+00:00",
        "updated_at": "2025-07-03T09:22:48+00:00",
        "closed_at": "2025-07-03T09:22:48+00:00",
        "comments_count": [
            "lugimzzz",
            "KMnO4-zx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 977,
        "title": "Chinese version of README",
        "body": "It's better to provide a Chinese version of README. ",
        "state": "open",
        "user": "adamcchen",
        "closed_by": null,
        "created_at": "2025-07-04T02:09:11+00:00",
        "updated_at": "2025-07-04T08:51:56+00:00",
        "closed_at": null,
        "comments_count": [
            "QVQZZZ"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 983,
        "title": "【需求/建议】提供 Paddle 版本 Pretrain / Post-Training 开箱即用的镜像",
        "body": "有没有可以直接用的训练镜像？包括 Pretrain / Post-Training 的镜像，使用这个readme 中提供的镜像还是需要安装大量的包，希望能有个开箱即用的镜像，方便微调，谢谢。\n\nccr-2vdh3abv-pub.cnc.bj.baidubce.com/paddlepaddle/paddle:3.1.0-gpu-cuda12.9-cudnn9.9\n\npython -m pip install -r requirements.txt --force-reinstall\n\n![Image](https://github.com/user-attachments/assets/033fb4e4-fc55-410e-87aa-99d6ad79ea40)\n\n",
        "state": "open",
        "user": "LiuLinyun",
        "closed_by": null,
        "created_at": "2025-07-04T08:29:11+00:00",
        "updated_at": "2025-07-04T09:35:30+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 979,
        "title": "benchmark测试wenie4.5-300B-paddle，输出tokens不符合预期",
        "body": "并发场景下benchmark测试wenie4.5-300B-paddle，--random-output-len设置为1024/2048等；64个测试case里大约一半以上的case，输出tokens数小于random-output-len",
        "state": "open",
        "user": "gitzlc",
        "closed_by": null,
        "created_at": "2025-07-04T07:09:10+00:00",
        "updated_at": "2025-07-04T07:10:39+00:00",
        "closed_at": null,
        "comments_count": [
            "gitzlc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 982,
        "title": "A800-80GB * 1卡模型加载完后一直卡住进度无法使用",
        "body": "python -m fastdeploy.entrypoints.openai.api_server \\\n --model baidu/ERNIE-4.5-VL-28B-A3B-Paddle \\\n --port 8180 \\\n --metrics-port 8181 \\\n --engine-worker-queue-port 8182 \\\n --max-model-len 32768 \\\n --enable-mm \\\n --reasoning-parser ernie-45-vl \\\n --max-num-seqs 32\n启动日志如下：\ntail fastdeploy.log\nINFO 2025-07-04 09:26:55,988 1041 config.py[line:135] Parameter `COMPRESSION_RATIO` will use default value 1.0.\nINFO 2025-07-04 09:27:17,955 1041 engine.py[line:1068] Launch worker service command: PADDLE_TRAINER_ID=0 PADDLE_TRAINERS_NUM=1 TRAINER_INSTANCES_NUM=1 TRAINER_INSTANCES=0.0.0.0 ENABLE_FASTDEPLOY_LOAD_MODEL_CONCURRENCY=0 LOAD_STATE_DICT_THREAD_NUM=1 PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python FLAGS_use_append_attn=1 NCCL_ALGO=Ring FLAGS_hardamard_moe_block_size=128 FLAGS_max_partition_size=1024 SOT_LOG_LEVEL=0 SOT_UNSAFE_CACHE_FASTPATH=1 SOT_ENABLE_0_SIZE_FALLBACK=0 FLAGS_specialize_device_in_dy2st=1 FLAGS_enable_async_fast_gc=0 FLAGS_pir_interpreter_record_stream_for_gc_cache=1 /root/miniconda3/bin/python -u -m paddle.distributed.launch --log_dir log --nnodes 1 --devices 0 /root/miniconda3/lib/python3.12/site-packages/fastdeploy/engine/../worker/vl_worker_process.py --max_num_seqs 32 --max_model_len 32768 --gpu_memory_utilization 0.9 --model_name_or_path baidu/ERNIE-4.5-VL-28B-A3B-Paddle --device_ids 0 --tensor_parallel_size 1 --engine_worker_queue_port 8182 --total_block_num 576 --block_size 64 --enc_dec_block_num 2 --eos_tokens_lens 1 --pad_token_id 0 --engine_pid 1041 --max_num_batched_tokens 32768 --splitwise_role mixed --kv_cache_ratio 0.75 --expert_parallel_size 1 --quantization None --ori_vocab_size 103367 --speculative_method None --speculative_max_draft_token_num 1 --speculative_model_name_or_path None --speculative_model_quantization WINT8 --max_capture_batch_size 64 --guided_decoding_backend off --do_profile 2>log/launch_worker.log\nINFO 2025-07-04 09:27:20,957 1162 config.py[line:135] Parameter `COMPRESSION_RATIO` will use default value 1.0.\nWARNING 2025-07-04 09:27:22,578 1162 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.cpu import failed, it may be not compiled.\nWARNING 2025-07-04 09:27:22,579 1162 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.xpu import failed, it may be not compiled.\nWARNING 2025-07-04 09:27:22,579 1162 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.npu import failed, it may be not compiled.\nINFO 2025-07-04 09:28:43,844 1162 engine_worker_queue.py[line:219] Connected EngineWorkerQueue client_id: 0, number of connected clients: 2\nWARNING 2025-07-04 09:28:45,569 1041 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.cpu import failed, it may be not compiled.\nWARNING 2025-07-04 09:28:45,569 1041 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.xpu import failed, it may be not compiled.\nWARNING 2025-07-04 09:28:45,570 1041 import_ops.py[line:47] Ops of fastdeploy.model_executor.ops.npu import failed, it may be not compiled.\n\ntail api_server.log\nINFO 2025-07-04 09:26:54,407 1041 api_server.py[line:80] FastDeploy LLM API server starting... 1041\n\ntail worker.log\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] quantization : None\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] enable_static_graph_inference: False\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] use_cudagraph : False\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] max_capture_batch_size: 64\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] guided_decoding_backend: off\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:213] disable_any_whitespace: True\nINFO 2025-07-04 09:27:22,950 1162 vl_worker_process.py[line:214] =====================================================\n\nINFO 2025-07-04 09:28:43,844 1162 vl_worker_process.py[line:424] before activate gpu memory: 58.05706071853638 GiB.\nINFO 2025-07-04 09:28:43,884 1162 vl_worker_process.py[line:437] used gpu memory: 59.684814453125 GiB.\n\n启动后进度条一直卡在\n[2025-07-04 09:27:14,848] [ INFO] - loading configuration file baidu/ERNIE-4.5-VL-28B-A3B-Paddle/preprocessor_config.json\nINFO 2025-07-04 09:27:17,977 1041 engine.py[line:206] Waitting worker processes ready...\nLoading Weights: 100%|███████████████████████████████████████████████████████████████████████████████████████████████| 100/100 [01:11<00:00, 1.41it/s]\nLoading Layers: 100%|████████████████████████████████████████████████████████████████████████████████████████████████| 100/100 [00:10<00:00, 9.52it/s]\n这里，且无法访问接口\nhttp://0.0.0.0:8180/v1/chat/completions\n请分析一下我要如何修复",
        "state": "open",
        "user": "chatdl",
        "closed_by": null,
        "created_at": "2025-07-04T08:02:00+00:00",
        "updated_at": "2025-07-08T09:54:28+00:00",
        "closed_at": null,
        "comments_count": [
            "ming1753",
            "chatdl",
            "ming1753",
            "chatdl",
            "ming1753",
            "ming1753"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 990,
        "title": "【有奖挑战】码力全开·文心4.5系列开源模型等你征服！",
        "body": "## 🎯有奖挑战：码力全开·文心4.5系列开源模型等你征服！\n**用代码解锁AI未来，让创造力一触即发！**\n\n你是否渴望用一行行代码点燃AI的无限可能？是否想用开源技术打造可落地的应用？**码力全开·文心4.5系列开源模型任务挑战**正式启动！无论你是编程新手还是资深开发者，这里都有属于你的战场！6大核心任务、开源生态赋能、丰厚奖励加持，邀你共同探索大模型的边界，用代码定义未来！\n\n### **🧑‍💻 六大挑战任务，等你来战！**\n本次创意任务挑战邀请全球开发者，使用文心4.5系列开源模型，完成从**简易对话机器人**到**跨模态智能助手**的六大创意应用开发！活动采用「**双阶段闯关模式**」，带你从技术入门到创新突破，沉浸式体验开源大模型的极致潜力：\n\n🔗 **任务提交入口**：[https://www.wjx.top/vm/eMhNIhk.aspx#](https://www.wjx.top/vm/eMhNIhk.aspx#) \n\n🚀 **双阶段闯关模式**\n\n**▍阶段一 基础实战**\n\n* **目标**：下载任意文心4.5系列开源模型，**使用FastDeploy将模型部署为API服务**，通过API调用验证部署结果。\n* **完成标准：** API服务正常启动并且能够响应对话请求\n* **任务详情：**[https://github.com/PaddlePaddle/FastDeploy/discussions/2728](https://github.com/PaddlePaddle/FastDeploy/discussions/2728)\n* **模型下载平台**\n\n|模型下载平台|相关链接|\n|-|-|\n|飞桨星河社区|[飞桨AI Studio星河社区-人工智能学习与实训社区](https://aistudio.baidu.com/overview)|\n|Hugging Face|https://huggingface.co/baidu|\n|ModelScope|https://www.modelscope.cn/organization/PaddlePaddle|\n|FastDeploy|https://github.com/PaddlePaddle/FastDeploy/|\n\n* **模型部署参考**\n\n|模型部署教程|相关链接|\n|-|-|\n|10分钟部署ERNIE-4.5-0.3B-Paddle|[查看教程](https://github.com/PaddlePaddle/FastDeploy/blob/develop/docs/get_started/quick_start.md)|\n|ERNIE-4.5-300B-A47B 模型部署|[查看教程](https://github.com/PaddlePaddle/FastDeploy/blob/develop/docs/get_started/ernie-4.5.md)|\n|ERNIE-4.5-VL-424B-A47B 多模态模型部署|[查看教程](https://github.com/PaddlePaddle/FastDeploy/blob/develop/docs/get_started/ernie-4.5-vl.md)|\n|离线推理|[查看教程](https://github.com/PaddlePaddle/FastDeploy/blob/develop/docs/offline_inference.md)|\n\n****\n\n**▍阶段二 最佳实践：应用打卡和创意进阶完成其一即可**\n\n1. **应用打卡**\n\n* **目标**：完成2个基础任务（如简易对话、文档翻译），掌握AI应用开发全流程；\n* **完成标准：** 基于阶段一已部署成功的API服务完成以下应用复现打卡（2个及以上）。\n\n2. **创意进阶**\n\n* **目标**：任选1个任务进行创意设计和深度开发，结合真实场景或自有兴趣，打造差异化应用Demo！\n* **完成标准：** 基于文心4.5系列模型，提交差异化应用Demo。\n\n\n| 任务类别 | 任务描述 | 最佳实践参考 | 教程指南 | 推荐模型 | 任务难度 | 任务热度 |\n|---------|----------|--------------|----------|----------|----------|----------|\n| 【简易对话】让AI开口说“你好” | 基于文心4.5系列开源模型构建简单的对话应用。 | 文心大模型构建简易的对话类应用 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/simple_ernie_bot_demo_en.ipynb) |                                                                                                                                                                                            <br> 文本模型<br>1. ERNIE-4.5-21B-A3B<br>2. ERNIE-4.5-0.3B<br>多模态模型<br>1. ERNIE-4.5-VL-28B-A3B                                                                                                                                                                                             | 🌟 | 🔥🔥🔥 |\n| 【简版一言Web端】三行诗与AI的浪漫邂逅 | 基于文心4.5系列开源模型构建一个简单的 Web 智能问答系统。 | 文心大模型构建简版文心一言Web端 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/simple_ernie_bot_demo_en.ipynb) | 文本模型<br>1. ERNIE-4.5-21B-A3B<br>2. ERNIE-4.5-0.3B<br>多模态模型<br>1. ERNIE-4.5-VL-28B-A3B | 🌟 | 🔥🔥🔥 |\n| 【文档翻译】让语言不再是障碍 | 基于ERNIE-4.5系列开源大模型及PaddleOCR大小模型结合实现文档翻译。 | 文心大模型和PaddleOCR构建PDF文档翻译应用 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/document_translation_tutorial_en.ipynb) | 文本模型<br>ERNIE-4.5-300B-A47B<br>*如算力资源不足，可调用星河社区API进行实践 | 🌟🌟 | 🔥🔥🔥 |\n| 【联网检索增强对话】让AI“上知天文，下知地理” | 接入实时搜索引擎，构建能回答“今天北京天气如何？”等问题的智能助手。 | 文心大模型构建具有联网检索功能的对话类应用 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/web_search_demo_en.ipynb) | 文本模型<br>1. ERNIE-4.5-21B-A3B<br>2. ERNIE-4.5-0.3B | 🌟🌟 | 🔥🔥🔥 |\n| 【知识库问答】打造你的专属“AI百科全书” | 上传专业文档，让AI成为领域专家。 | 文心大模型构建基于私有知识库的智能问答系统 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/knowledge_retrieval_demo_en.ipynb) | 文本模型<br>1. ERNIE-4.5-21B-A3B<br>2. ERNIE-4.5-0.3B | 🌟🌟 | 🔥🔥🔥 |\n| 【深度搜索生成】深度挖掘“知识矿”，写作灵感满当当 | 通过集成 AI Search MCP 服务器，实现深度搜索功能。 | 文心大模型构建基于深度信息挖掘的文章生成类应用 | [查看教程](https://github.com/PaddlePaddle/ERNIE/blob/develop/cookbook/notebook/advanced_search_demo_en.ipynb) | 文本模型<br>1. ERNIE-4.5-21B-A3B<br>2. ERNIE-4.5-0.3B | 🌟🌟🌟 | 🔥🔥🔥 |\n\n\n\n*福利：如算力资源有限，可基于ERNIE-4.5-0.3B在飞桨星河社区完成模型下载、部署及最佳实践（[飞桨AI Studio星河社区-人工智能学习与实训社区](https://aistudio.baidu.com/overview?t=mention&mt=doc&dt=sdk)）。*\n\n\n\n### 💡 核心亮点与奖励清单\n* **开源共创：** 技术自由可控，拒绝“黑箱”，你的代码将影响千万开发者！\n* **技术提升：** 官方教程、导师1v1指导、6大任务覆盖AI应用基础场景，助你技能跃迁！\n* **影响力升级**：优秀作品可获百度相关技术媒体报道，同时成为文心大模型开源布道师。\n* **丰厚激励**：技术认证证书、开源社区荣誉勋章，更有机会直通实习推荐！\n* **社群狂欢**：与更多开发者同台竞技，组队攻坚、头脑风暴，让灵感碰撞出火花！\n\n|奖项|奖励内容|数量|\n|-|-|-|\n|全能冠军|【奖品】SKG劲部按摩仪礼盒+一路长龙腰枕+【免费】2025年深度学习开发者大会|2|\n|创新之星|【奖品】神经网络与深度学习案例与实践书籍+度熊键鼠套装+【VIP席位】2025年深度学习开发者大会|3|\n|潜力新星|【奖品】Python编程从入门到实践书籍+【VIP席位】2025年深度学习开发者大会|5|\n|参与奖|完成作品提交可获得开发者笔本套装|若干|\n\n\n\n### ⏳ **活动流程，即刻码住！**\n1. **开发阶段：** 7月7日-7月20日\n\n    * 加入赛道专属社群，获取技术支持；\n\n*如算力资源有限，可基于ERNIE-4.5-0.3B在飞桨星河社区完成实践；*\n\n2. **任务提交：** 7月20日前\n3. **评审阶段：** 7月20日-7月30日\n\n    * 初审：代码跑通+基础功能验证；\n    * 终审：专家评审团（技术深度40%+场景价值30%+代码规范30%）；\n\n4. **最佳实践推广：** 8月-9月\n\n\n\n### 📢 **立即行动，改变正在发生！**\n🔗 **任务提交入口**：[https://www.wjx.top/vm/eMhNIhk.aspx#](https://www.wjx.top/vm/eMhNIhk.aspx#) \n\n📩 **咨询邮箱**：ext_paddle_oss@baidu.com\n\n📱 **扫码加入用户群**：\n\n![Image](https://github.com/user-attachments/assets/de266ef2-e370-47c9-a05c-4a85d7cf7b3d)\n",
        "state": "open",
        "user": "ethan7zhanghx",
        "closed_by": null,
        "created_at": "2025-07-07T10:15:22+00:00",
        "updated_at": "2025-07-08T03:02:14+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 997,
        "title": "fix unpad expert forward.",
        "body": "修复小数据集+unpad选项下训练hang住的问题",
        "state": "open",
        "user": "wtmlon",
        "closed_by": null,
        "created_at": "2025-07-08T10:38:56+00:00",
        "updated_at": "2025-07-08T10:38:56+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 992,
        "title": "Documentation extremely vague and unclear -- Update docs to tell us if Thinking is supported or not?",
        "body": "The ERNIE docs have total:     0 information     about Thinking for non-VLM models.\n\nThe complete and total DOCS about ERNIE have only this information:\n\n    \"The VLMs focuses on visuallanguage understanding and supports both thinking and non-thinking modes.\"\n\nWhat does it mean? What does it imply? What is it telling us?\n\nJust look at the table! https://ernie.baidu.com/blog/posts/ernie4.5/\n\n```\nERNIE-4.5-300B-A47B        non-thinking\n```\n\"-\"    and    \"non-thinking\"    are our only 2 options.\n\nDeductive Conclusion =>\n    All ERNIE models are non-thinking except for VLM *only*\n",
        "state": "open",
        "user": "Yzrsah",
        "closed_by": null,
        "created_at": "2025-07-07T18:53:23+00:00",
        "updated_at": "2025-07-08T06:46:06+00:00",
        "closed_at": null,
        "comments_count": [
            "wtmlon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 996,
        "title": "docs(cli/webui): fix inaccurate descriptions of CUDA_VISIBLE_DEVICES.",
        "body": null,
        "state": "closed",
        "user": "Jonathans575",
        "closed_by": "nepeplwu",
        "created_at": "2025-07-08T08:49:51+00:00",
        "updated_at": "2025-07-08T09:43:33+00:00",
        "closed_at": "2025-07-08T09:43:33+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/ERNIE",
        "number": 998,
        "title": "bugfix(checkpoint): support load final saved ckpt in chat/eval/export module.",
        "body": null,
        "state": "open",
        "user": "Jonathans575",
        "closed_by": null,
        "created_at": "2025-07-08T13:02:53+00:00",
        "updated_at": "2025-07-08T13:02:53+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    }
]