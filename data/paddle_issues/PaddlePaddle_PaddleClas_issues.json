[
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 110,
        "title": "数据列表文件 delimiter",
        "body": "貌似配置里面不能设置数据列表的delimiter，我这数据集里面文件名带空格，能用 | 的话会很方便",
        "state": "closed",
        "user": "linhandev",
        "closed_by": "linhandev",
        "created_at": "2020-05-10T08:26:52+00:00",
        "updated_at": "2020-05-10T08:37:25+00:00",
        "closed_at": "2020-05-10T08:37:25+00:00",
        "comments_count": [
            "littletomatodonkey",
            "linhandev"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 102,
        "title": "日志文件在哪？",
        "body": "FAQ中说“启动运行后，日志会实时输出到mylog/workerlog.*中，可以在这里查看实时的日志。”\r\n但我为什么我运行后却找不到mylog文件夹？另外怎么可视化训练过程？",
        "state": "closed",
        "user": "sunw71",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-06T15:43:21+00:00",
        "updated_at": "2020-05-20T08:37:07+00:00",
        "closed_at": "2020-05-20T08:37:07+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 88,
        "title": "能否提供十万类分类模型对应的类别标签",
        "body": "",
        "state": "closed",
        "user": "CrossStyle",
        "closed_by": "CrossStyle",
        "created_at": "2020-04-28T09:11:13+00:00",
        "updated_at": "2020-04-28T09:38:07+00:00",
        "closed_at": "2020-04-28T09:38:07+00:00",
        "comments_count": [
            "dyning"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 109,
        "title": "训练loss突增后变为nan",
        "body": "用MobileNetV3_large_x1_0训练分类模型，训练到第二个epoch，loss突然增大后又变为nan，这是为什么呢？大家有什么经验吗？\r\n![Uploading image.png…]()\r\n",
        "state": "closed",
        "user": "ARQlalala",
        "closed_by": "ARQlalala",
        "created_at": "2020-05-09T12:45:54+00:00",
        "updated_at": "2020-07-28T06:41:12+00:00",
        "closed_at": "2020-05-12T11:30:07+00:00",
        "comments_count": [
            "cuicheng01",
            "deep-practice",
            "deep-practice",
            "littletomatodonkey",
            "deep-practice",
            "deep-practice"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 87,
        "title": "run PaddleClas infer.py ERROR",
        "body": "my infer.sh:\r\nexport PYTHONPATH=$PWD:$PYTHONPATH\r\n\r\npython -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/infer/infer.py -i \"dataset/FGVC2020_SSFGRC/test/26.jpg\"\\\r\n    -m \"SENet154_vd\" \\\r\n    -p \"output/expr20_SENet154_vd_train_bestv1_25971.txt_val2000_val2750_78.84\"\r\n\r\nERROR:\r\nTraceback (most recent call last):\r\n  File \"tools/infer/infer.py\", line 121, in <module>\r\n    main()\r\n  File \"tools/infer/infer.py\", line 113, in main\r\n    return_numpy=False)\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 790, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 785, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 838, in _run_impl\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 909, in _run_program\r\n    self._feed_data(program, feed, feed_var_name, scope)\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 591, in _feed_data\r\n    check_feed_shape_type(var, cur_feed)\r\n  File \"/home/daibing/software/anaconda2/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 230, in check_feed_shape_type\r\n    (var.name, len(var.shape), var.shape, feed_shape))\r\nValueError: The fed Variable u'image' should have dimensions = 4, shape = (-1L, 3L, 224L, 224L), but received fed shape [3L, 224L, 224L] on each device\r\n",
        "state": "closed",
        "user": "dbcool",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-04-28T04:16:51+00:00",
        "updated_at": "2020-07-02T12:40:41+00:00",
        "closed_at": "2020-07-02T12:40:41+00:00",
        "comments_count": [
            "dyning"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 97,
        "title": "--use_tensorrt=True， 怎么导出tensorrt引擎模型",
        "body": "想请问下，能否单独导出trt引擎文件，希望更灵活的使用trt模型，比如deep stream。",
        "state": "closed",
        "user": "thunder95",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-05T14:06:49+00:00",
        "updated_at": "2020-07-03T08:24:15+00:00",
        "closed_at": "2020-07-01T09:35:57+00:00",
        "comments_count": [
            "NHZlX",
            "thunder95"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 107,
        "title": "export_model模型转换出错",
        "body": "export CUDA_VISIBLE_DEVICES=0\r\npython -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/quick_start/ResNet50_vd.yaml\r\n\r\n使用上述命令训练模型后，然后通过export_model转换模型\r\npython tools/export_model.py --model=ResNet50_vd --pretrained_model=output/ResNet50_vd/19/ --output_path=inference/ResNet50_vd --class_dim=102\r\n\r\n报错\r\n2020-05-09 14:36:17,701-WARNING: output/ResNet50_vd/19/.pdparams not found, try to load model file saved with [ save_params, save_persistables, save_vars ]\r\n2020-05-09 14:36:17,701-WARNING: output/ResNet50_vd/19/.pdparams not found, try to load model file saved with [ save_params, save_persistables, save_vars ]\r\n2020-05-09 14:36:17,703-WARNING: variable file [ output/ResNet50_vd/19/ppcls.pdopt output/ResNet50_vd/19/ppcls.pdparams output/ResNet50_vd/19/ppcls.pdmodel ] not used\r\n2020-05-09 14:36:17,703-WARNING: variable file [ output/ResNet50_vd/19/ppcls.pdopt output/ResNet50_vd/19/ppcls.pdparams output/ResNet50_vd/19/ppcls.pdmodel ] not used\r\n/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py:804: UserWarning: There are no operators in the program to be executed. If you pass Program manually, please use fluid.program_guard to ensure the current Program is being used.\r\n  warnings.warn(error_info)\r\n/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py:782: UserWarning: The following exception is not an EOF exception.\r\n  \"The following exception is not an EOF exception.\")\r\nTraceback (most recent call last):\r\n  File \"tools/export_model.py\", line 78, in <module>\r\n    main()\r\n  File \"tools/export_model.py\", line 74, in main\r\n    params_filename='params')\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 1245, in save_inference_model\r\n    save_persistables(executor, save_dirname, main_program, params_filename)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 640, in save_persistables\r\n    filename=filename)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 295, in save_vars\r\n    filename=filename)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 350, in save_vars\r\n    executor.run(save_program)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 783, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 778, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 831, in _run_impl\r\n    use_program_cache=use_program_cache)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 905, in _run_program\r\n    fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::framework::Tensor::type() const\r\n3   paddle::operators::SaveCombineOpKernel<paddle::platform::CPUDeviceContext, float>::Compute(paddle::framework::ExecutionContext const&) const\r\n4   std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CPUPlace, false, 0ul, paddle::operators::SaveCombineOpKernel<paddle::platform::CPUDeviceContext, float>, paddle::operators::SaveCombineOpKernel<paddle::platform::CPUDeviceContext, double>, paddle::operators::SaveCombineOpKernel<paddle::platform::CPUDeviceContext, int>, paddle::operators::SaveCombineOpKernel<paddle::platform::CPUDeviceContext, long> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&)\r\n5   paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, paddle::platform::Place const&, paddle::framework::RuntimeContext*) const\r\n6   paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, paddle::platform::Place const&) const\r\n7   paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, paddle::platform::Place const&)\r\n8   paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool)\r\n9   paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool, std::vector<std::string, std::allocator<std::string> > const&, bool, bool)\r\n\r\n------------------------------------------\r\nPython Call Stacks (More useful to users):\r\n------------------------------------------\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2525, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 343, in save_vars\r\n    'save_to_memory': save_to_memory\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 295, in save_vars\r\n    filename=filename)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 640, in save_persistables\r\n    filename=filename)\r\n  File \"/home/lishi/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 1245, in save_inference_model\r\n    save_persistables(executor, save_dirname, main_program, params_filename)\r\n  File \"tools/export_model.py\", line 74, in main\r\n    params_filename='params')\r\n  File \"tools/export_model.py\", line 78, in <module>\r\n    main()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Tensor not initialized yet when Tensor::type() is called.\r\n  [Hint: holder_ should not be null.] at (/paddle/paddle/fluid/framework/tensor.h:140)\r\n  [operator < save_combine > error]\r\n",
        "state": "closed",
        "user": "ly7969",
        "closed_by": "ly7969",
        "created_at": "2020-05-09T06:59:14+00:00",
        "updated_at": "2020-05-09T08:08:58+00:00",
        "closed_at": "2020-05-09T08:08:58+00:00",
        "comments_count": [
            "JiaXiao243",
            "ly7969"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 90,
        "title": "AttributeError: module 'paddle.fluid.core_avx' has no attribute 'get_cuda_device_count'",
        "body": "在windows10，cpu环境下运行下面的命令出现上面的错误\r\npython -m paddle.distributed.launch     tools/train.py        -c ./configs/quick_start/ResNet50_vd.yaml\r\n\r\nPaddleClas能否提供对cpu的支持呢？",
        "state": "closed",
        "user": "wishgale",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-04-28T15:14:07+00:00",
        "updated_at": "2020-07-01T09:37:58+00:00",
        "closed_at": "2020-07-01T09:37:58+00:00",
        "comments_count": [
            "cuicheng01",
            "wishgale",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 84,
        "title": "The relationship between models/PaddleCV/image_classification and this repo",
        "body": "Some models'speed are different",
        "state": "closed",
        "user": "miraclebiu",
        "closed_by": "miraclebiu",
        "created_at": "2020-04-27T03:57:19+00:00",
        "updated_at": "2020-05-11T06:53:51+00:00",
        "closed_at": "2020-04-28T10:59:38+00:00",
        "comments_count": [
            "cuicheng01",
            "dyning",
            "miraclebiu",
            "dyning",
            "dyning"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 116,
        "title": "ValueError: Operator \"gen_nccl_id\" has not been registered.",
        "body": "E:\\projects\\PaddleClas-master>python -m paddle.distributed.launch --selected_gpus='0' tools/train.py -c configs/quick_start/ResNet50_vd_finetune_my.yaml\r\n-----------  Configuration Arguments -----------\r\ncluster_node_ips: 127.0.0.1\r\nlog_dir: None\r\nnode_ip: 127.0.0.1\r\nprint_config: True\r\nselected_gpus: '0'\r\nstarted_port: 6170\r\ntraining_script: tools/train.py\r\ntraining_script_args: ['-c', 'configs/quick_start/ResNet50_vd_finetune_my.yaml']\r\nuse_paddlecloud: False\r\n------------------------------------------------\r\ntrainers_endpoints: 127.0.0.1:6170 , node_id: 0 , current_node_ip: 127.0.0.1 , num_nodes: 1 , node_ips: ['127.0.0.1'] , nranks: 1\r\n2020-05-13 23:57:14 INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2020-05-13 23:57:14 INFO: ARCHITECTURE :\r\n2020-05-13 23:57:14 INFO:     name : ResNet50_vd\r\n2020-05-13 23:57:14 INFO: ------------------------------------------------------------\r\n2020-05-13 23:57:14 INFO: LEARNING_RATE :\r\n2020-05-13 23:57:14 INFO:     function : Cosine\r\n2020-05-13 23:57:14 INFO:     params :\r\n2020-05-13 23:57:14 INFO:         lr : 0.00375\r\n2020-05-13 23:57:14 INFO: ------------------------------------------------------------\r\n2020-05-13 23:57:14 INFO: OPTIMIZER :\r\n2020-05-13 23:57:14 INFO:     function : Momentum\r\n2020-05-13 23:57:14 INFO:     params :\r\n2020-05-13 23:57:14 INFO:         momentum : 0.9\r\n2020-05-13 23:57:14 INFO:     regularizer :\r\n2020-05-13 23:57:14 INFO:         factor : 1e-06\r\n2020-05-13 23:57:14 INFO:         function : L2\r\n2020-05-13 23:57:14 INFO: ------------------------------------------------------------\r\n2020-05-13 23:57:14 INFO: TRAIN :\r\n2020-05-13 23:57:14 INFO:     batch_size : 32\r\n2020-05-13 23:57:14 INFO:     data_dir : G:/ai_data/paddle/0513/\r\n2020-05-13 23:57:14 INFO:     file_list : G:/ai_data/paddle/0513train.list\r\n2020-05-13 23:57:14 INFO:     num_workers : 4\r\n2020-05-13 23:57:14 INFO:     shuffle_seed : 0\r\n2020-05-13 23:57:14 INFO:     transforms :\r\n2020-05-13 23:57:14 INFO:         DecodeImage :\r\n2020-05-13 23:57:14 INFO:             channel_first : False\r\n2020-05-13 23:57:14 INFO:             to_np : False\r\n2020-05-13 23:57:14 INFO:             to_rgb : True\r\n2020-05-13 23:57:14 INFO:         RandCropImage :\r\n2020-05-13 23:57:14 INFO:             size : 224\r\n2020-05-13 23:57:14 INFO:         RandFlipImage :\r\n2020-05-13 23:57:14 INFO:             flip_code : 1\r\n2020-05-13 23:57:14 INFO:         NormalizeImage :\r\n2020-05-13 23:57:14 INFO:             mean : [0.485, 0.456, 0.406]\r\n2020-05-13 23:57:14 INFO:             order :\r\n2020-05-13 23:57:14 INFO:             scale : 1./255.\r\n2020-05-13 23:57:14 INFO:             std : [0.229, 0.224, 0.225]\r\n2020-05-13 23:57:14 INFO:         ToCHWImage : None\r\n2020-05-13 23:57:14 INFO: ------------------------------------------------------------\r\n2020-05-13 23:57:14 INFO: VALID :\r\n2020-05-13 23:57:14 INFO:     batch_size : 20\r\n2020-05-13 23:57:14 INFO:     data_dir : G:/ai_data/paddle/0513/\r\n2020-05-13 23:57:14 INFO:     file_list : G:/ai_data/paddle/0513test.list\r\n2020-05-13 23:57:14 INFO:     num_workers : 4\r\n2020-05-13 23:57:14 INFO:     shuffle_seed : 0\r\n2020-05-13 23:57:14 INFO:     transforms :\r\n2020-05-13 23:57:14 INFO:         DecodeImage :\r\n2020-05-13 23:57:14 INFO:             channel_first : False\r\n2020-05-13 23:57:14 INFO:             to_np : False\r\n2020-05-13 23:57:14 INFO:             to_rgb : True\r\n2020-05-13 23:57:14 INFO:         ResizeImage :\r\n2020-05-13 23:57:14 INFO:             resize_short : 256\r\n2020-05-13 23:57:14 INFO:         CropImage :\r\n2020-05-13 23:57:14 INFO:             size : 224\r\n2020-05-13 23:57:14 INFO:         NormalizeImage :\r\n2020-05-13 23:57:14 INFO:             mean : [0.485, 0.456, 0.406]\r\n2020-05-13 23:57:14 INFO:             order :\r\n2020-05-13 23:57:14 INFO:             scale : 1.0/255.0\r\n2020-05-13 23:57:14 INFO:             std : [0.229, 0.224, 0.225]\r\n2020-05-13 23:57:14 INFO:         ToCHWImage : None\r\n2020-05-13 23:57:14 INFO: ------------------------------------------------------------\r\n2020-05-13 23:57:14 INFO: classes_num : 3\r\n2020-05-13 23:57:14 INFO: epochs : 20\r\n2020-05-13 23:57:14 INFO: image_shape : [3, 224, 224]\r\n2020-05-13 23:57:14 INFO: mode : train\r\n2020-05-13 23:57:14 INFO: model_save_dir : E:/projects/PaddleClas-master/output/\r\n2020-05-13 23:57:14 INFO: pretrained_model : E:/projects/PaddleClas-master/ResNet50_vd_pretrained\r\n2020-05-13 23:57:14 INFO: save_interval : 1\r\n2020-05-13 23:57:14 INFO: topk : 5\r\n2020-05-13 23:57:14 INFO: total_images : 795\r\n2020-05-13 23:57:14 INFO: valid_interval : 1\r\n2020-05-13 23:57:14 INFO: validate : True\r\n\r\n\r\nAPI is deprecated since 2.0.0 Please use FleetAPI instead.\r\nWIKI: https://github.com/PaddlePaddle/Fleet/blob/develop/markdown_doc/transpiler\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 124, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 69, in main\r\n    config, train_prog, startup_prog, is_train=True)\r\n  File \"E:\\projects\\PaddleClas-master\\tools\\program.py\", line 341, in build\r\n    optimizer.minimize(fetchs['loss'][0])\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 424, in minimize\r\n    fleet.main_program = self._try_to_compile(startup_program, main_program)\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 358, in _try_to_compile\r\n    self._transpile(startup_program, main_program)\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 285, in _transpile\r\n    current_endpoint=current_endpoint)\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\transpiler\\distribute_transpiler.py\", line 625, in transpile\r\n    wait_port=self.config.wait_port)\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\transpiler\\distribute_transpiler.py\", line 397, in _transpile_nccl2\r\n    self.config.hierarchical_allreduce_inter_nranks\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 2525, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 1797, in __init__\r\n    proto = OpProtoHolder.instance().get_op_proto(type)\r\n  File \"C:\\python\\tf\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 1679, in get_op_proto\r\n    raise ValueError(\"Operator \\\"%s\\\" has not been registered.\" % type)\r\nValueError: Operator \"gen_nccl_id\" has not been registered.\r\n2020-05-13 15:57:16,981-ERROR: ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nERROR 2020-05-13 15:57:16,981 launch.py:284] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\n\r\n这是什么问题？",
        "state": "closed",
        "user": "zhengbiqing",
        "closed_by": "WuHaobo",
        "created_at": "2020-05-13T08:15:24+00:00",
        "updated_at": "2020-05-19T00:23:24+00:00",
        "closed_at": "2020-05-19T00:23:24+00:00",
        "comments_count": [
            "WuHaobo",
            "zhengbiqing",
            "WuHaobo",
            "zhengbiqing",
            "zhengbiqing",
            "WuHaobo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 119,
        "title": "when infer a image: UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte",
        "body": "aistudio@jupyter-305239-473669:~/work/PaddleClas$ python tools/infer/predict.py -m output_ca/ResNet50_vd/last/model -p output_ca/ResNet50_vd/last/params -i ./test0.jpg --use_gpu=1\r\nTraceback (most recent call last):\r\n  File \"tools/infer/predict.py\", line 160, in <module>\r\n    main()\r\n  File \"tools/infer/predict.py\", line 121, in main\r\n    inputs = preprocess(args.image_file, operators)\r\n  File \"tools/infer/predict.py\", line 88, in preprocess\r\n    data = open(fname).read()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/codecs.py\", line 322, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte\r\n\r\nwhat the problem?",
        "state": "closed",
        "user": "zhengbiqing",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-15T07:54:59+00:00",
        "updated_at": "2020-05-28T01:29:41+00:00",
        "closed_at": "2020-05-28T01:29:41+00:00",
        "comments_count": [
            "zhengbiqing",
            "JiaXiao243"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 121,
        "title": "想知道去重的具体步骤",
        "body": "非常感谢这么棒的项目!!! 我对数据集的去重方式有点疑问, 因为我现在的数据集也需要去重, 但是我只知道使用sift找到特征点, 但是不同图片匹配到的特征点数量也是不同的, 那么怎么判断两幅图片的相似百分比呢? 然后设定阈值去去重图片\r\n![aaa](https://user-images.githubusercontent.com/37173179/82115192-e5d2b700-9793-11ea-826f-621631bb1840.png)\r\n",
        "state": "closed",
        "user": "NextGuido",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-16T08:42:37+00:00",
        "updated_at": "2021-07-04T07:36:21+00:00",
        "closed_at": "2020-05-25T11:36:56+00:00",
        "comments_count": [
            "littletomatodonkey",
            "NextGuido",
            "littletomatodonkey",
            "NextGuido",
            "pawopawo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 120,
        "title": "export model 出现Tensor not initialized yet when Tensor::type() is called错误",
        "body": "根据教程 导出模型的过程：\r\npython tools/export_model.py \\\r\n    --model=MobileNetV3_large_x1_0 \\\r\n    --pretrained_model=./output/MobileNetV3_large_x1_0/best_model_in_epoch_7/ \\\r\n    --output_path=./convert/ \\\r\n\r\n报错如下：有经验的小伙伴帮忙看看？\r\n------------------------------------------\r\nPython Call Stacks (More useful to users):\r\n------------------------------------------\r\n  File \"/root/anaconda3/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2525, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/root/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 343, in save_vars\r\n    'save_to_memory': save_to_memory\r\n  File \"/root/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 295, in save_vars\r\n    filename=filename)\r\n  File \"/root/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 641, in save_persistables\r\n    filename=filename)\r\n  File \"/root/anaconda3/lib/python3.7/site-packages/paddle/fluid/io.py\", line 1246, in save_inference_model\r\n    save_persistables(executor, save_dirname, main_program, params_filename)\r\n  File \"tools/export_model.py\", line 74, in main\r\n    params_filename='params')\r\n  File \"tools/export_model.py\", line 78, in <module>\r\n    main()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Tensor not initialized yet when Tensor::type() is called.\r\n  [Hint: holder_ should not be null.] at (/paddle/paddle/fluid/framework/tensor.h:140)\r\n  [operator < save_combine > error]\r\n",
        "state": "closed",
        "user": "ARQlalala",
        "closed_by": "ARQlalala",
        "created_at": "2020-05-15T09:38:24+00:00",
        "updated_at": "2020-05-20T07:03:30+00:00",
        "closed_at": "2020-05-20T07:03:30+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ARQlalala"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 123,
        "title": "Why Larger Batch Size Slows Training",
        "body": "I am training WRN-28-10 on CIFAR10 using PaddleClas. When batch size > 128, using larger batch size, training gets slower. A detailed comparison is shown below.\r\n\r\n| Batch Size  | Time (Per Epoch) |\r\n| ------------- | ------------- |\r\n| 32 | 82.2s |\r\n| 64  | 72.8s  |\r\n| 128  | 68.5s  |\r\n| 256 | 74.1s |\r\n| 512 | 86.4s |\r\n| 1024 | 110.5s |\r\n\r\nThe time of the 2nd epoch is reported, so warm-up time is not counted. Experiments showed that the results were consistent.\r\n\r\nThis behavior is strange and unexpected. Could you help me to find the reason?\r\n\r\nCode to reproduce is [here](https://aistudio.baidu.com/aistudio/projectdetail/478482).\r\n\r\nThank you very much!",
        "state": "closed",
        "user": "sbl1996",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-05-16T13:17:55+00:00",
        "updated_at": "2022-03-16T03:30:06+00:00",
        "closed_at": "2022-03-16T03:30:06+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 128,
        "title": "模型转换出错",
        "body": "![image](https://user-images.githubusercontent.com/48110081/82626359-2e69f480-9c1a-11ea-9cbf-962615c42f97.png)\r\n",
        "state": "closed",
        "user": "chengxurensheng666",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-22T02:51:28+00:00",
        "updated_at": "2020-05-27T01:24:37+00:00",
        "closed_at": "2020-05-27T01:24:37+00:00",
        "comments_count": [
            "littletomatodonkey",
            "chengxurensheng666"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 122,
        "title": "Mixed Precision Training",
        "body": "Mixed precision training is available in [PaddleCV/image_classification](https://github.com/PaddlePaddle/models/tree/develop/PaddleCV/image_classification) but not in this repo. According to [Release Notes](https://www.paddlepaddle.org.cn/documentation/docs/en/release_note_en.html) of PaddlePaddle 1.7, AMP interfaces have been added.\r\n![image](https://user-images.githubusercontent.com/13728074/82119257-82ef1900-97af-11ea-8562-a62837436cc2.png)\r\nBased on these, I think it would be convenient to implement it. \r\n\r\nMixed precision training is critical to fast training on V100. Please consider adding it. Thank you!",
        "state": "closed",
        "user": "sbl1996",
        "closed_by": "sbl1996",
        "created_at": "2020-05-16T11:56:14+00:00",
        "updated_at": "2020-05-17T06:36:38+00:00",
        "closed_at": "2020-05-17T06:36:38+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 126,
        "title": "请问大规模分类预训练模型下载地址是否提供",
        "body": "文档和model_zoo中均没有找到",
        "state": "closed",
        "user": "gj199602",
        "closed_by": "gj199602",
        "created_at": "2020-05-19T15:04:11+00:00",
        "updated_at": "2020-05-20T03:51:06+00:00",
        "closed_at": "2020-05-20T02:31:23+00:00",
        "comments_count": [
            "dyning",
            "gj199602",
            "dyning"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 127,
        "title": "无法运行",
        "body": "![image](https://user-images.githubusercontent.com/48110081/82560953-02605c00-9ba5-11ea-8f17-c980d20e9514.png)\r\n",
        "state": "closed",
        "user": "chengxurensheng666",
        "closed_by": "shippingwang",
        "created_at": "2020-05-21T12:52:47+00:00",
        "updated_at": "2020-07-14T11:25:50+00:00",
        "closed_at": "2020-07-14T11:25:50+00:00",
        "comments_count": [
            "sbl1996"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 133,
        "title": "--use_tensorrt=True",
        "body": "Error: Pass tensorrt_subgraph_pass has not been registered at (/paddle/paddle/fluid/framework/ir/pass.h:170)",
        "state": "closed",
        "user": "Amore-HDU",
        "closed_by": "shippingwang",
        "created_at": "2020-05-26T07:18:09+00:00",
        "updated_at": "2020-12-04T03:37:18+00:00",
        "closed_at": "2020-07-14T11:24:34+00:00",
        "comments_count": [
            "littletomatodonkey",
            "habout632",
            "habout632",
            "habout632"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 131,
        "title": "eval出错，AssertionError: can't find PADDLE_TRAINER_ENDPOINTS",
        "body": "执行你们教程，报AssertionError: can't find PADDLE_TRAINER_ENDPOINTS\r\npython tools/eval.py \\\r\n    -c ./configs/eval.yaml \\\r\n    -o ARCHITECTURE.name=\"ResNet50_vd\" \\\r\n    -o pretrained_model=output/ResNet50_vd/19/ppcls",
        "state": "closed",
        "user": "Amore-HDU",
        "closed_by": "shippingwang",
        "created_at": "2020-05-26T06:12:17+00:00",
        "updated_at": "2020-07-14T11:32:21+00:00",
        "closed_at": "2020-07-14T11:32:21+00:00",
        "comments_count": [
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 129,
        "title": "received rank:2 != label_dims.size():3",
        "body": "报错：  File \"tools/train.py\", line 124, in <module>\r\n    main(args)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nInvalidArgumentError: If Attr(soft_label) == true, Input(X) and Input(Label) shall have the same dimensions. But received: the dimensions of Input(X) is [2],the shape of Input(X) is [-1, 2], the dimensions of Input(Label) is [3], the shape ofInput(Label) is [-1, 1, 2]\r\n  [Hint: Expected rank == label_dims.size(), but received rank:2 != label_dims.size():3.] at (D:\\1.8.1\\paddle\\paddle\\fluid\\operators\\cross_entropy_op.cc:63)\r\n  [operator < cross_entropy > error]\r\nINFO 2020-05-23 18:17:34,812 utils.py:272] terminate all the procs\r\nERROR 2020-05-23 18:17:34,812 utils.py:416] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-05-23 18:17:34,813 utils.py:272] terminate all the procs\r\n\r\n图片512*512png，8位深度，类别1，2，3。这个报错里的rank和label_dims.size()分别是什么意思？？",
        "state": "closed",
        "user": "weiheshiqingchun",
        "closed_by": "WuHaobo",
        "created_at": "2020-05-23T10:21:06+00:00",
        "updated_at": "2020-06-07T03:17:48+00:00",
        "closed_at": "2020-06-07T03:17:48+00:00",
        "comments_count": [
            "weiheshiqingchun",
            "littletomatodonkey",
            "weiheshiqingchun",
            "littletomatodonkey",
            "weiheshiqingchun",
            "littletomatodonkey",
            "weiheshiqingchun",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 135,
        "title": "multi_process reader的问题",
        "body": "Process Process-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\nProcess Process-2:\r\n(Pdb)\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\nProcess Process-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\nProcess Process-3:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\n2020-05-27 14:43:10 WARNING: Your reader has raised an exception!\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/threading.py\", line 914, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.5/threading.py\", line 862, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1156, in __thread_main__\r\n    six.reraise(*sys.exc_info())\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1136, in __thread_main__\r\n    for tensors in self._tensor_reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1206, in __tensor_reader_impl__\r\n    for slots in paddle_reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/data_feeder.py\", line 506, in __reader_creator__\r\n    for item in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 267, in wrapper\r\n    for idx, sample in enumerate(reader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 572, in queue_reader\r\n    raise ValueError(\"multiprocess reader raises an exception\")\r\nValueError: multiprocess reader raises an exception\r\n\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\nProcess Process-4:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\nProcess Process-2:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\nTraceback (most recent call last):\r\n  File \"./jaits_utils/task_tools.py\", line 494, in inner\r\n    func(jif,*args, **kwargs)\r\n  File \"cla/jaits_train.py\", line 215, in main\r\n    epoch_id, 'train')\r\n  File \"/home/pd_source/cla/program.py\", line 413, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1102, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n\r\n\r\n2020-05-27 14:43:10 INFO: SO:exception-Traceback (most recent call last):\r\n  File \"./jaits_utils/task_tools.py\", line 494, in inner\r\n    func(jif,*args, **kwargs)\r\n  File \"cla/jaits_train.py\", line 215, in main\r\n    epoch_id, 'train')\r\n  File \"/home/pd_source/cla/program.py\", line 413, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1102, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n\r\n\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\nProcess Process-3:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\n2020-05-27 14:43:10 WARNING: Your reader has raised an exception!\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/threading.py\", line 914, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.5/threading.py\", line 862, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1156, in __thread_main__\r\n    six.reraise(*sys.exc_info())\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1136, in __thread_main__\r\n    for tensors in self._tensor_reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1206, in __tensor_reader_impl__\r\n    for slots in paddle_reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/data_feeder.py\", line 506, in __reader_creator__\r\n    for item in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 267, in wrapper\r\n    for idx, sample in enumerate(reader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 572, in queue_reader\r\n    raise ValueError(\"multiprocess reader raises an exception\")\r\nValueError: multiprocess reader raises an exception\r\n\r\n> /home/pd_source/cla/ppcls/data/reader.py(191)reader()\r\n-> for line in full_lines:\r\n(Pdb)\r\nProcess Process-4:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/usr/local/lib/python3.5/dist-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/reader/decorator.py\", line 549, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/home/pd_source/cla/ppcls/data/reader.py\", line 191, in reader\r\n    for line in full_lines:\r\n  File \"/usr/lib/python3.5/bdb.py\", line 48, in trace_dispatch\r\n    return self.dispatch_line(frame)\r\n  File \"/usr/lib/python3.5/bdb.py\", line 67, in dispatch_line\r\n    if self.quitting: raise BdbQuit\r\nbdb.BdbQuit\r\nTraceback (most recent call last):\r\n  File \"./jaits_utils/task_tools.py\", line 494, in inner\r\n    func(jif,*args, **kwargs)\r\n  File \"cla/jaits_train.py\", line 215, in main\r\n    epoch_id, 'train')\r\n  File \"/home/pd_source/cla/program.py\", line 413, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1102, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n\r\n\r\n2020-05-27 14:43:10 INFO: SO:exception-Traceback (most recent call last):\r\n  File \"./jaits_utils/task_tools.py\", line 494, in inner\r\n    func(jif,*args, **kwargs)\r\n  File \"cla/jaits_train.py\", line 215, in main\r\n    epoch_id, 'train')\r\n  File \"/home/pd_source/cla/program.py\", line 413, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/usr/local/lib/python3.5/dist-packages/paddle/fluid/reader.py\", line 1102, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n",
        "state": "closed",
        "user": "youwei2567",
        "closed_by": "youwei2567",
        "created_at": "2020-05-27T06:50:55+00:00",
        "updated_at": "2020-06-20T06:52:47+00:00",
        "closed_at": "2020-05-27T07:01:59+00:00",
        "comments_count": [
            "youwei2567",
            "yran1011"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 134,
        "title": "window10 x64 如何写训练语句",
        "body": "我的笔记本是window10 x64, 显卡是NVIDIA GeForce GTX 1650.\r\n\r\n我按照示例程序编写训练语句，如下：python -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/quick_start/ResNet50_vd.yaml\r\n\r\n结果提示 ”gen_nccl_id ” has not been registered, 咨询QQ群说是window不支持多卡，请问针对我目前情况，应该如何写训练语句",
        "state": "closed",
        "user": "ruinian394",
        "closed_by": "ruinian394",
        "created_at": "2020-05-26T08:34:04+00:00",
        "updated_at": "2020-08-05T01:41:28+00:00",
        "closed_at": "2020-05-27T01:15:09+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ruinian394",
            "chliang",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 138,
        "title": "Error: Pass tensorrt_subgraph_pass has not been registered",
        "body": "按照AI Studio中 30分钟玩转PaddleClas的教程，训练完模型并导出后，进行infer的时候报错：\r\n\r\n这是指令：\r\n![指令](https://user-images.githubusercontent.com/66236425/83420287-015ae480-a459-11ea-8250-ff545e4bad6b.jpg)\r\n\r\n报错 Stack：\r\n![stack](https://user-images.githubusercontent.com/66236425/83420381-25b6c100-a459-11ea-8851-27d1c2890d0f.jpg)\r\n\r\n报错 error msg：\r\n![error](https://user-images.githubusercontent.com/66236425/83420404-2c453880-a459-11ea-91b8-8089b220a461.jpg)\r\n\r\n请大神帮忙看看，谢谢！",
        "state": "closed",
        "user": "channingblue",
        "closed_by": "channingblue",
        "created_at": "2020-06-01T14:43:59+00:00",
        "updated_at": "2020-06-12T12:48:25+00:00",
        "closed_at": "2020-06-12T12:48:09+00:00",
        "comments_count": [
            "channingblue",
            "channingblue",
            "littletomatodonkey",
            "channingblue"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 136,
        "title": "十万分类预训练模型的推断",
        "body": "UnavailableError: Load operator fail to open file pretrained/ResNet50_vd_10w_pretrained/fc_0.w_0, please check whether the model file is complete or damaged.\r\n  [Hint: Expected static_cast<bool>(fin) == true, but received static_cast<bool>(fin):0 != true:1.] at (/paddle/paddle/fluid/operators/load_op.h:41)\r\n  [operator < load > error]",
        "state": "closed",
        "user": "youwei2567",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-05-28T06:14:54+00:00",
        "updated_at": "2020-06-28T07:35:24+00:00",
        "closed_at": "2020-06-28T07:35:24+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 141,
        "title": "请问一下，飞桨有尝试使用HRNet来进行ImageNet的分类任务吗？",
        "body": "尊敬的开发者，你好！\r\n请问一下，飞桨有尝试使用HRNet来进行ImageNet的分类任务吗？\r\n\r\n期待你的回复！",
        "state": "closed",
        "user": "songyuc",
        "closed_by": "songyuc",
        "created_at": "2020-06-03T09:24:01+00:00",
        "updated_at": "2020-06-04T01:02:42+00:00",
        "closed_at": "2020-06-04T01:02:41+00:00",
        "comments_count": [
            "littletomatodonkey",
            "songyuc",
            "littletomatodonkey",
            "songyuc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 140,
        "title": "这几个接口能不能给下用例和参数说明，主要是参数",
        "body": "![image](https://user-images.githubusercontent.com/47955238/83618047-80b4f900-a5bc-11ea-9f54-24c4dd93ccda.png)\r\n其他接口也是，基本没有参数说明",
        "state": "closed",
        "user": "ipyffor",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-06-03T09:06:23+00:00",
        "updated_at": "2020-06-03T10:31:53+00:00",
        "closed_at": "2020-06-03T10:31:53+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ipyffor",
            "ipyffor",
            "ipyffor",
            "littletomatodonkey",
            "ipyffor"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 162,
        "title": "Incorrect setting of `is_test` in EfficientNet",
        "body": "`is_test` is not correctly set in EfficientNet, leading to drop_connect in test time. It can be easily reproduced by a repeat of inferring in the same image, like what happens in the following.\r\n![image](https://user-images.githubusercontent.com/13728074/84381545-c8bac800-ac1b-11ea-8cb2-c61599f474b5.png)\r\nThe predicted probabilities were different between different runs.\r\n\r\nThe cause may like this.\r\n![image](https://user-images.githubusercontent.com/13728074/84381776-159e9e80-ac1c-11ea-92ca-5eaee1917d70.png)\r\n`is_test` defaults to False in `EfficientNet` and is not being set to True in either `infer.py` or `predict.py`.\r\n\r\nMoreover, duplicated definition of `is_test` in both `__init__` and `net` leads to confusion.\r\n![image](https://user-images.githubusercontent.com/13728074/84382141-c73dcf80-ac1c-11ea-8663-79182e4a6787.png)\r\nIn fact, `_drop_connect` uses `self.is_test` and `is_test` passed by methods is not used. \r\n\r\nIt would be better to fix it.",
        "state": "closed",
        "user": "sbl1996",
        "closed_by": "sbl1996",
        "created_at": "2020-06-11T11:53:52+00:00",
        "updated_at": "2020-06-11T12:00:58+00:00",
        "closed_at": "2020-06-11T12:00:58+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 148,
        "title": "res2net 200模型命名python2错误",
        "body": "在创建res2net 200层模型时，py2会报错：\r\n`UnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 4: invalid start byte`\r\n\r\n因为层数超过26个英文字母，代码里的命名会出错\r\n`conv_name = \"res\" + str(block+2) + chr(97+i) `\r\n\r\n代码里的上一个分支应该增加res2net200\r\n`if layers in [101, 152, 200] and block == 2:  `\r\n",
        "state": "closed",
        "user": "miraclebiu",
        "closed_by": "miraclebiu",
        "created_at": "2020-06-08T08:01:51+00:00",
        "updated_at": "2020-06-08T08:44:50+00:00",
        "closed_at": "2020-06-08T08:44:50+00:00",
        "comments_count": [
            "miraclebiu",
            "littletomatodonkey",
            "miraclebiu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 151,
        "title": "resnet_vd训练出错，没有is_test字段",
        "body": "paddle版本：1.7.1\r\nconfig: ResNet50_vd.yaml\r\n执行训练后出错：\r\n![image](https://user-images.githubusercontent.com/20043808/84037732-90c04480-a9d1-11ea-8071-efe130860ec2.png)\r\nresnet50_vd init中确实没有is_test字段，但是program.create_model中会传入这个字段：\r\n![image](https://user-images.githubusercontent.com/20043808/84037827-b3eaf400-a9d1-11ea-826c-5bbd196eccc1.png)\r\n请问下这里是我的版本问题吗？",
        "state": "closed",
        "user": "barry2025",
        "closed_by": "barry2025",
        "created_at": "2020-06-08T13:48:29+00:00",
        "updated_at": "2020-06-09T05:55:55+00:00",
        "closed_at": "2020-06-09T05:55:55+00:00",
        "comments_count": [
            "littletomatodonkey",
            "barry2025",
            "littletomatodonkey",
            "barry2025",
            "littletomatodonkey",
            "barry2025",
            "littletomatodonkey",
            "barry2025"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 166,
        "title": "您好，模型infer之后，同一张图的结果有diff",
        "body": "您好，我用infer脚本进行推断的时候遇到了如下的问题\r\n第一次infer：class id: 1, probability: 0.9075\r\n第二次infer：class id: 1, probability: 0.9048\r\n第三次infer：class id: 1, probability: 0.9069\r\n\r\n这是我的运行脚本：\r\nexport PYTHONPATH=$PWD:$PYTHONPATH\r\nexport CUDA_VISIBLE_DEVICES=0\r\n#--model=EfficientNetB0 --pretrained_model=output/EfficientNetB0_val/best_model_in_epoch_124/ppcls --output_paht=./convert\r\npython tools/infer/infer.py \\\r\n    --image_file=./tools/img.jpg \\\r\n    --model=EfficientNetB0 \\\r\n    --pretrained_model=output/EfficientNetB0_val/best_model_in_epoch_124/ppcls \\\r\n\r\n其中我的改动是，在resize的时候去掉了resize_short模式，将图片直接resize到288大小\r\n\r\n有遇到的小伙伴帮忙答疑一下呀，谢谢~~\r\n\r\n\r\n",
        "state": "closed",
        "user": "ARQlalala",
        "closed_by": "ARQlalala",
        "created_at": "2020-06-15T07:52:49+00:00",
        "updated_at": "2020-06-16T02:35:53+00:00",
        "closed_at": "2020-06-16T02:35:53+00:00",
        "comments_count": [
            "ARQlalala"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 164,
        "title": "模型推断问题",
        "body": "请教下大佬：\r\n1、使用如下命令貌似只能推断一张图片，如果做到推断一个文件夹呢？类似paddle detection那样指定一个infer_dir。\r\npython tools/infer/predict.py \\\r\n    -m model文件路径 \\\r\n    -p params文件路径 \\\r\n    -i 图片路径 \\\r\n    --use_gpu=1 \\\r\n    --use_tensorrt=True\r\n\r\n2、windows环境下，怎样设置环境变量呢？我用aistudio上面的命令，Windows终端不认啊：\r\nexport PYTHONPATH=$PWD:$PYTHONPATH\r\n",
        "state": "closed",
        "user": "legendxty",
        "closed_by": "shippingwang",
        "created_at": "2020-06-14T11:59:39+00:00",
        "updated_at": "2020-07-14T11:29:02+00:00",
        "closed_at": "2020-07-14T11:29:01+00:00",
        "comments_count": [
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 149,
        "title": " demo运行出错",
        "body": "paddle环境1.7.2 cuda9.0 cudnn7.5\r\n如果使用命令/home/vis/duyuting/app/anaconda3/bin/python -m paddle.distributed.launch     --selected_gpus=\"0\"     tools/train.py         -c ./configs/quick_start/ResNet50_vd.yaml 会报错:\r\nError: Failed to find dynamic library: libnccl.so ( /lib64/libc.so.6: version `GLIBC_2.14' not found (required by /home/vis/duyuting/app/nccl_2.5.6-1+cuda10.0_x86_64/lib/libnccl.so) )\r\n Please specify its path correctly using following ways:\r\n Method. set environment variable LD_LIBRARY_PATH on Linux or DYLD_LIBRARY_PATH on Mac OS.\r\n For instance, issue command: export LD_LIBRARY_PATH=...\r\n Note: After Mac OS 10.11, using the DYLD_LIBRARY_PATH is impossible unless System Integrity Protection (SIP) is disabled. at (/paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:177)\r\n  [operator < gen_nccl_id > error] 看起来是nccl问题\r\n去官网下载了cuda9版本的nccl报错：\r\nError: An error occurred here. There is no accurate error hint for this error yet. We are continuously in the process of increasing hint for this kind of error check. It would be helpful if you could inform us of how this conversion went by opening a github issue. And we will resolve it with high priority.\r\n  - New issue link: https://github.com/PaddlePaddle/Paddle/issues/new\r\n  - Recommended issue content: all error stack information\r\n  [unhandled system error] at (/paddle/paddle/fluid/operators/distributed_ops/gen_nccl_id_op.cc:162)\r\n  [operator < gen_nccl_id > error]\r\n如果不使用分布式命令:/home/vis/duyuting/app/anaconda3/bin/python tools/train.py         -c ./configs/quick_start/ResNet50_vd.yaml 报错：Traceback (most recent call last):\r\n  File \"tools/train.py\", line 133, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 59, in main\r\n    fleet.init(role)\r\n  File \"/home/vis/duyuting/app/anaconda3/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/fleet_base.py\", line 202, in init\r\n    self._role_maker.generate_role()\r\n  File \"/home/vis/duyuting/app/anaconda3/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/role_maker.py\", line 500, in generate_role\r\n    assert self._worker_endpoints is not None, \"can't find PADDLE_TRAINER_ENDPOINTS\"\r\n这个库难道不能单gpu运行？？？？",
        "state": "closed",
        "user": "Cristhine",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-06-08T08:59:55+00:00",
        "updated_at": "2020-07-01T09:36:15+00:00",
        "closed_at": "2020-07-01T09:36:15+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Cristhine",
            "littletomatodonkey",
            "Cristhine",
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 177,
        "title": "调用模型微调命令训练出错",
        "body": "模型调用命令，使用百度ResNet50_vd_10w的预训练模型：\r\nset CUDA_VISIBLE_DEVICES=0\r\npython -m paddle.distributed.launch --selected_gpus=\"0\" tools/train.py -c ./configs/quick_start/ResNet50_vd_10w_finetune.yaml\r\n\r\n报错：\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 150, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 75, in main\r\n    config, train_prog, startup_prog, is_train=True)\r\n  File \"F:\\pythonproject\\PaddleClas\\PaddleClas\\tools\\program.py\", line 363, in build\r\n    optimizer.minimize(fetchs['loss'][0])\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 652, in minimize\r\n    fleet.main_program = self._try_to_compile(startup_program, main_program)\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 562, in _try_to_compile\r\n    self._transpile(startup_program, main_program)\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\collective\\__init__.py\", line 489, in _transpile\r\n    current_endpoint=current_endpoint)\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\transpiler\\distribute_transpiler.py\", line 625, in transpile\r\n    wait_port=self.config.wait_port)\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\transpiler\\distribute_transpiler.py\", line 397, in _transpile_nccl2\r\n    self.config.hierarchical_allreduce_inter_nranks\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 2610, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 1870, in __init__\r\n    proto = OpProtoHolder.instance().get_op_proto(type)\r\n  File \"F:\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 1751, in get_op_proto\r\n    raise ValueError(\"Operator \\\"%s\\\" has not been registered.\" % type)\r\nValueError: Operator \"gen_nccl_id\" has not been registered.\r\nINFO 2020-06-22 11:29:30,706 utils.py:272] terminate all the procs\r\nERROR 2020-06-22 11:29:30,706 utils.py:416] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-06-22 11:29:30,706 utils.py:272] terminate all the procs\r\n\r\nResNet50_vd_10w_finetune.yaml文件配置如下：\r\nmode: 'train'\r\nARCHITECTURE:\r\n    name: 'ResNet50_vd'\r\npretrained_model: \"F:/pythonproject/PaddleClas/PaddleClas/ResNet50_vd_10w_pretrained/ResNet50_vd_10w_pretrained\"\r\nmodel_save_dir: \"./output/\"\r\nclasses_num: 5\r\ntotal_images: 11745\r\nsave_interval: 1\r\nvalidate: True\r\nvalid_interval: 1\r\nepochs: 20\r\ntopk: 2\r\nimage_shape: [3, 224, 224]\r\n\r\nLEARNING_RATE:\r\n    function: 'Cosine'          \r\n    params:                   \r\n        lr: 0.00375\r\n\r\nOPTIMIZER:\r\n    function: 'Momentum'\r\n    params:\r\n        momentum: 0.9\r\n    regularizer:\r\n        function: 'L2'\r\n        factor: 0.000001\r\n\r\nTRAIN:\r\n    batch_size: 32\r\n    num_workers: 4\r\n    file_list: \"F:/pythonproject\\PaddleClas/PaddleClas/dataset/driver/train_list.txt\"\r\n    data_dir: \"F:/pythonproject\\PaddleClas/PaddleClas/dataset/driver/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1./255.\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n\r\nVALID:\r\n    batch_size: 20\r\n    num_workers: 4\r\n    file_list: \"F:/pythonproject\\PaddleClas/PaddleClas/dataset/driver/val_list.txt\"\r\n    data_dir: \"F:/pythonproject\\PaddleClas/PaddleClas/dataset/driver/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n",
        "state": "closed",
        "user": "vincentpengpeng",
        "closed_by": "shippingwang",
        "created_at": "2020-06-22T03:32:17+00:00",
        "updated_at": "2020-07-14T11:41:08+00:00",
        "closed_at": "2020-07-14T11:41:08+00:00",
        "comments_count": [
            "littletomatodonkey",
            "vincentpengpeng",
            "gabriel-zly",
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 176,
        "title": "请问是否有c++的部署代码？",
        "body": "请问下目前paddleclas是否有c++的部署代码，以及采用c++部署后的性能结果？",
        "state": "closed",
        "user": "barry2025",
        "closed_by": "shippingwang",
        "created_at": "2020-06-22T02:41:45+00:00",
        "updated_at": "2020-07-14T11:29:24+00:00",
        "closed_at": "2020-07-14T11:29:24+00:00",
        "comments_count": [
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 178,
        "title": "se+hrnet ",
        "body": "因为我想在HRNet下加上注意力机制，所以选择使用se+hrnet，在赢一个issue中反馈给我的是SE+HRNet需要有带SE的预训练，直接加载没有SE的预训练的模型精度会比较低。\r\n我的问题：\r\n1.是否有SE+HRNet的预训练\r\n2.如果没有，我应该怎么训练能有一个较好的结果，是否有可行性的建议\r\n3.是否有其他易于训练的注意力机制，相较于SE+HRNet在没有预训练模型的情况下容易训练。",
        "state": "closed",
        "user": "lxk767363331",
        "closed_by": "shippingwang",
        "created_at": "2020-06-23T11:19:10+00:00",
        "updated_at": "2020-07-14T11:36:37+00:00",
        "closed_at": "2020-07-14T11:36:37+00:00",
        "comments_count": [
            "cuicheng01",
            "lxk767363331",
            "cuicheng01",
            "lxk767363331",
            "shippingwang"
        ],
        "labels": [
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 184,
        "title": "博主，想问下训练和验证过程用visualdl可视化，怎么改程序呢?",
        "body": "",
        "state": "closed",
        "user": "yy11223",
        "closed_by": "yy11223",
        "created_at": "2020-06-29T04:13:21+00:00",
        "updated_at": "2020-12-20T14:26:46+00:00",
        "closed_at": "2020-12-20T14:26:46+00:00",
        "comments_count": [
            "shippingwang",
            "yy11223",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 187,
        "title": "train from scratch",
        "body": "你好，我想问一下，需要使用paddleClas从头训练自己的数据，但是那个train_list.txt 中除了图片路径外，位置坐标是使用中心点坐标和宽高，还是使用左上右下坐标呢？\r\n![image](https://user-images.githubusercontent.com/63114159/86098507-c942d200-bae8-11ea-927f-1c7a730f026c.png)\r\n",
        "state": "closed",
        "user": "EwardJohn",
        "closed_by": "EwardJohn",
        "created_at": "2020-06-30T07:46:05+00:00",
        "updated_at": "2020-06-30T08:23:02+00:00",
        "closed_at": "2020-06-30T08:23:02+00:00",
        "comments_count": [
            "littletomatodonkey",
            "EwardJohn"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 189,
        "title": "PaddleClas训练数据不均衡",
        "body": "你好，请问如果训练数据不均衡出现数据倾斜，目前PaddleClas是否有相对应解决办法，谢谢。",
        "state": "closed",
        "user": "jianghancheng",
        "closed_by": "shippingwang",
        "created_at": "2020-07-01T07:29:17+00:00",
        "updated_at": "2020-07-14T11:40:09+00:00",
        "closed_at": "2020-07-14T11:40:09+00:00",
        "comments_count": [
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 201,
        "title": "import relative path instead of ```export PYTHONPATH```",
        "body": "although we support workable running scripts, some mistakes always happen when users try to run their own script without ```export PYTHONPATH```\r\n\r\n- [ ] import ppcls by the relative path",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-06T13:55:35+00:00",
        "updated_at": "2022-03-16T06:16:44+00:00",
        "closed_at": "2022-03-16T06:16:44+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 193,
        "title": "使用自己的训练集train from scratch",
        "body": "你好，我使用自己的训练集（只有1类物体）进行train from scratch ,但是训练的过程中，top1和top2始终是1.0000（eval也是这样的），如图所示：\r\n使用的配置文件为resnet50_vd.yaml,在配置文件中我改了类别数为2，请问这种情况应该怎末更改配置文件？还有一个问题是，如何拿PaddleClas训练完成的分类模型使用PaddleDetection进行目标检测？谢谢！\r\n![image](https://user-images.githubusercontent.com/63114159/86236032-f74d1280-bbcb-11ea-9986-72f29cea98fd.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "EwardJohn",
        "closed_by": "EwardJohn",
        "created_at": "2020-07-01T10:51:05+00:00",
        "updated_at": "2020-07-04T06:59:21+00:00",
        "closed_at": "2020-07-04T06:59:21+00:00",
        "comments_count": [
            "littletomatodonkey",
            "EwardJohn"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 195,
        "title": "动态图版本支持情况",
        "body": "如题，开发者你好，请问一下目前这个库的动态图版本代码能正常运行么？和静态图版本的开发进度目前有哪些是不对齐的？",
        "state": "closed",
        "user": "luuuyi",
        "closed_by": "luuuyi",
        "created_at": "2020-07-02T08:52:31+00:00",
        "updated_at": "2020-07-03T02:09:31+00:00",
        "closed_at": "2020-07-03T02:09:31+00:00",
        "comments_count": [
            "littletomatodonkey",
            "luuuyi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 194,
        "title": "HWC->CHW function redundancy",
        "body": "In operators.py\r\nIt seems that ```to_np```, ```order``` and ```channel_first``` is not necessary\r\nwe already have a ToCHWImage function",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-01T13:18:24+00:00",
        "updated_at": "2022-03-16T06:16:22+00:00",
        "closed_at": "2022-03-16T06:16:21+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 199,
        "title": "下载预训练模型报错，请帮忙看一下",
        "body": "!python tools/download.py -a ResNet50_vd -p ./pretrained -d True\r\n!python tools/download.py -a ResNet50_vd_ssld -p ./pretrained -d True\r\n!python tools/download.py -a MobileNetV3_large_x1_0 -p ./pretrained -d True\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/download.py\", line 17, in <module>\r\n    from ppcls import model_zoo\r\nModuleNotFoundError: No module named 'ppcls'\r\nTraceback (most recent call last):\r\n  File \"tools/download.py\", line 17, in <module>\r\n    from ppcls import model_zoo\r\nModuleNotFoundError: No module named 'ppcls'\r\nTraceback (most recent call last):\r\n  File \"tools/download.py\", line 17, in <module>\r\n    from ppcls import model_zoo\r\nModuleNotFoundError: No module named 'ppcls'",
        "state": "closed",
        "user": "Sunyingbin",
        "closed_by": "Sunyingbin",
        "created_at": "2020-07-06T09:53:50+00:00",
        "updated_at": "2020-07-07T09:13:28+00:00",
        "closed_at": "2020-07-07T09:13:28+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 196,
        "title": "resnet50vd耗时",
        "body": "你好，我在v100上测试resnet50vd耗时接近24ms，你们的5ms以内是怎么测试的 ",
        "state": "closed",
        "user": "Amore-HDU",
        "closed_by": "shippingwang",
        "created_at": "2020-07-02T12:07:07+00:00",
        "updated_at": "2020-07-14T11:39:41+00:00",
        "closed_at": "2020-07-14T11:39:41+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "wang-kangkang",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "littletomatodonkey",
            "Amore-HDU",
            "Amore-HDU",
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 202,
        "title": "make the concept: place clear",
        "body": "The concept: ```place``` confuse when someone tries to set available gpu places by indicating CUDA_VISIBLE_DEVICES\r\n\r\nusing Fleet interface, only the FLAGS_selected_gpus works\r\n\r\nso we have to obtain gpu num by\r\n```python\r\ngpu_num = paddle.fluid.core.get_cuda_device_count() if (\r\n        'PADDLE_TRAINERS_NUM') and (\r\n            'PADDLE_TRAINER_ID'\r\n    ) not in env else int(env.get('PADDLE_TRAINERS_NUM', 0))\r\n```\r\n\r\n- [ ] remove this switch",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-06T14:03:33+00:00",
        "updated_at": "2022-03-16T06:16:44+00:00",
        "closed_at": "2022-03-16T06:16:44+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 203,
        "title": "Add unittest in PaddleClas",
        "body": "As the CI is already built,\r\nThe unittest can be reconstructed, like:\r\n\r\n|—— ppcls\r\n|\r\n|—— test\r\n|————|———— test_reader.py \r\n|————|———— test_imaug.py\r\n|————|———— test_download.py\r\n|————|———— test_compress.py\r\n|————|———— test_model.py\r\n|————|———— test_speed.py\r\n|————|———— test_finetune.py\r\n|————|———— test_eval.py\r\n|————|———— test_train.py\r\n|————|———— test_infer.py\r\n|————|———— test_performance.py (IMPORTANT)\r\n|_________|__________test_export.py\r\n",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-06T14:07:31+00:00",
        "updated_at": "2022-03-16T06:16:44+00:00",
        "closed_at": "2022-03-16T06:16:44+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 212,
        "title": "Refine CI",
        "body": "CI should detect/test useful statistics, such as\r\n- [ ] models can RUN or not, \r\n   - random choosing 10 architectures\r\n   - run fake dataset, only need 8  or 16 samples to save time.\r\n   - support some post-processing\r\n      - Actually, some models cannot run eval.py, inference script, etc. by indicating the stored  (params/models) directly! \r\n         one way to solve this problem is to add post-processing in code, it will insert more 'specified model' codes in scripts. Integrate all processing to solve CI issues will confuse the users, the other is to skip CI. So it produces a new demand ->\r\n    - Add a ```white list``` to skip CI, There are some historical problems cannot solve together.\r\n- [ ] models do RUN the correct results\r\n    - compare the layers result to make sure finally result is stable.",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-14T10:27:23+00:00",
        "updated_at": "2022-03-16T06:16:45+00:00",
        "closed_at": "2022-03-16T06:16:45+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 205,
        "title": "模型推理报错",
        "body": "你好，我在aistudio上已将训练的模型转成inference模型之后，在推断的时候报错了:\r\n!export PYTHONPATH=./:$PYTHONPATH && python tools/infer/predict.py \\\r\n    -m=./inference/ResNet50_vd/model \\\r\n    -p=./inference/ResNet50_vd/params \\\r\n    -i=./dataset/flowers102/jpg/image_02275.jpg \\\r\n    --use_gpu=1 \\\r\n    --use_tensorrt=True\r\n\r\n\r\n报错信息如下：\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/infer/predict.py\", line 156, in <module>\r\n    main()\r\n  File \"tools/infer/predict.py\", line 110, in main\r\n    predictor = create_predictor(args)\r\n  File \"tools/infer/predict.py\", line 66, in create_predictor\r\n    predictor = create_paddle_predictor(config)\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<char const*>(char const*&&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int)\r\n2   paddle::framework::ir::PassRegistry::Get(std::string const&) const\r\n3   paddle::inference::analysis::IRPassManager::CreatePasses(paddle::inference::analysis::Argument*, std::vector<std::string, std::allocator<std::string> > const&)\r\n4   paddle::inference::analysis::IRPassManager::IRPassManager(paddle::inference::analysis::Argument*)\r\n5   paddle::inference::analysis::IrAnalysisPass::RunImpl(paddle::inference::analysis::Argument*)\r\n6   paddle::inference::analysis::Analyzer::RunAnalysis(paddle::inference::analysis::Argument*)\r\n7   paddle::AnalysisPredictor::OptimizeInferenceProgram()\r\n8   paddle::AnalysisPredictor::PrepareProgram(std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n9   paddle::AnalysisPredictor::Init(std::shared_ptr<paddle::framework::Scope> const&, std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n10  std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig, (paddle::PaddleEngineKind)2>(paddle::AnalysisConfig const&)\r\n11  std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig>(paddle::AnalysisConfig const&)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Pass tensorrt_subgraph_pass has not been registered at (/paddle/paddle/fluid/framework/ir/pass.h:201)\r\n\r\n请问如何解决？",
        "state": "closed",
        "user": "Sunyingbin",
        "closed_by": "shippingwang",
        "created_at": "2020-07-07T08:32:45+00:00",
        "updated_at": "2020-07-14T11:28:29+00:00",
        "closed_at": "2020-07-14T11:28:29+00:00",
        "comments_count": [
            "greatyang",
            "littletomatodonkey",
            "greatyang",
            "greatyang",
            "littletomatodonkey",
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 204,
        "title": "aistudio上跑paddleclas的官方示例",
        "body": "请问有没有一个能跑通的，给我个链接",
        "state": "closed",
        "user": "Sunyingbin",
        "closed_by": "Sunyingbin",
        "created_at": "2020-07-07T01:50:27+00:00",
        "updated_at": "2020-07-07T05:58:13+00:00",
        "closed_at": "2020-07-07T05:41:30+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Sunyingbin",
            "littletomatodonkey",
            "Sunyingbin",
            "Sunyingbin",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 207,
        "title": "如何在paddleHub上部署",
        "body": "你好，我用SSLD模型微调-基于ResNet50_vd_ssld预训练模型来做训练，然后生成了inference模型，想用PaddleHub进行部署的操作，有没有什么借壳快速部署的方式替换一下原来的module下的inference模型就可以启动部署的方式。",
        "state": "closed",
        "user": "Sunyingbin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-07-09T01:46:56+00:00",
        "updated_at": "2022-03-16T03:33:51+00:00",
        "closed_at": "2022-03-16T03:33:49+00:00",
        "comments_count": [
            "xialei2821212670",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 217,
        "title": "Test python multi-process speed",
        "body": "We use python multi-process to accelerate loading data.\r\ntest the influence of different ```--num_worker``` values on data loading.\r\n- [ ] performance:\r\n",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "weisy11",
        "created_at": "2020-07-20T03:45:41+00:00",
        "updated_at": "2022-03-16T06:16:45+00:00",
        "closed_at": "2022-03-16T06:16:45+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 211,
        "title": "模型推理问题",
        "body": "python tools/export_model.py \\\r\n    --model=模型名字 \\\r\n    --pretrained_model=预训练模型路径 \\\r\n    --output_path=预测模型保存路径\r\n对训练好的模型进行转换以后，再用一下命令：\r\npython tools/infer/predict.py \\\r\n    -m model文件路径 \\\r\n    -p params文件路径 \\\r\n    -i 图片路径 \\\r\n    --use_gpu=1 \\\r\n    --use_tensorrt=True\r\n进行推理，只能进行单张图片推理，请问能对文件夹下所有的图片进行推理吗",
        "state": "closed",
        "user": "gxqnba",
        "closed_by": "shippingwang",
        "created_at": "2020-07-14T08:26:52+00:00",
        "updated_at": "2020-07-14T11:26:55+00:00",
        "closed_at": "2020-07-14T11:26:54+00:00",
        "comments_count": [
            "shippingwang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 215,
        "title": "训练的时候，加载不了预训练模型",
        "body": "我训练的是effientNetB0的网络。\r\n下载了预训练模型，https://paddle-imagenet-models-name.bj.bcebos.com/EfficientNetB0_pretrained.tar，并解压了，解压后里面是很多个小文件。\r\nyaml的config文件也是配置正确的。\r\n\r\n但是，训练的使用，加载不了预训练模型文件。提示\r\n2020-07-17 20:01:31 INFO: Loading parameters from ./pretrained/EfficientNetB0_pretrained...\r\n2020-07-17 12:01:31,361-WARNING: ./pretrained/EfficientNetB0_pretrained.pdparams not found, try to load model file saved with [ save_params, save_persistables, save_vars ]\r\n请问应该怎么弄呢，谢谢~\r\n",
        "state": "closed",
        "user": "aceyw",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-07-17T06:19:34+00:00",
        "updated_at": "2020-10-10T07:07:02+00:00",
        "closed_at": "2020-10-10T07:07:02+00:00",
        "comments_count": [
            "littletomatodonkey",
            "chliang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 224,
        "title": "resume training",
        "body": "Add a tutorial to show how to resume training.",
        "state": "closed",
        "user": "shippingwang",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-07-25T06:45:33+00:00",
        "updated_at": "2020-11-08T07:41:03+00:00",
        "closed_at": "2020-11-08T07:41:03+00:00",
        "comments_count": [],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 221,
        "title": "模型获取",
        "body": "请问 有通用的模型可以获取吗 Inception-v4的 我主要用于获取图像的特征向量用于计算余玄相似度",
        "state": "closed",
        "user": "j2538318409",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-07-22T07:37:48+00:00",
        "updated_at": "2024-07-25T01:42:11+00:00",
        "closed_at": "2020-10-10T07:06:17+00:00",
        "comments_count": [
            "littletomatodonkey",
            "wqz960",
            "j2538318409",
            "j2538318409",
            "wqz960",
            "chinesejunzai12"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 225,
        "title": "关于resnet vd结构",
        "body": "您好，想请教一下resnet vd整体结构是什么呢？方便贴下论文链接吗谢谢",
        "state": "closed",
        "user": "MARD1NO",
        "closed_by": "MARD1NO",
        "created_at": "2020-07-26T01:42:49+00:00",
        "updated_at": "2020-07-27T01:24:58+00:00",
        "closed_at": "2020-07-27T00:34:22+00:00",
        "comments_count": [
            "littletomatodonkey",
            "MARD1NO"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 228,
        "title": "模型库中 pretrained weights 结构不符于 paddlepaddle/models/paddleCV/image_classification/se_resnext_vd.py 中模型结构和",
        "body": "测试过 SE_ResNeXt50_vd_32x4d 和 SE_ResNeXt101_vd_32x4d.\r\n\r\n在 pretrained weights 当中, 对于 paddleClas 里面的第一层 conv1_3 在 paddlepaddle 中 num_filters 为 128. 但是在 模型库的 pretrained weights 中 num_filters 为 64.\r\n\r\n",
        "state": "closed",
        "user": "XiminLin",
        "closed_by": "XiminLin",
        "created_at": "2020-07-28T03:54:11+00:00",
        "updated_at": "2020-07-28T05:08:10+00:00",
        "closed_at": "2020-07-28T04:04:13+00:00",
        "comments_count": [
            "XiminLin",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 227,
        "title": "ppcls not found error",
        "body": "![image](https://user-images.githubusercontent.com/9131265/88512605-67a75200-d019-11ea-87c4-d7ac7790ff02.png)\r\n",
        "state": "closed",
        "user": "zky001",
        "closed_by": "shippingwang",
        "created_at": "2020-07-27T06:57:06+00:00",
        "updated_at": "2020-07-30T12:22:52+00:00",
        "closed_at": "2020-07-30T12:22:52+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 229,
        "title": "PaddleClas 的 Res2Net200_vd_26w_4s 模型使用报错 'UnicodeEncodeError: 'ascii' codec can't encode character '\\x90' in position 3: ordinal not in range(128)'",
        "body": "我在使用 Res2Net200_vd_26w_4s 模型的时候报错 \r\n`\r\nTraceback (most recent call last):\r\n  File \"classification/train_cls.py\", line 180, in <module>\r\n    train_cls(settings)\r\n  File \"classification/train_cls.py\", line 53, in train_cls\r\n    opt.minimize(avg_train_loss)\r\n  File \"<decorator-gen-66>\", line 2, in minimize\r\n  File \"/Users/ximinlin/Documents/AI-Insects-Challenge/env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 277, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/Users/ximinlin/Documents/AI-Insects-Challenge/env/lib/python3.7/site-packages/paddle/fluid/optimizer.py\", line 835, in minimize\r\n    no_grad_set=no_grad_set)\r\n  File \"/Users/ximinlin/Documents/AI-Insects-Challenge/env/lib/python3.7/site-packages/paddle/fluid/optimizer.py\", line 678, in backward\r\n    act_no_grad_set, callbacks)\r\n  File \"/Users/ximinlin/Documents/AI-Insects-Challenge/env/lib/python3.7/site-packages/paddle/fluid/backward.py\", line 1413, in append_backward\r\n    _rename_grad_(target_grad_block, fwd_op_num, grad_to_var, {})\r\n  File \"/Users/ximinlin/Documents/AI-Insects-Challenge/env/lib/python3.7/site-packages/paddle/fluid/backward.py\", line 1137, in _rename_grad_\r\n    if block.desc.find_var(name.encode(\"ascii\")):\r\nUnicodeEncodeError: 'ascii' codec can't encode character '\\x90' in position 3: ordinal not in range(128)\r\n`\r\n\r\n但是我能正常使用 Res2Net101_vd_26w_4s. 下面是代码:\r\n\r\n`def train_cls(args):\r\n    data_reader = DataReader(args[\"batch_size\"])\r\n\r\n    use_cuda = args[\"use_cuda\"] or fluid.core.is_compiled_with_cuda()\r\n    place = fluid.CUDAPlace(0) if use_cuda else fluid.CPUPlace()\r\n    exe = fluid.Executor(place)\r\n\r\n    # build program\r\n    startup_prog = fluid.Program()\r\n    train_prog = fluid.Program()\r\n    with fluid.program_guard(train_prog, startup_prog):\r\n        with fluid.unique_name.guard():\r\n            train_image = fluid.data(name='image', shape=[None] + args[\"image_shape\"],\r\n                                     dtype='float32')\r\n            train_label = fluid.data(name='label', shape=[None, 1], dtype='int64')\r\n            # model = SE_ResNet50_vd()\r\n            # model = SE_ResNeXt50_vd_32x4d()\r\n            # model = SENet154_vd()\r\n            # model = SE_ResNeXt50_32x4d()\r\n            model = Res2Net200_vd_26w_4s()\r\n            \r\n\r\n            net_out = model.net(train_image, class_dim=args[\"num_classes\"])\r\n\r\n            train_loss, train_pred = fluid.layers.softmax_with_cross_entropy(net_out, train_label,\r\n                                                                             return_softmax=True)\r\n            avg_train_loss = fluid.layers.mean(x=train_loss)\r\n            train_acc = fluid.layers.accuracy(input=train_pred, label=train_label, k=1)\r\n\r\n            opt = fluid.optimizer.AdamOptimizer(\r\n                learning_rate=fluid.layers.cosine_decay(args[\"lr\"], step_each_epoch=200, epochs=300),\r\n                regularization=fluid.regularizer.L2DecayRegularizer(regularization_coeff=args[\"l2_decay\"])\r\n            )\r\n            opt.minimize(avg_train_loss)\r\n\r\n            train_feeder = fluid.DataFeeder(place=place, feed_list=[train_image, train_label])\r\n\r\n    train_fetches = [avg_train_loss.name, train_acc.name]\r\n`\r\n",
        "state": "closed",
        "user": "XiminLin",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-07-28T07:05:17+00:00",
        "updated_at": "2020-08-03T04:54:33+00:00",
        "closed_at": "2020-08-03T04:54:33+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 235,
        "title": "Typo Problem",
        "body": "In `dygraph` branch, I think that the module name `BisicBlock` should be `BasicBlock`.\r\nIt would be better if the module name is consistent with the name in origin paper ( and other frameworks ) to make it easier to understand.",
        "state": "closed",
        "user": "AndersonZhangyq",
        "closed_by": "AndersonZhangyq",
        "created_at": "2020-08-04T00:45:04+00:00",
        "updated_at": "2020-08-04T11:55:20+00:00",
        "closed_at": "2020-08-04T11:55:20+00:00",
        "comments_count": [
            "littletomatodonkey",
            "AndersonZhangyq",
            "AndersonZhangyq",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 230,
        "title": "运行文档中实用工具-分类预测框架-三预测引擎+inference模型预测时出错",
        "body": "报错信息如下：\r\nInvalidArgumentError: tensor version 1904018048 is not supported, Only version 0 is supported\r\n  [Hint: Expected version == 0U, but received version:1904018048 != 0U:0.] at (/paddle/paddle/fluid/framework/lod_tensor.cc:287)\r\n\r\n使用的模型是30分钟玩转paddleclas文档中3.2模型微调得到的模型，数据集使用的是flowers102.\r\n3.2步完成后得到的模型是inference模型吧，所以就直接运行了预测引擎的语句\r\npython ./tools/infer/predict.py \\\r\n    -i=./test.jpeg \\\r\n    -m=./resnet50-vd/model \\\r\n    -p=./resnet50-vd/params \\\r\n    --use_gpu=1 \\\r\n    --use_tensorrt=True\r\n\r\npaddlepaddle-gpu版本为1.7.2\r\n系统为ubuntu18.04\r\n",
        "state": "closed",
        "user": "gaooolianggg",
        "closed_by": "gaooolianggg",
        "created_at": "2020-07-29T03:01:05+00:00",
        "updated_at": "2020-07-29T08:49:27+00:00",
        "closed_at": "2020-07-29T08:49:27+00:00",
        "comments_count": [
            "gaooolianggg",
            "littletomatodonkey",
            "gaooolianggg",
            "littletomatodonkey",
            "gaooolianggg"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 238,
        "title": "train_multi_platform.py的问题",
        "body": "![image](https://user-images.githubusercontent.com/17689011/89384702-07a75e80-d731-11ea-954b-ad8a45d098e1.png)\r\n`Traceback (most recent call last):\r\n  File \"tools/train_multi_platform.py\", line 157, in <module>\r\n    main(args)\r\n  File \"tools/train_multi_platform.py\", line 122, in main\r\n    epoch_id, 'train', vdl_writer)\r\n  File \"/home/aistudio/PaddleClas/tools/program.py\", line 463, in run\r\n    if idx % config.get('print_interval', 10) == 0:\r\nAttributeError: 'NoneType' object has no attribute 'get'`\r\ntrain_multi_platform.py里调用program.run()时没有传config，默认是None，然后在第10个steps的时候调用config.get就崩了。",
        "state": "closed",
        "user": "haixiao990",
        "closed_by": "haixiao990",
        "created_at": "2020-08-05T07:36:58+00:00",
        "updated_at": "2020-08-05T09:10:04+00:00",
        "closed_at": "2020-08-05T09:10:04+00:00",
        "comments_count": [
            "littletomatodonkey",
            "haixiao990",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 243,
        "title": "eval paddlepaddle，报错AssertionError: can't find PADDLE_TRAINER_ENDPOINTS",
        "body": "报错背景:\r\n在aistudio上，进行训练，完成后得到./output/ResNet50_vd/190/ppcls.*\r\n\r\n在eval时报错:\r\neval命令:\r\n!python tools/eval.py \\\r\n    -c ./configs/quick_start/ResNet50_vd_finetune_eval.yaml \r\n```\r\nTraceback (most recent call last):\r\n  File \"tools/eval.py\", line 82, in <module>\r\n    main(args)\r\n  File \"tools/eval.py\", line 55, in main\r\n    fleet.init(role)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/fleet_base.py\", line 198, in init\r\n    self._role_maker.generate_role()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/role_maker.py\", line 500, in generate_role\r\n    assert self._worker_endpoints is not None, \"can't find PADDLE_TRAINER_ENDPOINTS\"\r\nAssertionError: can't find PADDLE_TRAINER_ENDPOINTS\r\n```\r\n\r\n",
        "state": "closed",
        "user": "trollhe",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-08-10T07:21:19+00:00",
        "updated_at": "2020-08-10T11:51:15+00:00",
        "closed_at": "2020-08-10T11:51:15+00:00",
        "comments_count": [
            "littletomatodonkey",
            "trollhe",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 244,
        "title": "  [Hint: Expected t->IsInitialized() == true, but received t->IsInitialized():0 != true:1.] at (/paddle/paddle/fluid/framework/operator.cc:1289)",
        "body": "",
        "state": "closed",
        "user": "fanplanet",
        "closed_by": "fanplanet",
        "created_at": "2020-08-12T01:45:08+00:00",
        "updated_at": "2020-08-12T01:46:30+00:00",
        "closed_at": "2020-08-12T01:46:30+00:00",
        "comments_count": [
            "fanplanet"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 245,
        "title": "  [Hint: Expected t->IsInitialized() == true, but received t->IsInitialized():0 != true:1.] at (/paddle/paddle/fluid/framework/operator.cc:1289)",
        "body": "转换serving时出错",
        "state": "closed",
        "user": "fanplanet",
        "closed_by": "fanplanet",
        "created_at": "2020-08-12T01:47:21+00:00",
        "updated_at": "2020-08-12T06:48:09+00:00",
        "closed_at": "2020-08-12T06:48:09+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 249,
        "title": "动态图repo导入不了预训练模型",
        "body": "请问一下动态图的分支不能load预训练的模型么，ppcls/utils/save_load.py 135行这里未实现报错",
        "state": "closed",
        "user": "luuuyi",
        "closed_by": "luuuyi",
        "created_at": "2020-08-18T07:36:48+00:00",
        "updated_at": "2020-08-20T14:43:58+00:00",
        "closed_at": "2020-08-20T14:43:58+00:00",
        "comments_count": [
            "littletomatodonkey",
            "luuuyi",
            "littletomatodonkey",
            "luuuyi",
            "luuuyi",
            "luuuyi",
            "littletomatodonkey",
            "luuuyi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 250,
        "title": "按照文档出现问题，请教！！！",
        "body": "API is deprecated since 2.0.0 Please use FleetAPI instead.\r\nWIKI: https://github.com/PaddlePaddle/Fleet/blob/develop/markdown_doc/transpiler\r\n\r\n        \r\nW0822 16:45:36.462678 28971 device_context.cc:237] Please NOTE: device: 0, CUDA Capability: 52, Driver API Version: 10.0, Runtime API Version: 10.0\r\nW0822 16:45:36.466768 28971 device_context.cc:245] device: 0, cuDNN Version: 7.6.\r\nW0822 16:45:37.586989 28971 dynamic_loader.cc:120] Can not find library: libnccl.so. The process maybe hang. Please try to add the lib path to LD_LIBRARY_PATH.\r\n/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/executor.py:789: UserWarning: The following exception is not an EOF exception.\r\n  \"The following exception is not an EOF exception.\")\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 153, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    exe.run(startup_prog)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 790, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 785, in run\r\n    use_program_cache=use_program_cache)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 838, in _run_impl\r\n    use_program_cache=use_program_cache)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 912, in _run_program\r\n    fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<char const*>(char const*&&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int)\r\n2   paddle::platform::dynload::GetNCCLDsoHandle()\r\n3   void std::__once_call_impl<std::_Bind_simple<paddle::platform::dynload::DynLoad__ncclGetUniqueId::operator()<ncclUniqueId*>(ncclUniqueId*)::{lambda()#1} ()> >()\r\n4   paddle::operators::GenNCCLIdOp::GenerateAndSend(paddle::framework::Scope*, paddle::platform::DeviceContext const&, std::string const&, std::vector<std::string, std::allocator<std::string> > const&) const\r\n5   paddle::operators::GenNCCLIdOp::RunImpl(paddle::framework::Scope const&, paddle::platform::Place const&) const\r\n6   paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, paddle::platform::Place const&)\r\n7   paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool)\r\n8   paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool, std::vector<std::string, std::allocator<std::string> > const&, bool, bool)\r\n\r\n------------------------------------------\r\nPython Call Stacks (More useful to users):\r\n------------------------------------------\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2525, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/transpiler/distribute_transpiler.py\", line 397, in _transpile_nccl2\r\n    self.config.hierarchical_allreduce_inter_nranks\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/transpiler/distribute_transpiler.py\", line 625, in transpile\r\n    wait_port=self.config.wait_port)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/collective/__init__.py\", line 285, in _transpile\r\n    current_endpoint=current_endpoint)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/collective/__init__.py\", line 358, in _try_to_compile\r\n    self._transpile(startup_program, main_program)\r\n  File \"/data/data_pc_phone/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/collective/__init__.py\", line 424, in minimize\r\n    fleet.main_program = self._try_to_compile(startup_program, main_program)\r\n  File \"/data/PaddleClas/tools/program.py\", line 363, in build\r\n    optimizer.minimize(fetchs['loss'][0])\r\n  File \"tools/train.py\", line 75, in main\r\n    config, train_prog, startup_prog, is_train=True)\r\n  File \"tools/train.py\", line 153, in <module>\r\n    main(args)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Failed to find dynamic library: libnccl.so ( libnccl.so: cannot open shared object file: No such file or directory ) \r\n Please specify its path correctly using following ways: \r\n Method. set environment variable LD_LIBRARY_PATH on Linux or DYLD_LIBRARY_PATH on Mac OS. \r\n For instance, issue command: export LD_LIBRARY_PATH=... \r\n Note: After Mac OS 10.11, using the DYLD_LIBRARY_PATH is impossible unless System Integrity Protection (SIP) is disabled. at (/paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:177)\r\n  [operator < gen_nccl_id > error]\r\n2020-08-22 16:45:39,064-ERROR: ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nERROR 2020-08-22 16:45:39,064 launch.py:284] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\n",
        "state": "closed",
        "user": "zhaoguoqing12",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-08-22T08:46:49+00:00",
        "updated_at": "2020-10-10T07:07:33+00:00",
        "closed_at": "2020-10-10T07:07:33+00:00",
        "comments_count": [
            "littletomatodonkey",
            "zhaoguoqing12"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 253,
        "title": "'ImageService' object has no attribute 'run_server'",
        "body": "命令\r\npython tools/serving/image_service_gpu.py inference/serving/ResNet50_vd/ppcls_model workdir 9292",
        "state": "closed",
        "user": "deep-practice",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-08-24T05:03:38+00:00",
        "updated_at": "2020-11-19T08:20:48+00:00",
        "closed_at": "2020-11-19T08:20:48+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 254,
        "title": "label smoothing在config文件中怎么设置呢",
        "body": "",
        "state": "closed",
        "user": "deep-practice",
        "closed_by": "deep-practice",
        "created_at": "2020-08-25T02:12:42+00:00",
        "updated_at": "2020-09-06T16:01:25+00:00",
        "closed_at": "2020-09-06T16:01:25+00:00",
        "comments_count": [
            "littletomatodonkey",
            "deep-practice",
            "deep-practice",
            "deep-practice",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 255,
        "title": "动态图加载预训练模型",
        "body": "目前，paddle放出来的预训练模型都是静态图的，如何在动态图模式中加载预训练模型?或者说有没有什么方法能把预训练模型转换为.pdparams 或 .pdopt文件？",
        "state": "closed",
        "user": "lwbmowgli",
        "closed_by": "lwbmowgli",
        "created_at": "2020-08-27T09:07:56+00:00",
        "updated_at": "2020-09-09T09:11:34+00:00",
        "closed_at": "2020-09-09T09:11:34+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 256,
        "title": "支持windows/cpu训练评估？",
        "body": "看到更新日志支持windows和cpu环境下的训练评估，直接调用train.py训练can't find PADDLE_TRAINER_ENDPOINTS",
        "state": "closed",
        "user": "key-1994",
        "closed_by": "key-1994",
        "created_at": "2020-08-28T03:58:53+00:00",
        "updated_at": "2020-09-03T07:08:40+00:00",
        "closed_at": "2020-09-03T07:08:40+00:00",
        "comments_count": [
            "littletomatodonkey",
            "key-1994"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 260,
        "title": "export_model",
        "body": "MobileNetV3系列的预训练模型格式不太一样，如何转为预测部署的固化模型",
        "state": "closed",
        "user": "key-1994",
        "closed_by": "key-1994",
        "created_at": "2020-09-01T09:10:38+00:00",
        "updated_at": "2020-09-03T07:11:20+00:00",
        "closed_at": "2020-09-03T07:11:20+00:00",
        "comments_count": [
            "littletomatodonkey",
            "key-1994",
            "littletomatodonkey",
            "key-1994"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 266,
        "title": "如何直接拿预训练模型进行预测？ --m参数应该填什么？",
        "body": "我看有一个10万分类的预训练模型，下载下来以后里面是一个ResNet50_vd_10w_pretrained文件夹，里面都是weights,mean,variance等文件，下载的其它ResNet50_vd_pretrained预训练模型里面也是这样， 看教程说分类预测框架有三种，下载的哪些预训练模型都没有MODEL文件，所以我猜应该是persistable 模型，可是不管是模型转换然后再预测还是直接 “训练引擎 + persistable 模型预测”，都有一个  “--m=模型名称 “参数，我填了ResNet50_vd_10w_pretrained就报错说KEY错误，里面的介绍是”model_file(简写 m)：模型文件路径，如 ./resnet50-vd/model“，可是persistable 模型里面根本就没有MODEL文件，要转换的还还是要输入\r\npython tools/export_model.py \\\r\n    --m=模型名称 \\\r\n    --p=persistable 模型路径 \\\r\n    --o=model和params保存路径\r\n\r\n我真不知道该怎么用预训练模型预测了。有大神来讲一下吗？",
        "state": "closed",
        "user": "Derek-Kun",
        "closed_by": "Derek-Kun",
        "created_at": "2020-09-07T08:05:02+00:00",
        "updated_at": "2020-09-08T08:11:56+00:00",
        "closed_at": "2020-09-08T08:11:56+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Derek-Kun",
            "littletomatodonkey",
            "Derek-Kun"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 264,
        "title": "灰度图可以训练么",
        "body": "可以使用灰度图像库训练么",
        "state": "closed",
        "user": "key-1994",
        "closed_by": "key-1994",
        "created_at": "2020-09-04T08:21:11+00:00",
        "updated_at": "2020-09-08T07:29:04+00:00",
        "closed_at": "2020-09-08T07:29:04+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 268,
        "title": "PaddlePaddle / PaddleClas 2020-09-08 09:14:59 ERROR: You are using paddlepaddle cpu version! Please try to install paddlepaddle-gpu to run model on GPU.",
        "body": "base nvidia-docker run PaddlePaddle / PaddleClas ,output this error.\r\n\r\nerror:\r\n```\r\n2020-09-08 09:14:59 INFO: classes_num : 7\r\n2020-09-08 09:14:59 INFO: epochs : 2\r\n2020-09-08 09:14:59 INFO: image_shape : [3, 224, 224]\r\n2020-09-08 09:14:59 INFO: ls_epsilon : 0.1\r\n2020-09-08 09:14:59 INFO: mode : train\r\n2020-09-08 09:14:59 INFO: model_save_dir : ./output/\r\n2020-09-08 09:14:59 INFO: pretrained_model : ./output/ResNet200_vd/best_model\r\n2020-09-08 09:14:59 INFO: save_interval : 1\r\n2020-09-08 09:14:59 INFO: topk : 2\r\n2020-09-08 09:14:59 INFO: total_images : 1635\r\n2020-09-08 09:14:59 INFO: use_mix : True\r\n2020-09-08 09:14:59 INFO: valid_interval : 1\r\n2020-09-08 09:14:59 INFO: validate : True\r\n2020-09-08 09:14:59 ERROR: You are using paddlepaddle cpu version! Please try to install paddlepaddle-gpu to run model on GPU.\r\nINFO 2020-09-08 01:15:03,836 utils.py:269] terminate all the procs\r\nERROR 2020-09-08 01:15:03,836 utils.py:413] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-09-08 01:15:06,839 utils.py:269] terminate all the procs\r\n```\r\n\r\npackage:\r\n```\r\npaddlepaddle         1.8.4       \r\npaddlepaddle-gpu     1.8.4.post97\r\n```\r\n\r\ninstalled gpu cuda9.0,cudnn7.6.5,nvidia driver.please help ,thanks.",
        "state": "closed",
        "user": "trollhe",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-08T01:19:26+00:00",
        "updated_at": "2020-10-10T07:05:25+00:00",
        "closed_at": "2020-10-10T07:05:25+00:00",
        "comments_count": [
            "trollhe",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 270,
        "title": "按照教程数据增广后，图片没有变化？",
        "body": "按照教程如下的代码，对图像进行变换：但变换完的图像无变化喔\r\nfrom ppcls.data.imaug import DecodeImage\r\nfrom ppcls.data.imaug import ResizeImage\r\nfrom ppcls.data.imaug import ToCHWImage\r\nfrom ppcls.data.imaug import GridMask\r\nfrom ppcls.data.imaug import transform\r\n\r\nsize = 224\r\n# 图像解码\r\ndecode_op = DecodeImage()\r\n# 图像随机裁剪\r\nresize_op = ResizeImage(size=(size, size))\r\n# 图像数据的重排\r\ntochw_op = ToCHWImage()\r\n# 使用GridMask图像增广方法\r\ngridmask_op = GridMask(d1=96, d2=224, rotate=1, ratio=0.6, mode=1, prob=0.8)\r\n\r\nops = [decode_op, resize_op, tochw_op, gridmask_op]\r\n# 图像路径\r\nimgs_dir = '/content/yolov5/inference/images'\r\nfnames = os.listdir(imgs_dir)\r\nfor f in fnames:\r\n    data = open(os.path.join(imgs_dir, f),'rb').read()\r\n    img = transform(data, ops)\r\n    img = img.transpose((1, 2, 0))",
        "state": "closed",
        "user": "Ultraopxt",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-08T02:19:07+00:00",
        "updated_at": "2020-10-10T07:05:37+00:00",
        "closed_at": "2020-10-10T07:05:37+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Ultraopxt",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 269,
        "title": "A UnicodeDecodeError when run the code:",
        "body": "The error are as flowing:\r\n\r\nUnicodeDecodeError                        Traceback (most recent call last)\r\n<ipython-input-13-b251ca09833e> in <module>()\r\n     18 fnames = os.listdir(imgs_dir)\r\n     19 for f in fnames:\r\n---> 20     data = open(os.path.join(imgs_dir, f)).read()\r\n     21     img = transform(data, ops)\r\n\r\n/usr/lib/python3.6/codecs.py in decode(self, input, final)\r\n    319         # decode input (taking the buffer into account)\r\n    320         data = self.buffer + input\r\n--> 321         (result, consumed) = self._buffer_decode(data, self.errors, final)\r\n    322         # keep undecoded input until the next call\r\n    323         self.buffer = data[consumed:]\r\n\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte",
        "state": "closed",
        "user": "Ultraopxt",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-08T01:56:48+00:00",
        "updated_at": "2020-09-24T05:10:03+00:00",
        "closed_at": "2020-09-24T05:10:03+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 272,
        "title": "动态图中加载模型报错",
        "body": "![image](https://user-images.githubusercontent.com/32731935/92579338-a6d6ed00-f2bf-11ea-8234-74ab58996234.png)\r\n报错信息如上图所示，采用的模型是飞桨官方下载的模型，未进行任何改动，尝试了HRNet以及Resnet，均出现如上报错。\r\n[这个是我在aistudio平台上的项目地址](https://aistudio.baidu.com/bdvgpu32g/user/228777/883366/notebooks/883366.ipynb)\r\n加载模型的方法我参考了[paddleclas](https://gitee.com/paddlepaddle/PaddleClas/blob/dygraph/tools/infer/infer.py)中加载的方法。请您看一下，谢谢。",
        "state": "closed",
        "user": "lwbmowgli",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-09T09:20:49+00:00",
        "updated_at": "2020-09-24T05:06:53+00:00",
        "closed_at": "2020-09-24T05:06:53+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": [
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 276,
        "title": "ppcls/data/reader.py partial_reader()函数bug",
        "body": "if params['mode'] != \"test\" and len(full_lines) < batch_size:\r\n        raise SampleNumException('', len(full_lines), batch_size)\r\n对于partial_reader，其读取的数量并不需要比batch_size大吧，drop_last是从所有reader里面读剩下的不足一个batch_size的才丢弃，对于每个reader并不要求都大于batch_size，而且即便partial_reader读取的数量大于batch_size，也有可能会发生丢弃\r\n\r\n此外，在分布式训练，如果开的number_worker比较大的情况下，且lines较小的情况下，有可能触发这个异常，导致bug",
        "state": "closed",
        "user": "hutao568",
        "closed_by": "hutao568",
        "created_at": "2020-09-16T11:29:30+00:00",
        "updated_at": "2020-09-21T13:20:54+00:00",
        "closed_at": "2020-09-21T13:20:44+00:00",
        "comments_count": [
            "littletomatodonkey",
            "hutao568"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 279,
        "title": "请问这个ResNet50_vd_ssld_v2模型的配置文件在哪里呢？",
        "body": "预训练模型中提供了 ResNet50_vd_ssld_v2 模型，但是我在配置文件夹中找不到这个文件。",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2020-09-17T07:33:28+00:00",
        "updated_at": "2020-09-24T08:28:31+00:00",
        "closed_at": "2020-09-24T08:28:31+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yeyupiaoling",
            "littletomatodonkey",
            "yeyupiaoling",
            "littletomatodonkey",
            "yeyupiaoling"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 282,
        "title": "Provide full log of DyGraph Mobilenet training on flowers dataset",
        "body": "@littletomatodonkey  Could you provide full log of DyGraph Mobilenet training on flowers dataset as mentioned in https://github.com/PaddlePaddle/models/issues/4849 for download ? We are interested in MobilenetV1 but also other versions.",
        "state": "closed",
        "user": "arlesniak",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-17T14:42:11+00:00",
        "updated_at": "2020-09-24T05:06:23+00:00",
        "closed_at": "2020-09-24T05:06:23+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 280,
        "title": "请问 dygraph 用的paddle版本是什么呐，必须使用编译版本的么？",
        "body": "hi，问个简单的问题，用develop和paddle 1.8.4 时候LinearLrWarmup这些 paddle.optimizer.lr_scheduler还有ParallelEnv都没有呐，必须要使用编译版本的paddle么",
        "state": "closed",
        "user": "ARQlalala",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-17T12:45:32+00:00",
        "updated_at": "2020-09-24T05:06:35+00:00",
        "closed_at": "2020-09-24T05:06:35+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ARQlalala",
            "littletomatodonkey",
            "ARQlalala",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 289,
        "title": "加载预训练参数（ghostnet）",
        "body": "我最近在使用ghostnet网络模型的时候，加载预训练参数一直出现问题。\r\n预训练参数是 GhostNet_x1_3 下载位置在： https://github.com/PaddlePaddle/PaddleClas\r\n使用的代码来自 https://github.com/PaddlePaddle/PaddleClas/tree/master/ppcls/modeling/architectures\r\n1. 对照修改 了 scale , 尝试修改 了 gn 或者bn ,\r\n2. 之后又修改了加载方式，尝试了包括 load_vars ,和load 函数，因为是二进制.pdparams文件还修改了 filename参数\r\n\r\n问题是，上述修改方式均无效，无论怎么修改，所有训练参数包括 ‘’开头的 一个单卷积‘’ 都加载不进去\r\n希望能够提供一些帮助，或者将预训练参数改为文件夹形式，但文件参数确实不好加载",
        "state": "closed",
        "user": "kymoran3169",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-23T03:05:58+00:00",
        "updated_at": "2020-10-10T07:04:58+00:00",
        "closed_at": "2020-10-10T07:04:58+00:00",
        "comments_count": [
            "littletomatodonkey",
            "kymoran3169",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 290,
        "title": "预测速度很不正常",
        "body": "在aistudio上使用自制数据训练 ResNet50_vd 模型，转换为reference模型后测试\r\n```py\r\npython tools/predict.py \\\r\n    -m ./model/ResNet50_vd/model \\\r\n    -p ./model/ResNet50_vd/params \\\r\n    -i  ./test/1.png \\\r\n    --use_gpu=False \\\r\n    --use_tensorrt=False  \\\r\n    --model_name=ResNet50_vd\r\n```\r\nCPU：\r\n```\r\n2020-09-23 11:35:14,858-INFO: preprocess use time: 4.0798187255859375\r\n2020-09-23 11:35:15,075-INFO: total use time: 221.3459014892578\r\n2020-09-23 11:35:15,075-INFO: class: 2\r\n2020-09-23 11:35:15,075-INFO: score: 0.9998900890350342\r\n```\r\nGPU：\r\n```\r\n2020-09-23 11:30:16,196-INFO: preprocess use time: 4.707574844360352\r\n2020-09-23 11:30:18,009-INFO: total use time: 1818.0217742919922\r\n2020-09-23 11:30:18,009-INFO: class: 2\r\n2020-09-23 11:30:18,009-INFO: score: 0.9998900890350342\r\n```\r\n\r\n1. 为啥GPU比CPU慢，而且慢的出奇\r\n2. 必须用tensorrt才能提高速度吗？\r\n3. windows上tensorrt效果如何，有没测试\r\n",
        "state": "closed",
        "user": "Fauny",
        "closed_by": "Fauny",
        "created_at": "2020-09-23T03:38:15+00:00",
        "updated_at": "2020-09-24T07:46:35+00:00",
        "closed_at": "2020-09-24T07:46:35+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Fauny"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 293,
        "title": "图像增广方式太少了",
        "body": "8个图像增广方式会不会比较少。可不可以用albumentations的方式去进行增广",
        "state": "closed",
        "user": "Smalltiger729",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-26T03:37:32+00:00",
        "updated_at": "2020-10-10T07:07:45+00:00",
        "closed_at": "2020-10-10T07:07:45+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 297,
        "title": "按文档“预测引擎 + inference 模型预测”执行core dump了",
        "body": "按  https://github.com/PaddlePaddle/PaddleClas/blob/master/docs/zh_CN/extension/paddle_inference.md  文档：\r\npython tools/export_model.py --m=ResNet50_vd --p=./pretrained/ResNet50_vd_pretrained --o=model/ResNet50_vd  执行是成功的，生成了相应文件\r\n但接下来：\r\n\r\n(pytorch_latest_p36) ubuntu@ip-172-19-14-95:~/PaddleClas$ python tools/infer/predict.py -i=./dataset/flowers102/jpg/image_08186.jpg -m=./model/ResNet50_vd/model -p=./model/ResNet50_vd/params --use_gpu=1  --use_tensorrt=True\r\nTraceback (most recent call last):\r\n  File \"tools/infer/predict.py\", line 156, in <module>\r\n    main()\r\n  File \"tools/infer/predict.py\", line 110, in main\r\n    predictor = create_predictor(args)\r\n  File \"tools/infer/predict.py\", line 66, in create_predictor\r\n    predictor = create_paddle_predictor(config)\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<char const*>(char const*&&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int)\r\n2   paddle::framework::ir::PassRegistry::Get(std::string const&) const\r\n3   paddle::inference::analysis::IRPassManager::CreatePasses(paddle::inference::analysis::Argument*, std::vector<std::string, std::allocator<std::string> > const&)\r\n4   paddle::inference::analysis::IRPassManager::IRPassManager(paddle::inference::analysis::Argument*)\r\n5   paddle::inference::analysis::IrAnalysisPass::RunImpl(paddle::inference::analysis::Argument*)\r\n6   paddle::inference::analysis::Analyzer::RunAnalysis(paddle::inference::analysis::Argument*)\r\n7   paddle::AnalysisPredictor::OptimizeInferenceProgram()\r\n8   paddle::AnalysisPredictor::PrepareProgram(std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n9   paddle::AnalysisPredictor::Init(std::shared_ptr<paddle::framework::Scope> const&, std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n10  std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig, (paddle::PaddleEngineKind)2>(paddle::AnalysisConfig const&)\r\n11  std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig>(paddle::AnalysisConfig const&)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Pass tensorrt_subgraph_pass has not been registered at (/paddle/paddle/fluid/framework/ir/pass.h:201)\r\n\r\n如果把use_tensorrt设为False则core dump\r\n\r\n(pytorch_latest_p36) ubuntu@ip-172-19-14-95:~/PaddleClas$ python tools/infer/predict.py -i=./dataset/flowers102/jpg/image_08186.jpg -m=./model/ResNet50_vd/model -p=./model/ResNet50_vd/params --use_gpu=1  --use_tensorrt=False\r\nSegmentation fault (core dumped)\r\n\r\n请教下如何能完成文档示例呢，谢谢。  如果需要更多信息，请明示",
        "state": "closed",
        "user": "xieliang",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-09-29T08:08:10+00:00",
        "updated_at": "2020-10-10T07:08:09+00:00",
        "closed_at": "2020-10-10T07:08:09+00:00",
        "comments_count": [
            "xieliang",
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 298,
        "title": "如何直接用预训练模型resnet50_vd_ssld进行评估（eval.py）",
        "body": "    下载预训练模型之后想要修改eval.py直接评估预训练模型，看它在ImageNet上的准确率，但是运行过程中发现文件夹下没有.pdparams文件，所以想问下要怎么把预训练模型tar转换成.pdparams。\r\n    还是说Resnet50_vd系列的预训练模型只能finetune，不能转换成.pdparams进行预测或评估。谢谢",
        "state": "closed",
        "user": "yhhu99",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-04T04:18:01+00:00",
        "updated_at": "2020-10-10T07:04:41+00:00",
        "closed_at": "2020-10-10T07:04:41+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yhhu99"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 302,
        "title": "paddleclas怎么进行单卡训练呢？",
        "body": "我在服务器终端跑flowers102数据集。\r\nexport PYTHONPATH=$PWD:$PYTHONPATH\r\npython -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/quick_start/ResNet50_vd.yaml\r\n输入这样的代码后出现：\r\n\r\n\r\n\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nPreconditionNotMetError: The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; at (/paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:194)\r\n  [operator < gen_nccl_id > error]\r\nINFO 2020-10-10 14:20:43,709 utils.py:269] terminate all the procs\r\nERROR 2020-10-10 14:20:43,710 utils.py:413] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-10-10 14:20:46,713 utils.py:269] terminate all the procs\r\n我查了一下，可能需要我下载nccl。\r\n\r\n\r\n\r\n不过我其实只要单卡训练就好了，我该输入什么样的代码，或者进行怎么样的设置呢？\r\n",
        "state": "closed",
        "user": "Terrylululu",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-10T06:36:42+00:00",
        "updated_at": "2020-11-19T08:19:02+00:00",
        "closed_at": "2020-11-19T08:19:02+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Terrylululu",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 309,
        "title": "解压后的预训练模型怎么转inference模型呢？",
        "body": "[预训练模型好像是参数模型，我按照教程的方式转换模型，但是报错：没有.pdparams文件，要怎么解决呢？谢谢]\r\n![error](https://user-images.githubusercontent.com/69721135/95965985-2f0b5d80-0e3d-11eb-99f4-e31cd68d0a4a.png)\r\n",
        "state": "closed",
        "user": "yhhu99",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-14T08:49:25+00:00",
        "updated_at": "2020-10-16T01:56:06+00:00",
        "closed_at": "2020-10-16T01:56:06+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yhhu99",
            "littletomatodonkey",
            "yhhu99"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 311,
        "title": "在训练过程中报drop_last相关的错误",
        "body": " - PaddlePaddle 1.8.4.post107\r\n - Python 3.7\r\n - Ubuntu 16.04\r\n\r\n\r\n在训练过程一开始我是正常的，后面换到量化训练之后就报错了，我看PaddleCls中的数据读取源码，drop_last=True的 。\r\n```\r\n    return_merged=return_merged)\r\n  File \"/home/test/anaconda3/envs/PaddlePaddle/lib/python3.7/site-packages/paddle/fluid/executor.py\", line 876, in _run_parallel\r\n    exe.feed_tensors_into_local_scopes(res)\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::framework::ParallelExecutor::FeedTensorsIntoLocalScopes(std::vector<std::unordered_map<std::string, paddle::framework::LoDTensor, std::hash<std::string>, std::equal_to<std::string>, std::allocator<std::pair<std::string const, paddle::framework::LoDTensor> > >, std::allocator<std::unordered_map<std::string, paddle::framework::LoDTensor, std::hash<std::string>, std::equal_to<std::string>, std::allocator<std::pair<std::string const, paddle::framework::LoDTensor> > > > > const&)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nUnimplementedError: The feed data number 2 does not match the device number 1. If you are using DataLoader to feed data, this may be because you set drop_last=False in training network. Currently, drop_last=False for DataLoader is not supported for training network. Please set drop_last=True when defining DataLoader.\r\n  [Hint: Expected tensors.size() == member_->local_scopes_.size(), but received tensors.size():2 != member_->local_scopes_.size():1.] at (/paddle/paddle/fluid/framework/parallel_executor.cc:852)\r\n```\r\n\r\n量化训练代码如下：\r\n```python\r\n        # 执行量化训练\r\n        quant_program = slim.quant.quant_aware(train_prog, exe.place, for_test=False)\r\n        # 评估量化的结果\r\n        val_quant_program = slim.quant.quant_aware(valid_prog, exe.place, for_test=True)\r\n\r\n        fetch_list = [f[0] for f in train_fetchs.values()]\r\n        metric_list = [f[1] for f in train_fetchs.values()]\r\n        for i in range(5):\r\n            for idx, batch in enumerate(train_dataloader()):\r\n                metrics = exe.run(program=quant_program, feed=batch, fetch_list=fetch_list)\r\n                for i, m in enumerate(metrics):\r\n                    metric_list[i].update(np.mean(m), len(batch[0]))\r\n                fetchs_str = ''.join([str(m.value) + ' ' for m in metric_list])\r\n\r\n                if idx % 10 == 0:\r\n                    logger.info(\"quant train : \" + fetchs_str)\r\n\r\n        fetch_list = [f[0] for f in valid_fetchs.values()]\r\n        metric_list = [f[1] for f in valid_fetchs.values()]\r\n        for idx, batch in enumerate(valid_dataloader()):\r\n            metrics = exe.run(program=val_quant_program, feed=batch, fetch_list=fetch_list)\r\n            for i, m in enumerate(metrics):\r\n                metric_list[i].update(np.mean(m), len(batch[0]))\r\n            fetchs_str = ''.join([str(m.value) + ' ' for m in metric_list])\r\n\r\n            if idx % 10 == 0:\r\n                logger.info(\"quant valid: \" + fetchs_str)\r\n\r\n        # 保存量化训练模型\r\n        float_prog, int8_prog = slim.quant.convert(val_quant_program, exe.place, save_int8=True)\r\n        fluid.io.save_inference_model(dirname=args.output_path,\r\n                                      feeded_var_names=['feed_image'],\r\n                                      target_vars=out,\r\n                                      executor=exe,\r\n                                      main_program=float_prog,\r\n                                      model_filename='__model__',\r\n                                      params_filename='__params__')\r\n```\r\n\r\n\r\n\r\n如果是使用单卡训练，正常训练没多久就报错了\r\n```\r\n   partial_reader(params, full_lines, part_id, part_num, batch_size))\r\n  File \"/home/test/anaconda3/envs/PaddlePaddle/lib/python3.7/site-packages/ppcls/data/reader.py\", line 188, in partial_reader\r\n    raise SampleNumException('', len(full_lines), batch_size)\r\nppcls.data.reader.SampleNumException: \r\nError: The number of the whole data (18) is smaller than the batch_size (64), and drop_last is turnning on, so nothing  will feed in program, Terminated now. Please reset batch_size to a smaller number or feed more data!\r\n\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 181, in <module>\r\n    main(args)\r\n  File \"train.py\", line 122, in main\r\n    top1_acc = program.run(valid_dataloader, exe, compiled_valid_prog, valid_fetchs, epoch_id, 'valid', config)\r\n  File \"/home/test/yeyupiaoling/TablewareDetection/utils/program.py\", line 384, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/home/test/anaconda3/envs/PaddlePaddle/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 1104, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------------\r\nC++ Call Stacks (More useful to developers):\r\n--------------------------------------------\r\n0   std::string paddle::platform::GetTraceBackString<std::string const&>(std::string const&, char const*, int)\r\n1   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n2   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<unsigned long>, std::__future_base::_Result_base::_Deleter>, unsigned long> >::_M_invoke(std::_Any_data const&)\r\n5   std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&)\r\n6   ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nError: Blocking queue is killed because the data reader raises an exception\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] at (/paddle/paddle/fluid/operators/reader/blocking_queue.h:141)\r\n```",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2020-10-17T02:09:44+00:00",
        "updated_at": "2020-10-19T03:18:57+00:00",
        "closed_at": "2020-10-19T03:18:57+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yeyupiaoling"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 313,
        "title": "在训练结束后，添加一个softmax输出的结果是BOOL？",
        "body": "\r\n```python\r\n    print(out)\r\n    out = fluid.layers.softmax(out)\r\n    print(out)\r\n```\r\n\r\n输出结果如下，前面一个是模型的输出，后是我添加的一个softmax，为啥softmax输出会变成这样子呢？不应该是更fc输出的维度和类型一样的吗？\r\n```\r\nname: \"fc_0.tmp_1\"\r\ntype {\r\n  type: LOD_TENSOR\r\n  lod_tensor {\r\n    tensor {\r\n      data_type: FP32\r\n      dims: -1\r\n      dims: 7\r\n    }\r\n    lod_level: 0\r\n  }\r\n}\r\npersistable: false\r\n\r\nname: \"softmax_0.tmp_0\"\r\ntype {\r\n  type: LOD_TENSOR\r\n  lod_tensor {\r\n    tensor {\r\n      data_type: BOOL\r\n      dims: 0\r\n    }\r\n    lod_level: 0\r\n  }\r\n}\r\npersistable: false\r\n```",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2020-10-19T03:55:59+00:00",
        "updated_at": "2020-10-19T09:33:50+00:00",
        "closed_at": "2020-10-19T09:33:49+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yeyupiaoling",
            "littletomatodonkey",
            "Margrate",
            "yeyupiaoling",
            "baiyfbupt",
            "yeyupiaoling",
            "baiyfbupt",
            "yeyupiaoling",
            "yeyupiaoling"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 316,
        "title": "请问HS-ResNet在哪里？model文件中没有找到",
        "body": "",
        "state": "closed",
        "user": "Margrate",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-10-19T08:23:32+00:00",
        "updated_at": "2022-03-16T04:06:52+00:00",
        "closed_at": "2022-03-16T04:06:37+00:00",
        "comments_count": [
            "littletomatodonkey",
            "CoinCheung",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 323,
        "title": "PaddleClas是否支持多标签",
        "body": "PaddleClas是否支持多标签，有没有示例",
        "state": "closed",
        "user": "yazone",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-21T12:13:37+00:00",
        "updated_at": "2020-11-19T08:15:34+00:00",
        "closed_at": "2020-11-19T08:15:34+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yazone",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 321,
        "title": "关于EfficientNetB4的configs配置",
        "body": "在configs/EfficientNet文件夹目录下没有EfficientNetB4.yaml，而用EfficientNetB0的配置文件测试得到的准确率和官方提供的不太一样，所以想问下EfficientNetB4的配置应该是怎么样的呢？",
        "state": "closed",
        "user": "yhhu99",
        "closed_by": "yhhu99",
        "created_at": "2020-10-21T09:17:05+00:00",
        "updated_at": "2020-10-24T09:49:45+00:00",
        "closed_at": "2020-10-24T09:49:45+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yhhu99",
            "littletomatodonkey",
            "yhhu99",
            "littletomatodonkey",
            "yhhu99",
            "littletomatodonkey",
            "yhhu99",
            "yhhu99",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 326,
        "title": "tensorrt报错",
        "body": "这个错误是怎么解决\r\n\r\nTensorRT dynamic library (libnvinfer.so) that Paddle depends on is not configured correctly. (error code is libnvinfer.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if TensorRT is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure TensorRT dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX;TensorRT dynamic library (libnvinfer.so) that Paddle depends on is not configured correctly. (error code is libnvinfer.so: cannot open shared object file: No such file or directory)\r\n",
        "state": "closed",
        "user": "CC-xiao",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-22T01:17:30+00:00",
        "updated_at": "2020-11-19T08:18:04+00:00",
        "closed_at": "2020-11-19T08:18:04+00:00",
        "comments_count": [
            "littletomatodonkey",
            "wangludewdrop",
            "littletomatodonkey",
            "chlyzzo",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 330,
        "title": "Nccl error, unhandled cuda error",
        "body": "您好，请教一下，在初始化分布式训练中报错如下，用的是最新的2.0beta版本的paddle：\r\n有遇到同样的错误嘛，有什么解决办法吗\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nExternalError:  Nccl error, unhandled cuda error  (at /paddle/paddle/fluid/platform/collective_helper.cc:83)\r\n\r\nTraceback (most recent call last):\r\n  File \"./thirdparty/paddle_moco_dygraph/tools/train.py\", line 160, in <module>\r\n    main(args)\r\n  File \"./thirdparty/paddle_moco_dygraph/tools/train.py\", line 112, in main\r\n    strategy = paddle.distributed.init_parallel_env()\r\n  File \"/opt/_internal/cpython-2.7.15-ucs4/lib/python2.7/site-packages/paddle/distributed/parallel.py\", line 134, in init_parallel_env\r\n    parallel_helper._init_parallel_ctx()\r\n  File \"/opt/_internal/cpython-2.7.15-ucs4/lib/python2.7/site-packages/paddle/fluid/dygraph/parallel_helper.py\", line 42, in _init_parallel_ctx\r\n    __parallel_ctx__clz__.init()\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::imperative::NCCLParallelContext::Init()\r\n1   paddle::platform::NCCLCommContext::CreateNCCLComm(ncclUniqueId*, int, int, int, int)\r\n2   paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int)\r\n3   std::string paddle::platform::GetTraceBackString<char const*>(char const*&&, char const*, int)\r\n4   paddle::platform::GetCurrentTraceBackString()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nExternalError:  Nccl error, unhandled cuda error  (at /paddle/paddle/fluid/platform/collective_helper.cc:83)",
        "state": "closed",
        "user": "ARQlalala",
        "closed_by": "ARQlalala",
        "created_at": "2020-10-22T08:52:41+00:00",
        "updated_at": "2020-10-22T13:48:32+00:00",
        "closed_at": "2020-10-22T13:48:32+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ARQlalala",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 329,
        "title": "HSB-ResNet的问题",
        "body": "论文和公众号已经发出来链接了，是不是应该把模型发出来了",
        "state": "closed",
        "user": "lxk767363331",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-10-22T08:41:59+00:00",
        "updated_at": "2022-03-16T04:06:52+00:00",
        "closed_at": "2022-03-16T04:06:42+00:00",
        "comments_count": [
            "littletomatodonkey",
            "MARD1NO",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 338,
        "title": "HS-ResNet的问题",
        "body": "HS-ResNet模型开源了吗，我在model文件里面没有找到，希望说明一下",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "weisy11",
        "created_at": "2020-10-23T01:54:41+00:00",
        "updated_at": "2022-03-16T06:16:45+00:00",
        "closed_at": "2022-03-16T06:16:45+00:00",
        "comments_count": [
            "littletomatodonkey",
            "qdd1234",
            "cuicheng01",
            "cuicheng01",
            "qdd1234",
            "cuicheng01",
            "Margrate",
            "qdd1234",
            "cuicheng01",
            "cuicheng01",
            "qdd1234",
            "qdd1234",
            "qdd1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 356,
        "title": "能给个yaml的参数大全吗？",
        "body": "如题，比如那个resize_short,直接看谁看得懂怎么resize的啊",
        "state": "closed",
        "user": "dearsar",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-10-30T14:07:34+00:00",
        "updated_at": "2020-11-19T08:18:07+00:00",
        "closed_at": "2020-11-19T08:18:07+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 359,
        "title": "Windows下使用c++预测库，cpu无法完成预测，mkldnn",
        "body": "win下用c++的预测库，是不是不弄用cpu预测，生成exe后使用cpu预测，只提示两个加速，但是没有结果\r\n\r\n![0Q}41%$0GP MLAIJJCDED_O](https://user-images.githubusercontent.com/49190204/97827269-b93d3800-1cfe-11eb-9a65-403601636296.png)\r\n\r\n",
        "state": "closed",
        "user": "Attackzzw",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-02T03:30:00+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:44+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Attackzzw",
            "Attackzzw",
            "Attackzzw",
            "jiachen0212",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 366,
        "title": "训练自己的backbone",
        "body": "paddleclas如何训练自己的backbone？",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-04T12:55:30+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:45+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 370,
        "title": "参照“30分钟玩转PaddleClas”，加载官网下载的预训练模型报错",
        "body": "参考官网的快速上手：https://paddleclas.readthedocs.io/zh_CN/latest/tutorials/quick_start.html\r\n在执行“3.2 模型微调-基于ResNet50_vd预训练模型”时，报错：\r\n2020-11-05 09:26:34 INFO: Loading parameters from ./pretrained/ResNet50_vd_pretrained...\r\n2020-11-05 09:26:34,767-WARNING: ./pretrained/ResNet50_vd_pretrained.pdparams not found, try to load model file saved with [ save_params, save_persistables, save_vars ]\r\n\r\n问题可能原因：\r\n按照步骤2.1，下载的预训练模型解压后是一个文件夹，文件夹中包含大量文件，但没有后缀为.pdparams的文件。\r\n而PaddleClas需要的文件是后缀为.pdparams的文件，并且PaddleClas训练完成后，保存的模型文件也是.pdparams的文件。\r\n会不会是官网的模型文件，和PaddleClas需要的模型文件不兼容？需要将官网模型文件转换成.pdparams的文件？",
        "state": "closed",
        "user": "GaoXianlin",
        "closed_by": "GaoXianlin",
        "created_at": "2020-11-05T01:33:13+00:00",
        "updated_at": "2020-11-05T01:41:02+00:00",
        "closed_at": "2020-11-05T01:41:02+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 367,
        "title": "AttributeError: module 'paddle' has no attribute 'enable_static'",
        "body": "Hi,\r\n\r\nI followed the tutorial here\r\n[https://github.com/PaddlePaddle/PaddleClas/blob/master/docs/en/tutorials/quick_start_en.md](url)\r\n\r\nWhen I executed \r\n`export CUDA_VISIBLE_DEVICES=0\r\npython -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/quick_start/ResNet50_vd_finetune.yaml`\r\n\r\nIt shows paddle has no attribute enable_static. \r\n\r\nI am on Python 3.6.11 and Paddle 1.8.4. It seems that the piece of code is whin Paddle 2.0.\r\n\r\nI would like to program in Paddle 1.8, but there no corresponding branch in repo. Is there some codes written in Paddle 1.8? Many thanks\r\n\r\n```\r\ncluster_node_ips: 127.0.0.1\r\nlog_dir: None\r\nlog_level: 20\r\nnode_ip: 127.0.0.1\r\nprint_config: True\r\nselected_gpus: 0\r\nstarted_port: None\r\ntraining_script: tools/train.py\r\ntraining_script_args: ['-c', './configs/quick_start/ResNet50_vd_finetune.yaml']\r\nuse_paddlecloud: False\r\n\r\nINFO 2020-11-04 23:34:17,991 launch.py:210] get cluster from args:job_server:None pods:[\"rank:0 id:None addr:127.0.0.1 port:None visible_gpu:[] trainers:['gpu:[0] endpoint:127.0.0.1:55899 rank:0']\"] job_stage_flag:None hdfs:None\r\nINFO 2020-11-04 23:34:17,992 utils.py:367] start trainer proc:['/home/ecom/liuxiang12/env/tf_yolo/bin/python', '-u', 'tools/train.py', '-c', './configs/quick_start/ResNet50_vd_finetune.yaml'] env:{'FLAGS_selected_gpus': '0', 'PADDLE_TRAINER_ID': '0', 'PADDLE_CURRENT_ENDPOINT': '127.0.0.1:55899', 'PADDLE_TRAINERS_NUM': '1', 'PADDLE_TRAINER_ENDPOINTS': '127.0.0.1:55899'}\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 158, in <module>\r\n    paddle.enable_static()\r\nAttributeError: module 'paddle' has no attribute 'enable_static'\r\nINFO 2020-11-04 23:34:24,005 utils.py:269] terminate all the procs\r\nERROR 2020-11-04 23:34:24,005 utils.py:413] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2020-11-04 23:34:27,008 utils.py:269] terminate all the procs\r\n```\r\n\r\n",
        "state": "closed",
        "user": "p1n0cch10",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-04T15:38:36+00:00",
        "updated_at": "2020-11-04T16:04:30+00:00",
        "closed_at": "2020-11-04T16:04:30+00:00",
        "comments_count": [
            "littletomatodonkey",
            "p1n0cch10",
            "littletomatodonkey",
            "p1n0cch10",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 368,
        "title": "How can I load ppcls.pdmodel, ppcls.pdopt, and ppcls.pdparams for prediction for a single image.",
        "body": "Hi,\r\nI finished finetuing a classification network following here\r\n[https://github.com/PaddlePaddle/PaddleClas/blob/master/docs/en/tutorials/quick_start_en.md](url)\r\nwith the command\r\n```\r\nexport CUDA_VISIBLE_DEVICES=0\r\npython -m paddle.distributed.launch \\\r\n    --selected_gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/quick_start/ResNet50_vd_finetune.yaml\r\n```\r\n\r\nThe outputs are three ppcls files. \r\n\r\nThen I would like to predict the class of a single test image, but did not find an example for it.\r\nThe tutorial here shows how to use the ppcls files as checkpoint for finetuning, and use the pretrained model for prediction.\r\n[https://github.com/PaddlePaddle/PaddleClas/blob/master/docs/en/extension/paddle_inference_en.md](url)\r\n\r\nAs I only have the ppcls files, how can I use it for prediction? Many thanks",
        "state": "closed",
        "user": "p1n0cch10",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-04T16:09:07+00:00",
        "updated_at": "2020-11-05T02:16:52+00:00",
        "closed_at": "2020-11-05T02:16:52+00:00",
        "comments_count": [
            "littletomatodonkey",
            "p1n0cch10",
            "littletomatodonkey",
            "p1n0cch10",
            "p1n0cch10"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 375,
        "title": "Do I need to revise the field total_images?",
        "body": "Hi I am using ResNet50_vd_finetune.yaml for finetuning my data.\r\n\r\nMy data has two classes, 10K images for training and 1K images for val.\r\n\r\nI change the classes_num to 2. And do I need to revised the field total_images?\r\n\r\nIf so, is the value to be 11K or 10K? Many thanks.",
        "state": "closed",
        "user": "p1n0cch10",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-06T11:51:17+00:00",
        "updated_at": "2020-11-07T14:08:42+00:00",
        "closed_at": "2020-11-07T14:08:42+00:00",
        "comments_count": [
            "p1n0cch10",
            "littletomatodonkey",
            "p1n0cch10"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 374,
        "title": "finetune训练时，节点初始化问题",
        "body": "InvalidArgumentError: The Tensor in the conv2d Op's Input Variable Input(feed_image) is not initialized.\r\n  [Hint: Expected t->IsInitialized() == true, but received t->IsInitialized():0 != true:1.] at (/paddle/paddle/fluid/framework/operator.cc:1289)\r\n该怎么解决呢？",
        "state": "closed",
        "user": "junjun210",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-06T06:55:56+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:46+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 381,
        "title": "我想添加自己的loss函数",
        "body": "假设alpha是[0.1, 0.6, 0.3]的list，shape=[3]\r\n而idx是paddle静态图的tensor--[ [2], [0], [1] ],shape=[-1, 1]\r\n我想生成一个新的list，用普通python或者numpy的话，语法是beta = alpha[ idx ] = [ [0.3], [0.1], [0.6] ]\r\n而用paddle应该怎么处理呢？ 生成的beta可以是paddle.tensor类型，shape=[-1, 1]",
        "state": "closed",
        "user": "dearsar",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-09T08:51:50+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:46+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 383,
        "title": "HS-ResNet中HSB计算复杂度问题",
        "body": "\r\n![image](https://user-images.githubusercontent.com/68497831/98561922-678b4380-22e4-11eb-8c08-243e89029a57.png)\r\n\r\n> 您好，我想问一下，你这边推导计算是不是有错误，是不是括号部分是不是应该是如下图所示这个？您证明了计算复杂度低于普通卷积但你的最终Params却比ResNet还要高？\r\n![image](https://user-images.githubusercontent.com/68497831/98561809-462a5780-22e4-11eb-8584-e37544d260a0.png)\r\n",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "weisy11",
        "created_at": "2020-11-09T15:37:00+00:00",
        "updated_at": "2022-03-16T06:16:45+00:00",
        "closed_at": "2022-03-16T06:16:45+00:00",
        "comments_count": [
            "cuicheng01",
            "qdd1234",
            "cuicheng01",
            "qdd1234",
            "cuicheng01",
            "qdd1234",
            "cuicheng01",
            "qdd1234",
            "qdd1234",
            "cuicheng01",
            "qdd1234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 389,
        "title": "数据格式问题Error: Variable value (label) of OP(fluid.layers.cross_entropy) expected >= 0 and < 5, but got 5.",
        "body": "OS：Windows\r\npaddlepaddle-gpu：2.0.0rc0.post100\r\n\r\n数据集：\r\n![image](https://user-images.githubusercontent.com/26674015/98880566-feadf200-24c2-11eb-9be0-6b1b161b963e.png)\r\n\r\ntrain_list.txt\r\n\r\n> 1_0.jpg 1\r\n> 1_1.jpg 1\r\n> 1_10.jpg 1\r\n> 1_100.jpg 1\r\n> 1_101.jpg 1\r\n> 1_102.jpg 1\r\n> 1_104.jpg 1\r\n> ...\r\n\r\nval_list:\r\n\r\n> 1_124.jpg 1\r\n> 1_30.jpg 1\r\n> 1_106.jpg 1\r\n> 1_202.jpg 1\r\n> 1_8.jpg 1\r\n> 1_2.jpg 1\r\n> 1_6.jpg 1\r\n> ...\r\n\r\nconfig.yaml\r\n\r\n> mode: 'train'\r\n> use_gpu: false\r\n> ARCHITECTURE:\r\n>     name: \"MobileNetV2_x0_5\"\r\n> \r\n> pretrained_model: \"./models/MobileNetV2_x0_5_pretrained\"\r\n> model_save_dir: \"./output/\"\r\n> classes_num: 5\r\n> total_images: 1832\r\n> save_interval: 1\r\n> validate: True\r\n> valid_interval: 1\r\n> epochs: 10\r\n> topk: 3\r\n> image_shape: [3, 224, 224]\r\n> \r\n> \r\n> LEARNING_RATE:\r\n>     function: 'Cosine'\r\n>     params:\r\n>         lr: 0.005\r\n> \r\n> OPTIMIZER:\r\n>     function: 'Momentum'\r\n>     params:\r\n>         momentum: 0.9\r\n>     regularizer:\r\n>         function: 'L2'\r\n>         factor: 0.00003\r\n> \r\n> TRAIN:\r\n>     batch_size: 8\r\n>     num_workers: 2\r\n>     file_list: \"./dataset/20201111/train_list.txt\"\r\n>     data_dir: \"./dataset/20201111/full\"\r\n>     shuffle_seed: 0\r\n>     transforms:\r\n>         - DecodeImage:\r\n>             to_rgb: True\r\n>             to_np: False\r\n>             channel_first: False\r\n>         - RandCropImage:\r\n>             size: 224\r\n>             ratio: [1.0, 1.0]\r\n>         - RandFlipImage:\r\n>             flip_code: 1\r\n>         - NormalizeImage:\r\n>             scale: 1./255.\r\n>             mean: [0.485, 0.456, 0.406]\r\n>             std: [0.229, 0.224, 0.225]\r\n>             order: ''\r\n>         - ToCHWImage:\r\n> \r\n> \r\n> \r\n> VALID:\r\n>     batch_size: 4\r\n>     num_workers: 1\r\n>     file_list: \"./dataset/20201111/val_list.txt\"\r\n>     data_dir: \"./dataset/20201111/full\"\r\n>     shuffle_seed: 0\r\n>     transforms:\r\n>         - DecodeImage:\r\n>             to_rgb: True\r\n>             to_np: False\r\n>             channel_first: False\r\n>         - ResizeImage:\r\n>             resize_short: 256\r\n>         - CropImage:\r\n>             size: 224\r\n>         - NormalizeImage:\r\n>             scale: 1.0/255.0\r\n>             mean: [0.485, 0.456, 0.406]\r\n>             std: [0.229, 0.224, 0.225]\r\n>             order: ''\r\n>         - ToCHWImage:\r\n\r\n报错：\r\n\r\n> !!! The CPU_NUM is not specified, you should set CPU_NUM in the environment variable list.\r\n> CPU_NUM indicates that how many CPUPlace are used in the current task.\r\n> And if this parameter are set as N (equal to the number of physical CPU core) the program may be faster.\r\n> \r\n> export CPU_NUM=8 # for example, set CPU_NUM as number of physical CPU core which is 8.\r\n> \r\n> !!! The default number of CPU_NUM=1.\r\n> 2020-11-12 08:32:27 INFO: Loading parameters from ./models/MobileNetV2_x0_5_pretrained...\r\n> 2020-11-12 08:32:27 WARNING: variable fc10_offset is already excluded automatically\r\n> 2020-11-12 08:32:27 WARNING: variable fc10_weights is already excluded automatically\r\n> 2020-11-12 08:32:27 INFO: Finish initing model from ['./models/MobileNetV2_x0_5_pretrained']\r\n> W1112 08:32:28.292935 17236 build_strategy.cc:170] fusion_group is not enabled for Windows/MacOS now, and only effective when running with CUDA GPU.\r\n> 2020-11-12 08:32:30 INFO: epoch:0   train step:0    loss:  2.1282 top1: 0.1250 top3: 0.3750 lr: 0.005000 elapse: 2.833s\r\n> Traceback (most recent call last):\r\n>   File \"train_multi_platform.py\", line 169, in <module>\r\n>     main(args)\r\n>   File \"train_multi_platform.py\", line 133, in main\r\n>     epoch_id, 'train', config, vdl_writer)\r\n>   File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\program.py\", line 435, in run\r\n>     metrics = exe.run(program=program, feed=batch, fetch_list=fetch_list)\r\n>   File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1107, in run\r\n>     six.reraise(*sys.exc_info())\r\n>   File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\six.py\", line 703, in reraise\r\n>     raise value\r\n>   File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1105, in run\r\n>     return_merged=return_merged)\r\n>   File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1242, in _run_impl\r\n>     return_merged=return_merged)\r\n>   File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 910, in _run_parallel\r\n>     tensors = exe.run(fetch_var_names, return_merged)._move_to_list()\r\n> paddle.fluid.core_avx.EnforceNotMet:\r\n> \r\n>   Compile Traceback (most recent call last):\r\n>     File \"train_multi_platform.py\", line 169, in <module>\r\n>       main(args)\r\n>     File \"train_multi_platform.py\", line 80, in main\r\n>       is_distributed=False)\r\n>     File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\program.py\", line 354, in build\r\n>       use_distillation=use_distillation)\r\n>     File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\program.py\", line 233, in create_fetchs\r\n>       use_distillation)\r\n>     File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\program.py\", line 162, in create_loss\r\n>       return loss(out, target)\r\n>     File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\ppcls\\modeling\\loss.py\", line 82, in __call__\r\n>       cost = self._crossentropy(input, target)\r\n>     File \"D:\\AAS_Projects\\Paddlejs4ARmodel\\ppcls\\modeling\\loss.py\", line 52, in _crossentropy\r\n>       input=softmax_out, label=target, soft_label=self._label_smoothing)\r\n>     File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\layers\\loss.py\", line 260, in cross_entropy\r\n>       return cross_entropy2(input, label, ignore_index)\r\n>     File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\layers\\loss.py\", line 298, in cross_entropy2\r\n>       attrs=attrs)\r\n>     File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\layer_helper.py\", line 43, in append_op\r\n>       return self.main_program.current_block().append_op(*args, **kwargs)\r\n>     File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 2917, in append_op\r\n>       attrs=kwargs.get(\"attrs\", None))\r\n>     File \"D:\\Anaconda3\\envs\\paddle20\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 2014, in __init__\r\n>       for frame in traceback.extract_stack():\r\n> \r\n> --------------------------------------\r\n> C++ Traceback (most recent call last):\r\n> --------------------------------------\r\n> Not support stack backtrace yet.\r\n> \r\n> ----------------------\r\n> Error Message Summary:\r\n> ----------------------\r\n> Error: Variable value (label) of OP(fluid.layers.cross_entropy) expected >= 0 and < 5, but got 5. Please check label value. (at D:\\2.0.0-rc0\\paddle\\paddle/fluid/operators/cross_entropy_op.h:175)\r\n>   [operator < cross_entropy2 > error]\r\n\r\n请问这个会是什么原因呢？感觉像是数据标注文件的格式问题，但是这格式应该是对的吧？",
        "state": "closed",
        "user": "nihuizhidao",
        "closed_by": "nihuizhidao",
        "created_at": "2020-11-12T00:46:03+00:00",
        "updated_at": "2020-11-12T02:13:21+00:00",
        "closed_at": "2020-11-12T02:13:21+00:00",
        "comments_count": [
            "littletomatodonkey",
            "nihuizhidao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 388,
        "title": "loss更改",
        "body": "如何在配置文件或者train.py里修改loss函数，指定loss函数类型　",
        "state": "closed",
        "user": "AIgiraffe",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-11T17:39:20+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:48+00:00",
        "comments_count": [
            "littletomatodonkey",
            "AIgiraffe",
            "ITerydh",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 394,
        "title": "Can I program multiple models in one code script?",
        "body": "Hi,\r\n\r\nI would like to detect the person in an image and classify the person(i.e. chef, soldier, ...).\r\n\r\nSo, I firstly use a pp-yolo for detection. Then get the patch based on the person's bbox. At last, I use a resnet50_vd for classification.\r\n\r\nCurrently I completed the training for the classification. But do not know how to put the detection model and the classification model in one piece of code.\r\n\r\nAre there any examples for the application? Many thanks.",
        "state": "closed",
        "user": "p1n0cch10",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-12T11:44:07+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:49+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 397,
        "title": "Cuda error(719)",
        "body": "`Traceback (most recent call last):\r\n  File \"tools/train_multi_platform.py\", line 169, in <module>\r\n    main(args)\r\n  File \"tools/train_multi_platform.py\", line 133, in main\r\n    epoch_id, 'train', config, vdl_writer)\r\n  File \"E:\\PaddleClas-master\\tools\\program.py\", line 435, in run\r\n    metrics = exe.run(program=program, feed=batch, fetch_list=fetch_list)\r\n  File \"E:\\anaconda\\envs\\paddle2.0\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1107, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"E:\\anaconda\\envs\\paddle2.0\\lib\\site-packages\\six.py\", line 703, in reraise\r\n    raise value\r\n  File \"E:\\anaconda\\envs\\paddle2.0\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1105, in run\r\n    return_merged=return_merged)\r\n  File \"E:\\anaconda\\envs\\paddle2.0\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 1242, in _run_impl\r\n    return_merged=return_merged)\r\n  File \"E:\\anaconda\\envs\\paddle2.0\\lib\\site-packages\\paddle\\fluid\\executor.py\", line 910, in _run_parallel\r\n    tensors = exe.run(fetch_var_names, return_merged)._move_to_list()\r\npaddle.fluid.core_avx.EnforceNotMet:\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\nNot support stack backtrace yet.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nExternalError:  Cuda error(719), unspecified launch failure.\r\n  [Advise: Please search for the error code(719) on website( https://docs.nvidia.com/cuda/archive/10.0/cuda-runtime-api/group__CUDART__TYPES.html#group__CUDART__TYPES_1g3f51e3575c2178246db0a94a430e0038 ) to get Nvidia's official soluti\r\non about CUDA Error.] (at D:\\2.0.0-rc0\\paddle\\paddle\\fluid\\platform\\stream\\cuda_stream.cc:65)\r\n`\r\n训练过程中会随机中止报错，用的paddle2.0rc",
        "state": "closed",
        "user": "prj-jxust",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-14T05:16:50+00:00",
        "updated_at": "2020-11-22T15:38:56+00:00",
        "closed_at": "2020-11-22T15:38:56+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 396,
        "title": "HS-ResNet",
        "body": "您好，我想问一下，你们的Hs-Resnet的计算复杂度真的小于标准卷积吗",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-14T00:52:58+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:50+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 401,
        "title": "注意力机制",
        "body": "请问有没有带有注意力机制的预训练模型，比如CBAM+ResNet 这种？",
        "state": "closed",
        "user": "Ryan906k9",
        "closed_by": "Ryan906k9",
        "created_at": "2020-11-17T09:00:18+00:00",
        "updated_at": "2020-11-19T07:25:26+00:00",
        "closed_at": "2020-11-19T07:25:26+00:00",
        "comments_count": [
            "cuicheng01",
            "Ryan906k9",
            "cuicheng01",
            "Ryan906k9"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 415,
        "title": "Does the validation process update the model weights?",
        "body": "Hi,\r\n\r\nI am using the sample code here for training, https://github.com/PaddlePaddle/PaddleClas/blob/master/tools/train.py\r\n\r\nwith the configure file configs/quick_start/ResNet50_vd_finetune.yaml\r\n\r\nI would like to know does the validation process update the model weights?\r\n\r\nMany thanks.",
        "state": "closed",
        "user": "p1n0cch10",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-20T11:55:15+00:00",
        "updated_at": "2021-01-14T11:57:39+00:00",
        "closed_at": "2021-01-14T11:57:39+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 418,
        "title": "预测支持中文标签吗？",
        "body": "预测支持中文标签吗？，发现旧版本不支持。",
        "state": "closed",
        "user": "fish-hello",
        "closed_by": "fish-hello",
        "created_at": "2020-11-23T08:53:19+00:00",
        "updated_at": "2020-11-26T09:40:30+00:00",
        "closed_at": "2020-11-26T09:40:30+00:00",
        "comments_count": [
            "cuicheng01",
            "fish-hello"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 422,
        "title": "question about xception-deeplab",
        "body": "Hi,\r\n\r\nThanks for sharing this !!!\r\n\r\nWould you tell me from where can we find the xception model architecture details, and the training hyper-parameters ?",
        "state": "closed",
        "user": "CoinCheung",
        "closed_by": "CoinCheung",
        "created_at": "2020-11-25T05:19:45+00:00",
        "updated_at": "2020-11-30T07:30:19+00:00",
        "closed_at": "2020-11-30T07:30:19+00:00",
        "comments_count": [
            "cuicheng01",
            "CoinCheung",
            "CoinCheung",
            "cuicheng01",
            "CoinCheung"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 421,
        "title": "'utf-8' codec can't decode byte 0xff in position 0: invalid start byte",
        "body": "I try the girdmask, got an error like:\r\n'utf-8' codec can't decode byte 0xff in position 0: invalid start byte'\r\n\r\nthen I use the mothod form stackoverflow :add the 'rb' to the read line like:\r\nfor f in fnames:\r\n    data = open(os.path.join(imgs_dir, f)**,'rb'**).read()\r\n\r\nthen got another error:\r\n'NoneType' object has no attribute 'shape'\r\n\r\nany help?Thanks",
        "state": "closed",
        "user": "Ultraopxt",
        "closed_by": "Ultraopxt",
        "created_at": "2020-11-24T08:35:06+00:00",
        "updated_at": "2020-12-01T08:03:15+00:00",
        "closed_at": "2020-12-01T08:03:15+00:00",
        "comments_count": [
            "cuicheng01",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 425,
        "title": "部署时GPU预测比CPU慢，GPU大于1000ms，CPU大约50ms",
        "body": "经过分析，发现是cls.cpp文件中的input_t->copy_from_scpu(input.data());代码执行太慢，需要大约1s。\r\n请问这是为什么？是我电脑的原因？",
        "state": "closed",
        "user": "zhouyuxixixi",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-25T10:29:02+00:00",
        "updated_at": "2020-11-28T13:05:18+00:00",
        "closed_at": "2020-11-28T13:05:18+00:00",
        "comments_count": [
            "zhouyuxixixi",
            "zhouyuxixixi",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 428,
        "title": "百万数据训练时，训练速度突然下降",
        "body": "```\r\n2020-11-24 16:37:26 INFO: epoch:0   train step:28060 loss:  0.9792 top1: 0.7812 top5: 0.8750 lr: 0.003750 elapse: 0.436s\r\n2020-11-24 16:37:30 INFO: epoch:0   train step:28070 loss:  0.9206 top1: 0.8125 top5: 0.9375 lr: 0.003750 elapse: 0.439s\r\n2020-11-24 16:37:34 INFO: epoch:0   train step:28080 loss:  0.6484 top1: 0.9062 top5: 0.9062 lr: 0.003750 elapse: 0.468s\r\n2020-11-24 16:37:38 INFO: epoch:0   train step:28090 loss:  0.7870 top1: 0.8438 top5: 0.9375 lr: 0.003750 elapse: 0.404s\r\n2020-11-24 16:37:42 INFO: epoch:0   train step:28100 loss:  1.0918 top1: 0.8438 top5: 0.9062 lr: 0.003750 elapse: 0.394s\r\n2020-11-24 16:37:46 INFO: epoch:0   train step:28110 loss:  0.6463 top1: 0.7812 top5: 0.9688 lr: 0.003750 elapse: 0.392s\r\n2020-11-24 16:37:51 INFO: epoch:0   train step:28120 loss:  0.6482 top1: 0.8438 top5: 0.9688 lr: 0.003750 elapse: 0.432s\r\n2020-11-24 16:37:55 INFO: epoch:0   train step:28130 loss:  1.0115 top1: 0.8750 top5: 0.8750 lr: 0.003750 elapse: 0.450s\r\n2020-11-24 16:37:59 INFO: epoch:0   train step:28140 loss:  0.7654 top1: 0.8125 top5: 0.9375 lr: 0.003750 elapse: 0.397s\r\n2020-11-24 16:38:03 INFO: epoch:0   train step:28150 loss:  0.1579 top1: 0.9375 top5: 1.0000 lr: 0.003750 elapse: 0.383s\r\n2020-11-24 16:38:07 INFO: epoch:0   train step:28160 loss:  0.5256 top1: 0.7812 top5: 1.0000 lr: 0.003750 elapse: 0.426s\r\n2020-11-24 16:38:11 INFO: epoch:0   train step:28170 loss:  0.7106 top1: 0.7812 top5: 0.9375 lr: 0.003750 elapse: 0.410s\r\n2020-11-24 16:38:26 INFO: epoch:0   train step:28180 loss:  1.4740 top1: 0.7812 top5: 0.8750 lr: 0.003750 elapse: 2.283s\r\n2020-11-24 16:38:55 INFO: epoch:0   train step:28190 loss:  0.3776 top1: 0.9062 top5: 1.0000 lr: 0.003750 elapse: 2.029s\r\n2020-11-24 16:39:20 INFO: epoch:0   train step:28200 loss:  1.2888 top1: 0.7500 top5: 0.8750 lr: 0.003750 elapse: 3.031s\r\n2020-11-24 16:39:50 INFO: epoch:0   train step:28210 loss:  1.5478 top1: 0.5625 top5: 0.8750 lr: 0.003750 elapse: 2.704s\r\n2020-11-24 16:40:12 INFO: epoch:0   train step:28220 loss:  0.8024 top1: 0.8438 top5: 0.9375 lr: 0.003750 elapse: 2.045s\r\n2020-11-24 16:40:36 INFO: epoch:0   train step:28230 loss:  0.6523 top1: 0.8438 top5: 0.9375 lr: 0.003750 elapse: 2.164s\r\n2020-11-24 16:41:02 INFO: epoch:0   train step:28240 loss:  0.4976 top1: 0.8750 top5: 1.0000 lr: 0.003750 elapse: 3.623s\r\n2020-11-24 16:41:27 INFO: epoch:0   train step:28250 loss:  0.4983 top1: 0.8438 top5: 0.9688 lr: 0.003750 elapse: 2.255s\r\n2020-11-24 16:41:46 INFO: epoch:0   train step:28260 loss:  0.7067 top1: 0.8438 top5: 0.9375 lr: 0.003750 elapse: 1.299s\r\n2020-11-24 16:42:04 INFO: epoch:0   train step:28270 loss:  0.2890 top1: 0.8438 top5: 1.0000 lr: 0.003750 elapse: 1.281s\r\n2020-11-24 16:42:30 INFO: epoch:0   train step:28280 loss:  0.6761 top1: 0.8750 top5: 0.9375 lr: 0.003750 elapse: 3.764s\r\n2020-11-24 16:43:02 INFO: epoch:0   train step:28290 loss:  0.6831 top1: 0.8750 top5: 0.9375 lr: 0.003750 elapse: 4.309s\r\n2020-11-24 16:43:36 INFO: epoch:0   train step:28300 loss:  0.2577 top1: 0.9375 top5: 1.0000 lr: 0.003750 elapse: 3.572s\r\n2020-11-24 16:44:20 INFO: epoch:0   train step:28310 loss:  0.7128 top1: 0.8438 top5: 0.9688 lr: 0.003750 elapse: 4.120s\r\n2020-11-24 16:45:02 INFO: epoch:0   train step:28320 loss:  0.8296 top1: 0.8125 top5: 0.9375 lr: 0.003750 elapse: 4.268s\r\n2020-11-24 16:45:56 INFO: epoch:0   train step:28330 loss:  0.6197 top1: 0.8750 top5: 0.9688 lr: 0.003750 elapse: 5.454s\r\n2020-11-24 16:46:48 INFO: epoch:0   train step:28340 loss:  0.2027 top1: 0.9375 top5: 1.0000 lr: 0.003750 elapse: 5.802s\r\n2020-11-24 16:48:39 INFO: epoch:0   train step:28350 loss:  0.2317 top1: 0.9688 top5: 1.0000 lr: 0.003750 elapse: 15.851s\r\n2020-11-24 16:51:51 INFO: epoch:0   train step:28360 loss:  0.6393 top1: 0.8750 top5: 0.9375 lr: 0.003750 elapse: 34.094s\r\n2020-11-24 16:55:11 INFO: epoch:0   train step:28370 loss:  0.8823 top1: 0.8125 top5: 0.8750 lr: 0.003750 elapse: 18.306s\r\n2020-11-24 16:59:22 INFO: epoch:0   train step:28380 loss:  0.5550 top1: 0.8438 top5: 0.9688 lr: 0.003750 elapse: 29.007s\r\n2020-11-24 17:03:35 INFO: epoch:0   train step:28390 loss:  1.2840 top1: 0.7188 top5: 0.8750 lr: 0.003750 elapse: 30.256s\r\n```\r\nwatch GPU 使用率为0了",
        "state": "closed",
        "user": "yazone",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-11-26T01:12:58+00:00",
        "updated_at": "2022-03-16T04:06:53+00:00",
        "closed_at": "2022-03-16T04:06:51+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 429,
        "title": "部署服务有时间要做一下了，我都是自己接入PaddleHub的",
        "body": "主要是版本不对应，与Serving。不过Serving也没怎么维护起来，sad！",
        "state": "closed",
        "user": "fish-hello",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-11-26T09:44:14+00:00",
        "updated_at": "2020-11-28T13:05:01+00:00",
        "closed_at": "2020-11-28T13:05:01+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 433,
        "title": "支持png格式的自定义数据集吗？",
        "body": "用png格式数据集，然后用jpg格式的去预测，发现识别不准。不过数据集的量比较少，但好像结果比较离谱",
        "state": "closed",
        "user": "fish-hello",
        "closed_by": "fish-hello",
        "created_at": "2020-11-30T08:21:26+00:00",
        "updated_at": "2020-12-04T10:00:58+00:00",
        "closed_at": "2020-12-04T10:00:58+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 437,
        "title": "can't find PADDLE_TRAINER_ENDPOINTS",
        "body": "使用提供的flowers102数据集训练，出现下列错误：\r\n\r\nHey! Looks like you accidentally pulled in an incorrect dependency. This can bork your software supply chain in all sorts of ways, so it's very important to be careful with what you're pulling in. Read more about software supply chain security here: https://www.usenix.org/conference/usenixsecurity19/presentation/torres-arias\r\nTraceback (most recent call last):\r\n  File \"H:/yuanbaoxi/test_code/paddlepaddle-PaddleClas-master/PaddleClas/train_flower.py\", line 178, in <module>\r\n    main(args)\r\n  File \"H:/yuanbaoxi/test_code/paddlepaddle-PaddleClas-master/PaddleClas/train_flower.py\", line 66, in main\r\n    fleet.init(role)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\paddleCls\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\base\\fleet_base.py\", line 219, in init\r\n    self._role_maker.generate_role()\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\paddleCls\\lib\\site-packages\\paddle\\fluid\\incubate\\fleet\\base\\role_maker.py\", line 539, in generate_role\r\n    assert self._worker_endpoints is not None, \"can't find PADDLE_TRAINER_ENDPOINTS\"\r\nAssertionError: can't find PADDLE_TRAINER_ENDPOINTS\r\n\r\n配置文件如下\r\nmode: 'train'\r\nARCHITECTURE:\r\n    name: 'ResNet50'\r\n\r\npretrained_model: \"\"\r\nmodel_save_dir: \"./output/\"\r\nclasses_num: 1000\r\ntotal_images: 1281167\r\nsave_interval: 1\r\nvalidate: True\r\nvalid_interval: 1\r\nepochs: 120\r\ntopk: 5\r\nimage_shape: [3, 224, 224]\r\n\r\nuse_mix: False\r\nls_epsilon: -1\r\n\r\nLEARNING_RATE:\r\n    function: 'Piecewise'          \r\n    params:                   \r\n        lr: 0.1               \r\n        decay_epochs: [30, 60, 90] \r\n        gamma: 0.1 \r\n\r\nOPTIMIZER:\r\n    function: 'Momentum'\r\n    params:\r\n        momentum: 0.9\r\n    regularizer:\r\n        function: 'L2'\r\n        factor: 0.000100\r\n\r\nTRAIN:\r\n    batch_size: 16\r\n    num_workers: 4\r\n    file_list: \"./dataset/flowers102/train_list.txt\"\r\n    data_dir: \"./dataset/flowers102/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1./255.\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n\r\nVALID:\r\n    batch_size: 4\r\n    num_workers: 4\r\n    file_list: \"./dataset/flowers102/val_list.txt\"\r\n    data_dir: \"./dataset/flowers102/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n\r\n",
        "state": "closed",
        "user": "ybxbupt",
        "closed_by": "weisy11",
        "created_at": "2020-12-01T06:46:33+00:00",
        "updated_at": "2022-03-16T06:16:46+00:00",
        "closed_at": "2022-03-16T06:16:46+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ybxbupt"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 438,
        "title": "请问，根据不同缺陷类别之间的区别有做一些预处理的工作吗？",
        "body": "",
        "state": "closed",
        "user": "xuanwdx",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-01T08:23:41+00:00",
        "updated_at": "2022-03-16T04:06:54+00:00",
        "closed_at": "2022-03-16T04:06:52+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 439,
        "title": "c++模型推理，没有CmakeList文件啊",
        "body": "",
        "state": "closed",
        "user": "jiachen0212",
        "closed_by": "jiachen0212",
        "created_at": "2020-12-02T03:08:57+00:00",
        "updated_at": "2020-12-02T03:39:46+00:00",
        "closed_at": "2020-12-02T03:27:28+00:00",
        "comments_count": [
            "jiachen0212",
            "jiachen0212"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 443,
        "title": "dygraph分支下动态图eval出错",
        "body": "PaddlePaddle版本：develop分支\r\n在PaddleClas  dygraph分支下，执行：\r\n\r\n```\r\nexport CUDA_VISIBLE_DEVICES=0\r\npython tools/eval.py -c ./configs/eval.yaml\r\n```\r\n\r\neval.yaml内容见error log.\r\n\r\nerror log:\r\n```\r\n2020-12-03 03:42:55 INFO: ARCHITECTURE :\r\n2020-12-03 03:42:55 INFO:     name : MobileNetV1\r\n2020-12-03 03:42:55 INFO: ------------------------------------------------------------\r\n2020-12-03 03:42:55 INFO: VALID :\r\n2020-12-03 03:42:55 INFO:     batch_size : 256\r\n2020-12-03 03:42:55 INFO:     data_dir : ./dataset/ILSVRC2012/\r\n2020-12-03 03:42:55 INFO:     file_list : ./dataset/ILSVRC2012/val_list.txt\r\n2020-12-03 03:42:55 INFO:     num_workers : 4\r\n2020-12-03 03:42:55 INFO:     shuffle_seed : 0\r\n2020-12-03 03:42:55 INFO:     transforms :\r\n2020-12-03 03:42:55 INFO:         DecodeImage :\r\n2020-12-03 03:42:55 INFO:             channel_first : False\r\n2020-12-03 03:42:55 INFO:             to_np : False\r\n2020-12-03 03:42:55 INFO:             to_rgb : True\r\n2020-12-03 03:42:55 INFO:         ResizeImage :\r\n2020-12-03 03:42:55 INFO:             resize_short : 256\r\n2020-12-03 03:42:55 INFO:         CropImage :\r\n2020-12-03 03:42:55 INFO:             size : 224\r\n2020-12-03 03:42:55 INFO:         NormalizeImage :\r\n2020-12-03 03:42:55 INFO:             mean : [0.485, 0.456, 0.406]\r\n2020-12-03 03:42:55 INFO:             order :\r\n2020-12-03 03:42:55 INFO:             scale : 1.0/255.0\r\n2020-12-03 03:42:55 INFO:             std : [0.229, 0.224, 0.225]\r\n2020-12-03 03:42:55 INFO:         ToCHWImage : None\r\n2020-12-03 03:42:55 INFO: ------------------------------------------------------------\r\n2020-12-03 03:42:55 INFO: classes_num : 1000\r\n2020-12-03 03:42:55 INFO: image_shape : [3, 224, 224]\r\n2020-12-03 03:42:55 INFO: mode : valid\r\n2020-12-03 03:42:55 INFO: pretrained_model : /root/PaddleSlim/demo/dygraph/pruning/PaddleClas/MobileNetV1/best_model/ppcls\r\n2020-12-03 03:42:55 INFO: topk : 5\r\n2020-12-03 03:42:55 INFO: total_images : 1281167\r\nW1203 03:42:55.997026 82034 device_context.cc:338] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 11.0, Runtime API Version: 10.0\r\nW1203 03:42:56.003563 82034 device_context.cc:346] device: 0, cuDNN Version: 7.5.\r\n2020-12-03 03:43:01 INFO: Finish initing model from /root/PaddleSlim/demo/dygraph/pruning/PaddleClas/MobileNetV1/best_model/ppcls\r\n2020-12-03 03:43:16 ERROR: DataLoader reader thread raised an exception!\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/root/miniconda3/lib/python3.8/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 674, in _get_data\r\n    data = self._data_queue.get(timeout=self._timeout)\r\n  File \"/root/miniconda3/lib/python3.8/multiprocessing/queues.py\", line 108, in get\r\n    raise Empty\r\n_queue.Empty\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/miniconda3/lib/python3.8/threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"/root/miniconda3/lib/python3.8/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/root/miniconda3/lib/python3.8/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 606, in _thread_loop\r\n    batch = self._get_data()\r\n  File \"/root/miniconda3/lib/python3.8/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 689, in _get_data\r\n    raise RuntimeError(\"DataLoader {} workers exit unexpectedly, \" \\\r\nRuntimeError: DataLoader 3 workers exit unexpectedly, pids: 82046, 82047, 82048\r\nTraceback (most recent call last):\r\n  File \"tools/eval.py\", line 79, in <module>\r\n    main(args)\r\n  File \"tools/eval.py\", line 71, in main\r\n    top1_acc = program.run(valid_dataloader, config, net, None, None, 0,\r\n  File \"/root/PaddleSlim/demo/dygraph/pruning/PaddleClas/tools/program.py\", line 300, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n```",
        "state": "closed",
        "user": "wanghaoshuang",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-03T03:51:40+00:00",
        "updated_at": "2020-12-03T14:29:33+00:00",
        "closed_at": "2020-12-03T14:29:33+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 447,
        "title": "ubuntu",
        "body": "",
        "state": "closed",
        "user": "jiachen0212",
        "closed_by": "jiachen0212",
        "created_at": "2020-12-03T12:40:03+00:00",
        "updated_at": "2020-12-03T12:59:55+00:00",
        "closed_at": "2020-12-03T12:59:46+00:00",
        "comments_count": [
            "jiachen0212",
            "jiachen0212",
            "jiachen0212"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 448,
        "title": "PaddleClas输入图片大小",
        "body": "PaddleClas默认的配置是image_shape: [3, 224, 224]，我注意到Paddle的文档上写着，InceptionV4和Xception采用的输入图像的分辨率为299x299，DarkNet53为256x256，Fix_ResNeXt101_32x48d_wsl为320x320，其余模型使用的分辨率均为224x224。\r\n我想训练的样本是大都是细长的，大都是高度30-100，长度50-200这样的小图片，假如我使用Resnet101_vd，请问是否需要调整image_shape，如果不调整，是否会浪费很多显存，影响训练速度和推理速度？如果调整该如何调整？\r\n\r\n谢谢",
        "state": "closed",
        "user": "Qggg",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-04T03:54:34+00:00",
        "updated_at": "2022-03-16T04:06:55+00:00",
        "closed_at": "2022-03-16T04:06:53+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 449,
        "title": "使用自己的数据对模型进行微调报错",
        "body": "2020-12-04 16:52:25 INFO: ARCHITECTURE : \r\n2020-12-04 16:52:25 INFO:     name : ResNet50_vd\r\n2020-12-04 16:52:25 INFO: ------------------------------------------------------------\r\n2020-12-04 16:52:25 INFO: LEARNING_RATE : \r\n2020-12-04 16:52:25 INFO:     function : Cosine\r\n2020-12-04 16:52:25 INFO:     params : \r\n2020-12-04 16:52:25 INFO:         lr : 0.00375\r\n2020-12-04 16:52:25 INFO: ------------------------------------------------------------\r\n2020-12-04 16:52:25 INFO: OPTIMIZER : \r\n2020-12-04 16:52:25 INFO:     function : Momentum\r\n2020-12-04 16:52:25 INFO:     params : \r\n2020-12-04 16:52:25 INFO:         momentum : 0.9\r\n2020-12-04 16:52:25 INFO:     regularizer : \r\n2020-12-04 16:52:25 INFO:         factor : 1e-06\r\n2020-12-04 16:52:25 INFO:         function : L2\r\n2020-12-04 16:52:25 INFO: ------------------------------------------------------------\r\n2020-12-04 16:52:25 INFO: TRAIN : \r\n2020-12-04 16:52:25 INFO:     batch_size : 32\r\n2020-12-04 16:52:25 INFO:     data_dir : ./dataset/safety_data/\r\n2020-12-04 16:52:25 INFO:     file_list : ./dataset/safety_data/train_list.txt\r\n2020-12-04 16:52:25 INFO:     num_workers : 4\r\n2020-12-04 16:52:25 INFO:     shuffle_seed : 0\r\n2020-12-04 16:52:25 INFO:     transforms : \r\n2020-12-04 16:52:25 INFO:         DecodeImage : \r\n2020-12-04 16:52:25 INFO:             channel_first : False\r\n2020-12-04 16:52:25 INFO:             to_np : False\r\n2020-12-04 16:52:25 INFO:             to_rgb : True\r\n2020-12-04 16:52:25 INFO:         RandCropImage : \r\n2020-12-04 16:52:25 INFO:             size : 224\r\n2020-12-04 16:52:25 INFO:         RandFlipImage : \r\n2020-12-04 16:52:25 INFO:             flip_code : 1\r\n2020-12-04 16:52:25 INFO:         NormalizeImage : \r\n2020-12-04 16:52:25 INFO:             mean : [0.485, 0.456, 0.406]\r\n2020-12-04 16:52:25 INFO:             order : \r\n2020-12-04 16:52:25 INFO:             scale : 1./255.\r\n2020-12-04 16:52:25 INFO:             std : [0.229, 0.224, 0.225]\r\n2020-12-04 16:52:25 INFO:         ToCHWImage : None\r\n2020-12-04 16:52:25 INFO: ------------------------------------------------------------\r\n2020-12-04 16:52:25 INFO: VALID : \r\n2020-12-04 16:52:25 INFO:     batch_size : 20\r\n2020-12-04 16:52:25 INFO:     data_dir : ./dataset/safety_data/\r\n2020-12-04 16:52:25 INFO:     file_list : ./dataset/safety_data/val_list.txt\r\n2020-12-04 16:52:25 INFO:     num_workers : 4\r\n2020-12-04 16:52:25 INFO:     shuffle_seed : 0\r\n2020-12-04 16:52:25 INFO:     transforms : \r\n2020-12-04 16:52:25 INFO:         DecodeImage : \r\n2020-12-04 16:52:25 INFO:             channel_first : False\r\n2020-12-04 16:52:25 INFO:             to_np : False\r\n2020-12-04 16:52:25 INFO:             to_rgb : True\r\n2020-12-04 16:52:25 INFO:         ResizeImage : \r\n2020-12-04 16:52:25 INFO:             resize_short : 256\r\n2020-12-04 16:52:25 INFO:         CropImage : \r\n2020-12-04 16:52:25 INFO:             size : 224\r\n2020-12-04 16:52:25 INFO:         NormalizeImage : \r\n2020-12-04 16:52:25 INFO:             mean : [0.485, 0.456, 0.406]\r\n2020-12-04 16:52:25 INFO:             order : \r\n2020-12-04 16:52:25 INFO:             scale : 1.0/255.0\r\n2020-12-04 16:52:25 INFO:             std : [0.229, 0.224, 0.225]\r\n2020-12-04 16:52:25 INFO:         ToCHWImage : None\r\n2020-12-04 16:52:25 INFO: ------------------------------------------------------------\r\n2020-12-04 16:52:25 INFO: classes_num : 3\r\n2020-12-04 16:52:25 INFO: epochs : 20\r\n2020-12-04 16:52:25 INFO: image_shape : [3, 224, 224]\r\n2020-12-04 16:52:25 INFO: mode : train\r\n2020-12-04 16:52:25 INFO: model_save_dir : ./output/\r\n2020-12-04 16:52:25 INFO: pretrained_model : ./pretrained/ResNet50_vd_pretrained\r\n2020-12-04 16:52:25 INFO: save_interval : 1\r\n2020-12-04 16:52:25 INFO: topk : 5\r\n2020-12-04 16:52:25 INFO: total_images : 4194\r\n2020-12-04 16:52:25 INFO: valid_interval : 1\r\n2020-12-04 16:52:25 INFO: validate : True\r\n\r\n\r\nAPI is deprecated since 2.0.0 Please use FleetAPI instead.\r\nWIKI: https://github.com/PaddlePaddle/Fleet/blob/develop/markdown_doc/transpiler\r\n\r\n        \r\nW1204 16:52:26.768529  9462 device_context.cc:338] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 10.1, Runtime API Version: 10.1\r\nW1204 16:52:26.773313  9462 device_context.cc:346] device: 0, cuDNN Version: 7.6.\r\n2020-12-04 16:52:30 INFO: Loading parameters from ./pretrained/ResNet50_vd_pretrained...\r\n2020-12-04 16:52:30 WARNING: variable fc_0.w_0 is already excluded automatically\r\n2020-12-04 16:52:30 WARNING: variable fc_0.b_0 is already excluded automatically\r\n2020-12-04 16:52:30 INFO: Finish initing model from ['./pretrained/ResNet50_vd_pretrained']\r\n2020-12-04 16:52:31 INFO: epoch:0   train step:0    loss:  1.1006 top1: 0.2812 top3: 1.0000 lr: 0.003750 elapse: 0.92643s ips: 34.54110 images/sec.\r\n2020-12-04 16:52:33 INFO: epoch:0   train step:10   loss:  0.9748 top1: 0.4375 top3: 1.0000 lr: 0.003750 elapse: 0.24814s ips: 128.95966 images/sec.\r\nProcess Process-2:\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py:1188: DeprecationWarning: The 'warn' function is deprecated, use 'warning' instead\r\n  logging.warn('Your reader has raised an exception!')\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n2020-12-04 16:52:34 WARNING: Your reader has raised an exception!\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/reader/decorator.py\", line 607, in _read_into_queue\r\n    six.reraise(*sys.exc_info())\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/reader/decorator.py\", line 600, in _read_into_queue\r\n    for sample in reader():\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/reader.py\", line 198, in reader\r\n    yield (transform(img, ops), int(label))\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/imaug/__init__.py\", line 43, in transform\r\n    data = op(data)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/imaug/operators.py\", line 51, in __call__\r\n    img) > 0, \"invalid input 'img' in DecodeImage\"\r\nAssertionError: invalid input 'img' in DecodeImage\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 1189, in __thread_main__\r\n    six.reraise(*sys.exc_info())\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 1169, in __thread_main__\r\n    for tensors in self._tensor_reader():\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 1239, in __tensor_reader_impl__\r\n    for slots in paddle_reader():\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/data_feeder.py\", line 546, in __reader_creator__\r\n    for item in reader():\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/reader.py\", line 281, in wrapper\r\n    for idx, sample in enumerate(reader()):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/reader/decorator.py\", line 623, in queue_reader\r\n    raise ValueError(\"multiprocess reader raises an exception\")\r\nValueError: multiprocess reader raises an exception\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 178, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 142, in main\r\n    epoch_id, 'train', config, vdl_writer)\r\n  File \"/home/aistudio/PaddleClas/tools/program.py\", line 485, in run\r\n    for idx, batch in enumerate(dataloader):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 1148, in __next__\r\n    return self._reader.read_next()\r\npaddle.fluid.core_avx.EnforceNotMet: \r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::{lambda()#1}> > >::_M_run()\r\n1   std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*)\r\n2   paddle::operators::reader::PyReader::ReadNext(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n3   paddle::operators::reader::BlockingQueue<std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> > >::Receive(std::vector<paddle::framework::LoDTensor, std::allocator<paddle::framework::LoDTensor> >*)\r\n4   paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int)\r\n5   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:154)\r\n\r\n数据一共有三个分类，但是只跑了10个step就报错了，请问是什么问题？",
        "state": "closed",
        "user": "Maxhyl",
        "closed_by": "Maxhyl",
        "created_at": "2020-12-04T08:58:10+00:00",
        "updated_at": "2021-03-05T01:48:35+00:00",
        "closed_at": "2020-12-07T09:13:31+00:00",
        "comments_count": [
            "thomas-yanxin",
            "Maxhyl"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 455,
        "title": "如何对C++部署时config文件中的resize_short",
        "body": "",
        "state": "closed",
        "user": "zhouyuxixixi",
        "closed_by": "zhouyuxixixi",
        "created_at": "2020-12-08T07:34:01+00:00",
        "updated_at": "2020-12-08T07:36:31+00:00",
        "closed_at": "2020-12-08T07:36:31+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 453,
        "title": "动态图分支用的paddle1.8还是2.0",
        "body": "另外，训练时的-o参数，看了半天没在代码里找到是哪里来的，文档里对config参数的说明不全，有不有个类似padseg的包含所有参数的config.py的文件",
        "state": "closed",
        "user": "liguoyu666",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-07T08:31:19+00:00",
        "updated_at": "2022-03-16T04:06:55+00:00",
        "closed_at": "2022-03-16T04:06:53+00:00",
        "comments_count": [
            "liguoyu666",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 454,
        "title": "二分类，产品好坏分类的，优化问题",
        "body": "一个二分类问题，我的数据集是1000张好的，和1000张坏的，对其进行分类\r\n**正常流程结果**\r\n识别率在90%，有很多坏的被识别成好的了\r\n**希望结果**\r\n我想达到，坏的被识别为坏的的准确率是100%，好的也能容忍被识别为坏的\r\n请问，我该如何修改，我目前能想到的是：\r\n1、减少好的图像数量\r\n2、对loss值进行修改",
        "state": "closed",
        "user": "zhouyuxixixi",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-07T09:10:00+00:00",
        "updated_at": "2022-03-16T04:06:56+00:00",
        "closed_at": "2022-03-16T04:06:54+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 456,
        "title": "如何对C++部署时config文件中的resize_short_size进行修改",
        "body": "我在AIstudio上进行二分类问题\r\n由于我的数据集图像大小位置都很固定，不需要进行数据增强，所以我对configs/resnet34_vd文件的transform部分进行了修改\r\n**修改前**\r\n![image](https://user-images.githubusercontent.com/65207014/101454758-72c9a180-396c-11eb-82a8-9194a7c11e0d.png)\r\n\r\n**修改后**\r\n![image](https://user-images.githubusercontent.com/65207014/101454788-7a894600-396c-11eb-8585-846810a09de3.png)\r\n\r\n首先，我不知道我这种修改是否有问题，至少从训练结果上来看，效果是变好了\r\n简单的二分类问题，显示的识别准确率达到了100%， 这是断点续训的log\r\n![image](https://user-images.githubusercontent.com/65207014/101454298-b4a61800-396b-11eb-9fdb-ce990fd41a9e.png)\r\n\r\n但是当我导出模型，对其进行预测，**预测的数据集我才用的是训练的数据集**，理论上模型应该能够完美识别的，但是现实却出现了很多的识别错误\r\n\r\n后来经过对比，发现，在C++部署的过程中，需要用到一个config.txt文件，其内容如下\r\n![image](https://user-images.githubusercontent.com/65207014/101454878-98ef4180-396c-11eb-8a11-304968307737.png)\r\n\r\n\r\n这个里面**resize_short_size 256**和我训练的时候**resize_size 224**是不一样的，所以我就想应该是这个原因导致的\r\n我尝试修改**resize_short_size 256**为**resize_size 224**，在载入模型的过程中直接报错了\r\n\r\n我的训练过程中使用的使Resize_size，不是resize_short_size，因为我并不想让图像受到任何的裁切\r\n我个人的理解，原来的操作是，比如500X800的图像，先使用resize-short-size缩放为256X(800X244除500)，然后random-crop为224X224的图像送入训练，我不想如此，我想只是将图像进行缩放成224X224，不进行任何裁切，但是我直接屏蔽crop-image的时候，又会提示我送入训练的shape不对\r\n\r\n请问如何将**resize_short_size 256**修改为**resize_size 224**？\r\n",
        "state": "closed",
        "user": "zhouyuxixixi",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-08T07:44:58+00:00",
        "updated_at": "2022-03-16T04:06:58+00:00",
        "closed_at": "2022-03-16T04:06:55+00:00",
        "comments_count": [
            "littletomatodonkey",
            "zhouyuxixixi",
            "zhouyuxixixi",
            "zhouyuxixixi",
            "littletomatodonkey",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 461,
        "title": "是否有CSPResNet50_leaky的预训练模型？",
        "body": "你好，我想使用CSPResNet50_leaky的预训练模型，请问是否有这个模型的链接？",
        "state": "closed",
        "user": "mls1999725",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-09T05:17:44+00:00",
        "updated_at": "2020-12-12T14:02:24+00:00",
        "closed_at": "2020-12-12T14:02:24+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 463,
        "title": "怎么在配置文件当中,配置最后一层, 不用softmax 而是用sigmoid, 多个类别 类间独立的",
        "body": "怎么在配置文件当中,配置最后一层, 不用softmax 而是用sigmoid, 多个类别 类间独立的\r\n",
        "state": "closed",
        "user": "habout632",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-10T02:51:48+00:00",
        "updated_at": "2022-03-16T04:06:58+00:00",
        "closed_at": "2022-03-16T04:06:56+00:00",
        "comments_count": [
            "habout632",
            "littletomatodonkey",
            "zrl4836",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 467,
        "title": "关于ResNet_ACNet模型deploy时的权重转换",
        "body": "请问一下，可以提供一下ResNet_ACNet权重参数合并的转换code吗？",
        "state": "closed",
        "user": "backtime92",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-11T02:34:35+00:00",
        "updated_at": "2020-12-11T12:46:55+00:00",
        "closed_at": "2020-12-11T12:46:55+00:00",
        "comments_count": [
            "littletomatodonkey",
            "backtime92"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 466,
        "title": "请问如何在pytorch上加载预训练模型？",
        "body": "您好，首先感谢您优秀的工作！\r\n我下载了您的HRNet ssld 的model，想将它load进我的pytorch构建的网络里作为backbone 的pretrained model，想知道是否有方法可以正确load这个模型的参数呢？\r\n因为下载后是tar文件，我是否需要解压，或者在load的代码里增加哪些预处理，才能正确load呢？我目前torch.load() tar文件的话会报错，而且我使用先open gzip open 后再pickle.load也会报错，错误是这样的：\r\n\r\n`  File \"/miniconda/envs/py37/lib/python3.7/site-packages/torch/serialization.py\"\r\n, line 564, in _load\r\n    magic_number = pickle_module.load(f, **pickle_load_args)\r\n_pickle.UnpicklingError: invalid load key, '\\x1f'.\r\n`\r\n如果是我哪里load 模型出了问题，还请指教！谢谢！",
        "state": "closed",
        "user": "Yvonne0413",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-10T17:24:36+00:00",
        "updated_at": "2022-03-16T04:06:59+00:00",
        "closed_at": "2022-03-16T04:06:57+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 472,
        "title": "HS block在stride=2的时候要如何实现？",
        "body": "你好，\r\n\r\nresnet原始的Bottleneck模块中的3*3卷积是有一个可以自定义步长参数stride的，可以实现下采样的功能。且resnet原网络中，layer2-4的stride都为2。\r\n\r\n而你们的HSblock如果也用到stride=2的情况时，在拼接特征图的时候就会出现分辨率不匹配的情况。\r\n\r\n比如HS block的输入是10,100,64,64的特征图，经过第一个split，输入被分成5个10,20,64,64的特征图，其中第一个直接送到HS block的输出。从第二个开始会经过一个（卷积+bn+relu）的组合，因为stride=2，经过卷积后会变成10,20,32,32的特征图，再把这个特征图一分为二变成2个10,10,32,32，其中一个送到HS block的输出，另一个跟第三组10,20,64,64的特征图拼接。\r\n\r\n这个时候HS block输出的第一组是64,64的的分辨率，而第二组是32,32的分辨率，无法拼接。并且第三组10,20,64,64的特征图要和第二组10,10,32,32的特征图拼接也无法拼接。\r\n\r\n请问相关模块是如何实现下采样的呢？如果相关模块无法实现下采样，那么在你们的网络中下采样是在哪一步完成的呢？谢谢。",
        "state": "closed",
        "user": "LaserLV52",
        "closed_by": "weisy11",
        "created_at": "2020-12-14T08:24:34+00:00",
        "updated_at": "2022-03-16T06:16:46+00:00",
        "closed_at": "2022-03-16T06:16:46+00:00",
        "comments_count": [
            "cuicheng01",
            "LaserLV52",
            "cuicheng01",
            "LaserLV52",
            "cuicheng01",
            "LaserLV52"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 471,
        "title": "export_model导出的模型用inter/predit推理精度下降严重",
        "body": "自己训练的模型，用eval.yaml准确率在92%\r\n使用python tools/export_model.py --model=ResNet50_vd --pretrained_model=output/ResNet50_vd/best_model/ppcls --output_path=inference/ResNet50_vd --class_dim=2，生成ResNet50_vd.pdiparams、ResNet50_vd.pdiparams.info、ResNet50_vd.pdmodel3个文件\r\n然后使用python ./tools/infer/predict.py -i=./dataset/battery/binary_1/123(7)19_1.jpg --model_file=./inference/ResNet50_vd.pdmodel --params_file=./inference/ResNet50_vd.pdiparams --use_gpu=1 批量测试整体准确率只有72%，请问是什么问题？",
        "state": "closed",
        "user": "DavidLeeDVD",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-14T08:17:28+00:00",
        "updated_at": "2021-01-14T11:55:44+00:00",
        "closed_at": "2021-01-14T11:55:44+00:00",
        "comments_count": [
            "littletomatodonkey",
            "DavidLeeDVD",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 484,
        "title": "MobileNetV2的__all__少点符号吧。。",
        "body": "![image](https://user-images.githubusercontent.com/59385982/102238539-d33e7d00-3f30-11eb-8c08-00c6aa912206.png)\r\n",
        "state": "closed",
        "user": "lliony",
        "closed_by": "lliony",
        "created_at": "2020-12-15T15:54:15+00:00",
        "updated_at": "2020-12-15T15:56:44+00:00",
        "closed_at": "2020-12-15T15:55:25+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 486,
        "title": "During CPU training, validation accuracy is always much smaller than training accuracy",
        "body": "Hi, @luotao1 \r\n\r\nWe enabled resnet50 and se-resnext oneDNN dygraph training in models repo https://github.com/PaddlePaddle/models, both achieved good accuracy.\r\nSince `models` repo will be deprecated soon, we move to `PaddleClas` repo recently, but we found that using the yaml and scripts in PaddleClas, the training accuracy and validation accuracy has big gap. In detail, after some epoches of training, resnet50 and se-resnext dygraph training accuracy improve as expected, but validation accuracy is much lower than training accuracy.\r\n\r\nWe do not understand the cause of the accuracy gap between training accuracy and validation. In theory, models repo and PaddleClas repo only provide training script, operators are all from Paddle repo. But it turn out models repo run well but PaddleClas repo have big training and validation accuracy gap.\r\n\r\nCould you please give some suggestions? Thank you very much !\r\n\r\n@arlesniak could provide the log of training.\r\n\r\n",
        "state": "closed",
        "user": "lidanqing-intel",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-16T05:30:01+00:00",
        "updated_at": "2021-01-14T11:57:18+00:00",
        "closed_at": "2021-01-14T11:57:18+00:00",
        "comments_count": [
            "littletomatodonkey",
            "arlesniak",
            "arlesniak",
            "littletomatodonkey",
            "arlesniak",
            "CZH-TOP",
            "arlesniak",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 487,
        "title": "Train paddlepaddle，报错AssertionError: can't find PADDLE_TRAINER_ENDPOINTS",
        "body": "报错背景:\r\n自制数据集，用带GPU服务器训练时报错\r\n\r\n在train时报错:\r\ntrain命令:\r\npython tools/train.py -c ./configs/MobileNetV3/MobileNetV3_small_x1_0.yaml -o pretrained_model=\"./pretrained/MobileNesdftV3_small_x1_0_pretrained\" -o use_gpu=True\r\n\r\n报错信息：\r\n![报错](https://user-images.githubusercontent.com/39506711/102321927-4c81b280-3fb9-11eb-8d50-a463c971a740.png)\r\n\r\n请问该怎么解决呢\r\n\r\n\r\n",
        "state": "closed",
        "user": "yimintao",
        "closed_by": "yimintao",
        "created_at": "2020-12-16T08:11:32+00:00",
        "updated_at": "2020-12-17T01:19:43+00:00",
        "closed_at": "2020-12-17T01:19:43+00:00",
        "comments_count": [
            "yimintao",
            "littletomatodonkey",
            "yimintao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 499,
        "title": "ResNet50_vd_10w_pretrained 模型解压模型文件异常",
        "body": "参考：PaddleClas/docs/zh_CN/application/transfer_learning.md  中的描述，下载ResNet50_vd_10w_pretrained.tar模型，该模型解压后只有一个文件：ResNet50_vd_10w_pretrained，并非常用的模型结构。并且使用export导出模型命令报错。感觉这个模型文件是否存在异常。",
        "state": "closed",
        "user": "stopit",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-17T10:59:54+00:00",
        "updated_at": "2021-01-05T11:44:54+00:00",
        "closed_at": "2021-01-05T11:44:54+00:00",
        "comments_count": [
            "littletomatodonkey",
            "TingquanGao",
            "stopit",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 501,
        "title": "HSresnet",
        "body": "Hello，in your paper, you propose that: Unlike Res2Net[9], we avoid producing the abundant and even redundant information contained in the feature maps and the network can learn richer feature representation.请问这个如何理解呢？从哪个角度说明新的HS网络能够避免提取冗余信息呢？感谢",
        "state": "closed",
        "user": "wangsun1996",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-18T03:56:37+00:00",
        "updated_at": "2022-03-16T04:07:00+00:00",
        "closed_at": "2022-03-16T04:06:58+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 504,
        "title": "GhostNet_x1_0.yaml加载预训练模型训练，报错",
        "body": "配置文件：!export CUDA_VISIBLE_DEVICES=0\r\n!cd work/PaddleClass && python -m paddle.distributed.launch \\\r\n--selected_gpus=\"0\" tools/train.py \\\r\n-c ./configs/GhostNet/GhostNet_x1_0.yaml\r\n报错：Architecture [GhostNet_x1_0] is not exist! Maybe you want: [ShuffleNetV2_x1_0, MobileNetV1_x0_5, MobileNetV1_x1_0, MobileNetV2_x1_0, MobileNetV1_x0_25, MobileNetV1_x0_75, ShuffleNetV2_x0_5, ShuffleNetV2_x1_5, ShuffleNetV2_x2_0, SE_HRNet_W18_C]",
        "state": "closed",
        "user": "yy11223",
        "closed_by": "yy11223",
        "created_at": "2020-12-20T12:46:15+00:00",
        "updated_at": "2020-12-25T06:28:50+00:00",
        "closed_at": "2020-12-25T06:28:50+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yy11223",
            "cuicheng01",
            "yy11223",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 510,
        "title": "非动物的分类是如何实现的？",
        "body": "使用教程里的ResNet50_vd_ssld_random_erasing_finetune.yaml做训练，使用自定义数据集，在预测时，发现类似的图，识别度高，但不相干的图误识别很严重，而且分值都很高，不清楚原因，并想了解学习一下百度识别里的非动物是如何实现的。",
        "state": "closed",
        "user": "fish-hello",
        "closed_by": "fish-hello",
        "created_at": "2020-12-23T07:41:10+00:00",
        "updated_at": "2021-01-25T07:24:13+00:00",
        "closed_at": "2021-01-25T07:24:13+00:00",
        "comments_count": [
            "littletomatodonkey",
            "fish-hello",
            "littletomatodonkey",
            "fish-hello"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 511,
        "title": "你好，想问下，用MobileNetV3-large预训练模型做分类，MobileNetV3没有softmax层，网络是怎么样进行分类的呢？",
        "body": "",
        "state": "closed",
        "user": "yy11223",
        "closed_by": "yy11223",
        "created_at": "2020-12-24T04:54:44+00:00",
        "updated_at": "2020-12-25T06:23:10+00:00",
        "closed_at": "2020-12-25T06:23:10+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yy11223"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 516,
        "title": "10w分类的labels对照表在哪里可以查到？",
        "body": "ResNet50_vd, 百度开源了自研的大规模分类预训练模型，其中训练数据为10万个类别，4300万张图片。\r\n\r\n- 这个模型只提供了下载链接，在模型预测的只会给出预测的label索引（例如：6），以及对应的概率分数，我想知道lable的对应表在哪里可以查到。（例如，6代表苹果）。\r\n",
        "state": "closed",
        "user": "xxyliuyang",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-28T01:52:47+00:00",
        "updated_at": "2021-01-08T03:42:47+00:00",
        "closed_at": "2021-01-08T03:42:47+00:00",
        "comments_count": [
            "littletomatodonkey",
            "xxyliuyang",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 519,
        "title": "关于训练好的PaddleClas模型转换nb模型时遇到的问题",
        "body": "首先，我按照教程将训好的模型文件导出，得到pdmodel、pdiparams、以及pdiparams.info三个文件，之后将这三个文件转nb文件时的指令时这样的：\r\npaddle_lite_opt --model_file=/home/HwHiAiUser/Paddle-Lite/models/light_clas/air_light.pdmodel --param_file=/home/HwHiAiUser/Paddle-Lite/models/air_light/air_light.pdiparams --optimize_out=./models/light_clas --optimize_out_type=naive_buffer --valid_targets=arm\r\n结果报错是读取不了参数文件，之前转过PaddleDetection的nb模型没有遇到这种情况\r\n![微信图片_20201228143619](https://user-images.githubusercontent.com/55674601/103194331-41fcdc80-491a-11eb-967f-33aaec05b6a4.png)\r\n\r\n请问是哪里的问题，PaddleClas和PaddleDetection导出的模型文件格式也不一样，是这个原因吗\r\n\r\n",
        "state": "closed",
        "user": "ChaunceySun7",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2020-12-28T06:35:29+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:06:59+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ChaunceySun7",
            "littletomatodonkey",
            "ChaunceySun7",
            "TingquanGao",
            "ChaunceySun7",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 520,
        "title": "灰度图训练",
        "body": "你好\r\n训练样本为低分辨率灰度图，我将配置文件调整为image_shape: [1, 160, 160]，batch_size为64。\r\n将图片转为灰度图方法为\r\n    im_gray = cv2.imread(srcImg, cv2.IMREAD_GRAYSCALE)\r\n    cv2.imwrite(dstImg, im_gray)\r\n但训练时候报错\r\n  \"The following exception is not an EOF exception.\")\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 158, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 123, in main\r\n    epoch_id, 'train', config, vdl_writer)\r\n  File \"/home/path_to_clone_PaddleClas/PaddleClas/tools/program.py\", line 435, in run\r\n    metrics = exe.run(program=program, feed=batch, fetch_list=fetch_list)\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/paddle/fluid/executor.py\", line 1071, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/paddle/fluid/executor.py\", line 1066, in run\r\n    return_merged=return_merged)\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/paddle/fluid/executor.py\", line 1167, in _run_impl\r\n    return_merged=return_merged)\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/paddle/fluid/executor.py\", line 873, in _run_parallel\r\n    check_feed_shape_type(var, tensor)\r\n  File \"/usr/local/python3.5.1/lib/python3.5/site-packages/paddle/fluid/executor.py\", line 225, in check_feed_shape_type\r\n    (var.name, len(var.shape), var.shape, diff_shape))\r\nValueError: The fed Variable 'feed_image' should have dimensions = 4, shape = (-1, 1, 160, 160), but received fed shape [64, 3, 160, 160] on each device\r\n是否为paddle读取图片时默认是3通道的？\r\n",
        "state": "closed",
        "user": "Qggg",
        "closed_by": "littletomatodonkey",
        "created_at": "2020-12-28T08:28:00+00:00",
        "updated_at": "2021-01-08T02:57:08+00:00",
        "closed_at": "2021-01-08T02:57:08+00:00",
        "comments_count": [
            "TingquanGao",
            "Qggg",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 523,
        "title": "关于使用coco预训练的问题",
        "body": "你好！请问，如果我想使用一个coco上预训练好的模型，在我自己的数据集上进行训练，学习率是否需要进行调整（调小）？",
        "state": "closed",
        "user": "tianlanshidai",
        "closed_by": "tianlanshidai",
        "created_at": "2020-12-29T08:16:05+00:00",
        "updated_at": "2020-12-29T08:16:29+00:00",
        "closed_at": "2020-12-29T08:16:28+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 532,
        "title": "快速开始的示例参数有误。",
        "body": "如以下地址，PaddleClas/docs/zh_CN/tutorials/getting_started.md，我参考《3. 使用预训练模型进行模型预测》和《4. 使用inference模型模型推理》时发现，数据集是使用flowers102，一直不能预测出正确的结果，而且出现了几百的类id，如下。\r\n        top1, class id: 223, probability: 0.0025\r\n        top2, class id: 921, probability: 0.0023\r\n        top3, class id: 498, probability: 0.0022\r\n        top4, class id: 286, probability: 0.0021\r\n        top5, class id: 565, probability: 0.0021\r\n阅读代码发现默认的输出层是1000！\r\n所以《3. 使用预训练模型进行模型预测》里的原执行\r\n`python tools\\infer\\infer.py -i .\\dataset\\flowers102\\jpg\\image_00001.jpg --model ResNet50_vd --pretrained_model .\\output\\ResNet50_vd\\best_model\\ppcls --use_gpu True --load_static_weights False`\r\n改为↓↓↓↓↓↓↓↓↓，加多class_num选项。\r\n`python tools\\infer\\infer.py -i .\\dataset\\flowers102\\jpg\\image_00001.jpg --model ResNet50_vd --pretrained_model .\\output\\ResNet50_vd\\best_model\\ppcls --use_gpu True --load_static_weights False --class_num 102`\r\n所以《4. 使用inference模型模型推理》里的生成模型原执行\r\n`python tools\\export_model.py --model ResNet50_vd --pretrained_model .\\output\\ResNet50_vd\\best_model\\ppcls --output_path .\\inference`\r\n改为↓↓↓↓↓↓↓↓↓，加多class_dim选项。\r\n`python tools\\export_model.py --model ResNet50_vd --pretrained_model .\\output\\ResNet50_vd\\best_model\\ppcls --output_path .\\inference --class_dim 102 `\r\n\r\n劳烦确认一下是否正确。\r\n",
        "state": "closed",
        "user": "AlexDish",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-01-01T04:29:00+00:00",
        "updated_at": "2021-01-08T03:42:33+00:00",
        "closed_at": "2021-01-08T03:42:33+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 533,
        "title": "paddleclas训练出错",
        "body": "W0104 11:15:21.373939  3389 device_context.cc:320] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 10.1, Runtime API Version: 10.1\r\nW0104 11:15:21.378572  3389 device_context.cc:330] device: 0, cuDNN Version: 7.6.\r\n2021-01-04 11:15:26 INFO: If regularizer of a Parameter has been set by 'paddle.ParamAttr' or 'static.WeightNormParamAttr' already. The weight_decay[L2Decay, regularization_coeff=0.000001] in Optimizer will not take effect, and it will only be applied to other Parameters!\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1245: UserWarning: Skip loading for out.weight. out.weight receives a shape [1280, 1000], but the expected shape is [1280, 6].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1245: UserWarning: Skip loading for out.bias. out.bias receives a shape [1000], but the expected shape is [6].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n2021-01-04 11:15:26 INFO: Finish initing model from ./pretrained/MobileNetV3_large_x1_0_pretrained\r\n2021-01-04 11:15:26 ERROR: DataLoader reader thread raised an exception!\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 118, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    epoch_id, 'train')\r\n  File \"/home/aistudio/work/PaddleClas/tools/program.py\", line 300, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 771, in __next__\r\n    data = self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:154)\r\n  [Hint: If you need C++ stacktraces for debugging, please set `FLAGS_call_stack_level=2`.]",
        "state": "closed",
        "user": "yy11223",
        "closed_by": "yy11223",
        "created_at": "2021-01-04T03:18:41+00:00",
        "updated_at": "2021-03-27T08:52:05+00:00",
        "closed_at": "2021-01-05T06:21:27+00:00",
        "comments_count": [
            "littletomatodonkey",
            "wa3926"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 534,
        "title": "模型用inter/predict推理,批量预测，输入为文件夹，出错",
        "body": "trainers_endpoints: 127.0.0.1:6170 , node_id: 0 , current_node_ip: 127.0.0.1 , num_nodes: 1 , node_ips: ['127.0.0.1'] , nranks: 1\r\nTraceback (most recent call last):\r\n  File \"tools/infer/predict.py\", line 160, in <module>\r\n    main()\r\n  File \"tools/infer/predict.py\", line 121, in main\r\n    inputs = preprocess(args.image_file, operators)\r\n  File \"tools/infer/predict.py\", line 88, in preprocess\r\n    data = open(fname, 'rb').read()\r\nIsADirectoryError: [Errno 21] Is a directory: './dataset/test/by'\r\n2021-01-04 11:34:19,144-ERROR: ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nERROR 2021-01-04 11:34:19,144 launch.py:284] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.",
        "state": "closed",
        "user": "yy11223",
        "closed_by": "yy11223",
        "created_at": "2021-01-04T03:38:11+00:00",
        "updated_at": "2021-01-05T06:17:32+00:00",
        "closed_at": "2021-01-05T06:17:32+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 537,
        "title": "Dataloader总是报进程错误，我用的是快速开始的案例",
        "body": "ERROR: DataLoader reader thread raised an exception! Traceback (most recent call last):   File \"tools/train.py\", line 118, in <module>     main(args)   File \"tools/train.py\", line 90, in main     epoch_id, 'train')   File \"/home/aistudio/PaddleClas/tools/program.py\", line 300, in run     for idx, batch in enumerate(dataloader()):   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 771, in __next__ Exception in thread Thread-1: Traceback (most recent call last):   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 676, in _get_data     data = self._data_queue.get(timeout=self._timeout)   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/multiprocessing/queues.py\", line 105, in get     raise Empty _queue.Empty  During handling of the above exception, another exception occurred:  Traceback (most recent call last):   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 926, in _bootstrap_inner     self.run()   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 870, in run     self._target(*self._args, **self._kwargs)   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 608, in _thread_loop     batch = self._get_data()   File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 692, in _get_data     \"pids: {}\".format(len(failed_workers), pids)) RuntimeError: DataLoader 4 workers exit unexpectedly, pids: 9264, 9265, 9266, 9267      data = self._reader.read_next_var_list() SystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.   [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:154)   [Hint: If you need C++ stacktraces for debugging, please set `FLAGS_call_stack_level=2`.]",
        "state": "closed",
        "user": "lliony",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-01-05T07:56:19+00:00",
        "updated_at": "2021-01-14T11:50:21+00:00",
        "closed_at": "2021-01-14T11:50:21+00:00",
        "comments_count": [
            "bjjwwang",
            "littletomatodonkey",
            "linhandev",
            "littletomatodonkey",
            "linhandev",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 538,
        "title": "range of jsd loss in SSLD ",
        "body": "Thanks for your excellent work on distillation. I just read the code of `JSDivLoss` and implement it in pytorch as follow.\r\n\r\n```python\r\ndef jsdiv_loss(y_s, y_t):\r\n\tp_s = F.softmax(y_s, dim=1)\r\n\tp_t = F.softmax(y_t, dim=1)\r\n\tloss = (F.kl_div(p_s, p_t, reduction=\"sum\") * y_s.shape[1] + \\\r\n\t\t\tF.kl_div(p_t, p_s, reduction=\"sum\") * y_s.shape[1]) / 2.\r\n\tloss = loss / y_s.shape[0]\r\n\treturn loss\r\n```\r\n\r\nWhen I start to train the distill model, I found the jsd loss is negative. I just want to know the correction of this implementation and the range of jsd loss.\r\n\r\nThanks for your time. ",
        "state": "closed",
        "user": "L1aoXingyu",
        "closed_by": "L1aoXingyu",
        "created_at": "2021-01-05T08:13:29+00:00",
        "updated_at": "2021-01-06T07:24:51+00:00",
        "closed_at": "2021-01-06T07:24:51+00:00",
        "comments_count": [
            "littletomatodonkey",
            "L1aoXingyu",
            "littletomatodonkey",
            "L1aoXingyu",
            "littletomatodonkey",
            "L1aoXingyu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 540,
        "title": "PaddleClas不支持单进程GPU多卡训练",
        "body": "新版的PaddleClas dygraph不支持本地单进程GPU多卡训练\r\n\r\n```\r\npython3.7 tools/static/train.py \\\r\n-c configs/quick_start/ResNet50_vd.yaml  \\ \r\n-o use_gpu=True \r\n-o is_distributed=False\r\n```\r\n\r\n原先老的PaddleCV下面的示例demo是能支持本地单进程GPU多卡训练的\r\nhttps://github.com/PaddlePaddle/models/tree/develop/PaddleCV/image_classification\r\n```\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3\r\nexport FLAGS_fraction_of_gpu_memory_to_use=0.98\r\n\r\npython train.py \\\r\n        --data_dir=./data/ILSVRC2012/ \\\r\n        --total_images=1281167 \\\r\n        --class_dim=1000 \\\r\n        --validate=True \\\r\n        --model=ResNet50_vd \\\r\n        --batch_size=256 \\\r\n        --lr_strategy=cosine_decay \\\r\n        --lr=0.1 \\\r\n        --num_epochs=200 \\\r\n        --model_save_dir=output/ \\\r\n        --l2_decay=7e-5 \\\r\n        --use_mixup=True \\\r\n        --use_label_smoothing=True \\\r\n        --label_smoothing_epsilon=0.1\r\n```\r\n\r\n",
        "state": "closed",
        "user": "vslyu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-06T10:59:09+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:00+00:00",
        "comments_count": [
            "duohappy",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 555,
        "title": "用自己的数据微调网络，训练100多个step之后报错中断",
        "body": "警告：DataLoader reader thread raised an exception.\r\n报错定位的位置是：“paddle/fluid/dataloader/dataloader_iter.py, line 356, in __next__  return self._reader.read_next_var_list()”\r\n\r\n感觉是图片的问题，但是同样的图片在TensorFlow上训练是没问题的，想请问在paddle框架下，什么样的图片可能导致这种问题？或者我怎样才能定位到导致错误的图片位置？",
        "state": "closed",
        "user": "githubWXB",
        "closed_by": "githubWXB",
        "created_at": "2021-01-11T08:32:25+00:00",
        "updated_at": "2021-01-11T09:15:31+00:00",
        "closed_at": "2021-01-11T09:15:31+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 553,
        "title": "resnet50基于10万数据的预训练模型无法加载",
        "body": "paddlepaddle：2.0版本\r\n使用paddle_clas无法加载resnet50基于10万数据的预训练模型，提示ResNet50_vd_10w_pretrained.pdparams不存在，因为这个预训练模型确实不是pdparams文件，请问应该如何解决呢？",
        "state": "closed",
        "user": "githubWXB",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-08T11:31:34+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:02+00:00",
        "comments_count": [
            "littletomatodonkey",
            "bityigoss",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 554,
        "title": "训练到validate出错KeyError: 'top2'",
        "body": "训练到validate出错\r\n模型为ResNet101_vd，paddledetection版本是直接从库clone,配置文件是参考默认配置ResNet101_vd.yaml\r\n\r\n2021-01-10 03:01:54 INFO: END epoch:0 train loss: 0.46529, batch_cost: 0.27681 s, reader_cost: 0.00457 s, batch_cost_sum: 287.04682 s, ips: 115.60483 images/sec.\r\nTraceback (most recent call last):\r\nFile \"tools/train.py\", line 118, in\r\nmain(args)\r\nFile \"tools/train.py\", line 97, in main\r\nNone, epoch_id, 'valid')\r\nFile \"/home/2Nbeta/PaddleClas/tools/program.py\", line 331, in run\r\nmetric_list[name].update(fetch.numpy()[0], batch_size)\r\nKeyError: 'top2'",
        "state": "closed",
        "user": "abanger",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-10T03:41:32+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:03+00:00",
        "comments_count": [
            "CZH-TOP",
            "enteguo",
            "abanger",
            "huangch1024",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 557,
        "title": "关于训练数据的不同尺寸差异较大的问题",
        "body": "你好，我在用MobileNetV3_large_x1_0模型训练自己的分类模型时，发现识别的准确率并不理想，猜想可能我使用的训练数据的尺寸差异较大是其中一个原因，有的小的不到100 * 100，大的会到1000 * 1000多，请问这种情况对于分类效果会有影响吗？\r\n如果有影响的话，是否需要我对该网络结构进行修改？或者是否支持多尺度训练？",
        "state": "closed",
        "user": "ChaunceySun7",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-14T05:50:14+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:03+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey",
            "ChaunceySun7",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 563,
        "title": "您好，请问训练模型时，怎样在transforms中禁掉RandCropImage、RandFlipImage操作，需要怎样修改配置文件？",
        "body": "",
        "state": "closed",
        "user": "yanqing013",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-16T07:30:57+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:05+00:00",
        "comments_count": [
            "CZH-TOP",
            "yanqing013",
            "littletomatodonkey",
            "wa3926",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 562,
        "title": "The setting of Parameter-Server must has server_num or servers.",
        "body": "PS D:\\Code\\PaddleClas> D:\\Code\\PaddleClas\\venv\\Scripts\\python.exe -m paddle.distributed.launch .\\tools\\train.py -c .\\configs\\quick_start\\ResNet50_vd.yaml\r\n-----------  Configuration Arguments -----------\r\ngpus: None\r\nheter_worker_num: None\r\nheter_workers:\r\nhttp_port: None\r\nips: 127.0.0.1\r\nlog_dir: log\r\nnproc_per_node: None\r\nserver_num: None\r\nservers:\r\ntraining_script: .\\tools\\train.py\r\ntraining_script_args: ['-c', '.\\\\configs\\\\quick_start\\\\ResNet50_vd.yaml']\r\nworker_num: None\r\nworkers:\r\n------------------------------------------------\r\nWARNING 2021-01-15 22:09:04,270 launch.py:308] Not found distinct arguments and not compiled with cuda. Default use ps mode\r\nTraceback (most recent call last):\r\n  File \"D:\\Program Files\\Python\\lib\\runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"D:\\Program Files\\Python\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"D:\\Code\\PaddleClas\\venv\\lib\\site-packages\\paddle\\distributed\\launch.py\", line 16, in <module>\r\n    launch.launch()\r\n  File \"D:\\Code\\PaddleClas\\venv\\lib\\site-packages\\paddle\\distributed\\fleet\\launch.py\", line 328, in launch\r\n    launch_ps(args, distribute_mode)\r\n  File \"D:\\Code\\PaddleClas\\venv\\lib\\site-packages\\paddle\\distributed\\fleet\\launch.py\", line 261, in launch_ps\r\n    ps_launcher = ParameterServerLauncher(args, distribute_mode)\r\n  File \"D:\\Code\\PaddleClas\\venv\\lib\\site-packages\\paddle\\distributed\\fleet\\launch_utils.py\", line 717, in __init__\r\n    self.get_role_endpoints(args)\r\n  File \"D:\\Code\\PaddleClas\\venv\\lib\\site-packages\\paddle\\distributed\\fleet\\launch_utils.py\", line 734, in get_role_endpoints\r\n    assert args.servers != \"\", \"The setting of Parameter-Server must has server_num or servers.\"\r\nAssertionError: The setting of Parameter-Server must has server_num or servers.",
        "state": "closed",
        "user": "mr-abccc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-15T14:30:20+00:00",
        "updated_at": "2022-03-16T04:07:07+00:00",
        "closed_at": "2022-03-16T04:07:04+00:00",
        "comments_count": [
            "CZH-TOP",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 574,
        "title": "知识蒸馏过程中遇到的问题",
        "body": "问题一：\r\n教师模型：使用基于10w类的resnet50_vd预训练模型在目标数据集上微调后作为教师模型\r\n学生模型：使用基于1000类的mobilenetV2预训练模型作为学生模型\r\n上述模型添加后运行报错，原因是名字冲突，问题如下：\r\n1. 在知识蒸馏文档的“3.4.2 模型名字冲突问题的解决办法”中介绍了两个模型变量冲突时的解决办法，但我在蒸馏模型的定义文件“ppcls/modeling/architectures/distillation_models.py”中按照3.4.2文档内容做修改，但运行报错，提示没有postfix_name这个变量，看了学生网络的init函数，确实没有这个参数，而且distillation_models.py中网络的定义方式与3.4.2中给出的不同，请问这个是我改错了位置还是新版做了修改？\r\n\r\n问题二：\r\n教师模型：使用基于10w类的resnet50_vd预训练模型在目标数据集上微调后作为教师模型\r\n学生模型：使用基于1000类的mobilenetV3预训练模型作为学生模型\r\n使用这个组合没有出现变量名冲突的问题，且成功训练出模型，但通过predict.py测试时给出了警告“UserWarning:Skip loading for last_second_conv.bn._mean. last_second_con.bn._mean is not found in the provided dict.”，之后得到的测试准确率（用验证集数据测的）只有10%左右，且6个类别基本都识别成了第4和第5类，与训练时验证集的准确率80%严重不一致，怀疑是警告中的问题导致，请问这个应该如何解决？",
        "state": "closed",
        "user": "githubWXB",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-01-22T02:12:14+00:00",
        "updated_at": "2021-03-08T02:39:42+00:00",
        "closed_at": "2021-03-08T02:39:42+00:00",
        "comments_count": [
            "littletomatodonkey",
            "githubWXB",
            "littletomatodonkey",
            "githubWXB",
            "littletomatodonkey",
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 577,
        "title": "灰度图使用哪个预训练模型，预测效果会更好？",
        "body": "识别黑白照里的动物，是夜晚相机拍的，都是黑白灰，也不算灰度图吧，发现使用ResNet50_vd_ssld效果不好，有什么好办法吗？下图是示例。\r\n![image](https://user-images.githubusercontent.com/72905070/105679646-b6cb3280-5f29-11eb-86a0-18cb66f22ee0.png)\r\n",
        "state": "closed",
        "user": "fish-hello",
        "closed_by": "fish-hello",
        "created_at": "2021-01-25T08:24:42+00:00",
        "updated_at": "2021-02-03T09:11:30+00:00",
        "closed_at": "2021-02-03T09:11:30+00:00",
        "comments_count": [
            "littletomatodonkey",
            "fish-hello",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 588,
        "title": "训练自定义数据集出错",
        "body": "在代码里面找到了`ResizeImage : size`解决了resize的问题(建议补充config文档)，但是又遇到新的问题\r\n```\r\nRuntimeError: (NotFound) Operator conv2d does not have kernel for data_type[uint8_t]:data_layout[ANY_LAYOUT]:place[CUDAPlace(0)]:library_type[CUDNN].\r\n  [Hint: Expected kernel_iter != kernels.end(), but received kernel_iter == kernels.end().] (at D:\\v2.0.0\\paddle\\paddle\\fluid\\imperative\\prepared_operator.cc:127)\r\n  [operator < conv2d > error]\r\n```\r\n\r\n我的环境是：\r\nWindows 10\r\nCUDA 10.2\r\nCUDNN 7.6.5\r\npaddlepaddle-gpu 2.0\r\n\r\n\r\n- - -\r\n\r\n你好，我在训练自定义数据集时一直报错` DataLoader reader thread raised an exception`；我检查了自己的配置文件，查看了源码，都看不出来问题在哪里。我的图片数据是放在`F:/DRD/train`，机器的内存和显存也是正常的。\r\n\r\n这是配置\r\n```yaml\r\nTRAIN:\r\n  batch_size: 32\r\n  num_workers: 0\r\n  file_list: \"./custom/train_list.txt\"\r\n  data_dir: \"F:/DRD/train\"\r\n  shuffle_seed: 0\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: False\r\n        to_np: False\r\n        channel_first: False\r\n    - NormalizeImage:\r\n        scale: 1./255.\r\n```\r\n\r\n这是`train_list.txt`的数据格式\r\n```\r\n10_left.jpeg 0\r\n10_right.jpeg 0\r\n13_left.jpeg 0\r\n13_right.jpeg 0\r\n15_left.jpeg 1\r\n15_right.jpeg 2\r\n16_left.jpeg 4\r\n16_right.jpeg 4\r\n```\r\n\r\n补充：通过debug后解决了一开始遇到的问题，现在遇到了新的问题`all input arrays must have the same shape`，我的数据里面所有图片的尺寸不是固定的，但是框架在数据预处理的时候没有根据设定的`image_shape`进行resize吗？是需要自己来进行resize吗？\r\n",
        "state": "closed",
        "user": "choimroc",
        "closed_by": "choimroc",
        "created_at": "2021-01-29T14:13:32+00:00",
        "updated_at": "2021-01-31T15:22:40+00:00",
        "closed_at": "2021-01-31T15:22:40+00:00",
        "comments_count": [
            "littletomatodonkey",
            "choimroc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 596,
        "title": "why not provide ssld config files?",
        "body": "",
        "state": "closed",
        "user": "MagicCodess",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-02T13:10:49+00:00",
        "updated_at": "2022-03-16T04:07:09+00:00",
        "closed_at": "2022-03-16T04:07:08+00:00",
        "comments_count": [
            "littletomatodonkey",
            "zhanghang1989",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 589,
        "title": "How to use PaddleClas to extract image feature",
        "body": "你好，请问如何用 PaddleClas 来提取图片特征，并用于相似图像计算呢？看了很久，只发现 predictor，好像并没有看见文档怎么样提取中间层的特征，请问这个要怎么做呢？Thanks",
        "state": "closed",
        "user": "lun-lun-byte",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-30T20:52:43+00:00",
        "updated_at": "2022-03-16T04:07:08+00:00",
        "closed_at": "2022-03-16T04:07:06+00:00",
        "comments_count": [
            "littletomatodonkey",
            "lun-lun-byte",
            "littletomatodonkey",
            "lun-lun-byte",
            "littletomatodonkey",
            "wind2008hxy",
            "yanchaoguo",
            "yanchaoguo",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 590,
        "title": "IPS becomes slow when train",
        "body": "你好，我在使用分布式计算的时候，发现一个问题。无论单 gpu 还是多 gpu 都可能会出现，就是 ips 随着训练的增加在不断的变慢。不知道这个情况是什么原因？是正常的吗？\r\n\r\n从最开始的 160+ 现在降低到了 60+\r\n\r\n2021-01-31 06:32:43 INFO: epoch:0  , train step:260 , top1: 0.34375, top5: 0.54688, loss: 3.33287, lr: 0.003750, batch_cost: 0.59293 s, reader_cost: 0.00416 s, ips: 107.93876 images/sec.\r\n2021-01-31 06:32:49 INFO: epoch:0  , train step:270 , top1: 0.42188, top5: 0.67188, loss: 2.83522, lr: 0.003750, batch_cost: 0.59300 s, reader_cost: 0.00417 s, ips: 107.92617 images/sec.\r\n2021-01-31 06:32:55 INFO: epoch:0  , train step:280 , top1: 0.35938, top5: 0.60938, loss: 3.29248, lr: 0.003750, batch_cost: 0.59318 s, reader_cost: 0.00415 s, ips: 107.89305 images/sec.\r\n2021-01-31 06:33:01 INFO: epoch:0  , train step:290 , top1: 0.39062, top5: 0.57812, loss: 3.29120, lr: 0.003750, batch_cost: 0.59336 s, reader_cost: 0.00415 s, ips: 107.85952 images/sec.\r\n2021-01-31 06:33:07 INFO: epoch:0  , train step:300 , top1: 0.39062, top5: 0.64062, loss: 3.06950, lr: 0.003750, batch_cost: 0.59353 s, reader_cost: 0.00418 s, ips: 107.83008 images/sec.\r\n2021-01-31 06:33:13 INFO: epoch:0  , train step:310 , top1: 0.46875, top5: 0.64062, loss: 3.00235, lr: 0.003750, batch_cost: 0.59367 s, reader_cost: 0.00418 s, ips: 107.80418 images/sec.\r\n2021-01-31 06:33:19 INFO: epoch:0  , train step:320 , top1: 0.37500, top5: 0.59375, loss: 3.21233, lr: 0.003750, batch_cost: 0.59379 s, reader_cost: 0.00418 s, ips: 107.78153 images/sec.\r\n2021-01-31 06:33:25 INFO: epoch:0  , train step:330 , top1: 0.39062, top5: 0.73438, loss: 2.76224, lr: 0.003750, batch_cost: 0.59390 s, reader_cost: 0.00417 s, ips: 107.76264 images/sec.\r\n2021-01-31 06:33:31 INFO: epoch:0  , train step:340 , top1: 0.42188, top5: 0.76562, loss: 2.48807, lr: 0.003750, batch_cost: 0.59397 s, reader_cost: 0.00418 s, ips: 107.75038 images/sec.\r\n2021-01-31 06:33:37 INFO: epoch:0  , train step:350 , top1: 0.40625, top5: 0.64062, loss: 2.92193, lr: 0.003750, batch_cost: 0.59409 s, reader_cost: 0.00416 s, ips: 107.72722 images/sec.\r\n2021-01-31 06:33:43 INFO: epoch:0  , train step:360 , top1: 0.42188, top5: 0.71875, loss: 2.48192, lr: 0.003750, batch_cost: 0.59421 s, reader_cost: 0.00411 s, ips: 107.70585 images/sec.\r\n2021-01-31 06:33:49 INFO: epoch:0  , train step:370 , top1: 0.59375, top5: 0.71875, loss: 2.31386, lr: 0.003750, batch_cost: 0.59433 s, reader_cost: 0.00405 s, ips: 107.68430 images/sec.\r\n2021-01-31 06:34:05 INFO: epoch:0  , train step:380 , top1: 0.42188, top5: 0.68750, loss: 2.65925, lr: 0.003750, batch_cost: 0.62323 s, reader_cost: 0.02571 s, ips: 102.69142 images/sec.\r\n2021-01-31 06:34:27 INFO: epoch:0  , train step:390 , top1: 0.46875, top5: 0.75000, loss: 2.27173, lr: 0.003750, batch_cost: 0.66463 s, reader_cost: 0.03847 s, ips: 96.29410 images/sec.\r\n2021-01-31 06:34:34 INFO: epoch:0  , train step:400 , top1: 0.43750, top5: 0.78125, loss: 2.49080, lr: 0.003750, batch_cost: 0.66615 s, reader_cost: 0.03755 s, ips: 96.07419 images/sec.\r\n2021-01-31 06:35:20 INFO: epoch:0  , train step:410 , top1: 0.40625, top5: 0.78125, loss: 2.26234, lr: 0.003750, batch_cost: 0.76375 s, reader_cost: 0.06522 s, ips: 83.79754 images/sec.\r\n2021-01-31 06:35:26 INFO: epoch:0  , train step:420 , top1: 0.53125, top5: 0.73438, loss: 2.25459, lr: 0.003750, batch_cost: 0.75933 s, reader_cost: 0.06369 s, ips: 84.28531 images/sec.\r\n2021-01-31 06:35:32 INFO: epoch:0  , train step:430 , top1: 0.54688, top5: 0.85938, loss: 2.02771, lr: 0.003750, batch_cost: 0.75543 s, reader_cost: 0.06222 s, ips: 84.72001 images/sec.\r\n2021-01-31 06:36:11 INFO: epoch:0  , train step:440 , top1: 0.51562, top5: 0.73438, loss: 2.63670, lr: 0.003750, batch_cost: 0.82935 s, reader_cost: 0.07086 s, ips: 77.16929 images/sec.\r\n2021-01-31 06:36:17 INFO: epoch:0  , train step:450 , top1: 0.51562, top5: 0.73438, loss: 2.26058, lr: 0.003750, batch_cost: 0.82396 s, reader_cost: 0.06931 s, ips: 77.67383 images/sec.\r\n2021-01-31 06:36:28 INFO: epoch:0  , train step:460 , top1: 0.53125, top5: 0.78125, loss: 2.20348, lr: 0.003750, batch_cost: 0.82997 s, reader_cost: 0.06782 s, ips: 77.11105 images/sec.\r\n2021-01-31 06:37:06 INFO: epoch:0  , train step:470 , top1: 0.56250, top5: 0.85938, loss: 2.11214, lr: 0.003750, batch_cost: 0.89306 s, reader_cost: 0.06717 s, ips: 71.66383 images/sec.\r\n2021-01-31 06:37:12 INFO: epoch:0  , train step:480 , top1: 0.50000, top5: 0.78125, loss: 2.10245, lr: 0.003750, batch_cost: 0.88677 s, reader_cost: 0.06579 s, ips: 72.17170 images/sec.\r\n2021-01-31 06:37:31 INFO: epoch:0  , train step:490 , top1: 0.51562, top5: 0.81250, loss: 2.09648, lr: 0.003750, batch_cost: 0.90930 s, reader_cost: 0.06446 s, ips: 70.38384 images/sec.\r\n2021-01-31 06:37:54 INFO: epoch:0  , train step:500 , top1: 0.53125, top5: 0.82812, loss: 2.04244, lr: 0.003750, batch_cost: 0.93664 s, reader_cost: 0.06319 s, ips: 68.32948 images/sec.\r\n2021-01-31 06:38:00 INFO: epoch:0  , train step:510 , top1: 0.64062, top5: 0.85938, loss: 1.97725, lr: 0.003750, batch_cost: 0.92988 s, reader_cost: 0.06197 s, ips: 68.82593 images/sec.\r\n2021-01-31 06:38:14 INFO: epoch:0  , train step:520 , top1: 0.48438, top5: 0.81250, loss: 2.12868, lr: 0.003750, batch_cost: 0.93948 s, reader_cost: 0.06809 s, ips: 68.12298 images/sec.\r\n2021-01-31 06:38:47 INFO: epoch:0  , train step:530 , top1: 0.64062, top5: 0.82812, loss: 1.88978, lr: 0.003750, batch_cost: 0.98483 s, reader_cost: 0.06683 s, ips: 64.98569 images/sec.\r\n2021-01-31 06:38:53 INFO: epoch:0  , train step:540 , top1: 0.51562, top5: 0.71875, loss: 2.61589, lr: 0.003750, batch_cost: 0.97754 s, reader_cost: 0.06561 s, ips: 65.47051 images/sec.\r\n2021-01-31 06:39:31 INFO: epoch:0  , train step:550 , top1: 0.53125, top5: 0.84375, loss: 1.90389, lr: 0.003750, batch_cost: 1.02872 s, reader_cost: 0.07237 s, ips: 62.21296 images/sec.\r\n2021-01-31 06:39:42 INFO: epoch:0  , train step:560 , top1: 0.56250, top5: 0.78125, loss: 2.00856, lr: 0.003750, batch_cost: 1.03154 s, reader_cost: 0.07111 s, ips: 62.04308 images/sec.\r\n",
        "state": "closed",
        "user": "lun-lun-byte",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-01-30T22:39:57+00:00",
        "updated_at": "2022-03-16T04:07:09+00:00",
        "closed_at": "2022-03-16T04:07:07+00:00",
        "comments_count": [
            "lun-lun-byte",
            "littletomatodonkey",
            "lun-lun-byte",
            "littletomatodonkey",
            "lun-lun-byte",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 600,
        "title": "How to deduplicate the ImageNet22k dataset and the ImageNet1k validation set?",
        "body": "Hi, I have a problem about the method to deduplicate the ImageNet22k dataset and the ImageNet1k validation set.\r\n![image](https://user-images.githubusercontent.com/19912756/106898246-e6025080-672e-11eb-80ff-789bb2c9aeb8.png)\r\nIn your doc, you said that you achieved this goal through using the sift feature similarity matching method, and it would be very kind of you to tell me the detailed informations about this method.\r\nI intend to generate the SIFT features of all the images in ImageNet1k validation set and compare the outputs with the SIFT features of pictures which are with the same labels in ImageNet22k dataset one by one. Is the deduplication method same with yours?\r\n\r\nThanks,\r\nEma1997",
        "state": "closed",
        "user": "Ema1997",
        "closed_by": "weisy11",
        "created_at": "2021-02-04T13:36:19+00:00",
        "updated_at": "2022-03-16T06:16:46+00:00",
        "closed_at": "2022-03-16T06:16:46+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Ema1997",
            "Ema1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 602,
        "title": "tools/export_serving_model.py文件不能导出模型",
        "body": "paddle2.0\r\n应该是最新的分支\r\n导出模型的时候报错如下\r\nTraceback (most recent call last):\r\n  File \"tools/export_serving_model.py\", line 80, in <module>\r\n    main()\r\n  File \"tools/export_serving_model.py\", line 67, in main\r\n    out = create_model(args, model, image, class_dim=args.class_dim)\r\n  File \"tools/export_serving_model.py\", line 48, in create_model\r\n    out = model.net(input=input, class_dim=class_dim)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 1039, in __getattr__\r\n    return object.__getattribute__(self, name)\r\nAttributeError: 'MobileNet' object has no attribute 'net'\r\n\r\n\r\n看了下确实没.net这个函数",
        "state": "closed",
        "user": "Reatris",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-05T09:43:26+00:00",
        "updated_at": "2022-03-16T04:07:11+00:00",
        "closed_at": "2022-03-16T04:07:08+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 610,
        "title": "paddleclas做模型评估的时候一直报错怎么解决？",
        "body": "```\r\nTraceback (most recent call last):\r\n  File \"tools/eval.py\", line 90, in <module>\r\n    main(args)\r\n  File \"tools/eval.py\", line 62, in main\r\n    fleet.init(role)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/fleet_base.py\", line 219, in init\r\n    self._role_maker.generate_role()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/incubate/fleet/base/role_maker.py\", line 539, in generate_role\r\n    assert self._worker_endpoints is not None, \"can't find PADDLE_TRAINER_ENDPOINTS\"\r\nAssertionError: can't find PADDLE_TRAINER_ENDPOINTS\r\n```\r\n另外想问下，paddlecls不能像PaddleX一样读取模型然后进行批量测试图片进行输出么？像召回率以及F1这些指标是否有api可以调用？",
        "state": "closed",
        "user": "zhugailin",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-02-12T14:01:49+00:00",
        "updated_at": "2021-03-08T02:38:55+00:00",
        "closed_at": "2021-03-08T02:38:55+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 609,
        "title": "paddle.distributed.spawn 单机多卡训练报错",
        "body": "![image](https://user-images.githubusercontent.com/3764907/107610666-14c37e00-6c7d-11eb-9f09-9c61e4f8fba9.png)\r\n![image](https://user-images.githubusercontent.com/3764907/107610494-ad0d3300-6c7c-11eb-80f3-bc63c3f37e44.png)\r\n",
        "state": "closed",
        "user": "linan142857",
        "closed_by": "linan142857",
        "created_at": "2021-02-11T07:21:03+00:00",
        "updated_at": "2021-02-18T06:07:45+00:00",
        "closed_at": "2021-02-18T06:07:45+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 611,
        "title": "在容器当中使用 运行报如下的错误",
        "body": "\r\n我运行predict.py 在容器当中出错了。\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1613725844 (unix time) try \"date -d @1613725844\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x8) received by PID 1 (TID 0x7f145b6ac740) from PID 8 ***]\r\n",
        "state": "closed",
        "user": "habout632",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-19T09:15:29+00:00",
        "updated_at": "2022-03-16T04:07:12+00:00",
        "closed_at": "2022-03-16T04:07:09+00:00",
        "comments_count": [
            "habout632",
            "habout632",
            "habout632",
            "habout632",
            "TingquanGao",
            "zq-2021",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 614,
        "title": "when use vision_transformer ,how to deal with video，which has 5min length",
        "body": "",
        "state": "closed",
        "user": "dotsonliu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-23T10:53:50+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:11+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 620,
        "title": "关于模型参数量的问题",
        "body": "在paddleclas中训练得到的模型文件中包含ppcls.pdparams不就是模型参数的大小么？\r\n为什么实际训练得到模型参数大小与官方公布的不一致啊？就比如\r\n\r\n模型         | Top-1 Acc | Top-5 Acc | Params(M) \r\nResNet18 | 0.7098      | 0.8992       | 11.69M\r\n\r\n而我实际训练得到的ResNet18 ppcls.pdparams是64.3M\r\n",
        "state": "closed",
        "user": "zhugailin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-26T11:56:29+00:00",
        "updated_at": "2022-03-16T04:07:43+00:00",
        "closed_at": "2022-03-16T04:07:12+00:00",
        "comments_count": [
            "TingquanGao",
            "zhugailin",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 612,
        "title": "“30分钟玩转PaddleClas”可否做成Ai Studio项目，便于学习和模仿？",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/release/2.0/docs/zh_CN/tutorials/quick_start.md\r\n“30分钟玩转PaddleClas”可否做成Ai Studio项目，便于学习和模仿？\r\n\r\n按照要求安装和克隆后，在本地pc的CMD上运行，前边的正常，到这来报错：\r\n\r\n![image](https://user-images.githubusercontent.com/5112397/108581886-fa6b5d80-736a-11eb-8ae9-de5ef1e064b3.png)\r\n\r\n是在linux下运行？我的是win10",
        "state": "closed",
        "user": "A-Pai",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-02-20T03:01:46+00:00",
        "updated_at": "2022-03-16T04:07:12+00:00",
        "closed_at": "2022-03-16T04:07:10+00:00",
        "comments_count": [
            "littletomatodonkey",
            "A-Pai",
            "littletomatodonkey",
            "A-Pai",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 626,
        "title": "paddleclas训练过程中报错",
        "body": "WARNING: DataLoader reader thread raised an exception.\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 347, in _thread_loop\r\n    six.reraise(*sys.exc_info())\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 317, in _thread_loop\r\n    batch = self._dataset_fetcher.fetch(indices)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/fetcher.py\", line 60, in fetch\r\n    data = [self.dataset[idx] for idx in batch_indices]\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/fetcher.py\", line 60, in <listcomp>\r\n    data = [self.dataset[idx] for idx in batch_indices]\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/reader.py\", line 190, in __getitem__\r\n    return (transform(img, self.ops), int(label))\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/imaug/__init__.py\", line 43, in transform\r\n    data = op(data)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/imaug/operators.py\", line 157, in __call__\r\n    return cv2.resize(img, size)\r\ncv2.error: OpenCV(4.1.1) /io/opencv/modules/imgproc/src/resize.cpp:3720: error: (-215:Assertion failed) !ssize.empty() in function 'resize'\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 118, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    epoch_id, 'train')\r\n  File \"/home/aistudio/PaddleClas/tools/program.py\", line 300, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 365, in __next__\r\n    return self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:158)\r\n\r\nINFO 2021-03-06 11:57:14,108 launch_utils.py:307] terminate all the procs\r\nERROR 2021-03-06 11:57:14,108 launch_utils.py:545] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2021-03-06 11:57:17,111 launch_utils.py:307] terminate all the procs",
        "state": "closed",
        "user": "thomas-yanxin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-06T05:17:46+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:13+00:00",
        "comments_count": [
            "thomas-yanxin",
            "littletomatodonkey",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 627,
        "title": "关于说明文档的疑问",
        "body": "官方文档[开始使用](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.0/docs/zh_CN/tutorials/getting_started.md)中\r\n\r\n``` bash\r\npython tools/export_model.py \\\r\n    --model MobileNetV3_large_x1_0 \\\r\n    --pretrained_model ./output/MobileNetV3_large_x1_0/best_model/ppcls \\\r\n    --output_path ./inference\r\n```\r\n\r\n查看最新的export_model.py文件\r\n\r\n``` python\r\nparser = argparse.ArgumentParser()\r\nparser.add_argument(\"-m\", \"--model\", type=str)\r\nparser.add_argument(\"-p\", \"--pretrained_model\", type=str)\r\nparser.add_argument(\"-o\", \"--output_path\", type=str, default=\"./inference\")\r\nparser.add_argument(\"--class_dim\", type=int, default=1000)\r\nparser.add_argument(\"--load_static_weights\", type=str2bool, default=False)\r\nparser.add_argument(\"--img_size\", type=int, default=224)\r\n```\r\n很关键的class_dim，在说明文档里没有，如果按照文档\r\n``` bash\r\npython tools/export_model.py \\\r\n    --model MobileNetV3_large_x1_0 \\\r\n    --pretrained_model ./output/MobileNetV3_large_x1_0/best_model/ppcls \\\r\n    --output_path ./inference\r\n```\r\n\r\n那么class_dim的维度为1000，但是文档的例子是**flower102数据集**，是不是加上`--class_dim 102`才是合理的？\r\n\r\n``` bash\r\npython tools/export_model.py \\\r\n    --model MobileNetV3_large_x1_0 \\\r\n    --pretrained_model ./output/MobileNetV3_large_x1_0/best_model/ppcls \\\r\n    --output_path ./inference\r\n    --class_dim 102\r\n```\r\n",
        "state": "closed",
        "user": "duohappy",
        "closed_by": "duohappy",
        "created_at": "2021-03-07T03:29:16+00:00",
        "updated_at": "2021-03-07T08:37:18+00:00",
        "closed_at": "2021-03-07T08:37:18+00:00",
        "comments_count": [
            "duohappy",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 630,
        "title": "直接使用pip安装的paddleclas包，无法直接用作已读取的opencv image的预测",
        "body": "目前你们提供的paddleclas中，生成`PaddleClas`对象后，直接传入一个opencv的图像数据，即numpy数组后，是无法正确预测的。原因在于`paddleclas.py`的代码中，只有判断传入的参数为`str`后，才会进行图像的读取，BGR->RGB操作，并且进行utils.preprocess和np.expand_dims操作，但是如果参数类型本身为`ndarray`时，则直接使用。\r\n\r\n这样，用户试图直接传入一个未进行预处理的图像数据，就会出错，而如果用户想自行进行这些预处理时，会发现整个包，只export了`PaddleClas`这一个类，tools目录并未export出来，所以试图引入时会报错说tools module未在`__init__.py`中找到，造成即使用户想自行预处理都做不到。\r\n\r\n能想到的方法有以下几个：\r\n\r\n 1. 可以增加参数类型，传入file like object对象，这样就可以直接读取该图像并进行预处理\r\n 2. 添加predict的参数`is_preprocessed`，示意是否是已预处理的图像，如果不是则可以进行预处理\r\n 3. 在`__init__.py`的`__all__`中开放tools模块，让用户可以自行预处理",
        "state": "closed",
        "user": "mikeshi80",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-09T06:45:43+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:15+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 632,
        "title": "Win10系统下，分类套件训练报错",
        "body": "环境系统：\r\nwin10(64位)+NVIDIA CUDA (11.0.228)\r\n\r\n运行预训练模型进行体验30分钟套件分类体验项目，发现无法进行正常训练，操作如下：\r\n`python -m paddle.distributed.launch --gpus=\"0\" tools/train.py  -c ./configs/quick_start/ResNet50_vd_finetune.yaml`\r\n\r\n日志如下：\r\n\r\n`C:\\Users\\Lenovo\\anaconda3\\lib\\site-packages\\win32\\lib\\pywintypes.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses     \r\n  import imp, sys, os\r\n-----------  Configuration Arguments -----------\r\ngpus: 0\r\nheter_worker_num: None\r\nheter_workers: \r\nhttp_port: None\r\nips: 127.0.0.1\r\nlog_dir: log\r\nnproc_per_node: None\r\nserver_num: None\r\nservers: \r\ntraining_script: tools/train.py\r\ntraining_script_args: ['-c', './configs/quick_start/ResNet50_vd_finetune.yaml']\r\nworker_num: None\r\nworkers: \r\n------------------------------------------------\r\nWARNING 2021-03-11 09:37:55,026 launch.py:316] Not found distinct arguments and compiled with cuda. Default use collective mode\r\nlaunch train in GPU mode\r\nINFO 2021-03-11 09:37:55,031 launch_utils.py:471] Local start 1 processes. First process distributed environment info (Only For Debug): \r\n    +=======================================================================================+\r\n    |                        Distributed Envs                      Value                    |\r\n    +---------------------------------------------------------------------------------------+\r\n    |                       PADDLE_TRAINER_ID                        0                      |\r\n    |                 PADDLE_CURRENT_ENDPOINT                 127.0.0.1:56707               |\r\n    |                     PADDLE_TRAINERS_NUM                        1                      |\r\n    |                PADDLE_TRAINER_ENDPOINTS                 127.0.0.1:56707               |\r\n    |                     FLAGS_selected_gpus                        0                      |\r\n    +=======================================================================================+\r\n\r\nINFO 2021-03-11 09:37:55,033 launch_utils.py:475] details abouts PADDLE_TRAINER_ENDPOINTS can be found in log/endpoints.log, and detail running logs maybe found in log/workerlog.0\r\n子目录或文件 -p 已经存在。\r\n处理: -p 时出错。\r\n子目录或文件 log 已经存在。\r\n处理: log 时出错。\r\n'rm' 不是内部或外部命令，也不是可运行的程序\r\n或批处理文件。\r\nC:\\Users\\Lenovo\\anaconda3\\lib\\site-packages\\win32\\lib\\pywintypes.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp, sys, os\r\n2021-03-11 09:37:58,548 - INFO - \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2021-03-11 09:37:58,549 - INFO - ARCHITECTURE :\r\n2021-03-11 09:37:58,549 - INFO -     name : ResNet50_vd\r\n2021-03-11 09:37:58,549 - INFO - ------------------------------------------------------------\r\n2021-03-11 09:37:58,549 - INFO - LEARNING_RATE :\r\n2021-03-11 09:37:58,549 - INFO -     function : Cosine\r\n2021-03-11 09:37:58,549 - INFO -     params :\r\n2021-03-11 09:37:58,549 - INFO -         lr : 0.00375\r\n2021-03-11 09:37:58,549 - INFO - ------------------------------------------------------------\r\n2021-03-11 09:37:58,549 - INFO - OPTIMIZER :\r\n2021-03-11 09:37:58,549 - INFO -     function : Momentum\r\n2021-03-11 09:37:58,550 - INFO -     params :\r\n2021-03-11 09:37:58,550 - INFO -         momentum : 0.9\r\n2021-03-11 09:37:58,550 - INFO -     regularizer :\r\n2021-03-11 09:37:58,550 - INFO -         factor : 1e-06\r\n2021-03-11 09:37:58,550 - INFO -         function : L2\r\n2021-03-11 09:37:58,550 - INFO - ------------------------------------------------------------\r\n2021-03-11 09:37:58,550 - INFO - TRAIN :\r\n2021-03-11 09:37:58,550 - INFO -     batch_size : 32\r\n2021-03-11 09:37:58,550 - INFO -     data_dir : ./dataset/flowers102/\r\n2021-03-11 09:37:58,550 - INFO -     file_list : ./dataset/flowers102/train_list.txt\r\n2021-03-11 09:37:58,550 - INFO -     num_workers : 0\r\n2021-03-11 09:37:58,550 - INFO -     shuffle_seed : 0\r\n2021-03-11 09:37:58,550 - INFO -     transforms : \r\n2021-03-11 09:37:58,550 - INFO -         DecodeImage :\r\n2021-03-11 09:37:58,550 - INFO -             channel_first : False\r\n2021-03-11 09:37:58,550 - INFO -             to_np : False\r\n2021-03-11 09:37:58,551 - INFO -             to_rgb : True\r\n2021-03-11 09:37:58,551 - INFO -         RandCropImage :\r\n2021-03-11 09:37:58,551 - INFO -             size : 224\r\n2021-03-11 09:37:58,551 - INFO -         RandFlipImage :\r\n2021-03-11 09:37:58,551 - INFO -             flip_code : 1\r\n2021-03-11 09:37:58,551 - INFO -         NormalizeImage :\r\n2021-03-11 09:37:58,551 - INFO -             mean : [0.485, 0.456, 0.406]\r\n2021-03-11 09:37:58,551 - INFO -             order : \r\n2021-03-11 09:37:58,551 - INFO -             scale : 1./255.\r\n2021-03-11 09:37:58,551 - INFO -             std : [0.229, 0.224, 0.225]\r\n2021-03-11 09:37:58,551 - INFO -         ToCHWImage : None\r\n2021-03-11 09:37:58,551 - INFO - ------------------------------------------------------------\r\n2021-03-11 09:37:58,551 - INFO - VALID :\r\n2021-03-11 09:37:58,551 - INFO -     batch_size : 20\r\n2021-03-11 09:37:58,551 - INFO -     data_dir : ./dataset/flowers102/\r\n2021-03-11 09:37:58,551 - INFO -     file_list : ./dataset/flowers102/val_list.txt\r\n2021-03-11 09:37:58,552 - INFO -     num_workers : 0\r\n2021-03-11 09:37:58,552 - INFO -     shuffle_seed : 0\r\n2021-03-11 09:37:58,552 - INFO -     transforms :\r\n2021-03-11 09:37:58,552 - INFO -         DecodeImage : \r\n2021-03-11 09:37:58,552 - INFO -             channel_first : False\r\n2021-03-11 09:37:58,552 - INFO -             to_np : False\r\n2021-03-11 09:37:58,552 - INFO -             to_rgb : True\r\n2021-03-11 09:37:58,552 - INFO -         ResizeImage :\r\n2021-03-11 09:37:58,552 - INFO -             resize_short : 256\r\n2021-03-11 09:37:58,552 - INFO -         CropImage :\r\n2021-03-11 09:37:58,552 - INFO -             size : 224\r\n2021-03-11 09:37:58,552 - INFO -         NormalizeImage :\r\n2021-03-11 09:37:58,552 - INFO -             mean : [0.485, 0.456, 0.406]\r\n2021-03-11 09:37:58,552 - INFO -             order :\r\n2021-03-11 09:37:58,552 - INFO -             scale : 1.0/255.0\r\n2021-03-11 09:37:58,553 - INFO -             std : [0.229, 0.224, 0.225]\r\n2021-03-11 09:37:58,553 - INFO -         ToCHWImage : None\r\n2021-03-11 09:37:58,553 - INFO - ------------------------------------------------------------\r\n2021-03-11 09:37:58,553 - INFO - classes_num : 102\r\n2021-03-11 09:37:58,553 - INFO - epochs : 20\r\n2021-03-11 09:37:58,553 - INFO - image_shape : [3, 224, 224]\r\n2021-03-11 09:37:58,553 - INFO - mode : train\r\n2021-03-11 09:37:58,553 - INFO - model_save_dir : ./output/\r\n2021-03-11 09:37:58,553 - INFO - pretrained_model : ./pretrained/ResNet50_vd_pretrained\r\n2021-03-11 09:37:58,553 - INFO - save_interval : 1\r\n2021-03-11 09:37:58,553 - INFO - topk : 5\r\n2021-03-11 09:37:58,553 - INFO - total_images : 1020\r\n2021-03-11 09:37:58,553 - INFO - valid_interval : 1\r\n2021-03-11 09:37:58,553 - INFO - validate : True\r\nC:\\Users\\Lenovo\\anaconda3\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py:1303: UserWarning: Skip loading for out.weight. out.weight receives a shape [2048, 1000], but the expected shape is [2048, 102].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nC:\\Users\\Lenovo\\anaconda3\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py:1303: UserWarning: Skip loading for out.bias. out.bias receives a shape [1000], but the expected shape is [102].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n2021-03-11 09:38:05,524 - INFO - Finish initing model from ./pretrained/ResNet50_vd_pretrained\r\nINFO 2021-03-11 09:39:10,236 launch_utils.py:307] terminate all the procs\r\nERROR 2021-03-11 09:39:10,242 launch_utils.py:545] ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.\r\nINFO 2021-03-11 09:39:13,243 launch_utils.py:307] terminate all the procs`\r\n\r\n**发现无明显报错，只是出现如下信息：**\r\n- 【terminate all the procs 】 \r\n- 【ABORT!!! Out of all 1 trainers, the trainer process with rank=[0] was aborted. Please check its log.】\r\n-  【terminate all the procs】\r\n**期待各位大神答疑，指点迷津，被卡了两天了**",
        "state": "closed",
        "user": "kobe577590",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-11T02:07:52+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:16+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 629,
        "title": "此处的import会造成某些场景无法正确import",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/955adcf7a4b618d789b97d978a05ec9cd8dc151e/paddleclas.py#L39\r\n\r\n如果import 该包的项目已有tools目录，或者引入的其他包也有tools目录（如PaddleOCR），则这样会造成无法import包。\r\n\r\n建议修改为\r\n\r\n```python\r\nfrom .tools.infer import utils\r\n```",
        "state": "closed",
        "user": "mikeshi80",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-08T08:57:41+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:14+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 635,
        "title": "导出inference模型出错",
        "body": "Paddleclas:release/2.0\r\nPaddlePaddle:Version: 2.0.1\r\n模型通过是通过教程训练的MobileNetV3_large_x1_0\r\n运行命令：\r\npython tools/export_model.py --model MobileNetV3_large_x1_0 --pretrained_model ./output/MobileNetV3_large_x1_0/best_model/ppcls --output_path ./inference\r\n错误提示：\r\n/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\n/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.weight. out.weight receives a shape [1280, 102], but the expected shape is [1280, 1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.bias. out.bias receives a shape [102], but the expected shape is [1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:77: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  return (isinstance(seq, collections.Sequence) and\r\nTraceback (most recent call last):\r\n  File \"tools/export_model.py\", line 79, in <module>\r\n    main()\r\n  File \"tools/export_model.py\", line 75, in main\r\n    paddle.jit.save(model, os.path.join(args.output_path, \"inference\"))\r\n  File \"<decorator-gen-60>\", line 2, in save\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 39, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 681, in save\r\n    inner_input_spec)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n    *desired_input_spec)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n    concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n    self._caches[item] = self._build_once(item)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n    class_instance=cache_key.class_instance)\r\n  File \"<decorator-gen-58>\", line 2, in from_func_spec\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 39, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 658, in from_func_spec\r\n    error_data.raise_new_exception()\r\n  File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/error.py\", line 189, in raise_new_exception\r\n    six.exec_(\"raise new_exception from None\")\r\n  File \"<string>\", line 1, in <module>\r\nAttributeError: In transformed code:\r\n\r\n    File \"tools/export_model.py\", line 51, in forward (* user code *)\r\n\tx = self.pre_net(inputs)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_call_func.py\", line 220, in convert_call\r\n\tforward_func = convert_to_static(forward_func)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 141, in convert_to_static\r\n\tstatic_func = _FUNCTION_CACHE.convert_with_cache(function)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 78, in convert_with_cache\r\n\tstatic_func = self._convert(func)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 116, in _convert\r\n\troot_wrapper = self._dygraph_to_static.get_static_ast(root)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 61, in get_static_ast\r\n\tself.transfer_from_node_type(self.static_analysis_root)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 92, in transfer_from_node_type\r\n\tself._apply(transformer, node_wrapper, log_level=index + 1)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 65, in _apply\r\n\ttransformer(node_wrapper).transform()\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 435, in transform\r\n\tself.visit(self.root)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 438, in visit\r\n\tself.generic_visit(node)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/ast.py\", line 326, in generic_visit\r\n\tvalue = self.visit(value)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 441, in visit\r\n\tself.replace_stmt_list(node.body)\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 457, in replace_stmt_list\r\n\tnew_stmts = self.get_for_stmt_nodes(body_list[i])\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 479, in get_for_stmt_nodes\r\n\tstmts_tuple = current_for_node_parser.parse()\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1030, in parse\r\n\treturn self._parse_for_stmts()\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1094, in _parse_for_stmts\r\n\ttarget_node, assign_node = self._build_assign_var_slice_node()\r\n    File \"/root/anaconda3/envs/wsy/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1245, in _build_assign_var_slice_node\r\n\tslice=gast.Index(value=gast.Name(\r\n    AttributeError: module 'gast' has no attribute 'Index'\r\n",
        "state": "closed",
        "user": "syyxsxx",
        "closed_by": "syyxsxx",
        "created_at": "2021-03-11T12:00:04+00:00",
        "updated_at": "2021-03-12T07:01:42+00:00",
        "closed_at": "2021-03-12T07:01:42+00:00",
        "comments_count": [
            "littletomatodonkey",
            "syyxsxx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 634,
        "title": "请问下图像分类新增分类应该如何冻结？",
        "body": "",
        "state": "closed",
        "user": "yangy996",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-11T10:00:38+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:17+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yangy996",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 637,
        "title": "PaddleClas中怎么使用visualdl工具",
        "body": "请问在哪个文件中加入visualdl命令呢",
        "state": "closed",
        "user": "CoIorfu1",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-14T09:47:43+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:18+00:00",
        "comments_count": [
            "littletomatodonkey",
            "skywalk163",
            "skywalk163",
            "TingquanGao",
            "skywalk163",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 639,
        "title": "支持paddle-1.8训练么？",
        "body": "",
        "state": "closed",
        "user": "zgsxwsdxg",
        "closed_by": "zgsxwsdxg",
        "created_at": "2021-03-15T07:30:12+00:00",
        "updated_at": "2021-03-16T02:46:50+00:00",
        "closed_at": "2021-03-16T02:46:50+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 640,
        "title": "backbone的增加",
        "body": "Paddlecls现在有RepVGG这个backbone吗，我没找到，没有的话可不可以考虑添加一下？谢谢",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-15T11:17:04+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:18+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 641,
        "title": "无法对同一个模型进行多次实例化",
        "body": "在使用paddleclas模型库的resnet50_vd这个模型时，需要对其进行多次的实例化。但是第一次实例化可以，第二次实例化则提示\r\n~~~\r\nValueError: parameter name [conv1_1_weights] have be been used. In dygraph mode, the name of parameter can't be same.Please check the parameter attr value passed to self.create_parameter or constructor of dygraph Layers\r\n~~~\r\n\r\n具体代码如下：\r\n~~~\r\n\r\n\r\nimport numpy as np\r\nimport paddle\r\nfrom paddle import ParamAttr\r\nimport paddle.nn as nn\r\nimport paddle.nn.functional as F\r\nfrom paddle.nn import Conv2D, BatchNorm, Linear, Dropout\r\nfrom paddle.nn import AdaptiveAvgPool2D, MaxPool2D, AvgPool2D\r\nfrom paddle.nn.initializer import Uniform\r\nfrom paddle import stanh\r\nimport math\r\nfrom paddle.static import load_program_state\r\n\r\n\r\n\r\nclass ConvBNLayer(nn.Layer):\r\n    def __init__(self,\r\n                 num_channels,\r\n                 num_filters,\r\n                 filter_size,\r\n                 stride=1,\r\n                 groups=1,\r\n                 is_vd_mode=False,\r\n                 act=None,\r\n                 lr_mult=1.0,\r\n                 name=None):\r\n        super(ConvBNLayer, self).__init__()\r\n        self.is_vd_mode = is_vd_mode\r\n        self._pool2d_avg = AvgPool2D(\r\n            kernel_size=2, stride=2, padding=0, ceil_mode=True)\r\n        self._conv = Conv2D(\r\n            in_channels=num_channels,\r\n            out_channels=num_filters,\r\n            kernel_size=filter_size,\r\n            stride=stride,\r\n            padding=(filter_size - 1) // 2,\r\n            groups=groups,\r\n            weight_attr=ParamAttr(\r\n                name=name + \"_weights\", learning_rate=lr_mult),\r\n            bias_attr=False)\r\n        if name == \"conv1\":\r\n            bn_name = \"bn_\" + name\r\n        else:\r\n            bn_name = \"bn\" + name[3:]\r\n        self._batch_norm = BatchNorm(\r\n            num_filters,\r\n            act=act,\r\n            param_attr=ParamAttr(\r\n                name=bn_name + '_scale', learning_rate=lr_mult),\r\n            bias_attr=ParamAttr(\r\n                bn_name + '_offset', learning_rate=lr_mult),\r\n            moving_mean_name=bn_name + '_mean',\r\n            moving_variance_name=bn_name + '_variance')\r\n\r\n    def forward(self, inputs):\r\n        if self.is_vd_mode:\r\n            inputs = self._pool2d_avg(inputs)\r\n        y = self._conv(inputs)\r\n        y = self._batch_norm(y)\r\n        return y\r\n\r\n\r\nclass BottleneckBlock(nn.Layer):\r\n    def __init__(self,\r\n                 num_channels,\r\n                 num_filters,\r\n                 stride,\r\n                 shortcut=True,\r\n                 if_first=False,\r\n                 lr_mult=1.0,\r\n                 name=None):\r\n        super(BottleneckBlock, self).__init__()\r\n\r\n        self.conv0 = ConvBNLayer(\r\n            num_channels=num_channels,\r\n            num_filters=num_filters,\r\n            filter_size=1,\r\n            act='relu',\r\n            lr_mult=lr_mult,\r\n            name=name + \"_branch2a\")\r\n        self.conv1 = ConvBNLayer(\r\n            num_channels=num_filters,\r\n            num_filters=num_filters,\r\n            filter_size=3,\r\n            stride=stride,\r\n            act='relu',\r\n            lr_mult=lr_mult,\r\n            name=name + \"_branch2b\")\r\n        self.conv2 = ConvBNLayer(\r\n            num_channels=num_filters,\r\n            num_filters=num_filters * 4,\r\n            filter_size=1,\r\n            act=None,\r\n            lr_mult=lr_mult,\r\n            name=name + \"_branch2c\")\r\n\r\n        if not shortcut:\r\n            self.short = ConvBNLayer(\r\n                num_channels=num_channels,\r\n                num_filters=num_filters * 4,\r\n                filter_size=1,\r\n                stride=1,\r\n                is_vd_mode=False if if_first else True,\r\n                lr_mult=lr_mult,\r\n                name=name + \"_branch1\")\r\n\r\n        self.shortcut = shortcut\r\n\r\n    def forward(self, inputs):\r\n        y = self.conv0(inputs)\r\n        conv1 = self.conv1(y)\r\n        conv2 = self.conv2(conv1)\r\n\r\n        if self.shortcut:\r\n            short = inputs\r\n        else:\r\n            short = self.short(inputs)\r\n        y = paddle.add(x=short, y=conv2)\r\n        y = F.relu(y)\r\n        return y\r\n\r\n\r\nclass BasicBlock(nn.Layer):\r\n    def __init__(self,\r\n                 num_channels,\r\n                 num_filters,\r\n                 stride,\r\n                 shortcut=True,\r\n                 if_first=False,\r\n                 lr_mult=1.0,\r\n                 name=None):\r\n        super(BasicBlock, self).__init__()\r\n        self.stride = stride\r\n        self.conv0 = ConvBNLayer(\r\n            num_channels=num_channels,\r\n            num_filters=num_filters,\r\n            filter_size=3,\r\n            stride=stride,\r\n            act='relu',\r\n            lr_mult=lr_mult,\r\n            name=name + \"_branch2a\")\r\n        self.conv1 = ConvBNLayer(\r\n            num_channels=num_filters,\r\n            num_filters=num_filters,\r\n            filter_size=3,\r\n            act=None,\r\n            lr_mult=lr_mult,\r\n            name=name + \"_branch2b\")\r\n\r\n        if not shortcut:\r\n            self.short = ConvBNLayer(\r\n                num_channels=num_channels,\r\n                num_filters=num_filters,\r\n                filter_size=1,\r\n                stride=1,\r\n                is_vd_mode=False if if_first else True,\r\n                lr_mult=lr_mult,\r\n                name=name + \"_branch1\")\r\n\r\n        self.shortcut = shortcut\r\n\r\n    def forward(self, inputs):\r\n        y = self.conv0(inputs)\r\n        conv1 = self.conv1(y)\r\n\r\n        if self.shortcut:\r\n            short = inputs\r\n        else:\r\n            short = self.short(inputs)\r\n        y = paddle.add(x=short, y=conv1)\r\n        y = F.relu(y)\r\n        return y\r\n\r\nclass ResNet_vd(nn.Layer):\r\n    def __init__(self,\r\n                 layers=50,\r\n                 class_dim=1000,\r\n                 lr_mult_list=[1.0, 1.0, 1.0, 1.0, 1.0]):\r\n        super(ResNet_vd, self).__init__()\r\n\r\n        self.layers = layers\r\n        supported_layers = [18, 34, 50, 101, 152, 200]\r\n        assert layers in supported_layers, \\\r\n            \"supported layers are {} but input layer is {}\".format(\r\n                supported_layers, layers)\r\n\r\n        self.lr_mult_list = lr_mult_list\r\n        assert isinstance(self.lr_mult_list, (\r\n            list, tuple\r\n        )), \"lr_mult_list should be in (list, tuple) but got {}\".format(\r\n            type(self.lr_mult_list))\r\n        assert len(\r\n            self.lr_mult_list\r\n        ) == 5, \"lr_mult_list length should should be 5 but got {}\".format(\r\n            len(self.lr_mult_list))\r\n\r\n        if layers == 18:\r\n            depth = [2, 2, 2, 2]\r\n        elif layers == 34 or layers == 50:\r\n            depth = [3, 4, 6, 3]\r\n        elif layers == 101:\r\n            depth = [3, 4, 23, 3]\r\n        elif layers == 152:\r\n            depth = [3, 8, 36, 3]\r\n        elif layers == 200:\r\n            depth = [3, 12, 48, 3]\r\n        num_channels = [64, 256, 512,\r\n                        1024] if layers >= 50 else [64, 64, 128, 256]\r\n        num_filters = [64, 128, 256, 512]\r\n\r\n        self.conv1_1 = ConvBNLayer(\r\n            num_channels=3,\r\n            num_filters=32,\r\n            filter_size=3,\r\n            stride=2,\r\n            act='relu',\r\n            lr_mult=self.lr_mult_list[0],\r\n            name=\"conv1_1\")\r\n        self.conv1_2 = ConvBNLayer(\r\n            num_channels=32,\r\n            num_filters=32,\r\n            filter_size=3,\r\n            stride=1,\r\n            act='relu',\r\n            lr_mult=self.lr_mult_list[0],\r\n            name=\"conv1_2\")\r\n        self.conv1_3 = ConvBNLayer(\r\n            num_channels=32,\r\n            num_filters=64,\r\n            filter_size=3,\r\n            stride=1,\r\n            act='relu',\r\n            lr_mult=self.lr_mult_list[0],\r\n            name=\"conv1_3\")\r\n        self.pool2d_max = MaxPool2D(kernel_size=3, stride=2, padding=1)\r\n\r\n        self.block_list = []\r\n        if layers >= 50:\r\n            for block in range(len(depth)):\r\n                shortcut = False\r\n                for i in range(depth[block]):\r\n                    if layers in [101, 152, 200] and block == 2:\r\n                        if i == 0:\r\n                            conv_name = \"res\" + str(block + 2) + \"a\"\r\n                        else:\r\n                            conv_name = \"res\" + str(block + 2) + \"b\" + str(i)\r\n                    else:\r\n                        conv_name = \"res\" + str(block + 2) + chr(97 + i)\r\n                    bottleneck_block = self.add_sublayer(\r\n                        'bb_%d_%d' % (block, i),\r\n                        BottleneckBlock(\r\n                            num_channels=num_channels[block]\r\n                            if i == 0 else num_filters[block] * 4,\r\n                            num_filters=num_filters[block],\r\n                            stride=2 if i == 0 and block != 0 else 1,\r\n                            shortcut=shortcut,\r\n                            if_first=block == i == 0,\r\n                            lr_mult=self.lr_mult_list[block + 1],\r\n                            name=conv_name))\r\n                    self.block_list.append(bottleneck_block)\r\n                    shortcut = True\r\n        else:\r\n            for block in range(len(depth)):\r\n                shortcut = False\r\n                for i in range(depth[block]):\r\n                    conv_name = \"res\" + str(block + 2) + chr(97 + i)\r\n                    basic_block = self.add_sublayer(\r\n                        'bb_%d_%d' % (block, i),\r\n                        BasicBlock(\r\n                            num_channels=num_channels[block]\r\n                            if i == 0 else num_filters[block],\r\n                            num_filters=num_filters[block],\r\n                            stride=2 if i == 0 and block != 0 else 1,\r\n                            shortcut=shortcut,\r\n                            if_first=block == i == 0,\r\n                            name=conv_name,\r\n                            lr_mult=self.lr_mult_list[block + 1]))\r\n                    self.block_list.append(basic_block)\r\n                    shortcut = True\r\n\r\n        self.pool2d_avg = AdaptiveAvgPool2D(1)\r\n\r\n        self.pool2d_avg_channels = num_channels[-1] * 2\r\n\r\n        stdv = 1.0 / math.sqrt(self.pool2d_avg_channels * 1.0)\r\n        # self.outim = Linear(\r\n        #     self.pool2d_avg_channels,\r\n        #     self.pool2d_avg_channels,\r\n        #     weight_attr=ParamAttr(\r\n        #         initializer=Uniform(-stdv, stdv), name=\"fc_0.w_0_1\"),\r\n        #     bias_attr=ParamAttr(name=\"fc_0.b_0_1\"))\r\n        # self.out = Linear(\r\n        #     self.pool2d_avg_channels,\r\n        #     class_dim,\r\n        #     weight_attr=ParamAttr(\r\n        #         initializer=Uniform(-stdv, stdv), name=\"fc_0.w_0\"),\r\n        #     bias_attr=ParamAttr(name=\"fc_0.b_0\"))\r\n\r\n    def forward(self, inputs):\r\n        y = self.conv1_1(inputs)\r\n        y = self.conv1_2(y)\r\n        y = self.conv1_3(y)\r\n        y = self.pool2d_max(y)\r\n        for block in self.block_list:\r\n            y = block(y)\r\n        y = self.pool2d_avg(y)\r\n        y = paddle.reshape(y, shape=[-1, self.pool2d_avg_channels])\r\n        # print('ahshsh')\r\n        # y = self.outim(y)\r\n        # y = self.out(y)\r\n        return y\r\n\r\nfor  _ in  range(10):\r\n    print(_)\r\n    model1 =  ResNet_vd(layers=50,class_dim = 15)\r\n\r\n~~~\r\n\r\n麻烦帮看一下，是哪一块出问题了呢？",
        "state": "closed",
        "user": "waaaaaaater",
        "closed_by": "weisy11",
        "created_at": "2021-03-16T01:19:32+00:00",
        "updated_at": "2022-03-16T06:16:47+00:00",
        "closed_at": "2022-03-16T06:16:47+00:00",
        "comments_count": [
            "TingquanGao",
            "waaaaaaater",
            "littletomatodonkey",
            "waaaaaaater"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 644,
        "title": "export_model.py 运行报错",
        "body": "按照文档[4. 使用inference模型进行模型推理](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.0/docs/zh_CN/tutorials/getting_started.md#4-%E4%BD%BF%E7%94%A8inference%E6%A8%A1%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86)，运行到一下代码时，出现错误\r\n\r\n``` python\r\npython tools/export_model.py \\\r\n    --model MobileNetV3_large_x1_0 \\\r\n    --pretrained_model ./output/MobileNetV3_large_x1_0/best_model/ppcls \\\r\n    --output_path ./inference\r\n```\r\n\r\n\r\n报错信息如下\r\n\r\n``` html\r\n\r\n\r\n/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\nW0318 10:31:46.486126 59140 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 10.2, Runtime API Version: 10.2\r\nW0318 10:31:46.489892 59140 device_context.cc:372] device: 0, cuDNN Version: 7.6.\r\n/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:77: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  return (isinstance(seq, collections.Sequence) and\r\nTraceback (most recent call last):\r\n  File \"tools/export_model.py\", line 79, in <module>\r\n    main()\r\n  File \"tools/export_model.py\", line 75, in main\r\n    paddle.jit.save(model, os.path.join(args.output_path, \"inference\"))\r\n  File \"<decorator-gen-60>\", line 2, in save\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 39, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 681, in save\r\n    inner_input_spec)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n    *desired_input_spec)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n    concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n    self._caches[item] = self._build_once(item)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n    class_instance=cache_key.class_instance)\r\n  File \"<decorator-gen-58>\", line 2, in from_func_spec\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 39, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 658, in from_func_spec\r\n    error_data.raise_new_exception()\r\n  File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/error.py\", line 189, in raise_new_exception\r\n    six.exec_(\"raise new_exception from None\")\r\n  File \"<string>\", line 1, in <module>\r\nAttributeError: In transformed code:\r\n\r\n    File \"tools/export_model.py\", line 51, in forward (* user code *)\r\n\tx = self.pre_net(inputs)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_call_func.py\", line 220, in convert_call\r\n\tforward_func = convert_to_static(forward_func)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 141, in convert_to_static\r\n\tstatic_func = _FUNCTION_CACHE.convert_with_cache(function)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 78, in convert_with_cache\r\n\tstatic_func = self._convert(func)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 116, in _convert\r\n\troot_wrapper = self._dygraph_to_static.get_static_ast(root)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 61, in get_static_ast\r\n\tself.transfer_from_node_type(self.static_analysis_root)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 92, in transfer_from_node_type\r\n\tself._apply(transformer, node_wrapper, log_level=index + 1)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/ast_transformer.py\", line 65, in _apply\r\n\ttransformer(node_wrapper).transform()\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 435, in transform\r\n\tself.visit(self.root)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 438, in visit\r\n\tself.generic_visit(node)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/ast.py\", line 326, in generic_visit\r\n\tvalue = self.visit(value)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 441, in visit\r\n\tself.replace_stmt_list(node.body)\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 457, in replace_stmt_list\r\n\tnew_stmts = self.get_for_stmt_nodes(body_list[i])\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/loop_transformer.py\", line 479, in get_for_stmt_nodes\r\n\tstmts_tuple = current_for_node_parser.parse()\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1030, in parse\r\n\treturn self._parse_for_stmts()\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1094, in _parse_for_stmts\r\n\ttarget_node, assign_node = self._build_assign_var_slice_node()\r\n    File \"/home/zhouwentest/comSoftware/python3.7/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/utils.py\", line 1245, in _build_assign_var_slice_node\r\n\tslice=gast.Index(value=gast.Name(\r\n    AttributeError: module 'gast' has no attribute 'Index'\r\n\r\n```\r\n",
        "state": "closed",
        "user": "duohappy",
        "closed_by": "duohappy",
        "created_at": "2021-03-18T02:42:28+00:00",
        "updated_at": "2021-03-24T09:32:42+00:00",
        "closed_at": "2021-03-24T09:32:42+00:00",
        "comments_count": [
            "TingquanGao",
            "duohappy",
            "TingquanGao",
            "duohappy",
            "TingquanGao",
            "duohappy",
            "TingquanGao",
            "duohappy",
            "who0sy",
            "who0sy",
            "TingquanGao",
            "duohappy",
            "who0sy",
            "duohappy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 645,
        "title": "配置文件中的file_list和data_dir",
        "body": "在训练模型的配置文件中都有`file_list`和`data_dir`字段\r\n`file_list`：训练文件或者测试文件的路径\r\n`data_dir`：数据集的路径\r\n\r\n以训练文件 train.txt为例\r\n每一行是 **图片的路径 类别**，那么图片的绝对路径：\r\n``` python\r\nos.path.join(data_dir, 图片的路径)\r\n```\r\n\r\n如果是这样的话，file_list可以用绝对路径么？\r\n\r\ntrain.txt中图片的路径，直接用绝对路径可以么？data_dir字段就没有用了\r\n\r\n在现实情况中，图片并不是存在一个文件夹里的，而是存在多个文件夹里的，train.txt中图片的路径，填写绝对路径更符合**图片分散在多个文件夹的情形**\r\n",
        "state": "closed",
        "user": "duohappy",
        "closed_by": "duohappy",
        "created_at": "2021-03-18T05:22:38+00:00",
        "updated_at": "2021-03-18T06:14:55+00:00",
        "closed_at": "2021-03-18T06:14:55+00:00",
        "comments_count": [
            "TingquanGao",
            "duohappy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 649,
        "title": "训练开始正常，训练过程中程序运行报错",
        "body": "程序一开始是正常出ACC和loSS的，但训练一会后就报错，显示无法进行训练，请帮忙找下原因\r\n\r\n\r\n运行代码\r\n    !python tools/train.py \\\r\n    -c configs/quick_start/MobileNetV3_large_x1_0_finetune.yaml \\\r\n    -o pretrained_model=\"\" \\\r\n    -o use_gpu=True\r\n\r\n报错命令\r\n2021-03-20 20:49:54,224 - INFO - epoch:0  , train step:130 , top1: 0.34375, top5: 0.78125, loss: 2.11844, lr: 0.003358, batch_cost: 1.77810 s, reader_cost: 1.71894 s, ips: 17.99676 images/sec.\r\n2021-03-20 20:50:01,444 - WARNING - DataLoader reader thread raised an exception. \r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 118, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    epoch_id, 'train')\r\n  File \"/home/aistudio/PaddleClas/tools/program.py\", line 300, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 351, in __next__\r\n    return self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:158)",
        "state": "closed",
        "user": "gaorui999",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-20T12:58:13+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:19+00:00",
        "comments_count": [
            "TingquanGao",
            "gaorui999",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 652,
        "title": "二分类问题，结果返回只有acc，怎么查看训练AUC和其他评价指标",
        "body": "",
        "state": "closed",
        "user": "anisehu",
        "closed_by": "weisy11",
        "created_at": "2021-03-24T03:39:02+00:00",
        "updated_at": "2022-03-16T06:16:47+00:00",
        "closed_at": "2022-03-16T06:16:47+00:00",
        "comments_count": [
            "anisehu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 655,
        "title": "load的inference模型怎么判断是resnet50还是res2net50，又或者resnet50_vd",
        "body": "hello，我load了一个inference接口保存的模型，现在有两个疑问：\r\n1.怎么判断我load的这个模型是resnet50还是101\r\n2.怎么判断我load的这个模型是resnet50还是res2net50，又或者resnet50_vd",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-03-30T07:10:53+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:21+00:00",
        "comments_count": [
            "TingquanGao",
            "IamMegatron2025",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 657,
        "title": "DataLoader reader thread raised an exception",
        "body": "\r\nW0330 17:35:59.417029  1669 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.2, Runtime API Version: 10.2\r\nW0330 17:35:59.422202  1669 device_context.cc:372] device: 0, cuDNN Version: 7.6.\r\n2021-03-30 17:36:23,905 - WARNING - DataLoader reader thread raised an exception.\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 117, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    epoch_id, 'train')\r\n  File \"/paddle/PaddleClas/tools/program.py\", line 301, in run\r\n    for idx, batch in enumerate(dataloader()):\r\n  File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 351, in __next__\r\n    return self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:158)\r\npaddle-gpu 2.0.1   paddleclas 使用的是 develop  切换其他分支也不行   \r\n用的是ResNet50_vd 快速开始里面的yaml 文件改的 因为不想使用随机剪裁和反转 就把 train 里面 \r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1   这几行删除了  结果就报错了   \r\n\r\n想问一下 怎么关掉训练集的数据增强   或者想单独使用  随机改变颜色 亮度 该怎么配置        \r\n\r\n第二个问题    VALID里面 使用了 缩放     - ResizeImage:\r\n            resize_short: 256    那训练集里面为什么不使用呢 ",
        "state": "closed",
        "user": "wa3926",
        "closed_by": "wa3926",
        "created_at": "2021-03-30T09:54:25+00:00",
        "updated_at": "2021-04-02T01:52:34+00:00",
        "closed_at": "2021-03-31T05:37:24+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao",
            "wa3926",
            "wa3926",
            "wa3926",
            "TingquanGao",
            "wa3926",
            "wa3926",
            "TingquanGao",
            "wa3926"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 658,
        "title": "关于训练中断后恢复训练",
        "body": "中断训练后如何基于这个checkpoint再继续模型训练呢，在一轮训练后已获得了.pdopt和.pdparams这两个模型文件。\r\n![image](https://user-images.githubusercontent.com/35415263/113004171-fe7a6e80-91a5-11eb-8b3a-84d1511a5cd7.png)\r\n\r\n",
        "state": "closed",
        "user": "darkestcoding",
        "closed_by": "darkestcoding",
        "created_at": "2021-03-30T14:23:15+00:00",
        "updated_at": "2021-03-31T07:27:16+00:00",
        "closed_at": "2021-03-31T07:27:16+00:00",
        "comments_count": [
            "TingquanGao",
            "darkestcoding"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 661,
        "title": "python infer.py 的时候分类数不对",
        "body": "用的develop版本。\r\n在aistudio项目里：\r\n\r\n使用命令：\r\n!python tools/infer/infer.py \\\r\n    -i ~/work/test \\\r\n    --model ResNet50_vd \\\r\n    --pretrained_model \"output/ResNet50_vd/0/ppcls\" \\\r\n    # --use_gpu True \\\r\n    --load_static_weights False \\\r\n    --class_num 2\r\n\r\n输出：\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/setuptools/depends.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\nW0401 10:35:47.180687  5868 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.0, Runtime API Version: 10.1\r\nW0401 10:35:47.185531  5868 device_context.cc:372] device: 0, cuDNN Version: 7.6.\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.weight. out.weight receives a shape [2048, 2], but the expected shape is [2048, 1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.bias. out.bias receives a shape [2], but the expected shape is [1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nFile:neg_1.png, Top-1 result: class id(s): [928], score(s): [0.00]\r\nFile:pos_1.png, Top-1 result: class id(s): [131], score(s): [0.00]\r\nFile:pos_2.png, Top-1 result: class id(s): [861], score(s): [0.00]\r\nFile:neg_3.png, Top-1 result: class id(s): [496], score(s): [0.00]\r\n\r\n打印argv参数，发现class_num在设置为2的时候，系统的数值还是1000\r\n\r\nNamespace(batch_size=1, class_num=1000, cpu_num_threads=10, enable_benchmark=False, enable_mkldnn=False, enable_profile=False, gpu_mem=8000, hubserving=False, image_file='/home/aistudio/work/test', ir_optim=True, load_static_weights=False, model='ResNet50_vd', model_file=None, normalize=True, params_file=None, pre_label_image=False, pre_label_out_idr=None, pretrained_model='output/ResNet50_vd/0/ppcls', resize=224, resize_short=256, server_url=None, top_k=1, use_fp16=False, use_gpu=True, use_tensorrt=False)",
        "state": "closed",
        "user": "skywalk163",
        "closed_by": "skywalk163",
        "created_at": "2021-04-01T03:17:47+00:00",
        "updated_at": "2021-11-17T02:44:16+00:00",
        "closed_at": "2021-04-05T01:46:35+00:00",
        "comments_count": [
            "TingquanGao",
            "skywalk163",
            "Gavinic"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 662,
        "title": "图像处理 随机改变色彩",
        "body": "请问一下  我想在 operators.py 加上一段图像处理  除了 operators这个里面加一段  然后 yaml 里面加一下   还有其他地方地方需要修改吗\r\n# 随机改变亮暗、对比度和颜色等\r\nclass Distort(object):\r\n    \"\"\" crop image \"\"\"\r\n\r\n    def __call__(self, img):\r\n        # 随机改变亮度\r\n        def random_brightness(img, lower=0.5, upper=1.5):\r\n            e = np.random.uniform(lower, upper)\r\n            return ImageEnhance.Brightness(img).enhance(e)\r\n        # 随机改变对比度\r\n        def random_contrast(img, lower=0.5, upper=1.5):\r\n            e = np.random.uniform(lower, upper)\r\n            return ImageEnhance.Contrast(img).enhance(e)\r\n        # 随机改变颜色\r\n        def random_color(img, lower=0.5, upper=1.5):\r\n            e = np.random.uniform(lower, upper)\r\n            return ImageEnhance.Color(img).enhance(e)\r\n\r\n        ops = [random_brightness, random_contrast, random_color]\r\n        np.random.shuffle(ops)\r\n\r\n        img = Image.fromarray(img)\r\n        img = ops[0](img)\r\n        img = ops[1](img)\r\n        img = ops[2](img)\r\n        img = np.asarray(img)\r\n\r\n        return img",
        "state": "closed",
        "user": "wa3926",
        "closed_by": "wa3926",
        "created_at": "2021-04-02T03:21:03+00:00",
        "updated_at": "2021-04-12T03:06:02+00:00",
        "closed_at": "2021-04-12T03:06:02+00:00",
        "comments_count": [
            "TingquanGao",
            "wa3926",
            "wa3926",
            "littletomatodonkey",
            "wa3926"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 665,
        "title": "tools/infer/predict.py时报错",
        "body": "您好，我使用paddle2.0.1，执行python3.7 tools/infer/predict.py时报错：\r\n```\r\n/usr/local/lib/python3.7/site-packages/pkg_resources/_vendor/pyparsing.py:943: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n  collections.MutableMapping.register(ParseResults)\r\n/usr/local/lib/python3.7/site-packages/setuptools/depends.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\n/usr/local/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\nTraceback (most recent call last):\r\n  File \"tools/infer/predict.py\", line 104, in <module>\r\n    predictor = Predictor(args)\r\n  File \"tools/infer/predict.py\", line 32, in __init__\r\n    self.paddle_predictor = create_paddle_predictor(args)\r\n  File \"./tools/infer/utils.py\", line 85, in create_paddle_predictor\r\n    config = Config(args.model_file, args.params_file)\r\nTypeError: __init__(): incompatible constructor arguments. The following argument types are supported:\r\n    1. paddle.fluid.core_avx.AnalysisConfig()\r\n    2. paddle.fluid.core_avx.AnalysisConfig(arg0: paddle.fluid.core_avx.AnalysisConfig)\r\n    3. paddle.fluid.core_avx.AnalysisConfig(arg0: str)\r\n    4. paddle.fluid.core_avx.AnalysisConfig(arg0: str, arg1: str)\r\n\r\nInvoked with: None, None\r\n```\r\n请问 该怎么修复呢",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "TingquanGao",
        "created_at": "2021-04-02T08:41:30+00:00",
        "updated_at": "2021-04-02T10:51:26+00:00",
        "closed_at": "2021-04-02T10:51:26+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 664,
        "title": "infer.py  预测和训练结果不一样问题",
        "body": "2021-04-02 07:09:10,228 - INFO - epoch:44 , train step:0   , top1: 1.00000, loss: 0.00012, lr: 0.002103, batch_cost: 11.17914 s, reader_cost: 10.22869 s, ips: 11.44990 images/sec, eta: 17:54:41\r\n2021-04-02 07:10:53,871 - INFO - epoch:44 , train step:10  , top1: 1.00000, loss: 0.00003, lr: 0.002079, batch_cost: 9.13114 s, reader_cost: 8.18014 s, ips: 14.01796 images/sec, eta: 14:36:17\r\n2021-04-02 07:12:29,053 - INFO - epoch:44 , train step:20  , top1: 1.00000, loss: 0.00001, lr: 0.002055, batch_cost: 9.48291 s, reader_cost: 8.53153 s, ips: 13.49797 images/sec, eta: 15:08:27\r\n2021-04-02 07:14:07,158 - INFO - epoch:44 , train step:30  , top1: 1.00000, loss: 0.00008, lr: 0.002032, batch_cost: 9.63895 s, reader_cost: 8.68856 s, ips: 13.27946 images/sec, eta: 15:21:48\r\n2021-04-02 07:15:45,892 - INFO - epoch:44 , train step:40  , top1: 1.00000, loss: 0.00010, lr: 0.002009, batch_cost: 9.71460 s, reader_cost: 8.76402 s, ips: 13.17604 images/sec, eta: 15:27:25\r\n2021-04-02 07:17:24,538 - INFO - epoch:44 , train step:50  , top1: 1.00000, loss: 0.00005, lr: 0.001985, batch_cost: 9.75117 s, reader_cost: 8.80034 s, ips: 13.12663 images/sec, eta: 15:29:17\r\n2021-04-02 07:19:01,436 - INFO - epoch:44 , train step:60  , top1: 1.00000, loss: 0.00021, lr: 0.001962, batch_cost: 9.73914 s, reader_cost: 8.78844 s, ips: 13.14285 images/sec, eta: 15:26:30\r\n2021-04-02 07:20:38,974 - INFO - epoch:44 , train step:70  , top1: 1.00000, loss: 0.00005, lr: 0.001939, batch_cost: 9.74155 s, reader_cost: 8.79094 s, ips: 13.13959 images/sec, eta: 15:25:07\r\n2021-04-02 07:22:21,764 - INFO - epoch:44 , train step:80  , top1: 1.00000, loss: 0.00002, lr: 0.001916, batch_cost: 9.81724 s, reader_cost: 8.86651 s, ips: 13.03828 images/sec, eta: 15:30:40\r\n2021-04-02 07:24:00,480 - INFO - epoch:44 , train step:90  , top1: 1.00000, loss: 0.00005, lr: 0.001894, batch_cost: 9.82395 s, reader_cost: 8.87337 s, ips: 13.02939 images/sec, eta: 15:29:40\r\n2021-04-02 07:25:49,189 - INFO - epoch:44 , train step:100 , top1: 1.00000, loss: 0.00008, lr: 0.001871, batch_cost: 9.93901 s, reader_cost: 8.98842 s, ips: 12.87855 images/sec, eta: 15:38:54\r\n2021-04-02 07:26:08,800 - INFO - END epoch:44  train top1: 1.00000, loss: 0.00007,  batch_cost: 9.93613 s, reader_cost: 8.98555 s, batch_cost_sum: 924.06009 s, ips: 12.88228 images/sec.\r\n2021-04-02 07:26:15,886 - INFO - valid step:0   , top1: 1.00000, loss: 0.00011, lr: 0.000000, batch_cost: 7.07814 s, reader_cost: 6.87662 s, ips: 12.43265 images/sec\r\n2021-04-02 07:27:18,965 - INFO - valid step:10  , top1: 0.98864, loss: 0.02296, lr: 0.000000, batch_cost: 5.47337 s, reader_cost: 5.27298 s, ips: 16.07785 images/sec\r\n2021-04-02 07:27:53,850 - INFO - END epoch:44  valid top1: 0.99249, loss: 0.04832,  batch_cost: 5.76542 s, reader_cost: 5.57323 s, batch_cost_sum: 40.35792 s, ips: 9.71309 images/sec.\r\n2021-04-02 07:27:56,176 - INFO - Already save model in ./output/ocrcls2/ResNet50_vd/best_model\r\n2021-04-02 07:27:56,177 - INFO - The best top1 acc 0.99249, in epoch: 44\r\n2021-04-02 07:27:57,860 - INFO - Already save model in ./output/ocrcls2/ResNet50_vd/44\r\n\r\n**上面是训练时候打印的  最后使用 tools/infer/infer.py 进行预测  就使用了 训练集里面的一些图片  结果发现有不对的  按理说都100%   后来发现  issue里面我看有人遇到类似问题  但那个是c++的 配置文件不太一样**   \r\n\r\n\r\nTRAIN:\r\n    batch_size: 128\r\n    num_workers: 0\r\n    file_list: \"./dataset/ocrcls/train.txt\"\r\n    data_dir: \"./dataset/ocrcls/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1./255.\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n\r\nVALID:\r\n    batch_size: 88\r\n    num_workers: 0\r\n    file_list: \"./dataset/ocrcls/test.txt\"\r\n    data_dir: \"./dataset/ocrcls/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage: \r\n上面是我配置文件  主要改动 就是去掉了 随机剪裁和翻转  验证和训练都换成了 ResizeImage 直接224      \r\n\r\n我觉得可能和我改动有关 看了下 inter 调了一个配置      # parser.add_argument(\"--resize_short\", type=int, default=256)\r\n    parser.add_argument(\"--resize\", type=int, default=224)  我就把resize_short  一行注释了   结果就报错了\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/infer/infer.py\", line 87, in <module>\r\n    main()\r\n  File \"tools/infer/infer.py\", line 58, in main\r\n    data = utils.preprocess(img, args)\r\n  File \"/paddle/PaddleClas/tools/infer/utils.py\", line 106, in preprocess\r\n    resize_op = ResizeImage(resize_short=args.resize_short)\r\nAttributeError: 'Namespace' object has no attribute 'resize_short'\r\n\r\n刚入门新手 问题有点多！  求大佬指点  预测这边应该怎么改参数    ",
        "state": "closed",
        "user": "wa3926",
        "closed_by": "wa3926",
        "created_at": "2021-04-02T06:44:10+00:00",
        "updated_at": "2021-04-02T07:06:39+00:00",
        "closed_at": "2021-04-02T07:06:39+00:00",
        "comments_count": [
            "TingquanGao",
            "wa3926"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 666,
        "title": "怎么获取输出节点",
        "body": "请问，从这行代码`exe, program, feed_names, fetch_lists = create_predictor(args)` 中，怎么获取输出节点呢？\r\n",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-02T08:56:21+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:22+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 671,
        "title": "configs/ResNeXt101_wsl/ResNeXt101_32x8d_wsl.yaml   配置文件格式问题",
        "body": "为何这个文件的mode为\"valid\", 其他的都是train\r\n是不是疏忽导致的？",
        "state": "closed",
        "user": "Intsigstephon",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-04-08T12:05:54+00:00",
        "updated_at": "2021-04-10T03:24:24+00:00",
        "closed_at": "2021-04-10T03:24:24+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 673,
        "title": "(Fatal) Blocking queue is killed because the data reader raises an exception",
        "body": "hello, 我使用paddle2.0.1 和paddleClas-release-2.0，报错：\r\n```\r\n2021-04-09 11:54:48,699 - INFO - Load weight: bn5c_branch2c_variance, shape: (2048,)\r\n2021-04-09 11:54:48,699 - INFO - Load weight: fc_weights, shape: (2048, 1000)\r\n2021-04-09 11:54:48,700 - INFO - Load weight: fc_offset, shape: (1000,)\r\n/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.weight. out.weight receives a shape [2048, 1000], but the expected shape is [2048, 7979].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.bias. out.bias receives a shape [1000], but the expected shape is [7979].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n2021-04-09 11:54:48,983 - INFO - Finish initing model from /root/gongzhenting/work/clas/PaddleClas/pretrained/Res2Net101_vd_26w_4s_pretrained\r\n2021-04-09 11:54:56,779 - ERROR - DataLoader reader thread raised an exception!Traceback (most recent call last):\r\nINFO 2021-04-09 11:55:03,379 launch_utils.py:307] terminate all the procs\r\nERROR 2021-04-09 11:55:03,379 launch_utils.py:545] ABORT!!! Out of all 4 trainers, the trainer process with rank=[0, 1, 2, 3] was aborted. Please check its log.\r\nINFO 2021-04-09 11:55:06,382 launch_utils.py:307] terminate all the procs\r\n\r\n  File \"tools/train.py\", line 118, in <module>\r\n    main(args)\r\n  File \"tools/train.py\", line 90, in main\r\n    epoch_id, 'train')\r\n  File \"/root/gongzhenting/work/clas/PaddleClas/PaddleClas-release-2.0/tools/program.py\", line 300, in run\r\n    for idx, batch in enumerate(dataloader()):\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 684, in _get_data\r\n    data = self._data_queue.get(timeout=self._timeout)\r\n  File \"/usr/local/lib/python3.7/multiprocessing/queues.py\", line 105, in get\r\n    raise Empty\r\n_queue.Empty\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/local/lib/python3.7/threading.py\", line 865, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 616, in _thread_loop\r\n    batch = self._get_data()\r\n  File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 700, in _get_data\r\n    \"pids: {}\".format(len(failed_workers), pids))\r\nRuntimeError: DataLoader 4 workers exit unexpectedly, pids: 6073, 6074, 6075, 6077\r\n  File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 779, in __next__\r\n\r\n    data = self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:158)\r\n```\r\n我怀疑可能是我的数据有一部分是损坏的，所以修改了[这里](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.0/ppcls/data/reader.py#L188)的代码为：\r\n```\r\n        try:\r\n            with open(img_path, 'rb') as f:\r\n                img = f.read()\r\n            return (transform(img, self.ops), int(label))\r\n        except:\r\n            pass\r\n```\r\n但是还是报同样的错误，该怎么解决呢？",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-09T11:55:54+00:00",
        "updated_at": "2022-03-16T04:07:26+00:00",
        "closed_at": "2022-03-16T04:07:24+00:00",
        "comments_count": [
            "TingquanGao",
            "IamMegatron2025",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 672,
        "title": "报错为segmentation fault, 应为out of memory!",
        "body": "W0409 14:41:11.130335  5046 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.0, Runtime API Version: 10.2\r\nW0409 14:41:11.133520  5046 device_context.cc:372] device: 0, cuDNN Version: 8.0.\r\n2021-04-09 14:41:14,308 - INFO - In distillation mode, teacher model will be loaded firstly before student model.\r\n2021-04-09 14:41:15,061 - INFO - Finish initing teacher model from ['./ResNet50_vd_ssld_v2_pretrained']\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1617950478 (unix time) try \"date -d @1617950478\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 5046 (TID 0x7fb4a88fb740) from PID 0 ***]\r\n\r\nSegmentation fault (core dumped)\r\n\r\n\r\n\r\n\r\n以上, 请问能看出是什么问题吗?\r\n我初始时候batchsize有意识设小, 但事实上还是不够小.\r\nsegmentation fault会让人以为是环境问题, 我前后装了n多次paddlepaddle.\r\n曾有幸在百度实习过, 我记得paddle1.x的时代, 是有out of memory的报错呀, 咋现在是segmentation fault了?\r\n\r\n另外, docker的层数能不能合并一下, 别那么多, 有些公司(匿了)的镜像构建平台会限制层数, paddle release版本的66层, 远超了.\r\n\r\n哎, 气死我了, 必须吐槽一下Segmentation fault, 作为曾经百度的一员对百度还是有感情的, paddle推广过程中要注意细节啊!!! 细节!!!",
        "state": "closed",
        "user": "imchinfei",
        "closed_by": "imchinfei",
        "created_at": "2021-04-09T06:53:54+00:00",
        "updated_at": "2021-04-09T07:02:37+00:00",
        "closed_at": "2021-04-09T07:02:36+00:00",
        "comments_count": [
            "TingquanGao",
            "imchinfei"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 675,
        "title": "whl包部署使用resnet模型，返回result中的class_ids对应的实际枚举类在哪里可以查看",
        "body": "\r\ntop-1 result: {'filename': '/Users/apple/Downloads/11.jpg', 'class_ids': array([975]), 'scores': array([0.47659966], dtype=float32), 'label_names': ['lakeside, lakeshore']}\r\n\r\nclass_ids是数字，无法明确含义",
        "state": "closed",
        "user": "whz11",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-10T10:24:49+00:00",
        "updated_at": "2022-03-16T04:07:43+00:00",
        "closed_at": "2022-03-16T04:07:25+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 682,
        "title": "如何利用提供的10万分类模型的预训练静态图权重获得图像的embedding特征？",
        "body": "想请教下，如何加载10万分类模型的预训练静态图权重，同时跑一遍前向计算得到图片的特征向量呢？我的目的是希望把这个么模型得到的特征向量作为图片相似度的计算。或者如果有更好的计算图片相似度的方式么？\r\n\r\n谢谢！",
        "state": "closed",
        "user": "nihuizhidao",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-14T13:09:18+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:26+00:00",
        "comments_count": [
            "littletomatodonkey",
            "who0sy",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 684,
        "title": "关于训练完成的模型动态图转化",
        "body": "我已经利用PaddleClas完成了我的图像分类任务，并且得到了`best_model` \r\n![cgSDFf.png](https://z3.ax1x.com/2021/04/14/cgSDFf.png)\r\n接下来我希望把模型部署在安卓端/IOS端，但我不知道该如何转化我的动态图模型或者设置怎么样的参数重新训练得到静态图模型，以便我完成端侧的部署工作\r\n",
        "state": "closed",
        "user": "WangRongsheng",
        "closed_by": "WangRongsheng",
        "created_at": "2021-04-14T15:47:38+00:00",
        "updated_at": "2021-04-15T03:10:02+00:00",
        "closed_at": "2021-04-15T03:10:02+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 687,
        "title": "速度慢",
        "body": "用paddleClas的flower的数据集，大概12ms处理一帧。\r\n但是在参数不变的情况，换成一个比较大一点的数据集大概15000张图片分类，大概56ms处理一帧。\r\nyaml中的参数只有数据地址换了，size，thread等参数都不变，为什么速度变慢了呢。。。\r\n而且感觉paddleClas处理的速度也比之前paddlepaddle/models/PaddleCV/image_classification速度慢好多",
        "state": "closed",
        "user": "tuotuowj",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-15T06:59:22+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:27+00:00",
        "comments_count": [
            "hysunflower",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 689,
        "title": "HS-ResNet",
        "body": "您好，想问一下HS-ResNet的代码公布了吗。论文中讲解Hierarchical-Split Block我还不是太明白，想要看一下代码。",
        "state": "closed",
        "user": "zzl-997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-19T01:51:56+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:27+00:00",
        "comments_count": [
            "cuicheng01",
            "wangsun1996",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 691,
        "title": "MobileNetV3_large_x0.5",
        "body": "请问这个后缀X0.5是什么意思呢？",
        "state": "closed",
        "user": "zcswdt",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-04-20T06:48:17+00:00",
        "updated_at": "2021-04-23T05:18:44+00:00",
        "closed_at": "2021-04-23T05:18:44+00:00",
        "comments_count": [
            "TingquanGao",
            "zcswdt",
            "zcswdt",
            "TingquanGao",
            "zcswdt"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 693,
        "title": "whl的\"经过预处理的np.ndarray形式输入\"",
        "body": "请问，请问base64编码的图片或者cv2的图像怎么做才能符合paddleclas的“经过预处理的np.ndarray形式输入”，如何做这种预处理呢，找了2天了没找到任何参考实例",
        "state": "closed",
        "user": "lbb1993",
        "closed_by": "lbb1993",
        "created_at": "2021-04-22T06:59:58+00:00",
        "updated_at": "2021-04-22T07:32:19+00:00",
        "closed_at": "2021-04-22T07:32:19+00:00",
        "comments_count": [
            "TingquanGao",
            "lbb1993"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 695,
        "title": "我flower102训练的精度很高，但是我输入验证的时候精度特别低",
        "body": "按照30分钟快速开始的教程，步骤如下：\r\n1.安装好paddlepaddle-gpu，安装号paddleclas和依赖\r\n2.执行：\r\n`python tools/train.py     -c ./configs/quick_start/ResNet50_vd_finetune.yaml     -o use_gpu=True`\r\n\r\n3.训练7轮时精度：\r\n```\r\n2021-04-22 20:18:08,749 - INFO - epoch:7  , valid step:110 , top1: 1.00000, top5: 1.00000, loss: 0.08166, lr: 0.000000, batch_cost: 0.05245 s, reader_cost: 0.00057 s, ips: 152.51218 images/sec.\r\n2021-04-22 20:18:09,255 - INFO - epoch:7  , valid step:120 , top1: 0.87500, top5: 1.00000, loss: 0.47113, lr: 0.000000, batch_cost: 0.05228 s, reader_cost: 0.00053 s, ips: 153.01502 images/sec.\r\n2021-04-22 20:18:09,593 - INFO - END epoch:7   valid top1: 0.90196, top5: 0.98137, loss: 0.36979,  batch_cost: 0.05205 s, reader_cost: 0.00050 s, batch_cost_sum: 6.14132 s, ips: 76.85640 images/sec.\r\n2021-04-22 20:18:11,722 - INFO - Already save model in ./output/ResNet50_vd/best_model\r\n2021-04-22 20:18:11,723 - INFO - The best top1 acc 0.90196, in epoch: 7\r\n2021-04-22 20:18:13,801 - INFO - Already save model in ./output/ResNet50_vd/7\r\n```\r\n4.执行如下命令验证模型效果，其中image_06765.jpg是训练集中的一个花的图片：\r\n```\r\npython tools/infer/infer.py \\\r\n    -i /home/lbb/Desktop/image_06765.jpg \\\r\n    --model ResNet50_vd \\\r\n    --pretrained_model \"./output/ResNet50_vd/best_model/ppcls\" \\\r\n    --use_gpu True \\\r\n    --load_static_weights False\r\n```\r\n结果精度非常低：\r\n```\r\npaddle_fish_classify) lbb@lbb-ubuntu:~/Desktop/paddleclas/PaddleClas$ python tools/infer/infer.py \\\r\n>     -i /home/lbb/Desktop/image_06765.jpg \\\r\n>     --model ResNet50_vd \\\r\n>     --pretrained_model \"./output/ResNet50_vd/best_model/ppcls\" \\\r\n>     --use_gpu True \\\r\n>     --load_static_weights False\r\n/home/lbb/anaconda3/envs/paddle_fish_classify/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\nNamespace(batch_size=1, class_num=1000, cpu_num_threads=10, enable_benchmark=False, enable_mkldnn=False, enable_profile=False, gpu_mem=8000, hubserving=False, image_file='/home/lbb/Desktop/image_06765.jpg', ir_optim=True, load_static_weights=False, model='ResNet50_vd', model_file=None, normalize=True, params_file=None, pre_label_image=False, pre_label_out_idr=None, pretrained_model='./output/ResNet50_vd/best_model/ppcls', resize=224, resize_short=256, top_k=1, use_fp16=False, use_gpu=True, use_tensorrt=False)\r\nW0422 20:28:25.841699 198315 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 11.2, Runtime API Version: 11.0\r\nW0422 20:28:25.843681 198315 device_context.cc:372] device: 0, cuDNN Version: 8.1.\r\n/home/lbb/anaconda3/envs/paddle_fish_classify/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.weight. out.weight receives a shape [2048, 102], but the expected shape is [2048, 1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/home/lbb/anaconda3/envs/paddle_fish_classify/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for out.bias. out.bias receives a shape [102], but the expected shape is [1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nCurrent image file: /home/lbb/Desktop/image_06765.jpg\r\n\ttop1, class id: 1, probability: 0.0031\r\n\ttop2, class id: 290, probability: 0.0027\r\n\ttop3, class id: 650, probability: 0.0025\r\n\ttop4, class id: 459, probability: 0.0025\r\n\ttop5, class id: 157, probability: 0.0024\r\n```\r\n希望大佬能指导一下，我实在是找不到问的人了，谢谢~\r\n",
        "state": "closed",
        "user": "lbb1993",
        "closed_by": "lbb1993",
        "created_at": "2021-04-22T12:30:57+00:00",
        "updated_at": "2021-04-23T09:31:40+00:00",
        "closed_at": "2021-04-23T09:31:40+00:00",
        "comments_count": [
            "lbb1993",
            "littletomatodonkey",
            "lbb1993"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 694,
        "title": "预训练模型加载",
        "body": "请问，我在 https://github.com/PaddlePaddle/PaddleClas/blob/release/static/docs/zh_CN/models/models_intro.md 这里下载VGG19的预训练模型，可是下载下来是tar文件，这个如果自己写代码加载权重，该怎么加载啊，我只知道paddle.load()加载的是pdparams类型的文件。",
        "state": "closed",
        "user": "zhijiejia",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-04-22T08:52:02+00:00",
        "updated_at": "2021-04-23T06:08:16+00:00",
        "closed_at": "2021-04-23T06:08:16+00:00",
        "comments_count": [
            "littletomatodonkey",
            "zhijiejia"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 699,
        "title": "导出模型时如若gast为最新版本，会提示出错",
        "body": "![image](https://user-images.githubusercontent.com/19339784/115986379-717ad780-a5e2-11eb-97fd-0888fff28293.png)\r\n来自外部用户的反馈",
        "state": "closed",
        "user": "jiangjiajun",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-04-25T08:22:43+00:00",
        "updated_at": "2021-04-28T09:34:13+00:00",
        "closed_at": "2021-04-28T09:34:13+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 702,
        "title": "训练报错",
        "body": "![image](https://user-images.githubusercontent.com/53975909/116086656-9c445900-a6d2-11eb-89d1-f0037ecf360f.png)\r\n",
        "state": "closed",
        "user": "Monday-Leo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-26T13:01:54+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:28+00:00",
        "comments_count": [
            "TingquanGao",
            "Monday-Leo",
            "TingquanGao",
            "Monday-Leo",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 703,
        "title": "轻量级网络不加载预训练模型训练",
        "body": "轻量级网络不加载预训练模型训练，模型的学习率，学习轮数应该设置为多少合适？",
        "state": "closed",
        "user": "Monday-Leo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-27T06:26:01+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:29+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 706,
        "title": "MixNet的config没有放出来吗？这里的transformer能转成paddlelite吗？",
        "body": "如上",
        "state": "closed",
        "user": "Liys0558",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-04-29T08:04:36+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:30+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 722,
        "title": "训练结果",
        "body": "为什么二分类在训练过程中top1都差不多100%了，但是在导出模型之后对训练集进行测试发现出来的标签都是0？\r\n模型导出：\r\n![微信截图_20210513210809](https://user-images.githubusercontent.com/55653936/118129932-61128b80-b42f-11eb-9a46-95fd72c1358c.png)\r\n训练过程：\r\n![微信截图_20210513210937](https://user-images.githubusercontent.com/55653936/118130089-8dc6a300-b42f-11eb-9237-74f4ddfb560c.png)\r\n",
        "state": "closed",
        "user": "xuxiaoxxxx",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-13T13:09:54+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:32+00:00",
        "comments_count": [
            "littletomatodonkey",
            "xuxiaoxxxx",
            "littletomatodonkey",
            "buaacarzp",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 727,
        "title": "ABORT!!! Out of all 4 trainers.terminate all the procs",
        "body": "2021-05-16 22:13:52,363 - INFO - ------------------------------------------------------------\r\n2021-05-16 22:13:52,363 - INFO - checkpoints : \r\n2021-05-16 22:13:52,363 - INFO - classes_num : 100\r\n2021-05-16 22:13:52,363 - INFO - epochs : 100\r\n2021-05-16 22:13:52,363 - INFO - image_shape : [3, 32, 32]\r\n2021-05-16 22:13:52,364 - INFO - mode : train\r\n2021-05-16 22:13:52,364 - INFO - model_save_dir : output_CIFAR\r\n2021-05-16 22:13:52,364 - INFO - pretrained_model : ./pretrained/ResNet50_vd_ssld_pretrained\r\n2021-05-16 22:13:52,364 - INFO - save_interval : 1\r\n2021-05-16 22:13:52,364 - INFO - topk : 5\r\n2021-05-16 22:13:52,364 - INFO - total_images : 50000\r\n2021-05-16 22:13:52,364 - INFO - use_mix : False\r\n2021-05-16 22:13:52,364 - INFO - valid_interval : 1\r\n2021-05-16 22:13:52,364 - INFO - validate : True\r\nW0516 22:13:52.367004 35724 nccl_context.cc:142] Socket connect worker 127.0.0.1:52199 failed, try again after 3 seconds.\r\nINFO 2021-05-16 22:14:00,648 launch_utils.py:307] terminate all the procs\r\nERROR 2021-05-16 22:14:00,649 launch_utils.py:545] ABORT!!! Out of all 4 trainers, the trainer process with rank=[1, 2, 3] was aborted. Please check its log.\r\nINFO 2021-05-16 22:14:03,652 launch_utils.py:307] terminate all the procs\r\n\r\n--------------------\r\npython 3.6\r\ncuda11.1\r\n3060",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-17T02:25:02+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:33+00:00",
        "comments_count": [
            "littletomatodonkey",
            "dingjiaweiww",
            "superAiken",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 732,
        "title": "我用hub部署分类模型时,调用就出现这个问题",
        "body": "./tools/infer/utils.py:227: DeprecationWarning: The binary mode of fromstring is deprecated, as it behaves surprisingly on unicode inputs. Use frombuffer instead\r\n  data = np.fromstring(data, dtype).reshape(shape)\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1621321952 (unix time) try \"date -d @1621321952\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 1516 (TID 0x7f41fab9f700) from PID 0 ***]\r\n\r\n段错误",
        "state": "closed",
        "user": "intjun",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-18T07:15:39+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:35+00:00",
        "comments_count": [
            "TingquanGao",
            "intjun",
            "TingquanGao",
            "intjun",
            "TingquanGao",
            "intjun",
            "TingquanGao",
            "intjun",
            "TingquanGao",
            "gaoyuchris",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 733,
        "title": "能否提供视觉tranformer 静态图版本，目前看到只支持动态图",
        "body": "",
        "state": "closed",
        "user": "paulpaul91",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-19T08:13:06+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:37+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 728,
        "title": "flowers102,fc.weight receives a shape [512, 102], but the expected shape is [512, 1000].",
        "body": "\r\npython tools/infer/infer.py --model ShuffleNetV2_x0_25 -i dataset/flowers102/jpg/image_00001.jpg --pretrained_model output/ShuffleNetV2_x0_25/best_model/ppcls  --use_gpu True\r\n\r\nW0516 21:46:54.029057 29512 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 8.6, Driver API Version: 11.2, Runtime API Version: 11.0\r\nW0516 21:46:54.030537 29512 device_context.cc:372] device: 0, cuDNN Version: 8.0.\r\n/home/mm/anaconda3/envs/PaddleClas/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for _fc.weight. _fc.weight receives a shape [512, 102], but the expected shape is [512, 1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n/home/mm/anaconda3/envs/PaddleClas/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py:1303: UserWarning: Skip loading for _fc.bias. _fc.bias receives a shape [102], but the expected shape is [1000].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nFile:image_00001.jpg, Top-1 result: class id(s): [497], score(s): [0.02]\r\n\r\n----------------\r\nflowers102演示 按照官方文档操作  报错\r\n",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-17T02:27:27+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:33+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 734,
        "title": "可以实现在原有的模型上新增分类，但不重新训练所有数据？",
        "body": "可以实现在原有的模型上新增分类，但不重新训练所有数据？",
        "state": "closed",
        "user": "lmmir",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-20T01:33:41+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:38+00:00",
        "comments_count": [
            "TingquanGao",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 736,
        "title": "PaddleClas 的train log 文件在哪里？",
        "body": "",
        "state": "closed",
        "user": "dingjiaweiww",
        "closed_by": "littletomatodonkey",
        "created_at": "2021-05-23T01:16:20+00:00",
        "updated_at": "2021-06-14T06:32:04+00:00",
        "closed_at": "2021-06-14T06:32:04+00:00",
        "comments_count": [
            "littletomatodonkey",
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 747,
        "title": "支持指定层特征输出吗",
        "body": "分类模型支持指定一个CNN网络层 并获取该层的特征输出吗\r\n像keras那样 获取vgg16最后一次池化层的结果 或者 FC2的全连接结果",
        "state": "closed",
        "user": "yanchaoguo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-05-26T07:32:56+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:41+00:00",
        "comments_count": [
            "littletomatodonkey",
            "yanchaoguo",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 766,
        "title": "resnetvd是哪篇论文的？",
        "body": "resnetvd是哪篇论文的？",
        "state": "closed",
        "user": "buaacarzp",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-02T01:38:59+00:00",
        "updated_at": "2022-03-16T04:07:44+00:00",
        "closed_at": "2022-03-16T04:07:42+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 768,
        "title": "有1.8版本的pretrained model吗？",
        "body": "因为一些原因暂时不能升级到2.0，有1.8版本的静态图pretrain模型吗？",
        "state": "closed",
        "user": "Ricardozzf",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-02T07:47:10+00:00",
        "updated_at": "2022-03-16T04:07:45+00:00",
        "closed_at": "2022-03-16T04:07:43+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 781,
        "title": "随机裁剪如何不使用方形裁剪",
        "body": "想裁剪不是方形的图片，但是在传入一个元组，报错。\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"D:\\PaddleClas-release-2.1\\ppcls\\data\\reader.py\", line 192, in __getitem__\r\n    return (transform(img, self.ops), int(label))\r\n  File \"D:\\PaddleClas-release-2.1\\ppcls\\data\\imaug\\__init__.py\", line 43, in transform\r\n    data = op(data)\r\n  File \"D:\\PaddleClas-release-2.1\\ppcls\\data\\imaug\\operators.py\", line 157, in __call__\r\n    return cv2.resize(img, size)\r\nSystemError: new style getargs format but argument is not a tuple\r\n```\r\n![image](https://user-images.githubusercontent.com/28743875/120739459-1a8ee900-c524-11eb-9802-f4314f347916.png)\r\n",
        "state": "closed",
        "user": "ActonMartin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-04T03:02:38+00:00",
        "updated_at": "2022-03-16T04:07:45+00:00",
        "closed_at": "2022-03-16T04:07:43+00:00",
        "comments_count": [
            "weisy11",
            "lazyn1997",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 785,
        "title": "paddleclas模型库训练的ppcls.pdparams如何转换为静态图模型参数：ppcls.pdiparams   ？",
        "body": "没有找到关于export_model.py的说明文档，export_model.py里面的add_argument参数中也没有关于ppcls.pdparams，那如何将训练好的动态图参数转换为静态图？我是为了之后使用opt进行转换为.nb模型然后进行推理部署。paddleclas、PaddleDetection和paddleseg的export为什么都不一样。。。但是detection和seg模型库里有关于export.py的使用文档。。。。",
        "state": "closed",
        "user": "Fly-hub",
        "closed_by": "weisy11",
        "created_at": "2021-06-04T07:24:52+00:00",
        "updated_at": "2022-03-16T06:18:00+00:00",
        "closed_at": "2022-03-16T06:18:00+00:00",
        "comments_count": [
            "Fly-hub",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 789,
        "title": "我想把一个resnet_vd转为onnx，想请问应该用静态图还是动态图，参数该如何填",
        "body": "这个模型 https://github.com/PaddlePaddle/PaddleClas/blob/release/2.1/docs/zh_CN/application/transfer_learning.md\r\n页面里面有个.pdparams文件\r\n\r\n根据这个文档 https://github.com/PaddlePaddle/Paddle2ONNX/blob/release/0.6/README_zh.md\r\n\r\n两个都试了，都有问题\r\n```bash\r\n$ paddle2onnx \\\r\n    --model_dir /root/paddle \\\r\n    --model_filename /root/paddle/PaddleClas/ppcls/modeling/architectures/resnet_vd.py \\\r\n    --params_filename /root/paddle/ResNet50_vd_10w_pretrained.pdparams \\\r\n    --save_file onnx_file.onnx\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/bin/paddle2onnx\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle2onnx/command.py\", line 136, in main\r\n    program2onnx(\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle2onnx/command.py\", line 102, in program2onnx\r\n    [program, feed_var_names, fetch_vars] = fluid.io.load_inference_model(\r\n  File \"<decorator-gen-88>\", line 2, in load_inference_model\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/framework.py\", line 234, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/io.py\", line 1538, in load_inference_model\r\n    program = Program.parse_from_string(program_desc_str)\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/framework.py\", line 5080, in parse_from_string\r\n    p.desc = core.ProgramDesc(binary_str)\r\nValueError: (InvalidArgument) Failed to parse program_desc from binary string.\r\n  [Hint: Expected desc_.ParseFromString(binary_str) == true, but received desc_.ParseFromString(binary_str):0 != true:1.] (at /paddle/paddle/fluid/framework/program_desc.cc:103)\r\n```\r\n\r\n另一个\r\n\r\n```python\r\nimport os\r\nimport time\r\nimport paddle\r\n\r\n# 从模型代码中导入模型\r\nfrom PaddleClas.ppcls.modeling.architectures.resnet_vd import ResNet50_vd\r\n\r\n# 实例化模型\r\nmodel = ResNet50_vd()\r\n# import ipdb; ipdb.set_trace()\r\n# 将模型设置为推理状态\r\nmodel.eval()\r\n\r\n# 定义输入数据\r\n# input_spec = paddle.static.InputSpec(shape=[None, 3, 320, 320], dtype='float32', name='image')\r\n\r\n# ONNX模型导出\r\n# enable_onnx_checker设置为True，表示使用官方ONNX工具包来check模型的正确性，需要安装ONNX（pip install onnx）\r\n\r\n# paddle.onnx.export(model, 'resnet50', input_spec=[input_spec], opset_version=12, enable_onnx_checker=True)\r\npaddle.onnx.export(model, 'ResNet50_vd.onnx')\r\n\r\n```\r\n\r\n得到输出\r\n\r\n```\r\nInference models that PaddleClas provides are listed as follows:\r\n+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|       Series      |                                                                           Name                                                                           |\r\n+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|      AlexNet      |                                                                         AlexNet                                                                          |\r\n|      DarkNet      |                                                                        DarkNet53                                                                         |\r\n|        DeiT       |     DeiT_base_distilled_patch16_224  DeiT_base_distilled_patch16_384  DeiT_base_patch16_224  DeiT_base_patch16_384  DeiT_small_distilled_patch16_224     |\r\n|                   |                                      DeiT_small_patch16_224  DeiT_tiny_distilled_patch16_224  DeiT_tiny_patch16_224                                      |\r\n|      DenseNet     |                                             DenseNet121  DenseNet161  DenseNet169  DenseNet201  DenseNet264                                              |\r\n|        DPN        |                                                           DPN68  DPN92  DPN98  DPN107  DPN131                                                            |\r\n|    EfficientNet   |   EfficientNetB0  EfficientNetB0_small  EfficientNetB1  EfficientNetB2  EfficientNetB3  EfficientNetB4  EfficientNetB5  EfficientNetB6  EfficientNetB7   |\r\n|      GhostNet     |                                             GhostNet_x0_5  GhostNet_x1_0  GhostNet_x1_3  GhostNet_x1_3_ssld                                              |\r\n|       HRNet       |              HRNet_W18_C  HRNet_W30_C  HRNet_W32_C  HRNet_W40_C  HRNet_W44_C  HRNet_W48_C  HRNet_W64_C  HRNet_W18_C_ssld  HRNet_W48_C_ssld               |\r\n|     Inception     |                                                           GoogLeNet  InceptionV3  InceptionV4                                                            |\r\n|    MobileNetV1    |                                  MobileNetV1_x0_25  MobileNetV1_x0_5  MobileNetV1_x0_75  MobileNetV1  MobileNetV1_ssld                                   |\r\n|    MobileNetV2    |                MobileNetV2_x0_25  MobileNetV2_x0_5  MobileNetV2_x0_75  MobileNetV2  MobileNetV2_x1_5  MobileNetV2_x2_0  MobileNetV2_ssld                 |\r\n|    MobileNetV3    |    MobileNetV3_small_x0_35  MobileNetV3_small_x0_5  MobileNetV3_small_x0_75  MobileNetV3_small_x1_0  MobileNetV3_small_x1_25  MobileNetV3_large_x0_35    |\r\n|                   |              MobileNetV3_large_x0_5  MobileNetV3_large_x0_75  MobileNetV3_large_x1_0  MobileNetV3_large_x1_25  MobileNetV3_small_x1_0_ssld               |\r\n|                   |                                                               MobileNetV3_large_x1_0_ssld                                                                |\r\n|       RegNet      |                                                                       RegNetX_4GF                                                                        |\r\n|      Res2Net      | Res2Net50_14w_8s  Res2Net50_26w_4s  Res2Net50_vd_26w_4s  Res2Net200_vd_26w_4s  Res2Net101_vd_26w_4s  Res2Net50_vd_26w_4s_ssld  Res2Net101_vd_26w_4s_ssld |\r\n|                   |                                                                Res2Net200_vd_26w_4s_ssld                                                                 |\r\n|      ResNeSt      |                                                            ResNeSt50  ResNeSt50_fast_1s1x64d                                                             |\r\n|       ResNet      |    ResNet18  ResNet18_vd  ResNet34  ResNet34_vd  ResNet50  ResNet50_vc  ResNet50_vd  ResNet50_vd_v2  ResNet101  ResNet101_vd  ResNet152  ResNet152_vd    |\r\n|                   |         ResNet200_vd  ResNet34_vd_ssld  ResNet50_vd_ssld  ResNet50_vd_ssld_v2  ResNet101_vd_ssld  Fix_ResNet50_vd_ssld_v2  ResNet50_ACNet_deploy         |\r\n|      ResNeXt      |          ResNeXt50_32x4d  ResNeXt50_vd_32x4d  ResNeXt50_64x4d  ResNeXt50_vd_64x4d  ResNeXt101_32x4d  ResNeXt101_vd_32x4d  ResNeXt101_32x8d_wsl           |\r\n|                   | ResNeXt101_32x16d_wsl  ResNeXt101_32x32d_wsl  ResNeXt101_32x48d_wsl  Fix_ResNeXt101_32x48d_wsl  ResNeXt101_64x4d  ResNeXt101_vd_64x4d  ResNeXt152_32x4d  |\r\n|                   |                                                ResNeXt152_vd_32x4d  ResNeXt152_64x4d  ResNeXt152_vd_64x4d                                                |\r\n|       SENet       |     SENet154_vd  SE_HRNet_W64_C_ssld  SE_ResNet18_vd  SE_ResNet34_vd  SE_ResNet50_vd  SE_ResNeXt50_32x4d  SE_ResNeXt50_vd_32x4d  SE_ResNeXt101_32x4d     |\r\n|    ShuffleNetV2   |          ShuffleNetV2_swish  ShuffleNetV2_x0_25  ShuffleNetV2_x0_33  ShuffleNetV2_x0_5  ShuffleNetV2_x1_0  ShuffleNetV2_x1_5  ShuffleNetV2_x2_0          |\r\n|     SqueezeNet    |                                                               SqueezeNet1_0  SqueezeNet1_1                                                               |\r\n|  SwinTransformer  |   SwinTransformer_large_patch4_window7_224_22kto1k  SwinTransformer_large_patch4_window12_384_22kto1k  SwinTransformer_base_patch4_window7_224_22kto1k   |\r\n|                   |           SwinTransformer_base_patch4_window12_384_22kto1k  SwinTransformer_base_patch4_window12_384  SwinTransformer_base_patch4_window7_224            |\r\n|                   |                                    SwinTransformer_small_patch4_window7_224  SwinTransformer_tiny_patch4_window7_224                                     |\r\n|        VGG        |                                                                VGG11  VGG13  VGG16  VGG19                                                                |\r\n| VisionTransformer |          ViT_base_patch16_224  ViT_base_patch16_384  ViT_base_patch32_384  ViT_large_patch16_224  ViT_large_patch16_384  ViT_large_patch32_384           |\r\n|                   |                                                                  ViT_small_patch16_224                                                                   |\r\n|      Xception     |                                        Xception41  Xception41_deeplab  Xception65  Xception65_deeplab  Xception71                                        |\r\n+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+\r\nW0604 17:43:06.252307  2924 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 11.0, Runtime API Version: 10.2\r\nW0604 17:43:06.255980  2924 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\nTraceback (most recent call last):\r\n  File \"paddle2onnx.py\", line 21, in <module>\r\n    paddle.onnx.export(model, 'ResNet50_vd.onnx')\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/onnx/export.py\", line 90, in export\r\n    p2o = try_import('paddle2onnx')\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/utils/lazy_import.py\", line 32, in try_import\r\n    mod = importlib.import_module(module_name)\r\n  File \"/root/anaconda3/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 783, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"./paddle2onnx.py\", line 9, in <module>\r\n    model = ResNet50_vd()\r\n  File \"/root/paddle/PaddleClas/ppcls/modeling/architectures/resnet_vd.py\", line 338, in ResNet50_vd\r\n    model = ResNet_vd(layers=50, **args)\r\n  File \"/root/paddle/PaddleClas/ppcls/modeling/architectures/resnet_vd.py\", line 231, in __init__\r\n    self.conv1_1 = ConvBNLayer(\r\n  File \"/root/paddle/PaddleClas/ppcls/modeling/architectures/resnet_vd.py\", line 50, in __init__\r\n    self._conv = Conv2D(\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/nn/layer/conv.py\", line 633, in __init__\r\n    super(Conv2D, self).__init__(\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/nn/layer/conv.py\", line 132, in __init__\r\n    self.weight = self.create_parameter(\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/dygraph/layers.py\", line 411, in create_parameter\r\n    return self._helper.create_parameter(temp_attr, shape, dtype, is_bias,\r\n  File \"/root/anaconda3/lib/python3.8/site-packages/paddle/fluid/layer_helper_base.py\", line 364, in create_parameter\r\n    raise ValueError(\r\nValueError: parameter name [conv1_1_weights] have be been used. In dygraph mode, the name of parameter can't be same.Please check the parameter attr value passed to self.create_parameter or constructor of dygraph Layers\r\n```\r\n\r\n想请问正确的姿势是什么，想直接取这个模型用\r\n",
        "state": "closed",
        "user": "cww97",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-04T10:39:55+00:00",
        "updated_at": "2022-03-16T04:07:46+00:00",
        "closed_at": "2022-03-16T04:07:44+00:00",
        "comments_count": [
            "littletomatodonkey",
            "Zeref996",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 846,
        "title": "自定义数据集进行训练报错：Error top4",
        "body": "自定义数据集进行训练，使用resnet101，数据集有1854张图片，一共是4个类别，标签编号是0-3，请问这个报错要怎么解决？\r\n\r\n![image](https://user-images.githubusercontent.com/41233036/122147491-94f82b00-ce8b-11eb-8bfb-224a0046e0ad.png)\r\n\r\n![image](https://user-images.githubusercontent.com/41233036/122147461-86aa0f00-ce8b-11eb-8af2-a496d9a502d1.png)\r\n",
        "state": "closed",
        "user": "VJoer",
        "closed_by": "weisy11",
        "created_at": "2021-06-16T02:16:11+00:00",
        "updated_at": "2022-03-16T06:17:15+00:00",
        "closed_at": "2022-03-16T06:17:15+00:00",
        "comments_count": [
            "littletomatodonkey",
            "VJoer",
            "VJoer",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 847,
        "title": "MobileNetV3_ large_x1_0_ssld",
        "body": "请问这个模型不是经过模型蒸馏出来的么？为啥准确率要高于非蒸馏模型的准确率呢？",
        "state": "closed",
        "user": "zcswdt",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-16T02:45:58+00:00",
        "updated_at": "2022-03-16T04:07:47+00:00",
        "closed_at": "2022-03-16T04:07:45+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 855,
        "title": "Paddle2.1 动态训练后转静态模型推理，运行出错",
        "body": "训练环境：Paddle 2.1\r\n模型：EfficientB0 with se module\r\n部署环境：Nvidia Jetson Nano，推理工具PaddlePaddle原生预测\r\n详细信息：动态训练后模型转静态推理，在服务局上运行正常，但在Nano设备上运行出错，替换成Paddle 1.6.3的__model__后可以正常运行，error信息如下\r\n\"\r\nterminate called after throwing an instance of 'thrust::system::system_error'\r\n  what():  parallel_for failed: too many resources requested for launch\r\nAborted (core dumped)\r\n\"\r\n\r\n补充：原来一直使用Paddle 1.6.3训练和推理，在Nano上部署正常，更换PaddleCls 2.1训练后出现上述问题",
        "state": "closed",
        "user": "hi-bigcat",
        "closed_by": "weisy11",
        "created_at": "2021-06-16T09:27:54+00:00",
        "updated_at": "2022-03-16T06:17:33+00:00",
        "closed_at": "2022-03-16T06:17:33+00:00",
        "comments_count": [
            "littletomatodonkey",
            "hi-bigcat",
            "JiaXiao243",
            "hi-bigcat",
            "njustczr",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 886,
        "title": "请问什么时候可以集成visualDL image查看?",
        "body": "",
        "state": "closed",
        "user": "RaidenCJ",
        "closed_by": "weisy11",
        "created_at": "2021-06-17T06:57:16+00:00",
        "updated_at": "2022-03-16T06:18:09+00:00",
        "closed_at": "2022-03-16T06:18:09+00:00",
        "comments_count": [
            "weisy11",
            "RaidenCJ",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 902,
        "title": "关于主体检测模型的训练",
        "body": "表格里用了几个大数据集的子集，\r\n那请问主体检测模型训练数据该如何选择呢。训练集会发布吗？\r\n下载的预训练模型比较大，如果换更小的模型精度会下降很多吗？",
        "state": "closed",
        "user": "xyc2690",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-18T03:46:19+00:00",
        "updated_at": "2022-03-16T04:07:48+00:00",
        "closed_at": "2022-03-16T04:07:46+00:00",
        "comments_count": [
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 912,
        "title": "CPU 运行 `图像识别快速开始` 文档教程报错",
        "body": "您好，我在机器上按照 [图像识别快速开始](https://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/zh_CN/tutorials/quick_start_recognition.md) 来尝试运行，但发现会报错，没有输出文档中所显示预测结果\r\n\r\n我的运行脚本是\r\n```shell\r\npython3.7 python/predict_system.py -c configs/inference_product.yaml -o Global.use_gpu=False\r\n```\r\n输出的错误信息如下\r\n> 2021-06-19 01:38:18 INFO: DetPostProcess :\r\n2021-06-19 01:38:18 INFO: DetPreProcess :\r\n2021-06-19 01:38:18 INFO:     transform_ops :\r\n2021-06-19 01:38:18 INFO:         DetResize :\r\n2021-06-19 01:38:18 INFO:             interp : 2\r\n2021-06-19 01:38:18 INFO:             keep_ratio : False\r\n2021-06-19 01:38:18 INFO:             target_size : [640, 640]\r\n2021-06-19 01:38:18 INFO:         DetNormalizeImage :\r\n2021-06-19 01:38:18 INFO:             is_scale : True\r\n2021-06-19 01:38:18 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-06-19 01:38:18 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-06-19 01:38:18 INFO:         DetPermute :\r\n2021-06-19 01:38:18 INFO: Global :\r\n2021-06-19 01:38:18 INFO:     batch_size : 1\r\n2021-06-19 01:38:18 INFO:     cpu_num_threads : 100\r\n2021-06-19 01:38:18 INFO:     det_inference_model_dir : ./models/ppyolov2_r50vd_dcn_mainbody_v1.0_infer\r\n2021-06-19 01:38:18 INFO:     enable_benchmark : True\r\n2021-06-19 01:38:18 INFO:     enable_mkldnn : True\r\n2021-06-19 01:38:18 INFO:     enable_profile : False\r\n2021-06-19 01:38:18 INFO:     gpu_mem : 8000\r\n2021-06-19 01:38:18 INFO:     image_shape : [3, 640, 640]\r\n2021-06-19 01:38:18 INFO:     infer_imgs : ./dataset/product_demo_data_v1.0/query/wangzai.jpg\r\n2021-06-19 01:38:18 INFO:     ir_optim : True\r\n2021-06-19 01:38:18 INFO:     labe_list : ['foreground']\r\n2021-06-19 01:38:18 INFO:     max_det_results : 1\r\n2021-06-19 01:38:18 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer\r\n2021-06-19 01:38:18 INFO:     threshold : 0.2\r\n2021-06-19 01:38:18 INFO:     use_fp16 : False\r\n2021-06-19 01:38:18 INFO:     use_gpu : False\r\n2021-06-19 01:38:18 INFO:     use_tensorrt : False\r\n2021-06-19 01:38:18 INFO: IndexProcess :\r\n2021-06-19 01:38:18 INFO:     dist_type : IP\r\n2021-06-19 01:38:18 INFO:     index_path : ./dataset/product_demo_data_v1.0/index\r\n2021-06-19 01:38:18 INFO:     return_k : 5\r\n2021-06-19 01:38:18 INFO:     search_budget : 100\r\n2021-06-19 01:38:18 INFO: RecPostProcess : None\r\n2021-06-19 01:38:18 INFO: RecPreProcess :\r\n2021-06-19 01:38:18 INFO:     transform_ops :\r\n2021-06-19 01:38:18 INFO:         ResizeImage :\r\n2021-06-19 01:38:18 INFO:             size : 224\r\n2021-06-19 01:38:18 INFO:         NormalizeImage :\r\n2021-06-19 01:38:18 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-06-19 01:38:18 INFO:             order :\r\n2021-06-19 01:38:18 INFO:             scale : 0.00392157\r\n2021-06-19 01:38:18 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-06-19 01:38:18 INFO:         ToCHWImage : None\r\nI0619 01:38:18.619588 18272 analysis_config.cc:424] use_dlnne_:0\r\nI0619 01:38:18.619627 18272 analysis_config.cc:424] use_dlnne_:0\r\nI0619 01:38:18.619647 18272 analysis_config.cc:424] use_dlnne_:0\r\nI0619 01:38:18.619679 18272 analysis_config.cc:424] use_dlnne_:0\r\nI0619 01:38:18.619697 18272 analysis_config.cc:424] use_dlnne_:0\r\nI0619 01:38:18.619716 18272 analysis_config.cc:424] use_dlnne_:0\r\n---    Fused 0 subgraphs into layer_norm op.\r\n---    fused 0 scale with matmul\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with transpose's xshape\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with reshape's xshape\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with reshape's xshape with transpose's xshape\r\n---    Fused 0 MatmulTransposeReshape patterns\r\n---    fused 0 batch norm with relu activation\r\n---    Fused 0 subgraphs into layer_norm op.\r\n---    fused 0 scale with matmul\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with transpose's xshape\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with reshape's xshape\r\n---    Fused 0 ReshapeTransposeMatmulMkldnn patterns with reshape's xshape with transpose's xshape\r\n---    Fused 0 MatmulTransposeReshape patterns\r\n---    fused 3 batch norm with relu activation\r\nInference: 3576.298713684082 ms per batch image\r\n> \r\n> \r\n> --------------------------------------\r\n> C++ Traceback (most recent call last):\r\n> --------------------------------------\r\n> 0   search_mobius_index\r\n> 1   paddle::framework::SignalHandle(char const*, int)\r\n> 2   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n> \r\n> ----------------------\r\n> Error Message Summary:\r\n> ----------------------\r\n> FatalError: `Illegal instruction` is detected by the operating system.\r\n>   [TimeInfo: *** Aborted at 1624037903 (unix time) try \"date -d @1624037903\" if you are using GNU date ***]\r\n>   [SignalInfo: *** SIGILL (@0x7fb3b59a9b81) received by PID 18272 (TID 0x7fb3cb139700) from PID 18446744072461392769 ***]\r\n> \r\n> Illegal instruction (core dumped)\r\n\r\n系统信息\r\n* Linux amax-22 4.15.0-142-generic #146~16.04.1-Ubuntu SMP Tue Apr 13 09:27:15 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n* CPU: Intel(R) Core(TM) i7-5930K CPU @ 3.50GHz\r\n\r\n\r\n相同情况也可以在colab上复现，链接如下：https://colab.research.google.com/drive/1A66d2yRl--VUtpi323rlqXfnfeeOX-a0?usp=sharing",
        "state": "closed",
        "user": "mrbulb",
        "closed_by": "mrbulb",
        "created_at": "2021-06-18T17:54:42+00:00",
        "updated_at": "2021-07-15T09:17:53+00:00",
        "closed_at": "2021-06-19T09:18:55+00:00",
        "comments_count": [
            "weisy11",
            "weisy11",
            "mrbulb",
            "weisy11",
            "weisy11",
            "mrbulb",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 921,
        "title": "动漫人物识别任务的测试数据集标签有误",
        "body": "您好，在文档 [图像识别快速开始](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/zh_CN/tutorials/quick_start_recognition.md) 中提供了动漫人物识别任务的 [测试数据集](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/cartoon_demo_data_v1.0.tar)\r\n\r\n但我看了一下里面的标签文件 `cartoon_demo_data_v1.0/data_file.txt`  是错误的，具体可以参见右边：[data_file.txt](https://gist.github.com/mrbulb/f1f1d84171081652be227fea99274770)\r\n\r\n这些标签文件应该是来源于测试集合的，原始地址在：https://github.com/luxiangju-PersonAI/iCartoonFace#dataset\r\n\r\n> - The iCartoonFace recognition personid infomations: [爱奇艺网盘](https://fft.cloud.iqiyi.com/s/cji77eS) (密码: N163o4)or [Google Drive](https://drive.google.com/file/d/1rOmoseZXAKG5y7mkEsVAoaWan2dIrMzD/view?usp=sharing)\r\n\r\n但 `cartoon_demo_data_v1.0/gallery` 中的图片确实来自训练集的，因此造成了图片和标签的不匹配\r\n\r\n\r\n\r\n我根据文件夹中的图片在搜图网站上找了相关的图片，并更新了一版新的标签文件：[data_file_update.txt](https://gist.github.com/mrbulb/c7bb7359f4156509a828d03bb60fe039)\r\n您可以根据这个更新到数据集中，并重新计算相关索引文件，各个标签和人物的对应关系可以参考下面的引用\r\n\r\n\r\n\r\n> 0： [黑犀侠_百度百科 (baidu.com)](https://baike.baidu.com/item/黑犀侠/1596669?fr=aladdin)\r\n>\r\n> 1：[文斯莫克·尼治_百度百科 (baidu.com)](https://baike.baidu.com/item/文斯莫克·尼治/19845408?fr=aladdin)\r\n>\r\n> 2：[莱德（动画《汪汪队立大功》角色）_百度百科 (baidu.com)](https://baike.baidu.com/item/莱德/22241187)\r\n>\r\n> 3：[小克（动画片《汪汪队立大功》中的角色）_百度百科 (baidu.com)](https://baike.baidu.com/item/小克/22908522)\r\n>\r\n> 4：[布鲁奥特曼_百度百科 (baidu.com)](https://baike.baidu.com/item/布鲁奥特曼/22537165?fr=aladdin)\r\n>\r\n> 5：[罗索奥特曼_百度百科 (baidu.com)](https://baike.baidu.com/item/罗索奥特曼/22549428?fr=aladdin)\r\n>\r\n> 6：[松坂梅_百度百科 (baidu.com)](https://baike.baidu.com/item/松坂梅)\r\n>\r\n> 7：[石井健太郎_百度百科 (baidu.com)](https://baike.baidu.com/item/石井健太郎/118858?fr=aladdin)\r\n>\r\n> 8：[李莓铃_百度百科 (baidu.com)](https://baike.baidu.com/item/李莓铃/1522475?fr=aladdin)\r\n>\r\n> 9：[假面骑士王蛇_百度百科 (baidu.com)](https://baike.baidu.com/item/假面骑士王蛇)\r\n>\r\n> 10：[艾斯德斯_百度百科 (baidu.com)](https://baike.baidu.com/item/艾斯德斯)  [#アカメが斬る! エスデス様 - さなえ的插画 - pixiv](https://www.pixiv.net/artworks/45398302)\r\n",
        "state": "closed",
        "user": "mrbulb",
        "closed_by": "mrbulb",
        "created_at": "2021-06-19T09:18:40+00:00",
        "updated_at": "2021-06-20T06:21:00+00:00",
        "closed_at": "2021-06-20T06:21:00+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 940,
        "title": "swin transformer 的configs文件找不到",
        "body": "",
        "state": "closed",
        "user": "Williamlizl",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-21T06:14:49+00:00",
        "updated_at": "2022-03-16T04:07:48+00:00",
        "closed_at": "2022-03-16T04:07:47+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 953,
        "title": "请问Aliproduct数据集如何数据清洗？",
        "body": "我下载了数据集发现里面每个类别都有不少脏数据 占比还挺多的 请问这么大规模如何清洗？",
        "state": "closed",
        "user": "zhishao",
        "closed_by": "weisy11",
        "created_at": "2021-06-22T13:42:09+00:00",
        "updated_at": "2022-03-16T06:18:38+00:00",
        "closed_at": "2022-03-16T06:18:38+00:00",
        "comments_count": [
            "weisy11",
            "zhishao",
            "weisy11",
            "zhishao",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 947,
        "title": "SSLD蒸馏问题",
        "body": "![image](https://user-images.githubusercontent.com/38682321/122893270-c172e200-d378-11eb-8a8e-cc3b49374cbc.png)\r\n请问第4步的蒸馏和第5步的蒸馏有什么区别吗？\r\n\r\n第4步的蒸馏包含ImageNet1K数据吗？",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-22T08:42:50+00:00",
        "updated_at": "2022-03-16T04:07:50+00:00",
        "closed_at": "2022-03-16T04:07:48+00:00",
        "comments_count": [
            "pawopawo",
            "littletomatodonkey",
            "pawopawo",
            "littletomatodonkey",
            "pawopawo",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 954,
        "title": "如何独立引用主体检测，特征抽取相关的模块",
        "body": "你好我想在自己的项目中使用主体检测或图片特征抽取输出的结果， 如何操作呢，有没有相关demo可以了解一下",
        "state": "closed",
        "user": "yanchaoguo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-23T00:08:24+00:00",
        "updated_at": "2022-03-16T04:07:50+00:00",
        "closed_at": "2022-03-16T04:07:49+00:00",
        "comments_count": [
            "Intsigstephon",
            "Intsigstephon",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 955,
        "title": "PaddleClas-release-2.2\\deploy\\vector_search\\index.dll with msg [WinError 126] 找不到指定的模块。,",
        "body": "你好，我试过已有的index.dll和重新编译（没有报错），运行都找不到模块，但是文件的确存在，请问要怎么做",
        "state": "closed",
        "user": "140ai",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-23T03:53:20+00:00",
        "updated_at": "2022-03-16T04:07:51+00:00",
        "closed_at": "2022-03-16T04:07:49+00:00",
        "comments_count": [
            "140ai",
            "Intsigstephon",
            "140ai",
            "hablee",
            "hablee",
            "littletomatodonkey",
            "littletomatodonkey",
            "steinvenic",
            "cuicheng01",
            "TingquanGao",
            "lazyn1997",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 957,
        "title": "predict_det.py中self.paddle_predictor.run()执行耗时问题",
        "body": "使用predict_det.py中的方式去检测一张普通的图片就需要等2s 有没有什么优化的空间啊",
        "state": "closed",
        "user": "yanchaoguo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-23T06:54:36+00:00",
        "updated_at": "2022-05-24T06:56:08+00:00",
        "closed_at": "2022-05-24T06:56:06+00:00",
        "comments_count": [
            "yanchaoguo",
            "cuicheng01",
            "yanchaoguo",
            "yanchaoguo",
            "cuicheng01",
            "weisy11",
            "yanchaoguo",
            "yanchaoguo",
            "yanchaoguo",
            "weisy11",
            "yanchaoguo",
            "njustczr",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 958,
        "title": "paddleclas多通道（超过三通道）图像分类问题",
        "body": "请问paddleclas支持多通道（超过三通道）的图像作为模型的输入吗？如何可以，请问需要修改config文件的哪些部分？",
        "state": "open",
        "user": "gxqnba",
        "closed_by": null,
        "created_at": "2021-06-23T08:53:08+00:00",
        "updated_at": "2024-02-26T04:29:18+00:00",
        "closed_at": null,
        "comments_count": [
            "Intsigstephon",
            "gxqnba",
            "Intsigstephon",
            "gxqnba"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 960,
        "title": "执行demo下predict system文件报错",
        "body": "执行predict system文件预测个别图片会进程卡主 ，执行Python目录下特征提取和主体检测没问题\r\n![Uploading 8294EAB7-65B8-4D4B-9E5A-B49A47CC7BF5.png…]()\r\n",
        "state": "closed",
        "user": "yanchaoguo",
        "closed_by": "yanchaoguo",
        "created_at": "2021-06-23T13:56:26+00:00",
        "updated_at": "2021-06-23T14:15:32+00:00",
        "closed_at": "2021-06-23T14:15:32+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 959,
        "title": "Apple M1 芯片 docker 版本无法使用",
        "body": "## 异常说明\r\n\r\n参照该[安装说明](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/zh_CN/tutorials/install.md)准备docker环境后，参照1.4节验证`PaddlePaddle`的安装时，出现问题。\r\n\r\n## 复现路径\r\n\r\n执行`docker run --name ppcls -v $PWD:/paddle --shm-size=8G --network=host -it paddlepaddle/paddle:2.1.0 /bin/bash`遇到以下警告信息：\r\n```\r\nDigest: sha256:d430d36217f32c74db9991396003f252e4bc91d891d8193bc24bea5943a848f3\r\nStatus: Downloaded newer image for paddlepaddle/paddle:2.1.0\r\nWARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested\r\n```\r\n在容器内验证`PaddlePaddle`安装情况时，出现如下错误信息：\r\n```py\r\nλ docker-desktop /home python\r\nPython 3.7.0 (default, May  9 2021, 21:14:18)\r\n[GCC 8.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import paddle\r\n/bin/grep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\nWARNING: AVX is not support on your machine. Hence, no_avx core will be imported, It has much worse preformance than avx core.\r\n/bin/grep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\nError: AVX is not support on your machine, but you have installed paddlepaddle without no_avx core, you should reinstall paddlepaddle by 'python -m pip install --force-reinstall paddlepaddle-gpu[==version] -f https://paddlepaddle.org.cn/whl/mkl/stable/noavx.html or https://paddlepaddle.org.cn/whl/openblas/stable/noavx.html\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/__init__.py\", line 26, in <module>\r\n    from .fluid import monkey_patch_variable\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/__init__.py\", line 36, in <module>\r\n    from . import framework\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 37, in <module>\r\n    from . import core\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/core.py\", line 369, in <module>\r\n    raise e\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/core.py\", line 316, in <module>\r\n    from .core_noavx import *\r\nModuleNotFoundError: No module named 'paddle.fluid.core_noavx'\r\n```\r\n\r\n## 系统信息\r\nmacOS Big Sur 11.4\r\nMacBook Pro (13-inch, M1, 2020)\r\n芯片 Apple M1\r\n\r\n## docker 版本信息\r\n```\r\nClient:\r\n Cloud integration: 1.0.17\r\n Version:           20.10.7\r\n API version:       1.41\r\n Go version:        go1.16.4\r\n Git commit:        f0df350\r\n Built:             Wed Jun  2 11:56:23 2021\r\n OS/Arch:           darwin/arm64\r\n Context:           default\r\n Experimental:      true\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          20.10.7\r\n  API version:      1.41 (minimum version 1.12)\r\n  Go version:       go1.13.15\r\n  Git commit:       b0f5bc3\r\n  Built:            Wed Jun  2 11:55:36 2021\r\n  OS/Arch:          linux/arm64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.4.6\r\n  GitCommit:        d71fcd7d8303cbf684402823e425e9dd2e99285d\r\n runc:\r\n  Version:          1.0.0-rc95\r\n  GitCommit:        b9ee9c6314599f1b4a7f497e1f1f856fe433d3b7\r\n docker-init:\r\n  Version:          0.19.0\r\n  GitCommit:        de40ad0\r\n```",
        "state": "closed",
        "user": "zhangfelix",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-23T10:12:34+00:00",
        "updated_at": "2022-03-16T04:07:52+00:00",
        "closed_at": "2022-03-16T04:07:50+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 965,
        "title": "paddlepaddle-gpu 安装问题？",
        "body": "   cuda  : 10.1\r\n   cudnn：7.6.5\r\n   driver：430.64\r\n   安装paddlepaddle 2.1.0\r\n  \r\n   测试安装是否成功时报错：\r\n      Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import paddle\r\nW0624 14:32:46.220422 23029 init.cc:136] Compiled with WITH_GPU, but no GPU found in runtime.\r\n/home/hejing/.local/lib/python3.6/site-packages/paddle/fluid/framework.py:298: UserWarning: You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\r\n  \"You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\"\r\n  请问是什么原因呢？",
        "state": "closed",
        "user": "hejing-maker",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-24T07:04:19+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:25+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 962,
        "title": "这个是什么问题?",
        "body": "\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   search_mobius_index\r\n1   paddle::framework::SignalHandle(char const*, int)\r\n2   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Illegal instruction` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1624503311 (unix time) try \"date -d @1624503311\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGILL (@0x7f6c43eb3b81) received by PID 1766 (TID 0x7f6cb0dea700) from PID 1139489665 ***]\r\n\r\n非法指令\r\n(paddleclas",
        "state": "closed",
        "user": "intjun",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-24T03:00:41+00:00",
        "updated_at": "2022-03-16T04:07:53+00:00",
        "closed_at": "2022-03-16T04:07:51+00:00",
        "comments_count": [
            "steinvenic",
            "TingquanGao",
            "zq-2021",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 969,
        "title": "https://github.com/PaddlePaddle/PaddleClas",
        "body": "",
        "state": "closed",
        "user": "zhengpiao2018",
        "closed_by": "weisy11",
        "created_at": "2021-06-24T12:37:55+00:00",
        "updated_at": "2021-06-27T14:39:18+00:00",
        "closed_at": "2021-06-27T14:39:18+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 968,
        "title": "能否获取指定层的特征输出",
        "body": "快速开始中给的分类模型（class_ResNet50_vd_ImageNet_infer）能否像keras那样可以指定获取某一层的特征输出\r\n\r\nkeras:\r\nmodel = Model(inputs=base_model.input, outputs=base_model.get_layer('fc2').output)",
        "state": "closed",
        "user": "yanchaoguo",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2021-06-24T09:25:53+00:00",
        "updated_at": "2025-03-04T09:19:07+00:00",
        "closed_at": "2025-03-04T06:35:51+00:00",
        "comments_count": [
            "cuicheng01",
            "yanchaoguo",
            "cuicheng01",
            "yanchaoguo",
            "cuicheng01",
            "yanchaoguo",
            "guoyunqingyue",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 972
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 970,
        "title": "PaddleClas能检测的种类有哪些",
        "body": "PaddleClas能检测的种类有哪些？",
        "state": "closed",
        "user": "guoxixiao",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-25T00:26:41+00:00",
        "updated_at": "2022-03-16T04:07:54+00:00",
        "closed_at": "2022-03-16T04:07:52+00:00",
        "comments_count": [
            "yanchaoguo",
            "cuicheng01",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 971,
        "title": "ImportError: cannot import name 'logger' from 'utils' (F:\\tf_train\\models\\research\\object_detection\\utils\\__init__.py)",
        "body": "(pp) F:\\PaddleClas\\deploy>python python/predict_system.py -c configs/inference_product.yaml\r\nTraceback (most recent call last):\r\n  File \"python/predict_system.py\", line 24, in <module>\r\n    from python.predict_rec import RecPredictor\r\n  File \"F:\\PaddleClas\\deploy\\python\\predict_rec.py\", line 23, in <module>\r\n    from utils import logger\r\nImportError: cannot import name 'logger' from 'utils' (F:\\tf_train\\models\\research\\object_detection\\utils\\__init__.py)",
        "state": "closed",
        "user": "gitqinxinyu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-25T01:14:45+00:00",
        "updated_at": "2022-10-17T03:19:10+00:00",
        "closed_at": "2022-03-16T04:07:53+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]",
            "yangguangyu369"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 976,
        "title": "有车辆细分类的pretrained model吗？",
        "body": "想根据pretrained model在自己的数据fine-tuning，请问有车辆431分类的pretrained model吗？",
        "state": "closed",
        "user": "frotms",
        "closed_by": "frotms",
        "created_at": "2021-06-25T09:45:01+00:00",
        "updated_at": "2021-08-04T14:52:16+00:00",
        "closed_at": "2021-08-04T14:52:16+00:00",
        "comments_count": [
            "aichase",
            "weisy11",
            "RainFrost1"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 977,
        "title": "ImportError: cannot import name 'hard_sigmoid' from 'paddle.nn.functional.activation' (/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/functional/activation.py)",
        "body": "ImportError: cannot import name 'hard_sigmoid' from 'paddle.nn.functional.activation' (/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/functional/activation.py)",
        "state": "closed",
        "user": "dddlli",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-27T09:11:05+00:00",
        "updated_at": "2022-03-16T04:07:56+00:00",
        "closed_at": "2022-03-16T04:07:54+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 998,
        "title": "加载预训练模型finetune自定义数据集，infer会出现额外的类别",
        "body": "配置文件中只有3类，输出却会有其他类别的信息\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: /home/aistudio/ResNeXt50_vd_64x4d_pretrained\r\n  output_dir: /home/aistudio/output/\r\n  device: gpu\r\n  class_num: 3\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  # used for static mode and model export\r\n  image_shape: [3, 448, 448]\r\n  save_inference_dir: /home/aistudio/inference\r\n\r\n# model architecture\r\nArch:\r\n  name: ResNeXt50_vd_64x4d\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/data/train\r\n      cls_label_path: /home/aistudio/data/train_splited_txt/f5_1/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 448\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n      batch_transform_ops:\r\n        - MixupOperator:\r\n            alpha: 0.2\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: True\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: False\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/data/train\r\n      cls_label_path: /home/aistudio/data/train_splited_txt/f5_1/eval.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 448\r\n        - CropImage:\r\n            size: 448\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: False\r\n\r\nInfer:\r\n  infer_imgs: /home/aistudio/data/train/1/76dff756-b3d8-4d84-b5a9-5d748bc1545f.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 448\r\n    - CropImage:\r\n        size: 448\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: /home/aistudio/data/train_splited_txt/f5_1/train.txt\r\n\r\nMetric:\r\n  Train:\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n输出class_ids有别的东西\r\n[{'class_ids': [3, 2, 1, 980, 974], 'scores': [0.36787, 0.3455, 0.18132, 0.00012, 0.00012], 'file_name': 'aaaa/011711d3-0f63-4346-8fb4-64351db59950.jpg', 'label_names': []}, {'class_ids': [3, 2, 1, 980, 974], 'scores': [0.35961, 0.31867, 0.21217, 0.00013, 0.00013], 'file_name': 'aaaa/6a35ae63-0a23-46a3-80c4-98be8e5066ff.jpg', 'label_names': []}, {'class_ids': [2, 3, 1, 972, 980], 'scores': [0.38646, 0.3687, 0.14165, 0.00012, 0.00012], 'file_name': 'aaaa/75f22f34-45ff-4aba-9e06-831195d9d374.jpg', 'label_names': []}, {'class_ids': [3, 1, 2, 304, 324], 'scores': [0.51291, 0.31641, 0.14388, 0.0002, 0.00019], 'file_name': 'aaaa/844be6c6-a90c-42d8-8463-e9eca90cc9b6.jpg', 'label_names': []}, {'class_ids': [3, 1, 2, 29, 103], 'scores': [0.3423, 0.28713, 0.26282, 0.00014, 0.00014], 'file_name': 'aaaa/abada0bd-8eec-429f-8038-bab866c47888.jpg', 'label_names': []}, {'class_ids': [3, 1, 2, 304, 324], 'scores': [0.51291, 0.31641, 0.14388, 0.0002, 0.00019], 'file_name': 'aaaa/efd94775-e86f-4c6e-b589-3af6733b8ade.jpg', 'label_names': []}]\r\n\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-06-30T12:50:15+00:00",
        "updated_at": "2021-07-01T03:28:09+00:00",
        "closed_at": "2021-07-01T03:28:09+00:00",
        "comments_count": [
            "cuicheng01",
            "bbbxixixixi",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 986,
        "title": "未知图像识别建立索引的疑问",
        "body": "未知图像识别可以增量添加索引吗，而不是全部重新建立索引",
        "state": "closed",
        "user": "coderchuan",
        "closed_by": "weisy11",
        "created_at": "2021-06-29T08:23:48+00:00",
        "updated_at": "2021-07-13T05:43:37+00:00",
        "closed_at": "2021-07-12T06:39:38+00:00",
        "comments_count": [
            "Intsigstephon",
            "weisy11",
            "coderchuan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 991,
        "title": "运行swin-transformer报错，",
        "body": "`Traceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    trainer.train()\r\n  File \"/home/lbc/PaddleClas/ppcls/engine/trainer.py\", line 171, in train\r\n    out = self.model(batch[0])\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/swin_transformer.py\", line 718, in forward\r\n    x = self.forward_features(x)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/swin_transformer.py\", line 710, in forward_features\r\n    x = layer(x)\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/swin_transformer.py\", line 508, in forward\r\n    x = blk(x)\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/swin_transformer.py\", line 363, in forward\r\n    x = shortcut + self.drop_path(x)\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/vision_transformer.py\", line 81, in forward\r\n    return drop_path(x, self.drop_prob, self.training)\r\n  File \"/home/lbc/PaddleClas/ppcls/arch/backbone/model_zoo/vision_transformer.py\", line 66, in drop_path\r\n    random_tensor = keep_prob + paddle.rand(shape, dtype=x.dtype)\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/tensor/random.py\", line 722, in rand\r\n    return uniform(shape, dtype, min=0.0, max=1.0, name=name)\r\n  File \"/home/lbc/.local/lib/python3.6/site-packages/paddle/tensor/random.py\", line 502, in uniform\r\n    float(max), 'seed', seed, 'dtype', dtype)\r\nSystemError: (Fatal) Operator uniform_random raises an thrust::system::system_error exception.\r\nThe exception content is\r\n:parallel_for failed: cudaErrorInvalidConfiguration: invalid configuration argument. (at /paddle/paddle/fluid/imperative/tracer.cc:192)`",
        "state": "closed",
        "user": "Williamlizl",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-06-30T02:38:45+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:07:55+00:00",
        "comments_count": [
            "cuicheng01",
            "Chen-Song",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 999,
        "title": "训练自定义数据集总是报错：BUS error",
        "body": "ERROR: Unexpected BUS error encountered in DataLoader worker. This might be caused by insufficient shared memory (shm), please check whether use_shared_memory is set and storage space in /dev/shm is enough\r\nERROR:root:DataLoader reader thread raised an exception!\r\nException in thread Thread-11:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 482, in _get_data\r\n    data = self._data_queue.get(timeout=self._timeout)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/multiprocessing/queues.py\", line 105, in get\r\n    raise Empty\r\n_queue.Empty\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 411, in _thread_loop\r\n    batch = self._get_data()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 498, in _get_data\r\n    \"pids: {}\".format(len(failed_workers), pids))\r\nRuntimeError: DataLoader 1 workers exit unexpectedly, pids: 2642\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    trainer.train()\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/trainer.py\", line 160, in train\r\n    for iter_id, batch in enumerate(self.train_dataloader()):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 585, in __next__\r\n    data = self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:166)\r\n\r\n\r\n我在训练自定义图像分类数据集的时候总是出现上述问题，我使用模型的是ResNet101_vd，batchsize设置过2、8、16，numwork设置过1、4，图像大小224，总是会出现上述问题\r\n\r\n请问应该如何解决",
        "state": "closed",
        "user": "huilin16",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-01T03:05:33+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:07:56+00:00",
        "comments_count": [
            "RainFrost1",
            "huilin16",
            "RainFrost1",
            "wangping6688",
            "wangping6688",
            "chenzhaoqiJM",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1001,
        "title": "自定义数据eval阶段报错",
        "body": "aistudio paddle2.1 ppcls release2.2 半小时前下载的版本\r\n以前使用Global.class_num:3, 实际分类1000的时候不报错，infer的时候输出5个种类。今天下了新版本改换了Arch.class_num=3，eval的时候就错了。看错误信息topk 5 和< k:5有联系吗？\r\n\r\n配置文件\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: /home/aistudio/ResNeXt50_vd_64x4d_pretrained\r\n  output_dir: /home/aistudio/output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 150\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  # used for static mode and model export\r\n  image_shape: [3, 448, 448]\r\n  save_inference_dir: /home/aistudio/inference\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: ResNeXt50_vd_64x4d\r\n  class_num: 3\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/data/train\r\n      cls_label_path: /home/aistudio/data/train_splited_txt/f5_1/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 448\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n      batch_transform_ops:\r\n        - MixupOperator:\r\n            alpha: 0.2\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: True\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: False\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/data/train\r\n      cls_label_path: /home/aistudio/data/train_splited_txt/f5_1/eval.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 448\r\n        - CropImage:\r\n            size: 448\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: False\r\n\r\nInfer:\r\n  infer_imgs: /home/aistudio/data/train/1/76dff756-b3d8-4d84-b5a9-5d748bc1545f.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 448\r\n    - CropImage:\r\n        size: 448\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: /home/aistudio/data/train_splited_txt/f5_1/train.txt\r\n\r\n\r\nMetric:\r\n  Train:\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n\r\n异常信息\r\n\r\n[2021/07/01 12:20:44] root INFO: [Train][Epoch 1/150][Avg]CELoss: 0.67171, loss: 0.67171\r\n{'CELoss': {'weight': 1.0}}\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/PaddleClas-release-2.2/tools/train.py\", line 39, in <module>\r\n    trainer.train()\r\n  File \"/home/aistudio/PaddleClas-release-2.2/ppcls/engine/trainer.py\", line 248, in train\r\n    acc = self.eval(epoch_id)\r\n  File \"<decorator-gen-275>\", line 2, in eval\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 316, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/ppcls/engine/trainer.py\", line 314, in eval\r\n    eval_result = self.eval_cls(epoch_id)\r\n  File \"<decorator-gen-278>\", line 2, in eval_cls\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 316, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/ppcls/engine/trainer.py\", line 376, in eval_cls\r\n    metric_dict = self.eval_metric_func(out, batch[-1])\r\n  File \"/home/aistudio/PaddleClas-release-2.2/ppcls/metric/__init__.py\", line 42, in __call__\r\n    metric_dict.update(metric_func(*args, **kwargs))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/ppcls/metric/metrics.py\", line 35, in forward\r\n    x, label, k=k)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/metric/metrics.py\", line 800, in accuracy\r\n    topk_out, topk_indices = topk(input, k=k)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layers/nn.py\", line 5249, in topk\r\n    out, indices = core.ops.top_k(input, 'k', _k)\r\nValueError: (InvalidArgument) input must have >= k columns\r\n  [Hint: Expected input_dims[input_dims.size() - 1] >= k, but received input_dims[input_dims.size() - 1]:3 < k:5.] (at /paddle/paddle/fluid/operators/top_k_op.cc:48)\r\n  [operator < top_k > error]",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-07-01T04:37:46+00:00",
        "updated_at": "2021-07-01T06:37:26+00:00",
        "closed_at": "2021-07-01T06:37:26+00:00",
        "comments_count": [
            "cuicheng01",
            "bbbxixixixi",
            "bbbxixixixi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1002,
        "title": "小模型训练",
        "body": "SSLD训练策略对小模型有收益吗？ 比如224*224输入下，FLOPs 50M的模型。",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "weisy11",
        "created_at": "2021-07-01T07:46:40+00:00",
        "updated_at": "2021-07-12T06:40:13+00:00",
        "closed_at": "2021-07-12T06:40:13+00:00",
        "comments_count": [
            "RainFrost1",
            "pawopawo",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1004,
        "title": "SSLD数据",
        "body": "您好，请问SSLD中的500M数据能开源吗？",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "weisy11",
        "created_at": "2021-07-01T09:26:30+00:00",
        "updated_at": "2021-07-12T06:40:20+00:00",
        "closed_at": "2021-07-12T06:40:20+00:00",
        "comments_count": [
            "pawopawo",
            "cuicheng01",
            "pawopawo",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1005,
        "title": "有办法设置随机数复现结果吗？",
        "body": "我在train的main中设置了paddle.seed np.random.seed random.seed，ppcls.data.preprocess.ops.operators里面设置了np.random.seed random.seed，cudnn_deterministic=true，同样的配置跑出来的结果acc一个0.689，一个0.716。浮动这么大，调优没法做啊\r\n",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-01T13:33:56+00:00",
        "updated_at": "2022-03-16T04:08:12+00:00",
        "closed_at": "2022-03-16T04:07:58+00:00",
        "comments_count": [
            "weisy11",
            "bbbxixixixi",
            "weisy11",
            "DrewdropLife",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1011,
        "title": "主体检测训练",
        "body": "hi，主体检测的训练方法就是采用正规的物体检测模型和训练方法，然后只学box和有无物体不学物体类别就可以了，是吗？",
        "state": "closed",
        "user": "ghoshaw",
        "closed_by": "ghoshaw",
        "created_at": "2021-07-05T08:29:24+00:00",
        "updated_at": "2021-07-05T08:34:00+00:00",
        "closed_at": "2021-07-05T08:34:00+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1007,
        "title": "目标检测模块",
        "body": "目前图像识别中的目标检测模块只能使用动态图模型，请问如果期望使用静态图目标检测模型应该如何进行修改呢。",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-02T12:52:19+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:07:59+00:00",
        "comments_count": [
            "cuicheng01",
            "lazyn1997",
            "littletomatodonkey",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1008,
        "title": "22k数据去重的细节问题",
        "body": "`计算并比较22k数据集与imagenet1k 验证集中所有图片的特征向量相似度，设置合适的阈值，当相似度大于阈值时，说明图像相似，需要进行去重。` \r\n\r\n请问具体是比特征点不同的数量吗？比如不相同的特征点不超过5个，就代表两个图片相同？或者是按照百分比吗？",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "weisy11",
        "created_at": "2021-07-04T09:50:28+00:00",
        "updated_at": "2021-07-12T06:41:12+00:00",
        "closed_at": "2021-07-12T06:41:12+00:00",
        "comments_count": [
            "Intsigstephon",
            "pawopawo",
            "pawopawo",
            "cuicheng01",
            "pawopawo",
            "weisy11",
            "pawopawo",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1009,
        "title": "打包成exe之后报错Error: Can not import avx core while this file exists: xxx\\paddle\\fluid\\core_avx.pyd",
        "body": "代码运行正常，打包成exe之后就报错，请问怎么解决\r\n![微信截图_20210705082011](https://user-images.githubusercontent.com/86935392/124403677-290e3180-dd6a-11eb-96d1-b4ab6eb6b24a.png)\r\n",
        "state": "closed",
        "user": "itues",
        "closed_by": "itues",
        "created_at": "2021-07-05T00:22:46+00:00",
        "updated_at": "2021-07-06T03:04:07+00:00",
        "closed_at": "2021-07-06T03:04:07+00:00",
        "comments_count": [
            "cuicheng01",
            "itues"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1015,
        "title": "在训练过程中突然出现shutdown错误",
        "body": " - PaddlePaddle 2.1.1\r\n - Python 3.7\r\n - Ubuntu 18.04\r\n - PaddleClas 2.2\r\n - num_workers: 4\r\n\r\n错误日志如下，前面已经训练了好多轮了。\r\n```\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 27, in <module>\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/ppcls/engine/trainer.py\", line 158, in train\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 429, in __call__\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/reader.py\", line 426, in __iter__\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 283, in __init__\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 317, in _init_workers\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/multiprocessing/context.py\", line 102, in Queue\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/multiprocessing/queues.py\", line 42, in __init__\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/multiprocessing/context.py\", line 67, in Lock\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/multiprocessing/synchronize.py\", line 162, in __init__\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/multiprocessing/synchronize.py\", line 59, in __init__\r\nOSError: [Errno 24] Too many open files\r\nW0707 01:56:58.796609 29835 default_variables.cpp:78] Fail to open /proc/self/stat: Too many open files [24]\r\nW0707 01:56:58.796720 29835 default_variables.cpp:331] Fail to open /proc/self/fd: Too many open files [24]\r\nW0707 01:56:58.796741 29835 default_variables.cpp:209] Fail to open /proc/self/statm: Too many open files [24]\r\nW0707 01:56:58.796766 29835 default_variables.cpp:276] Fail to open /proc/loadavg: Too many open files [24]\r\nW0707 01:56:58.796782 29835 default_variables.cpp:429] Fail to open /proc/self/io: Too many open files [24]\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1625594218 (unix time) try \"date -d @1625594218\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x3e800007482) received by PID 3400 (TID 0x7f3b0d2fb740) from PID 29826 ***]\r\n\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Termination signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1625594218 (unix time) try \"date -d @1625594218\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGTERM (@0x3e800007482) received by PID 3401 (TID 0x7f3b0d2fb740) from PID 29826 ***]\r\n\r\nException ignored in: <function _DataLoaderIterMultiProcess.__del__ at 0x7f3ab040bb00>\r\nTraceback (most recent call last):\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 566, in __del__\r\n    self._try_shutdown_all()\r\n  File \"/home/fg010/anaconda3/envs/PaddlePaddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 371, in _try_shutdown_all\r\n    if not self._shutdown:\r\nAttributeError: '_DataLoaderIterMultiProcess' object has no attribute '_shutdown'\r\n```",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2021-07-07T01:36:42+00:00",
        "updated_at": "2021-08-03T01:18:33+00:00",
        "closed_at": "2021-08-03T01:18:33+00:00",
        "comments_count": [
            "cuicheng01",
            "yeyupiaoling",
            "cuicheng01",
            "heavengate",
            "yeyupiaoling"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1018,
        "title": "关于导出的模型和模型预测问题",
        "body": "第一次接触图像识别，有几个问题请教一下\r\n模型评估结果中\r\n`[2021/07/07 15:50:34] root INFO: [Eval][Epoch 0][Avg]CELoss: 2.97283, loss: 2.97283, top1: 0.25490, top5: 0.56961`\r\nCELoss、loss分别代表什么\r\n导出模型后调用模型预测名令，返回值为：\r\n`[{'class_ids': [76, 12, 34, 28, 78], 'scores': [0.1285, 0.08516, 0.08284, 0.0635, 0.05591], 'label_names': []}]`\r\n其中class_ids和scores字段分别是什么意思\r\n文档里好像都没有说明\r\n",
        "state": "closed",
        "user": "lyw1991",
        "closed_by": "lyw1991",
        "created_at": "2021-07-07T08:02:57+00:00",
        "updated_at": "2021-07-07T09:39:51+00:00",
        "closed_at": "2021-07-07T08:58:56+00:00",
        "comments_count": [
            "weisy11",
            "lyw1991"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1019,
        "title": "clang: error: unsupported option '-fopenmp'",
        "body": "Mac 重新编译时index.so时报错如下：\r\nclang: error: unsupported option '-fopenmp'\r\n请问怎么解决",
        "state": "closed",
        "user": "zhao0229",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-07T09:55:26+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:08:00+00:00",
        "comments_count": [
            "cuicheng01",
            "zhao0229",
            "weisy11",
            "zhao0229",
            "baishui2004",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1020,
        "title": "官网30分钟玩转PaddleClas里的tools/download.py在git仓库里没有了",
        "body": "https://paddleclas.readthedocs.io/zh_CN/latest/tutorials/quick_start.html\r\n这里2.1里的tools/download.py这个文件在仓库里没有了",
        "state": "closed",
        "user": "Skypow2012",
        "closed_by": "Skypow2012",
        "created_at": "2021-07-07T10:10:07+00:00",
        "updated_at": "2021-07-09T05:59:27+00:00",
        "closed_at": "2021-07-09T05:59:27+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1024,
        "title": "CVPR2020比赛冠军所用的方法",
        "body": "![image](https://user-images.githubusercontent.com/38682321/124858498-bce93300-dfe0-11eb-9ca9-0c6644753344.png)\r\n在参加CVPR workshop的时候看到这个结果，为你们感到自豪！请问这个比赛模型的训练方法，也是按照这个仓库的方法吗？比如用了论文`Beyond Self-Supervision: A Simple Yet Effective Network Distillation Alternative to Improve Backbones`中的方法，用更大的网络模型标注数据，然后使用500M-Data结合蒸馏来进行训练子网络？",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "weisy11",
        "created_at": "2021-07-08T03:40:14+00:00",
        "updated_at": "2021-07-12T06:38:13+00:00",
        "closed_at": "2021-07-12T06:38:13+00:00",
        "comments_count": [
            "cuicheng01",
            "pawopawo",
            "cuicheng01",
            "pawopawo",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1026,
        "title": "resnet18导出模型以及评估时报错",
        "body": "![image](https://user-images.githubusercontent.com/5505684/124876439-933e0500-dffc-11eb-9b37-e3dd96f5fa3b.png)\r\n使用的pdparams是https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/ResNet18_pretrained.pdparams\r\npaddleclas版本为release/2.2,paddlepaddle2.1 \r\n用pickel输出这个pdparams发现确实没有报错的这几个\r\n![image](https://user-images.githubusercontent.com/5505684/124876775-f92a8c80-dffc-11eb-8553-589e1c196d78.png)\r\n\r\n请问会是什么问题呢,是我的环境有问题吗？配置文件用的就是./ppcls/configs/ImageNet/ResNet/ResNet18.yaml，并没有做修改",
        "state": "closed",
        "user": "nianyush",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-08T06:59:42+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:08:01+00:00",
        "comments_count": [
            "cuicheng01",
            "nianyush",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1027,
        "title": "除了官方提供的图片，自己添加的就无法识别了吗",
        "body": "用官方提供的图片都可以识别出来的，但是自己添加的图就无法识别，是只支持官方提供的图吗",
        "state": "closed",
        "user": "zhao0229",
        "closed_by": "zhao0229",
        "created_at": "2021-07-08T07:47:02+00:00",
        "updated_at": "2021-07-08T09:31:52+00:00",
        "closed_at": "2021-07-08T09:31:52+00:00",
        "comments_count": [
            "cuicheng01",
            "zhao0229",
            "cuicheng01",
            "zhao0229",
            "zhao0229",
            "cuicheng01",
            "zhao0229"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1029,
        "title": "目标识别的2个问题：",
        "body": "1、在图像检索时，如果待识别的目标尺度跨度大，且包含很多很小目标（占整个图像的1/10不到），是把目标用矩形框标记出来训练还是直接用整个图打标签训练？另外小目标用训练的特征提取网络与gallery dataset比较，特征相似度都很高，识别分类错误率高，这如何处理？\r\n2、对于未知的标签，加入gallery dataset可以用于后续的分类识别（无需训练），但是如果前面的检测模型对于未知的标签无法定位检测出来，是否还是要训练前面的检测模型？\r\n\r\n谢谢！",
        "state": "closed",
        "user": "jackie8310",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-09T04:03:20+00:00",
        "updated_at": "2022-03-16T04:08:07+00:00",
        "closed_at": "2022-03-16T04:08:02+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1028,
        "title": "使用SwinTransformer_large_patch4_window12_384  loss出现nan",
        "body": "yaml配置如下：\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 120\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  # used for static mode and model export\r\n  image_shape: [3, 384, 384]\r\n  save_inference_dir: ./inference\r\n  # training model under @to_static\r\n  to_static: False\r\n\r\n# model architecture\r\nArch:\r\n  name: SwinTransformer_large_patch4_window12_384\r\n  class_num: 62\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Piecewise\r\n    learning_rate: 0.000625\r\n    decay_epochs: [30, 60, 90]\r\n    values: [0.1, 0.01, 0.001, 0.0001]\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/dataset/dataset/\r\n      cls_label_path: /home/aistudio/dataset/dataset/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 384\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 4\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/dataset/dataset/\r\n      cls_label_path: /home/aistudio/dataset/dataset/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [384, 384]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 2\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: docs/images/whl/demo.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        size: [384, 384]\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: /home/aistudio/dataset/dataset/labels.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n\r\n日志:\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\n/home/aistudio/PaddleClas/ppcls/arch/backbone/model_zoo/vision_transformer.py:15: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n  from collections import Callable\r\nA new filed (pretrained) detected!\r\n[2021/07/08 19:05:56] root INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2021/07/08 19:05:56] root INFO: Arch : \r\n[2021/07/08 19:05:56] root INFO:     class_num : 62\r\n[2021/07/08 19:05:56] root INFO:     name : SwinTransformer_large_patch4_window12_384\r\n[2021/07/08 19:05:56] root INFO:     pretrained : False\r\n[2021/07/08 19:05:56] root INFO: DataLoader : \r\n[2021/07/08 19:05:56] root INFO:     Eval : \r\n[2021/07/08 19:05:56] root INFO:         dataset : \r\n[2021/07/08 19:05:56] root INFO:             cls_label_path : /home/aistudio/dataset/dataset/val_list.txt\r\n[2021/07/08 19:05:56] root INFO:             image_root : /home/aistudio/dataset/dataset/\r\n[2021/07/08 19:05:56] root INFO:             name : ImageNetDataset\r\n[2021/07/08 19:05:56] root INFO:             transform_ops : \r\n[2021/07/08 19:05:56] root INFO:                 DecodeImage : \r\n[2021/07/08 19:05:56] root INFO:                     channel_first : False\r\n[2021/07/08 19:05:56] root INFO:                     to_rgb : True\r\n[2021/07/08 19:05:56] root INFO:                 ResizeImage : \r\n[2021/07/08 19:05:56] root INFO:                     size : [384, 384]\r\n[2021/07/08 19:05:56] root INFO:                 NormalizeImage : \r\n[2021/07/08 19:05:56] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2021/07/08 19:05:56] root INFO:                     order : \r\n[2021/07/08 19:05:56] root INFO:                     scale : 1.0/255.0\r\n[2021/07/08 19:05:56] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2021/07/08 19:05:56] root INFO:         loader : \r\n[2021/07/08 19:05:56] root INFO:             num_workers : 4\r\n[2021/07/08 19:05:56] root INFO:             use_shared_memory : True\r\n[2021/07/08 19:05:56] root INFO:         sampler : \r\n[2021/07/08 19:05:56] root INFO:             batch_size : 2\r\n[2021/07/08 19:05:56] root INFO:             drop_last : False\r\n[2021/07/08 19:05:56] root INFO:             name : DistributedBatchSampler\r\n[2021/07/08 19:05:56] root INFO:             shuffle : False\r\n[2021/07/08 19:05:56] root INFO:     Train : \r\n[2021/07/08 19:05:56] root INFO:         dataset : \r\n[2021/07/08 19:05:56] root INFO:             cls_label_path : /home/aistudio/dataset/dataset/train_list.txt\r\n[2021/07/08 19:05:56] root INFO:             image_root : /home/aistudio/dataset/dataset/\r\n[2021/07/08 19:05:56] root INFO:             name : ImageNetDataset\r\n[2021/07/08 19:05:56] root INFO:             transform_ops : \r\n[2021/07/08 19:05:56] root INFO:                 DecodeImage : \r\n[2021/07/08 19:05:56] root INFO:                     channel_first : False\r\n[2021/07/08 19:05:56] root INFO:                     to_rgb : True\r\n[2021/07/08 19:05:56] root INFO:                 RandCropImage : \r\n[2021/07/08 19:05:56] root INFO:                     size : 384\r\n[2021/07/08 19:05:56] root INFO:                 RandFlipImage : \r\n[2021/07/08 19:05:56] root INFO:                     flip_code : 1\r\n[2021/07/08 19:05:56] root INFO:                 NormalizeImage : \r\n[2021/07/08 19:05:56] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2021/07/08 19:05:56] root INFO:                     order : \r\n[2021/07/08 19:05:56] root INFO:                     scale : 1.0/255.0\r\n[2021/07/08 19:05:56] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2021/07/08 19:05:56] root INFO:         loader : \r\n[2021/07/08 19:05:56] root INFO:             num_workers : 4\r\n[2021/07/08 19:05:56] root INFO:             use_shared_memory : True\r\n[2021/07/08 19:05:56] root INFO:         sampler : \r\n[2021/07/08 19:05:56] root INFO:             batch_size : 4\r\n[2021/07/08 19:05:56] root INFO:             drop_last : False\r\n[2021/07/08 19:05:56] root INFO:             name : DistributedBatchSampler\r\n[2021/07/08 19:05:56] root INFO:             shuffle : True\r\n[2021/07/08 19:05:56] root INFO: Global : \r\n[2021/07/08 19:05:56] root INFO:     checkpoints : None\r\n[2021/07/08 19:05:56] root INFO:     device : gpu\r\n[2021/07/08 19:05:56] root INFO:     epochs : 120\r\n[2021/07/08 19:05:56] root INFO:     eval_during_train : True\r\n[2021/07/08 19:05:56] root INFO:     eval_interval : 1\r\n[2021/07/08 19:05:56] root INFO:     image_shape : [3, 384, 384]\r\n[2021/07/08 19:05:56] root INFO:     output_dir : ./output/\r\n[2021/07/08 19:05:56] root INFO:     pretrained_model : None\r\n[2021/07/08 19:05:56] root INFO:     print_batch_step : 10\r\n[2021/07/08 19:05:56] root INFO:     save_inference_dir : ./inference\r\n[2021/07/08 19:05:56] root INFO:     save_interval : 1\r\n[2021/07/08 19:05:56] root INFO:     to_static : False\r\n[2021/07/08 19:05:56] root INFO:     use_visualdl : True\r\n[2021/07/08 19:05:56] root INFO: Infer : \r\n[2021/07/08 19:05:56] root INFO:     PostProcess : \r\n[2021/07/08 19:05:56] root INFO:         class_id_map_file : /home/aistudio/dataset/dataset/labels.txt\r\n[2021/07/08 19:05:56] root INFO:         name : Topk\r\n[2021/07/08 19:05:56] root INFO:         topk : 5\r\n[2021/07/08 19:05:56] root INFO:     batch_size : 10\r\n[2021/07/08 19:05:56] root INFO:     infer_imgs : docs/images/whl/demo.jpg\r\n[2021/07/08 19:05:56] root INFO:     transforms : \r\n[2021/07/08 19:05:56] root INFO:         DecodeImage : \r\n[2021/07/08 19:05:56] root INFO:             channel_first : False\r\n[2021/07/08 19:05:56] root INFO:             to_rgb : True\r\n[2021/07/08 19:05:56] root INFO:         ResizeImage : \r\n[2021/07/08 19:05:56] root INFO:             size : [384, 384]\r\n[2021/07/08 19:05:56] root INFO:         NormalizeImage : \r\n[2021/07/08 19:05:56] root INFO:             mean : [0.485, 0.456, 0.406]\r\n[2021/07/08 19:05:56] root INFO:             order : \r\n[2021/07/08 19:05:56] root INFO:             scale : 1.0/255.0\r\n[2021/07/08 19:05:56] root INFO:             std : [0.229, 0.224, 0.225]\r\n[2021/07/08 19:05:56] root INFO:         ToCHWImage : None\r\n[2021/07/08 19:05:56] root INFO: Loss : \r\n[2021/07/08 19:05:56] root INFO:     Eval : \r\n[2021/07/08 19:05:56] root INFO:         CELoss : \r\n[2021/07/08 19:05:56] root INFO:             weight : 1.0\r\n[2021/07/08 19:05:56] root INFO:     Train : \r\n[2021/07/08 19:05:56] root INFO:         CELoss : \r\n[2021/07/08 19:05:56] root INFO:             weight : 1.0\r\n[2021/07/08 19:05:56] root INFO: Metric : \r\n[2021/07/08 19:05:56] root INFO:     Eval : \r\n[2021/07/08 19:05:56] root INFO:         TopkAcc : \r\n[2021/07/08 19:05:56] root INFO:             topk : [1, 5]\r\n[2021/07/08 19:05:56] root INFO:     Train : \r\n[2021/07/08 19:05:56] root INFO:         TopkAcc : \r\n[2021/07/08 19:05:56] root INFO:             topk : [1, 5]\r\n[2021/07/08 19:05:56] root INFO: Optimizer : \r\n[2021/07/08 19:05:56] root INFO:     lr : \r\n[2021/07/08 19:05:56] root INFO:         decay_epochs : [30, 60, 90]\r\n[2021/07/08 19:05:56] root INFO:         learning_rate : 0.000625\r\n[2021/07/08 19:05:56] root INFO:         name : Piecewise\r\n[2021/07/08 19:05:56] root INFO:         values : [0.1, 0.01, 0.001, 0.0001]\r\n[2021/07/08 19:05:56] root INFO:     momentum : 0.9\r\n[2021/07/08 19:05:56] root INFO:     name : Momentum\r\n[2021/07/08 19:05:56] root INFO:     regularizer : \r\n[2021/07/08 19:05:56] root INFO:         coeff : 0.0001\r\n[2021/07/08 19:05:56] root INFO:         name : L2\r\nW0708 19:05:56.250205  3166 device_context.cc:362] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.0, Runtime API Version: 10.1\r\nW0708 19:05:56.256101  3166 device_context.cc:372] device: 0, cuDNN Version: 7.6.\r\n[2021/07/08 19:05:59] root INFO: train with paddle 2.0.2 and device CUDAPlace(0)\r\n{'CELoss': {'weight': 1.0}}\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py:89: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if isinstance(slot[0], (np.ndarray, np.bool, numbers.Number)):\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py:89: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if isinstance(slot[0], (np.ndarray, np.bool, numbers.Number)):\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py:89: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if isinstance(slot[0], (np.ndarray, np.bool, numbers.Number)):\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py:89: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if isinstance(slot[0], (np.ndarray, np.bool, numbers.Number)):\r\n[2021/07/08 19:06:01] root INFO: [Train][Epoch 1/120][Iter: 0/1177]lr: 0.10000, CELoss: 4.35560, loss: 4.35560, top1: 0.00000, top5: 0.25000, batch_cost: 1.58415s, reader_cost: 0.56565, ips: 2.52502 images/sec, eta: 2 days, 14:09:05\r\n[2021/07/08 19:06:09] root INFO: [Train][Epoch 1/120][Iter: 10/1177]lr: 0.10000, CELoss: 47.96571, loss: 47.96571, top1: 0.04545, top5: 0.15909, batch_cost: 0.84074s, reader_cost: 0.00014, ips: 4.75769 images/sec, eta: 1 day, 8:58:58\r\n[2021/07/08 19:06:17] root INFO: [Train][Epoch 1/120][Iter: 20/1177]lr: 0.10000, CELoss: 61.20748, loss: 61.20748, top1: 0.07143, top5: 0.20238, batch_cost: 0.84114s, reader_cost: 0.00108, ips: 4.75543 images/sec, eta: 1 day, 8:59:46\r\n[2021/07/08 19:06:26] root INFO: [Train][Epoch 1/120][Iter: 30/1177]lr: 0.10000, CELoss: 62.22736, loss: 62.22736, top1: 0.04839, top5: 0.13710, batch_cost: 0.83538s, reader_cost: 0.00138, ips: 4.78823 images/sec, eta: 1 day, 8:46:04\r\n[2021/07/08 19:06:34] root INFO: [Train][Epoch 1/120][Iter: 40/1177]lr: 0.10000, CELoss: 67.40503, loss: 67.40503, top1: 0.06098, top5: 0.14024, batch_cost: 0.83140s, reader_cost: 0.00144, ips: 4.81115 images/sec, eta: 1 day, 8:36:33\r\n[2021/07/08 19:06:42] root INFO: [Train][Epoch 1/120][Iter: 50/1177]lr: 0.10000, CELoss: 83.73460, loss: 83.73460, top1: 0.05392, top5: 0.14216, batch_cost: 0.83247s, reader_cost: 0.00160, ips: 4.80498 images/sec, eta: 1 day, 8:38:56\r\n[2021/07/08 19:06:51] root INFO: [Train][Epoch 1/120][Iter: 60/1177]lr: 0.10000, CELoss: 107.60855, loss: 107.60855, top1: 0.05738, top5: 0.14754, batch_cost: 0.83255s, reader_cost: 0.00164, ips: 4.80454 images/sec, eta: 1 day, 8:38:58\r\n[2021/07/08 19:06:59] root INFO: [Train][Epoch 1/120][Iter: 70/1177]lr: 0.10000, CELoss: 182.18830, loss: 182.18830, top1: 0.05986, top5: 0.15493, batch_cost: 0.83236s, reader_cost: 0.00165, ips: 4.80563 images/sec, eta: 1 day, 8:38:23\r\n[2021/07/08 19:07:07] root INFO: [Train][Epoch 1/120][Iter: 80/1177]lr: 0.10000, CELoss: 1078.75345, loss: 1078.75345, top1: 0.07407, top5: 0.17284, batch_cost: 0.83252s, reader_cost: 0.00171, ips: 4.80471 images/sec, eta: 1 day, 8:38:38\r\n[2021/07/08 19:07:16] root INFO: [Train][Epoch 1/120][Iter: 90/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.06868, top5: 0.16209, batch_cost: 0.83230s, reader_cost: 0.00177, ips: 4.80596 images/sec, eta: 1 day, 8:37:59\r\n[2021/07/08 19:07:24] root INFO: [Train][Epoch 1/120][Iter: 100/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.06188, top5: 0.15347, batch_cost: 0.83320s, reader_cost: 0.00177, ips: 4.80078 images/sec, eta: 1 day, 8:39:57\r\n[2021/07/08 19:07:32] root INFO: [Train][Epoch 1/120][Iter: 110/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.05631, top5: 0.14189, batch_cost: 0.83304s, reader_cost: 0.00175, ips: 4.80168 images/sec, eta: 1 day, 8:39:27\r\n[2021/07/08 19:07:41] root INFO: [Train][Epoch 1/120][Iter: 120/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.05165, top5: 0.13636, batch_cost: 0.83283s, reader_cost: 0.00177, ips: 4.80288 images/sec, eta: 1 day, 8:38:49\r\n[2021/07/08 19:07:49] root INFO: [Train][Epoch 1/120][Iter: 130/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.04771, top5: 0.12786, batch_cost: 0.83269s, reader_cost: 0.00178, ips: 4.80373 images/sec, eta: 1 day, 8:38:20\r\n[2021/07/08 19:07:57] root INFO: [Train][Epoch 1/120][Iter: 140/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.04433, top5: 0.12057, batch_cost: 0.83305s, reader_cost: 0.00181, ips: 4.80164 images/sec, eta: 1 day, 8:39:03\r\n[2021/07/08 19:08:06] root INFO: [Train][Epoch 1/120][Iter: 150/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.04139, top5: 0.11755, batch_cost: 0.83383s, reader_cost: 0.00182, ips: 4.79714 images/sec, eta: 1 day, 8:40:45\r\n[2021/07/08 19:08:14] root INFO: [Train][Epoch 1/120][Iter: 160/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.04037, top5: 0.11491, batch_cost: 0.83469s, reader_cost: 0.00179, ips: 4.79222 images/sec, eta: 1 day, 8:42:37\r\n[2021/07/08 19:08:23] root INFO: [Train][Epoch 1/120][Iter: 170/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.04094, top5: 0.11257, batch_cost: 0.83513s, reader_cost: 0.00180, ips: 4.78968 images/sec, eta: 1 day, 8:43:31\r\n[2021/07/08 19:08:31] root INFO: [Train][Epoch 1/120][Iter: 180/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03867, top5: 0.10635, batch_cost: 0.83577s, reader_cost: 0.00182, ips: 4.78602 images/sec, eta: 1 day, 8:44:53\r\n[2021/07/08 19:08:39] root INFO: [Train][Epoch 1/120][Iter: 190/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03796, top5: 0.10209, batch_cost: 0.83546s, reader_cost: 0.00183, ips: 4.78779 images/sec, eta: 1 day, 8:44:01\r\n[2021/07/08 19:08:48] root INFO: [Train][Epoch 1/120][Iter: 200/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03856, top5: 0.09950, batch_cost: 0.83585s, reader_cost: 0.00186, ips: 4.78555 images/sec, eta: 1 day, 8:44:48\r\n[2021/07/08 19:08:56] root INFO: [Train][Epoch 1/120][Iter: 210/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03791, top5: 0.09834, batch_cost: 0.83600s, reader_cost: 0.00184, ips: 4.78469 images/sec, eta: 1 day, 8:45:00\r\n[2021/07/08 19:09:05] root INFO: [Train][Epoch 1/120][Iter: 220/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03733, top5: 0.09615, batch_cost: 0.83624s, reader_cost: 0.00185, ips: 4.78331 images/sec, eta: 1 day, 8:45:26\r\n[2021/07/08 19:09:13] root INFO: [Train][Epoch 1/120][Iter: 230/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03571, top5: 0.09199, batch_cost: 0.83621s, reader_cost: 0.00188, ips: 4.78349 images/sec, eta: 1 day, 8:45:14\r\n[2021/07/08 19:09:21] root INFO: [Train][Epoch 1/120][Iter: 240/1177]lr: 0.10000, CELoss: nan, loss: nan, top1: 0.03527, top5: 0.09025, batch_cost: 0.83599s, reader_cost: 0.00188, ips: 4.78474 images/sec, eta: 1 day, 8:44:34\r\n\r\n训练环境：AiStudio平台",
        "state": "closed",
        "user": "thomas-yanxin",
        "closed_by": "weisy11",
        "created_at": "2021-07-08T11:13:37+00:00",
        "updated_at": "2021-07-12T06:40:42+00:00",
        "closed_at": "2021-07-12T06:40:42+00:00",
        "comments_count": [
            "littletomatodonkey",
            "thomas-yanxin",
            "cuicheng01",
            "thomas-yanxin",
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1031,
        "title": "使用AIStudio脚本运行环境基于PaddleClas训练过程的相关问题",
        "body": "在脚本中选取0,1,2,3GPU训练\r\n![image](https://user-images.githubusercontent.com/58030051/125183581-2e77ea00-e24a-11eb-962f-f3d75899d2e8.png)\r\n出现以下问题\r\n![image](https://user-images.githubusercontent.com/58030051/125183570-130cdf00-e24a-11eb-8e8c-ff71c5a675a4.png)\r\n该如何解决？",
        "state": "closed",
        "user": "thomas-yanxin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-11T05:17:05+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:08:03+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1032,
        "title": "关于向量检索配置过程中的相关问题",
        "body": "请问这个该文件夹，具体是指哪个文件夹啊？\r\n![image](https://user-images.githubusercontent.com/58030051/125204597-a2e57400-e2b0-11eb-931e-537a5e340807.png)\r\n",
        "state": "closed",
        "user": "thomas-yanxin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-11T17:30:34+00:00",
        "updated_at": "2022-03-16T04:08:06+00:00",
        "closed_at": "2022-03-16T04:08:04+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1035,
        "title": "车道线检测的有没有？",
        "body": "",
        "state": "closed",
        "user": "xinsuinizhuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-12T08:41:43+00:00",
        "updated_at": "2022-03-16T04:08:12+00:00",
        "closed_at": "2022-03-16T04:08:05+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1036,
        "title": "相同的数据集在PaddleClas2.0和2.2版本却得到完全不同的ACC",
        "body": ">自有图像分类数据集，使用的网络结构都是MobileNetV3_large_x1_0\r\n\r\n4月份的时候我用PaddleClas2.0版本在自有数据集上训练过一版分类模型，当时的Top1 acc是99.6%\r\n\r\n今天我用PaddleClas2.2版本程序在同一个数据集上进行训练，Top1 acc只有48.0%（ImageNet预训练模型确认是加载了的）\r\n\r\n训练过程都是完全按照2个版本的《30分钟玩转教程》进行的，参数的调整只修改了dataset和classnum，2次训练epoch和batchnum是一致的\r\n\r\n大家有没有遭遇过这个困境呢？",
        "state": "closed",
        "user": "BurrowsWang",
        "closed_by": "BurrowsWang",
        "created_at": "2021-07-12T09:22:02+00:00",
        "updated_at": "2021-07-13T07:23:29+00:00",
        "closed_at": "2021-07-13T07:23:29+00:00",
        "comments_count": [
            "cuicheng01",
            "BurrowsWang",
            "cuicheng01",
            "BurrowsWang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1039,
        "title": "图像识别，颜色匹配不正确",
        "body": "图像识别，在两个类别仅在颜色上有差异时，似乎不能正确地匹配 ",
        "state": "closed",
        "user": "coderchuan",
        "closed_by": "weisy11",
        "created_at": "2021-07-13T05:45:07+00:00",
        "updated_at": "2022-03-16T06:20:03+00:00",
        "closed_at": "2022-03-16T06:20:03+00:00",
        "comments_count": [
            "cuicheng01",
            "coderchuan",
            "cuicheng01",
            "coderchuan",
            "cuicheng01",
            "coderchuan",
            "cuicheng01",
            "coderchuan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1042,
        "title": "如何修改数据集进行reid训练",
        "body": "如题",
        "state": "closed",
        "user": "Mr-ind1fferent",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-14T04:31:39+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:05+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1044,
        "title": "关于resnetvd的问题",
        "body": "请问resnetvd指的是什么结构呢，是resnet-d？有相关的论文、资料介绍吗？",
        "state": "closed",
        "user": "ZZHHogan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-14T09:33:27+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:07+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1045,
        "title": "求公开百度10万分类的图像预训练模型",
        "body": "求官方号在知乎提到过的10万分类预训练模型\r\nhttps://zhuanlan.zhihu.com/p/137534156",
        "state": "closed",
        "user": "fatty-tiger",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-14T13:57:31+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:08+00:00",
        "comments_count": [
            "cuicheng01",
            "fatty-tiger",
            "bityigoss",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1043,
        "title": "SSLD中500M大数据集",
        "body": "![image](https://user-images.githubusercontent.com/38682321/125574450-a5bdf516-2d46-4a42-a43c-cd84b9c34ec9.png)\r\n从imagenet22k中筛选出400万张图片到imagenet1k中，请问imagenet1k中每一类的图片是均匀增加的吗？如果不均匀增加，会不会导致500M数据中样本不均匀的问题？",
        "state": "open",
        "user": "pawopawo",
        "closed_by": "pawopawo",
        "created_at": "2021-07-14T06:36:31+00:00",
        "updated_at": "2024-02-26T04:29:16+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "pawopawo",
            "pawopawo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1049,
        "title": "基于PaddleHub Serving的服务部署",
        "body": "启动服务出现error日志。\r\nPython 3.9.6\r\npip 21.1.3 \r\npaddle 2.1.1\r\n\r\n```java\r\n[zjbing@v-zhujiebing-test-137 deploy]$ hub serving start -m clas_system\r\n/usr/local/python3.9.6/lib/python3.9/site-packages/pip/_vendor/packaging/version.py:127: DeprecationWarning: Creating a LegacyVersion has been deprecated and will be removed in the next major release\r\n  warnings.warn(\r\n/usr/local/python3.9.6/lib/python3.9/site-packages/pip/_vendor/packaging/version.py:127: DeprecationWarning: Creating a LegacyVersion has been deprecated and will be removed in the next major release\r\n  warnings.warn(\r\nUse CPU\r\nTraceback (most recent call last):\r\n  File \"/home/zjbing/.local/bin/hub\", line 8, in <module>\r\n    sys.exit(execute())\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/commands/utils.py\", line 69, in execute\r\n    return com['_entry']().execute(sys.argv[idx:])\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/commands/serving.py\", line 349, in execute\r\n    self.start_serving()\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/commands/serving.py\", line 242, in start_serving\r\n    self.start_single_app_with_args()\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/commands/serving.py\", line 218, in start_single_app_with_args\r\n    self.preinstall_modules()\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/commands/serving.py\", line 149, in preinstall_modules\r\n    m = hub.Module(**init_args)\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/module/module.py\", line 171, in __new__\r\n    module = cls.init_with_name(\r\n  File \"/home/zjbing/.local/lib/python3.9/site-packages/paddlehub/module/module.py\", line 281, in init_with_name\r\n    return user_module_cls(**kwargs)\r\n  File \"/home/zjbing/.paddlehub/modules/clas_system/module.py\", line 45, in __init__\r\n    self.cls_predictor = ClsPredictor(self._config)\r\n  File \"/home/zjbing/paddlecls/PaddleClas/deploy/./python/predict_cls.py\", line 42, in __init__\r\n    self.postprocess = build_postprocess(config[\"PostProcess\"])\r\n  File \"/home/zjbing/paddlecls/PaddleClas/deploy/./python/postprocess.py\", line 38, in build_postprocess\r\n    func_list.append(getattr(mod, func)(**config[func]))\r\nAttributeError: module 'python.postprocess' has no attribute 'name'\r\n\r\n```",
        "state": "closed",
        "user": "zhujiebing",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-15T10:25:45+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:08+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1050,
        "title": "按文档说明重新生成index.dll却还是不能用",
        "body": "![image](https://user-images.githubusercontent.com/3635294/125886500-c220e9f2-11a7-413e-ba12-33763d0e7243.png)\r\n重新生成了n次，还是这个提示，看看怎么回事？",
        "state": "closed",
        "user": "martin1009",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-16T03:20:15+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:10+00:00",
        "comments_count": [
            "littletomatodonkey",
            "JH95-ai",
            "martin1009",
            "littletomatodonkey",
            "TingquanGao",
            "JH95-ai",
            "TingquanGao",
            "martin1009",
            "TingquanGao",
            "martin1009",
            "TingquanGao",
            "martin1009",
            "martin1009",
            "martin1009",
            "zssty2010",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1051,
        "title": "如何用PaddleClas识别直播视频流中的特定物品",
        "body": "场景：有两个画面，一个是直播画面，一个是直播即时识别画面。当直播的时候，识别画面能在延迟几秒内找到特征目标物并用框圈起。\r\n\r\n请问该如何实现与部署？谢谢",
        "state": "open",
        "user": "martin1009",
        "closed_by": null,
        "created_at": "2021-07-16T08:37:12+00:00",
        "updated_at": "2024-02-26T04:29:15+00:00",
        "closed_at": null,
        "comments_count": [
            "Intsigstephon",
            "martin1009",
            "Intsigstephon",
            "martin1009"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1054,
        "title": "CPU推理预测出错",
        "body": "\r\n![image](https://user-images.githubusercontent.com/51190264/126043179-2f0a6ad9-990a-4eac-92dd-e169f1ab7902.png)\r\n\r\n![image](https://user-images.githubusercontent.com/51190264/126043167-bc133e4d-3aee-400e-8e26-24ca27c79f68.png)\r\n\r\n模型是ResNext，系统是Linux Deepin 20.2",
        "state": "closed",
        "user": "JiehangXie",
        "closed_by": "JiehangXie",
        "created_at": "2021-07-17T16:12:29+00:00",
        "updated_at": "2021-07-17T16:44:18+00:00",
        "closed_at": "2021-07-17T16:44:18+00:00",
        "comments_count": [
            "JiehangXie"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1058,
        "title": "请问如何跳过主体检测，直接进行检索",
        "body": "python python/predict_system.py -c configs/inference_product.yaml，教程里面这个是主体检测、特征提取和向量检索串联的例子，但是假设我自己的图片已经是一个主体图片了，然后我通过之前训练的识别模型构建了一个索引库，我应该如何跳过主体检测，直接拿这个图片到索引库进行检索？",
        "state": "closed",
        "user": "wjrjsdx",
        "closed_by": "wjrjsdx",
        "created_at": "2021-07-19T13:48:20+00:00",
        "updated_at": "2021-07-20T14:10:52+00:00",
        "closed_at": "2021-07-20T14:10:52+00:00",
        "comments_count": [
            "Intsigstephon",
            "wjrjsdx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1057,
        "title": "TDM-GCC Setup 1.2105.1未能找到openmp安装",
        "body": "您好，我在尝试quick_start_recognition.md教程的时候遇到了以下问题，期待您的解答：\r\n```python\r\n# 使用下面的命令使用GPU进行预测\r\npython3.7 python/predict_system.py -c configs/inference_product.yaml\r\n# 使用下面的命令使用CPU进行预测\r\npython3.7 python/predict_system.py -c configs/inference_product.yaml -o Global.use_gpu=False\r\n```\r\n![2021-07-19_172144](https://user-images.githubusercontent.com/29617657/126137296-761d9109-9bd4-4422-84b4-493f1088dfdb.png)\r\n\r\n我试着按照[向量检索教程](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/deploy/vector_search/README.md)进行重编译。下载了TDM-GCC后，版本是TDM-GCC Setup 1.2105.1，未能找到openmp安装。\r\n\r\n![2021-07-19_145045](https://user-images.githubusercontent.com/29617657/126137659-95abc555-d2d0-4275-a3b3-1f3cb61dc611.png)\r\n\r\n直接编译结果\r\n\r\n![image](https://user-images.githubusercontent.com/29617657/126137964-8125f4b9-dbae-40b2-aafd-4f3e63097b22.png)\r\n",
        "state": "open",
        "user": "hypotenuse345",
        "closed_by": null,
        "created_at": "2021-07-19T09:31:17+00:00",
        "updated_at": "2024-02-26T04:29:14+00:00",
        "closed_at": null,
        "comments_count": [
            "littletomatodonkey",
            "hypotenuse345",
            "DongChenwei2000",
            "showdown-zhou",
            "hypotenuse345"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1060,
        "title": "SSLD中500M大数据标注问题",
        "body": "SSLD中采用的是蒸馏训练，那对新加入的400M数据进行标注的意义是什么呢？最终训练也没用到这些标注",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-20T06:39:45+00:00",
        "updated_at": "2022-03-16T04:08:13+00:00",
        "closed_at": "2022-03-16T04:08:11+00:00",
        "comments_count": [
            "cuicheng01",
            "pawopawo",
            "cuicheng01",
            "pawopawo",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1061,
        "title": "训练自己模型进行识别的问题：",
        "body": "识别中在paddledetection中训练了自己的模型，并导出为\r\n![image](https://user-images.githubusercontent.com/63913709/126421307-4b5625b8-67cc-4aa0-8c10-43d520b68fff.png)\r\n，另外，训练了自己的特征提取模型，并导出为：\r\n![image](https://user-images.githubusercontent.com/63913709/126421379-054fc0aa-a3b6-4ef7-8838-872248f98f41.png)\r\n识别时的yaml文件如下：\r\nGlobal:\r\n  infer_imgs: \"./recognition_demo_data_v1.0/test_product/test/\"\r\n  det_inference_model_dir: \"./models/cascade_rcnn_r50_vd_fpn_infer\"\r\n  rec_inference_model_dir: \"./models/MobileNetV1_infer\"\r\n  rec_nms_thresold: 0.05\r\n  \r\n  batch_size: 1\r\n  image_shape: [3, 1024, 1280]\r\n  threshold: 0.5\r\n  max_det_results: 5\r\n  labe_list:\r\n  - foreground\r\n\r\n  # inference engine config\r\n  use_gpu: True\r\n  enable_mkldnn: False\r\n  cpu_num_threads: 100\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nDetPreProcess:\r\n  transform_ops:\r\n    - DetResize:\r\n        interp: 2\r\n        keep_ratio: false\r\n        target_size: [800, 1333]\r\n    - DetNormalizeImage:\r\n        is_scale: true\r\n        mean: [0.331,0.374,0.413]\r\n        std: [0.182, 0.206,0.23]\r\n    - DetPermute: {}\r\nDetPostProcess: {}\r\n\r\nRecPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 0.00392157\r\n        mean: [0.356, 0.398, 0.431]\r\n        std: [0.104, 0.114, 0.124]\r\n        order: ''\r\n    - ToCHWImage:\r\n\r\nRecPostProcess: null\r\n\r\n# indexing engine config\r\nIndexProcess:\r\n  index_path: \"./recognition_demo_data_v1.0/gallery_product/index_update\"\r\n  search_budget: 100\r\n  return_k: 5\r\n  dist_type: \"IP\"\r\n  score_thres: 0.5\r\n问题：predict_system.py后出现如下错误：\r\nTraceback (most recent call last):\r\n  File \"deploy\\python\\predict_system.py\", line 134, in <module>\r\n    main(config)\r\n  File \"deploy\\python\\predict_system.py\", line 125, in main\r\n    output = system_predictor.predict(img)\r\n  File \"deploy\\python\\predict_system.py\", line 89, in predict\r\n    results = self.det_predictor.predict(img)\r\n  File \"G:\\paddle\\PaddleClas-release-2.2\\deploy\\python\\predict_det.py\", line 121, in predict\r\n    self.paddle_predictor.run()\r\nValueError: In user code:\r\n\r\n    File \"/home/aistudio/PaddleDetection2.1/tools/export_model.py\", line 105, in <module>\r\n      main()\r\n    File \"/home/aistudio/PaddleDetection2.1/tools/export_model.py\", line 101, in main\r\n      run(FLAGS, cfg)\r\n    File \"/home/aistudio/PaddleDetection2.1/tools/export_model.py\", line 69, in run\r\n      trainer.export(FLAGS.output_dir)\r\n    File \"/home/aistudio/PaddleDetection2.1/ppdet/engine/trainer.py\", line 507, in export\r\n      input_spec, static_model.forward.main_program,\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 534, in main_program\r\n      concrete_program = self.concrete_program\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 454, in concrete_program\r\n      return self.concrete_program_specify_input_spec(input_spec=None)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n      *desired_input_spec)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n      class_instance=cache_key.class_instance)\r\n    File \"<decorator-gen-65>\", line 2, in from_func_spec\r\n\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 40, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 652, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/tmp/tmpo73widhr.py\", line 27, in forward\r\n      false_fn_1, (), (), (out,))\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/home/aistudio/PaddleDetection2.1/ppdet/modeling/architectures/meta_arch.py\", line 29, in forward\r\n      out = self.get_pred()\r\n    File \"/home/aistudio/PaddleDetection2.1/ppdet/modeling/architectures/cascade_rcnn.py\", line 136, in get_pred\r\n      bbox_pred, bbox_num, mask_pred = self._forward()\r\n    File \"/tmp/tmpubvgfkvq.py\", line 21, in _forward\r\n      true_fn_3, false_fn_3, (body_feats,), (body_feats,), (body_feats,))\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/home/aistudio/PaddleDetection2.1/ppdet/modeling/architectures/cascade_rcnn.py\", line 89, in _forward\r\n      body_feats = self.neck(body_feats)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/tmp/tmpl1hvmjm4.py\", line 31, in forward\r\n      for_loop_condition_4, for_loop_body_4, [i, laterals, num_levels])\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/home/aistudio/PaddleDetection2.1/ppdet/modeling/necks/fpn.py\", line 199, in forward\r\n      laterals[lvl - 1] += upsample\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layers/math_op_patch.py\", line 305, in __impl__\r\n      attrs={'axis': axis})\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3232, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2312, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    **InvalidArgumentError: Broadcast dimension mismatch. Operands could not be broadcast together with the shape of X = [1, 256, 100, 167] and the shape of Y = [1, 256, 100, 168]. Received [167] in X is not equal to [168] in Y at i:3.**\r\n      [Hint: Expected x_dims_array[i] == y_dims_array[i] || x_dims_array[i] <= 1 || y_dims_array[i] <= 1 == true, but received x_dims_array[i] == y_dims_array[i] || x_dims_array[i] <= 1 || y_dims_array[i] <= 1:0 != true:1.] (at C:\\home\r\n\\workspace\\Paddle_release2\\paddle/fluid/operators/elementwise/elementwise_op_function.h:169)\r\n      [operator < elementwise_add > error]\r\n请指教什么问题？\r\n",
        "state": "closed",
        "user": "jackie8310",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-21T02:36:18+00:00",
        "updated_at": "2022-03-16T04:08:15+00:00",
        "closed_at": "2022-03-16T04:08:13+00:00",
        "comments_count": [
            "cuicheng01",
            "sinoboy168",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1067,
        "title": "aistudio平台上安装Python依赖库很慢，有没有什么好的办法？",
        "body": "安装Python依赖库是按照官方文档中做的：!pip install --upgrade -r requirements.txt -i https://mirror.baidu.com/pypi/simple\r\n用的还是百度源，为什么这么慢啊？",
        "state": "closed",
        "user": "Fly-hub",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-22T03:27:44+00:00",
        "updated_at": "2022-03-16T04:08:16+00:00",
        "closed_at": "2022-03-16T04:08:14+00:00",
        "comments_count": [
            "Fly-hub",
            "Fly-hub",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1069,
        "title": "SSLD蒸馏训练策略问题",
        "body": "![image](https://user-images.githubusercontent.com/38682321/126587873-abca34d1-4bd5-4da3-87a8-1376f7b2b1ea.png)\r\n请问SSLD蒸馏训练中，有使用mixup这些trick吗？ 比如上表的83.0，有使用mixup吗？",
        "state": "closed",
        "user": "pawopawo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-22T03:52:59+00:00",
        "updated_at": "2022-03-16T04:08:17+00:00",
        "closed_at": "2022-03-16T04:08:15+00:00",
        "comments_count": [
            "cuicheng01",
            "marvis",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1073,
        "title": "请问 有可以使用visreader的版本开源吗？",
        "body": "您好，我的数据交大，在aiflow上，请问 有可以使用visreader的版本吗？ ",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-22T08:13:40+00:00",
        "updated_at": "2022-03-16T04:08:20+00:00",
        "closed_at": "2022-03-16T04:08:16+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1074,
        "title": "同一个inference模型，使用源码进行预测正确，whl包预测结果错误",
        "body": "最新版代码，训练得到颜色9分类模型，用训练模型预测（tools/infer.py）正确，然后导出infernce模型，预测（python/predict_cls.py）也正确：\r\npython python/predict_cls.py -c configs/inference_9cls_finetune.yaml\r\n![image](https://user-images.githubusercontent.com/63723648/126728550-506a5797-61c6-41fd-9140-b79748f3059d.png)\r\n\r\n但是使用whl包预测错误：\r\nfrom paddleclas import PaddleClas\r\nclas = PaddleClas(inference_model_dir=r'F:\\pycharm_projects\\PaddleClas\\inference\\9cls_finetune', class_id_map_file=r'F:\\pycharm_projects\\PaddleClas\\ppcls\\configs\\appearance\\9cls.txt', topk=2)\r\ninfer_imgs = r'E:\\appearance\\vehicle_color_cls\\paddle\\crop_9cls_test\\train\\0111_184.jpg'\r\nresult=clas.predict(infer_imgs)\r\nprint(next(result))\r\n![image](https://user-images.githubusercontent.com/63723648/126728585-983bf1a2-a8f1-4ef9-8ccd-3a03d297c9ad.png)\r\n\r\n没有改任何代码，尺寸啥都是默认的，但是结果就是不一样。\r\n\r\n相关文件见网盘链接\r\n链接：https://pan.baidu.com/s/1R6bUmbytDjvuF7snp9_OkA \r\n提取码：tt94 ",
        "state": "closed",
        "user": "wjrjsdx",
        "closed_by": "wjrjsdx",
        "created_at": "2021-07-23T01:45:26+00:00",
        "updated_at": "2022-09-16T08:52:20+00:00",
        "closed_at": "2021-07-23T06:40:50+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao",
            "wjrjsdx",
            "ayansengupta17"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1077,
        "title": "配置文件中eval infer阶段中cropimage考虑的是什么？",
        "body": "ppcls\\configs\\quick_start\\professional\\ResNet50_vd_mixup_CIFAR100_finetune.yaml\r\n前面已经有resizeimage控制大小了，这个是为了分割大小投票预测结果吗？",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-07-23T09:16:55+00:00",
        "updated_at": "2021-07-27T07:39:36+00:00",
        "closed_at": "2021-07-27T07:39:36+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 1088
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1081,
        "title": "关于向量检索可否动态加载到内存中的问题！",
        "body": "请问，这里使用的Möbius向量检索算法支持类似于faiss的那种index.add()的功能吗，如果有的话，我要怎么实现，\r\n此外这个Möbius检索算法每次构建新的图都要进行train吗，这里的train是为了检索加速还是为了构建相似的图呀，\r\n还请详细解答一下我的疑惑，十分感谢，辛苦！",
        "state": "closed",
        "user": "Zhangxinnian",
        "closed_by": "Zhangxinnian",
        "created_at": "2021-07-26T10:45:13+00:00",
        "updated_at": "2021-07-30T07:30:05+00:00",
        "closed_at": "2021-07-30T07:30:04+00:00",
        "comments_count": [
            "Intsigstephon",
            "Zhangxinnian"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1080,
        "title": "请问可以对视频中每一帧画面进行逐帧预测吗",
        "body": "\r\n",
        "state": "closed",
        "user": "gitqinxinyu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-26T01:25:23+00:00",
        "updated_at": "2022-03-16T04:08:19+00:00",
        "closed_at": "2022-03-16T04:08:17+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 1096
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1082,
        "title": "PaddleClas release/2.2 使用inference模型进行模型推理的问题",
        "body": "使用tools/export_model.py进行模型转换时发现并没有指定class_num，导致转换的模型class_num都是1000",
        "state": "closed",
        "user": "VJoer",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-27T01:31:01+00:00",
        "updated_at": "2022-03-16T04:08:19+00:00",
        "closed_at": "2022-03-16T04:08:18+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1087,
        "title": "似乎没有f1 score的评价指标？",
        "body": "这在分类中应该算是常用指标吧\r\n",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-07-27T06:05:30+00:00",
        "updated_at": "2021-07-28T10:17:04+00:00",
        "closed_at": "2021-07-28T10:17:04+00:00",
        "comments_count": [
            "weisy11",
            "bbbxixixixi",
            "weisy11",
            "weisy11",
            "bbbxixixixi",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1086,
        "title": "ResNeXt101_32x48d_wsl 训练异常",
        "body": "aistudio 2.1  ppcls 2.2\r\nFile \"/home/aistudio/PaddleClas-release-2.2/ppcls/arch/backbone/model_zoo/resnext101_wsl.py\", line 484, in ResNeXt101_32x48d_wsl\r\n    model = ResNeXt101WSL(cardinality=32, width=48, **kwargs)\r\nNameError: name 'kwargs' is not defined",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-07-27T04:38:01+00:00",
        "updated_at": "2021-08-14T08:45:29+00:00",
        "closed_at": "2021-08-14T08:45:29+00:00",
        "comments_count": [
            "weisy11",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1091,
        "title": "使用CPU预测开启mkldnn加速报错",
        "body": "1、 PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.1和PaddlePaddle 2.1.0\r\n2、使用模型：SwinTransformer_base_patch4_window12_384\r\n问题：关闭mkldnn加速后使用CPU进行预测正常，开启mkldnn加速后，进行预测报以下错误：\r\n```\r\nIn user code:\r\n    File \"tools/export_model.py\", line 85, in <module>\r\n      main()\r\n    File \"tools/export_model.py\", line 81, in main\r\n      paddle.jit.save(model, os.path.join(args.output_path, \"inference\"))\r\n    File \"<decorator-gen-60>\", line 2, in save\r\n      \r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 39, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 681, in save\r\n      inner_input_spec)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n      *desired_input_spec)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/tmp/tmp65lai97w.py\", line 16, in forward\r\n      for_loop_condition_1, for_loop_body_1, [__for_loop_var_index_1, x])\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/home/ppcls/modeling/architectures/swin_transformer.py\", line 495, in forward\r\n      x = blk(x)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/ppcls/modeling/architectures/swin_transformer.py\", line 331, in forward\r\n      x_windows, mask=self.attn_mask)  # nW*B, window_size*window_size, C\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/ppcls/modeling/architectures/swin_transformer.py\", line 190, in forward\r\n      x = paddle.mm(attn, v).transpose([0, 2, 1, 3]).reshape([B_, N, C])\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/tensor/math.py\", line 956, in mm\r\n      'Y': mat2}, outputs={'Out': out})\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n      return self.main_program.current_block().append_op(*args, **kwargs)\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3023, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2107, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    PreconditionNotMetError: The Tensor's element number must be equal or greater than zero. The Tensor's shape is [-1, 144, 128] now\r\n      [Hint: Expected numel() >= 0, but received numel():-18432 < 0:0.] (at /paddle/paddle/fluid/framework/tensor.cc:59)\r\n      [operator < matmul > error]\r\n```\r\n\r\n",
        "state": "closed",
        "user": "BerryRB",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-07-28T08:17:18+00:00",
        "updated_at": "2022-03-16T04:08:20+00:00",
        "closed_at": "2022-03-16T04:08:18+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1099,
        "title": "使用getting_started.md中的“使用inference模型进行模型推理“报错",
        "body": "\r\npaddleClas版本：2.2 paddlepaddle版本:2.1.1\r\nUbuntu18.04    CUDA10.2 Cudnn8.2.2\r\n\r\n在按照getting_started中准备数据flower102，训练，导出，使用预训练模型测试时都没有发生问题。但在使inference模型进行推理时，报错如下：\r\nAttributeError: module 'python.postprocess' has no attribute 'class_id_map_file'\r\n当我去掉 'class_id_map_file' = None，使用`python3 python/predict_cls.py     -c configs/inference_cls.yaml     -o Global.infer_imgs=../dataset/flowers102/jpg/image_00001.jpg     -o Global.inference_model_dir=../inference/`  `进行预测的时候，报错如下：2021-07-30 15:16:11 INFO: \r\n```\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2021-07-30 15:16:11 INFO: Global : \r\n2021-07-30 15:16:11 INFO:     batch_size : 1\r\n2021-07-30 15:16:11 INFO:     cpu_num_threads : 100\r\n2021-07-30 15:16:11 INFO:     enable_benchmark : True\r\n2021-07-30 15:16:11 INFO:     enable_mkldnn : False\r\n2021-07-30 15:16:11 INFO:     enable_profile : False\r\n2021-07-30 15:16:11 INFO:     gpu_mem : 8000\r\n2021-07-30 15:16:11 INFO:     infer_imgs : ../dataset/flowers102/jpg/image_00001.jpg\r\n2021-07-30 15:16:11 INFO:     inference_model_dir : ../inference/\r\n2021-07-30 15:16:11 INFO:     ir_optim : True\r\n2021-07-30 15:16:11 INFO:     use_fp16 : False\r\n2021-07-30 15:16:11 INFO:     use_gpu : True\r\n2021-07-30 15:16:11 INFO:     use_tensorrt : False\r\n2021-07-30 15:16:11 INFO: PostProcess : \r\n2021-07-30 15:16:11 INFO:     SavePreLabel : \r\n2021-07-30 15:16:11 INFO:         save_dir : ./pre_label/\r\n2021-07-30 15:16:11 INFO:     Topk : \r\n2021-07-30 15:16:11 INFO:         class_id_map_file : ../ppcls/utils/imagenet1k_label_list.txt\r\n2021-07-30 15:16:11 INFO:         topk : 5\r\n2021-07-30 15:16:11 INFO:     main_indicator : Topk\r\n2021-07-30 15:16:11 INFO: PreProcess : \r\n2021-07-30 15:16:11 INFO:     transform_ops : \r\n2021-07-30 15:16:11 INFO:         ResizeImage : \r\n2021-07-30 15:16:11 INFO:             resize_short : 256\r\n2021-07-30 15:16:11 INFO:         CropImage : \r\n2021-07-30 15:16:11 INFO:             size : 224\r\n2021-07-30 15:16:11 INFO:         NormalizeImage : \r\n2021-07-30 15:16:11 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-07-30 15:16:11 INFO:             order : \r\n2021-07-30 15:16:11 INFO:             scale : 0.00392157\r\n2021-07-30 15:16:11 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-07-30 15:16:11 INFO:         ToCHWImage : None\r\nE0730 15:16:11.656328 10840 analysis_predictor.cc:679] Allocate too much memory for the GPU memory pool, assigned 8000 MB\r\nE0730 15:16:11.656348 10840 analysis_predictor.cc:682] Try to shink the value by setting AnalysisConfig::EnableGpu(...)\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1627629372 (unix time) try \"date -d @1627629372\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 10840 (TID 0x7fc3523c70c0) from PID 0 ***]\r\n\r\n段错误 (核心已转储)\r\n```\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "gaooolianggg",
        "closed_by": "gaooolianggg",
        "created_at": "2021-07-30T07:25:53+00:00",
        "updated_at": "2021-07-30T13:37:43+00:00",
        "closed_at": "2021-07-30T13:37:43+00:00",
        "comments_count": [
            "gaooolianggg"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1098,
        "title": "PaddlePaddle 2.1.0中的多标签分类准确率一直在降低。",
        "body": "使用PaddlePaddle 2.1.0跑多标签分类的例子。准确率显示一直在下降\r\n",
        "state": "closed",
        "user": "pengbin2018",
        "closed_by": "weisy11",
        "created_at": "2021-07-30T03:02:05+00:00",
        "updated_at": "2021-08-02T12:39:37+00:00",
        "closed_at": "2021-08-02T12:39:37+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1101,
        "title": "paddleclas运行出错，但结果却出来了",
        "body": "运行python python/predict_system.py -c configs/inference_product.yaml -o Global.infer_imgs=\"/tmp/qsc.jpg\" -o IndexProcess.index_path=\"./recognition_demo_data_v1.0/gallery_product/index_update\"  -o Global.use_gpu=False\r\n出现如下错误信息：\r\nWARNING: AVX is supported on local machine, but you have installed paddlepaddle without avx core. Hence, no_avx core which has worse preformance will be imported.You could reinstall paddlepaddle by 'python -m pip install --force-reinstall paddlepaddle-gpu[==version]' or rebuild paddlepaddle WITH_AVX=ON to get better performance.\r\n**The original error is: No module named 'paddle.fluid.core_avx'**\r\n\r\n但最后结果还是正常出来了\r\n\r\n用虚拟环境python3.8\r\npaddlepaddle按如下命令安装的：\r\npython -m pip install paddlepaddle-2.1.1.noavx-cp38-cp38-linux_x86_64.whl\r\n\r\n机器信息：centos7 python3.8.11 gcc8.2.0 安装paddlepaddle2.1.1 cpu版 机器支持 avx2指令集\r\n",
        "state": "closed",
        "user": "davidwkx",
        "closed_by": "davidwkx",
        "created_at": "2021-07-30T09:02:48+00:00",
        "updated_at": "2021-08-05T03:55:24+00:00",
        "closed_at": "2021-08-05T03:55:10+00:00",
        "comments_count": [
            "weisy11",
            "davidwkx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1100,
        "title": "运行 Illegal instruction",
        "body": "环境：centos7 python3.8.11 gcc8.2.0 安装paddlepaddle2.1.1 cpu版 机器支持 avx2指令集\r\n按paddlecas快速体验，错误信息如下：\r\npython python/predict_system.py -c configs/inference_product.yaml -o Global.use_gpu=False\r\nWARNING: AVX is supported on local machine, but you have installed paddlepaddle without avx core. Hence, no_avx core which has worse preformance will be imported.\r\nYou could reinstall paddlepaddle by 'python -m pip install --force-reinstall paddlepaddle-gpu[==version]' or rebuild paddlepaddle WITH_AVX=ON to get better performance.\r\nThe original error is: No module named 'paddle.fluid.core_avx'\r\n2021-07-30 15:01:58 INFO:\r\n== PaddleClas is powered by PaddlePaddle ! ==\r\n== ==\r\n== For more info please go to the following website. ==\r\n== ==\r\n== https://github.com/PaddlePaddle/PaddleClas ==\r\n。。。\r\n--- Fused 0 subgraphs into layer_norm op.\r\n**Inference: 7312.743425369263 ms per batch image\r\nC++ Traceback (most recent call last):\r\n0 _ctypes_callproc\r\n1 search_mobius_index\r\n2 paddle::framework::SignalHandle(char const*, int)\r\n3 paddle::platform::GetCurrentTraceBackStringabi:cxx11\r\nError Message Summary:\r\nFatalError: Illegal instruction is detected by the operating system.\r\n[TimeInfo: *** Aborted at 1627628531 (unix time) try \"date -d @1627628531\" if you are using GNU date ***]\r\n[SignalInfo: *** SIGILL (@0x7fba9cebf152) received by PID 10058 (TID 0x7fbacc93f840) from PID 18446744072047292754 ***]\r\n\r\nIllegal instruction**\r\n",
        "state": "closed",
        "user": "davidwkx",
        "closed_by": "davidwkx",
        "created_at": "2021-07-30T08:30:16+00:00",
        "updated_at": "2021-07-30T08:35:40+00:00",
        "closed_at": "2021-07-30T08:35:26+00:00",
        "comments_count": [
            "davidwkx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1102,
        "title": "数据增强实验结果的超参数设置",
        "body": "首先感谢贵团队的工作。\r\n在[此页面](https://paddleclas.readthedocs.io/zh_CN/latest/advanced_tutorials/image_augmentation/ImageAugment.html#)展示了使用不同数据增强方法得到的实验结果。请问这些实验中数据增强的超参数（如Cutmix和Mixup中的alpha）设置是怎样的？是否就是[这里](https://github.com/PaddlePaddle/PaddleClas/tree/2c7ce3c0f8b34477fa341fab0cd0e9510bc02cb9/ppcls/configs/ImageNet/DataAugment)的参数？\r\n期待回复，谢谢！",
        "state": "closed",
        "user": "rederyang",
        "closed_by": "rederyang",
        "created_at": "2021-08-01T05:44:40+00:00",
        "updated_at": "2021-08-02T14:54:36+00:00",
        "closed_at": "2021-08-02T14:54:36+00:00",
        "comments_count": [
            "cuicheng01",
            "rederyang"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1103,
        "title": "关于添加新的数据与标签",
        "body": "开发者你好，我想要添加新的数据和标签，请问数据和标签的摆放有其他的要求吗\r\n能否像这样\r\ngallery/anmuxi/001.jpg\t安慕希酸奶\r\ngallery/mengniu/001.jpg\t蒙牛牛奶\r\ngallery/guangming/001.jpg\t光明牛奶\r\ngallery/anmuxi/002.jpg\t安慕希酸奶\r\ngallery/mengniu/002.jpg\t蒙牛牛奶\r\ngallery/guangming/002.jpg\t光明牛奶\r\ngallery/anmuxi/003.jpg\t安慕希酸奶\r\ngallery/mengniu/003.jpg\t蒙牛牛奶\r\ngallery/guangming/003.jpg\t光明牛奶\r\ngallery/anmuxi/004.jpg\t安慕希酸奶\r\ngallery/mengniu/004.jpg\t蒙牛牛奶\r\ngallery/guangming/004.jpg\t光明牛奶\r\ngallery/anmuxi/005.jpg\t安慕希酸奶\r\ngallery/mengniu/005.jpg\t蒙牛牛奶\r\ngallery/guangming/005.jpg\t光明牛奶\r\n还是说只能够像这样\r\ngallery/anmuxi/001.jpg\t安慕希酸奶\r\ngallery/anmuxi/002.jpg\t安慕希酸奶\r\ngallery/anmuxi/003.jpg\t安慕希酸奶\r\ngallery/anmuxi/004.jpg\t安慕希酸奶\r\ngallery/anmuxi/005.jpg\t安慕希酸奶\r\ngallery/anmuxi/006.jpg\t安慕希酸奶\r\ngallery/mengniu/001.jpg\t蒙牛牛奶\r\ngallery/mengniu/002.jpg\t蒙牛牛奶\r\ngallery/mengniu/003.jpg\t蒙牛牛奶\r\ngallery/mengniu/004.jpg\t蒙牛牛奶\r\ngallery/mengniu/005.jpg\t蒙牛牛奶\r\ngallery/mengniu/006.jpg\t蒙牛牛奶\r\ngallery/guangming/001.jpg\t光明牛奶\r\ngallery/guangming/002.jpg\t光明牛奶\r\ngallery/guangming/003.jpg\t光明牛奶\r\ngallery/guangming/004.jpg\t光明牛奶\r\ngallery/guangming/005.jpg\t光明牛奶\r\ngallery/guangming/006.jpg\t光明牛奶",
        "state": "closed",
        "user": "DongChenwei2000",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-02T14:03:34+00:00",
        "updated_at": "2022-03-16T04:08:21+00:00",
        "closed_at": "2022-03-16T04:08:19+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1108,
        "title": "物品识别的score",
        "body": "开发者你好，在使用识别过程中，我返回的score大于1，这是怎么回事呢？\r\n![image](https://user-images.githubusercontent.com/71364549/128194559-446db56a-3723-4814-a327-95a160642170.png)\r\n",
        "state": "closed",
        "user": "DongChenwei2000",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-04T14:01:50+00:00",
        "updated_at": "2022-03-16T04:08:22+00:00",
        "closed_at": "2022-03-16T04:08:20+00:00",
        "comments_count": [
            "cuicheng01",
            "DongChenwei2000",
            "cuicheng01",
            "DongChenwei2000",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1109,
        "title": "CELoss: nan, loss: nan       SwinTransformer_base_patch4_window12_384.yaml",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n`[Epoch 92/120][Iter: 0/149]lr: 0.00010, CELoss: nan, loss: nan, top1: 0.50000, batch_cost: 3.88269s, reader_cost: 0.27595, ips: 4.12085 images/sec, eta: 4:39:37`",
        "state": "closed",
        "user": "Williamlizl",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-05T01:04:29+00:00",
        "updated_at": "2022-03-16T04:08:23+00:00",
        "closed_at": "2022-03-16T04:08:21+00:00",
        "comments_count": [
            "cuicheng01",
            "Williamlizl",
            "Williamlizl",
            "cuicheng01",
            "cuicheng01",
            "Williamlizl",
            "cuicheng01",
            "VJoer",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1110,
        "title": "【Question】PaddleClas与PaddleOCR是什么关系",
        "body": "Hi Team，\r\n\r\n想问一下PaddleClas与PaddleOCR是什么关系？能详细解释一下吗，谢谢！\r\n",
        "state": "closed",
        "user": "LangDaoAI",
        "closed_by": "LangDaoAI",
        "created_at": "2021-08-05T01:24:24+00:00",
        "updated_at": "2021-08-05T03:06:49+00:00",
        "closed_at": "2021-08-05T03:06:49+00:00",
        "comments_count": [
            "weisy11",
            "LangDaoAI"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1111,
        "title": "机器重启后，图像识别总是为空",
        "body": "\r\n环境：ubuntu16.0.4 paddlepaddle2.1.1 paddleclas\r\n问题描述：\r\n按照图像识别快速体验的指引安装后，图像能识别；新图像提取特征建立新索引库，再识别也正常。但我重新启动服务器后，再次运行，新图像建立索引库可以；但所有图像识别结果均为空，过程未报任何异常（信息如下）。请问，是环境设置问题还是其它原因？\r\n2021-08-05 04:03:56 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2021-08-05 04:03:56 INFO: DetPostProcess : \r\n2021-08-05 04:03:56 INFO: DetPreProcess : \r\n2021-08-05 04:03:56 INFO:     transform_ops : \r\n2021-08-05 04:03:56 INFO:         DetResize : \r\n2021-08-05 04:03:56 INFO:             interp : 2\r\n2021-08-05 04:03:56 INFO:             keep_ratio : False\r\n2021-08-05 04:03:56 INFO:             target_size : [640, 640]\r\n2021-08-05 04:03:56 INFO:         DetNormalizeImage : \r\n2021-08-05 04:03:56 INFO:             is_scale : True\r\n2021-08-05 04:03:56 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-08-05 04:03:56 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-08-05 04:03:56 INFO:         DetPermute : \r\n2021-08-05 04:03:56 INFO: Global : \r\n2021-08-05 04:03:56 INFO:     batch_size : 1\r\n2021-08-05 04:03:56 INFO:     cpu_num_threads : 100\r\n2021-08-05 04:03:56 INFO:     det_inference_model_dir : ./models/ppyolov2_r50vd_dcn_mainbody_v1.0_infer\r\n2021-08-05 04:03:56 INFO:     enable_benchmark : True\r\n2021-08-05 04:03:56 INFO:     enable_mkldnn : False\r\n2021-08-05 04:03:56 INFO:     enable_profile : False\r\n2021-08-05 04:03:56 INFO:     gpu_mem : 8000\r\n2021-08-05 04:03:56 INFO:     image_shape : [3, 640, 640]\r\n2021-08-05 04:03:56 INFO:     infer_imgs : ./recognition_demo_data_v1.0/test_product/daoxiangcunjinzhubing_6.jpg\r\n2021-08-05 04:03:56 INFO:     ir_optim : True\r\n2021-08-05 04:03:56 INFO:     labe_list : ['foreground']\r\n2021-08-05 04:03:56 INFO:     max_det_results : 5\r\n2021-08-05 04:03:56 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer\r\n2021-08-05 04:03:56 INFO:     rec_nms_thresold : 0.05\r\n2021-08-05 04:03:56 INFO:     threshold : 0.2\r\n2021-08-05 04:03:56 INFO:     use_fp16 : False\r\n2021-08-05 04:03:56 INFO:     use_gpu : True\r\n2021-08-05 04:03:56 INFO:     use_tensorrt : False\r\n2021-08-05 04:03:56 INFO: IndexProcess : \r\n2021-08-05 04:03:56 INFO:     dist_type : IP\r\n2021-08-05 04:03:56 INFO:     index_path : ./recognition_demo_data_v1.0/gallery_product/index\r\n2021-08-05 04:03:56 INFO:     return_k : 5\r\n2021-08-05 04:03:56 INFO:     score_thres : 0.5\r\n2021-08-05 04:03:56 INFO:     search_budget : 100\r\n2021-08-05 04:03:56 INFO: RecPostProcess : None\r\n2021-08-05 04:03:56 INFO: RecPreProcess : \r\n2021-08-05 04:03:56 INFO:     transform_ops : \r\n2021-08-05 04:03:56 INFO:         ResizeImage : \r\n2021-08-05 04:03:56 INFO:             size : 224\r\n2021-08-05 04:03:56 INFO:         NormalizeImage : \r\n2021-08-05 04:03:56 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-08-05 04:03:56 INFO:             order : \r\n2021-08-05 04:03:56 INFO:             scale : 0.00392157\r\n2021-08-05 04:03:56 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-08-05 04:03:56 INFO:         ToCHWImage : None\r\n---    Fused 0 subgraphs into layer_norm op.\r\n---    Fused 0 subgraphs into layer_norm op.\r\nInference: 11872.560739517212 ms per batch image\r\nresult: []\r\n2021-08-05 04:04:17 INFO: 200 GET /recognition (192.168.1.168) 21287.77ms\r\n",
        "state": "closed",
        "user": "davidwkx",
        "closed_by": "davidwkx",
        "created_at": "2021-08-05T04:06:02+00:00",
        "updated_at": "2021-08-05T08:32:39+00:00",
        "closed_at": "2021-08-05T08:32:39+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1113,
        "title": "运行swin-Transformer 报关于\"shape”的错误",
        "body": "  a. 具体操作系统，CentOS7\r\n  b. Python版本号，如Python3.7.11\r\n  c. CUDA/cuDNN版本， 如CUDA10.1/cuDNN 7.6.5\r\n \r\n运行命令 python /PaddleClas-release-2.2/paddleclas.py --infer_imgs=/test_images --model_name=SwinTransformer_large_patch4_window12_384_22kto1k  后报错：\r\n![1628147761(1)](https://user-images.githubusercontent.com/57475881/128307866-e1f81b51-d402-4a41-9290-15ee26023818.png)\r\n![1628147720(1)](https://user-images.githubusercontent.com/57475881/128307786-e113fc75-7e14-4095-abde-f0be2fcd30fc.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "Derek-Kun",
        "closed_by": "Derek-Kun",
        "created_at": "2021-08-05T07:16:15+00:00",
        "updated_at": "2021-08-05T11:33:35+00:00",
        "closed_at": "2021-08-05T11:33:35+00:00",
        "comments_count": [
            "Derek-Kun",
            "TingquanGao",
            "Derek-Kun"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1112,
        "title": "想问下，哪里可以找到Fixing the train-test resolution discrepancy实现？",
        "body": null,
        "state": "closed",
        "user": "zimenglan-sysu-512",
        "closed_by": "zimenglan-sysu-512",
        "created_at": "2021-08-05T06:27:00+00:00",
        "updated_at": "2021-08-25T07:35:45+00:00",
        "closed_at": "2021-08-25T07:35:45+00:00",
        "comments_count": [
            "cuicheng01",
            "zimenglan-sysu-512",
            "cuicheng01",
            "zimenglan-sysu-512"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1114,
        "title": "paddleclas识别1张图太慢",
        "body": "paddlepaddle2.1.1-cpu版  paddleclas\r\n用的模型和数据为：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/zh_CN/tutorials/quick_start_recognition.md中给出的\r\n\r\n识别一张图在：\r\n1、win10下（pc机）：\r\nInference: 2525.817632675171 ms per batch image\r\n实际在5-6秒\r\n2、在ubuntu16下（服务器4核16G  docker下）：\r\nInference: 4850.264310836792 ms per batch image\r\nresult: [{\"name\": \"\\u9999\\u5948\\u513f\\u5305\\u5305\", \"match_degree\": 0.51}]\r\n2021-08-05 08:27:04 INFO: 200 GET /recognition (110.184.114.40) 13709.90ms\r\n\r\n这个太慢了，需要调整啥吗",
        "state": "open",
        "user": "davidwkx",
        "closed_by": null,
        "created_at": "2021-08-05T08:38:27+00:00",
        "updated_at": "2024-02-26T04:29:12+00:00",
        "closed_at": null,
        "comments_count": [
            "Intsigstephon",
            "davidwkx",
            "Intsigstephon",
            "davidwkx",
            "Intsigstephon",
            "davidwkx"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1115,
        "title": "您好，我没有找到HS-ResNet相关的代码",
        "body": "请问开源了嘛",
        "state": "closed",
        "user": "beauty-snowman",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-06T10:44:56+00:00",
        "updated_at": "2022-03-16T04:08:24+00:00",
        "closed_at": "2022-03-16T04:08:22+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1125,
        "title": "训练模型只保存一个最优结果",
        "body": "如果训练的模型较大，而只对最后的模型感兴趣，不想保存中间的模型，是否可以做到？请高手指教，谢谢！",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "weisy11",
        "created_at": "2021-08-11T08:08:15+00:00",
        "updated_at": "2022-03-16T06:20:14+00:00",
        "closed_at": "2022-03-16T06:20:14+00:00",
        "comments_count": [
            "cuicheng01",
            "sinoboy168"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1126,
        "title": "few shot使用数据增广",
        "body": "如果测试few shot，怎么利用数据增广，只有开头文字提示当数据集小的时候使用数据增广有用。最终显示测试结果是few shot的吗？？？？ 谢谢",
        "state": "closed",
        "user": "ZengSuqing",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-11T09:46:53+00:00",
        "updated_at": "2022-03-16T04:08:25+00:00",
        "closed_at": "2022-03-16T04:08:23+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1128,
        "title": "ResNeXt101_32_16d_wsl",
        "body": "In '' ppcls\\arch\\backbone\\model_zoo\\resnext101_wsl.py \"，is the link of \"ResNeXt101_32x16d_wsl\" in MODEL_URLS wrong?\r\n\" https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/ResNeXt101_32x16d_wsl_pretrained.pdparams \" instead of \r\n\" https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/ResNeXt101_32x816_wsl_pretrained.pdparams\"",
        "state": "closed",
        "user": "Lyang-Never",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-11T14:40:08+00:00",
        "updated_at": "2022-03-16T04:08:26+00:00",
        "closed_at": "2022-03-16T04:08:24+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1131,
        "title": "window下python3.8.8根据readme指引执行，出现报错",
        "body": "window下python3.8.8根据readme指引执行，出现报错，已经重新编译了vector_search的库\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\n 2. 涉及的其他产品使用的版本号：paddlepaddle-gpu                   2.1.2\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows/\r\n  b. Python版本号，如Python3.8.8\r\n  c. CUDA/cuDNN版本， 如CUDA10.1\r\n 4. 完整的代码：没有改动\r\n 5. 执行以下命令报错：\r\npython python/predict_system.py -c configs/inference_product.yaml -o Global.use_gpu=False\r\n\r\npython python/predict_system.py -c configs/inference_product.yaml \r\n\r\n是不支持python3.8运行吗？paddle安装正确，使用paddle.utils.run_check()没有报错\r\n报错内容如下：\r\n2021-08-12 08:08:55 INFO:             scale : 0.00392157\r\n2021-08-12 08:08:55 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-08-12 08:08:55 INFO:         ToCHWImage : None\r\nTraceback (most recent call last):\r\n  File \"python/predict_system.py\", line 134, in <module>\r\n    main(config)\r\n  File \"python/predict_system.py\", line 125, in main\r\n    output = system_predictor.predict(img)\r\n  File \"python/predict_system.py\", line 89, in predict\r\n    results = self.det_predictor.predict(img)\r\n  File \"D:\\project2021\\PaddleClas\\deploy\\python\\predict_det.py\", line 120, in predict\r\n    self.paddle_predictor.run()\r\nOSError: In user code:\r\n\r\n    File \"tools/export_model.py\", line 105, in <module>\r\n      main()\r\n    File \"tools/export_model.py\", line 101, in main\r\n      run(FLAGS, cfg)\r\n    File \"tools/export_model.py\", line 69, in run\r\n      trainer.export(FLAGS.output_dir)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/engine/trainer.py\", line 460, in export\r\n      input_spec, static_model.forward.main_program,\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 534, in main_program\r\n      concrete_program = self.concrete_program\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 454, in concrete_program\r\n      return self.concrete_program_specify_input_spec(input_spec=None)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n      *desired_input_spec)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n      class_instance=cache_key.class_instance)\r\n    File \"<decorator-gen-65>\", line 2, in from_func_spec\r\n\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 40, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 652, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/paddle/temp/tmp63eoqh83.py\", line 27, in forward\r\n      false_fn_1, (), (), (out,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/meta_arch.py\", line 29, in forward\r\n      out = self.get_pred()\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/yolo.py\", line 75, in get_pred\r\n      bbox_pred, bbox_num = self._forward()\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/yolo.py\", line 59, in _forward\r\n      body_feats = self.backbone(self.inputs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpdhlfqusi.py\", line 41, in forward\r\n      for_loop_condition_0, for_loop_body_0, [idx, x, __for_loop_var_index_0]\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 577, in forward\r\n      x = stage(x)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpo98hbbkb.py\", line 19, in forward\r\n      for_loop_body_1, [__for_loop_var_index_1, block_out])\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 427, in forward\r\n      block_out = block(block_out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 365, in forward\r\n      out = self.branch2b(out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpmldmt48g.py\", line 31, in forward\r\n      'sync_bn'], true_fn_8, false_fn_8, (out,), (out,), (out,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 133, in forward\r\n      out = self.norm(out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/nn.py\", line 1389, in forward\r\n      type=\"batch_norm\", inputs=inputs, outputs=outputs, attrs=attrs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layer_object_helper.py\", line 52, in append_op\r\n      stop_gradient=stop_gradient)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3232, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2312, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    ExternalError:  Cudnn error, CUDNN_STATUS_BAD_PARAM  (at C:/home/workspace/Paddle_release3/paddle/fluid/operators/batch_norm_op.cu:372)\r\n      [operator < batch_norm > error]\r\n\r\n![image](https://user-images.githubusercontent.com/40531744/129119424-868a911c-a57f-47ac-adab-b970391f1724.png)\r\n![image](https://user-images.githubusercontent.com/40531744/129119425-7d1d599a-76cb-411f-affc-934a96784c6f.png)\r\n![image](https://user-images.githubusercontent.com/40531744/129119430-64218126-650a-468b-ae44-954e83c91a90.png)\r\n\r\n\r\n\r\n",
        "state": "open",
        "user": "ZZHHogan",
        "closed_by": null,
        "created_at": "2021-08-12T00:14:45+00:00",
        "updated_at": "2024-02-26T04:29:11+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "littletomatodonkey",
            "ZZHHogan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1133,
        "title": "主体检测使用ppyolo训练的模型会报错",
        "body": "我将inference_product.yaml钟的det_inference_model_dir替换为ppyolo_r50vd_dcn_1x_coco模型，则会报错：\r\n    InvalidArgumentError: The 2-th dimension of input[0] and input[1] is expected to be equal.But received input[0]'s shape = [1, 2048, 20, 20], input[1]'s shape = [1, 1, 19, 19].\r\n      [Hint: Expected inputs_dims[0][j] == inputs_dims[i][j], but received inputs_dims[0][j]:20 != inputs_dims[i][j]:19.] (at D:\\v2.0.1\\paddle\\paddle/fluid/operators/concat_op.h:63)\r\n      [operator < concat > error]\r\n\r\n请教一下我改如何来调整配置参数？",
        "state": "closed",
        "user": "freefoxcm",
        "closed_by": "freefoxcm",
        "created_at": "2021-08-12T03:20:33+00:00",
        "updated_at": "2021-08-13T00:55:12+00:00",
        "closed_at": "2021-08-13T00:55:12+00:00",
        "comments_count": [
            "cuicheng01",
            "freefoxcm",
            "cuicheng01",
            "freefoxcm",
            "cuicheng01",
            "freefoxcm",
            "cuicheng01",
            "freefoxcm"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1136,
        "title": "关于PaddleClas的产品中文名倒底是什么？",
        "body": "![image](https://user-images.githubusercontent.com/61859193/129189711-4d18bbb1-b521-4a28-8c2f-93d7f4a8f84c.png)\r\n\r\n![e45da05c91a411e8bc955648a0427a3d](https://user-images.githubusercontent.com/61859193/129189841-5c64597f-ec59-45e2-9359-6e1f2c72f0c2.jpg)\r\n？？？\r\n求解答\r\n",
        "state": "closed",
        "user": "jhcgt4869",
        "closed_by": "jhcgt4869",
        "created_at": "2021-08-12T11:32:27+00:00",
        "updated_at": "2021-08-12T15:52:34+00:00",
        "closed_at": "2021-08-12T15:52:34+00:00",
        "comments_count": [
            "weisy11",
            "jhcgt4869"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1137,
        "title": "如何调用infer的结果",
        "body": "各位大佬：默认的infer是打印结果，如果我想调用infer的结果，该怎么做啊？多谢！\r\n",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-12T12:22:45+00:00",
        "updated_at": "2022-03-16T04:08:27+00:00",
        "closed_at": "2022-03-16T04:08:25+00:00",
        "comments_count": [
            "cuicheng01",
            "sinoboy168",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1138,
        "title": "车辆的ReID模型",
        "body": "车辆的ReID模型预测有测试实例或者文档吗？",
        "state": "closed",
        "user": "freefoxcm",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-13T09:24:45+00:00",
        "updated_at": "2022-03-16T04:08:28+00:00",
        "closed_at": "2022-03-16T04:08:26+00:00",
        "comments_count": [
            "cuicheng01",
            "freefoxcm",
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1140,
        "title": "商品识别的，数据集，哪里下载？商品识别支持c++吗？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "xinsuinizhuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-14T09:45:02+00:00",
        "updated_at": "2022-03-16T04:08:36+00:00",
        "closed_at": "2022-03-16T04:08:27+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1139,
        "title": "模型库",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/zh_CN/ImageNet_models_cn.md\r\n这个页面介绍的有些模型在PaddleClas 没有，比如server models 里面的红色五角星的三个模型好像就没有？还有这三个模型都用红色五角星代码，具体哪个模型对应哪个五角星啊？谢谢指点！\r\n",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-14T00:33:12+00:00",
        "updated_at": "2022-03-16T04:08:29+00:00",
        "closed_at": "2022-03-16T04:08:27+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1142,
        "title": "官方可以在写一个可以更简单实现模型集成预测，更进一步节省竞赛玩家的时间呢？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "yuandongbo123",
        "closed_by": null,
        "created_at": "2021-08-15T12:45:34+00:00",
        "updated_at": "2024-02-26T04:29:10+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "yuandongbo123"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1143,
        "title": "实现K折交叉验证时报错ValueError: parameter name [weight] have be been used.",
        "body": "有个问题，如果我要实现k折交叉验证，也就是说对于一个选定的backbone，针对每折数据都要生成一个版本的模型，这样就会报错\r\n![image](https://user-images.githubusercontent.com/51417260/129480604-99a5fdad-91c0-43e7-a0ae-63af4d971e7f.png)\r\n\r\n好像是因为PaddleClas提供的官方模型不允许在一次训练中被多次实例化，具体是由ParamAttr这个类来控制\r\n但是如果我把这个注释上（该方法来自于Paddle论坛[动态图中老是报参数名字已存在怎么解决](https://aistudio.baidu.com/paddle/forum/topic/show/982197)），程序倒是能跑通了，但是生成的.pdopt文件没办法再次导入来继续训练（.pdparams倒是可以继续用），说是没办法设置参数，会报错\r\n![image](https://user-images.githubusercontent.com/51417260/129480728-d3776e6c-3ca6-4159-851b-29f8e9beaf7c.png)\r\n\r\n注释示例：\r\n![image](https://user-images.githubusercontent.com/51417260/129480707-c4d2f6a8-9c15-4844-a8ea-e933da328bb9.png)\r\n\r\n也就是说.pdopt的参数导入是需要借助ParamAttr的，我注释了ParamAttr所以导致参数设置失败\r\n\r\n请问怎么解决，怎么既能让我可以在一次训练中多次初始化PaddleClas提供的backbone，又可以使得得到的权重文件（.pdopt）可以再次导入从而继续训练呢？",
        "state": "closed",
        "user": "mookixiao",
        "closed_by": "mookixiao",
        "created_at": "2021-08-15T13:49:54+00:00",
        "updated_at": "2021-08-17T03:51:01+00:00",
        "closed_at": "2021-08-17T03:51:01+00:00",
        "comments_count": [
            "weisy11",
            "mookixiao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1144,
        "title": "windows10 index.dll 编译链接错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas 2,2\r\n 2. 训练环境信息：\r\n  Windows10 \r\n  Python3.7\r\n tdm64-gcc-10.3.0-2.exe\r\n 4. 使用mingw32-make编译\r\nxxx\\deploy\\vector_search>mingw32-make\r\ng++ -shared -fPIC interface.cc -o index.dll -std=c++11 -Ofast  -march=native -g -flto -funroll-loops -DOMP -fopenmp\r\ninterface.cc:1:0: warning: -fPIC ignored for target (all code is position independent)\r\n //MIT License\r\n ^\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nlto1.exe: warning: -fPIC ignored for target (all code is position independent)\r\nCannot export _ZNSt6vectorISt4pairIfjESaIS1_EE12emplace_backIJS1_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIfjESaIS1_EE19_M_emplace_back_auxIJRKS1_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIfjESaIS1_EE19_M_emplace_back_auxIJS1_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIifESaIS1_EE12emplace_backIJS1_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIifESaIS1_EE19_M_emplace_back_auxIJS1_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIjS_IS0_IifESaIS1_EEESaIS4_EE12emplace_backIJS4_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorISt4pairIjS_IS0_IifESaIS1_EEESaIS4_EE19_M_emplace_back_auxIJS4_EEEvDpOT_: symbol wrong type (4 vs 3)\r\nCannot export _ZNSt6vectorIjSaIjEE19_M_emplace_back_auxIJRKjEEEvDpOT_: symbol wrong type (4 vs 3)\r\ncollect2.exe: error: ld returned 1 exit status\r\nmingw32-make: *** [Makefile:12: index] Error 1",
        "state": "closed",
        "user": "xinsuinizhuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-15T15:09:41+00:00",
        "updated_at": "2022-03-16T04:08:37+00:00",
        "closed_at": "2022-03-16T04:08:29+00:00",
        "comments_count": [
            "weisy11",
            "JiaXiao243",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1145,
        "title": "PaddleClas模型加载预训练权重没有考虑infer函数",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n版本号：PaddleClas release/2.2\r\n只使用paddle库，无其他依赖\r\nMacOS, python 3.7, CPU测试\r\n代码修改了配置文件 ppcls/config/quick_start/Mobilev3_large_x1_0.yaml\r\n\r\n这一版的paddleClas的infer.py没有加载checkpoint的功能，所以导致测试基本没效果，看下面这个例子\r\n例子中 0是墨镜， 1是人， 2是卡通， 3是面罩\r\n\r\n<img width=\"959\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19630616/129512660-921d7058-7f59-4e86-ac30-58468c853560.png\">\r\n\r\n原因是因为，新版的trainer函数在读取checkpoint的时候，并不是在__init__读的，而是跑到train函数读checkpoint。但是infer却忘了读取checkpoint，这直接导致模型用初始化权重去做测试。\r\n\r\n我处理了一下这个问题，解决后再看一下同样的输入给出的结果\r\n<img width=\"921\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19630616/129512993-3f1f4e12-d4a2-4ed6-9277-ba6ae18402d3.png\">\r\n\r\n如果你们需要我PR的话我可以把改好的代码PR上来 @cuicheng01 \r\n",
        "state": "closed",
        "user": "Cli98",
        "closed_by": "Cli98",
        "created_at": "2021-08-16T04:57:36+00:00",
        "updated_at": "2021-09-14T08:00:43+00:00",
        "closed_at": "2021-08-16T15:40:36+00:00",
        "comments_count": [
            "cuicheng01",
            "Cli98"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1146,
        "title": "有么有paddleClas模型转onnx，然后使用onnxruntime推理的？想把商品检测转换onnx，来推理？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "xinsuinizhuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-16T07:51:34+00:00",
        "updated_at": "2022-03-16T04:08:37+00:00",
        "closed_at": "2022-03-16T04:08:29+00:00",
        "comments_count": [
            "xinsuinizhuan",
            "xinsuinizhuan",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1147,
        "title": "商品识别的类别文件时哪个？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "xinsuinizhuan",
        "closed_by": "weisy11",
        "created_at": "2021-08-16T15:56:25+00:00",
        "updated_at": "2021-09-06T06:51:10+00:00",
        "closed_at": "2021-09-06T06:51:10+00:00",
        "comments_count": [
            "weisy11",
            "xinsuinizhuan",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1153,
        "title": "ResizeImage和CropImage",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2\r\n 2. 环境是aistudio的paddle2.1.0在线环境\r\n 3. 在对yaml进行图像大小的预处理时，ResizeImage和CropImage必须配套使用嘛？我只使用ResizeImage将尺寸改为224会报错，再加上一个CropImage224就没有报错了，这是为什么呢？",
        "state": "closed",
        "user": "ITerydh",
        "closed_by": "Intsigstephon",
        "created_at": "2021-08-18T09:08:32+00:00",
        "updated_at": "2021-09-06T07:33:00+00:00",
        "closed_at": "2021-09-06T07:33:00+00:00",
        "comments_count": [
            "Intsigstephon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1149,
        "title": "ERROR: Unexpected segmentation fault encountered in DataLoader workers. ",
        "body": "ERROR: Unexpected segmentation fault encountered in DataLoader workers. ",
        "state": "closed",
        "user": "youngstu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-17T14:41:04+00:00",
        "updated_at": "2022-03-16T04:09:11+00:00",
        "closed_at": "2022-03-16T04:08:31+00:00",
        "comments_count": [
            "youngstu",
            "luckysheep861",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1155,
        "title": "Loss",
        "body": "在哪可以找到loss文件夹里面xxxloss.py文件的详细介绍呢\r\n",
        "state": "closed",
        "user": "ITerydh",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-18T09:50:18+00:00",
        "updated_at": "2022-03-16T04:08:37+00:00",
        "closed_at": "2022-03-16T04:08:31+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1156,
        "title": "mixup在哪里配置use_mix",
        "body": "mixup在哪里配置use_mix？",
        "state": "closed",
        "user": "youngstu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-18T13:07:51+00:00",
        "updated_at": "2023-05-30T09:16:28+00:00",
        "closed_at": "2022-03-16T04:08:32+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]",
            "youwei2567"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1157,
        "title": "mixup 训练报错",
        "body": "```\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    trainer.train()\r\n  File \"/home/yangshaoxiong/shaoxiong/handpp_work/cls_work/work_exps/v3_0_2_ppcls_shufflenetV2_x1_0_reso112_exp_mixup/ppcls/engine/trainer.py\", line 229, in train\r\n    metric_dict = self.train_metric_func(out, batch[-1])\r\n  File \"/home/yangshaoxiong/shaoxiong/handpp_work/cls_work/work_exps/v3_0_2_ppcls_shufflenetV2_x1_0_reso112_exp_mixup/ppcls/metric/__init__.py\", line 42, in __call__\r\n    metric_dict.update(metric_func(*args, **kwargs))\r\n  File \"/home/yangshaoxiong/.conda/envs/py36_paddle2.1/lib/python3.6/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/yangshaoxiong/shaoxiong/handpp_work/cls_work/work_exps/v3_0_2_ppcls_shufflenetV2_x1_0_reso112_exp_mixup/ppcls/metric/metrics.py\", line 35, in forward\r\n    x, label, k=k)\r\n  File \"/home/yangshaoxiong/.conda/envs/py36_paddle2.1/lib/python3.6/site-packages/paddle/metric/metrics.py\", line 802, in accuracy\r\n    total)\r\nValueError: (InvalidArgument) ShapeError: label's dimensions of AccuracyOp must be 2. But received label's dimensions = 1, label's shape = [256]\r\n  [Hint: Expected label_dim.size() == 2, but received label_dim.size():1 != 2:2.] (at /paddle/paddle/fluid/operators/metrics/accuracy_op.cc:62)\r\n  [operator < accuracy > error]\r\n```",
        "state": "closed",
        "user": "youngstu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-18T13:08:37+00:00",
        "updated_at": "2022-06-21T06:46:21+00:00",
        "closed_at": "2022-06-21T06:46:04+00:00",
        "comments_count": [
            "Intsigstephon",
            "youngstu",
            "Intsigstephon",
            "se7enXF",
            "weisy11",
            "se7enXF",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1162,
        "title": "使用release/2.0训练ResNet可以正常收敛，使用release/2.2不能收敛，均使用默认代码，只修改数据集位置",
        "body": "Linux Python 3.7 2卡2080Ti\r\n\r\nPlease NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 10.1, Runtime API Version: 10.1\r\ndevice: 0, cuDNN Version: 7.6.\r\n\r\nPaddleClas release/2.0 \r\nResNet50\r\n![image](https://user-images.githubusercontent.com/61503078/130322280-26a69943-efa7-4777-bc57-db8d50c8bdd4.png)\r\n\r\nPaddleClas release/2.2\r\nResNet50\r\n![image](https://user-images.githubusercontent.com/61503078/130322499-f025f564-51cc-4fe1-a7dd-0881b003cfba.png)\r\n\r\n",
        "state": "open",
        "user": "ZhangLi-CS",
        "closed_by": null,
        "created_at": "2021-08-21T12:58:33+00:00",
        "updated_at": "2021-08-30T03:49:06+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "ZhangLi-CS",
            "cuicheng01",
            "ZhangLi-CS",
            "cuicheng01",
            "ZhangLi-CS",
            "ZhangLi-CS",
            "cuicheng01",
            "ZhangLi-CS",
            "ZhangLi-CS",
            "ZhangLi-CS"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1165,
        "title": "Add LV-ViT model into the modelzoo?",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "Williamlizl",
        "closed_by": null,
        "created_at": "2021-08-23T07:30:37+00:00",
        "updated_at": "2024-02-26T04:29:09+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1163,
        "title": "Eval的准确率哪里可以看啊?",
        "body": "Infer或者Pridict是不是也可以看到？谢谢\r\n",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "weisy11",
        "created_at": "2021-08-22T01:58:37+00:00",
        "updated_at": "2021-09-06T06:50:55+00:00",
        "closed_at": "2021-09-06T06:50:55+00:00",
        "comments_count": [
            "sinoboy168",
            "weisy11",
            "sinoboy168",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1167,
        "title": "paddleCls模型导出后预测无法和PadddleCls inference对齐",
        "body": "问题描述：\r\n\r\n使用paddleCls_shufflenetV2_x1_0 结构训练的分类模型，使用export_model.py导出后使用paddle静态图预测，预测结果错误，且无法和PaddleCls提供的infer.py 对齐\r\n",
        "state": "closed",
        "user": "youngstu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-23T14:02:31+00:00",
        "updated_at": "2022-03-16T04:08:37+00:00",
        "closed_at": "2022-03-16T04:08:33+00:00",
        "comments_count": [
            "youngstu",
            "cuicheng01",
            "youngstu",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1170,
        "title": "增大batch后Segmentation fault",
        "body": " 1. PaddleClas release/2.2\r\n 2. 涉及的其他产品使用的版本号：null\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Linux，显卡：RTX titanV（24G显存）\r\n  b. Python版本号，Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 8.0\r\n 4. 错误信息：\r\n模型：ResNet50_vd_ssld（inputsize=224，batchsize=32 训练正常）\r\n修改size224 to 384，batchsize升高至32，train报错：\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1629788153 (unix time) try \"date -d @1629788153\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 33489 (TID 0x7fd76127a740) from PID 0 ***]\r\n\r\nSegmentation fault (core dumped)\r\n\r\n**同时显存不释放，需要手动kill PID**\r\n\r\n降低batchSize至8后，训练正常。",
        "state": "closed",
        "user": "ShawnXsw",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-24T07:09:40+00:00",
        "updated_at": "2025-05-15T09:27:46+00:00",
        "closed_at": "2022-03-16T04:08:34+00:00",
        "comments_count": [
            "ShawnXsw",
            "cuicheng01",
            "paddle-bot-old[bot]",
            "54wb",
            "Totoro-wen"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1171,
        "title": "分类雨滴大小用哪个模型好点？",
        "body": "我的应用场景是预测图片里的状态，类似一张室外照片，分类判断是大雨还是小雨。这种场合下，应该选择哪种模型比较合适，谢谢！\r\n",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-24T07:38:01+00:00",
        "updated_at": "2022-03-16T04:08:37+00:00",
        "closed_at": "2022-03-16T04:08:35+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1172,
        "title": "麻烦把paddleClas每个版本对应的paddle版本写上啊，大哥",
        "body": "如题。",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-24T09:13:01+00:00",
        "updated_at": "2022-03-16T04:09:11+00:00",
        "closed_at": "2022-03-16T04:08:36+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1175,
        "title": "PaddleClas 的EfficientNet只有B0吗？",
        "body": "如题，谢谢！\r\n",
        "state": "closed",
        "user": "sinoboy168",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-25T05:48:35+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:37+00:00",
        "comments_count": [
            "cuicheng01",
            "sinoboy168",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1177,
        "title": "请问ppcls支持3D数据集分类吗？",
        "body": "请问ppcls支持3D数据集分类吗？\r\n比如读入MRI肿瘤的nii文件之后对其进行分类？\r\n谢谢！",
        "state": "closed",
        "user": "zhongqiu1245",
        "closed_by": "zhongqiu1245",
        "created_at": "2021-08-25T13:33:18+00:00",
        "updated_at": "2021-08-29T00:51:18+00:00",
        "closed_at": "2021-08-29T00:51:18+00:00",
        "comments_count": [
            "cuicheng01",
            "zhongqiu1245"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1178,
        "title": "部分超链接404",
        "body": "文档地址：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/en/tutorials/getting_started_en.md\r\n\r\n![image](https://user-images.githubusercontent.com/61859193/130821680-ad0d93f5-70db-487e-8e53-0c4389d7191f.png)\r\n\r\n\r\n上面超链接地址为：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/en/tutorials/config_en.md\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/61859193/130821783-8e42439b-3430-472c-a826-d12447aa0f65.png)\r\n\r\n希望尽快修复问题",
        "state": "closed",
        "user": "jhcgt4869",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-25T15:43:07+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:37+00:00",
        "comments_count": [
            "jhcgt4869",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1180,
        "title": "小样本带查询集和支持集的图片分类有例子吗？",
        "body": "以前接触的图片分类，训练集和测试集中的类别是相同的，模型训练完在测试集上运行就能得到类别\r\n但是这种有查询集和支持集的不一样，测试集中的类别可能在训练集中没有\r\npaddlecls有这类问题的解决方案吗？",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-08-26T02:01:27+00:00",
        "updated_at": "2021-09-02T14:41:37+00:00",
        "closed_at": "2021-09-02T14:41:37+00:00",
        "comments_count": [
            "cuicheng01",
            "bbbxixixixi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1188,
        "title": "classNum和batchsize相等时,labelsmooth报错",
        "body": "\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， CUDA10.2/cuDNN 8.0\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    trainer.train()\r\n  File \"/root/python/PaddleClas/ppcls/engine/trainer.py\", line 218, in train\r\n    loss_dict = self.train_loss_func(out, batch[1:])\r\n  File \"/root/python/PaddleClas/ppcls/loss/__init__.py\", line 45, in __call__\r\n    loss = loss_func(input, batch)\r\n  File \"/root/python/PaddleClas/ppcls/loss/celoss.py\", line 71, in __call__\r\n    loss1 = super().forward(input, target1)[\"CELoss\"]\r\n  File \"/root/python/PaddleClas/ppcls/loss/celoss.py\", line 45, in forward\r\n    label = self._labelsmoothing(label, class_num)\r\n  File \"/root/python/PaddleClas/ppcls/loss/celoss.py\", line 36, in _labelsmoothing\r\n    soft_target = F.label_smooth(one_hot_target, epsilon=self.epsilon)\r\n  File \"/root/miniconda3/envs/paddle_cls/lib/python3.7/site-packages/paddle/nn/functional/common.py\", line 1547, in label_smooth\r\n    float(epsilon))\r\nRuntimeError: (NotFound) Operator label_smooth does not have kernel for data_type[int64_t]:data_layout[ANY_LAYOUT]:place[CUDAPlace(0)]:library_type[PLAIN].\r\n  [Hint: Expected kernel_iter != kernels.end(), but received kernel_iter == kernels.end().] (at /paddle/paddle/fluid/imperative/prepared_operator.cc:135)\r\n  [operator < label_smooth > error]\r\n\r\n",
        "state": "closed",
        "user": "ShawnXsw",
        "closed_by": "ShawnXsw",
        "created_at": "2021-08-28T02:43:53+00:00",
        "updated_at": "2021-09-08T01:15:16+00:00",
        "closed_at": "2021-09-08T01:15:16+00:00",
        "comments_count": [
            "littletomatodonkey",
            "ShawnXsw",
            "littletomatodonkey",
            "ShawnXsw"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1189,
        "title": "PaddleClas文档过期",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\n PaddlePaddle: 2.1.2\r\nPaddleClas就是 github上的release/2.2\r\n\r\n2. 训练环境信息：\r\n  a. 具体操作系统，Ubuntu 20.04\r\n  b. Python版本号，如Python3.8.8\r\n  c. CUDA/cuDNN版本， CUDA11.2\r\n\r\n根据最新的[PaddleClas文档](https://paddleclas.readthedocs.io/zh_CN/latest/tutorials/quick_start.html), 在安装完一切需求后,试图根据教程下载预训练模型,如下\r\n![image](https://user-images.githubusercontent.com/5151146/131216916-e425e713-b25b-4fff-b302-ead63f49e22f.png)\r\n\r\n但是发现PaddleClas的项目种根本就没有`download.py`这个文件\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/tree/release/2.2/tools\r\n![image](https://user-images.githubusercontent.com/5151146/131216968-1cc36fcc-103c-45fb-8362-90635fae7a20.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "franva",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-08-28T11:54:23+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:38+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1190,
        "title": "下载的预训练模型没有pdmodel, pdparam",
        "body": "![image](https://user-images.githubusercontent.com/5151146/131217066-b5ebbe4e-68cb-420a-ad91-8e63f5174a6c.png)\r\n\r\n模型地址:\r\nhttps://paddle-imagenet-models-name.bj.bcebos.com/MobileNetV3_small_x1_0_pretrained.tar",
        "state": "closed",
        "user": "franva",
        "closed_by": "franva",
        "created_at": "2021-08-28T11:58:16+00:00",
        "updated_at": "2021-08-30T14:31:30+00:00",
        "closed_at": "2021-08-30T14:31:30+00:00",
        "comments_count": [
            "RainFrost1",
            "franva"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1196,
        "title": "未知类别的图像识别，运行异常",
        "body": "aistudio环境 paddlecls版本2.2\r\n照着https://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/zh_CN/tutorials/quick_start_recognition.md中的操作，报了以下的错误\r\n2021-08-27 15:24:33 INFO: ToCHWImage : None\r\n0%| | 0/400 [00:03<?, ?it/s]\r\nTraceback (most recent call last):\r\nFile \"/home/aistudio/PaddleClas-release-2.2/deploy/python/build_gallery.py\", line 101, in\r\nmain(config)\r\nFile \"/home/aistudio/PaddleClas-release-2.2/deploy/python/build_gallery.py\", line 94, in main\r\nsystem_builder = GalleryBuilder(config)\r\nFile \"/home/aistudio/PaddleClas-release-2.2/deploy/python/build_gallery.py\", line 61, in init\r\nself.build(config['IndexProcess'])\r\nFile \"/home/aistudio/PaddleClas-release-2.2/deploy/python/build_gallery.py\", line 81, in build\r\ngallery_features[i, :] = rec_feat\r\nValueError: could not broadcast input array from shape (120,) into shape (512,)\r\n\r\n配置文件如下\r\nGlobal:\r\n  rec_inference_model_dir: \"/home/aistudio/inference\"\r\n  batch_size: 1\r\n  use_gpu: True\r\n  enable_mkldnn: False\r\n  cpu_num_threads: 100\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nRecPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        size: 480\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.477, 0.484, 0.444]\r\n        std: [0.26, 0.254, 0.275]\r\n        order: ''\r\n    - ToCHWImage:\r\n\r\nRecPostProcess: null\r\n\r\n# indexing engine config\r\nIndexProcess:\r\n  index_path: \"/home/aistudio/data/index\"\r\n  image_root: \"/home/aistudio/data/train_all\"\r\n  data_file:  \"/home/aistudio/test_update_file.txt\"\r\n  append_index: False\r\n  delimiter: \"\\t\"\r\n  dist_type: \"IP\"\r\n  pq_size: 100\r\n  embedding_size: 512\r\n\r\n\r\n\r\n\r\n我原本的类型有120个，配置文件中的embedding_size是512，这两个需要匹配吗？embedding_size感觉应该是中间过程的特征维度，如果要匹配，为何不直接从原始的model中获取？\r\n",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "bbbxixixixi",
        "created_at": "2021-09-01T17:30:58+00:00",
        "updated_at": "2021-09-02T15:05:50+00:00",
        "closed_at": "2021-09-02T15:05:50+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1195,
        "title": "图像检索度量学习模型训练问题：",
        "body": "\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Linux/Windows/\r\n  b. Python版本号，Python3.7\r\n  c. CUDA/cuDNN版本， CUDA10.2/cuDNN 7.6.5\r\n **4. 问题1：win10下训练出现下面错误，配置文件信息如下：**\r\n[2021/09/01 20:44:31] root INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2021/09/01 20:44:31] root INFO: Arch :\r\n[2021/09/01 20:44:31] root INFO:     Backbone :\r\n[2021/09/01 20:44:31] root INFO:         name : MobileNetV1\r\n[2021/09/01 20:44:31] root INFO:         pretrained : True\r\n[2021/09/01 20:44:31] root INFO:     BackboneStopLayer :\r\n[2021/09/01 20:44:31] root INFO:         name : flatten_0\r\n[2021/09/01 20:44:31] root INFO:     Head :\r\n[2021/09/01 20:44:31] root INFO:         class_num : 101\r\n[2021/09/01 20:44:31] root INFO:         embedding_size : 512\r\n[2021/09/01 20:44:31] root INFO:         margin : 0.15\r\n[2021/09/01 20:44:31] root INFO:         name : ArcMargin\r\n[2021/09/01 20:44:31] root INFO:         scale : 30\r\n[2021/09/01 20:44:31] root INFO:     Neck :\r\n[2021/09/01 20:44:31] root INFO:         class_num : 512\r\n[2021/09/01 20:44:31] root INFO:         embedding_size : 1024\r\n[2021/09/01 20:44:31] root INFO:         name : FC\r\n[2021/09/01 20:44:31] root INFO:     infer_add_softmax : False\r\n[2021/09/01 20:44:31] root INFO:     infer_output_key : features\r\n[2021/09/01 20:44:31] root INFO:     name : RecModel\r\n[2021/09/01 20:44:31] root INFO: DataLoader :\r\n[2021/09/01 20:44:31] root INFO:     Eval :\r\n[2021/09/01 20:44:31] root INFO:         Gallery :\r\n[2021/09/01 20:44:31] root INFO:             dataset :\r\n[2021/09/01 20:44:31] root INFO:                 cls_label_path : ./dataset/imagenet_dataset/val_list.txt\r\n[2021/09/01 20:44:31] root INFO:                 image_root : ./dataset/imagenet_dataset/\r\n[2021/09/01 20:44:31] root INFO:                 name : ImageNetDataset\r\n[2021/09/01 20:44:31] root INFO:                 transform_ops :\r\n[2021/09/01 20:44:31] root INFO:                     DecodeImage :\r\n[2021/09/01 20:44:31] root INFO:                         channel_first : False\r\n[2021/09/01 20:44:31] root INFO:                         to_rgb : True\r\n[2021/09/01 20:44:31] root INFO:                     ResizeImage :\r\n[2021/09/01 20:44:31] root INFO:                         size : 224\r\n[2021/09/01 20:44:31] root INFO:                     NormalizeImage :\r\n[2021/09/01 20:44:31] root INFO:                         mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:44:31] root INFO:                         order :\r\n[2021/09/01 20:44:31] root INFO:                         scale : 1.0/255.0\r\n[2021/09/01 20:44:31] root INFO:                         std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:44:31] root INFO:             loader :\r\n[2021/09/01 20:44:31] root INFO:                 num_workers : 0\r\n[2021/09/01 20:44:31] root INFO:                 use_shared_memory : True\r\n[2021/09/01 20:44:31] root INFO:             sampler :\r\n[2021/09/01 20:44:31] root INFO:                 batch_size : 2\r\n[2021/09/01 20:44:31] root INFO:                 drop_last : False\r\n[2021/09/01 20:44:31] root INFO:                 name : DistributedBatchSampler\r\n[2021/09/01 20:44:31] root INFO:                 shuffle : False\r\n[2021/09/01 20:44:31] root INFO:         Query :\r\n[2021/09/01 20:44:31] root INFO:             dataset :\r\n[2021/09/01 20:44:31] root INFO:                 cls_label_path : ./dataset/imagenet_dataset/val_list.txt\r\n[2021/09/01 20:44:31] root INFO:                 image_root : ./dataset/imagenet_dataset/\r\n[2021/09/01 20:44:31] root INFO:                 name : ImageNetDataset\r\n[2021/09/01 20:44:31] root INFO:                 transform_ops :\r\n[2021/09/01 20:44:31] root INFO:                     DecodeImage :\r\n[2021/09/01 20:44:31] root INFO:                         channel_first : False\r\n[2021/09/01 20:44:31] root INFO:                         to_rgb : True\r\n[2021/09/01 20:44:31] root INFO:                     ResizeImage :\r\n[2021/09/01 20:44:31] root INFO:                         size : 224\r\n[2021/09/01 20:44:31] root INFO:                     NormalizeImage :\r\n[2021/09/01 20:44:31] root INFO:                         mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:44:31] root INFO:                         order :\r\n[2021/09/01 20:44:31] root INFO:                         scale : 0.00392157\r\n[2021/09/01 20:44:31] root INFO:                         std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:44:31] root INFO:             loader :\r\n[2021/09/01 20:44:31] root INFO:                 num_workers : 0\r\n[2021/09/01 20:44:31] root INFO:                 use_shared_memory : True\r\n[2021/09/01 20:44:31] root INFO:             sampler :\r\n[2021/09/01 20:44:31] root INFO:                 batch_size : 2\r\n[2021/09/01 20:44:31] root INFO:                 drop_last : False\r\n[2021/09/01 20:44:31] root INFO:                 name : DistributedBatchSampler\r\n[2021/09/01 20:44:31] root INFO:                 shuffle : False\r\n[2021/09/01 20:44:31] root INFO:     Train :\r\n[2021/09/01 20:44:31] root INFO:         dataset :\r\n[2021/09/01 20:44:31] root INFO:             cls_label_path : ./dataset/imagenet_dataset/train_list.txt\r\n[2021/09/01 20:44:31] root INFO:             image_root : ./dataset/imagenet_dataset/\r\n[2021/09/01 20:44:31] root INFO:             name : ImageNetDataset\r\n[2021/09/01 20:44:31] root INFO:             transform_ops :\r\n[2021/09/01 20:44:31] root INFO:                 DecodeImage :\r\n[2021/09/01 20:44:31] root INFO:                     channel_first : False\r\n[2021/09/01 20:44:31] root INFO:                     to_rgb : True\r\n[2021/09/01 20:44:31] root INFO:                 ResizeImage :\r\n[2021/09/01 20:44:31] root INFO:                     size : 224\r\n[2021/09/01 20:44:31] root INFO:                 RandFlipImage :\r\n[2021/09/01 20:44:31] root INFO:                     flip_code : 1\r\n[2021/09/01 20:44:31] root INFO:                 NormalizeImage :\r\n[2021/09/01 20:44:31] root INFO:                     mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:44:31] root INFO:                     order :\r\n[2021/09/01 20:44:31] root INFO:                     scale : 0.00392157\r\n[2021/09/01 20:44:31] root INFO:                     std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:44:31] root INFO:         loader :\r\n[2021/09/01 20:44:31] root INFO:             num_workers : 0\r\n[2021/09/01 20:44:31] root INFO:             use_shared_memory : True\r\n[2021/09/01 20:44:31] root INFO:         sampler :\r\n[2021/09/01 20:44:31] root INFO:             batch_size : 2\r\n[2021/09/01 20:44:31] root INFO:             drop_last : False\r\n[2021/09/01 20:44:31] root INFO:             name : DistributedRandomIdentitySampler\r\n[2021/09/01 20:44:31] root INFO:             num_instances : 2\r\n[2021/09/01 20:44:31] root INFO:             shuffle : True\r\n[2021/09/01 20:44:31] root INFO: Global :\r\n[2021/09/01 20:44:31] root INFO:     checkpoints : None\r\n[2021/09/01 20:44:31] root INFO:     device : gpu\r\n[2021/09/01 20:44:31] root INFO:     epochs : 100\r\n[2021/09/01 20:44:31] root INFO:     eval_during_train : True\r\n[2021/09/01 20:44:31] root INFO:     eval_interval : 10\r\n[2021/09/01 20:44:31] root INFO:     eval_mode : retrieval\r\n[2021/09/01 20:44:31] root INFO:     image_shape : [3, 224, 224]\r\n[2021/09/01 20:44:31] root INFO:     output_dir : ./output/MobileNetV1/\r\n[2021/09/01 20:44:31] root INFO:     pretrained_model : None\r\n[2021/09/01 20:44:31] root INFO:     print_batch_step : 100\r\n[2021/09/01 20:44:31] root INFO:     save_inference_dir : ./inference\r\n[2021/09/01 20:44:31] root INFO:     save_interval : 10\r\n[2021/09/01 20:44:31] root INFO:     use_visualdl : False\r\n[2021/09/01 20:44:31] root INFO: Loss :\r\n[2021/09/01 20:44:31] root INFO:     Eval :\r\n[2021/09/01 20:44:31] root INFO:         CELoss :\r\n[2021/09/01 20:44:31] root INFO:             weight : 1.0\r\n[2021/09/01 20:44:31] root INFO:     Train :\r\n[2021/09/01 20:44:31] root INFO:         CELoss :\r\n[2021/09/01 20:44:31] root INFO:             weight : 1.0\r\n[2021/09/01 20:44:31] root INFO:         TripletLossV2 :\r\n[2021/09/01 20:44:31] root INFO:             margin : 0.5\r\n[2021/09/01 20:44:31] root INFO:             weight : 1.0\r\n[2021/09/01 20:44:31] root INFO: Metric :\r\n[2021/09/01 20:44:31] root INFO:     Eval :\r\n[2021/09/01 20:44:31] root INFO:         Recallk :\r\n[2021/09/01 20:44:31] root INFO:             topk : [1, 5]\r\n[2021/09/01 20:44:31] root INFO:         mAP :\r\n[2021/09/01 20:44:31] root INFO:     Train :\r\n[2021/09/01 20:44:31] root INFO:         TopkAcc :\r\n[2021/09/01 20:44:31] root INFO:             topk : [1, 5]\r\n[2021/09/01 20:44:31] root INFO: Optimizer :\r\n[2021/09/01 20:44:31] root INFO:     lr :\r\n[2021/09/01 20:44:31] root INFO:         gamma : 0.5\r\n[2021/09/01 20:44:31] root INFO:         last_epoch : -1\r\n[2021/09/01 20:44:31] root INFO:         learning_rate : 0.000625\r\n[2021/09/01 20:44:31] root INFO:         milestones : [40, 60, 80]\r\n[2021/09/01 20:44:31] root INFO:         name : MultiStepDecay\r\n[2021/09/01 20:44:31] root INFO:         verbose : False\r\n[2021/09/01 20:44:31] root INFO:     momentum : 0.9\r\n[2021/09/01 20:44:31] root INFO:     name : Momentum\r\n[2021/09/01 20:44:31] root INFO:     regularizer :\r\n[2021/09/01 20:44:31] root INFO:         coeff : 0.0005\r\n[2021/09/01 20:44:31] root INFO:         name : L2\r\nW0901 20:44:31.899075   672 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 6.1, Driver API Version: 11.1, Runtime API Version: 10.2\r\nW0901 20:44:31.908082   672 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\n[2021/09/01 20:44:34] root INFO: unique_endpoints {''}\r\n[2021/09/01 20:44:34] root INFO: Found C:\\Users\\22928/.paddleclas/weights\\MobileNetV1_pretrained.pdparams\r\n[2021/09/01 20:44:34] root INFO: train with paddle 2.1.1 and device CUDAPlace(0)\r\n{'CELoss': {'weight': 1.0}}\r\n{'TripletLossV2': {'weight': 1.0, 'margin': 0.5}}\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    trainer.train()\r\n  File \"E:\\PaddleClas2.2\\ppcls\\engine\\trainer.py\", line 174, in train\r\n    loss_dict = self.train_loss_func(out, batch[1])\r\n  File \"E:\\PaddleClas2.2\\ppcls\\loss\\__init__.py\", line 46, in __call__\r\n    loss = loss_func(input, batch)\r\n  File \"D:\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"E:\\PaddleClas2.2\\ppcls\\loss\\triplet.py\", line 66, in forward\r\n    paddle.masked_select(dist, is_neg), (bs, -1)),\r\n  File \"D:\\lib\\site-packages\\paddle\\tensor\\manipulation.py\", line 1575, in reshape\r\n    return paddle.fluid.layers.reshape(x=x, shape=shape, name=name)\r\n  File \"D:\\lib\\site-packages\\paddle\\fluid\\layers\\nn.py\", line 6142, in reshape\r\n    out, _ = core.ops.reshape2(x, None, 'shape', shape)\r\n**RuntimeError: (PreconditionNotMet) The Tensor's element number must be equal or greater than zero. The Tensor's shape is [2, -1] now\r\n  [Hint: Expected numel() >= 0, but received numel():-2 < 0:0.] (at C:\\home\\workspace\\Paddle_release2\\paddle\\fluid\\framework\\tensor.cc:59)\r\n  [operator < reshape2 > error]**\r\n\r\n**问题2：aistudio下训练没问题，但训练过程中无topk : [1, 5]输出：**\r\n2021/09/01 20:59:07] root INFO: Arch : \r\n[2021/09/01 20:59:07] root INFO:     Backbone : \r\n[2021/09/01 20:59:07] root INFO:         name : MobileNetV1\r\n[2021/09/01 20:59:07] root INFO:         pretrained : True\r\n[2021/09/01 20:59:07] root INFO:     BackboneStopLayer : \r\n[2021/09/01 20:59:07] root INFO:         name : flatten_0\r\n[2021/09/01 20:59:07] root INFO:     Head : \r\n[2021/09/01 20:59:07] root INFO:         class_num : 101\r\n[2021/09/01 20:59:07] root INFO:         embedding_size : 512\r\n[2021/09/01 20:59:07] root INFO:         margin : 0.15\r\n[2021/09/01 20:59:07] root INFO:         name : ArcMargin\r\n[2021/09/01 20:59:07] root INFO:         scale : 30\r\n[2021/09/01 20:59:07] root INFO:     Neck : \r\n[2021/09/01 20:59:07] root INFO:         class_num : 512\r\n[2021/09/01 20:59:07] root INFO:         embedding_size : 1024\r\n[2021/09/01 20:59:07] root INFO:         name : FC\r\n[2021/09/01 20:59:07] root INFO:     infer_add_softmax : False\r\n[2021/09/01 20:59:07] root INFO:     infer_output_key : features\r\n[2021/09/01 20:59:07] root INFO:     name : RecModel\r\n[2021/09/01 20:59:07] root INFO: DataLoader : \r\n[2021/09/01 20:59:07] root INFO:     Eval : \r\n[2021/09/01 20:59:07] root INFO:         Gallery : \r\n[2021/09/01 20:59:07] root INFO:             dataset : \r\n[2021/09/01 20:59:07] root INFO:                 cls_label_path : ./dataset/bbox_img/test_list.txt\r\n[2021/09/01 20:59:07] root INFO:                 image_root : ./dataset/bbox_img/\r\n[2021/09/01 20:59:07] root INFO:                 name : ImageNetDataset\r\n[2021/09/01 20:59:07] root INFO:                 transform_ops : \r\n[2021/09/01 20:59:07] root INFO:                     DecodeImage : \r\n[2021/09/01 20:59:07] root INFO:                         channel_first : False\r\n[2021/09/01 20:59:07] root INFO:                         to_rgb : True\r\n[2021/09/01 20:59:07] root INFO:                     ResizeImage : \r\n[2021/09/01 20:59:07] root INFO:                         size : 224\r\n[2021/09/01 20:59:07] root INFO:                     NormalizeImage : \r\n[2021/09/01 20:59:07] root INFO:                         mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:59:07] root INFO:                         order : \r\n[2021/09/01 20:59:07] root INFO:                         scale : 1.0/255.0\r\n[2021/09/01 20:59:07] root INFO:                         std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:59:07] root INFO:             loader : \r\n[2021/09/01 20:59:07] root INFO:                 num_workers : 2\r\n[2021/09/01 20:59:07] root INFO:                 use_shared_memory : False\r\n[2021/09/01 20:59:07] root INFO:             sampler : \r\n[2021/09/01 20:59:07] root INFO:                 batch_size : 64\r\n[2021/09/01 20:59:07] root INFO:                 drop_last : False\r\n[2021/09/01 20:59:07] root INFO:                 name : DistributedBatchSampler\r\n[2021/09/01 20:59:07] root INFO:                 shuffle : False\r\n[2021/09/01 20:59:07] root INFO:         Query : \r\n[2021/09/01 20:59:07] root INFO:             dataset : \r\n[2021/09/01 20:59:07] root INFO:                 cls_label_path : ./dataset/bbox_img/val_list.txt\r\n[2021/09/01 20:59:07] root INFO:                 image_root : ./dataset/bbox_img/\r\n[2021/09/01 20:59:07] root INFO:                 name : ImageNetDataset\r\n[2021/09/01 20:59:07] root INFO:                 transform_ops : \r\n[2021/09/01 20:59:07] root INFO:                     DecodeImage : \r\n[2021/09/01 20:59:07] root INFO:                         channel_first : False\r\n[2021/09/01 20:59:07] root INFO:                         to_rgb : True\r\n[2021/09/01 20:59:07] root INFO:                     ResizeImage : \r\n[2021/09/01 20:59:07] root INFO:                         size : 224\r\n[2021/09/01 20:59:07] root INFO:                     NormalizeImage : \r\n[2021/09/01 20:59:07] root INFO:                         mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:59:07] root INFO:                         order : \r\n[2021/09/01 20:59:07] root INFO:                         scale : 0.00392157\r\n[2021/09/01 20:59:07] root INFO:                         std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:59:07] root INFO:             loader : \r\n[2021/09/01 20:59:07] root INFO:                 num_workers : 2\r\n[2021/09/01 20:59:07] root INFO:                 use_shared_memory : False\r\n[2021/09/01 20:59:07] root INFO:             sampler : \r\n[2021/09/01 20:59:07] root INFO:                 batch_size : 64\r\n[2021/09/01 20:59:07] root INFO:                 drop_last : False\r\n[2021/09/01 20:59:07] root INFO:                 name : DistributedBatchSampler\r\n[2021/09/01 20:59:07] root INFO:                 shuffle : False\r\n[2021/09/01 20:59:07] root INFO:     Train : \r\n[2021/09/01 20:59:07] root INFO:         dataset : \r\n[2021/09/01 20:59:07] root INFO:             cls_label_path : ./dataset/bbox_img/train_list.txt\r\n[2021/09/01 20:59:07] root INFO:             image_root : ./dataset/bbox_img/\r\n[2021/09/01 20:59:07] root INFO:             name : ImageNetDataset\r\n[2021/09/01 20:59:07] root INFO:             transform_ops : \r\n[2021/09/01 20:59:07] root INFO:                 DecodeImage : \r\n[2021/09/01 20:59:07] root INFO:                     channel_first : False\r\n[2021/09/01 20:59:07] root INFO:                     to_rgb : True\r\n[2021/09/01 20:59:07] root INFO:                 ResizeImage : \r\n[2021/09/01 20:59:07] root INFO:                     size : 224\r\n[2021/09/01 20:59:07] root INFO:                 RandFlipImage : \r\n[2021/09/01 20:59:07] root INFO:                     flip_code : 1\r\n[2021/09/01 20:59:07] root INFO:                 NormalizeImage : \r\n[2021/09/01 20:59:07] root INFO:                     mean : [0.419, 0.443, 0.461]\r\n[2021/09/01 20:59:07] root INFO:                     order : \r\n[2021/09/01 20:59:07] root INFO:                     scale : 0.00392157\r\n[2021/09/01 20:59:07] root INFO:                     std : [0.102, 0.109, 0.117]\r\n[2021/09/01 20:59:07] root INFO:         loader : \r\n[2021/09/01 20:59:07] root INFO:             num_workers : 2\r\n[2021/09/01 20:59:07] root INFO:             use_shared_memory : False\r\n[2021/09/01 20:59:07] root INFO:         sampler : \r\n[2021/09/01 20:59:07] root INFO:             batch_size : 64\r\n[2021/09/01 20:59:07] root INFO:             drop_last : False\r\n[2021/09/01 20:59:07] root INFO:             name : DistributedRandomIdentitySampler\r\n[2021/09/01 20:59:07] root INFO:             num_instances : 2\r\n[2021/09/01 20:59:07] root INFO:             shuffle : True\r\n[2021/09/01 20:59:07] root INFO: Global : \r\n[2021/09/01 20:59:07] root INFO:     checkpoints : None\r\n[2021/09/01 20:59:07] root INFO:     device : gpu\r\n[2021/09/01 20:59:07] root INFO:     epochs : 100\r\n[2021/09/01 20:59:07] root INFO:     eval_during_train : True\r\n[2021/09/01 20:59:07] root INFO:     eval_interval : 10\r\n[2021/09/01 20:59:07] root INFO:     eval_mode : retrieval\r\n[2021/09/01 20:59:07] root INFO:     image_shape : [3, 224, 224]\r\n[2021/09/01 20:59:07] root INFO:     output_dir : ./output/MobileNetV1/\r\n[2021/09/01 20:59:07] root INFO:     pretrained_model : None\r\n[2021/09/01 20:59:07] root INFO:     print_batch_step : 100\r\n[2021/09/01 20:59:07] root INFO:     save_inference_dir : ./inference\r\n[2021/09/01 20:59:07] root INFO:     save_interval : 10\r\n[2021/09/01 20:59:07] root INFO:     use_visualdl : False\r\n[2021/09/01 20:59:07] root INFO: Loss : \r\n[2021/09/01 20:59:07] root INFO:     Eval : \r\n[2021/09/01 20:59:07] root INFO:         CELoss : \r\n[2021/09/01 20:59:07] root INFO:             weight : 1.0\r\n[2021/09/01 20:59:07] root INFO:     Train : \r\n[2021/09/01 20:59:07] root INFO:         CELoss : \r\n[2021/09/01 20:59:07] root INFO:             weight : 1.0\r\n[2021/09/01 20:59:07] root INFO:         TripletLossV2 : \r\n[2021/09/01 20:59:07] root INFO:             margin : 0.5\r\n[2021/09/01 20:59:07] root INFO:             weight : 1.0\r\n[2021/09/01 20:59:07] root INFO: Metric : \r\n[2021/09/01 20:59:07] root INFO:     Eval : \r\n[2021/09/01 20:59:07] root INFO:         Recallk : \r\n[2021/09/01 20:59:07] root INFO:             topk : [1, 5]\r\n[2021/09/01 20:59:07] root INFO:         mAP : \r\n**[2021/09/01 20:59:07] root INFO:     Train : \r\n[2021/09/01 20:59:07] root INFO:         TopkAcc : \r\n[2021/09/01 20:59:07] root INFO:             topk : [1, 5]**\r\n[2021/09/01 20:59:07] root INFO: Optimizer : \r\n[2021/09/01 20:59:07] root INFO:     lr : \r\n[2021/09/01 20:59:07] root INFO:         gamma : 0.5\r\n[2021/09/01 20:59:07] root INFO:         last_epoch : -1\r\n[2021/09/01 20:59:07] root INFO:         learning_rate : 0.01\r\n[2021/09/01 20:59:07] root INFO:         milestones : [40, 60, 80]\r\n[2021/09/01 20:59:07] root INFO:         name : MultiStepDecay\r\n[2021/09/01 20:59:07] root INFO:         verbose : False\r\n[2021/09/01 20:59:07] root INFO:     momentum : 0.9\r\n[2021/09/01 20:59:07] root INFO:     name : Momentum\r\n[2021/09/01 20:59:07] root INFO:     regularizer : \r\n[2021/09/01 20:59:07] root INFO:         coeff : 0.0005\r\n[2021/09/01 20:59:07] root INFO:         name : L2\r\nW0901 20:59:07.876523 16854 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.0, Runtime API Version: 10.1\r\nW0901 20:59:07.881187 16854 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\n[2021/09/01 20:59:12] root INFO: unique_endpoints {''}\r\n[2021/09/01 20:59:12] root INFO: Found /home/aistudio/.paddleclas/weights/MobileNetV1_pretrained.pdparams\r\n[2021/09/01 20:59:13] root INFO: train with paddle 2.1.2 and device CUDAPlace(0)\r\n{'CELoss': {'weight': 1.0}}\r\n{'TripletLossV2': {'weight': 1.0, 'margin': 0.5}}\r\n**[2021/09/01 20:59:13] root INFO: [Train][Epoch 1/100][Avg]\r\n[2021/09/01 20:59:13] root INFO: [Train][Epoch 2/100][Avg]\r\n[2021/09/01 20:59:13] root INFO: [Train][Epoch 3/100][Avg]\r\n[2021/09/01 20:59:14] root INFO: [Train][Epoch 4/100][Avg]\r\n[2021/09/01 20:59:14] root INFO: [Train][Epoch 5/100][Avg]\r\n[2021/09/01 20:59:14] root INFO: [Train][Epoch 6/100][Avg]\r\n[2021/09/01 20:59:15] root INFO: [Train][Epoch 7/100][Avg]\r\n[2021/09/01 20:59:15] root INFO: [Train][Epoch 8/100][Avg]\r\n[2021/09/01 20:59:15] root INFO: [Train][Epoch 9/100][Avg]\r\n[2021/09/01 20:59:15] root INFO: [Train][Epoch 10/100][Avg]**\r\n",
        "state": "closed",
        "user": "jackie8310",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-01T13:10:55+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:39+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1197,
        "title": "关于主体检测训练数据问题",
        "body": "请问训练主体检测 ，公开数据选择中的数据量是图片张数，还是标注框数，还是类别数？\r\n\r\n\r\nObjects365 | 170W | 6k | 通用场景 | \r\nCOCO2017 | 12W | 5k | 通用场景 | \r\niCartoonFace | 2k | 2k | 动漫人脸检测 | \r\nLogoDet-3k | 3k | 2k | Logo检测 | \r\nRPC | 3k | 3k | 商品检测 | \r\n",
        "state": "closed",
        "user": "xiaodongyichuan",
        "closed_by": "weisy11",
        "created_at": "2021-09-02T01:33:18+00:00",
        "updated_at": "2021-09-13T08:59:52+00:00",
        "closed_at": "2021-09-13T08:59:52+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1201,
        "title": "未知类别的图像分类有例子可以参考吗？前面几个issue提得有问题",
        "body": "这几天问了关于这方面的内容，由于问的是图像识别，造成了误解，现在照着识别的流程做下去报了异常\r\n我自己训练了一个120类的图像分类模型，现在测试集是其他未知的20个类别，这个情况要如何操作？\r\n\r\n照着识别的流程做下去，异常出在predict_system.py这一步\r\ninference_product.yaml的配置如下\r\nGlobal:\r\n  infer_imgs: \"/home/aistudio/data/samples_query/query/00001.jpg\"\r\n  det_inference_model_dir: \"/home/aistudio/inference\"\r\n  rec_inference_model_dir: \"/home/aistudio/inference\"\r\n  rec_nms_thresold: 0.05\r\n  \r\n  batch_size: 1\r\n  image_shape: [3, 480, 480]\r\n  threshold: 0.2\r\n  max_det_results: 5\r\n  labe_list:\r\n  - foreground\r\n\r\n  # inference engine config\r\n  use_gpu: True\r\n  enable_mkldnn: False\r\n  cpu_num_threads: 100\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nDetPreProcess:\r\n  transform_ops:\r\n    - DetResize:\r\n        interp: 2\r\n        keep_ratio: false\r\n        target_size: [480, 480]\r\n    - DetNormalizeImage:\r\n        is_scale: true\r\n        mean: [0.477, 0.484, 0.444]\r\n        std: [0.26, 0.254, 0.275]\r\n    - DetPermute: {}\r\nDetPostProcess: {}\r\n\r\nRecPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        size: 480\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.477, 0.484, 0.444]\r\n        std: [0.26, 0.254, 0.275]\r\n        order: ''\r\n    - ToCHWImage:\r\n\r\nRecPostProcess: null\r\n\r\n# indexing engine config\r\nIndexProcess:\r\n  index_path: \"/home/aistudio/data/index\"\r\n  search_budget: 100\r\n  return_k: 20\r\n  dist_type: \"IP\"\r\n  score_thres: 0.5\r\n\r\n\r\n异常如下\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/PaddleClas-release-2.2/deploy/python/predict_system.py\", line 134, in <module>\r\n    main(config)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/deploy/python/predict_system.py\", line 125, in main\r\n    output = system_predictor.predict(img)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/deploy/python/predict_system.py\", line 89, in predict\r\n    results = self.det_predictor.predict(img)\r\n  File \"/home/aistudio/PaddleClas-release-2.2/deploy/python/predict_det.py\", line 117, in predict\r\n    input_tensor.copy_from_cpu(inputs[input_names[i]])\r\nKeyError: 'x'",
        "state": "closed",
        "user": "bbbxixixixi",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-02T15:14:07+00:00",
        "updated_at": "2023-07-20T12:48:09+00:00",
        "closed_at": "2022-04-19T06:58:58+00:00",
        "comments_count": [
            "cuicheng01",
            "bbbxixixixi",
            "looooooooosee",
            "paddle-bot-old[bot]",
            "FrankMMMMMM"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1202,
        "title": "个体识别训练问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 3. 训练环境信息：\r\n  a. 操作系统，如Windows\r\n  b. Python版本号，如Python3.7.10\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/cuDNN 8.1.1\r\n\r\n我需要识别同一种鱼的不同个体，其中训练数据如下图所示，采用的车辆Reid配置文件，未对图像处理以及loss进行修改，只是修改了文件路径，其中训练集与测试集的划分按照图像检索任务进行划分，我一共有637个类，将前242类作为训练集，后395类作为测试集，训练可以正常进行，针对自己数据训练目标检测模型鱼特征提取模型后构建的图像识别系统在5条鱼的个体上进行测试，结果全部正确，然而将测试个体增加到50个，正确率却只有三分之一。\r\n![LYC001_second_train_5_1](https://user-images.githubusercontent.com/34644177/131942861-4d2a1bc1-6749-4bf9-b85f-a0bc51e6f361.png)\r\n![image](https://user-images.githubusercontent.com/34644177/131943324-c553868d-4006-4ba9-b2b2-20789245f896.png)\r\n针对上述测试个体数增加，正确率降低的问题，我想请问一下原因在哪里？\r\n我划分训练集与测试集的方法是否存在问题？对每一条个体按照一定比例划分训练集与测试集效果会更好？\r\n针对我这样的数据集，使用车辆Reid的配置文件是否正确，是否应该换用其他的配置文件？或者对loss做一定的修改？\r\n",
        "state": "open",
        "user": "lazyn1997",
        "closed_by": null,
        "created_at": "2021-09-03T03:01:19+00:00",
        "updated_at": "2024-02-26T04:29:08+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "lazyn1997",
            "weisy11",
            "lazyn1997",
            "cuicheng01",
            "lazyn1997",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1204,
        "title": "build检索库的时候， pq_size的大小设置，需要如何和我所要检索的类别数量与单个类别多张图片相适应",
        "body": "就是我看你们在初始化设置的时候pg_size=100,那假如我需要识别的类别有150类，其中有一类的图片达到100多张，其他类别也有几十张的，或者几张的。那么这个pg_size是否需要相应的变大，所以这里我想知道pg_size设置的依据是啥，设置它的作用是啥。希望能得到你们的帮助，谢谢🙏\r\n",
        "state": "closed",
        "user": "tangdong1994",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-03T15:16:09+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:41+00:00",
        "comments_count": [
            "weisy11",
            "weisy11",
            "tangdong1994",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1203,
        "title": "训练Reid模型类别数少时评价指标不变化，且看不到训练过程。",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 3. 训练环境信息：\r\n  a. 操作系统，如Windows\r\n  b. Python版本号，如Python3.7.10\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/cuDNN 8.1.1\r\n我需要识别同一种鱼的不同个体，其中训练数据如下图所示，\r\n![LYC001_second_train_5_1](https://user-images.githubusercontent.com/34644177/131944489-2ca6320d-6128-4ea2-a8c7-ba5973ea76d7.png)\r\n\r\n采用的车辆Reid配置文件，未对图像处理以及loss进行修改，只是修改了文件路径，其中训练集与测试集的划分按照图像检索任务进行划分，我一共有637个类，将前242类作为训练集，后395类作为测试集，训练可以正常进行，\r\n![image](https://user-images.githubusercontent.com/34644177/131944775-6a4a337d-ce52-42ee-93a9-f605ac5f9277.png)\r\n\r\n然而当类别数只有5个类或50个类时，评价指标不变化，且看不到训练过程，\r\n![1629980507](https://user-images.githubusercontent.com/34644177/131949589-fa4aa09f-713f-4898-aedc-1c65594803db.jpg)\r\n",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-03T04:14:20+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:40+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1215,
        "title": "在安装了trt-paddle后，出现如下错误",
        "body": "Paddle版本2.1.2 (import 时提示You are using Paddle compiled with TensorRT, but TensorRT dynamic library is not found. Ignore this if TensorRT is not needed.)\r\npython版本3.7\r\ncuda版本10.1\r\n\r\n请问在安装了trt-paddle后，还是提示缺少TRT动态库：\r\n这个动态库应该如何安装？\r\n\r\n    predictor = inference.create_predictor(config)\r\nRuntimeError: (Unavailable) Load tensorrt api getInferLibVersion failed\r\n  [Hint: p_getInferLibVersion should not be null.] (at /paddle/paddle/fluid/platform/dynload/tensorrt.h:114)\r\n\r\n_Originally posted by @rainmakerMa in https://github.com/PaddlePaddle/Paddle/issues/34689#issuecomment-895815006_",
        "state": "closed",
        "user": "luckysheep861",
        "closed_by": "luckysheep861",
        "created_at": "2021-09-09T08:14:47+00:00",
        "updated_at": "2021-09-10T09:11:51+00:00",
        "closed_at": "2021-09-10T09:11:51+00:00",
        "comments_count": [
            "weisy11",
            "luckysheep861"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1222,
        "title": "请问使用MobileNetV3_large_x1_0.yaml训练为什么学习率会从0开始，看教程学习率应该从设定的学习率递减。",
        "body": "训练过程信息：\r\n```\r\n[2021/09/13 15:57:57] root INFO: [Train][Epoch 1/20][Iter: 0/219]lr: 0.00000, CELoss: 1.56740, loss: 1.56740, top1: 0.09375, batch_cost: 6.75900s, reader_cost: 0.17553, ips: 4.73443 images/sec, eta: 8:13:24\r\n[2021/09/13 15:58:54] root INFO: [Train][Epoch 1/20][Iter: 10/219]lr: 0.00004, CELoss: 1.47576, loss: 1.47576, top1: 0.23864, batch_cost: 5.69719s, reader_cost: 0.00000, ips: 5.61680 images/sec, eta: 6:54:56\r\n[2021/09/13 15:59:50] root INFO: [Train][Epoch 1/20][Iter: 20/219]lr: 0.00007, CELoss: 1.47816, loss: 1.47816, top1: 0.25446, batch_cost: 5.63441s, reader_cost: 0.00006, ips: 5.67939 images/sec, eta: 6:49:26\r\n[2021/09/13 16:00:46] root INFO: [Train][Epoch 1/20][Iter: 30/219]lr: 0.00011, CELoss: 1.46293, loss: 1.46293, top1: 0.25504, batch_cost: 5.61815s, reader_cost: 0.00008, ips: 5.69582 images/sec, eta: 6:47:18\r\n[2021/09/13 16:01:42] root INFO: [Train][Epoch 1/20][Iter: 40/219]lr: 0.00014, CELoss: 1.46444, loss: 1.46444, top1: 0.25076, batch_cost: 5.61176s, reader_cost: 0.00014, ips: 5.70231 images/sec, eta: 6:45:55\r\n```\r\n【可以看到学习率lr从0.00000开始递增】\r\n\r\n配置文件信息：\r\n```\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: cpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 20\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n\r\n# model architecture\r\nArch:\r\n  name: MobileNetV3_large_x1_0\r\n  class_num: 4\r\n  pretrained: True\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.00375\r\n    warmup_epoch: 5\r\n    last_epoch: -1\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.000001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/faces/\r\n      cls_label_path: ./dataset/faces/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: 256\r\n        - RandCropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ./dataset/faces/\r\n      cls_label_path: ./dataset/faces/valid_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: ./dataset/faces/90/0.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: ppcls/utils/imagenet1k_label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1]\r\n\r\n```\r\n【设置的学习率为：0.00375】",
        "state": "closed",
        "user": "DeepGeGe",
        "closed_by": "DeepGeGe",
        "created_at": "2021-09-13T08:07:58+00:00",
        "updated_at": "2021-09-13T08:44:17+00:00",
        "closed_at": "2021-09-13T08:44:17+00:00",
        "comments_count": [
            "cuicheng01",
            "DeepGeGe"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1221,
        "title": "模型结构文件怎么下载？",
        "body": "请问怎么只有模型参数文件，模型结构文件怎么下载？",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-13T07:59:23+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:42+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1219,
        "title": "EfficientNet目前貌似只有B0版本，请问其他版本什么时候能上线？",
        "body": "EfficientNet目前貌似只有BX版本，请问有V2版本吗\r\n",
        "state": "closed",
        "user": "XYZ-916",
        "closed_by": "XYZ-916",
        "created_at": "2021-09-10T09:44:55+00:00",
        "updated_at": "2021-09-13T08:23:12+00:00",
        "closed_at": "2021-09-13T08:23:12+00:00",
        "comments_count": [
            "cuicheng01",
            "XYZ-916"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1226,
        "title": "动漫人物识别的测试集标签id没找到对应的标签",
        "body": "iCartoonFace中的test集的txt文件中第五列的label_id没找到对应的label\r\n![test_label](https://user-images.githubusercontent.com/61843600/133194411-8f85fcdb-8951-4fbf-9035-67c963753c57.png)\r\n这是train集的标签txt\r\n![train_info](https://user-images.githubusercontent.com/61843600/133194434-a2015060-dd0e-493f-890f-ae5fac3ef277.png)\r\n",
        "state": "closed",
        "user": "lhy2001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-14T04:21:35+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:43+00:00",
        "comments_count": [
            "lhy2001",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1227,
        "title": "ImageNet22k数据集去重",
        "body": "近期在处理ImageNet22k这个数据集，有一个22k数据集与imagenet1k的验证集存在重复图片的问题。\r\n请问你们可以公开重复图片的list吗？",
        "state": "closed",
        "user": "Ezra-Yu",
        "closed_by": "Ezra-Yu",
        "created_at": "2021-09-14T04:43:39+00:00",
        "updated_at": "2021-11-03T16:15:17+00:00",
        "closed_at": "2021-11-03T16:15:17+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1230,
        "title": "cpp推理结果不对",
        "body": "请问为什么我用cpp推理训练的图像分类模型结果完全不对呢？有什么预处理需要设置吗？",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-14T07:13:49+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:44+00:00",
        "comments_count": [
            "Dandelion111",
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1232,
        "title": "模型训练完，转inference后推理结果完全不对",
        "body": "请问为什么我用cpp推理训练的图像分类模型结果完全不对呢？有什么预处理需要设置吗？\r\n训练的时候，验证集的准确率都达到了0.97了，为啥转成inference之后，推理结果却完全不对",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2021-09-14T08:30:12+00:00",
        "updated_at": "2022-05-25T06:53:52+00:00",
        "closed_at": "2022-05-25T06:53:50+00:00",
        "comments_count": [
            "Lixin-Liu",
            "Dandelion111",
            "yhpwsid",
            "Dandelion111"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1231,
        "title": "eval时-o pretrained_model无法覆盖Global.pretrained_model",
        "body": "\r\n 1. PaddleClas版本以及PaddlePaddle版本： PaddleClas 使用2021年8月9日的commit：659e3d18bcd455cd35757b47e2f7b13ff4f14152 （没有找到在哪里查看version）和PaddlePaddle 2.1.2\r\n 2. 涉及的其他产品使用的版本号：无\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，如Python3.6\r\n  c. CUDA/cuDNN版本， 如CUDA10.1\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n使用官方eval实例：\r\n```\r\npython tools/eval.py \\\r\n    -c ./ppcls/configs/A/B.yaml \\\r\n    -o pretrained_model=$ckpt \\\r\n    -o load_static_weights=False\r\n```\r\n其并未从$ckpt中读取pretrain，而是从config文件中设置的读取。经检查，可能原因是，config文件中的pretrained_model定义在Global下，而eval中的overwrite没有Global。",
        "state": "closed",
        "user": "youqingxiaozhua",
        "closed_by": "TingquanGao",
        "created_at": "2021-09-14T07:49:35+00:00",
        "updated_at": "2021-09-22T11:35:51+00:00",
        "closed_at": "2021-09-22T11:35:51+00:00",
        "comments_count": [
            "youqingxiaozhua",
            "TingquanGao",
            "youqingxiaozhua",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1236,
        "title": "请问PaddleClas新发布的2.2版本支持多标签分类吗",
        "body": "\r\n请问PaddleClas新发布的2.2版本支持多标签分类吗",
        "state": "closed",
        "user": "JackDance",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-15T08:55:35+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:45+00:00",
        "comments_count": [
            "cuicheng01",
            "JackDance",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1244,
        "title": "飞腾环境导出模型报错",
        "body": "\n 1. PaddleClas版本以及PaddlePaddle版本：\n    PaddleClas release/2.2\n    PaddlePaddle 2.1.1\n 3. 训练环境信息：\n  a. 具体操作系统，Kylin V10，linux master 4.19.90-17.ky10.aarch64\n  b. Python版本号，Python3.7.4\n  c. CUDA/cuDNN版本， 无\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\ntools/export_model.py，未改动代码。\n局域网日志不方便导出，最终的异常是\nFile xxx/paddle/fluid/dygraph/dygraph_to_static/utils.py, line 446, in create_assign_node\n    assign_node = gast.Assign(targets=[targets], values=node)\nFile xxx/gast/gast.py, line 19, in create_node\n    format(Name, nbparam, len(Fields))\nAssertionError: Bad argument number for Assign: 2, expecting 3\n",
        "state": "open",
        "user": "umbraclet16",
        "closed_by": null,
        "created_at": "2021-09-16T12:35:38+00:00",
        "updated_at": "2024-02-26T04:29:06+00:00",
        "closed_at": null,
        "comments_count": [
            "umbraclet16"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1238,
        "title": "特征学习任务训练报错",
        "body": "\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 训练环境信息(AIStudio)：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA， CUDA10.1  cuDNN Version: 7.6\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nyaml: \r\n\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 10\r\n  epochs: 120\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n  eval_mode: classification\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone: \r\n    name: ResNet50_vd\r\n    pretrained: True\r\n  BackboneStopLayer:\r\n    name: flatten_0\r\n  Neck:\r\n    name: FC\r\n    embedding_size: 2048\r\n    class_num: 357\r\n  Head:\r\n    name: FC  \r\n    embedding_size: 512\r\n    class_num: 230278\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.0025\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00007\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/dataset/\r\n      cls_label_path: /home/aistudio/dataset/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 0.00392157\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 1\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /home/aistudio/dataset/\r\n      cls_label_path: /home/aistudio/dataset/test_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 0.00392157\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 1\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n错误信息：\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 30, in <module>\r\n    trainer = Trainer(config, mode=\"train\")\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/trainer.py\", line 75, in __init__\r\n    self.model = build_model(self.config[\"Arch\"])\r\n  File \"/home/aistudio/PaddleClas/ppcls/arch/__init__.py\", line 36, in build_model\r\n    arch = getattr(mod, model_type)(**config)\r\n  File \"/home/aistudio/PaddleClas/ppcls/arch/__init__.py\", line 58, in __init__\r\n    self.backbone = eval(backbone_name)(**backbone_config)\r\n  File \"/home/aistudio/PaddleClas/ppcls/arch/backbone/legendary_models/mobilenet_v1.py\", line 229, in MobileNetV1\r\n    model = MobileNet(scale=1.0, **kwargs)\r\n  File \"/home/aistudio/PaddleClas/ppcls/arch/backbone/legendary_models/mobilenet_v1.py\", line 114, in __init__\r\n    padding=1)\r\n  File \"/home/aistudio/PaddleClas/ppcls/arch/backbone/legendary_models/mobilenet_v1.py\", line 58, in __init__\r\n    bias_attr=False)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/conv.py\", line 646, in __init__\r\n    data_format=data_format)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/conv.py\", line 135, in __init__\r\n    default_initializer=_get_default_param_initializer())\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 412, in create_parameter\r\n    default_initializer)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layer_helper_base.py\", line 374, in create_parameter\r\n    **attr._to_kwargs(with_initializer=True))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2895, in create_parameter\r\n    initializer(param, self)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/initializer.py\", line 719, in __call__\r\n    stop_gradient=True)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2925, in append_op\r\n    kwargs.get(\"stop_gradient\", False))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/tracer.py\", line 45, in trace_op\r\n    not stop_gradient)\r\nOSError: (External)  Cuda error(2), out of memory.\r\n  [Advise: The API call failed because it was unable to allocate enough memory to perform the requested operation. ] (at /paddle/paddle/fluid/platform/stream/cuda_stream.cc:49)\r\n  [operator < gaussian_random > error]\r\n\r\n![image](https://user-images.githubusercontent.com/58030051/133478199-3a1a28ec-ee25-4d25-89a1-67391623cac6.png)\r\n\r\n数据集概览：\r\n![image](https://user-images.githubusercontent.com/58030051/133478827-d54fae9b-6673-4e94-b097-60b228c67a70.png)\r\n\r\n",
        "state": "closed",
        "user": "thomas-yanxin",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-15T17:12:36+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:45+00:00",
        "comments_count": [
            "Intsigstephon",
            "thomas-yanxin",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1240,
        "title": "请问度量学习怎么用",
        "body": "您好，我看到最新版本继承了度量学习模型，请问和paddlecv模型库里的度量学习有什么区别，怎样使用\r\n",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-16T07:31:17+00:00",
        "updated_at": "2022-05-24T06:56:10+00:00",
        "closed_at": "2022-05-24T06:56:07+00:00",
        "comments_count": [
            "Intsigstephon",
            "ChrisMengxl",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1247,
        "title": "特征学习相关问题",
        "body": "您好，根据识别模型的流程，所有图像会经过物体检测，提取检测出的物体特征然后进行检索，如果我想做一个基于整张图片的特征提取模型（兼顾前景和背景）而非只关注前景，有没有好的预训练模型，如何训练\r\n",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-18T03:12:17+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:47+00:00",
        "comments_count": [
            "weisy11",
            "kkpssr",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1259,
        "title": "【PaddlePaddle Hackathon】73、PaddleClas 图像识别创意应用",
        "body": "（此 ISSUE 为 PaddlePaddle Hackathon 活动的任务 ISSUE，更多详见[PaddlePaddle Hackathon](https://www.paddlepaddle.org.cn/PaddlePaddleHackathon)）\r\n\r\n【任务说明】\r\n\r\n- 任务标题：PaddleClas图像识别创意应用\r\n\r\n- 技术标签：图像识别\r\n\r\n- 任务难度：中等\r\n\r\n- 详细说明：图像识别是近几年来非常火热的方向，PaddleClas集成了常见的backbone、metric learning算法，可以快速搭建图像识别完整流程。现征集有创意的开发者，用PaddleClas开发有创意、有价值的图像识别应用。\r\n\r\n  要求：\r\n\r\n  1. 以PaddleClas为基础建立识别应用，可以直接选用合适的数据训练，也可以二次开发\r\n  2. 应用要有实用价值，最好可以解决企业生产、管理中的实际问题\r\n\r\n【提交内容】\r\n\r\n- 任务PR到 [PaddleClas](https://github.com/PaddlePaddle/PaddleClas)\r\n\r\n- 代码、模型、技术文档\r\n- 数据集及数据的采集、标注方法。如果不方便公开数据，可以给出少量样例\r\n\r\n【技术要求】\r\n\r\n- 了解PaddleClas使用\r\n\r\n若想要认领本次活动任务，请至 [PaddlePaddle Hackathon Pinned ISSUE](https://github.com/PaddlePaddle/Paddle/issues/35940) 完成任务 ISSUE 认领。\r\n\r\n活动官网：[PaddlePaddle Hackathon](https://www.paddlepaddle.org.cn/PaddlePaddleHackathon?fr=paddleclasg)",
        "state": "open",
        "user": "TCChenlong",
        "closed_by": null,
        "created_at": "2021-09-23T09:01:06+00:00",
        "updated_at": "2024-02-26T04:29:05+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": [
            "PaddlePaddle Hackathon"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1255,
        "title": "test_hubserving 和 predict_cls 在相同模型，相同图片下识别结果不同",
        "body": "首先感谢作者提供的 PaddleClas 套件，最近在通过 PaddleClas 的图像分类做人脸分类，完成后通过 hub serving 部署，但在部署后发现通过 test_hubserving 调用识别的结果和 predict_cls 不同。\r\n 1. PaddleClas版本：release/2.2\r\n 2. Paddle 版本：CPU 版 2.1 （附：训练使用 ai studio，为 GPU版2.1， cuDNN Version: 7.6.）\r\n 3. Python版本：3.8\r\n识别结果如下：\r\npredict_cls 识别结果为正确\r\n![image](https://user-images.githubusercontent.com/22209885/134464404-6019a371-2918-4ffe-9453-de25787632cd.png)\r\ntest_hubserving 识别结果为错误\r\n![image](https://user-images.githubusercontent.com/22209885/134464517-416f9cfc-018e-4728-b326-6769eec0b08e.png)\r\n\r\n",
        "state": "closed",
        "user": "MyAuntIsPost90s",
        "closed_by": "MyAuntIsPost90s",
        "created_at": "2021-09-23T06:43:41+00:00",
        "updated_at": "2021-10-18T09:43:20+00:00",
        "closed_at": "2021-10-18T09:43:19+00:00",
        "comments_count": [
            "TingquanGao",
            "MyAuntIsPost90s",
            "TingquanGao",
            "MyAuntIsPost90s"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1260,
        "title": "特征学习训练一个epoch没跑完就进入到下一个epoch",
        "body": "训练教程cub数据集没问题，但是换成自己数据时特征学习训练一个epoch没跑完就进入到下一个epoch，每个epoch应该是跑358次迭代，但是每次跑90次迭代就进入下一个epoch，不会报错最终也能在指定的epoch时终止训练，但是应该有问题，是因为数据量太大吗？训练数据和情况如下：\r\n![2021-09-24_8-56-40](https://user-images.githubusercontent.com/63723648/134603708-5b404a91-fecf-46e3-8431-49c3c0a7b6be.png)\r\n链接：https://pan.baidu.com/s/14lfw2vEBUeTJ6KUruKFe2A \r\n提取码：2yek \r\n",
        "state": "closed",
        "user": "wjrjsdx",
        "closed_by": "wjrjsdx",
        "created_at": "2021-09-24T01:18:13+00:00",
        "updated_at": "2024-08-19T01:26:57+00:00",
        "closed_at": "2021-10-08T00:33:10+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01",
            "KKKKKD821"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1262,
        "title": "SwinTransformer_small_patch4_window7_224好像没有在imagenet22k训练的pretrain模型？",
        "body": "您好，SwinTransformer_small_patch4_window7_224好像没有在imagenet22k训练的pretrain模型？\r\n我看SwinTransformer_base_patch4_window7_224是有的。",
        "state": "closed",
        "user": "IamMegatron2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-25T11:41:39+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:47+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1270,
        "title": "[论文复现赛]内存占用问题",
        "body": "### 环境\r\nAI Stuido 脚本任务 单机四卡\r\nPaddleClas v2.2.0\r\npaddle v2.1.2\r\nGPU Compute Capability: 7.0, Driver API Version: 10.1, Runtime API Version: 10.1\r\ncuDNN Version: 7.6\r\npython3.7\r\n\r\n### 问题概要\r\nPaddleClas内存占用高于参考项目。\r\n\r\n### 问题详情\r\n在复现No.7 MnasNet的过程中发现：\r\n在参考项目`https://github.com/1e100/mnasnet_trainer`中提到，\r\n训练用的硬件为4x NVIDIA GTX 1080ti。\r\n而我用同样的参数在4x V100上训练时，提示内存不足。\r\n之后把BatchSize从740降低到692后，就可以正常训练了。\r\n\r\n### 建议\r\n增加内存优化选项。\r\n比如，增加高速模式与省内存模式。\r\n\r\n- 高速模式下，以训练性能为主，适合硬件配置高，追求速度的场景。\r\n\r\n- 省内存模式下，以降低内存占用为主，适当牺牲性能，适合需要更大BatchSize，或者硬件配置较低的场景。\r\n",
        "state": "open",
        "user": "unseenme",
        "closed_by": null,
        "created_at": "2021-09-27T16:27:38+00:00",
        "updated_at": "2024-02-26T04:29:04+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1288,
        "title": "Sharing models through the Hugging Face Hub",
        "body": "Hi PadleClas team!\r\n\r\nWould you be interested in sharing [your models](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.2/docs/en/models/models_intro_en.md) in the [Hugging Face Hub](http://hf.co/models)? The Hub offers free hosting of over 25K models, and it would make your work more accessible and visible to the rest of the ML community.  We can help you set up a PaddlePaddle organization if it makes sense.\r\n\r\nSome of the benefits of sharing your models through the Hub would be:\r\n* wider reach of your work to the ecosystem\r\n* versioning, commit history and diffs\r\n* repos provide useful metadata about their tasks, languages, metrics, etc that make them discoverable\r\n* multiple features from TensorBoard visualizations, PapersWithCode integration, and more\r\n\r\nCreating the repos and adding new models should be a relatively straightforward process if you've used Git before. This is a [step-by-step guide](https://huggingface.co/docs/hub/adding-a-model) explaining the process in case you're interested. Please let us know if you would be interested and if you have any questions.\r\n\r\nHappy to hear your thoughts,\r\n**Omar and the Hugging Face team**\r\n\r\ncc @nateraw",
        "state": "closed",
        "user": "osanseviero",
        "closed_by": "weisy11",
        "created_at": "2021-10-08T14:04:16+00:00",
        "updated_at": "2021-11-15T03:30:32+00:00",
        "closed_at": "2021-11-15T03:30:32+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1291,
        "title": "cspdarknet series",
        "body": "- Is there a plan to support `cspdarknet` series ?",
        "state": "closed",
        "user": "lyuwenyu",
        "closed_by": "lyuwenyu",
        "created_at": "2021-10-09T09:07:21+00:00",
        "updated_at": "2021-10-09T09:08:05+00:00",
        "closed_at": "2021-10-09T09:08:05+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1276,
        "title": "支持从预训练模型转成onnx模型吗",
        "body": "训练后的文件有latest.pdopt、latest.pdparams、latest.pdstates，或别人提供的inference.pdiparams、inference.pdiparams.info、inference.pdmodel，是否支持从这些文件转成onnx模型\r\n\r\n版本信息：\r\nPaddleClas版本2.2以及PaddlePaddle版本gpu2.1.2",
        "state": "closed",
        "user": "bingo789",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-09-29T13:05:28+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:48+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1284,
        "title": "faq_2021_s2.md 文档存在错别字",
        "body": "如下图所示，红圈框选位置文字应为 _**与**_ ，望修改。\r\n![image](https://user-images.githubusercontent.com/34644177/136340387-41f16f97-02df-45a4-963b-864ff913cded.png)",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "lazyn1997",
        "created_at": "2021-10-07T07:38:23+00:00",
        "updated_at": "2021-10-08T02:10:30+00:00",
        "closed_at": "2021-10-08T02:10:30+00:00",
        "comments_count": [
            "Intsigstephon",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1280,
        "title": "PP-LCNet",
        "body": "您好，PP-LCNet的代码放在哪里，我没找到。在您的论文中提到了PicoDet，这在Paddledetection中具体是哪个模型？\r\n",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "qdd1234",
        "created_at": "2021-10-05T01:45:13+00:00",
        "updated_at": "2021-10-08T13:51:56+00:00",
        "closed_at": "2021-10-08T13:51:56+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1287,
        "title": "train list for imagenet",
        "body": "您好，对于imagenet的中类别想要和paddlecls提供的类别具体对应是怎么一个操作流程，因为我发现imagenet的标签是文件名而你们提供的label_list却是0,1,2.....999，就是这样的一个对应关系是怎么样的，谢谢\r\n",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "qdd1234",
        "created_at": "2021-10-08T14:01:16+00:00",
        "updated_at": "2021-10-18T09:13:02+00:00",
        "closed_at": "2021-10-18T00:33:41+00:00",
        "comments_count": [
            "Intsigstephon",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1302,
        "title": "模型部署 服务端部署以及whl 相关问题",
        "body": "1. PaddleClas   release/2.2  PaddlePaddle 2.1.0 cpu\r\n2. PaddleHub Serving \r\n3. Windows\r\n4. Python3.7\r\n\r\n使用模型预测\r\n python python/predict_cls.py -c configs/inference_cls.yaml  -o Global.use_gpu=False  -o Global.infer_imgs=../dataset/flowers102/bansi/0b2c136a6f7b3981ca058e6d8eee90e.jpg\r\n结果正确\r\n\r\n使用PaddleHub Serving  部署\r\n python hubserving/test_hubserving.py --server_url http://127.0.0.1:8866/predict/clas_system --image_file ../dataset/flowers102/bansi/0b2c136a6f7b3981ca058e6d8eee90e.jpg --batch_size 8\r\n出来的结果相差很大\r\n\r\n使用 whl包预测 按照教程 \r\n一直报错\r\nC:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\site-packages\\requests\\__init__.py:91: RequestsDependencyWarning: urllib3 (1.26.7) or chardet (3.0.4) doesn't match a supported version!\r\n  RequestsDependencyWarning)\r\nTraceback (most recent call last):\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\Scripts\\paddleclas.exe\\__main__.py\", line 4, in <module>\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\paddleclas\\__init__.py\", line 16, in <module>\r\n    from .paddleclas import PaddleClas\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\paddleclas\\paddleclas.py\", line 39, in <module>\r\n    from ppcls.arch.backbone import *\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\PaddleClas37\\lib\\paddleclas\\ppcls\\arch\\backbone\\__init__.py\", line 18, in <module>\r\n    from ppcls.arch.backbone.legendary_models.mobilenet_v1 import MobileNetV1_x0_25, MobileNetV1_x0_5, MobileNetV1_x0_75, MobileNetV1\r\nModuleNotFoundError: No module named 'ppcls.arch.backbone.legendary_models'\r\n\r\n",
        "state": "closed",
        "user": "guanzhao",
        "closed_by": "guanzhao",
        "created_at": "2021-10-12T16:30:25+00:00",
        "updated_at": "2021-10-18T07:04:21+00:00",
        "closed_at": "2021-10-18T07:04:21+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1292,
        "title": "AssertionError: the type of architecture(None) should be dict报错",
        "body": "问题出现过程描述：\r\nhttps://aistudio.baidu.com/aistudio/projectdetail/2300718?channelType=0&channel=0\r\n该项目按步骤执行到模型训练过程出现该问题\r\npython tools/train.py -c ./ppcls/configs/quick_start/ResNet50_vd.yaml -o Arch.pretrained=True\r\n\r\n系统环境：\r\n\r\nPaddle version: 2.1.3\r\nPaddle With CUDA: True\r\n\r\nOS: ubuntu 18.04\r\nPython version: 3.6.13\r\n\r\nCUDA version: 11.0.194\r\nBuild cuda_11.0_bu.TC445_37.28540450_0\r\ncuDNN version: 8.0.4\r\nNvidia driver version: 470.42.01\r\n\r\n报错信息：\r\nTraceback (most recent call last):\r\nFile \"tools/train.py\", line 118, in\r\nmain(args)\r\nFile \"tools/train.py\", line 56, in main\r\nconfig = get_config(args.config, overrides=args.override, show=True)\r\nFile \"/home/shanshan/PaddleClas/ppcls/utils/config.py\", line 196, in get_config\r\ncheck_config(config)\r\nFile \"/home/shanshan/PaddleClas/ppcls/utils/config.py\", line 106, in check_config\r\ncheck.check_architecture(architecture)\r\nFile \"/home/shanshan/PaddleClas/ppcls/utils/check.py\", line 65, in check_architecture\r\n(\"the type of architecture({}) should be dict\". format(architecture))\r\nAssertionError: the type of architecture(None) should be dict\r\n",
        "state": "closed",
        "user": "leezhao415",
        "closed_by": "weisy11",
        "created_at": "2021-10-11T03:38:30+00:00",
        "updated_at": "2021-11-15T03:30:56+00:00",
        "closed_at": "2021-11-15T03:30:56+00:00",
        "comments_count": [
            "RainFrost1",
            "RainFrost1"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1294,
        "title": "ssld系列预训练模型能转为静态图模型参数么(pdiparams)?",
        "body": "您好，我尝试将ssld系列模型转为静态图参数后提取特征，发现并无对应config?\r\n",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-10-11T08:52:22+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:49+00:00",
        "comments_count": [
            "kkpssr",
            "RainFrost1",
            "ajundo",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1303,
        "title": "帮忙解决一下报错",
        "body": "您好，我使用FP16训练后报如下的错误，这是什么原因？\r\n![image](https://user-images.githubusercontent.com/68497831/137061890-2c369dac-ab20-45ff-a76a-d9cc1b98cc55.png)\r\n配置文件信息如下，模型是我自己自创的，未使用FP16可以正常训练。\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  class_num: 1000\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 360\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  use_ema: True\r\n  ema_decay: 0.9999\r\n  # used for static mode and model export\r\n  image_shape: [3, 256, 256]\r\n  save_inference_dir: ./inference\r\n\r\nAMP:\r\n  scale_loss: 128.0\r\n  use_dynamic_loss_scaling: True\r\n  use_pure_fp16: &use_pure_fp16 True\r\n\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: MobileMLP_XS\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  multi_precision: *use_pure_fp16\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.8\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00003\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /home/kkk/ImageNet/train/train\r\n      cls_label_path: /home/kkk/PaddleClas/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 256\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n            output_fp16: *use_pure_fp16\r\n      batch_transform_ops:\r\n        - MixupOperator:\r\n            alpha: 0.2\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 128\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /home/kkk/ImageNet/val/val\r\n      cls_label_path: /home/kkk/PaddleClas/val.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 256\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n            output_fp16: *use_pure_fp16\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: docs/images/whl/demo.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 256\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: ppcls/utils/imagenet1k_label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "qdd1234",
        "created_at": "2021-10-13T03:25:40+00:00",
        "updated_at": "2021-10-16T02:31:29+00:00",
        "closed_at": "2021-10-16T02:31:29+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1310,
        "title": "MixUP",
        "body": "您好，我想问一下，为何我使用FP16训练的情况下无法使用MIxUp？是我配置文件的问题吗，可否给出一个可以在FP16下运行Mixup的源文件示例",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "qdd1234",
        "created_at": "2021-10-16T02:32:38+00:00",
        "updated_at": "2021-10-25T11:09:36+00:00",
        "closed_at": "2021-10-25T07:07:54+00:00",
        "comments_count": [
            "weisy11",
            "qdd1234",
            "TingquanGao",
            "qdd1234",
            "TingquanGao",
            "qdd1234",
            "TingquanGao",
            "qdd1234",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1317,
        "title": "新需求 ： 建议将混淆矩阵可视化在VIsualDL中输出",
        "body": "建议将混淆矩阵可视化在VIsualDL中输出，这样可以更方便分析。\r\n另外如果可以的话，ROC曲线等都可以在训练过程的eval阶段在visualDL中输出",
        "state": "closed",
        "user": "TimZhang001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-10-18T11:23:49+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:51+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1319,
        "title": "显存叠加",
        "body": "PaddleClas release2.2\r\n a. 操作系统Windows\r\n b. Python3.8\r\nvs2019+opencv3.4.6\r\n\r\n--------------paddle_inference : -----------------------\r\nWITH_MKL: ON\r\nWITH_MKLDNN: ON\r\nWITH_GPU: ON\r\nWITH_ROCM: OFF\r\nCUDA version: 11.0\r\nCUDNN version: v8.0\r\nCXX compiler version: 19.16.27045.0\r\nWITH_TENSORRT: ON\r\nTensorRT version: v7\r\n\r\n\r\n----------------config.txt:---------------------------\r\n# model load config\r\nuse_gpu  1\r\ngpu_id  0\r\ngpu_mem  4000\r\ncpu_math_library_num_threads  10\r\nuse_mkldnn 1\r\nuse_tensorrt 1\r\nuse_fp16 0\r\n\r\n# cls config\r\ncls_model_path  inferenceModel/xxxxModel/inference.pdmodel\r\ncls_params_path inferenceModel/xxxxModel/inference.pdiparams\r\nresize_short_size 256\r\ncrop_size 224\r\n\r\n问题：\r\n多线程导致显存持续增加，创建Classifier的线程与调用Classifier::Run的线程非一个线程时，显存会不断增加（显存泄漏？），只有退掉进程才能释放。同样问题PaddleDetection里未出现。\r\n下面是出现该现象的代码，断点查看classifier创建后及thread a运行结束后的显存情况，可以看出显存的增加。实际使用中Classifier很可能会主线程创建一次，Classifier::Run会在其他多个线程里调用非常多次，从而出现爆显存的情况。若没有办法避免，应在样例的main.cpp或Readme注释一下。\r\n\r\n代码改自C++编译的paddleclas的样例代码（需要改的地方加了//todo:）：\r\nint main(/*int argc, char **argv*/) {\r\n    //if (argc < 3) {\r\n    //    std::cerr << \"[ERROR] usage: \" << argv[0]\r\n    //        << \" configure_filepath image_path\\n\";\r\n    //    exit(1);\r\n    //}\r\n\r\n    static std::stringstream csvStream;\r\n\r\n    ClsConfig config(\"config.txt\");  //todo: add you config\r\n\r\n    config.PrintConfigInfo();\r\n\r\n    std::string path(\"inferenceModel/xxxxModel\");  //todo: change you model\r\n\r\n    std::vector<std::string> img_files_list;\r\n    string imgPath = \"test/2\";  //todo: change you image path\r\n    if (cv::utils::fs::isDirectory(imgPath)) {\r\n        std::vector<cv::String> filenames;\r\n        cv::glob(imgPath, filenames);\r\n        for (auto f : filenames) {\r\n            img_files_list.push_back(f);\r\n        }\r\n    }\r\n    else {\r\n        img_files_list.push_back(imgPath);\r\n    }\r\n\r\n    std::cout << \"img_file_list length: \" << img_files_list.size() << std::endl;\r\n\r\n    std::cout << std::chrono::steady_clock::now << std::endl;\r\n\r\n    Classifier classifier(config.cls_model_path, config.cls_params_path,\r\n        config.use_gpu, config.gpu_id, config.gpu_mem,\r\n        config.cpu_math_library_num_threads, config.use_mkldnn,\r\n        config.use_tensorrt, config.use_fp16,\r\n        config.resize_short_size, config.crop_size);\r\n\r\n    std::cout << std::chrono::steady_clock::now << std::endl;\r\n\r\n#if 1\r\n    std::thread a([](std::vector<std::string>& img_files_list, Classifier& classifier) {\r\n        double elapsed_time = 0.0;\r\n        int warmup_iter = img_files_list.size() > 5 ? 5 : 0;\r\n        for (int idx = 0; idx < img_files_list.size(); ++idx) {\r\n            std::string img_path = img_files_list[idx];\r\n            cv::Mat srcimg = cv::imread(img_path, cv::IMREAD_COLOR);\r\n            if (!srcimg.data) {\r\n                std::cerr << \"[ERROR] image read failed! image path: \" << img_path\r\n                    << \"\\n\";\r\n                exit(-1);\r\n            }\r\n\r\n            cv::cvtColor(srcimg, srcimg, cv::COLOR_BGR2RGB);\r\n\r\n            std::stringstream _stream;\r\n            double run_time = classifier.Run(srcimg, _stream);\r\n\r\n            int maxPosition;\r\n            std::string maxPos;\r\n            _stream >> maxPos;\r\n            csvStream << maxPos << \"\\n\";\r\n\r\n            if (1 /*idx >= warmup_iter*/) {\r\n                elapsed_time += run_time;\r\n                std::cout << \"Current image path: \" << img_path << std::endl;\r\n                std::cout << \"Current time cost: \" << run_time << \" s, \"\r\n                    << \"average time cost in all: \"\r\n                    << elapsed_time / (idx + 1 - warmup_iter) << \" s.\" << \"\\n---------\\n\";\r\n            }\r\n            else {\r\n                std::cout << \"Current time cost: \" << run_time << \" s.\" << std::endl;\r\n            }\r\n\r\n            std::this_thread::sleep_for(std::chrono::milliseconds(500));        //give more time to watch GPU memory increase\r\n        }\r\n\r\n        std::string csv = csvStream.str();\r\n\r\n        cout << \"\\n\\n\" << csv << \"\\n\\n\";\r\n\r\n        },std::ref(img_files_list),std::ref(classifier));\r\n    a.join();\r\n\r\n#else\r\n    double elapsed_time = 0.0;\r\n    int warmup_iter = img_files_list.size() > 5 ? 5 : 0;\r\n    for (int idx = 0; idx < img_files_list.size(); ++idx) {\r\n        std::string img_path = img_files_list[idx];\r\n        cv::Mat srcimg = cv::imread(img_path, cv::IMREAD_COLOR);\r\n        if (!srcimg.data) {\r\n            std::cerr << \"[ERROR] image read failed! image path: \" << img_path\r\n                << \"\\n\";\r\n            exit(-1);\r\n        }\r\n\r\n        cv::cvtColor(srcimg, srcimg, cv::COLOR_BGR2RGB);\r\n\r\n        std::stringstream _stream;\r\n        double run_time = classifier.Run(srcimg, _stream);\r\n\r\n        int maxPosition;\r\n        std::string maxPos;\r\n        _stream >> maxPos;\r\n        csvStream << maxPos << \"\\n\";\r\n\r\n        if (1 /*idx >= warmup_iter*/) {\r\n            elapsed_time += run_time;\r\n            std::cout << \"Current image path: \" << img_path << std::endl;\r\n            std::cout << \"Current time cost: \" << run_time << \" s, \"\r\n                << \"average time cost in all: \"\r\n                << elapsed_time / (idx + 1 - warmup_iter) << \" s.\" << \"\\n---------\\n\";\r\n        }\r\n        else {\r\n            std::cout << \"Current time cost: \" << run_time << \" s.\" << std::endl;\r\n        }\r\n    }\r\n\r\n    std::string csv = csvStream.str();\r\n\r\n    cout << \"\\n\\n\" << csv << \"\\n\\n\";\r\n#endif\r\n\r\n    system(\"Pause\");\r\n    return 0;\r\n}\r\n",
        "state": "closed",
        "user": "2mhk",
        "closed_by": "2mhk",
        "created_at": "2021-10-20T08:57:18+00:00",
        "updated_at": "2021-10-26T02:58:56+00:00",
        "closed_at": "2021-10-26T02:58:56+00:00",
        "comments_count": [
            "weisy11",
            "quanxiang-liu",
            "2mhk",
            "2mhk",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1325,
        "title": "api 接口 utils冲突",
        "body": "使用paddleclas api 2.2.1调用模型，项目文件目录也建有utils目录，但是paddleclas会报from utils import logger找不到的错误，应该是检索到项目工程本身的utils的目录了 \r\n",
        "state": "closed",
        "user": "Darki-luo",
        "closed_by": "TingquanGao",
        "created_at": "2021-10-21T12:21:34+00:00",
        "updated_at": "2022-08-23T12:02:12+00:00",
        "closed_at": "2022-08-23T12:02:09+00:00",
        "comments_count": [
            "weisy11",
            "Darki-luo",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1340,
        "title": "预测阶段报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n都是最新版本，CUDA11.0，Windows\r\n\r\ncmd 指令：python  tools/infer.py   -c ./ppcls/configs/quick_start/professional/ResNet50_vd_CIFAR100.yaml -o Infer.infer_imgs=dataset/Cat/cat_12_test -o Global.pretrained_model=./output_CIFAR/ResNet50_vd/best_model\r\n\r\n前面还能预测，到后面就报错了\r\n\r\n[{'class_ids': [9, 4, 3, 7, 8], 'scores': [0.96763, 0.02795, 0.00377, 0.00031, 0.00023], 'file_name': 'dataset/Cat/cat_12_test\\\\NrPQtw7m31JKOlSbnAU6VHovqhMY2LBG.jpg', 'label_names': []}, {'class_ids': [7, 4, 10, 6, 5], 'scores': [0.99996, 3e-05, 1e-05, 1e-05, 0.0], 'file_name': 'dataset/Cat/cat_12_test\\\\OHg2wlQf5DdNEr46xqLBXz3ai9oGmKYI.jpg', 'label_names': []}, {'class_ids': [4, 7, 5, 6, 9], 'scores': [0.99989, 7e-05, 3e-05, 0.0, 0.0], 'file_name': 'dataset/Cat/cat_12_test\\\\OMfQiwJau4WXboyN5LktHSF3grnZDsAG.jpg', 'label_names': []}, {'class_ids': [11, 0, 10, 1, 8], 'scores': [0.95901, 0.03795, 0.00251, 0.00023, 0.0001], 'file_name': 'dataset/Cat/cat_12_test\\\\P3Bn8ThKFoV1YJIpfSAmqxwbQ2ECv0iu.jpg', 'label_names': []}]\r\nTraceback (most recent call last):\r\n  File \"tools/infer.py\", line 32, in <module>\r\n    trainer.infer()\r\n  File \"<decorator-gen-281>\", line 2, in infer\r\n  File \"C:\\Users\\86151\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\dygraph\\base.py\", line 331, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"D:\\PaddleClas\\ppcls\\engine\\trainer.py\", line 652, in infer\r\n    x = process(x)\r\n  File \"D:\\PaddleClas\\ppcls\\data\\preprocess\\ops\\operators.py\", line 57, in __call__\r\n    assert img.shape[2] == 3, 'invalid shape of image[%s]' % (\r\nAttributeError: 'NoneType' object has no attribute 'shape'",
        "state": "closed",
        "user": "Sun-Shun",
        "closed_by": "weisy11",
        "created_at": "2021-10-26T04:31:28+00:00",
        "updated_at": "2021-11-15T03:32:36+00:00",
        "closed_at": "2021-11-15T03:32:36+00:00",
        "comments_count": [
            "weisy11",
            "Sun-Shun"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1343,
        "title": "paddle1.8 GPU版本提示ModuleNotFoundError: No module named 'paddle.inference'",
        "body": "Windows \r\nPython3.6\r\nCUDA10/cuDNN 7.6\r\nPaddle1.8 GPu   (安装CPU版本没有问题)\r\n运行单张图像识别\r\npython python/predict_system.py -c configs/inference_product.yaml\r\n\r\n提示\r\nTraceback (most recent call last):\r\n  File \"python/predict_system.py\", line 26, in <module>\r\n    from python.predict_rec import RecPredictor\r\n  File \"E:\\python\\PaddleClas\\deploy\\python\\predict_rec.py\", line 23, in <module>\r\n    from utils import logger\r\n  File \"E:\\python\\PaddleClas\\deploy\\utils\\__init__.py\", line 4, in <module>\r\n    from . import predictor\r\n  File \"E:\\python\\PaddleClas\\deploy\\utils\\predictor.py\", line 21, in <module>\r\n    from paddle.inference import Config\r\nModuleNotFoundError: No module named 'paddle.inference'\r\n  求教大佬",
        "state": "closed",
        "user": "QHANT",
        "closed_by": "weisy11",
        "created_at": "2021-10-26T13:21:43+00:00",
        "updated_at": "2021-11-15T03:32:47+00:00",
        "closed_at": "2021-11-15T03:32:47+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1344,
        "title": "文档更新",
        "body": "PaddleClas文档更新问题\r\n1. 文档[开始使用](https://paddleclas.readthedocs.io/zh_CN/latest/tutorials/getting_started.html)的模型推理中，python tools/infer/predict.py文件找不到，tools文件夹下只有__init__.py、eval.py、export_model.py、infer.py、train.py这些python脚本文件，该问题同样出现在[分类预测框架](https://paddleclas.readthedocs.io/zh_CN/latest/extension/paddle_inference.html)文档中。\r\n2. 预测方式太多、 `步骤复杂，不便于使用。忘记了从哪找到的一种PaddleClas的预测方式：\r\n`python3 PaddleClas/tools/infer.py \\\r\n    -c PaddleClas/ppcls/configs/quick_start/ResNet50_vd.yaml \\\r\n    -o Infer.infer_imgs=./cat_12_train \\\r\n    -o Global.pretrained_model=./output/ResNet50_vd/best_model\r\n`\r\n这样的就很好，训练时生成的模型配置文件只有pdparams以及pdopt，加载的时候只需要将这两个配置文件共同的文件名输入，然后其他配置信息均在yaml中定义，如PaddleDetection和PaddleSeg一样。建议将所有预测命令同步使用类似命令。",
        "state": "closed",
        "user": "Shelly111111",
        "closed_by": "weisy11",
        "created_at": "2021-10-27T03:21:48+00:00",
        "updated_at": "2021-11-15T03:32:58+00:00",
        "closed_at": "2021-11-15T03:32:58+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1345,
        "title": "训练时候出错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n\r\n训练指令：python  tools/train.py -c ./ppcls/configs/quick_start/professional/ResNet50_vd_CIFAR100.yaml  -o Global.output_dir=\"output_CIFAR\"  -o Arch.pretrained=True\r\n\r\n\r\n训练显示结果，但一直报错！！\r\n\r\nC:\\Users\\86151/.paddleclas/weights\\ResNet50_vd_pretrained.pdparams\r\nC:\\Users\\86151\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py:1301: UserWarning: Skip loading for fc.weight. fc.weight receives a shape [2048, 1000], but the expected shape is [2048, 12].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\nC:\\Users\\86151\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py:1301: UserWarning: Skip loading for fc.bias. fc.bias receives a shape [1000], but the expected shape is [12].\r\n  warnings.warn((\"Skip loading for {}. \".format(key) + str(err)))\r\n[2021/10/27 15:51:29] root INFO: train with paddle 2.1.3 and device CUDAPlace(0)\r\nC:\\Users\\86151\\Anaconda3\\lib\\site-packages\\paddle\\fluid\\reader.py:358: UserWarning: DataLoader with multi-process mode is not supported on MacOs and Windows currently. Please use signle-process mode with num_workers = 0 instead\r\n  \"DataLoader with multi-process mode is not supported on MacOs and Windows currently.\" \\\r\n[2021/10/27 15:51:30] root INFO: [Train][Epoch 1/300][Iter: 0/34]lr: 0.04000, CELoss: 2.48894, loss: 2.48894, top1: 0.03125, top5: 0.48438, batch_cost: 0.87071s, reader_cost: 0.15462, ips: 73.50348 images/sec, eta: 2:28:01\r\n[2021/10/27 15:51:30] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/tO6cKGH8uPEayzmeZJ51Fdr2Tx3fBYSn.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:30] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/YfsxcFB9D3LvkdQyiXlqnNZ4STwope2r.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:31] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/yGcJHV8Uuft6grFs7QWnK5CTAZvYzdDO.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:31] root INFO: [Train][Epoch 1/300][Iter: 10/34]lr: 0.04000, CELoss: 2.60209, loss: 2.60209, top1: 0.09375, top5: 0.46023, batch_cost: 0.12350s, reader_cost: 0.00682, ips: 518.20466 images/sec, eta: 0:20:58\r\n[2021/10/27 15:51:31] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/3yMZzWekKmuoGOF60ICQxldhBEc9Ra15.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:32] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/5nKsehtjrXCZqbAcSW13gxB8E6z2Luy7.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:33] root INFO: [Train][Epoch 1/300][Iter: 20/34]lr: 0.04000, CELoss: 2.55338, loss: 2.55338, top1: 0.11905, top5: 0.50074, batch_cost: 0.16357s, reader_cost: 0.04662, ips: 391.27521 images/sec, eta: 0:27:45\r\n[2021/10/27 15:51:35] root INFO: [Train][Epoch 1/300][Iter: 30/34]lr: 0.04000, CELoss: 2.52793, loss: 2.52793, top1: 0.12349, top5: 0.50907, batch_cost: 0.17201s, reader_cost: 0.05527, ips: 372.08184 images/sec, eta: 0:29:09\r\n[2021/10/27 15:51:35] root INFO: [Train][Epoch 1/300][Avg]CELoss: 2.52594, loss: 2.52594, top1: 0.12500, top5: 0.51468\r\n[2021/10/27 15:51:35] root INFO: [Train][Epoch 2/300][Iter: 0/34]lr: 0.04000, CELoss: 2.40325, loss: 2.40325, top1: 0.10938, top5: 0.59375, batch_cost: 0.17696s, reader_cost: 0.06030, ips: 361.67293 images/sec, eta: 0:29:58\r\n[2021/10/27 15:51:37] root INFO: [Train][Epoch 2/300][Iter: 10/34]lr: 0.04000, CELoss: 2.35911, loss: 2.35911, top1: 0.17898, top5: 0.60511, batch_cost: 0.17437s, reader_cost: 0.05785, ips: 367.02882 images/sec, eta: 0:29:30\r\n[2021/10/27 15:51:38] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/3yMZzWekKmuoGOF60ICQxldhBEc9Ra15.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:39] root ERROR: Exception occured when parse line: ./dataset/Cat/cat_12_train/YfsxcFB9D3LvkdQyiXlqnNZ4STwope2r.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n[2021/10/27 15:51:39] root INFO: [Train][Epoch 2/300][Iter: 20/34]lr: 0.04000, CELoss: 2.34280, loss: 2.34280, top1: 0.18378, top5: 0.61607, batch_cost: 0.18401s, reader_cost: 0.06794, ips: 347.80181 images/sec, eta: 0:31:06\r\n",
        "state": "closed",
        "user": "Sun-Shun",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-10-27T07:54:46+00:00",
        "updated_at": "2022-04-26T06:54:00+00:00",
        "closed_at": "2022-04-26T06:53:58+00:00",
        "comments_count": [
            "trarynight",
            "cuicheng01",
            "Sun-Shun",
            "Sun-Shun",
            "cuicheng01",
            "lazyn1997",
            "aiot-tech",
            "aiot-tech",
            "ChrisMengxl",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 1387
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1352,
        "title": "MixNet只提供pdparams，是否有PaddlePaddle复现的动态图？",
        "body": "通过网络的性能表格对比，感觉MixNet_M网络结构的性价比很高，下载链接只有参数文件，没有计算图。是否开源PaddlePaddle版本的复现代码呢？\r\n想用它来做Backbone，试试语义分割和目标检测",
        "state": "closed",
        "user": "dugusiqing",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-10-28T09:12:33+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:51+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1355,
        "title": "PaddleClas和PaddleDetection是什么关系？",
        "body": "PaddleClas和PaddleDetection是什么关系？\r\n这两个有区别吗？感觉大体一致",
        "state": "closed",
        "user": "zmdcs",
        "closed_by": "weisy11",
        "created_at": "2021-10-29T08:47:26+00:00",
        "updated_at": "2024-06-03T09:51:42+00:00",
        "closed_at": "2021-11-15T03:33:56+00:00",
        "comments_count": [
            "weisy11",
            "weisy11",
            "ericosmic"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1359,
        "title": "Dataloader 出错",
        "body": "您好，可以帮忙看一下这个报错和警告是什么原因导致的吗\r\n![image](https://user-images.githubusercontent.com/68497831/139574841-b7a54409-8352-4b9e-bc6a-3e21ec28b15b.png)\r\n![image](https://user-images.githubusercontent.com/68497831/139574852-c2b8919d-a769-476d-a064-c1384a88eece.png)\r\n![image](https://user-images.githubusercontent.com/68497831/139574858-e38fe17a-7f0c-4217-bfda-f53e9ede9460.png)\r\n\r\n",
        "state": "closed",
        "user": "qdd1234",
        "closed_by": "qdd1234",
        "created_at": "2021-10-31T08:42:11+00:00",
        "updated_at": "2021-11-01T03:38:21+00:00",
        "closed_at": "2021-11-01T03:38:21+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1394,
        "title": "报错：ModuleNotFoundError: No module named 'ppcls'",
        "body": "\r\n1. 报错：\r\nTraceback (most recent call last):\r\n  File \"D:/pyProject/PaddlePaddle-Classification-master/PaddlePaddle-Classification-master/train.py\", line 2, in <module>\r\n    from ppcls.data import Reader\r\nModuleNotFoundError: No module named 'ppcls'\r\n\r\n2  测试代码:\r\nfrom ppcls.data import Reader\r\nfrom ppcls.utils.config import get_config\r\nfrom ppcls.utils.save_load import init_model, save_model\r\nfrom ppcls.utils import logger\r\n\r\n补充说明:运行单纯的PaddlePaddle代码是正常，也按照官方方法安装PaddleClas，安装在目录:C:\\Users\\BHT\\PaddleClas。\r\n安装后控制台有提示：\r\nInstalling collected packages: prettytable\r\n  Attempting uninstall: prettytable\r\n    Found existing installation: prettytable 2.3.0\r\n    Uninstalling prettytable-2.3.0:\r\n      Successfully uninstalled prettytable-2.3.0\r\nSuccessfully installed prettytable-2.4.0\r\n\r\n\r\n然后运行代码import ppcls.data 还是失败。\r\n我的python编译器是用：D:\\Anaconda\\python.exe  下的。  是否需要把PaddleClas安装到D:\\Anaconda目录下？\r\n\r\n2. PaddleClas版本：release/static(21-11-03 clone)\r\n   PaddlePaddle版本：2.1.0\r\n\r\n 3. 训练环境信息：\r\n  a. Windows10\r\n  b. Python3.8\r\n  c. CUDA11.0/cuDNN cuDNN v8.0.4\r\n\r\n",
        "state": "closed",
        "user": "qing130",
        "closed_by": "qing130",
        "created_at": "2021-11-04T07:44:58+00:00",
        "updated_at": "2021-11-16T01:03:09+00:00",
        "closed_at": "2021-11-16T01:03:08+00:00",
        "comments_count": [
            "TingquanGao",
            "qing130"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1402,
        "title": "qiickstart花朵识别训练报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows10\r\n  b. Python版本号，Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.1/cuDNN 7.6.5\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n \r\n刚搭建的环境，对着这个文档https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_new_user.md\r\n\r\n敲的这行命令\r\npython3 tools/train.py -c ./ppcls/configs/quick_start/ResNet50_vd.yaml -o Arch.pretrained=True\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"D:\\PYproject\\PaddleClas-release-2.3\\ppcls\\engine\\engine.py\", line 265, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"D:\\PYproject\\PaddleClas-release-2.3\\ppcls\\engine\\train\\train.py\", line 49, in train_epoch\r\n    out = forward(engine, batch)\r\n  File \"D:\\PYproject\\PaddleClas-release-2.3\\ppcls\\engine\\train\\train.py\", line 77, in forward\r\n    return engine.model(batch[0])\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"D:\\PYproject\\PaddleClas-release-2.3\\ppcls\\arch\\backbone\\legendary_models\\resnet.py\", line 350, in forward\r\n    x = self.stem(x)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\dygraph\\container.py\", line 98, in forward\r\n    input = layer(input)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"D:\\PYproject\\PaddleClas-release-2.3\\ppcls\\arch\\backbone\\legendary_models\\resnet.py\", line 134, in forward\r\n    x = self.conv(x)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\nn\\layer\\conv.py\", line 667, in forward\r\n    use_cudnn=self._use_cudnn)\r\n  File \"D:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\nn\\functional\\conv.py\", line 114, in _conv_nd\r\n    pre_bias = getattr(core.ops, op_type)(x, weight, *attrs)\r\nOSError: (External)  Cudnn error, CUDNN_STATUS_EXECUTION_FAILED  (at C:/home/workspace/Paddle_release/paddle/fluid/operators/conv_cudnn_op.cu:348)\r\n  [operator < conv2d > error]\r\n\r\n\r\n\r\n\r\n还有就是前面进程设置有警告\r\n\r\nD:\\Anaconda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\reader.py:358: UserWarning: DataLoader with multi-process mode is not supported on MacOs and Windows currently. Please use signle-process mode with num_workers = 0 instead\r\n  \"DataLoader with multi-process mode is not supported on MacOs and Windows currently.\" \\\r\n但是代码里面的num_workers 确实是等于0的\r\n",
        "state": "closed",
        "user": "Z-mingyu",
        "closed_by": "TingquanGao",
        "created_at": "2021-11-04T13:52:55+00:00",
        "updated_at": "2021-11-09T16:16:14+00:00",
        "closed_at": "2021-11-09T16:16:14+00:00",
        "comments_count": [
            "TingquanGao",
            "Z-mingyu",
            "Z-mingyu",
            "Z-mingyu",
            "cuicheng01",
            "Z-mingyu",
            "Z-mingyu",
            "Z-mingyu",
            "weisy11",
            "Z-mingyu",
            "weisy11",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1408,
        "title": "修改识别花的案例，修改class_num后报错",
        "body": "我的任务只需要区分4个类别，我修改识别花的案例后准备训练后报错，请问应该怎么修改其他参数？\r\n配置文件里，class_num=4\r\n以下是报错信息，请问还需要改什么参数，谢谢\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/Users//Documents/zhipei/vin2/PaddleClas/ppcls/engine/engine.py\", line 265, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/Users//Documents/zhipei/vin2/PaddleClas/ppcls/engine/train/train.py\", line 66, in train_epoch\r\n    update_metric(engine, out, batch, batch_size)\r\n  File \"/Users//Documents/zhipei/vin2/PaddleClas/ppcls/engine/train/utils.py\", line 24, in update_metric\r\n    metric_dict = trainer.train_metric_func(out, batch[-1])\r\n  File \"/Users//Documents/zhipei/vin2/PaddleClas/ppcls/metric/__init__.py\", line 45, in __call__\r\n    metric_dict.update(metric_func(*args, **kwargs))\r\n  File \"/Users//miniconda3/envs/paddle_env/lib/python3.8/site-packages/paddle/fluid/dygraph/layers.py\", line 902, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/Users//Documents/zhipei/vin2/PaddleClas/ppcls/metric/metrics.py\", line 40, in forward\r\n    metric_dict[\"top{}\".format(k)] = paddle.metric.accuracy(\r\n  File \"/Users//miniconda3/envs/paddle_env/lib/python3.8/site-packages/paddle/metric/metrics.py\", line 800, in accuracy\r\n    topk_out, topk_indices = topk(input, k=k)\r\n  File \"/Users//miniconda3/envs/paddle_env/lib/python3.8/site-packages/paddle/fluid/layers/nn.py\", line 5249, in topk\r\n    out, indices = core.ops.top_k(input, 'k', _k)\r\nValueError: (InvalidArgument) input must have >= k columns\r\n  [Hint: Expected input_dims[input_dims.size() - 1] >= k, but received input_dims[input_dims.size() - 1]:4 < k:5.] (at /home/Paddle/paddle/fluid/operators/top_k_op.cc:48)\r\n  [operator < top_k > error]\r\n",
        "state": "closed",
        "user": "ljcljc",
        "closed_by": "ljcljc",
        "created_at": "2021-11-05T04:38:55+00:00",
        "updated_at": "2021-11-05T05:08:22+00:00",
        "closed_at": "2021-11-05T05:08:22+00:00",
        "comments_count": [
            "ljcljc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1409,
        "title": "在GPU下使用图像识别模型报错",
        "body": "```\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1636099131 (unix time) try \"date -d @1636099131\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 3521 (TID 0x7fe7f9808740) from PID 0 ***]\r\n\r\nSegmentation fault (core dumped)\r\n```\r\nCPU能够正常使用，但GPU会报如上错误信息，paddle版本为2.1.3-gpu",
        "state": "closed",
        "user": "DrewdropLife",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-05T08:01:34+00:00",
        "updated_at": "2022-04-26T06:54:01+00:00",
        "closed_at": "2022-04-26T06:53:59+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao",
            "DrewdropLife",
            "DrewdropLife",
            "TingquanGao",
            "upperblacksmith",
            "upperblacksmith",
            "cuicheng01",
            "upperblacksmith",
            "cuicheng01",
            "upperblacksmith",
            "njustczr",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1410,
        "title": "请问如何将其应用于app呢",
        "body": "\r\n请问如何将其应用于app呢",
        "state": "closed",
        "user": "coderfc1998",
        "closed_by": "weisy11",
        "created_at": "2021-11-05T08:31:03+00:00",
        "updated_at": "2021-11-15T03:35:17+00:00",
        "closed_at": "2021-11-15T03:35:17+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1411,
        "title": "centerloss.py中的center始终是随机值，无法收敛",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\ncenterloss.py中的center始终是随机值，无法收敛\r\n![image](https://user-images.githubusercontent.com/66461493/140490265-91f37daa-7842-43fc-b332-43c52ca57f53.png)\r\n",
        "state": "closed",
        "user": "chenhaohan88",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-05T09:38:46+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:52+00:00",
        "comments_count": [
            "Intsigstephon",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1412,
        "title": "服务器版检测模型到底是什么格式的模型呢",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.3\r\n 2. 涉及的其他产品使用的版本号：paddledetection2.2\r\n 3. 训练环境信息：无\r\n  a. 具体操作系统，Windows\r\n  b. Python版本号，如Python3.9\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "afterimagex",
        "closed_by": "afterimagex",
        "created_at": "2021-11-06T16:30:55+00:00",
        "updated_at": "2021-11-22T11:49:51+00:00",
        "closed_at": "2021-11-20T01:47:07+00:00",
        "comments_count": [
            "afterimagex",
            "cuicheng01",
            "weisy11",
            "TingquanGao",
            "afterimagex",
            "afterimagex",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1413,
        "title": "车辆ReId里面的Loss",
        "body": "1.训练和eval的Loss为什么不一样？\r\n2.训练的2个Loss（SuperCon、ArcFace）是按照1:1相加之后作为整体loss反向传播？\r\n3.CE loss属于绝对约束吗？\r\n\r\n附录：\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n    - SupConLoss:\r\n        weight: 1.0\r\n        views: 2\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0",
        "state": "closed",
        "user": "lucy3589",
        "closed_by": "lucy3589",
        "created_at": "2021-11-07T04:41:21+00:00",
        "updated_at": "2021-11-08T03:04:14+00:00",
        "closed_at": "2021-11-08T03:04:14+00:00",
        "comments_count": [
            "cuicheng01",
            "lucy3589"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1414,
        "title": "Is it possible to release the documentation in English?",
        "body": "Hey all\r\n\r\nI would really much like to try and test this repo, but all of its documentation is in Chinese (I think...), while the article published in English\r\n\r\nI was wondering if an English version documentation is possible?\r\n\r\nThanks.",
        "state": "closed",
        "user": "eladmeir",
        "closed_by": "eladmeir",
        "created_at": "2021-11-07T14:24:55+00:00",
        "updated_at": "2021-11-08T07:51:50+00:00",
        "closed_at": "2021-11-08T07:51:50+00:00",
        "comments_count": [
            "weisy11",
            "eladmeir"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1418,
        "title": "“未知类别的图像识别体验”中为什么不需要重新训练？",
        "body": "“由于默认的索引库中不包含对应的索引信息，所以这里的识别结果有误，此时我们可以通过构建新的索引库的方式，完成未知类别的图像识别。\r\n\r\n当索引库中的图像无法覆盖我们实际识别的场景时，即在预测未知类别的图像时，我们需要将对应类别的相似图像添加到索引库中，从而完成对未知类别的图像识别，这一过程是不需要重新训练的。”\r\n\r\n上文是从“快速识图体验”的ReadMe中摘抄出来的，我不明白为什么识别未知图像不需要重新训练模型。依据后文展示，我们还是需要将未知识别图像类似的图片放进gallery文件夹中，并在label.txt中重新定义图片的label，然后重新构建index。这一过程我理解就在重新训练模型，不太明白.md中为什么说不用重新训练。还请解答一下，谢谢~",
        "state": "closed",
        "user": "DaydreamQ",
        "closed_by": "DaydreamQ",
        "created_at": "2021-11-09T03:43:48+00:00",
        "updated_at": "2021-11-09T06:53:57+00:00",
        "closed_at": "2021-11-09T06:53:57+00:00",
        "comments_count": [
            "weisy11",
            "DaydreamQ"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1419,
        "title": "为什么infer的输出没有对应的label name，看不懂【quick start，classification，one image infer】教程",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n-------------------------------------------------------------------\r\n复现了https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_new_user.md\r\n30分钟玩转PaddleClas（尝鲜版）\r\n这个demo的输出也是一致：\r\n[{'class_ids': [20, 9, 29, 34, 23], 'scores': [0.03, 0.02606, 0.02249, 0.02051, 0.01818], 'file_name': 'dataset/flowers102/jpg/image_00001.jpg', 'label_names': []}]\r\n为什么没有label_names，scores最高的0.03分数是推荐的分类吗？对应哪个标签？\r\nps:flowers102的imagelabels.mat，setid.mat都有，\r\n任何帮助都感激不尽，先谢谢大佬老师们百忙解答了\r\n\r\n",
        "state": "closed",
        "user": "aibama",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-09T04:50:29+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:53+00:00",
        "comments_count": [
            "Gmgge",
            "Z-mingyu",
            "weisy11",
            "TingquanGao",
            "Z-mingyu",
            "aibama",
            "Z-mingyu",
            "aibama",
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1425,
        "title": "训练特征抽取部分的网络模型，数据集的具体组成长啥样，能不能给个参考",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "upperblacksmith",
        "closed_by": null,
        "created_at": "2021-11-10T07:03:08+00:00",
        "updated_at": "2024-02-26T04:29:03+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "upperblacksmith",
            "weisy11",
            "upperblacksmith"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1426,
        "title": "下载的卡通识别模型没有inference.pdmodel等文件",
        "body": "下载的卡通识别模型没有inference.pdmodel等文件",
        "state": "closed",
        "user": "zhufeijuanjuan",
        "closed_by": "zhufeijuanjuan",
        "created_at": "2021-11-10T07:37:51+00:00",
        "updated_at": "2021-11-11T05:39:18+00:00",
        "closed_at": "2021-11-11T05:39:18+00:00",
        "comments_count": [
            "cuicheng01",
            "zhufeijuanjuan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1427,
        "title": "加了预训练模型验证集acc很低The shape of model params head.fc.bias [97] not matched with loaded params head.fc.bias [97] !",
        "body": "\r\n加了预训练模型后，验证集acc很低，并且还有问题:The shape of model params head.fc.bias [97] not matched with loaded params head.fc.bias [97] !",
        "state": "closed",
        "user": "yaofanji",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-10T11:32:12+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:54+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1431,
        "title": "特征模型训练问题",
        "body": "特征模型训练时，请问训练集和测试集划分的类别数量需要都是一样的吗？能否训练集200类，测试集100类。",
        "state": "closed",
        "user": "zhufeijuanjuan",
        "closed_by": "zhufeijuanjuan",
        "created_at": "2021-11-11T05:48:09+00:00",
        "updated_at": "2021-11-12T05:20:51+00:00",
        "closed_at": "2021-11-12T05:20:51+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1434,
        "title": "PP-ShiTu运行示例时，提示显存不足，不能使用GPU",
        "body": "您好，我在使用PP-Shitu体验时，遇到了GPU识别报错的问题。我的使用环境如下：\r\nPaddleClas版本：2.3\r\nPaddlePaddle版本:2.1.3\r\nCUDA:10.2\r\ncudnn:7.6.5\r\n系统：Ubuntu18.04\r\nPython:3.8.10\r\n\r\n当我运行https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_recognition.md\r\n该文档进行操作时报错如下：\r\npython python/predict_system.py -c configs/inference_general.yaml\r\n2021-11-12 10:03:13 INFO: \r\n\r\n2021-11-12 10:03:13 INFO: DetPostProcess : \r\n2021-11-12 10:03:13 INFO: DetPreProcess : \r\n2021-11-12 10:03:13 INFO:     transform_ops : \r\n2021-11-12 10:03:13 INFO:         DetResize : \r\n2021-11-12 10:03:13 INFO:             interp : 2\r\n2021-11-12 10:03:13 INFO:             keep_ratio : False\r\n2021-11-12 10:03:13 INFO:             target_size : [640, 640]\r\n2021-11-12 10:03:13 INFO:         DetNormalizeImage : \r\n2021-11-12 10:03:13 INFO:             is_scale : True\r\n2021-11-12 10:03:13 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-11-12 10:03:13 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-11-12 10:03:13 INFO:         DetPermute : \r\n2021-11-12 10:03:13 INFO: Global : \r\n2021-11-12 10:03:13 INFO:     batch_size : 1\r\n2021-11-12 10:03:13 INFO:     cpu_num_threads : 10\r\n2021-11-12 10:03:13 INFO:     det_inference_model_dir : ./models/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer\r\n2021-11-12 10:03:13 INFO:     enable_benchmark : True\r\n2021-11-12 10:03:13 INFO:     enable_mkldnn : True\r\n2021-11-12 10:03:13 INFO:     enable_profile : False\r\n2021-11-12 10:03:13 INFO:     gpu_mem : 8000\r\n2021-11-12 10:03:13 INFO:     image_shape : [3, 640, 640]\r\n2021-11-12 10:03:13 INFO:     infer_imgs : ./drink_dataset_v1.0/test_images/nongfu_spring.jpeg\r\n2021-11-12 10:03:13 INFO:     ir_optim : True\r\n2021-11-12 10:03:13 INFO:     labe_list : ['foreground']\r\n2021-11-12 10:03:13 INFO:     max_det_results : 5\r\n2021-11-12 10:03:13 INFO:     rec_inference_model_dir : ./models/general_PPLCNet_x2_5_lite_v1.0_infer\r\n2021-11-12 10:03:13 INFO:     rec_nms_thresold : 0.05\r\n2021-11-12 10:03:13 INFO:     threshold : 0.2\r\n2021-11-12 10:03:13 INFO:     use_fp16 : False\r\n2021-11-12 10:03:13 INFO:     use_gpu : True\r\n2021-11-12 10:03:13 INFO:     use_tensorrt : False\r\n2021-11-12 10:03:13 INFO: IndexProcess : \r\n2021-11-12 10:03:13 INFO:     index_dir : ./drink_dataset_v1.0/index/\r\n2021-11-12 10:03:13 INFO:     return_k : 5\r\n2021-11-12 10:03:13 INFO:     score_thres : 0.5\r\n2021-11-12 10:03:13 INFO: RecPostProcess : None\r\n2021-11-12 10:03:13 INFO: RecPreProcess : \r\n2021-11-12 10:03:13 INFO:     transform_ops : \r\n2021-11-12 10:03:13 INFO:         ResizeImage : \r\n2021-11-12 10:03:13 INFO:             size : 224\r\n2021-11-12 10:03:13 INFO:         NormalizeImage : \r\n2021-11-12 10:03:13 INFO:             mean : [0.485, 0.456, 0.406]\r\n2021-11-12 10:03:13 INFO:             order : \r\n2021-11-12 10:03:13 INFO:             scale : 0.00392157\r\n2021-11-12 10:03:13 INFO:             std : [0.229, 0.224, 0.225]\r\n2021-11-12 10:03:13 INFO:         ToCHWImage : None\r\nE1112 10:03:13.824231  6743 analysis_predictor.cc:679] Allocate too much memory for the GPU memory pool, assigned 8000 MB\r\nE1112 10:03:13.824254  6743 analysis_predictor.cc:682] Try to shink the value by setting AnalysisConfig::EnableGpu(...)\r\nInference: 22.044897079467773 ms per batch image\r\n[{'bbox': [244, 49, 509, 964], 'rec_docs': '农夫山泉-饮用天然水', 'rec_scores': 0.75856656}]\r\n\r\n结果确实是正确的，但log中提示我的显卡显存不足。请问运行pp-shitu需要的显存是多大呢?或者是我哪里出了问题，谢谢\r\n",
        "state": "open",
        "user": "gaooolianggg",
        "closed_by": null,
        "created_at": "2021-11-12T02:10:20+00:00",
        "updated_at": "2024-02-26T04:29:02+00:00",
        "closed_at": null,
        "comments_count": [
            "gaooolianggg",
            "Intsigstephon",
            "gaooolianggg",
            "gaooolianggg"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1433,
        "title": "请问训练好的网络train的log日志开发下载吗 ",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "caomao1111",
        "closed_by": "Intsigstephon",
        "created_at": "2021-11-11T09:20:39+00:00",
        "updated_at": "2021-11-22T08:23:19+00:00",
        "closed_at": "2021-11-22T08:23:18+00:00",
        "comments_count": [
            "Intsigstephon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1435,
        "title": "新建特征索引库时，报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n![image](https://user-images.githubusercontent.com/34127965/141449800-ae60e79d-f586-4d53-88f5-e992043b1b49.png)\r\n1.paddleclas版本：2.3.0，paddlepaddle版本：2.2.0\r\n3.操作系统：Linux  python版本：3.8  ",
        "state": "closed",
        "user": "upperblacksmith",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-12T10:22:46+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:55+00:00",
        "comments_count": [
            "upperblacksmith",
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1438,
        "title": "导出10W预训练模型key不对应",
        "body": "PaddleClas的版本是2.3.\r\n\r\n我通过一下命令导出10W的预训练模型：\r\npython3 tools/export_model.py \\ \r\n-c ppcls/configs/ImageNet/ResNet/ResNet50_vd.yaml \\ \r\n-o Global.save_inference_dir=\"100k\" \\ \r\n-o Global.pretrained_model=\"ResNet50_vd_10w_pretrained\"\r\n\r\n与此同时，我注释掉了这一行：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/ppcls/arch/backbone/legendary_models/resnet.py#L355\r\n\r\n报如下错误，也就是所有层的参数都没有加载：\r\nUserWarning: Skip loading for blocks.15.conv2.conv.weight. blocks.15.conv2.conv.weight is not found in the provided dict.\r\n\r\n我用pkl打开ResNet50_vd_10w_pretrained.pdparams，里面的key是'bb_x_x.convx._batch_norm._variance'。",
        "state": "closed",
        "user": "ajundo",
        "closed_by": "ajundo",
        "created_at": "2021-11-15T08:03:46+00:00",
        "updated_at": "2021-11-17T06:47:02+00:00",
        "closed_at": "2021-11-17T06:47:02+00:00",
        "comments_count": [
            "cuicheng01",
            "ajundo",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1440,
        "title": "能够给更多小模型的ssld预训练模型吗？",
        "body": "感谢paddle的预训练模型，非常的work。请问，能够提供更多小模型的ssld预训练模型吗，比如resnet18，hrnetv2-small？",
        "state": "closed",
        "user": "guwen007",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-15T10:42:23+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:56+00:00",
        "comments_count": [
            "cuicheng01",
            "seefun",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1441,
        "title": "官方提供的 lcnet 预训练模型与 backbone scale 不匹配",
        "body": "我使用 lcnet 做 backbone 进行OCR文本识别，在使用你们提供的不同scale版本的 lcnet 预训练模型时，均出现参数的shape不一致。能确认下https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/algorithm_introduction/ImageNet_models.md#PP-LCNet%E7%B3%BB%E5%88%97提供的PPLCNet_x0_35、PPLCNet_x0_5预训练模型是否正确吗？\r\n\r\n\r\nThe shape of model params backbone.conv1._conv.weight [11, 3, 3, 3] not matched with loaded params conv1.conv.weight [8, 3, 3, 3] !                                                                                                          \r\nThe shape of model params backbone.conv1._batch_norm.weight [11] not matched with loaded params conv1.bn.weight [8] !                                                                                                                        \r\nThe shape of model params backbone.conv1._batch_norm.bias [11] not matched with loaded params conv1.bn.bias [8] !                                                                                                                            \r\nThe shape of model params backbone.conv1._batch_norm._mean [11] not matched with loaded params conv1.bn._mean [8] !                                                                                                                          \r\nThe shape of model params backbone.conv1._batch_norm._variance [11] not matched with loaded params conv1.bn._variance [8] !                                                                                                                  \r\nThe shape of model params backbone.block_list.0._depthwise_conv._conv.weight [11, 1, 3, 3] not matched with loaded params blocks2.0.dw_conv.conv.weight [8, 1, 3, 3] !                                                                       \r\nThe shape of model params backbone.block_list.0._depthwise_conv._batch_norm.weight [11] not matched with loaded params blocks2.0.dw_conv.bn.weight [8] !                                                                                     \r\nThe shape of model params backbone.block_list.0._depthwise_conv._batch_norm.bias [11] not matched with loaded params blocks2.0.dw_conv.bn.bias [8] !                                                                                         \r\nThe shape of model params backbone.block_list.0._depthwise_conv._batch_norm._mean [11] not matched with loaded params blocks2.0.dw_conv.bn._mean [8] !                                                                                       \r\nThe shape of model params backbone.block_list.0._depthwise_conv._batch_norm._variance [11] not matched with loaded params blocks2.0.dw_conv.bn._variance [8] !                                                                               \r\nThe shape of model params backbone.block_list.0._pointwise_conv._conv.weight [22, 11, 1, 1] not matched with loaded params blocks2.0.pw_conv.conv.weight [16, 8, 1, 1] !                                                                     \r\nThe shape of model params backbone.block_list.0._pointwise_conv._batch_norm.weight [22] not matched with loaded params blocks2.0.pw_conv.bn.weight [16] !                                                                                    \r\nThe shape of model params backbone.block_list.0._pointwise_conv._batch_norm.bias [22] not matched with loaded params blocks2.0.pw_conv.bn.bias [16] !                                                                                        \r\nThe shape of model params backbone.block_list.0._pointwise_conv._batch_norm._mean [22] not matched with loaded params blocks2.0.pw_conv.bn._mean [16] !                                                                                      \r\nThe shape of model params backbone.block_list.0._pointwise_conv._batch_norm._variance [22] not matched with loaded params blocks2.0.pw_conv.bn._variance [16] !                                                                              \r\nThe shape of model params backbone.block_list.1._depthwise_conv._conv.weight [22, 1, 3, 3] not matched with loaded params blocks3.0.dw_conv.conv.weight [16, 1, 3, 3] !                                                                      \r\nThe shape of model params backbone.block_list.1._depthwise_conv._batch_norm.weight [22] not matched with loaded params blocks3.0.dw_conv.bn.weight [16] !                                                                                    \r\nThe shape of model params backbone.block_list.1._depthwise_conv._batch_norm.bias [22] not matched with loaded params blocks3.0.dw_conv.bn.bias [16] !                                                                                        \r\nThe shape of model params backbone.block_list.1._depthwise_conv._batch_norm._mean [22] not matched with loaded params blocks3.0.dw_conv.bn._mean [16] !                                                                                      \r\nThe shape of model params backbone.block_list.1._depthwise_conv._batch_norm._variance [22] not matched with loaded params blocks3.0.dw_conv.bn._variance [16] !                                                                             \r\n The shape of model params backbone.block_list.1._pointwise_conv._conv.weight [44, 22, 1, 1] not matched with loaded params blocks3.0.pw_conv.conv.weight [24, 16, 1, 1] !                                                                    \r\nThe shape of model params backbone.block_list.1._pointwise_conv._batch_norm.weight [44] not matched with loaded params blocks3.0.pw_conv.bn.weight [24] !                                                                                    \r\nThe shape of model params backbone.block_list.1._pointwise_conv._batch_norm.bias [44] not matched with loaded params blocks3.0.pw_conv.bn.bias [24] !                                                                                        \r\nThe shape of model params backbone.block_list.1._pointwise_conv._batch_norm._mean [44] not matched with loaded params blocks3.0.pw_conv.bn._mean [24] !                                                                                      \r\nThe shape of model params backbone.block_list.1._pointwise_conv._batch_norm._variance [44] not matched with loaded params blocks3.0.pw_conv.bn._variance [24] !                                                                             \r\n The shape of model params backbone.block_list.2._depthwise_conv._conv.weight [44, 1, 3, 3] not matched with loaded params blocks3.1.dw_conv.conv.weight [24, 1, 3, 3] !                                                                      \r\nThe shape of model params backbone.block_list.2._depthwise_conv._batch_norm.weight [44] not matched with loaded params blocks3.1.dw_conv.bn.weight [24] !                                                                                   \r\n The shape of model params backbone.block_list.2._depthwise_conv._batch_norm.bias [44] not matched with loaded params blocks3.1.dw_conv.bn.bias [24] !                                                                                        \r\nThe shape of model params backbone.block_list.2._depthwise_conv._batch_norm._mean [44] not matched with loaded params blocks3.1.dw_conv.bn._mean [24] !                                                                                      \r\nThe shape of model params backbone.block_list.2._depthwise_conv._batch_norm._variance [44] not matched with loaded params blocks3.1.dw_conv.bn._variance [24] !                                                                              \r\nThe shape of model params backbone.block_list.2._pointwise_conv._conv.weight [44, 44, 1, 1] not matched with loaded params blocks3.1.pw_conv.conv.weight [24, 24, 1, 1] !                                                                    \r\nThe shape of model params backbone.block_list.2._pointwise_conv._batch_norm.weight [44] not matched with loaded params blocks3.1.pw_conv.bn.weight [24] !                                                                                    \r\nThe shape of model params backbone.block_list.2._pointwise_conv._batch_norm.bias [44] not matched with loaded params blocks3.1.pw_conv.bn.bias [24] !                                                                                        \r\nThe shape of model params backbone.block_list.2._pointwise_conv._batch_norm._mean [44] not matched with loaded params blocks3.1.pw_conv.bn._mean [24] !                                                                                      \r\nThe shape of model params backbone.block_list.2._pointwise_conv._batch_norm._variance [44] not matched with loaded params blocks3.1.pw_conv.bn._variance [24] !                                                                              \r\nThe shape of model params backbone.block_list.3._depthwise_conv._conv.weight [44, 1, 3, 3] not matched with loaded params blocks4.0.dw_conv.conv.weight [24, 1, 3, 3] !                                                                      \r\nThe shape of model params backbone.block_list.3._depthwise_conv._batch_norm.weight [44] not matched with loaded params blocks4.0.dw_conv.bn.weight [24] !                                                                                   \r\n The shape of model params backbone.block_list.3._depthwise_conv._batch_norm.bias [44] not matched with loaded params blocks4.0.dw_conv.bn.bias [24] !                                                                                        \r\nThe shape of model params backbone.block_list.3._depthwise_conv._batch_norm._mean [44] not matched with loaded params blocks4.0.dw_conv.bn._mean [24] !                                                                                     \r\n The shape of model params backbone.block_list.3._depthwise_conv._batch_norm._variance [44] not matched with loaded params blocks4.0.dw_conv.bn._variance [24] !                                                                              \r\nThe shape of model params backbone.block_list.3._pointwise_conv._conv.weight [89, 44, 1, 1] not matched with loaded params blocks4.0.pw_conv.conv.weight [48, 24, 1, 1] !                                                                    \r\nThe shape of model params backbone.block_list.3._pointwise_conv._batch_norm.weight [89] not matched with loaded params blocks4.0.pw_conv.bn.weight [48] ! ",
        "state": "closed",
        "user": "limaopeng1",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-16T01:52:15+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:56+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1449,
        "title": "使用PPLCNet训练多类别分类模型",
        "body": "使用PPLCNet训练多类别分类模型，报错：\r\n![image](https://user-images.githubusercontent.com/44738266/142157293-78c26f2c-efdf-48e5-b125-d72d78ab904b.png)\r\n\r\n标签内容为：\r\n![image](https://user-images.githubusercontent.com/44738266/142157416-73a83cb7-dbd4-41e5-a7e7-e9a87e31a8e3.png)\r\n",
        "state": "closed",
        "user": "lllbq",
        "closed_by": "lllbq",
        "created_at": "2021-11-17T07:45:39+00:00",
        "updated_at": "2021-11-17T08:00:22+00:00",
        "closed_at": "2021-11-17T08:00:22+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1445,
        "title": "识别的时候使用cpu 2秒多使用显卡4秒多",
        "body": "1.   PaddlePaddle2.2  PaddleClas的版本是2.3\r\n 2. 训练环境信息：\r\n  a. Linux Ubuntu20.04 \r\n  b. Python3.8\r\n  c. CUDA 11.2/cuDNN 8.1.1\r\n  d. 硬件 cpu: 铜牌 3204 显卡 :P1000\r\n 3. cls 配置文件 \r\n```\r\nGlobal:\r\n  infer_imgs: null\r\n  inference_model_dir: null\r\n  batch_size: 1\r\n  use_gpu: True\r\n  enable_mkldnn: False\r\n  cpu_num_threads: 10\r\n  enable_benchmark: False\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\nPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 0.00392157\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n        channel_num: 3\r\n    - ToCHWImage:\r\nPostProcess:\r\n  main_indicator: Topk\r\n  Topk:\r\n    topk: 5\r\n    class_id_map_file: null \r\n```\r\n\r\n配置中null的部分通过程序已做处理.\r\n\r\n4. 问题描述： 训练使用 显卡一切正常, 识别的时候使用显卡4秒 使用CPU 2秒多， 所有的训练图集都是处理过的最大不超过200kb 普遍都是 40-80kb , 识别的图像也经过处理 50kb 左右",
        "state": "closed",
        "user": "guanzhao",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-16T08:58:16+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:58+00:00",
        "comments_count": [
            "Intsigstephon",
            "guanzhao",
            "Intsigstephon",
            "guanzhao",
            "Intsigstephon",
            "guanzhao",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1442,
        "title": "人脸检索模型训练参照哪个配置文件比较好",
        "body": "我基于LFW数据集，将每张图片的人脸部分切出来作为训练数据，训练集和测试集整理格式如下\r\n三个字段分别为图片名，label和unique_id。训练集人脸类别4700类，测试集人脸类别700类。\r\n尝试着参照MobileNetV1_retireval.yaml训练模型，但是验证集的recall不到0.5。请问做这样的人脸识别任务参照哪个配置文件比较好，谢谢。\r\ntrain_face/0/Kyle_Shewfelt_0001_0_.jpg 0 0\r\ntrain_face/1/Jennifer_Garner_0008_0_.jpg 1 1\r\ntrain_face/1/Jennifer_Garner_0005_1_.jpg 1 2\r\ntrain_face/1/Jennifer_Garner_0004_2_.jpg 1 3\r\ntrain_face/1/Jennifer_Garner_0011_3_.jpg 1 4\r\ntrain_face/1/Jennifer_Garner_0009_4_.jpg 1 5\r\ntrain_face/1/Jennifer_Garner_0001_5_.jpg 1 6\r\ntrain_face/1/Jennifer_Garner_0003_6_.jpg 1 7\r\ntrain_face/1/Jennifer_Garner_0010_7_.jpg 1 8\r\ntrain_face/1/Jennifer_Garner_0006_9_.jpg 1 9\r\ntrain_face/1/Jennifer_Garner_0002_10_.jpg 1 10\r\ntrain_face/1/Jennifer_Garner_0012_11_.jpg 1 11\r\ntrain_face/2/Prince_Rainier_III_0001_0_.jpg 2 12\r\ntrain_face/3/Ben_Chandler_0001_0_.jpg 3 13",
        "state": "closed",
        "user": "zhufeijuanjuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-16T02:25:49+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:57+00:00",
        "comments_count": [
            "Intsigstephon",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1450,
        "title": "PPLCNet训练多类别模型",
        "body": "如果要训练多类别目标，configs中的PPLCNet配置文件可以开箱即用吗？\r\n![image](https://user-images.githubusercontent.com/44738266/142164142-10938e88-8ae5-4315-9658-d7cceff56027.png)\r\n",
        "state": "closed",
        "user": "lllbq",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-17T08:33:18+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:08:59+00:00",
        "comments_count": [
            "lllbq",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1452,
        "title": "bug report: 配置文件中class_num 不起作用",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/ppcls/configs/quick_start/ResNet50_vd.yaml\r\n\r\n这些配置文件中不能在Global 中设置 class_num, 建立模型时只用**Arch:**中的配置。",
        "state": "closed",
        "user": "jeffzhengye",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-17T14:15:15+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:00+00:00",
        "comments_count": [
            "Intsigstephon",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1456,
        "title": "PP-ShiTu论文的实现",
        "body": "您好，\r\n我看了PP-ShiTu的论文，上面有提到使用了Unified-Deep Mutual Learning以及DeepHash，但是我在看代码的时候没有发现这些功能呀。",
        "state": "closed",
        "user": "TimZhang001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-18T01:29:20+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:01+00:00",
        "comments_count": [
            "nan-wang",
            "TimZhang001",
            "weisy11",
            "TimZhang001",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1458,
        "title": "关于PP-ShiTu的识别结果",
        "body": "我自己的数据集分别对主体检测模型与特征提取模型进行训练，目前出现的问题是：当我输入一张图片到PP-ShiTu进行识别时，每张图(size=320*320)可视化结果都会有一个对于整张图的bbox: [0, 0, 320, 320]，但我并不想要这个结果出现，而且这个结果大多数时候是错误的。请问这是我主体检测模型训练出现了问题还是说代码内默认存在这个操作？\r\n",
        "state": "closed",
        "user": "Breeze-Zero",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-18T13:56:50+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:02+00:00",
        "comments_count": [
            "weisy11",
            "Breeze-Zero",
            "weisy11",
            "Breeze-Zero",
            "Hold-on-li",
            "weisy11",
            "weisy11",
            "Hold-on-li",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1465,
        "title": "BalancedBatchSampler功能的需求",
        "body": "针对非均衡样本，是否可以提供BalancedBatchSampler的采样方式？\r\n",
        "state": "closed",
        "user": "TimZhang001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-22T07:04:18+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:03+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1470,
        "title": "自监督技术的需求",
        "body": "目前各路大神都证明采用自监督技术可以提升backbone的特征提取能力，是否有计划把自监督技术合并进来呢",
        "state": "closed",
        "user": "TimZhang001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-23T11:30:10+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:04+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1468,
        "title": "使用Paddle Serving部署识别模型时运行pipeline_http_client.py出现错误",
        "body": "运行pipeline_http_client.py出现错误：\r\nimport requests\r\nimport json\r\nimport base64\r\nimport os\r\nimgpath = \"../../drink_dataset_v1.0/test_images/001.jpeg\"\r\ndef cv2_to_base64(image):\r\n    return base64.b64encode(image).decode('utf8')\r\nif __name__ == \"__main__\":\r\n    url = \"http://127.0.0.1:18081/recognition/prediction\"\r\n\r\n    with open(os.path.join(\".\", imgpath), 'rb') as file:\r\n        image_data1 = file.read()\r\n    image = cv2_to_base64(image_data1)\r\n    data = {\"key\": [\"image\"], \"value\": [image]}\r\n    for i in range(1):\r\n        r = requests.post(url=url, data=json.dumps(data))\r\n        print(r.json())\r\n报出错误如下：\r\n{'err_no': 8, 'err_msg': '(data_id=4 log_id=0) [det|0] Failed to postprocess: postprocess() takes 4 positional arguments but 5 were given', 'key': [], 'value': [], 'tensors': []}",
        "state": "closed",
        "user": "intjun",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-23T09:06:41+00:00",
        "updated_at": "2022-04-19T06:59:23+00:00",
        "closed_at": "2022-04-19T06:58:59+00:00",
        "comments_count": [
            "NingRC",
            "Intsigstephon",
            "flash0729",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1472,
        "title": "关于命令行运行出错",
        "body": "![image](https://user-images.githubusercontent.com/87969070/143169461-cf6ac819-031b-45a9-930d-55928fdb4cf8.png)\r\n已经安装了faiss，图像预测运行的时候报错，请问该如何解决？",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-24T03:26:43+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:05+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1474,
        "title": "关于图像通道顺序的提示。",
        "body": "在build_gallery.py中，有一句\r\n`img = img[:, :, ::-1]`\r\n作用是将OpenCV读取的BGR图像转成RGB，因为项目里默认的模型输入是RGB的。\r\n\r\n但如果我们用其他的模型来提特征，输入不是RGB，就要注意了，可能会因为颜色空间不对造成最终结果不对。\r\n\r\n建议把这种预处理操作，统一放到feature部分去处理。\r\n",
        "state": "closed",
        "user": "GaussRieman",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-24T06:55:24+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:06+00:00",
        "comments_count": [
            "RainFrost1",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1477,
        "title": "模型训练",
        "body": "![image](https://user-images.githubusercontent.com/87969070/143208673-3c21d29b-2aaa-4c71-8f4b-fa623ccda876.png)\r\n请问，加载自己的数据集，报如上错误是什么原因呢？",
        "state": "open",
        "user": "Hold-on-li",
        "closed_by": null,
        "created_at": "2021-11-24T09:12:29+00:00",
        "updated_at": "2024-02-26T04:29:00+00:00",
        "closed_at": null,
        "comments_count": [
            "Hold-on-li",
            "Hold-on-li",
            "RainFrost1",
            "Hold-on-li"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1478,
        "title": "softmax的结果 sum 不等于1",
        "body": "PaddleClas版本 release/2.3\r\n基于GeneralRecognition_PPLCNet_x2_5.yaml的配置以及官方给的预训练模型训练了自己的一个模型，训练的时候是个27类，相关主要配置如下：\r\n```yaml\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: ./deploy/retrieval_models/general_pre_train/best\r\n  output_dir: ./output/crawl\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n  eval_mode: retrieval\r\n  use_dali: False\r\n  to_static: False\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: logits\r\n  infer_add_softmax: True\r\n\r\n  Backbone:\r\n    name: PPLCNet_x2_5\r\n    pretrained: True\r\n    use_ssld: True\r\n  BackboneStopLayer:\r\n    name: flatten_0\r\n  Neck:\r\n    name: FC\r\n    embedding_size: 1280\r\n    class_num: 512\r\n  Head:\r\n     name: ArcMargin\r\n     embedding_size: 512\r\n     class_num: 27\r\n     margin: 0.2\r\n     scale: 30\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.04\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00001\r\n```\r\n\r\ninfer_output_key: logits 和 infer_add_softmax: True 都修改成这样了，想看以下最后logits的结果和softmax如何。但是当我使用 export将模型导出成 inference 模型之后，再使用predict_clas.py 去看最后的结果，发现 softmax 的和 不等于1，觉得很奇怪。\r\nperdict_clas.py 里面的代码改成下面：\r\n```python\r\n  def main(config):\r\n      rec_predictor = RecPredictor(config)\r\n      image_list = get_image_list(config[\"Global\"][\"infer_imgs\"])\r\n  \r\n      batch_imgs = []\r\n      batch_names = []\r\n      cnt = 0\r\n      for idx, img_path in enumerate(image_list):\r\n          img = cv2.imread(img_path)\r\n          print('img_path', img_path)\r\n          if img is None:\r\n              logger.warning(\r\n                  \"Image file failed to read and has been skipped. The path: {}\".\r\n                  format(img_path))\r\n          else:\r\n              img = img[:, :, ::-1]\r\n              batch_imgs.append(img)\r\n              img_name = os.path.basename(img_path)\r\n              batch_names.append(img_name)\r\n              cnt += 1\r\n  \r\n          if cnt % config[\"Global\"][\"batch_size\"] == 0 or (idx + 1) == len(image_list):\r\n              if len(batch_imgs) == 0: \r\n                  continue\r\n                  \r\n              batch_results = rec_predictor.predict(batch_imgs)\r\n              for number, result_dict in enumerate(batch_results):\r\n                  filename = batch_names[number]\r\n                  # print(\"{}:\\t{}\".format(filename, result_dict))\r\n                  print('result_dict shape', result_dict.shape)\r\n                  print('result_dict', result_dict)\r\n                  print('sum result', sum(result_dict))\r\n              batch_imgs = []\r\n              batch_names = []\r\n  \r\n      return\r\n```\r\n\r\n结果是这样的\r\n```shell\r\nimg_path ./dataset/crawl/train/26\\311637313711.8573453.jpg\r\noutput_names ['save_infer_model/scale_0.tmp_1']\r\noutput_tensor <paddle.fluid.core_avx.PaddleInferTensor object at 0x0000017DFC7F2260>\r\nresult_dict shape (27,)\r\nresult_dict [0.18922791 0.19217324 0.1829695  0.15234679 0.19042316 0.14705104\r\n 0.17601342 0.23064235 0.18011475 0.16751501 0.18701936 0.16641027\r\n 0.17572714 0.2090446  0.15025532 0.17611966 0.16864435 0.17920245\r\n 0.17197414 0.2080395  0.21135774 0.17495109 0.16254929 0.16374113\r\n 0.19615729 0.22133528 0.35745952]\r\nsum result 5.088465303182602\r\n```\r\n\r\n我查看了export 之后 的 pdmodel 的 netron 结构，确实是过了 softmax 的，可是这个结果 sum ！= 1 就很奇怪求帮助\r\n![20211124184533](https://user-images.githubusercontent.com/27245627/143224526-9c832dd3-32b2-46c6-9bc6-b911355405c1.png)\r\n\r\n",
        "state": "open",
        "user": "ZhiluDing",
        "closed_by": null,
        "created_at": "2021-11-24T10:55:56+00:00",
        "updated_at": "2024-02-26T04:28:59+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "ZhiluDing",
            "RainFrost1",
            "ZhiluDing",
            "RainFrost1",
            "RainFrost1",
            "ZhiluDing"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1484,
        "title": "优化参数",
        "body": "![image](https://user-images.githubusercontent.com/87969070/143518718-f2a72fe6-877b-4692-b2df-0d35f9a0b560.png)\r\n请问这个k对应是哪一个值？具体的含义是什么？",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-26T02:43:10+00:00",
        "updated_at": "2022-03-16T04:09:24+00:00",
        "closed_at": "2022-03-16T04:09:10+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1505,
        "title": "主体检测训练报错",
        "body": "![94b1151d3739dffa3e53c11e768c311](https://user-images.githubusercontent.com/87969070/144155772-f73463bf-2dac-40f6-af84-975387307564.png)\r\n![ebd6e561484d4b65ffe8ef93470107a](https://user-images.githubusercontent.com/87969070/144155790-ee500163-887b-4020-9fb0-ef399137e9b8.png)\r\n![5f0ecc144241136605cd31686ea1114](https://user-images.githubusercontent.com/87969070/144155795-bdc1f3c9-40eb-4750-9e22-f6290d1fc1b5.png)\r\n按照官方的方法，将数据文件进行修改，但是训练时仍然报错，请问一下，这是怎么回事呢？\r\n![dd73464bed35352a336ffc7ac54ecf4](https://user-images.githubusercontent.com/87969070/144155896-4dbf7085-b16a-44c6-8468-06653a9d31e8.png)\r\n",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "Hold-on-li",
        "created_at": "2021-12-01T01:37:18+00:00",
        "updated_at": "2021-12-01T07:12:14+00:00",
        "closed_at": "2021-12-01T07:12:14+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1489,
        "title": "替换了自己训练的主体检测inference模型后报错",
        "body": "前辈们，请问paddleClasrelease/2.3替换了自己训练的主体检测inference模型报了这个错误怎么解决呢？（导出的主体检测的模型已验证无误，识别的索引库也重新建立了）\r\n\r\n",
        "state": "closed",
        "user": "lululu86",
        "closed_by": "lululu86",
        "created_at": "2021-11-26T10:08:56+00:00",
        "updated_at": "2021-11-29T06:58:25+00:00",
        "closed_at": "2021-11-29T06:58:25+00:00",
        "comments_count": [
            "lululu86",
            "lululu86",
            "Intsigstephon",
            "lululu86"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1499,
        "title": "I want to submit the weight of paddle's vgg-bn converted from the weight of pytorch's vgg-bn",
        "body": "I want to submit the weight of paddle's vgg-bn converted from the weight of pytorch's vgg-bn, but I don't know the process of submitting the weight file. Is it to upload the weight to Baidu network disk? Can you tell me the  PR process for submitting weight files?",
        "state": "closed",
        "user": "zhangjinCV",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-29T15:44:45+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:10+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1502,
        "title": "PaddleClas的backbone里MODEL_URLS链接有误",
        "body": "具体位置：PaddleClas/ppcls/arch/backbone/model_zoo/se_resnext_vd.py\r\n![QQ图片20211130164545](https://user-images.githubusercontent.com/83652390/144014858-c2e563a2-a3ec-4e4e-8552-0834e974ee6d.png)\r\n可以看到两条URL都是Se_ReNeXt50_vd的预训练模型\r\n\r\n",
        "state": "closed",
        "user": "hfy-swu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-11-30T08:51:30+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:11+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1510,
        "title": "PPShiTu识别系统的特征提取部分",
        "body": "有没有该部分的数据集下载链接\r\n![image](https://user-images.githubusercontent.com/87969070/144188533-4324c1fd-7d41-4908-b446-e59b38c4cfe6.png)\r\n我在官方下载的数据集，并没有按照特征提取数据集样式出现",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-01T07:14:36+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:12+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1512,
        "title": "how to solve outlier?",
        "body": "if I had an image, it doesn't belong to any category in my training set, does the pp-shitu system can detect it as an outlier?\r\n",
        "state": "closed",
        "user": "Birdylx",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-01T10:26:41+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:13+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1520,
        "title": "PPShiTu预测报错",
        "body": "![image](https://user-images.githubusercontent.com/87969070/144556649-e076d0f8-3b65-447a-b342-cd03738f7946.png)\r\n![image](https://user-images.githubusercontent.com/87969070/144556670-53c21e0f-9db4-4dc7-9f85-5e430d9b5980.png)\r\n单独使用主体检测时预测没有问题，但是运行最后的预测报该错误，请问是怎么一回事呢？路径都检测很多遍了",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "Hold-on-li",
        "created_at": "2021-12-03T06:35:20+00:00",
        "updated_at": "2021-12-03T06:38:04+00:00",
        "closed_at": "2021-12-03T06:38:04+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1519,
        "title": "PPShiTu预测报错",
        "body": "![image](https://user-images.githubusercontent.com/87969070/144556304-00335e6d-e649-4ea2-9299-d69182800295.png)\r\n![image](https://user-images.githubusercontent.com/87969070/144556329-744a0a65-2fa7-4036-8f6b-ac6e0b444ac6.png)\r\n单独使用主体检测时没有问题，但是运行最后的预测报该错误，请问是怎么一回事呢？路径都检测很多遍了",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "Hold-on-li",
        "created_at": "2021-12-03T06:32:31+00:00",
        "updated_at": "2021-12-03T06:33:58+00:00",
        "closed_at": "2021-12-03T06:33:58+00:00",
        "comments_count": [
            "Hold-on-li"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1518,
        "title": "增加线程数，特征抽取和特征检索耗时增加是什么情况",
        "body": "![image](https://user-images.githubusercontent.com/34127965/144396551-849865c6-39cf-427b-9425-1a492929b66c.png)\r\n![image](https://user-images.githubusercontent.com/34127965/144396695-89297536-16e1-4a31-ba63-266b89567b15.png)\r\n\r\n服务器cpu是10核20线程的，两次均使用cpu推理",
        "state": "closed",
        "user": "upperblacksmith",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-02T09:34:42+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:13+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1521,
        "title": "PPShiTu预测",
        "body": "![image](https://user-images.githubusercontent.com/87969070/144560281-5b18feed-174b-4acd-9b53-34d5af151fd4.png)\r\n![image](https://user-images.githubusercontent.com/87969070/144560229-18c010d7-2c66-4cd2-9263-8484de5d147f.png)\r\n图一是主体检测预测的结果，图二是PPShiTu最终预测的结果,\r\n![image](https://user-images.githubusercontent.com/87969070/144560395-f38b998f-8e9d-4687-85be-0b4a96bbb009.png)\r\n对比了检测参数，两者是一样的，请问结果不一致是怎么回事呢？",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-03T07:13:35+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:14+00:00",
        "comments_count": [
            "Intsigstephon",
            "Hold-on-li",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1524,
        "title": "非方形缩放问题",
        "body": "我的训练数据长宽比在2-3之间，所以我想使用非方形缩放，将 ResizeImage.size设置为[800, 320]，会报如下图的错误\r\n![image](https://user-images.githubusercontent.com/34644177/144694232-2b27f28a-8817-42f9-8fcc-e286aa7f2a9d.png)\r\n请问这个错误应该如何解决？",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "RainFrost1",
        "created_at": "2021-12-04T02:48:58+00:00",
        "updated_at": "2021-12-15T11:32:04+00:00",
        "closed_at": "2021-12-15T11:32:04+00:00",
        "comments_count": [
            "RainFrost1",
            "lazyn1997",
            "RainFrost1",
            "RainFrost1",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1526,
        "title": "OpenVINO部署问题",
        "body": "我想尝试用PP-LCNet在CPU上运行目标分类，在模型部署方面我没有找到openvino的demo，请问后续会考虑添加openvino的demo吗？",
        "state": "closed",
        "user": "chenjunnn",
        "closed_by": "chenjunnn",
        "created_at": "2021-12-06T03:41:20+00:00",
        "updated_at": "2021-12-06T09:41:12+00:00",
        "closed_at": "2021-12-06T09:41:12+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1527,
        "title": "单机多卡运行报错",
        "body": "操作系统：linux\r\npython版本号：3.7.11\r\nCUDA版本：11.1 ,cudnn版本没有找到\r\npaddle版本：paddlepaddle-gpu+2.1.2.post110\r\n\r\n**单卡运行没有报错，多卡运行报错了**\r\n\r\n运行命令：\r\nexport CUDA_VISIBLE_DEVICES=0,1\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0,1\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/RoadRiskIdentification/ResNet50_vd.yaml \\\r\n        -o Arch.pretrained=True\r\n\r\n代码报错如下：\r\nRuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory)\r\n  Suggestions:\r\n  1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed.\r\n  2. Configure third-party dynamic library environment variables as follows:\r\n  - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...`\r\n  - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/fluid/platform/dynload/dynamic_loader.cc:265)\r\n",
        "state": "closed",
        "user": "wstchhwp",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-06T07:08:12+00:00",
        "updated_at": "2023-05-31T11:29:09+00:00",
        "closed_at": "2022-04-19T06:59:00+00:00",
        "comments_count": [
            "weisy11",
            "wstchhwp",
            "caomao1111",
            "weisy11",
            "paddle-bot-old[bot]",
            "ByZ0e"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1529,
        "title": "2.3版本C++部署报错",
        "body": "![image](https://user-images.githubusercontent.com/87969070/144819001-5261644b-afdb-495c-9d4f-2a9fce9f680b.png)\r\n请问一下，2.3版本部署时报无法解析外部符号，请问该如何解决呢？",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-06T09:12:38+00:00",
        "updated_at": "2022-03-16T04:09:25+00:00",
        "closed_at": "2022-03-16T04:09:15+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1535,
        "title": "为什么我使用ImageNet1k的train进行训练，在val上只能得到60.1%的ACC,按照论文和所给的预训练模型应该可以到66.8%的",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "caomao1111",
        "closed_by": null,
        "created_at": "2021-12-07T11:33:04+00:00",
        "updated_at": "2024-02-26T04:28:58+00:00",
        "closed_at": null,
        "comments_count": [
            "caomao1111",
            "cuicheng01",
            "caomao1111",
            "weisy11",
            "caomao1111",
            "weisy11",
            "weisy11",
            "caomao1111",
            "weisy11",
            "cuicheng01",
            "caomao1111",
            "caomao1111",
            "caomao1111",
            "weisy11",
            "caomao1111",
            "weisy11",
            "caomao1111"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1537,
        "title": "通用识别模型PPLCNet_x2_5的预训练模型问题",
        "body": "在《特征提取》章节里面提供了\"通用识别预训练模型\"的预训练模型地址，如下：\r\nhttps://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/pretrain/general_PPLCNet_x2_5_pretrained_v1.0.pdparams\r\n①这个预训练模型general_PPLCNet_x2_5_pretrained_v1.0.pdparams有700多M。\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/algorithm_introduction/ImageNet_models.md\r\n②这个里面PPLCNet_x2_5和PPLCNet_x2_5_ssld_pretrained.pdparams同为34M\r\n\r\n且在快速上手中，直接下载的推理模型\r\n③general_PPLCNet_x2_5_lite_v1.0_infer里的推理模型为33M\r\n\r\n请问一下，①和③是对应的预训练模型和推理模型吗？\r\n如果我要使用GeneralRecognition_PPLCNet_x2_5.yaml训练的话，我该选取哪个预训练模型？",
        "state": "closed",
        "user": "sp-ljw",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-09T06:32:51+00:00",
        "updated_at": "2024-07-24T10:54:06+00:00",
        "closed_at": "2022-03-16T04:09:16+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]",
            "chinesejunzai12"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1542,
        "title": "自己训练的LCNet主体检测模型预测报错TypeError: only size-1 arrays can be converted to Python scalars",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.3，PaddlePaddle 2.2.0，\r\n 2. 涉及的其他产品使用的版本号：PaddleDetection release/2.3\r\n 3. 训练环境信息：Linux，Python3.7，CUDA 11.2，cuDNN 8\r\n 4. 使用数据集CUB_200_2011，修改所有检测框的 category_id 修改为1，使用PaddleDetection基于[picodet_PPLCNet_x2_5_mainbody_lite_v1.0_pretrained.pdparams](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/pretrain/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_pretrained.pdparams)训练主体检测模型，训练相关配置文件和日志：[yml&log.zip](https://github.com/PaddlePaddle/PaddleClas/files/7689502/yml.log.zip)\r\n 5. 训练完成后使用[PaddleDetection/blob/release/2.3/tools/export_model.py](https://github.com/PaddlePaddle/PaddleDetection/blob/release/2.3/tools/export_model.py)导出模型，使用[PaddleDetection/blob/release/2.3/tools/infer.py](https://github.com/PaddlePaddle/PaddleDetection/blob/release/2.3/tools/infer.py)可以正常预测，但使用[PaddleClas/blob/release/2.3/deploy/python/predict_det.py](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/deploy/python/predict_det.py)预测时报如下错误：\r\n \r\n![image](https://user-images.githubusercontent.com/23421457/145507796-88b48681-b029-424c-9c91-d13033640b52.png)\r\n\r\n6. 另外，训练日志中的shape unmatched问题要如何解决？谢谢",
        "state": "closed",
        "user": "niancheng",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-10T01:47:44+00:00",
        "updated_at": "2024-11-13T04:23:24+00:00",
        "closed_at": "2022-05-24T06:56:08+00:00",
        "comments_count": [
            "Enn29",
            "RainFrost1",
            "Enn29",
            "RainFrost1",
            "Enn29",
            "niancheng",
            "RainFrost1",
            "RainFrost1",
            "niancheng",
            "RainFrost1",
            "garment-chan",
            "Theodoric008",
            "paddle-bot-old[bot]",
            "niancheng",
            "ericosmic",
            "niancheng",
            "dlaoy",
            "niancheng",
            "WillWang325",
            "niancheng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1549,
        "title": "mixup后算train acc报错",
        "body": "label的第二维变成了n_class\r\n```\r\nFile \"/root/paddlejob/workspace/code/PaddleClas/ppcls/engine/train/train.py\", line 66, in train_epoch\r\n    update_metric(engine, out, batch, batch_size)\r\n  File \"/root/paddlejob/workspace/code/PaddleClas/ppcls/engine/train/utils.py\", line 24, in update_metric\r\n    metric_dict = trainer.train_metric_func(out, batch[-1])\r\n  File \"/root/paddlejob/workspace/code/PaddleClas/ppcls/metric/__init__.py\", line 45, in __call__\r\n    metric_dict.update(metric_func(*args, **kwargs))\r\n  File \"/opt/_internal/cpython-3.7.0/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 914, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/root/paddlejob/workspace/code/PaddleClas/ppcls/metric/metrics.py\", line 41, in forward\r\n    x, label, k=k)\r\n  File \"/opt/_internal/cpython-3.7.0/lib/python3.7/site-packages/paddle/metric/metrics.py\", line 802, in accuracy\r\n    total)\r\nValueError: (InvalidArgument) ShapeError: label's second dimension of AccuracyOp must be 1. But received label's second dimension is = 1000, label's shape = [256, 1000]\r\n  [Hint: Expected label_dim[1] == 1, but received label_dim[1]:1000 != 1:1.] (at /paddle/paddle/fluid/operators/metrics/accuracy_op.cc:69)\r\n  [operator < accuracy > error]\r\n/mnt\r\n[INFO]: train job success!\r\n```",
        "state": "closed",
        "user": "renmada",
        "closed_by": "renmada",
        "created_at": "2021-12-12T13:19:10+00:00",
        "updated_at": "2021-12-13T01:54:58+00:00",
        "closed_at": "2021-12-13T01:54:58+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1541,
        "title": "NormalizeImage 为什么加 1/255的scale",
        "body": "好多模型的，比如mobilenetv2的config有加了scale，我看很多其他框架的训练代码没有scale。\r\n\r\n在训练imagenet的时候发现验证集精度很低，会是因为这个造成的吗\r\n\r\nconfg如下\r\n```\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 240\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n\r\n# model architecture\r\nArch:\r\n  name: OctMobileNetV2_x1_125\r\n  class_num: 1000\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.04\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00004\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ../ILSVRC2012_w/\r\n      cls_label_path: ../ILSVRC2012_w/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - ColorJitter:\r\n            brightness: 0.4\r\n            contrast: 0.4\r\n            saturation: 0.4\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n      batch_transform_ops:\r\n        - MixupOperator:\r\n            alpha: 0.2\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 384\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ../ILSVRC2012_w/\r\n      cls_label_path: ../ILSVRC2012_w/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 384\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: docs/images/whl/demo.jpg\r\n  batch_size: 384\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: ppcls/utils/imagenet1k_label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n```\r\n\r\n训练日志\r\n```\r\nreader_cost: 4.52641, ips: 76.57218 images/sec\r\n[2021/12/09 22:54:14] root INFO: [Eval][Epoch 14][Iter: 10/33]CELoss: 3.07738, loss: 3.07738, top1: 0.00000, top5: 0.00260, batch_cost: 0.77385s, reader_cost: 0.57224, ips: 496.22269 images/sec\r\n[2021/12/09 22:54:26] root INFO: [Eval][Epoch 14][Iter: 20/33]CELoss: 2.93603, loss: 2.93603, top1: 0.00195, top5: 0.00456, batch_cost: 1.02122s, reader_cost: 0.78887, ips: 376.01989 images/sec\r\n[2021/12/09 22:54:35] root INFO: [Eval][Epoch 14][Iter: 30/33]CELoss: 3.00043, loss: 3.00043, top1: 0.00260, top5: 0.00716, batch_cost: 0.95334s, reader_cost: 0.69650, ips: 402.79635 images/sec\r\n[2021/12/09 22:54:36] root INFO: [Eval][Epoch 14][Avg]CELoss: 2.92478, loss: 2.92478, top1: 0.00112, top5: 0.00408\r\n[2021/12/09 22:54:36] root INFO: [Eval][Epoch 14][best metric: 0.0031000000271201133]\r\n[2021/12/09 22:54:37] root INFO: Already save model in ./output/OctMobileNetV2_x1_125/epoch_14\r\n[2021/12/09 22:54:37] root INFO: Already save model in ./output/OctMobileNetV2_x1_125/latest\r\n[2021/12/09 22:54:43] root INFO: [Train][Epoch 15/240][Iter: 0/835]lr: 0.03986, top1: 0.35417, top5: 0.58073, CELoss: 3.84646, loss: 3.84646, batch_cost: 1.07799s, reader_cost: 0.45171, ips: 356.21716 images/sec, eta: 2 days, 8:30:28\r\n[2021/12/09 22:54:53] root INFO: [Train][Epoch 15/240][Iter: 10/835]lr: 0.03985, top1: 0.35440, top5: 0.58854, CELoss: 3.95077, loss: 3.95077, batch_cost: 0.90153s, reader_cost: 0.36024, ips: 425.94298 images/sec, eta: 1 day, 23:15:18\r\n[2021/12/09 22:55:05] root INFO: [Train][Epoch 15/240][Iter: 20/835]lr: 0.03985, top1: 0.33718, top5: 0.57155, CELoss: 4.15590, loss: 4.15590, batch_cost: 1.11669s, reader_cost: 0.57560, ips: 343.87425 images/sec, eta: 2 days, 10:31:47\r\n[2021/12/09 22:55:15] root INFO: [Train][Epoch 15/240][Iter: 30/835]lr: 0.03985, top1: 0.32149, top5: 0.55242, CELoss: 4.26796, loss: 4.26796, batch_cost: 1.05383s, reader_cost: 0.50752, ips: 364.38586 images/sec, eta: 2 days, 7:13:56\r\n[2021/12/09 22:55:26] root INFO: [Train][Epoch 15/240][Iter: 40/835]lr: 0.03985, top1: 0.32495, top5: 0.55380, CELoss: 4.28579, loss: 4.28579, batch_cost: 1.07878s, reader_cost: 0.52657, ips: 355.95731 images/sec, eta: 2 days, 8:32:13\r\n[2021/12/09 22:55:36] root INFO: [Train][Epoch 15/240][Iter: 50/835]lr: 0.03985, top1: 0.32465, top5: 0.55362, CELoss: 4.30194, loss: 4.30194, batch_cost: 1.05862s, reader_cost: 0.47323, ips: 362.73589 images/sec, eta: 2 days, 7:28:39\r\n[2021/12/09 22:55:47] root INFO: [Train][Epoch 15/240][Iter: 60/835]lr: 0.03985, top1: 0.32731, top5: 0.55678, CELoss: 4.29902, loss: 4.29902, batch_cost: 1.05938s, reader_cost: 0.45758, ips: 362.47540 images/sec, eta: 2 days, 7:30:52\r\n```",
        "state": "closed",
        "user": "renmada",
        "closed_by": "renmada",
        "created_at": "2021-12-09T15:42:48+00:00",
        "updated_at": "2021-12-12T13:17:29+00:00",
        "closed_at": "2021-12-12T13:17:29+00:00",
        "comments_count": [
            "RainFrost1",
            "renmada",
            "cuicheng01",
            "renmada"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1550,
        "title": "EMA的支持",
        "body": "目前好像只有代码ppcls/utils/ema.py的实现，并没有实际调用的方法？",
        "state": "closed",
        "user": "renmada",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-13T02:34:32+00:00",
        "updated_at": "2022-04-19T06:59:23+00:00",
        "closed_at": "2022-04-19T06:59:01+00:00",
        "comments_count": [
            "weisy11",
            "cuicheng01",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1553,
        "title": "检索模型精度 低于 分类模型精度",
        "body": " 1. PaddleClas：release/2.3，PaddlePaddle：2.1.2.post112\r\n 2. 涉及的其他产品使用的版本号：无\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，unbuntu16.4\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/CUDNN8\r\n 4. 训练精度问题\r\n1）数据集CUB_200_2011\r\n2）\r\n![image](https://user-images.githubusercontent.com/45474996/145798455-ab29ac29-1844-4d0c-b1c3-5c3dbb1914ad.png)\r\n3）配置文件\r\n[3个配置文件.zip](https://github.com/PaddlePaddle/PaddleClas/files/7703112/3.zip)\r\n\r\n",
        "state": "closed",
        "user": "EthanChen1234",
        "closed_by": "EthanChen1234",
        "created_at": "2021-12-13T10:52:51+00:00",
        "updated_at": "2021-12-15T07:11:10+00:00",
        "closed_at": "2021-12-15T07:11:10+00:00",
        "comments_count": [
            "EthanChen1234",
            "TingquanGao",
            "EthanChen1234",
            "niancheng",
            "EthanChen1234",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1559,
        "title": "如何导出RecModel为分类模型",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.3和PaddlePaddle 2.2.1\r\n\r\n我使用特征提取的yaml（Arch包含infer_output_key）训练了一个特征提取模型，打算直接用来分类，\r\n但是只能导出为特征提取模型，导出的特征提取模型可以正常使用。请问如何把RecModel\r\n导出为分类模型，我尝试infer_output_key=None和infer_add_softmax=True，但是转换报错了，\r\n显示jit内部错误。",
        "state": "closed",
        "user": "se7enXF",
        "closed_by": "se7enXF",
        "created_at": "2021-12-15T01:33:53+00:00",
        "updated_at": "2021-12-15T02:35:18+00:00",
        "closed_at": "2021-12-15T02:35:17+00:00",
        "comments_count": [
            "se7enXF"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1567,
        "title": "ResNet50分布式训练遇到错误 Communicator of ring id 0 has not been initialized",
        "body": "我在DGX上测试PaddleClas中的resnet50多卡训练。命令是python3 -m paddle.distributed.launch --gpus=0,1,2,3,4,5,6,7 ppcls/static/train.py -c ./ppcls/configs/ImageNet/ResNet/ResNet50_fp16.yaml\r\n\r\n这个可以正常跑。但是相比NVIDIA DeeplearningExample中的Pytorch和MxNet的报告速度相差较大。所以我在找影响性能的原因。\r\n\r\n我发现默认实现中，[这一行代码](https://github.com/PaddlePaddle/PaddleClas/blob/6b88819bd6aef7724b7778fcda80a3c5f6ddbba1/ppcls/static/train.py#L169)的if-else分支判断是走的else，也就是没有对train_prog进行compile。\r\n\r\n所以我把这一部分改成了另一个分支，也就是需要对train_prog进行compile。\r\n\r\n修改之后，train的ips速度确实提升了，但是在第一个train epoch结束后，开始第一次eval的时候会报错，`InvalidArgumentError: Communicator of ring id 0 has not been initialized.\r\n      [Hint: Expected comm_map_.count(ring_id) > 0, but received comm_map_.count(ring_id):0 <= 0:0.] (at /paddle/paddle/fluid/platform/collective_helper.h:107)`\r\n\r\n错误的意思应该是在eval阶段，在create_fetch中收集top1 top5 acc等metrics的时候，需要计算所有GPU的全局top acc求和。但是调用Allreduce的时候ring id没有初始化。\r\n\r\n具体报错log如下，前半部分正常，截取了后半部分：\r\n\r\n[2021/12/15 20:41:56] root INFO: epoch:0   train step:1230 lr: 0.100000, loss:  6.7377 top1:  0.0078 top5:  0.0391 batch_cost: 0.15717 s, reader_cost: 0.04373 s, ips: 814.41191 images/sec.\r\n[2021/12/15 20:41:58] root INFO: epoch:0   train step:1240 lr: 0.100000, loss:  6.6998 top1:  0.0000 top5:  0.0391 batch_cost: 0.15721 s, reader_cost: 0.04367 s, ips: 814.18969 images/sec.\r\n[2021/12/15 20:41:59] root INFO: epoch:0   train step:1250 lr: 0.100000, loss:  6.7115 top1:  0.0078 top5:  0.0156 batch_cost: 0.15700 s, reader_cost: 0.04344 s, ips: 815.29861 images/sec.\r\n[2021/12/15 20:41:59] root INFO: END epoch:0   train  loss:  6.8997 top1:  0.0024 top5:  0.0102 batch_cost: 0.15695 s, reader_cost: 0.04337 s, batch_cost_sum: 195.87163 s, ips: 815.55457 images/sec.\r\nI1215 20:41:59.617884 67119 fuse_pass_base.cc:57] ---  detected 16 subgraphs\r\nTraceback (most recent call last):\r\n  File \"ppcls/static/train.py\", line 272, in <module>\r\n    main(args)\r\n  File \"ppcls/static/train.py\", line 235, in main\r\n    top1_acc = program.run(eval_dataloader, exe, compiled_eval_prog,\r\n  File \"/paddle/ppcls/static/program.py\", line 394, in run\r\n    metrics = exe.run(program=program,\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/executor.py\", line 1246, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/usr/local/lib/python3.8/dist-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/executor.py\", line 1234, in run\r\n    return self._run_impl(\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/executor.py\", line 1380, in _run_impl\r\n    return self._run_parallel(\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/executor.py\", line 1049, in _run_parallel\r\n    tensors = exe.run(fetch_var_names, return_merged)._move_to_list()\r\nValueError: In user code:\r\n\r\n    File \"ppcls/static/train.py\", line 272, in <module>\r\n      main(args)\r\n    File \"ppcls/static/train.py\", line 166, in main\r\n      eval_fetchs, _, eval_feeds, _ = program.build(\r\n    File \"/paddle/ppcls/static/program.py\", line 266, in build\r\n      fetchs = create_fetchs(\r\n    File \"/paddle/ppcls/static/program.py\", line 126, in create_fetchs\r\n      paddle.distributed.all_reduce(\r\n    File \"/usr/local/lib/python3.8/dist-packages/paddle/distributed/collective.py\", line 487, in all_reduce\r\n      helper.append_op(\r\n    File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n      return self.main_program.current_block().append_op(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/framework.py\", line 3178, in append_op\r\n      op = Operator(\r\n    File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/framework.py\", line 2224, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    InvalidArgumentError: Communicator of ring id 0 has not been initialized.\r\n      [Hint: Expected comm_map_.count(ring_id) > 0, but received comm_map_.count(ring_id):0 <= 0:0.] (at /paddle/paddle/fluid/platform/collective_helper.h:107)\r\n      [operator < c_allreduce_sum > error]\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67119\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67129\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67134\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67139\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67144\r\nINFO 2021-12-15 20:42:00,821 launch_utils.py:319] terminate process group gid:67154\r\nINFO 2021-12-15 20:42:04,826 launch_utils.py:340] terminate all the procs\r\nERROR 2021-12-15 20:42:04,826 launch_utils.py:601] ABORT!!! Out of all 8 trainers, the trainer process with rank=[1, 6] was aborted. Please check its log.\r\nINFO 2021-12-15 20:42:08,830 launch_utils.py:340] terminate all the procs\r\nINFO 2021-12-15 20:42:08,830 launch.py:304] Local processes completed.\r\n\r\n",
        "state": "closed",
        "user": "Wong4j",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-16T05:11:37+00:00",
        "updated_at": "2024-10-10T13:52:18+00:00",
        "closed_at": "2022-04-19T06:59:02+00:00",
        "comments_count": [
            "Intsigstephon",
            "weisy11",
            "Intsigstephon",
            "paddle-bot-old[bot]",
            "zty-king"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1576,
        "title": "根据PaddleClas文档Paddle Serving服务化部署,启动日志正常，但是python3 pipeline_http_client.py调用失败",
        "body": "centos环境\r\nPaddlePaddle 2.1.0\r\n直接混淆 python3.7 python/predict_system.py -c configs/inference_general.yaml -o Global.use_gpu=False 结果是正确的，但是serving部署后，调用python3 pipeline_http_client.py出错，错误信息如下：\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle_serving_server/pipeline/operator.py\", line 966, in _run_process\r\n    feed_batch, typical_logid)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle_serving_server/pipeline/operator.py\", line 577, in process\r\n    log_id=typical_logid)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle_serving_app/local_predict.py\", line 329, in predict\r\n    self.predictor.run()\r\nValueError: In user code:\r\n\r\n    File \"tools/export_model.py\", line 115, in <module>\r\n      main()\r\n    File \"tools/export_model.py\", line 111, in main\r\n      run(FLAGS, cfg)\r\n    File \"tools/export_model.py\", line 77, in run\r\n      trainer.export(FLAGS.output_dir)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/engine/trainer.py\", line 582, in export\r\n      input_spec, static_model.forward.main_program,\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 537, in main_program\r\n      concrete_program = self.concrete_program\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 453, in concrete_program\r\n      return self.concrete_program_specify_input_spec(input_spec=None)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 491, in concrete_program_specify_inpu                                                                                   t_spec\r\n      *desired_input_spec)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 401, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 714, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 705, in _build_once\r\n      class_instance=cache_key.class_instance)\r\n    File \"<decorator-gen-64>\", line 2, in from_func_spec\r\n\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 40, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 655, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/paddle/temp/tmpufw8i6kf.py\", line 29, in forward\r\n      false_fn_1, (), (), (out,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/architectures/meta_arch.py\", line 28, in forward\r\n      out = self.get_pred()\r\n    File \"/paddle/temp/tmp6d02fg7t.py\", line 27, in get_pred\r\n      self), (__return_value_0,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/architectures/picodet.py\", line 91, in get_pred\r\n      bbox_pred, bbox_num = self._forward()\r\n    File \"/paddle/temp/tmp99s3_qui.py\", line 38, in _forward\r\n      self), (__return_value_1,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/architectures/picodet.py\", line 73, in _forward\r\n      scale_factor)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/heads/gfl_head.py\", line 478, in post_process\r\n      scale_factor, self.cell_offset)\r\n    File \"/paddle/temp/tmpjnprum8k.py\", line 34, in decode\r\n      batch_scores, scale_factor, im_shape, bbox_preds, img_id])\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 42, in convert_while_loop\r\n      loop_vars = _run_paddle_while_loop(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 52, in _run_paddle_while_loop\r\n      loop_vars = control_flow.while_loop(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/layers/control_flow.py\", line 1203, in while_loop\r\n      output_vars = body(*new_loop_vars)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/heads/gfl_head.py\", line 467, in decode\r\n      cell_offset=cell_offset)\r\n    File \"/paddle/temp/tmpmxo1kufy.py\", line 57, in get_bboxes_single\r\n      mlvl_bboxes,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/mainbody/PaddleDetection/ppdet/modeling/heads/gfl_head.py\", line 449, in get_bboxes_single\r\n      mlvl_bboxes /= im_scale\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/layers/math_op_patch.py\", line 328, in __impl__\r\n      attrs={'axis': axis})\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2942, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2014, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    InvalidArgumentError: Broadcast dimension mismatch. Operands could not be broadcast together with the shape of X = [2500, 4] and the shape of Y = [2].                                                                                    Received [4] in X is not equal to [2] in Y at i:1.\r\n      [Hint: Expected x_dims_array[i] == y_dims_array[i] || x_dims_array[i] <= 1 || y_dims_array[i] <= 1 == true, but received x_dims_array[i] == y_dims_a                                                                                   rray[i] || x_dims_array[i] <= 1 || y_dims_array[i] <= 1:0 != true:1.] (at /paddle/paddle/fluid/operators/elementwise/elementwise_op_function.h:240)\r\n      [operator < elementwise_div > error]\r\nERROR 2021-12-17 06:39:09,195 [operator.py:1024] (log_id=0) det failed to predict.\r\nERROR 2021-12-17 06:39:09,202 [dag.py:410] (data_id=0 log_id=0) Failed to predict: (log_id=0) det failed to predict.\r\n\r\n\r\n",
        "state": "closed",
        "user": "ckseweccsdssaawqwgjgDwww",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-17T06:54:04+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:04+00:00",
        "comments_count": [
            "Intsigstephon",
            "ckseweccsdssaawqwgjgDwww",
            "Intsigstephon",
            "ckseweccsdssaawqwgjgDwww",
            "Intsigstephon",
            "ckseweccsdssaawqwgjgDwww",
            "Intsigstephon",
            "weisy11",
            "Intsigstephon",
            "Intsigstephon",
            "ckseweccsdssaawqwgjgDwww",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1607,
        "title": "在Windows10/11下，使用gpu版本PaddlePaddle  device=cpu依然使用gpu",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：paddlepaddle-gpu 2.2.1 \r\n 2. 训练环境信息：\r\n  a. 具体操作系统，Windows 10\r\n  b. Python版本号，Python3.8.0\r\n  c. CUDA/cuDNN版本， CUDA10.2\r\n将CUDA的环境变量注释掉，同时使用device=cpu之后，PaddlePaddle依然调用GPU进行训练。\r\n在下图中明显看到，使用的cpuplace，但是后面爆出了找不到cuda的问题。\r\n![62e7fa801f6b1a0f0afbcb2f8e90e35](https://user-images.githubusercontent.com/41718765/147726843-18358a53-7eb0-4c97-9602-a76bb0aa3b11.png)\r\n",
        "state": "closed",
        "user": "hanyanze",
        "closed_by": "hanyanze",
        "created_at": "2021-12-30T06:22:24+00:00",
        "updated_at": "2021-12-31T00:37:51+00:00",
        "closed_at": "2021-12-31T00:37:51+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1586,
        "title": "🌟【有奖填答】欢迎大家将使用PaddleClas中遇到的问题和意见反馈给我们",
        "body": "亲爱的开发者朋友们大家好！\r\n为了更好地了解您的应用需求，我们精心筹划了这次有奖问卷，您的反馈将直接影响PaddleClas的产品设计，并期待与您深入交流合作！\r\n\r\n我们会挑选20名高质量反馈者，送出50-100元不等的京东卡、《深度学习零基础实践》书籍等奖品💝\r\n问卷🔗：https://paddleqiyeban.wjx.cn/vj/YOWXHiG.aspx?udsid=186980",
        "state": "closed",
        "user": "lilith-zy",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-20T07:28:02+00:00",
        "updated_at": "2024-04-02T03:02:22+00:00",
        "closed_at": "2022-05-24T06:56:09+00:00",
        "comments_count": [
            "ckseweccsdssaawqwgjgDwww",
            "yuwoyizhan",
            "yuwoyizhan",
            "renmada",
            "weisy11",
            "paddle-bot-old[bot]",
            "BuaaAlban"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1582,
        "title": "如何使用GPU进行数据增强处理",
        "body": "训练过程中观察到，CPU和GPU交替使用，CPU或GPU在使用时使用率都能达到100%，但CPU处理时间较长，占整个batch_cost一半以上，导致GPU的实际利用率较低，可能是数据增强比较耗CPU？Paddle是否支持使用GPU进行数据增强的处理？\r\n机器配置：Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz（20核40线程）  *  2，RTX3090  *  4\r\n模型backbone：PPLCNet_x2_5\r\nDataLoader配置：\r\n![image](https://user-images.githubusercontent.com/23421457/146705495-0dfeb99e-b085-4819-9e48-95cb0ca05290.png)\r\n",
        "state": "open",
        "user": "niancheng",
        "closed_by": null,
        "created_at": "2021-12-20T03:15:43+00:00",
        "updated_at": "2024-02-26T04:28:57+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "niancheng",
            "cuicheng01",
            "niancheng",
            "niancheng",
            "weisy11",
            "niancheng",
            "cuicheng01",
            "cuicheng01",
            "niancheng"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1606,
        "title": "batch>1的情况下提特征为什么和batch=1的结果不同?请问会对特征匹配结果造成影响么",
        "body": null,
        "state": "open",
        "user": "kkpssr",
        "closed_by": null,
        "created_at": "2021-12-30T03:04:11+00:00",
        "updated_at": "2024-02-26T04:28:56+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "kkpssr",
            "cuicheng01",
            "kkpssr"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1608,
        "title": "关于蒸馏训练过程出现的问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：最新版本\r\n 2. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，Python3.6\r\n  c. CUDA/cuDNN版本， CUDA10.2/cuDNN 7.6.5 \r\n\r\n具体过程：\r\n1、准备了50个类别数据集，生成 list.txt等文件并训练R50\r\n2、把训练好的R50 best model 放入 pretrained目录\r\n3、在先前的50个类别中随意加入未分类的数据，并重新生成 list.txt等文件\r\n4、使用蒸馏训练Mobilenet-large model，训练了120 epoch\r\n5、测试Mobilenet-large best model，发现准确率非常低\r\n\r\n请问上述训练过程是否正确？问题处在哪里？\r\n",
        "state": "closed",
        "user": "205418367",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-30T07:19:05+00:00",
        "updated_at": "2022-05-24T06:56:12+00:00",
        "closed_at": "2022-05-24T06:56:10+00:00",
        "comments_count": [
            "littletomatodonkey",
            "205418367",
            "ChrisMengxl",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1614,
        "title": "。",
        "body": "不好意思，没问题了。。。。",
        "state": "closed",
        "user": "yepou85",
        "closed_by": "weisy11",
        "created_at": "2022-01-03T07:37:40+00:00",
        "updated_at": "2022-01-04T08:40:38+00:00",
        "closed_at": "2022-01-04T08:40:38+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1611,
        "title": "跪求clas项目合集",
        "body": "https://aistudio.baidu.com/aistudio/projectdetail/450925?channelType=0&channel=0\r\npaddlex等很多套件已经出了一个项目合集,并且有静态图和动态图版本,项目合集中蕴含了paddlex的4个主要方向,图像分类,目标检测,语义分割,实例分割,每个方向都至少有一个项目,项目里面包含项目代码,一些参数和代码的解释,注释等.\r\n希望clas也可以出一个项目合集,蕴含clas目前所包含的所有比较不同的方向,比如根据模型有较大差异,ResNet,Transformer,pp_shitu,图像分类,知识蒸馏,量化等方向做一个项目合集,最好是包含静态图和动态图版本,如果你们没精力的话,做个动态图版本也行,这样我们这些学习者就不用到处找项目和代码来学习了.动态图版本肯定要支持飞桨2.2.1和clas最新release版本.最好就是学习完这个clas项目合集,可以把clas多数知识都会应用了,不要求掌握原理,比如模型原理等.clas目前我只知道用于图像分类和pp_shitu这两个方向,不知道还能否用于其他方向.而且你们做这个合集,希望可以包含一个项目,项目里面的网络是自定义,比较深的网络,包含卷积,池化,drop等API,这种项目太少见了,现在都是直接应用ResNet,搞得我简单的神经网络编程反而不会了,估计MNIST适合做这个项目.有些图像分类只需要很小的网络,因为对于延迟要求非常低.最好再来个项目教导我们如何写ResNet,毕竟这个技术对于图像分类太有用了.做视频太慢了,还是做个项目合集好,做视频半年精力才几个小视频,甚至讲解基础知识.做项目对你们来说,7天就可以弄个项目合集了,包含很多知识了,只限于应用,不限于原理,我只需要改代码,哈哈哈哈.\r\n还有一个建议,你们的clas更新文档能否加个中文,现在看clas更新,好像只有英文,我不懂英文.\r\n",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-30T08:25:53+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:05+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1612,
        "title": "请问配置文件如何配置",
        "body": "![9443ce29ac5d5e2b6f80a9a4749b75c](https://user-images.githubusercontent.com/31364852/147807344-e50deb2e-a5db-4518-ae68-c5f81e6345c8.png)\r\n上述预训练模型的配置文件如何配置，比如这个ResNet101_vd.yaml，在PaddleOCR项目里做检测的，训练时报各种参数错误",
        "state": "closed",
        "user": "Atiuiee",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2021-12-31T06:30:47+00:00",
        "updated_at": "2022-04-19T06:59:25+00:00",
        "closed_at": "2022-04-19T06:59:06+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1618,
        "title": "PP-shitu训练特征提取部分报错",
        "body": "\r\n 1. PaddleClas release/2.3\r\n 2. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n 3. 报错如下：Traceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 138, in __init__\r\n    self.device, self.use_dali)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/__init__.py\", line 81, in build_dataloader\r\n    dataset = eval(dataset_name)(**config_dataset)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/dataloader/vehicle_dataset.py\", line 102, in __init__\r\n    self._load_anno()\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/dataloader/vehicle_dataset.py\", line 116, in _load_anno\r\n    self.cameras.append(np.int64(l[2]))\r\nIndexError: list index out of range\r\n",
        "state": "closed",
        "user": "zuoyou121",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-04T16:51:50+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:07+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1622,
        "title": "训练报错：ValueError: (InvalidArgument) The 'shape' attribute in ReshapeOp is invalid.",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n  **paddleClas： 2.3  paddle：2.2.0**\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n win10， python3.7\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n报错内容：\r\n![image](https://user-images.githubusercontent.com/63645468/148336093-50dae68d-4c84-48a1-9e5b-5d7b8b804215.png)\r\n配置文件设置：\r\n![image](https://user-images.githubusercontent.com/63645468/148336147-0978726e-02da-4007-b120-205737a1c3fb.png)\r\n\r\n根据报错内容猜测是 tripletlossV2 设置的问题",
        "state": "closed",
        "user": "Enn29",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-06T06:03:46+00:00",
        "updated_at": "2023-11-13T02:47:36+00:00",
        "closed_at": "2022-04-19T06:59:08+00:00",
        "comments_count": [
            "Enn29",
            "Intsigstephon",
            "Enn29",
            "Enn29",
            "Intsigstephon",
            "Enn29",
            "Intsigstephon",
            "paddle-bot-old[bot]",
            "JYC2001",
            "Yanic0420",
            "pcycccccc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1624,
        "title": "QQ群是加不了么。",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "umono",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-06T07:51:52+00:00",
        "updated_at": "2022-10-18T06:48:59+00:00",
        "closed_at": "2022-10-18T06:48:57+00:00",
        "comments_count": [
            "Intsigstephon",
            "umono",
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1623,
        "title": "图像分类",
        "body": "您好，对于一张图像，图片中可能有其它的物体，这个能用于图像分类识别吗？\r\n比如判断一张图片中是否有火车，图片如下面这样，然后我训练集中都是如下这样的图片，最终可以可以用图像分类来检测图像中是否有火车吗？\r\n![image](https://user-images.githubusercontent.com/43515926/148342696-dea2d4e2-e622-462d-b30b-67a851d6e4ea.png)\r\n",
        "state": "closed",
        "user": "zcswdt",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-06T07:06:22+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:08+00:00",
        "comments_count": [
            "Intsigstephon",
            "zcswdt",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1625,
        "title": "训练报错",
        "body": "您好，我训练1分类，执行下面脚本，python tools/train.py -c ./ppcls/configs/quick_start/ResNet50_vd.yaml -o Arch.pretrained=True\r\n报错如下：\r\n![image](https://user-images.githubusercontent.com/43515926/148358659-cfe9a922-5a92-4a45-ac21-599edb9502b1.png)\r\n\r\n",
        "state": "closed",
        "user": "zcswdt",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-06T08:57:49+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:09+00:00",
        "comments_count": [
            "Intsigstephon",
            "zcswdt",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1629,
        "title": "1分类训练报错",
        "body": "您好，我的类别只有1个，我在配置文件中把类别数目改成1，\r\n![image](https://user-images.githubusercontent.com/43515926/148486687-9da1a4bc-b7b3-4846-8119-48e10d4c84eb.png)\r\n但是训练会报如下的错误，麻烦帮忙看看，谢谢了。\r\n![image](https://user-images.githubusercontent.com/43515926/148486789-dd56121f-1cf3-4bc1-be46-7550939b583d.png)\r\n",
        "state": "closed",
        "user": "zcswdt",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-07T03:28:00+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:10+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1631,
        "title": "c++ 部署",
        "body": "请问有PP-LCNet的openvino工具的demo吗？",
        "state": "closed",
        "user": "czyczyczy",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-07T08:28:51+00:00",
        "updated_at": "2022-04-19T06:59:26+00:00",
        "closed_at": "2022-04-19T06:59:11+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1633,
        "title": "swintransformer模型export后使用deploy下的predict_cls.py验证不准确",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.3和PaddlePaddle 2.2.1\r\n 2. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.1\r\n 3. 模型：SwinTransformer_base_patch4_window7_224\r\n\r\n问题：训练了SwinTransformer_base_patch4_window7_224模型，训练模型保存后，使用tools文件夹下的infer.py脚本进行预测，预测类别及得分如下：\r\n![pcls_issue1](https://user-images.githubusercontent.com/34699510/148877311-7b25889d-da6c-4ba0-9b2e-fe7fe3619e57.png)\r\n\r\n使用以下命令进行模型导出：\r\n`python tools/export_model.py -c ./deploy/models/ppswin_b224_0106/SwinTransformer_base_patch4_window7_224.yaml -o weights=output/SwinTransformer_base_patch4_window7_224/best_model`\r\n\r\n导出后获得inference模型，使用以下命令对同一张图片进行预测：\r\n`python python/predict_cls.py \\\r\n    -c configs/inference_cls.yaml \\\r\n    -o Global.infer_imgs=/home/dbsb-data/appdbsb9/clstrain/odnega/nega_00088.jpg \\\r\n    -o Global.inference_model_dir=../inference/ \\\r\n    -o PostProcess.Topk.class_id_map_file=None`\r\n预测类别及得分如下：\r\n![pcls_issue2](https://user-images.githubusercontent.com/34699510/148877541-7494ac43-2919-4e30-9aaa-1ee205f09a6c.png)\r\n\r\n麻烦看下什么原因，同样的环境的代码文件，导出的ResNet50模型则不存在此问题。",
        "state": "closed",
        "user": "BerryRB",
        "closed_by": "Intsigstephon",
        "created_at": "2022-01-11T03:42:31+00:00",
        "updated_at": "2022-11-11T02:13:21+00:00",
        "closed_at": "2022-01-11T07:11:34+00:00",
        "comments_count": [
            "Intsigstephon",
            "BerryRB",
            "Intsigstephon",
            "Intsigstephon",
            "BerryRB",
            "BerryRB",
            "Intsigstephon",
            "BerryRB",
            "weiluonika"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1637,
        "title": "使用PaddleClass的recognition是否能用于异常检测？",
        "body": "你好，请问使用PaddleClass的recognition是否能用于异常检测？比如当出现训练集中不存在的类别物体时，则判别为-1这个类别？类似于检索的思想？",
        "state": "closed",
        "user": "ZZHHogan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-14T07:30:22+00:00",
        "updated_at": "2022-04-26T06:54:02+00:00",
        "closed_at": "2022-04-26T06:54:00+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1641,
        "title": "learning rate的实现是不是存在问题？",
        "body": "无论是linear还是cosine，只要warmup>0，直接变成LinearWarmup。\r\nPolynomialDecay，CosineAnnealingDecay，LinearWarmup这三者应该是不同的衰减策略\r\n![image](https://user-images.githubusercontent.com/43545086/149566958-bdeb1210-e2e6-410c-850a-2e5d9c7ee14e.png)\r\n![image](https://user-images.githubusercontent.com/43545086/149567017-33a6228b-2545-4b1d-af88-b8f173679f74.png)\r\n",
        "state": "closed",
        "user": "renmada",
        "closed_by": "renmada",
        "created_at": "2022-01-14T18:34:53+00:00",
        "updated_at": "2022-01-17T13:36:29+00:00",
        "closed_at": "2022-01-17T13:36:29+00:00",
        "comments_count": [
            "weisy11",
            "renmada",
            "weisy11",
            "weisy11",
            "renmada"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1643,
        "title": "Please set \"Arch.class_num\" in config if use \"CutmixOperator\".",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas 2.3 和PaddlePaddle 2.1.2\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：——Aistudio\r\n  a. 具体操作系统 Linux\r\n  b. Python版本号 Python3.7\r\n\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log:\r\n ------------------------------------------------------------------------------------------------------\r\n使用 DataAugment/ResNet50_Cutmix.yaml 模板，但类别67类，\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 50\r\n  eval_during_train: True\r\n  eval_interval: 10\r\n  epochs: 300\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  **class_num: 67**\r\n......\r\n**Arch:  --此处没有设置Arch.class_num: 67  ，但是全局设置class_num: 67** \r\n  name: ResNet50\r\n\r\n\r\n[2022/01/16 18:51:04] root ERROR: Please set \"Arch.class_num\" in config if use \"CutmixOperator\".\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 121, in __init__\r\n    self.config[\"DataLoader\"], \"Train\", self.device, self.use_dali)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/__init__.py\", line 112, in build_dataloader\r\n    batch_ops = create_operators(batch_transform, class_num)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/__init__.py\", line 57, in create_operators\r\n    op = op_func(**param)\r\n  File \"/home/aistudio/PaddleClas/ppcls/data/preprocess/batch_ops/batch_operators.py\", line 117, in __init__\r\n    raise Exception(msg)\r\n**Exception: Please set \"Arch.class_num\" in config if use \"CutmixOperator\".**\r\n-------------------------------------------------------------------------------------------------------------------\r\n问题是，DataAugment/ResNet50_Baseline.yaml 设置全局class_num: 67可以，为啥ResNet50_Cutmix.yaml 不可以用全局？\r\n\r\n另外，若设置Arch.class_num: 67 则提示：\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py:1301: UserWarning: Skip loading for fc.bias. fc.bias receives a shape [1000], but the expected shape is [67].",
        "state": "closed",
        "user": "ChrisMengxl",
        "closed_by": "ChrisMengxl",
        "created_at": "2022-01-16T11:01:57+00:00",
        "updated_at": "2022-01-17T11:14:00+00:00",
        "closed_at": "2022-01-17T11:14:00+00:00",
        "comments_count": [
            "Intsigstephon",
            "TingquanGao",
            "ChrisMengxl",
            "ChrisMengxl"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1642,
        "title": "paddle里有何torch一样的einops.rearrange张量操作吗 ",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "caomao1111",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-15T03:31:41+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:13+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1644,
        "title": "遇到环境问题应该怎么解决？如何查看paddle中所需要的cuda cudnn版本？",
        "body": "1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.2和PaddlePaddle 2.1.3\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如windows\r\n  b. Python版本号，如Python38\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.3.1等\r\n 4. 根据readme中提示执行 报错\r\n 5. 报错信息如下\r\nTraceback (most recent call last):\r\n  File \"python/predict_system.py\", line 134, in <module>\r\n    main(config)\r\n  File \"python/predict_system.py\", line 125, in main\r\n    output = system_predictor.predict(img)\r\n  File \"python/predict_system.py\", line 89, in predict\r\n    results = self.det_predictor.predict(img)\r\n  File \"D:\\project2021\\PaddleClas\\deploy\\python\\predict_det.py\", line 120, in predict\r\n    self.paddle_predictor.run()\r\nOSError: In user code:\r\n\r\n    File \"tools/export_model.py\", line 105, in <module>\r\n      main()\r\n    File \"tools/export_model.py\", line 101, in main\r\n      run(FLAGS, cfg)\r\n    File \"tools/export_model.py\", line 69, in run\r\n      trainer.export(FLAGS.output_dir)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/engine/trainer.py\", line 460, in export\r\n      input_spec, static_model.forward.main_program,\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 534, in main_program\r\n      concrete_program = self.concrete_program\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 454, in concrete_program\r\n      return self.concrete_program_specify_input_spec(input_spec=None)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 488, in concrete_program_specify_input_spec\r\n      *desired_input_spec)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 402, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 711, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 702, in _build_once\r\n      class_instance=cache_key.class_instance)\r\n    File \"<decorator-gen-65>\", line 2, in from_func_spec\r\n\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 40, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 652, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/paddle/temp/tmp63eoqh83.py\", line 27, in forward\r\n      false_fn_1, (), (), (out,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/meta_arch.py\", line 29, in forward\r\n      out = self.get_pred()\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/yolo.py\", line 75, in get_pred\r\n      bbox_pred, bbox_num = self._forward()\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/architectures/yolo.py\", line 59, in _forward\r\n      body_feats = self.backbone(self.inputs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpdhlfqusi.py\", line 41, in forward\r\n      for_loop_condition_0, for_loop_body_0, [idx, x, __for_loop_var_index_0]\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 577, in forward\r\n      x = stage(x)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpo98hbbkb.py\", line 19, in forward\r\n      for_loop_body_1, [__for_loop_var_index_1, block_out])\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 44, in convert_while_loop\r\n      loop_vars = _run_py_while(cond, body, loop_vars)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 58, in _run_py_while\r\n      loop_vars = body(*loop_vars)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 427, in forward\r\n      block_out = block(block_out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 365, in forward\r\n      out = self.branch2b(out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/paddle/temp/tmpmldmt48g.py\", line 31, in forward\r\n      'sync_bn'], true_fn_8, false_fn_8, (out,), (out,), (out,))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 210, in convert_ifelse\r\n      return _run_py_ifelse(pred, true_fn, false_fn, true_args, false_args)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 235, in _run_py_ifelse\r\n      return true_fn(*true_args) if pred else false_fn(*false_args)\r\n    File \"/paddle/code/gry/icode/baidu/personal-code/DetDygAiflow/PaddleDetection_local/ppdet/modeling/backbones/resnet.py\", line 133, in forward\r\n      out = self.norm(out)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 898, in __call__\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/nn.py\", line 1389, in forward\r\n      type=\"batch_norm\", inputs=inputs, outputs=outputs, attrs=attrs)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/dygraph/layer_object_helper.py\", line 52, in append_op\r\n      stop_gradient=stop_gradient)\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3232, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/usr/local/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2312, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    ExternalError:  Cudnn error, CUDNN_STATUS_BAD_PARAM  (at C:/home/workspace/Paddle_release/paddle/fluid/operators/batch_norm_op.cu:372)\r\n      [operator < batch_norm > error]\r\n\r\n\r\n其中cpu可以运行，可能是当前cuda10.2的cudnn版本过低？",
        "state": "closed",
        "user": "ZZHHogan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-16T11:36:53+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:14+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1645,
        "title": "请问怎样增强测试",
        "body": "请问在图像分类过程中，如何使用镜像、旋转、多尺度等增强测试",
        "state": "closed",
        "user": "huilin16",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-18T07:53:36+00:00",
        "updated_at": "2022-04-19T06:59:24+00:00",
        "closed_at": "2022-04-19T06:59:15+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1650,
        "title": "请问代码改成单个文件训练不用加后缀怎么改",
        "body": "比如现在训练是python3 python/build_gallery.py -c configs/build_general.yaml -o IndexProcess.data_file=\"./drink_dataset_v1.0/gallery/drink_label_all.txt\" -o IndexProcess.index_dir=\"./drink_dataset_v1.0/index_all\"\r\n我想改成python3 python/build_gallery.py就可以直接训练，方便打包成exe文件应用",
        "state": "closed",
        "user": "linkangren",
        "closed_by": "linkangren",
        "created_at": "2022-01-23T07:37:27+00:00",
        "updated_at": "2022-01-23T08:23:36+00:00",
        "closed_at": "2022-01-23T08:23:36+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1647,
        "title": "请问paddleClas支持win10下，cuda10.2，python3.8的版本吗？",
        "body": "请问paddleClas支持win10下，cuda10.2，python3.8的版本吗？我这里运行例程一直报错，无法使用gpu，但是可以使用cpu。另外关于paddle的环境配置有教程吗？",
        "state": "closed",
        "user": "ZZHHogan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-21T02:49:42+00:00",
        "updated_at": "2022-04-26T06:54:03+00:00",
        "closed_at": "2022-04-26T06:54:01+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1655,
        "title": "请问支持linux多核CPU训练吗，是需要配置什么参数吗",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "we1085789948",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-27T01:05:32+00:00",
        "updated_at": "2022-05-24T06:56:13+00:00",
        "closed_at": "2022-05-24T06:56:10+00:00",
        "comments_count": [
            "we1085789948",
            "weisy11",
            "we1085789948",
            "we1085789948",
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1662,
        "title": "分类模型重新训练后，特征库原有的数据是不是不能用了？",
        "body": "分类模型重新训练后，特征库原有的数据是不是不能用了？\r\n还是如何操作？",
        "state": "closed",
        "user": "broodingimu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-28T04:23:29+00:00",
        "updated_at": "2022-05-24T06:56:11+00:00",
        "closed_at": "2022-05-24T06:56:11+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1671,
        "title": "GoogLeNet无法训练. forward报错",
        "body": "PaddleClas使用的 release/2.3版本\r\n\r\n代码如下：\r\n\r\n#输入\r\ninputs = [Input([None, 3, 224, 224], 'float32', name='image')]\r\nlabels = [Input([None, 1], 'int64', name='label')]\r\n\r\nnet = PaddleClas.GoogLeNet()\r\nmodel = paddle.Model(net, inputs, labels)\r\n\r\n#优化器\r\noptimizer = paddle.optimizer.Momentum(\r\n        learning_rate=0.01,\r\n        parameters=model.parameters())\r\n\r\nmodel.prepare(\r\n        optimizer,\r\n        paddle.nn.CrossEntropyLoss(),\r\n        paddle.metric.Accuracy(topk=(1, 5)))\r\n\r\n##略过准备数据集##\r\n\r\nmodel.fit(train_loader, epochs=50, verbose=1)\r\n\r\nNOTE:model.eval也不行,同样的forward有错，怀疑是网络结构有问题？\r\nnet那变量那里，换了几个其他模型，都不会报错\r\n\r\n\r\n详细错误：\r\n\r\npython 3.pretrain_test.py \r\n3.pretrain_test.py:1: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\n--------------------------------------------------------------------------------\r\n                         Models supported by PaddleClas                         \r\n+-------------------+----------------------------------------------------------+\r\n|       Series      |                           Name                           |\r\n+-------------------+----------------------------------------------------------+\r\n|      AlexNet      |                         AlexNet                          |\r\n|      DarkNet      |                        DarkNet53                         |\r\n|        DeiT       |             DeiT_base_distilled_patch16_224              |\r\n|                   |  DeiT_base_distilled_patch16_384  DeiT_base_patch16_224  |\r\n|                   | DeiT_base_patch16_384  DeiT_small_distilled_patch16_224  |\r\n|                   | DeiT_small_patch16_224  DeiT_tiny_distilled_patch16_224  |\r\n|                   |                  DeiT_tiny_patch16_224                   |\r\n|      DenseNet     |    DenseNet121  DenseNet161  DenseNet169  DenseNet201    |\r\n|                   |                       DenseNet264                        |\r\n|        DLA        | DLA46_c  DLA60x_c  DLA34  DLA60  DLA60x  DLA102  DLA102x |\r\n|                   |                     DLA102x2  DLA169                     |\r\n|        DPN        |           DPN68  DPN92  DPN98  DPN107  DPN131            |\r\n|    EfficientNet   |   EfficientNetB0  EfficientNetB0_small  EfficientNetB1   |\r\n|                   |      EfficientNetB2  EfficientNetB3  EfficientNetB4      |\r\n|                   |      EfficientNetB5  EfficientNetB6  EfficientNetB7      |\r\n|       ESNet       |     ESNet_x0_25  ESNet_x0_5  ESNet_x0_75  ESNet_x1_0     |\r\n|      GhostNet     |       GhostNet_x0_5  GhostNet_x1_0  GhostNet_x1_3        |\r\n|                   |                    GhostNet_x1_3_ssld                    |\r\n|      HarDNet      |     HarDNet39_ds  HarDNet68_ds  HarDNet68  HarDNet85     |\r\n|       HRNet       |    HRNet_W18_C  HRNet_W30_C  HRNet_W32_C  HRNet_W40_C    |\r\n|                   | HRNet_W44_C  HRNet_W48_C  HRNet_W64_C  HRNet_W18_C_ssld  |\r\n|                   |                     HRNet_W48_C_ssld                     |\r\n|     Inception     |           GoogLeNet  InceptionV3  InceptionV4            |\r\n|       MixNet      |               MixNet_S  MixNet_M  MixNet_L               |\r\n|    MobileNetV1    |  MobileNetV1_x0_25  MobileNetV1_x0_5  MobileNetV1_x0_75  |\r\n|                   |              MobileNetV1  MobileNetV1_ssld               |\r\n|    MobileNetV2    |  MobileNetV2_x0_25  MobileNetV2_x0_5  MobileNetV2_x0_75  |\r\n|                   |     MobileNetV2  MobileNetV2_x1_5  MobileNetV2_x2_0      |\r\n|                   |                     MobileNetV2_ssld                     |\r\n|    MobileNetV3    |     MobileNetV3_small_x0_35  MobileNetV3_small_x0_5      |\r\n|                   |     MobileNetV3_small_x0_75  MobileNetV3_small_x1_0      |\r\n|                   |     MobileNetV3_small_x1_25  MobileNetV3_large_x0_35     |\r\n|                   |     MobileNetV3_large_x0_5  MobileNetV3_large_x0_75      |\r\n|                   |     MobileNetV3_large_x1_0  MobileNetV3_large_x1_25      |\r\n|                   | MobileNetV3_small_x1_0_ssld  MobileNetV3_large_x1_0_ssld |\r\n|      PPLCNet      |        PPLCNet_x0_25  PPLCNet_x0_35  PPLCNet_x0_5        |\r\n|                   | PPLCNet_x0_75  PPLCNet_x1_0  PPLCNet_x1_5  PPLCNet_x2_0  |\r\n|                   |                       PPLCNet_x2_5                       |\r\n|       RedNet      |    RedNet26  RedNet38  RedNet50  RedNet101  RedNet152    |\r\n|       RegNet      |                       RegNetX_4GF                        |\r\n|      Res2Net      | Res2Net50_14w_8s  Res2Net50_26w_4s  Res2Net50_vd_26w_4s  |\r\n|                   |        Res2Net200_vd_26w_4s  Res2Net101_vd_26w_4s        |\r\n|                   |   Res2Net50_vd_26w_4s_ssld  Res2Net101_vd_26w_4s_ssld    |\r\n|                   |                Res2Net200_vd_26w_4s_ssld                 |\r\n|      ResNeSt      |            ResNeSt50  ResNeSt50_fast_1s1x64d             |\r\n|       ResNet      |  ResNet18  ResNet18_vd  ResNet34  ResNet34_vd  ResNet50  |\r\n|                   |   ResNet50_vc  ResNet50_vd  ResNet50_vd_v2  ResNet101    |\r\n|                   |   ResNet101_vd  ResNet152  ResNet152_vd  ResNet200_vd    |\r\n|                   | ResNet34_vd_ssld  ResNet50_vd_ssld  ResNet50_vd_ssld_v2  |\r\n|                   |        ResNet101_vd_ssld  Fix_ResNet50_vd_ssld_v2        |\r\n|                   |                  ResNet50_ACNet_deploy                   |\r\n|      ResNeXt      |   ResNeXt50_32x4d  ResNeXt50_vd_32x4d  ResNeXt50_64x4d   |\r\n|                   |           ResNeXt50_vd_64x4d  ResNeXt101_32x4d           |\r\n|                   |        ResNeXt101_vd_32x4d  ResNeXt101_32x8d_wsl         |\r\n|                   |       ResNeXt101_32x16d_wsl  ResNeXt101_32x32d_wsl       |\r\n|                   |     ResNeXt101_32x48d_wsl  Fix_ResNeXt101_32x48d_wsl     |\r\n|                   | ResNeXt101_64x4d  ResNeXt101_vd_64x4d  ResNeXt152_32x4d  |\r\n|                   |          ResNeXt152_vd_32x4d  ResNeXt152_64x4d           |\r\n|                   |                   ResNeXt152_vd_64x4d                    |\r\n|       ReXNet      |      ReXNet_1_0  ReXNet_1_3  ReXNet_1_5  ReXNet_2_0      |\r\n|                   |                        ReXNet_3_0                        |\r\n|       SENet       |     SENet154_vd  SE_HRNet_W64_C_ssld  SE_ResNet18_vd     |\r\n|                   |    SE_ResNet34_vd  SE_ResNet50_vd  SE_ResNeXt50_32x4d    |\r\n|                   |        SE_ResNeXt50_vd_32x4d  SE_ResNeXt101_32x4d        |\r\n|    ShuffleNetV2   |          ShuffleNetV2_swish  ShuffleNetV2_x0_25          |\r\n|                   | ShuffleNetV2_x0_33  ShuffleNetV2_x0_5  ShuffleNetV2_x1_0 |\r\n|                   |           ShuffleNetV2_x1_5  ShuffleNetV2_x2_0           |\r\n|     SqueezeNet    |               SqueezeNet1_0  SqueezeNet1_1               |\r\n|  SwinTransformer  |     SwinTransformer_large_patch4_window7_224_22kto1k     |\r\n|                   |    SwinTransformer_large_patch4_window12_384_22kto1k     |\r\n|                   |     SwinTransformer_base_patch4_window7_224_22kto1k      |\r\n|                   |     SwinTransformer_base_patch4_window12_384_22kto1k     |\r\n|                   |         SwinTransformer_base_patch4_window12_384         |\r\n|                   |         SwinTransformer_base_patch4_window7_224          |\r\n|                   |         SwinTransformer_small_patch4_window7_224         |\r\n|                   |         SwinTransformer_tiny_patch4_window7_224          |\r\n|       Twins       |   pcpvt_small  pcpvt_base  pcpvt_large  alt_gvt_small    |\r\n|                   |               alt_gvt_base  alt_gvt_large                |\r\n|        VGG        |                VGG11  VGG13  VGG16  VGG19                |\r\n| VisionTransformer |        ViT_base_patch16_224  ViT_base_patch16_384        |\r\n|                   |       ViT_base_patch32_384  ViT_large_patch16_224        |\r\n|                   |       ViT_large_patch16_384  ViT_large_patch32_384       |\r\n|                   |                  ViT_small_patch16_224                   |\r\n|      Xception     |        Xception41  Xception41_deeplab  Xception65        |\r\n|                   |              Xception65_deeplab  Xception71              |\r\n+-------------------+----------------------------------------------------------+\r\n                                                        Powered by PaddlePaddle!\r\n--------------------------------------------------------------------------------\r\nW0206 21:22:07.875423 94955 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 11.2, Runtime API Version: 11.1\r\nW0206 21:22:07.877460 94955 device_context.cc:465] device: 0, cuDNN Version: 8.1.\r\nThe loss value printed in the log is the current step, and the metric is the average value of previous steps.\r\nEpoch 1/50\r\n/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/tensor/creation.py:130: DeprecationWarning: `np.object` is a deprecated alias for the builtin `object`. To silence this warning, use `object` by itself. Doing this will not modify any behavior and is safe. \r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  if data.dtype == np.object:\r\n/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/fluid/layers/utils.py:77: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.9 it will stop working\r\n  return (isinstance(seq, collections.Sequence) and\r\nTraceback (most recent call last):\r\n  File \"3.pretrain_test.py\", line 134, in <module>\r\n    model.fit(train_loader, epochs=50, verbose=1)\r\n  File \"/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/hapi/model.py\", line 1732, in fit\r\n    logs = self._run_one_epoch(train_loader, cbks, 'train')\r\n  File \"/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/hapi/model.py\", line 2062, in _run_one_epoch\r\n    outs = getattr(self, mode + '_batch')(*_inputs)\r\n  File \"/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/hapi/model.py\", line 1061, in train_batch\r\n    loss = self._adapter.train_batch(inputs, labels, update)\r\n  File \"/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/hapi/model.py\", line 716, in train_batch\r\n    losses = self.model._loss(*(to_list(outputs) + labels))\r\n  File \"/home/xieyunyao/miniconda3/envs/PP22/lib/python3.8/site-packages/paddle/fluid/dygraph/layers.py\", line 914, in __call__\r\n    outputs = self.forward(*inputs, **kwargs)\r\nTypeError: forward() takes 3 positional arguments but 5 were given",
        "state": "closed",
        "user": "Water2style",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-02-06T20:26:28+00:00",
        "updated_at": "2022-05-24T06:56:14+00:00",
        "closed_at": "2022-05-24T06:56:13+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1666,
        "title": "商品识别复现问题",
        "body": "你好，我用release2.3版本代码，本机cuda11.4，容器内cuda11.1来复现商品识别。检测模型结果不对。流程和教程一致，请问是什么问题？\r\n![nongfu_spring](https://user-images.githubusercontent.com/53750640/151650036-165a6011-87bc-467f-a4e3-c27b6995a9df.jpeg)\r\n\r\n",
        "state": "closed",
        "user": "JR-Wang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-01-29T06:16:56+00:00",
        "updated_at": "2022-09-27T08:08:49+00:00",
        "closed_at": "2022-05-24T06:56:12+00:00",
        "comments_count": [
            "cuicheng01",
            "JR-Wang",
            "cuicheng01",
            "JR-Wang",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1672,
        "title": "人脸识别问题",
        "body": "请问，在PP-ShiTu中，将主体检测模型换成人脸识别模型后，是不是就变成了人脸识别应用了呢，还需要修改其他的内容吗？",
        "state": "closed",
        "user": "zgwg",
        "closed_by": "zgwg",
        "created_at": "2022-02-07T06:09:58+00:00",
        "updated_at": "2022-02-17T00:31:42+00:00",
        "closed_at": "2022-02-17T00:31:42+00:00",
        "comments_count": [
            "weisy11",
            "zgwg",
            "weisy11",
            "zgwg"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1675,
        "title": "KeyError: None",
        "body": "\r\n[2022/02/07 17:00:49] root INFO: Arch :\r\n[2022/02/07 17:00:49] root INFO:     class_num : 200\r\n[2022/02/07 17:00:49] root INFO:     name : MobileNetV3_large_x1_0\r\n[2022/02/07 17:00:49] root INFO:     pretrained : False\r\n[2022/02/07 17:00:49] root INFO: DataLoader :\r\n[2022/02/07 17:00:49] root INFO:     Eval :\r\n[2022/02/07 17:00:49] root INFO:         dataset :\r\n[2022/02/07 17:00:49] root INFO:             cls_label_path : ./dataset/chengyu/val_list.txt\r\n[2022/02/07 17:00:49] root INFO:             image_root : ./dataset/chengyu/\r\n[2022/02/07 17:00:49] root INFO:             name : ImageNetDataset\r\n[2022/02/07 17:00:49] root INFO:             transform_ops :\r\n[2022/02/07 17:00:49] root INFO:                 DecodeImage :\r\n[2022/02/07 17:00:49] root INFO:                     channel_first : False\r\n[2022/02/07 17:00:49] root INFO:                     to_rgb : True\r\n[2022/02/07 17:00:49] root INFO:                 ResizeImage :\r\n[2022/02/07 17:00:49] root INFO:                     resize_short : 256\r\n[2022/02/07 17:00:49] root INFO:                 CropImage :\r\n[2022/02/07 17:00:49] root INFO:                     size : 224\r\n[2022/02/07 17:00:49] root INFO:                 NormalizeImage :\r\n[2022/02/07 17:00:49] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/02/07 17:00:49] root INFO:                     order :\r\n[2022/02/07 17:00:49] root INFO:                     scale : 1.0/255.0\r\n[2022/02/07 17:00:49] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/02/07 17:00:49] root INFO:         loader :\r\n[2022/02/07 17:00:49] root INFO:             num_workers : 0\r\n[2022/02/07 17:00:49] root INFO:             use_shared_memory : True\r\n[2022/02/07 17:00:49] root INFO:         sampler :\r\n[2022/02/07 17:00:49] root INFO:             batch_size : 64\r\n[2022/02/07 17:00:49] root INFO:             drop_last : False\r\n[2022/02/07 17:00:49] root INFO:             name : DistributedBatchSampler\r\n[2022/02/07 17:00:49] root INFO:             shuffle : False\r\n[2022/02/07 17:00:49] root INFO:     Train :\r\n[2022/02/07 17:00:49] root INFO:         dataset :\r\n[2022/02/07 17:00:49] root INFO:             cls_label_path : ./dataset/chengyu/train_list.txt\r\n[2022/02/07 17:00:49] root INFO:             image_root : ./dataset/chengyu/\r\n[2022/02/07 17:00:49] root INFO:             name : ImageNetDataset\r\n[2022/02/07 17:00:49] root INFO:             transform_ops :\r\n[2022/02/07 17:00:49] root INFO:                 DecodeImage :\r\n[2022/02/07 17:00:49] root INFO:                     channel_first : False\r\n[2022/02/07 17:00:49] root INFO:                     to_rgb : True\r\n[2022/02/07 17:00:49] root INFO:                 RandCropImage :\r\n[2022/02/07 17:00:49] root INFO:                     size : 224\r\n[2022/02/07 17:00:49] root INFO:                 RandFlipImage :\r\n[2022/02/07 17:00:49] root INFO:                     flip_code : 1\r\n[2022/02/07 17:00:49] root INFO:                 NormalizeImage :\r\n[2022/02/07 17:00:49] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/02/07 17:00:49] root INFO:                     order :\r\n[2022/02/07 17:00:49] root INFO:                     scale : 1.0/255.0\r\n[2022/02/07 17:00:49] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/02/07 17:00:49] root INFO:         loader :\r\n[2022/02/07 17:00:49] root INFO:             num_workers : 0\r\n[2022/02/07 17:00:49] root INFO:             use_shared_memory : True\r\n[2022/02/07 17:00:49] root INFO:         sampler :\r\n[2022/02/07 17:00:49] root INFO:             batch_size : 32\r\n[2022/02/07 17:00:49] root INFO:             drop_last : False\r\n[2022/02/07 17:00:49] root INFO:             name : DistributedBatchSampler\r\n[2022/02/07 17:00:49] root INFO:             shuffle : True\r\n[2022/02/07 17:00:49] root INFO: Global :\r\n[2022/02/07 17:00:49] root INFO:     checkpoints : None\r\n[2022/02/07 17:00:49] root INFO:     device : gpu\r\n[2022/02/07 17:00:49] root INFO:     epochs : 80\r\n[2022/02/07 17:00:49] root INFO:     eval_during_train : True\r\n[2022/02/07 17:00:49] root INFO:     eval_interval : 1\r\n[2022/02/07 17:00:49] root INFO:     image_shape : [3, 224, 224]\r\n[2022/02/07 17:00:49] root INFO:     output_dir : ./output/\r\n[2022/02/07 17:00:49] root INFO:     pretrained_model : None\r\n[2022/02/07 17:00:49] root INFO:     print_batch_step : 10\r\n[2022/02/07 17:00:49] root INFO:     save_inference_dir : ./inference\r\n[2022/02/07 17:00:49] root INFO:     save_interval : 1\r\n[2022/02/07 17:00:49] root INFO:     use_visualdl : False\r\n[2022/02/07 17:00:49] root INFO: Infer :\r\n[2022/02/07 17:00:49] root INFO:     PostProcess :\r\n[2022/02/07 17:00:49] root INFO:         class_id_map_file : ./dataset/chengyu/flowers102_label_list.txt\r\n[2022/02/07 17:00:49] root INFO:         name : Topk\r\n[2022/02/07 17:00:49] root INFO:         topk : 5\r\n[2022/02/07 17:00:49] root INFO:     batch_size : 10\r\n[2022/02/07 17:00:49] root INFO:     infer_imgs : docs/images/whl/demo.jpg\r\n[2022/02/07 17:00:49] root INFO:     transforms :\r\n[2022/02/07 17:00:49] root INFO:         DecodeImage :\r\n[2022/02/07 17:00:49] root INFO:             channel_first : False\r\n[2022/02/07 17:00:49] root INFO:             to_rgb : True\r\n[2022/02/07 17:00:49] root INFO:         ResizeImage :\r\n[2022/02/07 17:00:49] root INFO:             resize_short : 256\r\n[2022/02/07 17:00:49] root INFO:         CropImage :\r\n[2022/02/07 17:00:49] root INFO:             size : 224\r\n[2022/02/07 17:00:49] root INFO:         NormalizeImage :\r\n[2022/02/07 17:00:49] root INFO:             mean : [0.485, 0.456, 0.406]\r\n[2022/02/07 17:00:49] root INFO:             order :\r\n[2022/02/07 17:00:49] root INFO:             scale : 1.0/255.0\r\n[2022/02/07 17:00:49] root INFO:             std : [0.229, 0.224, 0.225]\r\n[2022/02/07 17:00:49] root INFO:         ToCHWImage : None\r\n[2022/02/07 17:00:49] root INFO: Loss :\r\n[2022/02/07 17:00:49] root INFO:     Eval :\r\n[2022/02/07 17:00:49] root INFO:         CELoss :\r\n[2022/02/07 17:00:49] root INFO:             weight : 1.0\r\n[2022/02/07 17:00:49] root INFO:     Train :\r\n[2022/02/07 17:00:49] root INFO:         CELoss :\r\n[2022/02/07 17:00:49] root INFO:             weight : 1.0\r\n[2022/02/07 17:00:49] root INFO: Metric :\r\n[2022/02/07 17:00:49] root INFO:     Eval :\r\n[2022/02/07 17:00:49] root INFO:         TopkAcc :\r\n[2022/02/07 17:00:49] root INFO:             topk : [1, 5]\r\n[2022/02/07 17:00:49] root INFO:     Train :\r\n[2022/02/07 17:00:49] root INFO:         TopkAcc :\r\n[2022/02/07 17:00:49] root INFO:             topk : [1, 5]\r\n[2022/02/07 17:00:49] root INFO: Optimizer :\r\n[2022/02/07 17:00:49] root INFO:     lr :\r\n[2022/02/07 17:00:49] root INFO:         last_epoch : -1\r\n[2022/02/07 17:00:49] root INFO:         learning_rate : 0.00375\r\n[2022/02/07 17:00:49] root INFO:         name : Cosine\r\n[2022/02/07 17:00:49] root INFO:         warmup_epoch : 5\r\n[2022/02/07 17:00:49] root INFO:     momentum : 0.9\r\n[2022/02/07 17:00:49] root INFO:     name : Momentum\r\n[2022/02/07 17:00:49] root INFO:     regularizer :\r\n[2022/02/07 17:00:49] root INFO:         coeff : 1e-06\r\n[2022/02/07 17:00:49] root INFO:         name : L2\r\n[2022/02/07 17:00:49] root INFO: profiler_options : None\r\n[2022/02/07 17:00:49] root INFO: train with paddle 2.2.1 and device CUDAPlace(0)\r\nW0207 17:00:49.699499 75104 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 6.1, Driver API Version: 11.5, Runtime API Version: 11.2\r\nW0207 17:00:49.708310 75104 device_context.cc:465] device: 0, cuDNN Version: 8.1.\r\nW0207 17:00:50.710325 75104 device_context.h:397] WARNING: device: 0. The installed Paddle is compiled with CUDNN 8.2, but CUDNN version in your machine is 8.1, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compa\r\ntible CUDNN version.\r\n[2022/02/07 17:00:51] root INFO: [Train][Epoch 1/80][Iter: 0/19]lr: 0.00004, top1: 0.00000, top5: 0.00000, CELoss: 5.37058, loss: 5.37058, batch_cost: 0.60833s, reader_cost: 0.06835, ips: 52.60268 images/sec, eta: 0:15:24\r\n[2022/02/07 17:00:53] root INFO: [Train][Epoch 1/80][Iter: 10/19]lr: 0.00043, top1: 0.00852, top5: 0.03409, CELoss: 5.33000, loss: 5.33000, batch_cost: 0.17235s, reader_cost: 0.00000, ips: 185.66441 images/sec, eta: 0:04:20\r\n[2022/02/07 17:00:54] root INFO: [Train][Epoch 1/80][Avg]top1: 0.00868, top5: 0.03299, CELoss: 5.31905, loss: 5.31905\r\nTrue\r\n1\r\n[2022/02/07 17:00:54] root INFO: [Eval][Epoch 1][Avg]\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"D:\\A_paddle\\PaddleClas\\ppcls\\engine\\engine.py\", line 283, in train\r\n    acc = self.eval(epoch_id)\r\n  File \"D:\\Anaconda\\envs\\paddledet\\lib\\site-packages\\decorator.py\", line 232, in fun\r\n    return caller(func, *(extras + args), **kw)\r\n  File \"D:\\Anaconda\\envs\\paddledet\\lib\\site-packages\\paddle\\fluid\\dygraph\\base.py\", line 331, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"D:\\A_paddle\\PaddleClas\\ppcls\\engine\\engine.py\", line 329, in eval\r\n    eval_result = self.eval_func(self, epoch_id)\r\n  File \"D:\\A_paddle\\PaddleClas\\ppcls\\engine\\evaluation\\classification.py\", line 149, in classification_eval\r\n    return output_info[metric_key].avg\r\nKeyError: None\r\n\r\n上面的问题可能性有哪些？  分类任务  我的flowers102_label_list.txt 对应的是中文的  不是  0 apple 是 0 苹果  ",
        "state": "closed",
        "user": "looooooooosee",
        "closed_by": "looooooooosee",
        "created_at": "2022-02-07T09:07:47+00:00",
        "updated_at": "2022-05-05T08:17:35+00:00",
        "closed_at": "2022-02-07T09:19:52+00:00",
        "comments_count": [
            "looooooooosee",
            "KyleWang-Hunter"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1676,
        "title": "训练reid在eval阶段异常",
        "body": "用的是aistudio环境，ppcls2.3\r\n报错信息\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/PaddleClas-release-2.3/tools/train_reid.py\", line 33, in <module>\r\n    engine.train()\r\n  File \"/home/aistudio/PaddleClas-release-2.3/ppcls/engine/engine_reid.py\", line 306, in train\r\n    acc = self.eval(epoch_id)\r\n  File \"<decorator-gen-293>\", line 2, in eval\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 351, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/aistudio/PaddleClas-release-2.3/ppcls/engine/engine_reid.py\", line 352, in eval\r\n    eval_result = self.eval_func(self, epoch_id)\r\n  File \"/home/aistudio/PaddleClas-release-2.3/ppcls/engine/evaluation/retrieval.py\", line 70, in retrieval_eval\r\n    gallery_img_id, keep_mask)\r\n  File \"/home/aistudio/PaddleClas-release-2.3/ppcls/metric/__init__.py\", line 45, in __call__\r\n    metric_dict.update(metric_func(*args, **kwargs))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/PaddleClas-release-2.3/ppcls/metric/metrics.py\", line 81, in forward       这里行数因为有print和原始不一样\r\n    equal_flag = paddle.index_select(equal_flag, num_rel_index, axis=0)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/tensor/search.py\", line 306, in index_select\r\n    return _C_ops.index_select(x, index, 'dim', axis)\r\nValueError: (InvalidArgument) The length of Input(Index) can't be 0.\r\n  [Hint: Expected index_dim[0] != 0 == true, but received index_dim[0] != 0:0 != true:1.] (at /paddle/paddle/fluid/operators/index_select_op.cc:59)\r\n  [operator < index_select > error]\r\n\r\n打印了metrics里面的num_rel_index.shape：得到输出num_rel_index [0]\r\n\r\nprint('num_rel_index', num_rel_index.shape)\r\nequal_flag = paddle.index_select(equal_flag, num_rel_index, axis=0)\r\n\r\n另外如果想计算mAP@100或者mAP@50，要如何配置？",
        "state": "closed",
        "user": "zouhan6806504",
        "closed_by": "zouhan6806504",
        "created_at": "2022-02-08T09:45:39+00:00",
        "updated_at": "2022-02-14T08:44:46+00:00",
        "closed_at": "2022-02-14T08:44:46+00:00",
        "comments_count": [
            "RainFrost1",
            "zouhan6806504",
            "RainFrost1",
            "zouhan6806504",
            "RainFrost1",
            "RainFrost1"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1677,
        "title": "PaddleClas蒸馏训练时，不收敛",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如**PaddleClas release/2.2**和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如**Linux**/Windows/MacOS\r\n  b. Python版本号，如Python3.6/**7**/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n————————————————————————————————————————————\r\n参考 [30 分钟玩转 PaddleClas（进阶版）](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_professional.md)\r\n完成 蒸馏 所有准备，并且运行没有报错，但是：\r\n[2022/02/10 00:50:51] root INFO: [Train][Epoch 10/200][Iter: 30/48]lr: 1.29818, top1: 0.00000, top5: 0.00000, CELoss_Student_Teacher: 6.90515, loss: 6.90515, batch_cost: 0.46951s, reader_cost: 0.00038, ips: 545.25154 images/sec, eta: 1:11:30\r\n[2022/02/10 00:50:56] root INFO: [Train][Epoch 10/200][Iter: 40/48]lr: 1.29801, top1: 0.00000, top5: 0.00000, CELoss_Student_Teacher: 6.90515, loss: 6.90515, batch_cost: 0.46928s, reader_cost: 0.00041, ips: 545.51759 images/sec, eta: 1:11:23\r\n[2022/02/10 00:50:59] root INFO: [Train][Epoch 10/200][Avg]top1: 0.00000, top5: 0.00000, CELoss_Student_Teacher: 6.90514, loss: 6.90514\r\n[2022/02/10 00:51:00] root INFO: [Eval][Epoch 10][Iter: 0/12]CELoss_Student: 6.95024, loss: 6.95024, top1: 0.00000, top5: 0.00000, batch_cost: 1.06017s, reader_cost: 0.66154, ips: 241.47002 images/sec\r\n[2022/02/10 00:51:04] root INFO: [Eval][Epoch 10][Iter: 10/12]CELoss_Student: 6.95057, loss: 6.95057, top1: 0.00000, top5: 0.00000, batch_cost: 0.39536s, reader_cost: 0.00013, ips: 647.51648 images/sec\r\n[2022/02/10 00:51:05] root INFO: [Eval][Epoch 10][Avg]CELoss_Student: 6.95059, loss: 6.95059, top1: 0.00000, top5: 0.00000\r\n[2022/02/10 00:51:05] root INFO: [Eval][Epoch 10][best metric: 0.0]\r\n\r\n可能得问题是？配置文件如下：\r\n[resnext152_vd_64x4d_distill_mv3_large_x1_0_d.txt](https://github.com/PaddlePaddle/PaddleClas/files/8034677/resnext152_vd_64x4d_distill_mv3_large_x1_0_d.txt)\r\n\r\n",
        "state": "closed",
        "user": "ChrisMengxl",
        "closed_by": "ChrisMengxl",
        "created_at": "2022-02-09T16:59:14+00:00",
        "updated_at": "2022-02-19T04:43:48+00:00",
        "closed_at": "2022-02-19T04:43:48+00:00",
        "comments_count": [
            "Intsigstephon",
            "ChrisMengxl",
            "Intsigstephon",
            "ChrisMengxl",
            "littletomatodonkey",
            "ChrisMengxl"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1678,
        "title": "准确度和教程文档里对不上.是什么原因呢",
        "body": "借鉴教程 https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_professional.md\r\n\r\n在CIFAR100上进行迁移学习：（唯一区别我是单卡，用的是AI-Studio上的V100）\r\n\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0,1,2,3\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/quick_start/professional/ResNet50_vd_CIFAR100.yaml \\\r\n        -o Global.output_dir=\"output_CIFAR\" \\\r\n        -o Arch.pretrained=True\r\n\r\n这是log：\r\n[2022/02/10 03:41:43] root INFO: [Eval][Epoch 100][Avg]CELoss: 1.29804, loss: 1.29804, top1: 0.68730, top5: 0.89730\r\n[2022/02/10 03:41:43] root INFO: [Eval][Epoch 100][best metric: 0.6888]\r\n[2022/02/10 03:41:43] root INFO: Already save model in output_CIFAR/ResNet50_vd/epoch_100\r\n[2022/02/10 03:41:44] root INFO: Already save model in output_CIFAR/ResNet50_vd/latest\r\n\r\n此时精度为 68.88%,\r\n然而教程里：\r\n“”验证集最高准确率为 0.718 左右，加载预训练模型之后，CIFAR100 数据集精度大幅提升，绝对精度涨幅 30%。”\r\n这接近差了 3%个点啊. config我完全没有变化，难道 71.8%用的不是这个config?\r\n是什么原因呢？ 这个68.88的话，具有参考意义吗?（因为写论文要用）谢谢！",
        "state": "closed",
        "user": "Water2style",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-02-09T19:50:20+00:00",
        "updated_at": "2022-05-24T06:56:15+00:00",
        "closed_at": "2022-05-24T06:56:15+00:00",
        "comments_count": [
            "Intsigstephon",
            "Water2style",
            "Intsigstephon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1692,
        "title": "建立新的索引库KeyError: 'image_root'",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本，这个不清楚\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log        没有修改\r\n\r\n![image](https://user-images.githubusercontent.com/48076464/154642452-8d973b3d-eccb-4bbc-861b-05e4c37d4472.png)\r\n![image](https://user-images.githubusercontent.com/48076464/154642592-de6b86bb-1270-4b76-80f8-971c684f507e.png)\r\n\r\n",
        "state": "closed",
        "user": "IsANewbee",
        "closed_by": "IsANewbee",
        "created_at": "2022-02-18T08:04:16+00:00",
        "updated_at": "2022-02-18T09:19:52+00:00",
        "closed_at": "2022-02-18T09:19:31+00:00",
        "comments_count": [
            "IsANewbee"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1696,
        "title": "商品识别配置文件问题",
        "body": "![image](https://user-images.githubusercontent.com/34127965/154878858-c983e183-1a95-44c1-a2dc-ac08316e9179.png)\r\n  在商品识别部分，存在以上四个配置文件，红框中两个配置文件都是没有预训练模型的，蓝框中两个配置文件都是有预训练模型的，想请问一下蓝框中的两个的配置文件预训练模型是用什么数据训练出来的，单看预训练模型的名称，里面有包含Aliproduct这个单词，具体存疑，希望能得到回复，谢谢。",
        "state": "closed",
        "user": "upperblacksmith",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-02-21T02:28:38+00:00",
        "updated_at": "2022-05-24T06:56:15+00:00",
        "closed_at": "2022-05-24T06:56:15+00:00",
        "comments_count": [
            "weisy11",
            "upperblacksmith",
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1699,
        "title": "商品匹配模型pplcnet_x25模型在jetson nano板子上每次加载模型要4、5分钟",
        "body": "如题\r\n",
        "state": "closed",
        "user": "njustczr",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-02-22T03:02:31+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:25+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1700,
        "title": "生成的模型无法在Netron中可视化",
        "body": "```bash\r\n使用的指令\r\npython3.7 tools/export_model.py -c ./ppcls/configs/ImageNet/ResNet/ResNet50.yaml -o Global.device=xpu\r\n```\r\n生成的文件\r\n![image](https://user-images.githubusercontent.com/16149477/155086645-40b68770-f28a-4418-a3f2-cc9eef110639.png)\r\n\r\n拖入Netron报错\r\n![8134b099d0ef20b2096f7b0ae35b0140](https://user-images.githubusercontent.com/16149477/155086696-4761373b-f9fe-4463-a7c0-f74d92c66d95.png)\r\n",
        "state": "closed",
        "user": "zhuangh7",
        "closed_by": "zhuangh7",
        "created_at": "2022-02-22T07:51:51+00:00",
        "updated_at": "2022-05-04T05:07:39+00:00",
        "closed_at": "2022-05-04T05:07:39+00:00",
        "comments_count": [
            "RainFrost1",
            "zhuangh7",
            "RainFrost1",
            "TingquanGao",
            "zhuangh7"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1704,
        "title": "请教一下，多标签分类可以用度量学习吗？可以用triplet_loss吗？",
        "body": "\r\n请教一下，多标签分类可以用度量学习吗？可以用triplet_loss吗？",
        "state": "closed",
        "user": "jjl001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-02-24T09:04:09+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:26+00:00",
        "comments_count": [
            "Intsigstephon",
            "jjl001",
            "Intsigstephon",
            "jjl001",
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1713,
        "title": "PaddleServing 部署模型服务什么时候可以在win和Mac上部署呢",
        "body": "如题，想弄打包成一个软件使用",
        "state": "closed",
        "user": "linkangren",
        "closed_by": "linkangren",
        "created_at": "2022-03-01T14:37:48+00:00",
        "updated_at": "2022-03-07T08:23:41+00:00",
        "closed_at": "2022-03-07T08:23:41+00:00",
        "comments_count": [
            "Intsigstephon"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1717,
        "title": "backbone-neck-head之间的激活函数",
        "body": "backbone和neck，neck和head之间没有发现激活函数，是不需要吗？或者是我理解错了？\r\n![861646041442_ pic](https://user-images.githubusercontent.com/40778859/156322012-dacc3089-f8ea-4c24-be78-14f287ab00b2.jpg)\r\n下图是FC\r\n![911646041794_ pic](https://user-images.githubusercontent.com/40778859/156322156-d411141d-019c-41ee-bb33-43b6b2e0e58e.jpg)\r\n\r\n",
        "state": "closed",
        "user": "jjl001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-02T08:17:06+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:27+00:00",
        "comments_count": [
            "Intsigstephon",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1723,
        "title": "TensorRT inference: no speed gain",
        "body": "Hi,\r\nWe are trying to use TensorRT to speed up inference. In particular, we are using a ViT_base_patch16_384 model, and installed a version of paddlepaddle_gpu compiled with TensorRT. However, the inference speed remains about the same with `use_tensorrt=True` and `use_fp16=True`. This is in contrast with the paddle-ocr repo, where we do observe a big increase in speed, especially with fp16.\r\n\r\nAny idea what could be the reason? Any help is appreciated, thanks. Relevant code:\r\n\r\n```\r\n    clas = PaddleClas(\r\n        inference_model_dir=f'{PaddleClsConfig.model_path}/export',\r\n        resize_short=384,\r\n        crop_size=384,\r\n        class_id_map_file=PaddleClsConfig.labels_path,\r\n        use_tensorrt=True,\r\n        use_fp16=True,\r\n        enable_mkldnn=True,\r\n    )\r\n\r\n    result = clas.predict(img, print_pred=True)\r\n    scores = next(result)\r\n    print(scores)\r\n    print(np.argmax(scores), f'{np.max(scores):.4f}')\r\n```\r\n\r\n",
        "state": "open",
        "user": "mokadevcloud",
        "closed_by": null,
        "created_at": "2022-03-02T17:26:49+00:00",
        "updated_at": "2024-02-26T04:28:54+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "mokadevcloud"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1724,
        "title": "多标签训练，MobileNetV1 改为 SE_ResNeXt50_vd_32x4d，Train环节正常，Eval环节报错。",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如**Linux**/Windows/MacOS\r\n  b. Python版本号，如Python3.6/**7**/8     **paddlepaddle 2.2.2.post101**  **PaddleClas 2.3**\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n[参考：多标签分类 quick start ](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_multilabel_classification.md)  仅 MobileNetV1 改为 SE_ResNeXt50_vd_32x4d ，使用预训练，batch_size : 128，在Aistudio训练，Train环节正常，Eval环节报错如下：\r\n\r\n```\r\n[2022/03/02 23:16:51] root INFO: [Train][Epoch 5/100][Iter: 130/137]lr: 0.09912, AccuracyScore: 0.95130, MultiLabelLoss: 0.12439, loss: 0.12439, batch_cost: 0.67130s, reader_cost: 0.00026, ips: 190.67534 images/sec, eta: 2:25:41\r\n[2022/03/02 23:16:54] root INFO: [Train][Epoch 5/100][Avg]AccuracyScore: 0.95130, MultiLabelLoss: 0.12436, loss: 0.12436\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 306, in train\r\n    acc = self.eval(epoch_id)\r\n  File \"<decorator-gen-293>\", line 2, in eval\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 351, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 352, in eval\r\n    eval_result = self.eval_func(self, epoch_id)\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/evaluation/classification.py\", line 81, in classification_eval\r\n    loss_dict = engine.eval_loss_func(out, batch[1])\r\n  File \"/home/aistudio/PaddleClas/ppcls/loss/__init__.py\", line 51, in __call__\r\n    loss = self.loss_func[0](input, batch)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/PaddleClas/ppcls/loss/multilabelloss.py\", line 41, in forward\r\n    loss = self._binary_crossentropy(x, target, class_num)\r\n  File \"/home/aistudio/PaddleClas/ppcls/loss/multilabelloss.py\", line 33, in _binary_crossentropy\r\n    logit=input, label=target)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/functional/loss.py\", line 257, in binary_cross_entropy_with_logits\r\n    out = _C_ops.sigmoid_cross_entropy_with_logits(logit, label)\r\nValueError: (InvalidArgument) The DataType of sigmoid_cross_entropy_with_logits Op's duplicable Variable X must be consistent. The current variable type is (float), but the previous variable type is (int64_t). (at /paddle/paddle/fluid/framework/operator.cc:1604)\r\n  [operator < sigmoid_cross_entropy_with_logits > error]\r\n```\r\n",
        "state": "closed",
        "user": "ChrisMengxl",
        "closed_by": "ChrisMengxl",
        "created_at": "2022-03-03T03:04:36+00:00",
        "updated_at": "2022-03-03T04:49:07+00:00",
        "closed_at": "2022-03-03T04:49:07+00:00",
        "comments_count": [
            "ChrisMengxl",
            "ChrisMengxl"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1725,
        "title": "paddle-gpu 安装后默认使用CPU问题",
        "body": "\r\n\r\n按paddle安装手册上，使用Docker环境命令（sudo docker run --name ppcls -v $PWD:/paddle --shm-size=8G --network=host -it paddlepaddle/paddle:2.1.0-gpu-cuda10.2-cudnn7 /bin/bash）进行容器后，报警告只能使用CPU，无法使用GPU\r\n\r\nPython 3.7.0 (default, May  9 2021, 21:14:18) \r\n[GCC 8.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import paddle\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\n/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/framework.py:299: UserWarning: You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\r\n  \"You are using GPU version Paddle, but your CUDA device is not set properly. CPU device will be used by default.\"\r\n>>> \r\n\r\n\r\n我本地的配置为NVIDIA-SMI 440.118.02   Driver Version: 440.118.02   CUDA Version: 10.2，本地环境跑pytorch模型没有问题，希望这个问题能获得解决！\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "Williamwsk",
        "closed_by": "Williamwsk",
        "created_at": "2022-03-03T09:06:44+00:00",
        "updated_at": "2022-03-04T03:29:57+00:00",
        "closed_at": "2022-03-04T02:55:17+00:00",
        "comments_count": [
            "TingquanGao",
            "Williamwsk",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1730,
        "title": "主体检测",
        "body": "请问主体检测可以检测出未训练类别的目标吗",
        "state": "closed",
        "user": "Jeling-W",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-05T10:07:51+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:28+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1734,
        "title": "增加convnext模型",
        "body": "我看了clas的图像分类模型库,好像swint模型最牛逼,top1和top5都最高.\r\nhttps://aistudio.baidu.com/aistudio/projectdetail/3407445?channelType=0&channel=0\r\nhttps://aistudio.baidu.com/aistudio/projectdetail/3476364?channelType=0&channel=0\r\n这两个项目都说convnext是CNN的极限,甚至超越swint,我看了clas所有模型库,好像没找到convnext这个模型,我想问问,这个模型复现了吗?\r\n如果没复现,clas能增加这个模型吗?\r\npassl里面好像实现了convnext这个模型,但是clas模型库中没找到.\r\n还有一个问题,passl库里面实现了几个自监督模型,我想问问,对于图像分类来说,你们打算几时引入自监督模型呢?目前在clas和dec好像没找到自监督模型.\r\n我手头有一堆图片,我需要图像分类,我只知道分类成2类,但我不知道如何分类,换个说法,我是个瞎子,看不到图片,需要算法或者模型帮我分类,希望早日引入自监督图像分类模型,谢谢.\r\n",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-07T06:20:47+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:29+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1731,
        "title": "MobileNetV2：pool2d 算子 ksize 参数有疑问",
        "body": "事情经过：我通过paddleclas-2.3训练了MobileNetV2\r\n\r\n并通过工具链（模型-》转换模型导出-》模型转换成paddle.js支持模型）\r\n\r\n但出现精度丢失异常，根据paddle.js排查，问题出现在pool2d算子上\r\n\r\n由于引擎里有自动修正机制，所以 paddlepaddle 不会出错，但是转到 paddlejs 就会出错\r\n\r\n具体过程查看https://github.com/PaddlePaddle/Paddle.js/issues/388#issuecomment-1059742374\r\n\r\n希望paddleclas越来越好，致上\r\n",
        "state": "closed",
        "user": "SpectrePrediction",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-05T11:26:31+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:28+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1732,
        "title": "MobileNetV1_retrieval 训练报错",
        "body": "\r\n使用MobileNetV1_retrieval.yaml进行图像识别训练时，按照官方配置进行训练，只修改了class_num，训练集路径等参数，会报如下的错误\r\n![QQ截图20220306193316](https://user-images.githubusercontent.com/34644177/156921482-b6bd8769-7265-4174-86b4-d6f9463b67c1.jpg)\r\n\r\n\r\n将配置文件进行如下修改可解决报错\r\n![image](https://user-images.githubusercontent.com/34644177/156921521-6ae20b48-6d2f-4f4b-91a0-2a7921180f4a.png)\r\nqin\r\n请验证一下是否为bug，还有BackboneStopLayer设置为name: flatten_0和name: \"flatten\"有什么区别吗，我看release/2.2中设置为name: flatten_0，release/2.3中设置为name: \"flatten\"。\r\n同样的还有ResNet50_ReID.yaml配置文件中的差异，release/2.2设置为name: \"adaptive_avg_pool2d_0\"，release/2.3设置为name: \"avg_pool\"，这两个有什么区别？",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "lazyn1997",
        "created_at": "2022-03-06T11:48:36+00:00",
        "updated_at": "2022-03-07T13:34:05+00:00",
        "closed_at": "2022-03-07T13:34:05+00:00",
        "comments_count": [
            "lazyn1997",
            "Intsigstephon",
            "weisy11",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1735,
        "title": "关于PaddleClas打包成Mac软件后异常有人遇到吗",
        "body": "1.\r\nPaddleClas2.3\r\npaddlepaddle2.2.2 cpu版、\r\n\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统MacOS\r\n  b. Python版本号，如Python3.7\r\n\r\n在本地运行测试代码都正常，打包后出现的异常信息如下：\r\n2022-03-07 18:43:59 INFO: Loading faiss with AVX2 support.\r\n2022-03-07 18:43:59 INFO: Could not load library with AVX2 support due to:\r\nModuleNotFoundError(\"No module named 'faiss.swigfaiss_avx2'\")\r\n2022-03-07 18:43:59 INFO: Loading faiss.\r\n2022-03-07 18:44:00 INFO: Successfully loaded faiss.\r\nTraceback (most recent call last):\r\n  File \"paddle/fluid/ir.py\", line 23, in <module>\r\n  File \"PyInstaller/loader/pyimod03_importers.py\", line 495, in exec_module\r\n  File \"paddle/fluid/proto/pass_desc_pb2.py\", line 16, in <module>\r\nModuleNotFoundError: No module named 'framework_pb2'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n\r\n",
        "state": "closed",
        "user": "linkangren",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-07T10:52:46+00:00",
        "updated_at": "2022-06-14T06:47:58+00:00",
        "closed_at": "2022-06-14T06:47:30+00:00",
        "comments_count": [
            "Intsigstephon",
            "lilith-zy",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1741,
        "title": "这里的F1计算方式对吗",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/11584c72571d8648cc33e13a2b079e01b1cc3ff5/ppcls/metric/metrics.py#L307\r\n这里的F1计算为什么用到的是acc而不是precision？",
        "state": "closed",
        "user": "se7enXF",
        "closed_by": "se7enXF",
        "created_at": "2022-03-08T14:06:41+00:00",
        "updated_at": "2022-03-09T06:27:34+00:00",
        "closed_at": "2022-03-09T06:27:34+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1745,
        "title": "ppshitu使用自己训练的主体检测模型推理报错",
        "body": "操作系统：Windows\r\nPython：3.7.9\r\nCUDA: 11.2\r\nPaddle: 2.2.2\r\n\r\n自己使用paddledetection训练picodet主体检测模型，按照文档教程导出模型并改名为inference.model，然后使用ppshitu的predict脚本推理，报错 TypeError: only size-1 arrays can be converted to Python scalars，使用文档官方提供的inference demo推理正常，怀疑是模型导出的配置错误。\r\n\r\n导出的命令是：\r\npython tools/export_model.py -c configs/picodet_l_640_coco.yml --output_dir=./inference/bodydet/20220310/inference -o weights=./output/bodydet/20220310/picodet_l_640_coco/best_model.pdparams\r\n\r\n![微信截图_20220310104725](https://user-images.githubusercontent.com/51190264/157578447-6beefe2a-91b6-45ba-8ab4-77e7c4b26e36.png)\r\n",
        "state": "closed",
        "user": "JiehangXie",
        "closed_by": "JiehangXie",
        "created_at": "2022-03-10T02:49:07+00:00",
        "updated_at": "2023-02-27T09:48:18+00:00",
        "closed_at": "2022-03-10T03:05:49+00:00",
        "comments_count": [
            "JiehangXie",
            "suay1113"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1748,
        "title": "图像识别class_num设置",
        "body": "我使用ResNet50_ReID.yaml配置文件训练图像识别模型，训练数据总共有1990个类，按照[CUB_200_2011数据集划分方式随机将1990个类划分为1790(train_list)+200(test_list)的组合\r\n![image](https://user-images.githubusercontent.com/34644177/157692203-a605cc54-b6e6-4ad7-8a96-4af03fcd07b5.png)\r\n那么我配置文件中的class_num应该如何设置，我设置成1990会报下面的错误\r\n![image](https://user-images.githubusercontent.com/34644177/157691684-8e37ab94-ebc4-44da-8a88-0078191e1915.png)\r\n这个错误的原因是什么呢，难道计算label时是从0开始吗？",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-10T15:18:20+00:00",
        "updated_at": "2022-08-26T08:59:01+00:00",
        "closed_at": "2022-08-26T08:59:01+00:00",
        "comments_count": [
            "weisy11",
            "lazyn1997",
            "lazyn1997",
            "thomas-yanxin"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1759,
        "title": "关于车辆细分类模型和车辆ReID模型",
        "body": "repo中发布的[车辆细分类模型和车辆ReID模型](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_recognition.md)文件是一样，最终输出都是一个512维向量， 细分类模型不应该是车辆相关的属性吗？细分类模型在哪可以下载到，谢谢！",
        "state": "closed",
        "user": "BackT0TheFuture",
        "closed_by": "BackT0TheFuture",
        "created_at": "2022-03-16T05:40:57+00:00",
        "updated_at": "2022-03-17T21:51:36+00:00",
        "closed_at": "2022-03-17T21:51:35+00:00",
        "comments_count": [
            "weisy11",
            "BackT0TheFuture",
            "weisy11",
            "BackT0TheFuture"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1766,
        "title": "有zeroshot的分类模型么?",
        "body": "类似clip\r\n",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-18T02:18:58+00:00",
        "updated_at": "2022-06-21T06:46:19+00:00",
        "closed_at": "2022-06-21T06:46:05+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1767,
        "title": "请问训练分类模型如何去掉某些数据增强？",
        "body": "请问训练分类模型如何去掉某些数据增强？比如我不需要随机裁剪，应该怎么修改配置文件？",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2022-03-18T06:50:56+00:00",
        "updated_at": "2022-03-23T09:35:56+00:00",
        "closed_at": "2022-03-23T09:35:56+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1768,
        "title": "无法可视化",
        "body": "请问各位大佬，我训练完之后用命令visualdl --logdir ./log --port 8080可视化，但是显示不出来，训练中的可视化参数也开启了\r\n![image](https://user-images.githubusercontent.com/48303408/158958718-4718bbd9-cb59-46f0-970f-918086405e78.png)\r\n",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-18T07:49:32+00:00",
        "updated_at": "2022-06-28T06:48:11+00:00",
        "closed_at": "2022-06-28T06:48:11+00:00",
        "comments_count": [
            "weisy11",
            "Dandelion111",
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1771,
        "title": "什么时候使用paddle.to_tensor()问题",
        "body": "https://github.com/PaddlePaddle/PaddleClas/blob/6845df2bb13106e342a9573f0bba4801aef3c7e1/ppcls/engine/train/train.py#L54\r\n这边的模型输入没有使用paddle.to_tensor()。而https://github.com/PaddlePaddle/PaddleClas/blob/6845df2bb13106e342a9573f0bba4801aef3c7e1/ppcls/engine/evaluation/retrieval.py#L120\r\n这边的模型输入使用了paddle.to_tensor()来进行数据类型转换。\r\n请问一下什么时候需要用到paddle.to_tensor()，什么时候可以不用？\r\n谢谢。\r\n",
        "state": "closed",
        "user": "LiquorPerfect",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-18T14:08:03+00:00",
        "updated_at": "2022-06-21T06:46:22+00:00",
        "closed_at": "2022-06-21T06:46:06+00:00",
        "comments_count": [
            "weisy11",
            "paddle-bot-old[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1779,
        "title": "[kunlun] k200在训练时，报runtime错误",
        "body": " 1. PaddleClas版本2.3 以及PaddlePaddle版本2.2.02\r\n 2.  训练环境信息：\r\n  a. ft2000+ kylin\r\n  b. Python3.7\r\n3.详细的错误信息及相关log\r\n[root@localhost PaddleClas]# ls\r\nconfigs  dataset  deploy  docs  LICENSE  padcls.txt  padnlp.txt  ppcls  README_cn.md  README.md  requirements.txt  resnet50.txt  tools\r\n[root@localhost PaddleClas]# python3.7 tools/train_multi_platform.py  -c configs/kunlun/ResNet50 -o use_gpu=False -o use_xpu=True -o is_distributed=False\r\nResNet50_flowers.yaml  ResNet50.yaml          \r\n[root@localhost PaddleClas]# python3.7 tools/train_multi_platform.py  -c configs/kunlun/ResNet50_flowers.yaml -o use_gpu=False -o use_xpu=True -o is_distributed=False\r\nXPURT /usr/local/lib64/python3.7/site-packages/paddle/fluid/../libs/libxpurt.so loaded\r\nWARNING:ppcls.utils.logger:A new filed (use_gpu) detected!\r\nWARNING:ppcls.utils.logger:A new filed (use_xpu) detected!\r\nWARNING:ppcls.utils.logger:A new filed (is_distributed) detected!\r\nINFO:ppcls.utils.logger:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\nINFO:ppcls.utils.logger:ARCHITECTURE : \r\nINFO:ppcls.utils.logger:    name : ResNet50\r\nINFO:ppcls.utils.logger:------------------------------------------------------------\r\nINFO:ppcls.utils.logger:LEARNING_RATE : \r\nINFO:ppcls.utils.logger:    function : Cosine\r\nINFO:ppcls.utils.logger:    params : \r\nINFO:ppcls.utils.logger:        lr : 0.035\r\nINFO:ppcls.utils.logger:------------------------------------------------------------\r\nINFO:ppcls.utils.logger:OPTIMIZER : \r\nINFO:ppcls.utils.logger:    function : Momentum\r\nINFO:ppcls.utils.logger:    params : \r\nINFO:ppcls.utils.logger:        momentum : 0.9\r\nINFO:ppcls.utils.logger:    regularizer : \r\nINFO:ppcls.utils.logger:        factor : 0.0001\r\nINFO:ppcls.utils.logger:        function : L2\r\nINFO:ppcls.utils.logger:------------------------------------------------------------\r\nINFO:ppcls.utils.logger:TRAIN : \r\nINFO:ppcls.utils.logger:    batch_size : 32\r\nINFO:ppcls.utils.logger:    data_dir : ./dataset/flowers102/\r\nINFO:ppcls.utils.logger:    file_list : ./dataset/flowers102/train_list.txt\r\nINFO:ppcls.utils.logger:    num_workers : 4\r\nINFO:ppcls.utils.logger:    shuffle_seed : 0\r\nINFO:ppcls.utils.logger:    transforms : \r\nINFO:ppcls.utils.logger:        DecodeImage : \r\nINFO:ppcls.utils.logger:            channel_first : False\r\nINFO:ppcls.utils.logger:            to_np : False\r\nINFO:ppcls.utils.logger:            to_rgb : True\r\nINFO:ppcls.utils.logger:        RandCropImage : \r\nINFO:ppcls.utils.logger:            size : 224\r\nINFO:ppcls.utils.logger:        RandFlipImage : \r\nINFO:ppcls.utils.logger:            flip_code : 1\r\nINFO:ppcls.utils.logger:        NormalizeImage : \r\nINFO:ppcls.utils.logger:            mean : [0.485, 0.456, 0.406]\r\nINFO:ppcls.utils.logger:            order : \r\nINFO:ppcls.utils.logger:            scale : 1./255.\r\nINFO:ppcls.utils.logger:            std : [0.229, 0.224, 0.225]\r\nINFO:ppcls.utils.logger:        ToCHWImage : None\r\nINFO:ppcls.utils.logger:------------------------------------------------------------\r\nINFO:ppcls.utils.logger:VALID : \r\nINFO:ppcls.utils.logger:    batch_size : 32\r\nINFO:ppcls.utils.logger:    data_dir : ./dataset/flowers102/\r\nINFO:ppcls.utils.logger:    file_list : ./dataset/flowers102/val_list.txt\r\nINFO:ppcls.utils.logger:    num_workers : 4\r\nINFO:ppcls.utils.logger:    shuffle_seed : 0\r\nINFO:ppcls.utils.logger:    transforms : \r\nINFO:ppcls.utils.logger:        DecodeImage : \r\nINFO:ppcls.utils.logger:            channel_first : False\r\nINFO:ppcls.utils.logger:            to_np : False\r\nINFO:ppcls.utils.logger:            to_rgb : True\r\nINFO:ppcls.utils.logger:        ResizeImage : \r\nINFO:ppcls.utils.logger:            resize_short : 256\r\nINFO:ppcls.utils.logger:        CropImage : \r\nINFO:ppcls.utils.logger:            size : 224\r\nINFO:ppcls.utils.logger:        NormalizeImage : \r\nINFO:ppcls.utils.logger:            mean : [0.485, 0.456, 0.406]\r\nINFO:ppcls.utils.logger:            order : \r\nINFO:ppcls.utils.logger:            scale : 1.0/255.0\r\nINFO:ppcls.utils.logger:            std : [0.229, 0.224, 0.225]\r\nINFO:ppcls.utils.logger:        ToCHWImage : None\r\nINFO:ppcls.utils.logger:------------------------------------------------------------\r\nINFO:ppcls.utils.logger:classes_num : 102\r\nINFO:ppcls.utils.logger:epochs : 40\r\nINFO:ppcls.utils.logger:image_shape : [3, 224, 224]\r\nINFO:ppcls.utils.logger:is_distributed : False\r\nINFO:ppcls.utils.logger:ls_epsilon : -1\r\nINFO:ppcls.utils.logger:mode : train\r\nINFO:ppcls.utils.logger:model_save_dir : ./output/\r\nINFO:ppcls.utils.logger:pretrained_model : \r\nINFO:ppcls.utils.logger:save_interval : 5\r\nINFO:ppcls.utils.logger:topk : 5\r\nINFO:ppcls.utils.logger:total_images : 2040\r\nINFO:ppcls.utils.logger:use_gpu : False\r\nINFO:ppcls.utils.logger:use_mix : False\r\nINFO:ppcls.utils.logger:use_xpu : True\r\nINFO:ppcls.utils.logger:valid_interval : 1\r\nINFO:ppcls.utils.logger:validate : True\r\nW0322 08:50:06.236835  8604 device_context.cc:221] Please NOTE: xpu device: 0\r\nTraceback (most recent call last):\r\n  File \"tools/train_multi_platform.py\", line 180, in <module>\r\n    main(args)\r\n  File \"tools/train_multi_platform.py\", line 144, in main\r\n    epoch_id, 'train', config, vdl_writer)\r\n  File \"/home/kunlun/moxing/baidu/PaddleClas/tools/program.py\", line 491, in run\r\n    metrics = exe.run(program=program, feed=batch, fetch_list=fetch_list)\r\n  File \"/usr/local/lib64/python3.7/site-packages/paddle/fluid/executor.py\", line 1246, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/usr/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/usr/local/lib64/python3.7/site-packages/paddle/fluid/executor.py\", line 1244, in run\r\n    return_merged=return_merged)\r\n  File \"/usr/local/lib64/python3.7/site-packages/paddle/fluid/executor.py\", line 1376, in _run_impl\r\n    program._compile(scope, self.place)\r\n  File \"/usr/local/lib64/python3.7/site-packages/paddle/fluid/compiler.py\", line 465, in _compile\r\n    use_device=use_device, scope=self._scope, places=self._places)\r\n  File \"/usr/local/lib64/python3.7/site-packages/paddle/fluid/compiler.py\", line 415, in _compile_data_parallel\r\n    self._exec_strategy, self._build_strategy, self._graph)\r\nRuntimeError: \r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::ParallelExecutor::ParallelExecutor(std::vector<paddle::platform::Place, std::allocator<paddle::platform::Place> > const&, std::vector<std::string, std::allocator<std::string > > const&, std::string const&, paddle::framework::Scope*, std::vector<paddle::framework::Scope*, std::allocator<paddle::framework::Scope*> > const&, paddle::framework::details::ExecutionStrategy const&, paddle::framework::details::BuildStrategy const&, paddle::framework::ir::Graph*)\r\n1   paddle::framework::ParallelExecutor::PrepareNCCLCommunicator(paddle::framework::Scope*)\r\n2   paddle::platform::EnforceNotMet::EnforceNotMet(paddle::platform::ErrorSummary const&, char const*, int)\r\n3   paddle::platform::GetCurrentTraceBackString[abi:cxx11](bool)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nPreconditionNotMetError: Not compiled with XPU. (at /mnt7/qa_gmm/tools/xpu_build_paddle/pa220/Paddle/paddle/fluid/framework/parallel_executor.cc:1318)",
        "state": "open",
        "user": "1chang37",
        "closed_by": null,
        "created_at": "2022-03-22T00:55:43+00:00",
        "updated_at": "2024-02-26T04:28:53+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1772,
        "title": "关于VIT中位置编码的疑问self.pos_embed",
        "body": "大佬您好，我在复现论文时发现，继承VisionTransformer类实例化位置编码self.pos_embed时后面加[:],如下代码，请问[]这是有什么含义吗\r\n\r\nx += self.pos_embed[:]\r\n",
        "state": "closed",
        "user": "d2623587501",
        "closed_by": "d2623587501",
        "created_at": "2022-03-20T06:23:39+00:00",
        "updated_at": "2022-03-25T08:13:26+00:00",
        "closed_at": "2022-03-25T08:13:26+00:00",
        "comments_count": [
            "cuicheng01",
            "d2623587501",
            "d2623587501",
            "littletomatodonkey",
            "d2623587501"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1773,
        "title": "PaddleClas训练出来的ResNet50模型，推理精度比pytorch版本的低很多",
        "body": " 1. PaddleClas release/2.3和PaddlePaddle 2.2\r\n 3. 训练环境信息：\r\n  a. 具体操作系统 Ubuntu 20.04\r\n  b. Python版本号 Python3.7\r\n  c. CUDA10.2 cudnn7\r\n  d. Docker镜像 registry.baidubce.com/paddlepaddle/paddle:2.2.2-gpu-cuda10.2-cudnn7\r\n 4. 详细的错误信息及相关log\r\n     1) PaddleClas训练ResNet50自定义数据集12个分类，epochs 200.\r\n     训练结果精度正常\r\n`[Eval][Epoch 200][Avg]CELoss: 1.74249, loss: 1.74249, top1: 0.93325 `\r\n `[Eval][Epoch 200][best metric: 0.9370988449787144] `\r\n\r\n  \r\n     2) 但是使用 python3 tools/infer.py 推理 分数只有 0.19 -0.2 之间，确认过测试的图片没问题，使用pytorch训练出来的ResNet50分数能到0.9\r\n     3) 推理命令是\r\n\r\n```\r\npython3 tools/infer.py \\\r\n     -c ./ppcls/configs/custom/ResNet50.yaml \\\r\n     -o Infer.infer_imgs=./test-images/ \\\r\n    -o Global.pretrained_model=./output/ResNet50/best_model \r\n```\r\n      \r\n\r\n附件：训练配置 [ResNet50.zip](https://github.com/PaddlePaddle/PaddleClas/files/8310780/ResNet50.zip)\r\n",
        "state": "closed",
        "user": "ChungTak",
        "closed_by": "ChungTak",
        "created_at": "2022-03-20T07:13:56+00:00",
        "updated_at": "2023-11-24T09:25:22+00:00",
        "closed_at": "2022-03-29T14:08:37+00:00",
        "comments_count": [
            "weisy11",
            "ChungTak",
            "weisy11",
            "cuicheng01",
            "ChungTak",
            "weisy11",
            "chiliuliu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1780,
        "title": "对paddle模型转换的onnx模型简化报错",
        "body": "![image](https://user-images.githubusercontent.com/48303408/159424901-8598119a-ff73-4355-a1f5-8ac88c6b7eba.png)\r\n请问各位大佬，我训练的LCNet模型，在转换到onnx模型之后，在简化的时候出现这个错误，请问这个怎么解决",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2022-03-22T06:58:13+00:00",
        "updated_at": "2022-03-24T03:32:56+00:00",
        "closed_at": "2022-03-24T03:32:56+00:00",
        "comments_count": [
            "jiangjiajun"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1781,
        "title": "PP识图数据处理问题",
        "body": "我想用pp识图对一些猫的图片进行分类，但是我弄了很久，在执行predict_system.py的时候都有这个问题\r\n![屏幕截图 2022-03-22 162844](https://user-images.githubusercontent.com/100469824/159439354-bd9c0aee-d53f-4c15-96a1-48821522ab25.png)\r\n我想知道这是什么导致的",
        "state": "closed",
        "user": "Yetdream",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-22T08:33:12+00:00",
        "updated_at": "2022-06-28T06:48:12+00:00",
        "closed_at": "2022-06-28T06:48:12+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1783,
        "title": "请问分类模型的蒸馏模型怎么训练？",
        "body": "请问分类模型的蒸馏模型怎么训练？没找到相关的配置文件",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-23T09:35:33+00:00",
        "updated_at": "2022-06-28T06:48:12+00:00",
        "closed_at": "2022-06-28T06:48:12+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1785,
        "title": "[kunlun ]  paddleclas 运行vgg16出错",
        "body": "k200+kylinv10 运行出现如下错误\r\n\r\n[root@localhost PaddleClas]# bash run_vgg16.sh \r\nWARNING: AVX is not support on your machine. Hence, no_avx core will be imported, It has much worse preformance than avx core.\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/globals.cpp:51] set BKCL timeout to 600 seconds\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/globals.cpp:52] set BKCL RING BUFFER SIZE to 1048576\r\nXPURT /usr/local/lib64/python3.7/site-packages/paddle/fluid/../libs/libxpurt.so loaded\r\n2022-03-24 16:45:28,670 - WARNING - A new filed (use_gpu) detected!\r\n2022-03-24 16:45:28,670 - WARNING - A new filed (use_cpu) detected!\r\n2022-03-24 16:45:28,671 - WARNING - A new filed (use_xpu) detected!\r\n2022-03-24 16:45:28,671 - WARNING - A new filed (is_distributed) detected!\r\n2022-03-24 16:45:28,671 - INFO - \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-03-24 16:45:28,671 - INFO - ARCHITECTURE : \r\n2022-03-24 16:45:28,671 - INFO -     name : VGG16\r\n2022-03-24 16:45:28,671 - INFO - ------------------------------------------------------------\r\n2022-03-24 16:45:28,671 - INFO - LEARNING_RATE : \r\n2022-03-24 16:45:28,672 - INFO -     function : Cosine\r\n2022-03-24 16:45:28,672 - INFO -     params : \r\n2022-03-24 16:45:28,672 - INFO -         lr : 0.0005\r\n2022-03-24 16:45:28,672 - INFO - ------------------------------------------------------------\r\n2022-03-24 16:45:28,672 - INFO - OPTIMIZER : \r\n2022-03-24 16:45:28,672 - INFO -     function : Momentum\r\n2022-03-24 16:45:28,672 - INFO -     params : \r\n2022-03-24 16:45:28,673 - INFO -         momentum : 0.9\r\n2022-03-24 16:45:28,673 - INFO -     regularizer : \r\n2022-03-24 16:45:28,673 - INFO -         factor : 1e-05\r\n2022-03-24 16:45:28,673 - INFO -         function : L2\r\n2022-03-24 16:45:28,673 - INFO - ------------------------------------------------------------\r\n2022-03-24 16:45:28,673 - INFO - TRAIN : \r\n2022-03-24 16:45:28,673 - INFO -     batch_size : 1\r\n2022-03-24 16:45:28,673 - INFO -     data_dir : ./dataset/flowers102/\r\n2022-03-24 16:45:28,674 - INFO -     file_list : ./dataset/flowers102/train_list.txt\r\n2022-03-24 16:45:28,674 - INFO -     num_workers : 4\r\n2022-03-24 16:45:28,674 - INFO -     shuffle_seed : 0\r\n2022-03-24 16:45:28,674 - INFO -     transforms : \r\n2022-03-24 16:45:28,674 - INFO -         DecodeImage : \r\n2022-03-24 16:45:28,674 - INFO -             channel_first : False\r\n2022-03-24 16:45:28,674 - INFO -             to_np : False\r\n2022-03-24 16:45:28,674 - INFO -             to_rgb : True\r\n2022-03-24 16:45:28,675 - INFO -         RandCropImage : \r\n2022-03-24 16:45:28,675 - INFO -             size : 224\r\n2022-03-24 16:45:28,675 - INFO -         RandFlipImage : \r\n2022-03-24 16:45:28,675 - INFO -             flip_code : 1\r\n2022-03-24 16:45:28,675 - INFO -         NormalizeImage : \r\n2022-03-24 16:45:28,675 - INFO -             mean : [0.485, 0.456, 0.406]\r\n2022-03-24 16:45:28,675 - INFO -             order : \r\n2022-03-24 16:45:28,676 - INFO -             scale : 1./255.\r\n2022-03-24 16:45:28,676 - INFO -             std : [0.229, 0.224, 0.225]\r\n2022-03-24 16:45:28,676 - INFO -         ToCHWImage : None\r\n2022-03-24 16:45:28,676 - INFO - ------------------------------------------------------------\r\n2022-03-24 16:45:28,676 - INFO - VALID : \r\n2022-03-24 16:45:28,676 - INFO -     batch_size : 1\r\n2022-03-24 16:45:28,676 - INFO -     data_dir : ./dataset/flowers102/\r\n2022-03-24 16:45:28,676 - INFO -     file_list : ./dataset/flowers102/val_list.txt\r\n2022-03-24 16:45:28,677 - INFO -     num_workers : 4\r\n2022-03-24 16:45:28,677 - INFO -     shuffle_seed : 0\r\n2022-03-24 16:45:28,677 - INFO -     transforms : \r\n2022-03-24 16:45:28,677 - INFO -         DecodeImage : \r\n2022-03-24 16:45:28,677 - INFO -             channel_first : False\r\n2022-03-24 16:45:28,677 - INFO -             to_np : False\r\n2022-03-24 16:45:28,677 - INFO -             to_rgb : True\r\n2022-03-24 16:45:28,677 - INFO -         ResizeImage : \r\n2022-03-24 16:45:28,678 - INFO -             resize_short : 256\r\n2022-03-24 16:45:28,678 - INFO -         CropImage : \r\n2022-03-24 16:45:28,678 - INFO -             size : 224\r\n2022-03-24 16:45:28,678 - INFO -         NormalizeImage : \r\n2022-03-24 16:45:28,678 - INFO -             mean : [0.485, 0.456, 0.406]\r\n2022-03-24 16:45:28,678 - INFO -             order : \r\n2022-03-24 16:45:28,678 - INFO -             scale : 1.0/255.0\r\n2022-03-24 16:45:28,679 - INFO -             std : [0.229, 0.224, 0.225]\r\n2022-03-24 16:45:28,679 - INFO -         ToCHWImage : None\r\n2022-03-24 16:45:28,679 - INFO - ------------------------------------------------------------\r\n2022-03-24 16:45:28,679 - INFO - classes_num : 102\r\n2022-03-24 16:45:28,679 - INFO - epochs : 20\r\n2022-03-24 16:45:28,679 - INFO - image_shape : [3, 224, 224]\r\n2022-03-24 16:45:28,679 - INFO - is_distributed : False\r\n2022-03-24 16:45:28,679 - INFO - mode : train\r\n2022-03-24 16:45:28,680 - INFO - model_save_dir : ./output/\r\n2022-03-24 16:45:28,680 - INFO - pretrained_model : ./pretrained/VGG16_pretrained\r\n2022-03-24 16:45:28,680 - INFO - save_interval : 5\r\n2022-03-24 16:45:28,680 - INFO - topk : 5\r\n2022-03-24 16:45:28,680 - INFO - total_images : 2040\r\n2022-03-24 16:45:28,680 - INFO - use_cpu : False\r\n2022-03-24 16:45:28,680 - INFO - use_gpu : False\r\n2022-03-24 16:45:28,681 - INFO - use_xpu : True\r\n2022-03-24 16:45:28,681 - INFO - valid_interval : 1\r\n2022-03-24 16:45:28,681 - INFO - validate : True\r\n/usr/local/lib64/python3.7/site-packages/paddle/fluid/framework.py:156: UserWarning: PaddlePaddle version 1.7.0 or higher is required, but 0.0.0 installed, Maybe you are using a develop version, please make sure the version is good with your code.\r\n  (min_version, fluid_version.full_version))\r\n[INFO][XPURT][cgpu_detected:66] dir '/baidu-cgpu/xpu0/0d35b4dc2e86569aa6f6d5568a2d73a0e80c22f5e02bf58c932ff524060585a2' not exists\r\nW0324 16:45:28.942513   225 device_context.cc:187] Please NOTE: xpu device: 0\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\n2022-03-24 16:45:31,120 - INFO - Loading parameters from ./pretrained/VGG16_pretrained...\r\n2022-03-24 16:45:31,497 - WARNING - variable fc8_offset is already excluded automatically\r\n2022-03-24 16:45:31,497 - WARNING - variable fc8_weights is already excluded automatically\r\n2022-03-24 16:45:32,098 - INFO - Finish initing model from ['./pretrained/VGG16_pretrained']\r\nimport ujson error: No module named 'ujson' use json\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\n[INFO][XPURT][cgpu_detected:66] dir '/baidu-cgpu/xpu1/0d35b4dc2e86569aa6f6d5568a2d73a0e80c22f5e02bf58c932ff524060585a2' not exists\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/net_socket.cpp:37] NET/Socket : ipv4 net card [enp15s0], ip[192.168.137.90]\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/net_socket.cpp:37] NET/Socket : ipv4 net card [virbr0], ip[192.168.122.1]\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/net_socket.cpp:37] NET/Socket : ipv4 net card [docker0], ip[172.17.0.1]\r\n[INFO][BKCL][/home/qa_work/workspace/xpu_build_dailyjob/bkcl_root/baidu/xpu/bkcl/src/net_socket.cpp:44] NET/Socket : ipv6 net card [enp15s0], ip[fe80::ec91:a08d:61c:6508]\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\nautotune_file{autotune_file.txt} set 438 records\r\nautotune_file{autotune_file.txt} set 0 records\r\nW0324 16:45:35.250291   225 build_strategy.cc:165] fusion_group is not enabled for Windows/MacOS now, and only effective when running with CUDA GPU.\r\nW0324 16:45:35.250483   225 build_strategy.cc:424] fuse_bn_add_act_pass is only supported on GPU, skipped.\r\nW0324 16:45:35.274974   225 fuse_all_reduce_op_pass.cc:76] Find all_reduce operators: 19. To make the speed faster, some all_reduce ops are fused during training, after fusion, the number of all_reduce ops is 4.\r\nAUTOTUNE:(14155776, 888016, 1, 3, 224, 224, 64, 3, 3, 1, 1, 1, 1, 1, 1, 0) = wpinned_hf_bsp(4, 1, 256, 64)\r\nFind Best Result in 146 choices, avg-conv-optime = 149 us\r\nAUTOTUNE:(14155776, 888016, 1, 3, 224, 224, 64, 3, 3, 1, 1, 1, 1, 1, 1, 0) = wpinned_hf_bsp(4, 1, 192, 64)\r\nFind Best Result in 146 choices, avg-conv-optime = 148 us\r\n[WARN][XPURT][xpu_llwait:667] ioctl() fail, (715) Kernel execution timed out\r\n[WARN][XPURT][xpu_lllaunch_async:551] ioctl() fail, (715) Kernel execution timed out\r\n[WARN][XPURT][xpu_launch_async:359] fail on kernel ty=CDNN name='_Z22conv_int16_wpinned_bspIffffEvPKT_PKT0_PT1_iiiiiiiiPKfS9_PfS9_PKT2_S9_ii' ncl=4 nco=8\r\n[WARN][XPURT][xpu_lllaunch_async:551] ioctl() fail, (715) Kernel execution timed out\r\n[WARN][XPURT][xpu_launch_async:359] fail on kernel ty=CDNN name='_Z22conv_int16_wpinned_bspIffffEvPKT_PKT0_PT1_iiiiiiiiPKfS9_PfS9_PKT2_S9_ii' ncl=4 nco=8\r\n[WARN][XPURT][xpu_llwait:667] ioctl() fail, (715) Kernel execution timed out\r\n",
        "state": "open",
        "user": "1chang37",
        "closed_by": null,
        "created_at": "2022-03-24T09:06:27+00:00",
        "updated_at": "2024-02-26T04:28:52+00:00",
        "closed_at": null,
        "comments_count": [
            "adaxiadaxi",
            "1chang37"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1788,
        "title": "模型预测或模型推理的结果，没有保存的TXT文件。",
        "body": "PaddleClas/tools/infer.py\r\nPaddleCals/deploy/python/predict_cls.py\r\n预测或推理路径下的所有图像，结果没有保存的txt文件。\r\n",
        "state": "closed",
        "user": "CPones",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-27T02:36:03+00:00",
        "updated_at": "2022-08-30T06:49:51+00:00",
        "closed_at": "2022-08-30T06:49:49+00:00",
        "comments_count": [
            "TingquanGao",
            "Wulx2050"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1786,
        "title": "aistudio中，notebook中的任务可以运行，使用离线任务就失败",
        "body": "\r\n![image](https://user-images.githubusercontent.com/36887207/160080945-7240c997-0615-4fc6-9ff6-74e72f06dea5.png)\r\n\r\nunique_endpoints {'job-12de6b177ca9e83312f6df99861d83a9-trainer-0.job-12de6b177ca9e83312f6df99861d83a9:12345'}\r\n\r\n任务链接：https://aistudio.baidu.com/aistudio/projectdetail/3684304?contributionType=1",
        "state": "open",
        "user": "huilin16",
        "closed_by": null,
        "created_at": "2022-03-25T08:12:57+00:00",
        "updated_at": "2024-02-26T04:28:51+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "huilin16"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1787,
        "title": "'NoneType' object has no attribute 'shape'",
        "body": "训练时报错，查过该路径是有图片的\r\n比如下图报错\r\n![6-3c0703b8-24a4-4437-ac37-e01d7d55b31f](https://user-images.githubusercontent.com/20439438/160247281-ca55d660-470d-42c7-878e-567e7c067878.jpg)\r\n\r\n报错截图如下\r\n![image](https://user-images.githubusercontent.com/20439438/160247306-ac09a21a-3357-4439-9ccc-63a7f9470c26.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "wonder2025",
        "closed_by": "wonder2025",
        "created_at": "2022-03-26T15:53:43+00:00",
        "updated_at": "2022-03-27T08:13:02+00:00",
        "closed_at": "2022-03-27T08:13:02+00:00",
        "comments_count": [
            "TingquanGao",
            "wonder2025"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1791,
        "title": "项目内存在失效的软连接，在AI Studio无法保存新版本。",
        "body": "···\r\n!git clone https://gitee.com/paddlepaddle/PaddleClas.git -b release/2.3\r\n···\r\nAI Studio克隆该项目到BML CodeLab中，保存新版本时报错如下：\r\n项目中存在失效的软连接, 影响版本生成，请先删除软连接再尝试生成版本。",
        "state": "closed",
        "user": "CPones",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-27T08:33:46+00:00",
        "updated_at": "2022-06-28T06:48:13+00:00",
        "closed_at": "2022-06-28T06:48:13+00:00",
        "comments_count": [
            "TingquanGao",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1792,
        "title": "使用paddleserving 部署ResNet101_vd_serving报错",
        "body": "按照要求转换了ResNet101_vd 模型但是client调用的时候报错\r\n![image](https://user-images.githubusercontent.com/20439438/160340709-3fe6fb34-7f05-410d-8b7c-d31ce0a5d132.png)\r\n\r\nserving_server_conf.prototxt和serving_client_conf.prototxt内容如下\r\n\r\n![image](https://user-images.githubusercontent.com/20439438/160340803-17f3fa56-5cf7-4dfe-abcf-9b9eb1cd01e2.png)\r\n\r\n不知道还要修改哪里的配置\r\n",
        "state": "closed",
        "user": "wonder2025",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-28T06:42:56+00:00",
        "updated_at": "2022-07-12T06:47:56+00:00",
        "closed_at": "2022-07-12T06:47:47+00:00",
        "comments_count": [
            "Intsigstephon",
            "wonder2025",
            "Intsigstephon"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1796,
        "title": "关于paddle版本的提问",
        "body": "1.paddleclas2.3版本能够在paddle1.85版本上跑吗\r\n2.paddle1.85能跑paddleclas哪个版本的代码\r\n",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "gutao0315",
        "created_at": "2022-03-30T03:10:37+00:00",
        "updated_at": "2022-03-30T03:12:01+00:00",
        "closed_at": "2022-03-30T03:10:53+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1797,
        "title": "关于paddle版本适用问题",
        "body": "Paddle1.85版本能跑paddleclas2.3版本的代码吗，如果不能，适用于paddleclas的哪个版本\r\n",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-30T03:13:10+00:00",
        "updated_at": "2022-07-12T06:47:56+00:00",
        "closed_at": "2022-07-12T06:47:48+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1801,
        "title": "slurm调度paddleclas单机多卡运行却只有单卡运行",
        "body": "我当前运行paddle版本\r\n```shell\r\npip list | grep paddle\r\npaddlepaddle-gpu     2.2.2.post110\r\n```\r\n训练环境: V100 GPU，Slurm0.5环境，Cuda11.0\r\n\r\n**运行脚本test.sh**\r\n```\r\ng=$(($1<8?$1:8))\r\nsrun -p test --async -n$1 --gres=gpu:$g --ntasks-per-node=$g  --quotatype=auto --cpus-per-task=6 \\\r\n    --job-name=\"test\" \\\r\npython tools/train.py -c ./config/resnet50vd.yaml\r\n```\r\n\r\n**运行命令**\r\n```\r\nsh test.sh 4\r\n```\r\n\r\n**错误信息：**\r\n<img width=\"1424\" alt=\"image\" src=\"https://user-images.githubusercontent.com/81349827/160956135-f9d3d33c-a7e7-4f45-b231-3b2f4d5405db.png\">\r\n\r\n<img width=\"721\" alt=\"image\" src=\"https://user-images.githubusercontent.com/81349827/160956083-44b43dd8-b2f7-4ecf-9e26-1ecb6b4e259b.png\">\r\n\r\n",
        "state": "closed",
        "user": "CauchyFood",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-03-31T01:09:42+00:00",
        "updated_at": "2022-07-05T06:48:20+00:00",
        "closed_at": "2022-07-05T06:48:20+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1806,
        "title": "PPshitu Faiss相似度算法受背景干扰大",
        "body": "操作系统：Windows\r\nPython版本号，如Python3.7.9\r\nCUDA/cuDNN版本：11.2\r\n算法配置：HNSW32 + METRIC_INNER_PRODUCT\r\n数据总共5类，每一类图片数量在30-50张范围内。\r\n\r\n对同一张图片，更换背景信息之后，就识别错误，鲁棒性极低。\r\n如图，左边识别正确，右边识别错误。\r\n\r\n![微信图片_20220402144306](https://user-images.githubusercontent.com/51190264/161370672-caf74221-d2d8-4705-b47d-c3e44ef515eb.png)\r\n\r\n",
        "state": "closed",
        "user": "JiehangXie",
        "closed_by": "JiehangXie",
        "created_at": "2022-04-02T06:44:28+00:00",
        "updated_at": "2023-02-20T02:13:33+00:00",
        "closed_at": "2022-04-07T13:28:49+00:00",
        "comments_count": [
            "cuicheng01",
            "JiehangXie",
            "JiehangXie",
            "PaulX1029"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1808,
        "title": "图像分类针对未知分类问题如何解决？",
        "body": "比如图像分类中的二分类，假设我只想区分某张图片中是否有火车（有火车就被标记为0类，没火车就被标记为1类）；\r\n现实生活中的不包含火车的图片包罗万象，不可能都被拿来作为训练集；\r\n如果测试集中出现了未知的物体，但一定不是火车，如果更准确的把这张图片推理为1类呢？\r\n训练数据或定义标签时可否定义一个blank来解决这个问题呢？\r\n望各位大神慷慨解答",
        "state": "closed",
        "user": "onair1314",
        "closed_by": "onair1314",
        "created_at": "2022-04-02T08:10:49+00:00",
        "updated_at": "2022-07-12T02:45:44+00:00",
        "closed_at": "2022-07-12T02:45:42+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1809,
        "title": "识别结果标签框显示错位或不全",
        "body": "如[PaddleClas](https://github.com/PaddlePaddle/PaddleClas)/[deploy](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.3/deploy)/[utils](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.3/deploy/utils)/draw_bbox.py中代码所写，\r\n![image](https://user-images.githubusercontent.com/34644177/161435003-796440d0-f587-4b60-9827-2babb6ed1361.png)\r\n\r\n绘制出的标签框会出现错位或者显示不全的问题，共有两种情况\r\n> ymin - th > 0\r\n\r\n绘制目标框的最左端值为xmin，而绘制标签框最左端的值为xmin + 1，这样就会造成目标框与标签框有一个像素的错位\r\n\r\n![QQ截图20220403233044](https://user-images.githubusercontent.com/34644177/161435573-6fd89ef8-e4c2-4ca3-88dc-d29ec19fb5e0.jpg)\r\n\r\n> ymin - th ≤ 0\r\n\r\n绘制目标框的最左端值为xmin，而绘制标签框最左端的值为xmin + 1，然而目标框的width=2，并且先绘制文本以及文本框，会绘制目标框，势必会造成目标框对文本有一个像素的遮挡\r\n\r\n![QQ截图20220403233031](https://user-images.githubusercontent.com/34644177/161435578-647258ab-9f8f-4f2b-9acc-ad126f30cc89.jpg)\r\n\r\n建议对上述的情况进行改进，同时由于识别图片的大小不同，建议设置可变的字体大小与目标框宽度从而在不同图片上都有很好的显示效果",
        "state": "open",
        "user": "lazyn1997",
        "closed_by": null,
        "created_at": "2022-04-03T15:33:50+00:00",
        "updated_at": "2024-02-26T04:28:49+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1810,
        "title": "运行主页的“30分钟玩转PaddleClas（进阶版）”出现错误 不能训练模型.",
        "body": "飞桨AI Studio系统.\r\n2.3的PaddleClas和2.2.2Paddlepaddle\r\n就是在[主页上的“30分钟玩转PaddleClas（进阶版）”](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_professional.md)运行代码\r\n\r\n配置如下：\r\n![1649136667777](https://user-images.githubusercontent.com/42019021/161688936-0a7fca78-26ba-4dd3-b39b-9f693490e557.jpg)\r\n运行所有训练语句都有错误。例如：\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0,1,2,3\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/quick_start/professional/ResNet50_vd_CIFAR100.yaml \\\r\n        -o Global.output_dir=\"output_CIFAR“\r\n\r\n错误如下：\r\n![1649136662930](https://user-images.githubusercontent.com/42019021/161688968-70fc9da2-f716-44dc-b13e-831333e50991.jpg)\r\n\r\ntrain.log如下：\r\n[train.log](https://github.com/PaddlePaddle/PaddleClas/files/8415430/train.log)\r\n\r\n",
        "state": "closed",
        "user": "13136983989",
        "closed_by": "13136983989",
        "created_at": "2022-04-05T06:04:00+00:00",
        "updated_at": "2022-05-02T02:59:12+00:00",
        "closed_at": "2022-05-02T02:59:12+00:00",
        "comments_count": [
            "13136983989"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1812,
        "title": "PaddleClas2.3 损失函数脚本配置报错，度量学习。亟待回复。谢谢。",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/**2.3**和**PaddlePaddle 2.2.2**\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如**Linux**/Windows/MacOS\r\n  b. Python版本号，如Python3.6/**7**/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n参考 [PaddleClas 代码解析-2.3 损失函数](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/advanced_tutorials/code_overview.md)\r\n\r\n`Loss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n    - TripletLossV2:\r\n        weight: 1.0\r\n        margin: 0.5\r\n`\r\n\r\n但是报错：\r\n```\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 265, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/home/aistudio/PaddleClas/ppcls/engine/train/train.py\", line 51, in train_epoch\r\n    loss_dict = engine.train_loss_func(out, batch[1])\r\n  File \"/home/aistudio/PaddleClas/ppcls/loss/__init__.py\", line 46, in __call__\r\n    loss = loss_func(input, batch)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/PaddleClas/ppcls/loss/triplet.py\", line 27, in forward\r\n    inputs = input[\"features\"]\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 598, in __getitem__\r\n    return self._getitem_index_not_tensor(item)\r\nValueError: (InvalidArgument) Currently, Tensor.__indices__() only allows indexing by Integers, Slices, Ellipsis, None, tuples of these types and list of Bool and Integers, but received str in 1th slice item (at /paddle/paddle/fluid/pybind/imperative.cc:645)\r\n```",
        "state": "open",
        "user": "ChrisMengxl",
        "closed_by": null,
        "created_at": "2022-04-06T08:40:59+00:00",
        "updated_at": "2024-02-26T04:28:48+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "ChrisMengxl",
            "ChrisMengxl"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1814,
        "title": "Mixformer",
        "body": "Mixformer的开源代码有放出来吗？",
        "state": "closed",
        "user": "TheshowN",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-07T07:26:49+00:00",
        "updated_at": "2022-07-12T06:47:57+00:00",
        "closed_at": "2022-07-12T06:47:48+00:00",
        "comments_count": [
            "chensnathan",
            "chensnathan"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1815,
        "title": "关于训练日志配置参数 怀疑有BUG",
        "body": "![3c3186cc0a8a9cde356f0f3030d026a](https://user-images.githubusercontent.com/77281977/162153628-5b730097-2076-4214-b8b4-0572fba3a259.png)\r\n我的数据集已经是RGB格式了 为什么这个参数去掉训练就会报错说读取图片发生意外",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-07T08:19:38+00:00",
        "updated_at": "2022-07-12T06:47:58+00:00",
        "closed_at": "2022-07-12T06:47:49+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1817,
        "title": "训练做evl的时候报错 什么原因 见图",
        "body": "\r\n![1649320715](https://user-images.githubusercontent.com/77281977/162157965-0a963b18-f3b1-440f-ad10-7c11362b3482.jpg)\r\n",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-07T08:39:37+00:00",
        "updated_at": "2022-07-12T06:47:58+00:00",
        "closed_at": "2022-07-12T06:47:50+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1816,
        "title": "训练占GPU为什么跟这个参数有关",
        "body": "为什么训练占的内存跟输入的尺寸无关\r\n![b266fce3a7fd714ae373c918d7a0443](https://user-images.githubusercontent.com/77281977/162155254-fc83d69a-7ded-42af-a16b-8cffe194b25a.png)\r\n只跟Train里的RandCropImage有关\r\n![f1bc1c30d433bfaf4f23d1efd9c4b07](https://user-images.githubusercontent.com/77281977/162155446-386542ec-1f04-4b47-aadb-1de98065451e.png)\r\n\r\n\r\n",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-07T08:27:33+00:00",
        "updated_at": "2022-07-26T06:50:04+00:00",
        "closed_at": "2022-07-26T06:50:01+00:00",
        "comments_count": [
            "weisy11",
            "gutao0315",
            "weisy11",
            "gutao0315",
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1818,
        "title": "如何注册新的Backbone",
        "body": "论文复现赛PaddleCLas ConvNext已经做完了，top1ACC 82.07但是我不熟悉PaddleClas套件怎么搞，所以我想问一下Backbone怎么迁移到PaddleClas",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-07T11:01:25+00:00",
        "updated_at": "2022-07-12T06:47:59+00:00",
        "closed_at": "2022-07-12T06:47:51+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1823,
        "title": "faiss error",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n==>PaddleClas release/2.2\r\n 3. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 4. 训练环境信息：\r\n  a. 具体操作系统==>Windows\r\n  b. Python版本号==>3.8.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.1/cuDNN 8\r\n 5. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n ==>根據https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_recognition.md\r\n2.2 瓶装饮料识别与检索   提及:\r\n注意，此部分使用了 faiss 作为检索库，安装方法如下：\r\npip install faiss-cpu==1.7.1post2\r\n若使用时，不能正常引用，则 uninstall 之后，重新 install，尤其是 windows 下。\r\nerror:\r\nd:\\PaddleClas-release-2.3\\deploy>python python/build_gallery.py -c configs/build_general.yaml\r\nTraceback (most recent call last):\r\n  File \"python/build_gallery.py\", line 21, in <module>\r\n    import faiss\r\n  File \"C:\\Users\\tutm\\anaconda3\\lib\\site-packages\\faiss\\__init__.py\", line 39, in <module>\r\n    from .loader import *\r\n  File \"C:\\Users\\tutm\\anaconda3\\lib\\site-packages\\faiss\\loader.py\", line 65, in <module>\r\n    from .swigfaiss import *\r\n  File \"C:\\Users\\tutm\\anaconda3\\lib\\site-packages\\faiss\\swigfaiss.py\", line 13, in <module>\r\n    from . import _swigfaiss\r\nImportError: DLL load failed while importing _swigfaiss: 找不到指定的模組。\r\n\r\n請問如何解決?\r\n\r\n\r\n",
        "state": "closed",
        "user": "tuteming",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-09T05:40:52+00:00",
        "updated_at": "2022-07-19T06:48:41+00:00",
        "closed_at": "2022-07-19T06:48:38+00:00",
        "comments_count": [
            "weisy11",
            "ANDROIDTODO",
            "Derek851029"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1821,
        "title": "gallery dataset和query dataset设置问题",
        "body": "如下图所示，请问当gallery dataset和query dataset设置相同时，具体的eval阶段是怎么进行的，看图片的描述没有搞懂。我理解的是在gallery dataset构建索引，然后在query dataset进行识别，但是在构建了索引的原数据上进行识别，结果不就应该很好吗？这样设置的话有什么意义吗？将gallery dataset与query dataset设置为同一标签的不同图片是不是对训练更有益，即采用ImageNetDataset模式更能够提高训练效果？\r\n![image](https://user-images.githubusercontent.com/34644177/162398488-973aa971-f18b-468e-bf48-aa1b9874f0d8.png)\r\n",
        "state": "open",
        "user": "lazyn1997",
        "closed_by": null,
        "created_at": "2022-04-08T08:46:07+00:00",
        "updated_at": "2024-02-26T04:28:47+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1825,
        "title": "Bug: 训练时Eval 结果无法复现，并且不同GPU数量eval结果不同",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n问题：训练时得到Eval结果（ce loss, metric），在训练完成后用eval.py和保存的权重无法复现。并且卡数不同情况下，loss avg结果还不同。\r\n\r\n解决：\r\n无语了。排查了一天。最后很明确是bug。环境信息不想贴了，check下代码就知道。希望能有负责同学检查下ppcls/engine/evaluation/classification里面计算loss和metric的代码。",
        "state": "closed",
        "user": "ppalantir",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-10T15:38:48+00:00",
        "updated_at": "2022-07-19T06:48:42+00:00",
        "closed_at": "2022-07-19T06:48:39+00:00",
        "comments_count": [
            "ppalantir",
            "weisy11",
            "TingquanGao",
            "ppalantir",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1827,
        "title": "lite_shitu android端，通过教程进行部署，识别完全无法匹配",
        "body": "Hi,\r\n我使用develop分支的代码进行android端的lite_shitu进行部署，运行后发现，我使用drink里面本身的图片进行识别，但是完全不匹配，这个是什么情况呢？\r\n",
        "state": "closed",
        "user": "ANDROIDTODO",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-11T08:25:29+00:00",
        "updated_at": "2022-10-11T06:50:52+00:00",
        "closed_at": "2022-10-11T06:50:50+00:00",
        "comments_count": [
            "weisy11",
            "ANDROIDTODO",
            "RainFrost1",
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1828,
        "title": "训练时间在配置相同的情况下 有没有什么缩短方案",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "gutao0315",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-11T08:49:09+00:00",
        "updated_at": "2022-07-12T06:48:00+00:00",
        "closed_at": "2022-07-12T06:47:51+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1835,
        "title": "配置文件中加了mixup数据增强 除了这个别的都没有改 为什么loss一直很高降不下去",
        "body": null,
        "state": "open",
        "user": "muziqiqi-77",
        "closed_by": null,
        "created_at": "2022-04-13T05:37:04+00:00",
        "updated_at": "2024-02-26T04:28:46+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "muziqiqi-77"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1836,
        "title": "请问特征提取模型是如何训练的？",
        "body": "我看到论文中的feature extraction部分描述的训练中的loss由三部分组成。这个在提供的训练配置文件中有体现吗，我在下面的配置文件中找到有关Loss的描述只有CELoss。\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/a81542a038d954bca9e4bd2aa00a45dbca3a5c7c/ppcls/configs/GeneralRecognition/GeneralRecognition_PPLCNet_x2_5.yaml#L45\r\n",
        "state": "open",
        "user": "Usigned",
        "closed_by": null,
        "created_at": "2022-04-13T08:50:35+00:00",
        "updated_at": "2024-02-26T04:28:45+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "Usigned"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1838,
        "title": "cpp_shitu main.cpp",
        "body": "請問在cpp_shitu main.cpp \r\nline 256-260\r\n// step2: add the whole image for recognition to improve recall\r\n        Detection::ObjectResult result_whole_img = {\r\n                {0, 0, srcimg.cols - 1, srcimg.rows - 1}, 0, 1.0};\r\n        det_result.push_back(result_whole_img);\r\n        det_bbox_num[0] = det_result.size() + 1;\r\n\r\n1.  step2: add the whole image for recognition to improve recall    是甚麼意義?\r\n2. result_whole_img = { {0, 0, srcimg.cols - 1, srcimg.rows - 1}, 0, 1.0};中最後2個參數0, 1.0  是甚麼意義?\r\n\r\n請不吝賜教  謝謝",
        "state": "closed",
        "user": "tuteming",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-14T08:32:35+00:00",
        "updated_at": "2022-07-19T06:48:43+00:00",
        "closed_at": "2022-07-19T06:48:40+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1840,
        "title": "使用ai studio 4卡v100训练失败",
        "body": "<img width=\"1314\" alt=\"image\" src=\"https://user-images.githubusercontent.com/78856426/163505484-b7ec22a7-0901-49aa-8c58-d04b5f23e6ae.png\">\r\n每次sh使用ai studio4卡v100都出现这种情况\r\n<img width=\"1116\" alt=\"image\" src=\"https://user-images.githubusercontent.com/78856426/163505514-01657517-83c3-4c01-8c46-ffb63abf9ee2.png\">\r\n然后使用python setup.py install 之后又报错",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-15T01:55:29+00:00",
        "updated_at": "2022-08-26T08:59:02+00:00",
        "closed_at": "2022-08-26T08:59:02+00:00",
        "comments_count": [
            "weisy11",
            "hatimwen"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1842,
        "title": "构建新的索引库问题",
        "body": "[[您好，我目前需要在900w+张图片中，将cartoon图片筛选出来，目前在看 文档第三章内容](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_recognition.md#3-%E6%9C%AA%E7%9F%A5%E7%B1%BB%E5%88%AB%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E4%BD%93%E9%AA%8C) 遇到几个问题：\r\n\r\n1. 构建新的索引库的时候，需要重新遍历所有的图片数据吗？\r\n2. 构建是否可以直接跳过构建索引库直接使用通用检测模型+cartoon动漫人物识别模型呢？\r\n\r\n希望得到的结果时在批量输入的时候，将识别为cartoon图片提取出来。谢谢\r\n",
        "state": "closed",
        "user": "coallar",
        "closed_by": "coallar",
        "created_at": "2022-04-16T02:14:12+00:00",
        "updated_at": "2022-04-24T09:18:46+00:00",
        "closed_at": "2022-04-24T09:18:46+00:00",
        "comments_count": [
            "TingquanGao",
            "coallar"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1843,
        "title": "[BUG]【论文复现】2个严重bug",
        "body": "在aistudio脚本中使用PaddleClas进行论文复现时，因为时长问题，在engine中设置每50轮停止并输出一次训练参数，前50轮已正常训练，在51-100轮训练时，出现严重bug！！！！！！\r\n\r\nbug1： 原有配置无法正常运行\r\n使用原有配置resume，每次在51轮的eval时，就会停止，并且没有保存内容！！！\r\n多次尝试后，将batchsize由200改成196，才可以正常运行？？？\r\n\r\nbug2：保存参数不完整\r\n51-100轮训练结束后，保存的pdparams不完整？？？50轮的pdparams大小为109.07MB，而100轮的pdparams大小为39.59MB！2天多的训练过程作废了！\r\n\r\n上一期的论文复现也用的是同一套代码，没这么多bug呀",
        "state": "closed",
        "user": "huilin16",
        "closed_by": "weisy11",
        "created_at": "2022-04-17T02:11:50+00:00",
        "updated_at": "2022-04-25T08:39:35+00:00",
        "closed_at": "2022-04-25T08:39:35+00:00",
        "comments_count": [
            "huilin16",
            "HydrogenSulfate"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1839,
        "title": "[k200麒麟]'paddle.fluid.core_noavx.AnalysisConfig' object has no attribute 'set_mkldnn_cache_capacity",
        "body": "[root@eaistation90 PaddleClas]# python3 deploy/python/predict_cls.py  -c deploy/configs/inference_cls.yaml\r\n  \r\nXPURT /usr/local/lib64/python3.7/site-packages/paddle/fluid/../libs/libxpurt.so loaded\r\n2022-04-14 16:29:58 INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-04-14 16:29:58 INFO: Global :\r\n2022-04-14 16:29:58 INFO:     batch_size : 1\r\n2022-04-14 16:29:58 INFO:     cpu_num_threads : 10\r\n2022-04-14 16:29:58 INFO:     enable_benchmark : True\r\n2022-04-14 16:29:58 INFO:     enable_mkldnn : True\r\n2022-04-14 16:29:58 INFO:     enable_profile : False\r\n2022-04-14 16:29:58 INFO:     gpu_mem : 8000\r\n2022-04-14 16:29:58 INFO:     infer_imgs : ./images/\r\n2022-04-14 16:29:58 INFO:     inference_model_dir : ./models/class_ResNet50_vd_ImageNet_infer\r\n\r\n2022-04-14 16:29:58 INFO: Global :\r\n2022-04-14 16:29:58 INFO:     batch_size : 1\r\n2022-04-14 16:29:58 INFO:     cpu_num_threads : 10\r\n2022-04-14 16:29:58 INFO:     enable_benchmark : True\r\n2022-04-14 16:29:58 INFO:     enable_mkldnn : True\r\n2022-04-14 16:29:58 INFO:     enable_profile : False\r\n2022-04-14 16:29:58 INFO:     gpu_mem : 8000\r\n2022-04-14 16:29:58 INFO:     infer_imgs : ./images/\r\n2022-04-14 16:29:58 INFO:     inference_model_dir : ./models/class_ResNet50_vd_ImageNet_infer\r\n2022-04-14 16:29:58 INFO:     ir_optim : True\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-04-14 16:29:58 INFO: Global :\r\n2022-04-14 16:29:58 INFO:     batch_size : 1\r\n2022-04-14 16:29:58 INFO:     cpu_num_threads : 10\r\n2022-04-14 16:29:58 INFO:     enable_benchmark : True\r\n2022-04-14 16:29:58 INFO:     enable_mkldnn : True\r\n2022-04-14 16:29:58 INFO:     enable_profile : False\r\n2022-04-14 16:29:58 INFO:     gpu_mem : 8000\r\n2022-04-14 16:29:58 INFO:     infer_imgs : ./images/\r\n2022-04-14 16:29:58 INFO:     inference_model_dir : ./models/class_ResNet50_vd_ImageNet_infer\r\n2022-04-14 16:29:58 INFO:     ir_optim : True\r\n2022-04-14 16:29:58 INFO:     use_fp16 : False\r\n2022-04-14 16:29:58 INFO:     use_gpu : False\r\n2022-04-14 16:29:58 INFO:     use_tensorrt : False\r\n2022-04-14 16:29:58 INFO: PostProcess :\r\n2022-04-14 16:29:58 INFO:     SavePreLabel :\r\n2022-04-14 16:29:58 INFO:         save_dir : ./pre_label/\r\n2022-04-14 16:29:58 INFO:     Topk :\r\n2022-04-14 16:29:58 INFO:         class_id_map_file : ./ppcls/utils/imagenet1k_label_list.txt\r\n2022-04-14 16:29:58 INFO:         topk : 5\r\n2022-04-14 16:29:58 INFO:     main_indicator : Topk\r\n2022-04-14 16:29:58 INFO: PreProcess :\r\n2022-04-14 16:29:58 INFO:     transform_ops :\r\n2022-04-14 16:29:58 INFO:         ResizeImage :\r\n2022-04-14 16:29:58 INFO:             resize_short : 256\r\n2022-04-14 16:29:58 INFO:         CropImage :\r\n2022-04-14 16:29:58 INFO:             size : 224\r\n2022-04-14 16:29:58 INFO:         NormalizeImage :\r\n2022-04-14 16:29:58 INFO:             channel_num : 3\r\n2022-04-14 16:29:58 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-04-14 16:29:58 INFO:             order :\r\n2022-04-14 16:29:58 INFO:             scale : 0.00392157\r\n2022-04-14 16:29:58 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-04-14 16:29:58 INFO:         ToCHWImage : None\r\nTraceback (most recent call last):\r\n  File \"deploy/python/predict_cls.py\", line 153, in <module>\r\n    main(config)\r\n  File \"deploy/python/predict_cls.py\", line 111, in main\r\n    cls_predictor = ClsPredictor(config)\r\n  File \"deploy/python/predict_cls.py\", line 33, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"/home/kunlun/tuili/xiazai/PaddleClas/deploy/utils/predictor.py\", line 36, in __init__\r\n    args, inference_model_dir)\r\n  File \"/home/kunlun/tuili/xiazai/PaddleClas/deploy/utils/predictor.py\", line 54, in create_paddle_predictor\r\n    config.set_mkldnn_cache_capacity(10)\r\nAttributeError: 'paddle.fluid.core_noavx.AnalysisConfig' object has no attribute 'set_mkldnn_cache_capacity'\r\n[root@eaistation90 PaddleClas]#\r\n",
        "state": "closed",
        "user": "1chang37",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-15T00:37:32+00:00",
        "updated_at": "2022-10-11T06:59:16+00:00",
        "closed_at": "2022-07-26T06:50:02+00:00",
        "comments_count": [
            "fukai7722",
            "aaas19920513",
            "weisy11",
            "fukai7722"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1844,
        "title": "【论文复现】找不到ImageNet数据集的`train_list.txt`和`val_list.txt`",
        "body": "<!-- 写在这对符号中的内容会被隐藏 -->\r\n###  使用场景\r\n\r\n在使用`PaddleClas`复现图像分类论文时，需要`train_list.txt`和`val_list.txt`文件。\r\n\r\n<!-- 请描述您的使用场景 -->\r\n###  数据情况\r\n\r\nImageNet ILSVRC 2012 (ImageNet-1K) train/val，数据集完整。\r\n<!-- 请描述您当前的数据集情况，例如数据集的规模，标注情况，是否干净等 -->\r\n### 问题描述\r\n\r\n在使用`PaddleClas`复现图像分类论文时，没有`train_list.txt`和`val_list.txt`文件，只有[`ppcls/utils/imagenet1k_label_list.txt`](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/ppcls/utils/imagenet1k_label_list.txt)定义了类别代号，所以不知道怎么获得上述两个文件以使用ImageNet进行训练。\r\n\r\n<!-- 请描述您遇到的问题，如果有具体的badcase，也可以在此列出 -->\r\n###  预期效果\r\n\r\n提供统一的`train_list.txt`和`val_list.txt`文件方便训练和验收。\r\n<!-- 请描述您预期的效果 -->\r\n",
        "state": "closed",
        "user": "Dandelight",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-18T02:45:05+00:00",
        "updated_at": "2022-08-30T06:49:52+00:00",
        "closed_at": "2022-08-30T06:49:50+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1850,
        "title": "[HOW TO]请问如何使用自带的ppam工具包实现推理可视化？",
        "body": "<!-- 写在这对符号中的内容会被隐藏 -->\r\n###  使用PPLCNet做图像检索，希望使用ppam自带的工具包cam实现推理可视化\r\n参考的使用方法如[该链接](https://aistudio.baidu.com/paddle/forum/topic/show/990753)。\r\n<!-- 请描述您当前的数据集情况，例如数据集的规模，标注情况，是否干净等 -->\r\n### 问题描述\r\n改写推理脚本，使用自己数据集下训练好的模型，如（PPLCNet、ResNet50），对推理过程的Grad CAM可视化。在提取`target_layer`时出现如下错误：\r\n```\r\nTraceback (most recent call last):\r\n  File \"tools/gradcam.py\", line 53, in <module>\r\n    activation_map = cam_extractor(img_path, label=None)\r\n  File \"/home/pai/envs/paddle/lib/python3.8/site-packages/ppma/cam/grad_cam.py\", line 70, in __call__\r\n    return self.forward(input_tensor, label)\r\n  File \"/home/pai/envs/paddle/lib/python3.8/site-packages/ppma/cam/grad_cam.py\", line 40, in forward\r\n    out = paddle.nn.functional.softmax(out, axis=1)\r\n  File \"/home/pai/envs/paddle/lib/python3.8/site-packages/paddle/nn/functional/activation.py\", line 913, in softmax\r\n    return _C_ops.softmax(outs_cast, 'axis', axis, 'use_cudnn', use_cudnn)\r\nValueError: (InvalidArgument) softmax(): argument 'X' (position 0) must be Tensor, but got dict (at /paddle/paddle/fluid/pybind/op_function.h:816)\r\n```\r\n可视化的核心代码如下：\r\n```\r\nmodel = build_model(config)\r\n# apply_to_static(config, model)\r\n\r\ntarget_layer = model.backbone.last_conv                          \r\ncam_extractor = cam.GradCAMPlusPlus(model, target_layer)   # 支持 GradCAM、XGradCAM、GradCAM++\r\n\r\nactivation_map = cam_extractor(img_path, label=None)   \r\nplt.imsave(os.path.join(save_path+'cam_demo1.jpg'), activation_map)\r\n```\r\n<!-- 请描述您遇到的问题，如果有具体的badcase，也可以在此列出 -->\r\n想请教一下正确的制定模型网络层和实现CAM可视化的方法～最好可以是以PPLCNet为例，（不是paddle.vision.models模型库里面自带模型）\r\n",
        "state": "closed",
        "user": "pynsigrid",
        "closed_by": "weisy11",
        "created_at": "2022-04-18T03:47:56+00:00",
        "updated_at": "2022-04-25T08:26:55+00:00",
        "closed_at": "2022-04-25T08:26:55+00:00",
        "comments_count": [
            "pynsigrid"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1863,
        "title": "[HOW TO]预训练参数加载",
        "body": "你好，请问，我做迁移学习的时候，我只想导入特征提取层的预训练参数，但是我不想导入输出层（比如:softmax）的预训练参数，因为我要换掉该层，请问应该怎么做呢？",
        "state": "closed",
        "user": "AIHHU",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-21T03:52:08+00:00",
        "updated_at": "2022-07-26T06:50:07+00:00",
        "closed_at": "2022-07-26T06:50:03+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1871,
        "title": "[HOW TO]自定义数据集在.yaml配置文件里的配置问题",
        "body": "在config文件夹里设置.yaml配置文件\r\nDataLoader：\r\n                    dataset：\r\n                                 name： 设置了自己做的数据集的文件夹的名字(默认是ImageNetDataset)\r\n训练时报错：NameError: name 'test' is not defined\r\n设置成默认ImageNetDataset报错：ValueError: invalid literal for int() with base 10: '2_1.jpg'\r\n\r\n看官方[配置说明](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/models_training/config_description.md)\r\n\r\n_参数名字  | 具体含义                        | 默认值                        | 可选值\r\nname        | 读取数据的类的名字 | ImageNetDataset | VeriWild 等其他读取数据类的名字_\r\n\r\n这个可选值该怎么填？VeriWild 等其他读取数据类的名字是什么意思？\r\n\r\n\r\n",
        "state": "closed",
        "user": "13136983989",
        "closed_by": "13136983989",
        "created_at": "2022-04-23T15:06:01+00:00",
        "updated_at": "2024-05-07T09:17:12+00:00",
        "closed_at": "2022-04-24T05:40:00+00:00",
        "comments_count": [
            "13136983989",
            "LijiaDong1220",
            "Mios-dream"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1873,
        "title": "self.concrete_program_specify_input_spec(input_spec=None) ？",
        "body": "运行：\r\npython python/my_predict_system.py -c configs/inference_ccartoon.yaml\r\n报错了，输入shape的问题吗？\r\n\r\n![image](https://user-images.githubusercontent.com/66529823/164977351-403934e5-da81-4059-a868-2138751bc9cd.png)\r\n![image](https://user-images.githubusercontent.com/66529823/164977318-c3d1d5b0-3e9e-48cf-bab4-4d90bf5a4cce.png)\r\n\r\n配置文件：\r\n rec_nms_thresold: 0.05\r\n\r\n  batch_size: 1\r\n  image_shape: [3, 256, 256]\r\n  threshold: 0.2\r\n  max_det_results: 5\r\n  labe_list:\r\n  - foreground\r\n\r\n  use_gpu: True\r\n  enable_mkldnn: True\r\n  cpu_num_threads: 10\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nDetPreProcess:\r\n  transform_ops:\r\n    - DetResize:\r\n        interp: 2\r\n        keep_ratio: false\r\n        target_size: [256, 256]\r\n    - DetNormalizeImage:\r\n        is_scale: true\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n    - DetPermute: {}\r\n\r\nDetPostProcess: {}\r\n\r\nRecPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 0.00392157\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:",
        "state": "closed",
        "user": "coallar",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-24T12:53:46+00:00",
        "updated_at": "2022-07-26T06:50:07+00:00",
        "closed_at": "2022-07-26T06:50:04+00:00",
        "comments_count": [
            "cuicheng01",
            "coallar",
            "cuicheng01"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1890,
        "title": "[HOW TO]PaddleClas怎么在代码里加载模型，打印FLOPS和Params？",
        "body": "如何用在python代码中加载PaddleClas的model-zoo模型，然后用paddle.flops()计算模型的Flops和Params？\r\n",
        "state": "closed",
        "user": "13136983989",
        "closed_by": "13136983989",
        "created_at": "2022-05-03T08:29:21+00:00",
        "updated_at": "2022-05-03T09:30:55+00:00",
        "closed_at": "2022-05-03T09:30:55+00:00",
        "comments_count": [],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1880,
        "title": "[HOW TO]关于person Re-Identification",
        "body": "您好！请问文章_Implicit Sample Extension for Unsupervised Person Re-Identification_的代码是还没放出来吗，我从文章里给的网址跳转过来的，但是没有从给出的网址找到代码，打扰您了！\r\n",
        "state": "closed",
        "user": "luluaa",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-26T08:35:44+00:00",
        "updated_at": "2022-08-26T08:59:03+00:00",
        "closed_at": "2022-08-26T08:59:03+00:00",
        "comments_count": [
            "AsuradaYuci",
            "weisy11"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1881,
        "title": "[HOW TO]商品SOP、Inshop和Aliproduct数据集怎么处理成检索可用的数据集？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题。如果您的问题比较复杂，想与我们直接交流，可以首页扫码加入微信群。\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n###  使用场景\r\n<!-- 请描述您的使用场景 -->\r\n###  数据情况\r\n<!-- 请描述您当前的数据集情况，例如数据集的规模，标注情况，是否干净等 -->\r\n### 问题描述\r\n<!-- 请描述您遇到的问题，如果有具体的badcase，也可以在此列出 -->\r\n###  预期效果\r\n<!-- 请描述您预期的效果 -->\r\n",
        "state": "closed",
        "user": "ZhuXiongwei24",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-27T12:21:35+00:00",
        "updated_at": "2022-08-26T08:59:04+00:00",
        "closed_at": "2022-08-26T08:59:04+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1891,
        "title": "PP-ShiTu在ARM跑速度很慢，有优化的方法吗？",
        "body": "跑《PP-ShiTu在Paddle-Lite端侧部署》这个例子，在6核ARM8 CPU上跑耗时1.2秒左右，请问有什么优化的途径？",
        "state": "closed",
        "user": "hymanzhu1983",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-05T07:28:22+00:00",
        "updated_at": "2022-08-26T08:59:05+00:00",
        "closed_at": "2022-08-26T08:59:05+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1896,
        "title": "[BUG]predict_det.py未检测到目标时出错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n### 必要信息\r\n#### 1. PaddleClas版本以及PaddlePaddle版本\r\nPaddleClas release/2.3 paddlepaddle-gpu 2.2.2.post112\r\n#### 2. 最小可复现问题的方法\r\n##### 2.1 原始代码问题\r\n我自己编写程序对视频内容进行识别，将每一帧传入predict_det.py进行检测，未对predict_det.py进行修改，然后当其未检测到目标时出错，因为未检测到目标时会得到空数组，对空数组进行结果处理会出现下标越界类似的问题\r\n#### 3. 报错信息和log\r\n![image](https://user-images.githubusercontent.com/34644177/167261400-1d09c016-926a-498e-80b2-f0067ef0204f.png)\r\n### 补充信息\r\n<!-- 您可以选择填写以下信息，这会对问题的解决有所帮助 -->\r\n#### 1.训练环境信息：\r\n##### 1.1 操作系统  \r\nWindows\r\n##### 1.2 Python版本号  \r\nPython3.7\r\n<!-- 如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号 ->>\r\n### PR和修复建议\r\n#### 1.PR\r\n<!-- 我们非常欢迎您为PaddleClas贡献代码，您可以参考社区贡献指南(https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/advanced_tutorials/how_to_contribute.md)为PaddleClas贡献代码，并将PR链接贴在此处。 -->\r\n#### 2.修复建议\r\n建议将self.parse_det_results处理放置到判断语句内，else时执行该操作，修改如下图所示。\r\n![image](https://user-images.githubusercontent.com/34644177/167261645-48dff9aa-3062-4cee-97e9-9b0f03330be1.png)\r\n\r\n",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-07T15:48:28+00:00",
        "updated_at": "2022-08-26T08:59:07+00:00",
        "closed_at": "2022-08-26T08:59:07+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1898,
        "title": "怎么在paddleclas使用类似VisualDL的可视化工具呢",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题。如果您的问题比较复杂，想与我们直接交流，可以首页扫码加入微信群。\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n###  使用场景\r\n<!-- 请描述您的使用场景 -->\r\n###  数据情况\r\n<!-- 请描述您当前的数据集情况，例如数据集的规模，标注情况，是否干净等 -->\r\n### 问题描述\r\n<!-- 请描述您遇到的问题，如果有具体的badcase，也可以在此列出 -->\r\n###  预期效果\r\n<!-- 请描述您预期的效果 -->\r\n",
        "state": "closed",
        "user": "BainOuO",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-09T01:45:37+00:00",
        "updated_at": "2022-08-26T08:59:08+00:00",
        "closed_at": "2022-08-26T08:59:08+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1909,
        "title": "向量检索问题",
        "body": "index_vectors = np.random.rand(100000,128).astype(np.float32) \r\nquery_vector = index_vectors[0, :]\r\nindex_docs = [\"ID_\"+str(i) for i in range(100000)]\r\n\r\n# 初始化索引结构\r\nindexer = Graph_Index(dist_type=\"L2\") #支持\"IP\"和\"L2\"\r\nindexer.build(gallery_vectors=index_vectors, gallery_docs=index_docs, pq_size=100, index_path='test')\r\n\r\n# 查询\r\nscores, docs = indexer.search(query=query_vector, return_k=10, search_budget=100)\r\nprint(scores)\r\nprint(docs)\r\n\r\n['ID_61691', 'ID_85420', 'ID_50524', 'ID_91696', 'ID_57114', 'ID_72919', 'ID_86812', 'ID_66704', 'ID_31456', 'ID_35245']\r\n\r\n以上代码是用index_vectors的第一个向量进行检索，请问为什么检索到的不是第一个呢",
        "state": "closed",
        "user": "140ai",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-11T01:44:52+00:00",
        "updated_at": "2022-08-26T08:59:09+00:00",
        "closed_at": "2022-08-26T08:59:09+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1911,
        "title": "export_model.py导出模型出错",
        "body": "PaddleClas release/2.3\r\nwindows10 python3.7 CUDA10.2/cuDNN 7.6.5 paddle2.2.2\r\n分类模型训练完成，使用导出命令时出错\r\n\r\npython tools/export_model.py -c ppcls/configs/GeneralRecognition/GeneralRecognition_PPLCNet_x2_5.yaml -o Global.pretrained_model=\"output/RecModel/best_model\"\r\n\r\n[2022/05/11 14:08:40] root INFO: \r\n[2022/05/11 14:08:40] root INFO: Arch : \r\n[2022/05/11 14:08:40] root INFO:     Backbone :\r\n[2022/05/11 14:08:40] root INFO:         name : PPLCNet_x2_5\r\n[2022/05/11 14:08:40] root INFO:         pretrained : True\r\n[2022/05/11 14:08:40] root INFO:         use_ssld : True\r\n[2022/05/11 14:08:40] root INFO:     BackboneStopLayer :\r\n[2022/05/11 14:08:40] root INFO:         name : flatten\r\n[2022/05/11 14:08:40] root INFO:     Head :\r\n[2022/05/11 14:08:40] root INFO:         class_num : 7\r\n[2022/05/11 14:08:40] root INFO:         embedding_size : 512\r\n[2022/05/11 14:08:40] root INFO:         margin : 0.2\r\n[2022/05/11 14:08:40] root INFO:         name : ArcMargin\r\n[2022/05/11 14:08:40] root INFO:         scale : 30\r\n[2022/05/11 14:08:40] root INFO:     Neck :\r\n[2022/05/11 14:08:40] root INFO:         class_num : 512\r\n[2022/05/11 14:08:40] root INFO:         embedding_size : 1280\r\n[2022/05/11 14:08:40] root INFO:         name : FC\r\n[2022/05/11 14:08:40] root INFO:     infer_add_softmax : False\r\n[2022/05/11 14:08:40] root INFO:     infer_output_key : features\r\n[2022/05/11 14:08:40] root INFO:     name : RecModel\r\n[2022/05/11 14:08:40] root INFO: DataLoader :\r\n[2022/05/11 14:08:40] root INFO:     Eval :\r\n[2022/05/11 14:08:40] root INFO:         Gallery :\r\n[2022/05/11 14:08:40] root INFO:             dataset :\r\n[2022/05/11 14:08:40] root INFO:                 cls_label_path : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/val.txt\r\n[2022/05/11 14:08:40] root INFO:                 image_root : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n[2022/05/11 14:08:40] root INFO:                 name : VeriWild\r\n[2022/05/11 14:08:40] root INFO:                 transform_ops :\r\n[2022/05/11 14:08:40] root INFO:                     DecodeImage :\r\n[2022/05/11 14:08:40] root INFO:                         channel_first : False\r\n[2022/05/11 14:08:40] root INFO:                         to_rgb : True\r\n[2022/05/11 14:08:40] root INFO:                     ResizeImage :\r\n[2022/05/11 14:08:40] root INFO:                         size : 224\r\n[2022/05/11 14:08:40] root INFO:                     NormalizeImage :\r\n[2022/05/11 14:08:40] root INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2022/05/11 14:08:40] root INFO:                         order :\r\n[2022/05/11 14:08:40] root INFO:                         scale : 0.00392157\r\n[2022/05/11 14:08:40] root INFO:                         std : [0.229, 0.224, 0.225]\r\n[2022/05/11 14:08:40] root INFO:             loader :\r\n[2022/05/11 14:08:40] root INFO:                 num_workers : 0\r\n[2022/05/11 14:08:40] root INFO:                 use_shared_memory : True\r\n[2022/05/11 14:08:40] root INFO:             sampler :\r\n[2022/05/11 14:08:40] root INFO:                 batch_size : 2\r\n[2022/05/11 14:08:40] root INFO:                 drop_last : False\r\n[2022/05/11 14:08:40] root INFO:                 name : DistributedBatchSampler\r\n[2022/05/11 14:08:40] root INFO:                 shuffle : False\r\n[2022/05/11 14:08:40] root INFO:         Query :\r\n[2022/05/11 14:08:40] root INFO:             dataset :\r\n[2022/05/11 14:08:40] root INFO:                 cls_label_path : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/val.txt\r\n[2022/05/11 14:08:40] root INFO:                 image_root : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n[2022/05/11 14:08:40] root INFO:                 name : VeriWild\r\n[2022/05/11 14:08:40] root INFO:                 transform_ops :\r\n[2022/05/11 14:08:40] root INFO:                     DecodeImage :\r\n[2022/05/11 14:08:40] root INFO:                         channel_first : False\r\n[2022/05/11 14:08:40] root INFO:                         to_rgb : True\r\n[2022/05/11 14:08:40] root INFO:                     ResizeImage :\r\n[2022/05/11 14:08:40] root INFO:                         size : 224\r\n[2022/05/11 14:08:40] root INFO:                     NormalizeImage :\r\n[2022/05/11 14:08:40] root INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2022/05/11 14:08:40] root INFO:                         order :\r\n[2022/05/11 14:08:40] root INFO:                         scale : 0.00392157\r\n[2022/05/11 14:08:40] root INFO:                         std : [0.229, 0.224, 0.225]\r\n[2022/05/11 14:08:40] root INFO:             loader :\r\n[2022/05/11 14:08:40] root INFO:                 num_workers : 0\r\n[2022/05/11 14:08:40] root INFO:                 use_shared_memory : True\r\n[2022/05/11 14:08:40] root INFO:             sampler :\r\n[2022/05/11 14:08:40] root INFO:                 batch_size : 2\r\n[2022/05/11 14:08:40] root INFO:                 drop_last : False\r\n[2022/05/11 14:08:40] root INFO:                 name : DistributedBatchSampler\r\n[2022/05/11 14:08:40] root INFO:                 shuffle : False\r\n[2022/05/11 14:08:40] root INFO:     Train :\r\n[2022/05/11 14:08:40] root INFO:         dataset :\r\n[2022/05/11 14:08:40] root INFO:             cls_label_path : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/train.txt\r\n[2022/05/11 14:08:40] root INFO:             image_root : C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n[2022/05/11 14:08:40] root INFO:             name : ImageNetDataset\r\n[2022/05/11 14:08:40] root INFO:             transform_ops :\r\n[2022/05/11 14:08:40] root INFO:                 DecodeImage :\r\n[2022/05/11 14:08:40] root INFO:                     channel_first : False\r\n[2022/05/11 14:08:40] root INFO:                     to_rgb : True\r\n[2022/05/11 14:08:40] root INFO:                 RandCropImage :\r\n[2022/05/11 14:08:40] root INFO:                     size : 224\r\n[2022/05/11 14:08:40] root INFO:                 RandFlipImage : \r\n[2022/05/11 14:08:40] root INFO:                     flip_code : 1\r\n[2022/05/11 14:08:40] root INFO:                 NormalizeImage :\r\n[2022/05/11 14:08:40] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/05/11 14:08:40] root INFO:                     order :\r\n[2022/05/11 14:08:40] root INFO:                     scale : 1.0/255.0\r\n[2022/05/11 14:08:40] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/05/11 14:08:40] root INFO:         loader :\r\n[2022/05/11 14:08:40] root INFO:             num_workers : 0\r\n[2022/05/11 14:08:40] root INFO:             use_shared_memory : True\r\n[2022/05/11 14:08:40] root INFO:         sampler :\r\n[2022/05/11 14:08:40] root INFO:             batch_size : 2\r\n[2022/05/11 14:08:40] root INFO:             drop_last : False\r\n[2022/05/11 14:08:40] root INFO:             name : DistributedBatchSampler\r\n[2022/05/11 14:08:40] root INFO:             shuffle : True\r\n[2022/05/11 14:08:40] root INFO: Global :\r\n[2022/05/11 14:08:40] root INFO:     checkpoints : None\r\n[2022/05/11 14:08:40] root INFO:     device : gpu\r\n[2022/05/11 14:08:40] root INFO:     epochs : 10\r\n[2022/05/11 14:08:40] root INFO:     eval_during_train : True\r\n[2022/05/11 14:08:40] root INFO:     eval_interval : 10\r\n[2022/05/11 14:08:40] root INFO:     eval_mode : retrieval\r\n[2022/05/11 14:08:40] root INFO:     image_shape : [3, 224, 224]\r\n[2022/05/11 14:08:40] root INFO:     output_dir : ./output/\r\n[2022/05/11 14:08:40] root INFO:     pretrained_model : output/RecModel/best_model\r\n[2022/05/11 14:08:40] root INFO:     print_batch_step : 10\r\n[2022/05/11 14:08:40] root INFO:     save_inference_dir : ./inference\r\n[2022/05/11 14:08:40] root INFO:     save_interval : 10\r\n[2022/05/11 14:08:40] root INFO:     to_static : False\r\n[2022/05/11 14:08:40] root INFO:     use_dali : False\r\n[2022/05/11 14:08:40] root INFO:     use_visualdl : True\r\n[2022/05/11 14:08:40] root INFO: Loss :\r\n[2022/05/11 14:08:40] root INFO:     Eval :\r\n[2022/05/11 14:08:40] root INFO:         CELoss :\r\n[2022/05/11 14:08:40] root INFO:             weight : 1.0\r\n[2022/05/11 14:08:40] root INFO:     Train :\r\n[2022/05/11 14:08:40] root INFO:         CELoss :\r\n[2022/05/11 14:08:40] root INFO:             weight : 1.0\r\n[2022/05/11 14:08:40] root INFO: Metric :\r\n[2022/05/11 14:08:40] root INFO:     Eval :\r\n[2022/05/11 14:08:40] root INFO:         Recallk :\r\n[2022/05/11 14:08:40] root INFO:             topk : [1, 5]\r\n[2022/05/11 14:08:40] root INFO: Optimizer :\r\n[2022/05/11 14:08:40] root INFO:     lr :\r\n[2022/05/11 14:08:40] root INFO:         learning_rate : 0.04\r\n[2022/05/11 14:08:40] root INFO:         name : Cosine\r\n[2022/05/11 14:08:40] root INFO:         warmup_epoch : 5\r\n[2022/05/11 14:08:40] root INFO:     momentum : 0.9\r\n[2022/05/11 14:08:40] root INFO:     name : Momentum\r\n[2022/05/11 14:08:40] root INFO:     regularizer :\r\n[2022/05/11 14:08:40] root INFO:         coeff : 1e-05\r\n[2022/05/11 14:08:40] root INFO:         name : L2\r\n[2022/05/11 14:08:40] root INFO: train with paddle 2.2.2 and device CUDAPlace(0)\r\nW0511 14:08:40.735852  6588 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 11.1, Runtime API Version: 10.2\r\nW0511 14:08:40.743853  6588 device_context.cc:465] device: 0, cuDNN Version: 7.6.\r\n[2022/05/11 14:08:43] root INFO: unique_endpoints {''}\r\n[2022/05/11 14:08:43] root INFO: Found C:\\Users\\zhijun.li/.paddleclas/weights\\PPLCNet_x2_5_ssld_pretrained.pdparams\r\nC:\\Users\\zhijun.li\\AppData\\Local\\conda\\conda\\envs\\paddle\\lib\\site-packages\\paddle\\fluid\\layers\\utils.py:77: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Pyt\r\nhon 3.3,and in 3.9 it will stop working\r\n  return (isinstance(seq, collections.Sequence) and\r\n\r\nGeneralRecognition_PPLCNet_x2_5.yaml文件内容如下：\r\n\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 10\r\n  eval_during_train: True\r\n  eval_interval: 10\r\n  epochs: 10\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n  eval_mode: retrieval\r\n  use_dali: False\r\n  to_static: False\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone: \r\n    name: PPLCNet_x2_5\r\n    pretrained: True\r\n    use_ssld: True\r\n  BackboneStopLayer:\r\n    name: \"flatten\"\r\n  Neck:\r\n    name: FC\r\n    embedding_size: 1280\r\n    class_num: 512\r\n  Head:\r\n    name: ArcMargin \r\n    embedding_size: 512\r\n    class_num: 7\r\n    margin: 0.2\r\n    scale: 30\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.04\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n      cls_label_path: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 2\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 0\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    Query:\r\n      dataset: \r\n        name: VeriWild\r\n        image_root: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n        cls_label_path: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/val.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: 224\r\n          - NormalizeImage:\r\n              scale: 0.00392157\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: ''\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 2\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 0\r\n        use_shared_memory: True\r\n\r\n    Gallery:\r\n      dataset: \r\n        name: VeriWild\r\n        image_root: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset\r\n        cls_label_path: C:/Users/zhijun.li/Desktop/PaddleClas-release-2.3/dataset/val.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: 224\r\n          - NormalizeImage:\r\n              scale: 0.00392157\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: ''\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 2\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 0\r\n        use_shared_memory: True\r\n\r\nMetric:\r\n  Eval:\r\n    - Recallk:\r\n        topk: [1, 5]",
        "state": "closed",
        "user": "ZhijunLStudio",
        "closed_by": "ZhijunLStudio",
        "created_at": "2022-05-11T06:24:41+00:00",
        "updated_at": "2022-05-17T01:40:58+00:00",
        "closed_at": "2022-05-17T01:40:58+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1924,
        "title": "希望paddleclas适配opencv-python和 gast最新版本,谢谢",
        "body": "使用pip安装paddleclas,安装的opencv-python和 gast两个包都不是最新版本,希望paddleclas可以适配opencv-python和 gast最新版本,谢谢",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-14T02:54:44+00:00",
        "updated_at": "2022-08-26T08:59:11+00:00",
        "closed_at": "2022-08-26T08:59:11+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "bug",
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1929,
        "title": "请问如何使用paddleclas实现multi-head的模型",
        "body": "您好，我想基于paddleclas实现多head的模型，就是有n个分类头，然后他们共享一个backbone，训练时backbone使用所有的数据迭代，但是每个不同的分类头使用相应的任务数据进行迭代，仍然使用配置文件的方式进行训练，请问大概应该如何修改？",
        "state": "closed",
        "user": "xywlpo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-17T02:03:19+00:00",
        "updated_at": "2022-08-26T08:59:12+00:00",
        "closed_at": "2022-08-26T08:59:12+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "xywlpo",
            "HydrogenSulfate"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1934,
        "title": "[BUG]Error: This model is not supported, because 1 ops are not supported on 'arm'. These unsupported ops are: 'moving_average_abs_max_scale'.",
        "body": "\r\n在使用https://github.com/PaddlePaddle/PaddleClas/blob/deploy_v2/docs/zh_CN/advanced_tutorials/gallery2fc.md\r\n这个是在paddlecls developv2中转换的。因为2.3relase中报错。\r\n这个将识别模型转换之后，使用paddlelite转成nb模型的时候报错。\r\n使用的命令：\r\npaddle_lite_opt --model_file=./interface/rec.pdmodel --param_file=./interface/rec.pdiparams --optimize_out_type=naive_buffer --optimize_out=./interface/rec_nb --valid_targets=arm\r\n\r\n我使用的paddlepaddle -gpu ==2.2.0\r\npaddlelite = 2.10rc\r\n运行上述命令之后报错。\r\nError: This model is not supported, because 1 ops are not supported on 'arm'. These unsupported ops are: 'moving_average_abs_max_scale'.\r\n\r\n请问您那边nb模型是怎么转出来的，我完全按照这个说的转的。转成nb模型的时候就报错。",
        "state": "closed",
        "user": "feifaxiaoming",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-17T13:16:24+00:00",
        "updated_at": "2022-08-30T06:49:53+00:00",
        "closed_at": "2022-08-30T06:49:50+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1935,
        "title": "PaddleClass识别网络如何冻结预训练模型的backbone参数",
        "body": "我在使用PaddleClass2.2中的Logo识别模型时想冻结backbone中加载预训练模型的权重，该如何解决？",
        "state": "closed",
        "user": "MrLPF",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-18T03:57:24+00:00",
        "updated_at": "2022-10-04T06:47:25+00:00",
        "closed_at": "2022-10-04T06:47:21+00:00",
        "comments_count": [
            "RainFrost1",
            "RainFrost1"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1940,
        "title": "[HOW TO]请问可以直接在 app 中执行这个推理过程吗。",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题。如果您的问题比较复杂，想与我们直接交流，可以首页扫码加入微信群。\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n###  使用场景\r\napp 中进行图片推理\r\n###  数据情况\r\n<!-- 请描述您当前的数据集情况，例如数据集的规模，标注情况，是否干净等 -->\r\n### 问题描述\r\n需要在 app 中进行图片推理，文档上貌似只有命令进入 shell 执行，请问在 app 上有运行有相关教程吗\r\n###  预期效果\r\n\r\n",
        "state": "closed",
        "user": "mrqinshou",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-19T09:24:58+00:00",
        "updated_at": "2022-10-04T06:47:27+00:00",
        "closed_at": "2022-10-04T06:47:22+00:00",
        "comments_count": [
            "cuicheng01",
            "mrqinshou",
            "PaulX1029"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1948,
        "title": "度量学习配置文件",
        "body": "请问哪些案例是度量学习的，能提供一个配置文件或地址吗？\r\nClassification based\r\nPairwise based",
        "state": "closed",
        "user": "lguowang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-23T10:11:19+00:00",
        "updated_at": "2022-08-30T06:49:54+00:00",
        "closed_at": "2022-08-30T06:49:51+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1961,
        "title": "pp-shitu训练自己的数据遇到错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PPaddleClas master 和paddlepaddle-gpu          2.3.0 \r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.1\r\n log\r\n```\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/ssd2/exec/jiaruoran/python/PaddleClas/ppcls/engine/engine.py\", line 295, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/ssd2/exec/jiaruoran/python/PaddleClas/ppcls/engine/train/train.py\", line 54, in train_epoch\r\n    loss_dict = engine.train_loss_func(out, batch[1])\r\n  File \"/ssd2/exec/jiaruoran/python/PaddleClas/ppcls/loss/__init__.py\", line 51, in __call__\r\n    loss = self.loss_func[0](input, batch)\r\n  File \"/ssd7/exec/jiaruoran/anaconda3/envs/slurm/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/ssd7/exec/jiaruoran/anaconda3/envs/slurm/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/ssd2/exec/jiaruoran/python/PaddleClas/ppcls/loss/celoss.py\", line 58, in forward\r\n    loss = F.cross_entropy(x, label=label, soft_label=soft_label)\r\n  File \"/ssd7/exec/jiaruoran/anaconda3/envs/slurm/lib/python3.7/site-packages/paddle/nn/functional/loss.py\", line 1716, in cross_entropy\r\n    label_min.item()))\r\nValueError: Target 4600925743447261037 is out of lower bound.\r\n```\r\n# cpu模式下可以正常运行，GPU模式下报错\r\n\r\n## 没有改动任何代码，只是按照https://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/zh_CN/image_recognition_pipeline/feature_extraction.md指导下进行自定义数据训练特征提取网络\r\n",
        "state": "closed",
        "user": "rrjia",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-25T09:46:57+00:00",
        "updated_at": "2023-04-20T06:50:25+00:00",
        "closed_at": "2023-02-21T06:41:32+00:00",
        "comments_count": [
            "rrjia",
            "HydrogenSulfate",
            "Firestick-Xia",
            "Firestick-Xia",
            "HydrogenSulfate",
            "Firestick-Xia",
            "rrjia",
            "HydrogenSulfate",
            "HydrogenSulfate",
            "Firestick-Xia",
            "HydrogenSulfate",
            "Firestick-Xia",
            "HydrogenSulfate",
            "Firestick-Xia",
            "LijiaDong1220",
            "HydrogenSulfate",
            "Genlk"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1967,
        "title": "如何不进行训练，将512dim下降到128dim",
        "body": "希望能帮忙解决\r\n512dim --->>> 128dim\r\n",
        "state": "closed",
        "user": "kejom-ou",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-30T03:24:59+00:00",
        "updated_at": "2022-09-20T06:47:47+00:00",
        "closed_at": "2022-09-20T06:47:43+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1879,
        "title": "[BUG] 2.3 版本 不支持配置文件加入 lr_mult_list: [0.5, 0.5, 0.6, 0.6, 0.8]",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n### 必要信息\r\n** 如果您不能提供以下必要信息，可能会影响问题解决的速度 **\r\n#### 1. PaddleClas版本以及PaddlePaddle版本\r\n2.3\r\n#### 2. 最小可复现问题的方法\r\n修改 ResNet50_vd.yaml\r\nname: ResNet50_vd\r\n后加入\r\nparams:\r\n        lr_mult_list: [0.5, 0.5, 0.6, 0.6, 0.8]\r\n\r\n##### 2.1 原始代码问题\r\n<!-- 如果您在使用PaddleClas原始代码中遇到问题，请说明您的使用方法和用到的配置文件。如果您对配置文件做了修改也请一并说明 -->\r\n##### 2.2 二次开发问题\r\n<!-- 如果您对PaddleClas进行了二次开发，请您整理二次开发的部分，仅保留最小可复现问题的代码。 -->\r\n#### 3. 报错信息和log\r\n提示\r\nTypeError: __init__() got an unexpected keyword argument 'params'\r\n\r\n去掉param这两行信息，运行正常\r\n\r\n### 补充信息\r\n<!-- 您可以选择填写以下信息，这会对问题的解决有所帮助 -->\r\n#### 1.训练环境信息：\r\n##### 1.1 操作系统  <!-- 如Linux/Windows/MacOS -->\r\n##### 1.2 Python版本号  <!-- 如Python3.6/7/8 -->\r\n##### 1.3 CUDA/cuDNN版本  <!-- 如CUDA10.2/cuDNN 7.6.5等 -->\r\n##### 1.4 涉及的其他产品的版本号\r\n<!-- 如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号 ->>\r\n### PR和修复建议\r\n#### 1.PR\r\n<!-- 我们非常欢迎您为PaddleClas贡献代码，您可以参考社区贡献指南(https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/advanced_tutorials/how_to_contribute.md)为PaddleClas贡献代码，并将PR链接贴在此处。 -->\r\n#### 2.修复建议\r\n<!-- 如果您对修复有任何建议，也请您不吝赐教 -->\r\n",
        "state": "closed",
        "user": "xixixihaha",
        "closed_by": "xixixihaha",
        "created_at": "2022-04-26T06:45:44+00:00",
        "updated_at": "2022-04-26T13:04:42+00:00",
        "closed_at": "2022-04-26T13:04:42+00:00",
        "comments_count": [
            "TingquanGao",
            "xixixihaha"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1883,
        "title": "如果训练的时间不长，预测的时候会报错",
        "body": "\"python/postprocess.py\\\", line 100, in __call__\\\\n    label_name_list.append(self.class_id_map[i.item()])\\\\nKeyError: 922\\\\n'\",\r\n",
        "state": "closed",
        "user": "KyleWang-Hunter",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-04-28T05:12:39+00:00",
        "updated_at": "2022-08-26T08:59:05+00:00",
        "closed_at": "2022-08-26T08:59:05+00:00",
        "comments_count": [
            "weisy11",
            "KyleWang-Hunter",
            "weisy11",
            "KyleWang-Hunter",
            "weisy11",
            "KyleWang-Hunter",
            "weisy11",
            "KyleWang-Hunter",
            "weisy11",
            "KyleWang-Hunter",
            "weisy11",
            "KyleWang-Hunter",
            "KyleWang-Hunter",
            "weisy11",
            "weisy11",
            "KyleWang-Hunter",
            "weisy11"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1895,
        "title": "[BUG]识别配置文件字段待优化",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n### 必要信息\r\n** 如果您不能提供以下必要信息，可能会影响问题解决的速度 **\r\n#### 1. PaddleClas版本以及PaddlePaddle版本\r\n<!-- 请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0 -->\r\nPaddleClas release/2.3\r\n#### 2. 最小可复现问题的方法\r\n##### 2.1 原始代码问题\r\n<!-- 如果您在使用PaddleClas原始代码中遇到问题，请说明您的使用方法和用到的配置文件。如果您对配置文件做了修改也请一并说明 -->\r\ndeploy/configs/inference中label列表中的字段名称为labe_list，不应该为label_list吗，不知道是写错了还是故意为之\r\n\r\n\r\n<!-- 如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号 ->>\r\n### PR和修复建议\r\n#### 1.PR\r\n<!-- 我们非常欢迎您为PaddleClas贡献代码，您可以参考社区贡献指南(https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/advanced_tutorials/how_to_contribute.md)为PaddleClas贡献代码，并将PR链接贴在此处。 -->\r\n#### 2.修复建议\r\n<!-- 如果您对修复有任何建议，也请您不吝赐教 -->\r\n建议修改字段名为label_list，同时应该对deploy/python/predict.py中相关行代码进行修改，修改建议见下图：\r\n![image](https://user-images.githubusercontent.com/34644177/167246939-f8314bb9-0163-4b7d-a564-b5f775774000.png)\r\n\r\n![image](https://user-images.githubusercontent.com/34644177/167246983-6bc46bd4-766e-40b4-a67f-ff706ca65bd6.png)\r\n\r\n",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-07T08:52:50+00:00",
        "updated_at": "2022-08-26T08:59:06+00:00",
        "closed_at": "2022-08-26T08:59:06+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1956,
        "title": "关于paddle resnet50模型动态图concat reduce_mean、reduce_mean_grad、c_broadcast 的作用",
        "body": "你好，在打印模型训练log时发现resnet50会执行到concat、reduce_mean、reduce_mean_grad、c_braodcast这些op。我用\r\nnetron打开保存的模型并没有发现这些op。能帮忙解释一下为什么会用到这些op，以及这些op在训练过程中的作用吗？非常感谢~",
        "state": "closed",
        "user": "daming5432",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-25T02:03:07+00:00",
        "updated_at": "2022-09-20T06:47:45+00:00",
        "closed_at": "2022-09-20T06:47:42+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1973,
        "title": "如何构造一个分布式加权采样器",
        "body": "您好，请问如何构造一个分布式的加权采样器，就是采样基于样本的权重，例如使用WeightedRandomSampler的效果，然后数据要支持分布式的训练DistributedBatchSampler，请问应该如何构造？\r\n\r\n非常感谢您的回复",
        "state": "closed",
        "user": "xywlpo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-31T17:29:34+00:00",
        "updated_at": "2022-10-04T06:47:27+00:00",
        "closed_at": "2022-10-04T06:47:23+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "xywlpo",
            "HydrogenSulfate",
            "xywlpo",
            "xywlpo",
            "HydrogenSulfate",
            "xywlpo",
            "weisy11",
            "weisy11",
            "xywlpo",
            "xywlpo",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1937,
        "title": "Efficientnet是否支持tensorrt推理",
        "body": null,
        "state": "closed",
        "user": "litao-zhx",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-18T08:45:49+00:00",
        "updated_at": "2022-10-11T06:50:53+00:00",
        "closed_at": "2022-10-11T06:50:51+00:00",
        "comments_count": [
            "RainFrost1",
            "litao-zhx",
            "litao-zhx",
            "RainFrost1",
            "litao-zhx",
            "RainFrost1",
            "litao-zhx",
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1932,
        "title": "[BUG]NO module named 'ppcls' ",
        "body": "使用的是paddleClas relase版本 2.3\r\n问题：\r\n当我使用https://github.com/PaddlePaddle/PaddleClas/blob/deploy_v2/docs/zh_CN/advanced_tutorials/gallery2fc.md\r\n这个链接识别模型转分类模型转分类模型的使用，运行\r\npython ppcls/utils/gallery2fc.py -c ppcls/configs/GeneralRecognition/Gallery2FC_PPLCNet_x2_5.yaml的使用\r\n一直提示NO module named 'ppcls'  \r\n只要是导入的头部带from ppcls.arch import build_model  就直接报错。\r\n找不到ppcls，但是我是正常安装的啊。",
        "state": "closed",
        "user": "feifaxiaoming",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-17T10:12:59+00:00",
        "updated_at": "2025-01-25T01:00:49+00:00",
        "closed_at": "2022-10-18T06:48:58+00:00",
        "comments_count": [
            "feifaxiaoming",
            "cuicheng01",
            "Liamkk",
            "arrywu",
            "zhouwei5113"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1900,
        "title": " '<' not supported between instances of 'int' and 'NoneType'",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n<!-- 写在这对符号中的内容会被隐藏 -->\r\n### 必要信息\r\n** 如果您不能提供以下必要信息，可能会影响问题解决的速度 **\r\n#### 1. PaddleClas版本以及PaddlePaddle版本\r\nPaddlePaddle 2.1.0 \r\n#### 2. 最小可复现问题的方法\r\n##### 2.1 原始代码问题\r\n '<' not supported between instances of 'int' and 'NoneType'\r\n##### 2.2 二次开发问题\r\n<!-- 如果您对PaddleClas进行了二次开发，请您整理二次开发的部分，仅保留最小可复现问题的代码。 -->\r\n#### 3. 报错信息和log\r\n<!-- 请您提供报错信息的摘录或截图，运行log文件等内容 -->\r\n2022-05-09 11:16:10 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-05-09 11:16:10 INFO: ARCHITECTURE : \r\n2022-05-09 11:16:10 INFO:     name : MobileNetV3_large_x1_25\r\n2022-05-09 11:16:10 INFO: ------------------------------------------------------------\r\n2022-05-09 11:16:10 INFO: LEARNING_RATE : \r\n2022-05-09 11:16:10 INFO:     function : CosineWarmup\r\n2022-05-09 11:16:10 INFO:     params : \r\n2022-05-09 11:16:10 INFO:         lr : 0.65\r\n2022-05-09 11:16:10 INFO:         warmup_epoch : 5\r\n2022-05-09 11:16:10 INFO: ------------------------------------------------------------\r\n2022-05-09 11:16:10 INFO: OPTIMIZER : \r\n2022-05-09 11:16:10 INFO:     function : Momentum\r\n2022-05-09 11:16:10 INFO:     params : \r\n2022-05-09 11:16:10 INFO:         momentum : 0.9\r\n2022-05-09 11:16:10 INFO:     regularizer : \r\n2022-05-09 11:16:10 INFO:         factor : 4e-05\r\n2022-05-09 11:16:10 INFO:         function : L2\r\n2022-05-09 11:16:10 INFO: ------------------------------------------------------------\r\n2022-05-09 11:16:10 INFO: TRAIN : \r\n2022-05-09 11:16:10 INFO:     batch_size : 128\r\n2022-05-09 11:16:10 INFO:     data_dir : ./dataset/tea/\r\n2022-05-09 11:16:10 INFO:     file_list : ./dataset/tea/train_list.txt\r\n2022-05-09 11:16:10 INFO:     num_workers : 1\r\n2022-05-09 11:16:10 INFO:     shuffle_seed : 0\r\n2022-05-09 11:16:10 INFO:     transforms : \r\n2022-05-09 11:16:10 INFO:         DecodeImage : \r\n2022-05-09 11:16:10 INFO:             channel_first : False\r\n2022-05-09 11:16:10 INFO:             to_rgb : True\r\n2022-05-09 11:16:10 INFO:         RandCropImage : \r\n2022-05-09 11:16:10 INFO:             size : 224\r\n2022-05-09 11:16:10 INFO:         RandFlipImage : \r\n2022-05-09 11:16:10 INFO:             flip_code : 1\r\n2022-05-09 11:16:10 INFO:         NormalizeImage : \r\n2022-05-09 11:16:10 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-05-09 11:16:10 INFO:             order : \r\n2022-05-09 11:16:10 INFO:             scale : 1./255.\r\n2022-05-09 11:16:10 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-05-09 11:16:10 INFO:         ToCHWImage : None\r\n2022-05-09 11:16:10 INFO: ------------------------------------------------------------\r\n2022-05-09 11:16:10 INFO: VALID : \r\n2022-05-09 11:16:10 INFO:     batch_size : 128\r\n2022-05-09 11:16:10 INFO:     data_dir : ./dataset/tea/\r\n2022-05-09 11:16:10 INFO:     file_list : ./dataset/tea/val_list.txt\r\n2022-05-09 11:16:10 INFO:     num_workers : 1\r\n2022-05-09 11:16:10 INFO:     shuffle_seed : 0\r\n2022-05-09 11:16:10 INFO:     transforms : \r\n2022-05-09 11:16:10 INFO:         DecodeImage : \r\n2022-05-09 11:16:10 INFO:             channel_first : False\r\n2022-05-09 11:16:10 INFO:             to_rgb : True\r\n2022-05-09 11:16:10 INFO:         ResizeImage : \r\n2022-05-09 11:16:10 INFO:             resize_short : 256\r\n2022-05-09 11:16:10 INFO:         CropImage : \r\n2022-05-09 11:16:10 INFO:             size : 224\r\n2022-05-09 11:16:10 INFO:         NormalizeImage : \r\n2022-05-09 11:16:10 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-05-09 11:16:10 INFO:             order : \r\n2022-05-09 11:16:10 INFO:             scale : 1.0/255.0\r\n2022-05-09 11:16:10 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-05-09 11:16:10 INFO:         ToCHWImage : None\r\n2022-05-09 11:16:10 INFO: ------------------------------------------------------------\r\n2022-05-09 11:16:10 INFO: classes_num : 5\r\n2022-05-09 11:16:10 INFO: epochs : 100\r\n2022-05-09 11:16:10 INFO: image_shape : [3, 224, 224]\r\n2022-05-09 11:16:10 INFO: ls_epsilon : 0.1\r\n2022-05-09 11:16:10 INFO: mode : train\r\n2022-05-09 11:16:10 INFO: model_save_dir : ./output/\r\n2022-05-09 11:16:10 INFO: pretrained_model : \r\n2022-05-09 11:16:10 INFO: save_interval : 1\r\n2022-05-09 11:16:10 INFO: topk : None\r\n2022-05-09 11:16:10 INFO: total_images : 27662\r\n2022-05-09 11:16:10 INFO: valid_interval : 1\r\n2022-05-09 11:16:10 INFO: validate : True\r\nW0509 11:16:10.537891   118 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.2, Runtime API Version: 10.1\r\nW0509 11:16:10.544189   118 device_context.cc:465] device: 0, cuDNN Version: 7.6.\r\n2022-05-09 11:16:16 ERROR: '<' not supported between instances of 'int' and 'NoneType'\r\n<!-- 您可以选择填写以下信息，这会对问题的解决有所帮助 -->\r\n#### 1.训练环境信息：\r\n##### 1.1 操作系统  <!-- 如Linux/Windows/MacOS -->\r\n##### 1.2 Python版本号  <!-- 如Python3.6/7/8 -->\r\n##### 1.3 CUDA/cuDNN版本  <!-- 如CUDA10.2/cuDNN 7.6.5等 -->\r\n##### 1.4 涉及的其他产品的版本号\r\n<!-- 如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号 ->>\r\n### PR和修复建议\r\n#### 1.PR\r\n<!-- 我们非常欢迎您为PaddleClas贡献代码，您可以参考社区贡献指南(https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/advanced_tutorials/how_to_contribute.md)为PaddleClas贡献代码，并将PR链接贴在此处。 -->\r\n#### 2.修复建议\r\n<!-- 如果您对修复有任何建议，也请您不吝赐教 -->\r\n",
        "state": "closed",
        "user": "BainOuO",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-09T03:21:16+00:00",
        "updated_at": "2022-08-26T08:59:09+00:00",
        "closed_at": "2022-08-26T08:59:09+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1923,
        "title": "刚刚接触paddleclas,有些疑问,求解答",
        "body": "1.教程为什么都是clone整个仓库,而不是使用pip install paddleclas这种方式呢?\r\n2.使用pip install paddleclas方式安装paddleclas,结果需要安装opencv-python4.4.0,我电脑已经安装有opencv-python4.5.5.64,paddleclas没有适配opencv-python最新版本吗?而且通过pip安装opencv-python4.4.0的whl安装包非常慢,10k/s左右,下载还不到一半就总是报错,我不知道去哪里找opencv-python4.4.0这个库,能给个下载地址吗?\r\n3.如果只是通过pip方式安装paddleclas,没有clone整个仓库,是不是只能用python语言使用paddleclas进行预测?是不是就无法使用C++语言进行预测呢?\r\n4.通过pip install安装某个包,然后通过pip list --outdated,就可以知道哪些包需要更新,通过pip install --upgrade 就可以更新包.如果clone整个仓库,如何知道是否该更新仓库了呢?具体如何更新呢?把paddleclas整个文件夹删了,然后重新clone整个仓库吗?",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-05-14T02:43:36+00:00",
        "updated_at": "2022-08-26T08:59:10+00:00",
        "closed_at": "2022-08-26T08:59:10+00:00",
        "comments_count": [
            "cuicheng01",
            "yuwoyizhan",
            "weisy11"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1981,
        "title": "C++编程相关",
        "body": "pytorch在一年多以前,就非常完善的支持C++编程了,比如图像分类这个任务,可以从头到尾,不使用一行python代码完成数据集下载,加载,训练,预测等步骤.知乎和CSDN也有很多pytorch的C++编程代码,可以让我们学习和参考.目前我都没看到一个项目使用C++完成飞桨任务的,无论是图像分类clas等开发套件,还是飞桨paddlepaddle,我想请问,飞桨是否打算支持C++编程呢?\r\n我不敢说pytorch支持C++20,C++23这些很新的标准,但是用VS2022编写pytorch代码,完全没有问题.对于飞桨框架来说,目前C++似乎只能用于预测,而且一个预测的代码,比如图像分类clas的C++预测代码,超级多代码,无语,能否封装一下,像python一样,实现一行C++代码预测呢?如果目前C++已经能用于飞桨的话,麻烦你们多提供项目案例,让我知道如何写代码,谢谢,比如可以一个开发套件做一个C++案例.\r\n\r\n我还想请问下,我现在使用windows,C++,5600gCPU,飞桨.对于图像分类clas和目标检测dec这两个开发套件来说,预测时使用的是多核心多线程还是单核心单线程CPU?另外,预测是否可以让客户自主选择使用多少个CPU线程?\r\n我有一个预测任务,单开任务的话,我希望,CPU的6核心12线程都可以参与预测.但是如果双开任务,我就希望为每个预测任务分配3核心6线程.\r\n",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-05T00:22:03+00:00",
        "updated_at": "2022-09-20T06:47:47+00:00",
        "closed_at": "2022-09-20T06:47:44+00:00",
        "comments_count": [
            "weisy11",
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1998,
        "title": "Vehicle's type classification (car,bus,truck ...)",
        "body": "Which model is better for vehicle's type classification ? THX",
        "state": "closed",
        "user": "centurions",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-07T20:32:07+00:00",
        "updated_at": "2022-09-20T06:47:49+00:00",
        "closed_at": "2022-09-20T06:47:45+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 1999,
        "title": "缺少模型列表！",
        "body": "hi,\r\n     请问下，7个精选系列模型支持结构快速修改   您指的是哪些？ 有具体的详细列表或者链接吗？多谢\r\nBR",
        "state": "closed",
        "user": "2050airobert",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-08T06:04:55+00:00",
        "updated_at": "2022-09-20T06:47:50+00:00",
        "closed_at": "2022-09-20T06:47:46+00:00",
        "comments_count": [
            "2050airobert",
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2024,
        "title": "c++版本推理开启mkldnn加速报错could not execute a primitive",
        "body": "使用环境：\r\npaddlepaddle 2.3.0\r\npaddleClas 2.4.0\r\n\r\n采用c++版本推理，采用的模型为ResNet50导出的inference model，配置文件inference_cls.yaml中默认enable_mkldnn: True，即默认开启mkldnn加速\r\n单进程依次对一万张图片进行图片分类，每次运行若干张图片后（每次报错时的图片均不相同）均会报错：\r\nterminate called after throwing an instance of 'dnnl::error'\r\n  what():  could not execute a primitive\r\n通过查看源码，认为该报错来源为：https://oneapi-src.github.io/oneDNN/v2/getting_started_cpp.html\r\n\r\n同时查看paddle的issue，有同样的报错：https://github.com/PaddlePaddle/Paddle/issues/34492\r\n\r\n因此尝试设置enable_mkldnn: False，测试发现不再有报错\r\n因此认为该报错是由于mkldnn引起，但无法确定是由于paddleClas的代码导致还是由于paddle代码未修复成功导致，亦或由于paddle的mkldnn加速不支持ResNet50导致\r\n恳请各位大神协助解决",
        "state": "closed",
        "user": "onair1314",
        "closed_by": "onair1314",
        "created_at": "2022-06-11T15:16:27+00:00",
        "updated_at": "2022-07-12T02:24:04+00:00",
        "closed_at": "2022-07-12T02:24:01+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2068,
        "title": "IndexError: list index out of range",
        "body": "[2022/06/15 14:03:52] ppcls INFO: train with paddle 2.3.0 and device Place(gpu:0)\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:44: DeprecationWarning: NEAREST is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.NEAREST or Dither.NONE instead.\r\n  'nearest': Image.NEAREST,\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:45: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  'bilinear': Image.BILINEAR,\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:46: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  'bicubic': Image.BICUBIC,\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:47: DeprecationWarning: BOX is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BOX instead.\r\n  'box': Image.BOX,\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:48: DeprecationWarning: LANCZOS is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.LANCZOS instead.\r\n  'lanczos': Image.LANCZOS,\r\n/home/PaddleClas/ppcls/data/preprocess/ops/operators.py:49: DeprecationWarning: HAMMING is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.HAMMING instead.\r\n  'hamming': Image.HAMMING\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/home/PaddleClas/ppcls/engine/engine.py\", line 133, in __init__\r\n    self.config[\"DataLoader\"], \"Train\", self.device, self.use_dali)\r\n  File \"/home/PaddleClas/ppcls/data/__init__.py\", line 81, in build_dataloader\r\n    dataset = eval(dataset_name)(**config_dataset)\r\n  File \"/home/PaddleClas/ppcls/data/dataloader/imagenet_dataset.py\", line 31, in __init__\r\n    super(ImageNetDataset, self).__init__(image_root, cls_label_path, transform_ops)\r\n  File \"/home/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 59, in __init__\r\n    self._load_anno()\r\n  File \"/home/PaddleClas/ppcls/data/dataloader/imagenet_dataset.py\", line 46, in _load_anno\r\n    self.labels.append(np.int64(l[1]))\r\nIndexError: list index out of range\r\nINFO 2022-06-15 14:03:57,940 launch_utils.py:343] terminate all the procs\r\nINFO 2022-06-15 14:03:57,940 launch_utils.py:343] terminate all the procs\r\nERROR 2022-06-15 14:03:57,941 launch_utils.py:642] ABORT!!! Out of all 4 trainers, the trainer process with rank=[0, 1, 2, 3] was aborted. Please check its log.\r\nERROR 2022-06-15 14:03:57,941 launch_utils.py:642] ABORT!!! Out of all 4 trainers, the trainer process with rank=[0, 1, 2, 3] was aborted. Please check its log.\r\nINFO 2022-06-15 14:04:01,946 launch_utils.py:343] terminate all the procs\r\nINFO 2022-06-15 14:04:01,946 launch_utils.py:343] terminate all the procs\r\nINFO 2022-06-15 14:04:01,947 launch.py:402] Local processes completed.\r\nINFO 2022-06-15 14:04:01,947 launch.py:402] Local processes completed.",
        "state": "closed",
        "user": "alexiycv",
        "closed_by": "alexiycv",
        "created_at": "2022-06-15T14:07:51+00:00",
        "updated_at": "2024-04-01T07:12:11+00:00",
        "closed_at": "2022-06-16T09:14:25+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "andyz168",
            "Chase-Xuu"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2075,
        "title": "lite_shitu在安卓上预测结果都错了。",
        "body": "我是按照这份文档一步一步操作的(https://github.com/PaddlePaddle/PaddleClas/tree/develop/deploy/lite_shitu)， 预测结果都错了，而且官方的readme里的图片和预测结果也不匹配啊\r\n\r\n![image](https://user-images.githubusercontent.com/20619835/174021401-988f7489-5dbd-4f0d-988c-35e7d940a7d3.png)\r\n\r\n![image](https://user-images.githubusercontent.com/20619835/174020728-cea8626a-8dc2-4549-9b86-b2ac65d7c888.png)\r\n\r\n",
        "state": "closed",
        "user": "superdu12138",
        "closed_by": "superdu12138",
        "created_at": "2022-06-16T07:56:52+00:00",
        "updated_at": "2022-07-12T07:27:43+00:00",
        "closed_at": "2022-07-12T07:27:40+00:00",
        "comments_count": [
            "RainFrost1",
            "superdu12138",
            "RainFrost1",
            "superdu12138",
            "RainFrost1",
            "superdu12138",
            "RainFrost1",
            "LMR2018",
            "superdu12138",
            "RainFrost1",
            "superdu12138",
            "RainFrost1",
            "superdu12138",
            "RainFrost1",
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2010,
        "title": "GhostNet分类网络，四类和九类的onnx模型速查差别十倍",
        "body": "你好，非常感谢你们的工作，我有一些疑问如下：\r\n\r\n1.网络：使用paddle clas 的GhostNet网络，一个九类，一个是四类；\r\n2.原生paddle推理，两个速度近似。\r\n3.同样转换为onnx，则九类的耗时是四类的十倍之久。\r\n\r\n我尝试进行onnxsim，但是还是存在差距，不过缩小到两倍，相关文件在该百度云链接\r\n链接：https://pan.baidu.com/s/1178iwPcr0FP1YnplBMGiaQ?pwd=i52t\r\n提取码：i52t\r\n--来自百度网盘超级会员V5的分享",
        "state": "open",
        "user": "Gmgge",
        "closed_by": null,
        "created_at": "2022-06-10T00:51:24+00:00",
        "updated_at": "2024-02-26T04:28:43+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "Gmgge"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2064,
        "title": "关于主体检测，分类数据不在一张图片上",
        "body": "每个分类单独的类别图片数据，我希望能最终使用的时候按照主体，再额外的检测到每一个类别，对于分类数据不在一张图片上的这种情况，我应该做怎样的训练呢？是训练多个分类模型，在使用的时候进行组合预测；还是有什么办法可以把这些不同类别的数据通过一个模型训练得到。",
        "state": "closed",
        "user": "QuStarry",
        "closed_by": "QuStarry",
        "created_at": "2022-06-15T02:33:34+00:00",
        "updated_at": "2022-07-09T07:58:53+00:00",
        "closed_at": "2022-07-09T07:58:50+00:00",
        "comments_count": [
            "weisy11",
            "QuStarry",
            "weisy11",
            "QuStarry"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2076,
        "title": "请问mixformer的预训练权重在哪里下载",
        "body": "如题 ，另外想请您提供一下mixformer的最新代码地址，包括训练代码。\r\n万分感谢！\r\n",
        "state": "closed",
        "user": "Geek-lixiang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-16T08:21:39+00:00",
        "updated_at": "2022-09-20T06:47:52+00:00",
        "closed_at": "2022-09-20T06:47:46+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2077,
        "title": "infer.py与predict_cls.py推理的结果不一致",
        "body": "在Ubuntu18.04/Python3.7/CUDA11.1下，用paddleclas做图像分类测试的时候，tools/infer.py与deploy/python/predict_cls.py推理的结果完全不一致，图像一共分三类(very_good/good/no_good)，infer.py推理的结果是OK的，但predict_cls.py推理的结果偏差很大，是export_model.py在导出inference模型的时候出了问题吗？\r\n执行tools/infer.py：\r\npython3 tools/infer.py -c ppcls/configs/face_state/PPLCNet_x1_0.yaml -o Global.pretrained_model=output/PPLCNet_x1_0/latest -o Infer.infer_imgs=dataset/face_state/train/very_good/003.jpg\r\n预测结果：\r\n[{'class_ids': [0], 'scores': [0.99498], 'file_name': 'dataset/face_state/train/very_good/003.jpg', 'label_names': ['very_good']}]\r\n\r\n再执行tools/export_model.py，生成inference模型：\r\npython3 tools/export_model.py -c ppcls/configs/face_state/PPLCNet_x1_0.yaml -o Global.pretrained_model=output/PPLCNet_x1_0/latest\r\n\r\n执行deploy/python/predict_cls.py：\r\npython3 deploy/python/predict_cls.py -c deploy/configs/face_state/inference.yaml\r\n预测结果：\r\n003.jpg:\tclass id(s): [1, 2], score(s): [0.43, 0.38], label_name(s): ['good', 'no_good']\r\n\r\n两个yaml文件的参数设置是一致的。\r\n\r\n",
        "state": "closed",
        "user": "176050800",
        "closed_by": "176050800",
        "created_at": "2022-06-16T08:42:54+00:00",
        "updated_at": "2022-06-20T09:14:30+00:00",
        "closed_at": "2022-06-20T09:14:30+00:00",
        "comments_count": [
            "cuicheng01",
            "176050800",
            "cuicheng01",
            "176050800"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2079,
        "title": "Error importing paddleclas after install",
        "body": "i got error\r\n\r\n```\r\nlocal variable 'total_width' referenced before assignment\r\n```\r\n\r\nwhen use `import paddleclas` for the first time after installation\r\ni use branch develop and using guide from readme_en.md\r\n\r\nerror gone when i change the total_width to arbitary int number\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/95edc0d6d3f3e1cc299a7f58012177769fc63fb4/paddleclas.py#L352\r\n\r\n\r\nafter i change,,i got another error that say\r\n\r\n```\r\nAssertionError: logger should not be initialized twice or more.\r\n```  \r\n\r\nerror gone when i comment this line https://github.com/PaddlePaddle/PaddleClas/blob/95edc0d6d3f3e1cc299a7f58012177769fc63fb4/ppcls/utils/logger.py#L42\r\n\r\n\r\nand after that, the paddleclas work perfectly\r\n\r\nmaybe you guys can take a look before merging #2036 ",
        "state": "closed",
        "user": "acul3",
        "closed_by": "acul3",
        "created_at": "2022-06-16T18:04:12+00:00",
        "updated_at": "2022-06-20T14:18:03+00:00",
        "closed_at": "2022-06-20T14:18:00+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2089,
        "title": "无法使用gpu运行程序",
        "body": "PaddlePaddle 2.1.3或2.2.2都试过了不行\r\n\r\n  a. 具体操作系统，Linux18.04\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.4.2/cuDNN 8.2.4.15等\r\n\r\n使用CPU正常运行，但使用**GPU**运行deploy中任意的predict_xxx 都会报错：\r\n当运行predict_det时，报错信息 如下，报错位置在117行的self.predictor.run()\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::framework::SignalHandle(char const*, int)\r\n1   paddle::platform::GetCurrentTraceBackString[abi:cxx11]()\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1655792482 (unix time) try \"date -d @1655792482\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 24184 (TID 0x7fd511129740) from PID 0 ***]\r\n\r\nSegmentation fault (core dumped)\r\n\r\n",
        "state": "closed",
        "user": "DrewdropLife",
        "closed_by": "DrewdropLife",
        "created_at": "2022-06-21T06:57:39+00:00",
        "updated_at": "2022-06-21T07:11:28+00:00",
        "closed_at": "2022-06-21T07:09:01+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2083,
        "title": "readme文档的小错误",
        "body": "PULC车辆属性识别模型的convert.py文件测试集写入路径需要改一下，不然测试数据也写在训练集，找不到图片报错",
        "state": "closed",
        "user": "lizhangweia",
        "closed_by": "lizhangweia",
        "created_at": "2022-06-17T13:29:02+00:00",
        "updated_at": "2022-06-24T01:11:54+00:00",
        "closed_at": "2022-06-24T01:11:52+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2094,
        "title": "Link disabled",
        "body": "[build_product.yaml](https://github.com/PaddlePaddle/PaddleClas/blob/develop/deploy/configs/build_product.yaml) \r\n[build_logo.yam]\r\n[build_vehicle.yaml](https://github.com/PaddlePaddle/PaddleClas/blob/develop/deploy/configs/build_vehicle.yaml)\r\n[build_cartoon]\r\nabove all disabled?\r\n",
        "state": "closed",
        "user": "XingYuanWei",
        "closed_by": "XingYuanWei",
        "created_at": "2022-06-22T15:02:12+00:00",
        "updated_at": "2022-06-22T15:02:23+00:00",
        "closed_at": "2022-06-22T15:02:20+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2085,
        "title": "性能评价等的时候怎么输出Recall F1-score？",
        "body": "性能评价是用tool/eval.py吗?要在yaml文件里怎么配置才可以输出Recall F1-score分数",
        "state": "closed",
        "user": "13136983989",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-19T14:34:28+00:00",
        "updated_at": "2022-09-20T06:47:54+00:00",
        "closed_at": "2022-09-20T06:47:47+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2088,
        "title": "ppcls/loss/目录下有无focal loss相关文件，如果没有如何自定义？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "wghxiuyuan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-20T08:08:07+00:00",
        "updated_at": "2022-10-04T06:47:28+00:00",
        "closed_at": "2022-10-04T06:47:24+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2095,
        "title": "link diabled!",
        "body": "such as \"build_product\", \"build_log\", \"build_cartoon\" the file link cannot open! please repair quckly! thks",
        "state": "open",
        "user": "XingYuanWei",
        "closed_by": null,
        "created_at": "2022-06-23T04:26:20+00:00",
        "updated_at": "2024-02-26T04:28:42+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "XingYuanWei",
            "weisy11",
            "XingYuanWei"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2097,
        "title": "回归任务",
        "body": "请问如何修改paddlecls中的配置文件，使其能够完成回归预测任务呢？有没有示例可以参考？",
        "state": "closed",
        "user": "fengyanWang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-23T06:41:29+00:00",
        "updated_at": "2022-10-04T06:47:28+00:00",
        "closed_at": "2022-10-04T06:47:25+00:00",
        "comments_count": [
            "weisy11",
            "fengyanWang",
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2099,
        "title": "MobileVIT",
        "body": "MobileVIT系列的三个模型怎么模型越大效果越差了，是不是写反了。\n![mmexport1656004019391.png](https://user-images.githubusercontent.com/61459740/175355558-51f335d4-e677-4299-b123-397461734830.png)",
        "state": "closed",
        "user": "Sqhttwl",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-23T17:06:28+00:00",
        "updated_at": "2022-10-04T06:47:29+00:00",
        "closed_at": "2022-10-04T06:47:25+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2100,
        "title": "PPClas-paddleServing部署到docker后运行http.py怎么实现像车辆属性，人体属性这类模型修改？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "ASDMartin",
        "closed_by": null,
        "created_at": "2022-06-24T01:23:08+00:00",
        "updated_at": "2024-02-26T04:28:41+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "ASDMartin"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2102,
        "title": "PPLCNet  onnx2ncnn",
        "body": "when i try to convert PPLCNet from onnx to ncnn, ncnn error report \"Shape not support yet! Unknown data type 0\"",
        "state": "closed",
        "user": "czyczyczy",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-24T09:11:22+00:00",
        "updated_at": "2023-02-21T13:59:12+00:00",
        "closed_at": "2022-10-04T06:47:27+00:00",
        "comments_count": [
            "weisy11",
            "xellDart"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2101,
        "title": "faiss的C++库安装",
        "body": "我这边需要使用PP-Shitu的C++部署，但是其中使用到了Faiss库，不过Paddle没有提供Faiss的编译版本。\r\n是否可以提供一下Faiss的Windows和Linux的C++版本，这样部署起来简单很多",
        "state": "closed",
        "user": "TimZhang001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-24T02:50:43+00:00",
        "updated_at": "2022-10-04T06:47:29+00:00",
        "closed_at": "2022-10-04T06:47:26+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2109,
        "title": "使用PaddleClas中的TripletLossV2报错",
        "body": "1.PaddleClas版本: PaddleClas v2.3.1\r\n2.涉及的其他产品使用的版本号：无\r\n3.训练环境信息: BML Codelab\r\n  a: 具体操作系统 Linux version 4.15.0-140-generic (buildd@lgw01-amd64-054) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04))\r\n  b. Python版本号: Python 3.7.4\r\n  c. CUDA/cuDNN版本，Cuda compilation tools, release 10.1, V10.1.243\r\n4.完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n使用TripletLossV2报错，报错信息如下：\r\n![image](https://user-images.githubusercontent.com/11953013/176076898-4f294ed5-95be-4cae-bbf7-c3245e353e10.png)\r\nTripletLossV2相关代码：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/f677f61ea3b34281968d1059f4f8f13c1d787e67/ppcls/loss/triplet.py#L59-L68\r\nyaml配置文件中Loss相关配置如下：\r\n![image](https://user-images.githubusercontent.com/11953013/176077857-b17a68d0-637c-45ba-b88d-bd5283ca1cbb.png)\r\n将代码中用paddle.masked_select函数的处理方式改成使用paddle.where处理之后报错消失，运行良好。\r\n请问这样改可以吗？是否是我对TripletLossV2的使用方式不对？",
        "state": "closed",
        "user": "lezhu1234",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-28T02:24:15+00:00",
        "updated_at": "2022-11-15T06:49:27+00:00",
        "closed_at": "2022-11-15T06:49:24+00:00",
        "comments_count": [
            "weisy11",
            "lezhu1234",
            "alexHxun"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2111,
        "title": "quick_start_classification_new_user.md 模型预测报错 'Topk' object has no attribute 'delimiter'",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本： paddleclas 2.4.0、paddlepaddle  2.3.0\r\n 2. 涉及的其他产品使用的版本号：\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows 10 IoT 企业版 LTSC  x64，版本号 21H2，操作系统内部版本号 19044.1766\r\n  b. Python版本号，Python 3.9.10、pip 22.0.3\r\n  c. CUDA/cuDNN版本， 无，使用CPU训练，\r\n\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n按照 https://gitee.com/paddlepaddle/PaddleClas/blob/release/2.4/docs/zh_CN/quick_start/quick_start_classification_new_user.md\r\n进行训练、没有报错、也生成了 best_model\r\n但是 进行 模型预测 时，却显示\r\n[2022/06/27 21:42:08] ppcls INFO: train with paddle 2.3.0 and device Place(cpu)\r\n'Topk' object has no attribute 'delimiter'\r\n[{'class_ids': [70, 20, 34, 9, 29], 'scores': [0.08034, 0.03363, 0.0325, 0.02877, 0.02854], 'file_name': 'deploy/dataset/flowers102/jpg/image_00001.jpg', 'label_names': []}]",
        "state": "closed",
        "user": "bk1ing",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-28T10:21:55+00:00",
        "updated_at": "2023-10-23T10:23:07+00:00",
        "closed_at": "2022-10-04T06:47:28+00:00",
        "comments_count": [
            "weisy11",
            "jkluo",
            "TingquanGao",
            "qlons",
            "Zing-desire"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2113,
        "title": "多标签预测scores为什么大于1？",
        "body": "多标签infer结果，scores有些值怎么大于1了，求大神指教\r\n![image](https://user-images.githubusercontent.com/52941676/176338244-b35e5ac1-8a83-40ec-9012-9e2d087d20b9.png)\r\n",
        "state": "closed",
        "user": "suhangbo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-29T02:29:30+00:00",
        "updated_at": "2022-10-04T06:47:31+00:00",
        "closed_at": "2022-10-04T06:47:29+00:00",
        "comments_count": [
            "cuicheng01",
            "suhangbo",
            "cuicheng01",
            "suhangbo",
            "suhangbo",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2116,
        "title": "预测结果集不准确",
        "body": "问题描述\r\n 1. PaddleClas 使用的是 develop 分支。 paddle 版本 PaddlePaddle 2.3.0, compiled with\r\n    with_avx: ON\r\n    with_gpu: OFF\r\n    with_mkl: OFF\r\n    with_mkldnn: OFF\r\n    with_python: ON\r\n\r\n 2. 无\r\n 3. 训练环境信息：本地\r\n  a. 具体操作系统，MacOS\r\n  b. Python版本号，如Python3.9.10\r\n  \r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n    我根据quickstart自己进行了训练，共三个label，也有使用到预训练模型 ResNet50_vd_ssld_pretrained。 \r\n训练完预测的时候，能识别出一部分数据，但为什么不管给的是什么图片，topk 都会给一个高百分比对应的结果呢？\r\n比如下面这个结果集返回，应该是不符合的才对。却命中 ID：1 \r\n[{'class_ids': [1, 2, 3], 'scores': [0.99649, 0.00329, 0.00022]}]\r\n\r\n输入的日志：\r\n➜  PaddleClas git:(develop) ✗ python3 tools/infer.py -c ./ppcls/configs/quick_start/ResNet50_ok.yaml -o Infer.infer_imgs=/Users/luolongming/Downloads/rose3.jpeg -o Global.pretrained_model=output/gesture/ResNet50_vd/best_model\r\n\r\n[2022/06/29 15:47:25] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2022/06/29 15:47:25] ppcls INFO: Arch : \r\n[2022/06/29 15:47:25] ppcls INFO:     class_num : 4\r\n[2022/06/29 15:47:25] ppcls INFO:     name : ResNet50_vd\r\n[2022/06/29 15:47:25] ppcls INFO:     params : \r\n[2022/06/29 15:47:25] ppcls INFO:         lr_mult_list : [0.5, 0.5, 0.6, 0.6, 0.8]\r\n[2022/06/29 15:47:25] ppcls INFO:     pretrained_model : ./pretrained/ResNet50_vd_ssld_pretrained\r\n[2022/06/29 15:47:25] ppcls INFO: DataLoader : \r\n[2022/06/29 15:47:25] ppcls INFO:     Eval : \r\n[2022/06/29 15:47:25] ppcls INFO:         dataset : \r\n[2022/06/29 15:47:25] ppcls INFO:             cls_label_path : ./dataset/gesture/val_list.txt\r\n[2022/06/29 15:47:25] ppcls INFO:             image_root : ./dataset/gesture/\r\n[2022/06/29 15:47:25] ppcls INFO:             name : ImageNetDataset\r\n[2022/06/29 15:47:25] ppcls INFO:             transform_ops : \r\n[2022/06/29 15:47:25] ppcls INFO:                 DecodeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     channel_first : False\r\n[2022/06/29 15:47:25] ppcls INFO:                     to_rgb : True\r\n[2022/06/29 15:47:25] ppcls INFO:                 ResizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     resize_short : 256\r\n[2022/06/29 15:47:25] ppcls INFO:                 CropImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     size : 256\r\n[2022/06/29 15:47:25] ppcls INFO:                 NormalizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/06/29 15:47:25] ppcls INFO:                     order : \r\n[2022/06/29 15:47:25] ppcls INFO:                     scale : 1.0/255.0\r\n[2022/06/29 15:47:25] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/06/29 15:47:25] ppcls INFO:         loader : \r\n[2022/06/29 15:47:25] ppcls INFO:             num_workers : 4\r\n[2022/06/29 15:47:25] ppcls INFO:             use_shared_memory : True\r\n[2022/06/29 15:47:25] ppcls INFO:         sampler : \r\n[2022/06/29 15:47:25] ppcls INFO:             batch_size : 64\r\n[2022/06/29 15:47:25] ppcls INFO:             drop_last : False\r\n[2022/06/29 15:47:25] ppcls INFO:             name : DistributedBatchSampler\r\n[2022/06/29 15:47:25] ppcls INFO:             shuffle : False\r\n[2022/06/29 15:47:25] ppcls INFO:     Train : \r\n[2022/06/29 15:47:25] ppcls INFO:         dataset : \r\n[2022/06/29 15:47:25] ppcls INFO:             cls_label_path : ./dataset/gesture/train_list.txt\r\n[2022/06/29 15:47:25] ppcls INFO:             image_root : ./dataset/gesture/\r\n[2022/06/29 15:47:25] ppcls INFO:             name : ImageNetDataset\r\n[2022/06/29 15:47:25] ppcls INFO:             transform_ops : \r\n[2022/06/29 15:47:25] ppcls INFO:                 DecodeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     channel_first : False\r\n[2022/06/29 15:47:25] ppcls INFO:                     to_rgb : True\r\n[2022/06/29 15:47:25] ppcls INFO:                 RandCropImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     size : 256\r\n[2022/06/29 15:47:25] ppcls INFO:                 ResizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     resize_short : 256\r\n[2022/06/29 15:47:25] ppcls INFO:                 RandFlipImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     flip_code : 1\r\n[2022/06/29 15:47:25] ppcls INFO:                 NormalizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/06/29 15:47:25] ppcls INFO:                     order : \r\n[2022/06/29 15:47:25] ppcls INFO:                     scale : 1.0/255.0\r\n[2022/06/29 15:47:25] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/06/29 15:47:25] ppcls INFO:                 RandomErasing : \r\n[2022/06/29 15:47:25] ppcls INFO:                     EPSILON : 0.0\r\n[2022/06/29 15:47:25] ppcls INFO: ------------------------------------------------------------\r\n[2022/06/29 15:47:25] ppcls INFO:                     attempt : 10\r\n[2022/06/29 15:47:25] ppcls INFO:                     mode : pixel\r\n[2022/06/29 15:47:25] ppcls INFO:                     r1 : 0.3\r\n[2022/06/29 15:47:25] ppcls INFO:                     sh : 1.0/3.0\r\n[2022/06/29 15:47:25] ppcls INFO:                     sl : 0.02\r\n[2022/06/29 15:47:25] ppcls INFO:                     use_log_aspect : True\r\n[2022/06/29 15:47:25] ppcls INFO:         loader : \r\n[2022/06/29 15:47:25] ppcls INFO:             num_workers : 4\r\n[2022/06/29 15:47:25] ppcls INFO:             use_shared_memory : True\r\n[2022/06/29 15:47:25] ppcls INFO:         sampler : \r\n[2022/06/29 15:47:25] ppcls INFO:             batch_size : 32\r\n[2022/06/29 15:47:25] ppcls INFO:             drop_last : False\r\n[2022/06/29 15:47:25] ppcls INFO:             name : DistributedBatchSampler\r\n[2022/06/29 15:47:25] ppcls INFO:             shuffle : True\r\n[2022/06/29 15:47:25] ppcls INFO: Global : \r\n[2022/06/29 15:47:25] ppcls INFO:     checkpoints : None\r\n[2022/06/29 15:47:25] ppcls INFO:     device : cpu\r\n[2022/06/29 15:47:25] ppcls INFO:     epochs : 20\r\n[2022/06/29 15:47:25] ppcls INFO:     eval_during_train : True\r\n[2022/06/29 15:47:25] ppcls INFO:     eval_interval : 1\r\n[2022/06/29 15:47:25] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2022/06/29 15:47:25] ppcls INFO:     output_dir : ./output/gesture/\r\n[2022/06/29 15:47:25] ppcls INFO:     pretrained_model : output/gesture/ResNet50_vd/best_model\r\n[2022/06/29 15:47:25] ppcls INFO:     print_batch_step : 10\r\n[2022/06/29 15:47:25] ppcls INFO:     save_inference_dir : ./inference\r\n[2022/06/29 15:47:25] ppcls INFO:     save_interval : 1\r\n[2022/06/29 15:47:25] ppcls INFO:     use_visualdl : False\r\n[2022/06/29 15:47:25] ppcls INFO: Infer : \r\n[2022/06/29 15:47:25] ppcls INFO:     PostProcess : \r\n[2022/06/29 15:47:25] ppcls INFO:         class_id_map_file : ./dataset/gesture/gesture_label_list.txt\r\n[2022/06/29 15:47:25] ppcls INFO:         name : Topk\r\n[2022/06/29 15:47:25] ppcls INFO:         topk : 3\r\n[2022/06/29 15:47:25] ppcls INFO:     batch_size : 10\r\n[2022/06/29 15:47:25] ppcls INFO:     infer_imgs : /Users/luolongming/Downloads/rose3.jpeg\r\n[2022/06/29 15:47:25] ppcls INFO:     transforms : \r\n[2022/06/29 15:47:25] ppcls INFO:         DecodeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:             channel_first : False\r\n[2022/06/29 15:47:25] ppcls INFO:             to_rgb : True\r\n[2022/06/29 15:47:25] ppcls INFO:         ResizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:             resize_short : 256\r\n[2022/06/29 15:47:25] ppcls INFO:         CropImage : \r\n[2022/06/29 15:47:25] ppcls INFO:             size : 256\r\n[2022/06/29 15:47:25] ppcls INFO:         NormalizeImage : \r\n[2022/06/29 15:47:25] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2022/06/29 15:47:25] ppcls INFO:             order : \r\n[2022/06/29 15:47:25] ppcls INFO:             scale : 1.0/255.0\r\n[2022/06/29 15:47:25] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2022/06/29 15:47:25] ppcls INFO:         ToCHWImage : None\r\n[2022/06/29 15:47:25] ppcls INFO: Loss : \r\n[2022/06/29 15:47:25] ppcls INFO:     Eval : \r\n[2022/06/29 15:47:25] ppcls INFO:         CELoss : \r\n[2022/06/29 15:47:25] ppcls INFO:             weight : 1.0\r\n[2022/06/29 15:47:25] ppcls INFO:     Train : \r\n[2022/06/29 15:47:25] ppcls INFO:         CELoss : \r\n[2022/06/29 15:47:25] ppcls INFO:             weight : 1.0\r\n[2022/06/29 15:47:25] ppcls INFO: Metric : \r\n[2022/06/29 15:47:25] ppcls INFO:     Eval : \r\n[2022/06/29 15:47:25] ppcls INFO:         TopkAcc : \r\n[2022/06/29 15:47:25] ppcls INFO:             topk : [1, 2, 3]\r\n[2022/06/29 15:47:25] ppcls INFO:     Train : \r\n[2022/06/29 15:47:25] ppcls INFO:         TopkAcc : \r\n[2022/06/29 15:47:25] ppcls INFO:             topk : [1, 2, 3]\r\n[2022/06/29 15:47:25] ppcls INFO: Optimizer : \r\n[2022/06/29 15:47:25] ppcls INFO:     lr : \r\n[2022/06/29 15:47:25] ppcls INFO:         learning_rate : 0.0125\r\n[2022/06/29 15:47:25] ppcls INFO:         name : Cosine\r\n[2022/06/29 15:47:25] ppcls INFO:         warmup_epoch : 5\r\n[2022/06/29 15:47:25] ppcls INFO:     momentum : 0.9\r\n[2022/06/29 15:47:25] ppcls INFO:     name : Momentum\r\n[2022/06/29 15:47:25] ppcls INFO:     regularizer : \r\n[2022/06/29 15:47:25] ppcls INFO:         coeff : 1e-05\r\n[2022/06/29 15:47:25] ppcls INFO:         name : L2\r\n[2022/06/29 15:47:25] ppcls INFO: train with paddle 2.3.0 and device Place(cpu)\r\n[{'class_ids': [2, 1, 3], 'scores': [0.79, 0.18891, 0.02109], 'file_name': '/Users/luolongming/Downloads/rose3.jpeg', 'label_names': ['ok', 'yes', 'good']}]\r\n\r\n\r\n",
        "state": "open",
        "user": "jkluo",
        "closed_by": null,
        "created_at": "2022-06-29T08:06:05+00:00",
        "updated_at": "2024-02-26T04:28:39+00:00",
        "closed_at": null,
        "comments_count": [
            "jkluo",
            "cuicheng01",
            "jkluo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2117,
        "title": "NameError: name 'total_width' is not defined",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.9\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n全新系统，全新anaconda pycharm 虚拟环境 一且安装顺利\r\n但是执行检测时提示错误，无从下手了\r\n\r\nE:\\Anaconda3\\envs\\paddle_venv\\python.exe E:/ai/test/paddletest/main.py\r\nE:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\nE:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\nTraceback (most recent call last):\r\n  File \"E:\\ai\\test\\paddletest\\main.py\", line 5, in <module>\r\n    import paddleclas\r\n  File \"E:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\__init__.py\", line 16, in <module>\r\n    from .paddleclas import PaddleClas\r\n  File \"E:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 456, in <module>\r\n    class PaddleClas(object):\r\n  File \"E:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 460, in PaddleClas\r\n    print_info()\r\n  File \"E:\\Anaconda3\\envs\\paddle_venv\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 357, in print_info\r\n    \"  \".join(PULC_MODELS), width = total_width).center(table_width - 4)\r\nNameError: name 'total_width' is not defined\r\n\r\n进程已结束,退出代码1\r\n\r\n\r\n求解原因呢\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "ishangxue",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-06-29T10:38:13+00:00",
        "updated_at": "2022-10-11T06:50:54+00:00",
        "closed_at": "2022-10-11T06:50:52+00:00",
        "comments_count": [
            "ishangxue",
            "tkzt",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2120,
        "title": "Resnet网络的实现和预训练模型哪里下载",
        "body": "我想使用Resnet的模型做实验，但是我看到Passleseg提供的是resnet-vc版本，我只想用最原始的实现和模型，就和pytorch库timm一样的，不需要变体，因为我其他模型也没有使用变体。请问哪里可以下载paddlse代码的实现resnet和相应的预训练模型.pdparams呢？因为不一致的话加载模型会出错。\r\n\r\n感谢！！！",
        "state": "closed",
        "user": "peach-xiao",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-01T03:44:00+00:00",
        "updated_at": "2022-12-13T06:47:05+00:00",
        "closed_at": "2022-12-13T06:47:02+00:00",
        "comments_count": [
            "cuicheng01",
            "fhong-jpg"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2122,
        "title": "PULC ARM端推理耗时与官方给出耗时相差较大",
        "body": "环境信息：paddlepaddle-gpu   2.2.0.post101   paddlelite         2.11\r\n\r\n问题描述：使用高通730g，基于paddle lite推理pulc分类模型（输入为68*68），单个大核耗时11毫秒多，和官方的CPU端3毫秒（输入为224*224）相差较大，请问是什么原因导致的？（ps:通过对导出的nb模型可视化，发现其包含一个FC层，不知道是不是这个原因，如果是的话，如何替换掉？）\r\n\r\n",
        "state": "closed",
        "user": "fengyanWang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-01T08:33:03+00:00",
        "updated_at": "2022-10-04T06:47:32+00:00",
        "closed_at": "2022-10-04T06:47:29+00:00",
        "comments_count": [
            "cuicheng01",
            "fengyanWang",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2134,
        "title": "快速开始如何启动？",
        "body": "所有配置均按readme配置完成，但是在快速开始的readme中\r\npython3.7 python/predict_system.py -c configs/inference_general.yaml -o Global.use_gpu=False\r\n这段用于开始测试的代码应该在哪里输入？我在vscode的终端输入识别不到python3.7",
        "state": "closed",
        "user": "LiuYuKate",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-06T07:44:53+00:00",
        "updated_at": "2022-10-11T06:50:55+00:00",
        "closed_at": "2022-10-11T06:50:53+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "LiuYuKate",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2136,
        "title": "多标签分类有一个BUG望修改",
        "body": "出错的分支：\r\n我下载的分支是release/2.4\r\n出错的文件：\r\nvim ppcls/data/dataloader/multilabel_dataset.py\r\n此文件中函数def __getitem__(self, idx)里面，`if self.label_ratio is not None` 这句判断是不是存在语法错误，self中不存在label_ratio 这个属性定义。\r\n\r\n我临时改成这样在跑：\r\n![](https://raw.githubusercontent.com/xddun/picgo_picture/main/20220706192452.png)",
        "state": "closed",
        "user": "xxddccaa",
        "closed_by": "xxddccaa",
        "created_at": "2022-07-06T11:27:31+00:00",
        "updated_at": "2022-07-07T12:20:51+00:00",
        "closed_at": "2022-07-07T12:20:49+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01",
            "xxddccaa"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2137,
        "title": "文档方向分类程序运行错误",
        "body": "提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\n 2. 地址链接：https://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/zh_CN/PULC/PULC_text_image_orientation.md\r\n 3. 环境：AIstudio V100 32G\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n ：2.3 预测部分->在 Python 代码中预测\r\n代码报错：UnboundLocalError: local variable 'total_width' referenced before assignment\r\n",
        "state": "closed",
        "user": "xu-peng-7",
        "closed_by": "xu-peng-7",
        "created_at": "2022-07-07T01:53:54+00:00",
        "updated_at": "2022-07-08T05:59:02+00:00",
        "closed_at": "2022-07-08T05:59:02+00:00",
        "comments_count": [
            "weisy11",
            "xu-peng-7",
            "cuicheng01",
            "xu-peng-7",
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2139,
        "title": "Code unavalable for CVPR22 paper ISE",
        "body": "Could you provide detailed information for the available code for the paper \"Implicit Sample Extension for Unsupervised Person Re-Identification\"? I didn't find any information about that.",
        "state": "closed",
        "user": "caoge5844",
        "closed_by": "caoge5844",
        "created_at": "2022-07-08T04:45:28+00:00",
        "updated_at": "2022-07-12T08:28:29+00:00",
        "closed_at": "2022-07-08T05:06:58+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2143,
        "title": "ColorJitter可以直接配置使用吗",
        "body": "对图像数据进行随机调整图像的亮度、对比度、饱和度和色调配置如下：\r\ntransform_ops：\r\n      - ColorJitter:\r\n            brightness: 0.4\r\n            contrast: 0.4\r\n            saturation: 0.4\r\n            hue: 0.4\r\npaddle版本：release/2.3\r\n以上配置可直接使用吗",
        "state": "closed",
        "user": "suhangbo",
        "closed_by": "HydrogenSulfate",
        "created_at": "2022-07-11T08:35:36+00:00",
        "updated_at": "2023-02-27T03:30:45+00:00",
        "closed_at": "2022-08-23T05:55:07+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "HydrogenSulfate",
            "PaulX1029"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2145,
        "title": "paddleservering部署自训练模型失败，如何修改",
        "body": "1. PaddleClas release/2.3和PaddleClas release/2.4都试过。PaddlePaddle 2.2.0和PaddlePaddle 2.2.2和PaddlePaddle 2.3.1都试过\r\n 2. PaddleServing==0.7.0和0.9.0都试过\r\n 3. 训练环境信息：\r\n  a. ubuntu18 paddle推荐docker\r\n  b. Python3.6\r\n  c. CUDA11.2/cuDNN 8.0.0等\r\n 4. 使用百度提供ResNet50_vd预训练模型训练自定义数据集模型，在使用paddle_serving_client.convert转换模型后，按照https://github.com/PaddlePaddle/PaddleClas/tree/release/2.4/deploy/paddleserving文档部署后一直报错。\r\n 5. 报错日志：\r\n ERROR 2022-07-11 22:18:18,717 [operator.py:979] (data_id=0 log_id=0) [imagenet|0] Failed to process(batch: [0]): 'x'\r\nTraceback (most recent call last):\r\n  File \"/home/miniconda3/envs/clas/lib/python3.6/site-packages/paddle_serving_server/pipeline/operator.py\", line 966, in _run_process\r\n    feed_batch, typical_logid)\r\n  File \"/home/miniconda3/envs/clas/lib/python3.6/site-packages/paddle_serving_server/pipeline/operator.py\", line 577, in process\r\n    log_id=typical_logid)\r\n  File \"/home/miniconda3/envs/clas/lib/python3.6/site-packages/paddle_serving_app/local_predict.py\", line 281, in predict\r\n    if isinstance(feed[name], list):\r\nKeyError: 'x'\r\nERROR 2022-07-11 22:18:18,718 [operator.py:1024] (log_id=0) imagenet failed to predict.\r\nERROR 2022-07-11 22:18:18,720 [dag.py:410] (data_id=0 log_id=0) Failed to predict: (log_id=0) imagenet failed to predict.\r\n6. 打印feed为inputs，但是模型输入为'x'，即使改了serving_server_conf.prototxt的name也无用\r\n",
        "state": "closed",
        "user": "charm8686",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-11T23:50:24+00:00",
        "updated_at": "2022-10-11T06:50:56+00:00",
        "closed_at": "2022-10-11T06:50:54+00:00",
        "comments_count": [
            "RainFrost1",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2147,
        "title": "怎么评估某个属性? how to eval a single attribute?",
        "body": "你好。\r\n怎么评估单个属性的 正确性？  当前情况是：  运行 tool/eval.py 时， 时对整个属性列表 进行评估。\r\n\r\nHi.\r\nHow to evaluate  a single attribute? The current situation is: when tool/eval.py is run, the entire property list is evaluated.",
        "state": "closed",
        "user": "tranngocphuong89",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-12T08:12:14+00:00",
        "updated_at": "2022-10-18T06:49:02+00:00",
        "closed_at": "2022-10-18T06:48:59+00:00",
        "comments_count": [
            "RainFrost1",
            "tranngocphuong89",
            "RainFrost1",
            "cuicheng01",
            "tranngocphuong89",
            "tranngocphuong89",
            "cuicheng01",
            "tranngocphuong89",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2148,
        "title": "转x86 paddlelite 模型 MatMulV2不支持",
        "body": "在paddleclas训练的模型需要转到x86 paddlelite模型，请问有没有支持的模型，或者是如果替换MatMulv2算子应该怎么操作，求大佬帮助",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2022-07-13T08:49:18+00:00",
        "updated_at": "2022-07-14T01:00:15+00:00",
        "closed_at": "2022-07-14T01:00:12+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2150,
        "title": "PULC 模型配置在哪里下载？",
        "body": "PULC 人体属性识别模型 这个文档很多都是找不到的\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/zh_CN/PULC/PULC_person_attribute.md\r\n\r\n\r\nexport CUDA_VISIBLE_DEVICES=0,1,2,3\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0,1,2,3\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0.yaml\r\n\r\n根本没就没： /ppcls/configs/PULC/  这个目录，也没说PULC去哪里下载？",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-07-14T02:00:02+00:00",
        "updated_at": "2022-07-14T03:18:04+00:00",
        "closed_at": "2022-07-14T03:18:01+00:00",
        "comments_count": [
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2152,
        "title": "疑问 - 能仿人体属性识别模型PPLCNet_x1_0.yaml写一个 能实现多分类多标签新模型吗？ ",
        "body": "疑问如下：\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/zh_CN/PULC/PULC_person_attribute.md\r\n\r\nPULC 人体属性识别模型识别后：\r\n\r\n[{'attributes': ['Male', 'Age18-60', 'Back', 'Glasses: False', 'Hat: False', 'HoldObjectsInFront: False', 'Backpack', 'Upper: LongSleeve UpperPlaid', 'Lower:  Trousers', 'No boots'], 'output': [0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1]}]\r\n\r\n其中： [0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1]  各代表的是什么，跟前面的文字也对不上。\r\n\r\n 如果想训练自己的多分类多标签能用吗？我自己能不能仿人体属性识别模型PPLCNet_x1_0.yaml写一个就能实现得到？  PaddleClas  的文档的二次开发新模型 能不能来个文档呢？\r\n",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-07-14T06:22:39+00:00",
        "updated_at": "2022-08-08T09:57:36+00:00",
        "closed_at": "2022-08-08T09:57:34+00:00",
        "comments_count": [
            "tranngocphuong89",
            "gg22mm",
            "gg22mm",
            "tranngocphuong89"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2155,
        "title": "ImportError: DLL load failed while importing core_avx: 找不到指定的模块。",
        "body": "(paddle) D:\\a\\PaddleClas\\deploy>python\\predict_system.py -c configs\\inference_product.yaml\r\nError: Can not import avx core while this file exists: C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\fluid\\core_avx.pyd\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\PaddleClas\\deploy\\python\\predict_system.py\", line 26, in <module>\r\n    from python.predict_rec import RecPredictor\r\n  File \"D:\\a\\PaddleClas\\deploy\\python\\predict_rec.py\", line 23, in <module>\r\n    from utils import logger\r\n  File \"D:\\a\\PaddleClas\\deploy\\utils\\__init__.py\", line 4, in <module>\r\n    from . import predictor\r\n  File \"D:\\a\\PaddleClas\\deploy\\utils\\predictor.py\", line 22, in <module>\r\n    from paddle.inference import Config\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\__init__.py\", line 25, in <module>\r\n    from .framework import monkey_patch_variable\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\framework\\__init__.py\", line 17, in <module>\r\n    from . import random  # noqa: F401\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\framework\\random.py\", line 16, in <module>\r\n    import paddle.fluid as fluid\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\fluid\\__init__.py\", line 36, in <module>\r\n    from . import framework\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\fluid\\framework.py\", line 37, in <module>\r\n    from . import core\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\fluid\\core.py\", line 298, in <module>\r\n    raise e\r\n  File \"C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\paddle\\fluid\\core.py\", line 256, in <module>\r\n    from . import core_avx\r\nImportError: DLL load failed while importing core_avx: 找不到指定的模块。\r\n用了很多办法都不行，重装paddle也不行。\r\n",
        "state": "closed",
        "user": "asjh123",
        "closed_by": "asjh123",
        "created_at": "2022-07-15T10:03:13+00:00",
        "updated_at": "2022-08-01T09:57:08+00:00",
        "closed_at": "2022-07-15T11:36:06+00:00",
        "comments_count": [
            "asjh123",
            "asjh123",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2153,
        "title": "推演时报错FatalError: `Segmentation fault` is detected by the operating system.",
        "body": "PaddleClas 及PaddlePaddle版本为当前文档提供的命令安装版本：\r\n  a. 具体操作系统，Linux/\r\n  b. Python版本号，Python3.6\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n \r\n用自己的数据推演测试车辆属性效果，颜色未报错，测试车辆类型bus,mpy及suv时，推演一些图片后报一下错误（每个类别2000张），未进行训练，使用文档中提供的代码进行推演。\r\n\r\n![image](https://user-images.githubusercontent.com/41569547/178916384-30acc959-9082-42ae-8a9e-0dbdb72e218c.png)\r\n\r\n推演代码如下：\r\n![image](https://user-images.githubusercontent.com/41569547/178917007-5369a993-6df6-4f3f-8e53-adbf8af7142c.png)\r\n\r\n",
        "state": "closed",
        "user": "frandoLin",
        "closed_by": "frandoLin",
        "created_at": "2022-07-14T06:37:31+00:00",
        "updated_at": "2022-07-15T01:20:33+00:00",
        "closed_at": "2022-07-15T01:20:19+00:00",
        "comments_count": [
            "frandoLin"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2157,
        "title": "可复现性",
        "body": "你好，我想重新finetune pp-shitu 的general_PPLCNet_x2_5_lite_v1.0_infer，但是发现，使用相同的图像时，用deploy/build_gallery.py 里面用推理模型生成的feature 与 用tool/eval.py 用Model 前向生成的feature是不一样的。\r\n\r\n请问是哪里出现问题了吗？\r\n",
        "state": "closed",
        "user": "sandy-ssdut",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-16T12:15:34+00:00",
        "updated_at": "2022-10-18T06:49:02+00:00",
        "closed_at": "2022-10-18T06:49:00+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2156,
        "title": "关于ISE论文中和mixup方法的比较",
        "body": "请问在论文“Our ISE vs. Mixup”部分中，在market-1501上实现mixup时是fully unsupervised吗？是对所有的正负样本都进行随机mixup吗？是在哪一层进行mixup的呢？",
        "state": "closed",
        "user": "gybwyy-art",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-16T08:48:06+00:00",
        "updated_at": "2022-10-25T06:47:34+00:00",
        "closed_at": "2022-10-25T06:47:31+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "zhangxinyu-xyz",
            "gybwyy-art",
            "zhangxinyu-xyz"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2158,
        "title": "问题一 - Classification metrics can‘t handle a mix of multiclass-multioutput and binary targets报错",
        "body": "`\r\n自己定义的数据集与分类数有问题\r\n\r\n<p><img src=\"http://ztg.diyyq.com/123/1.jpg\" /><br />\r\n    <img src=\"http://ztg.diyyq.com/123/2.png\" /><br />\r\n    <br />\r\n    <img src=\"http://ztg.diyyq.com/123/3.png\" /><br />\r\n  <br />\r\n  <img src=\"http://ztg.diyyq.com/123/4.png\" /><br />\r\n  <br />\r\n  到底是怎么回事报：<br />\r\n  <img src=\"http://ztg.diyyq.com/123/5.png\" /></p>\r\n`",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-07-18T02:51:49+00:00",
        "updated_at": "2022-07-20T06:29:37+00:00",
        "closed_at": "2022-07-20T06:29:35+00:00",
        "comments_count": [
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "tranngocphuong89",
            "gg22mm",
            "gg22mm",
            "cuicheng01",
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2159,
        "title": "问题二 - 同一个代码 (用AI Studio训练MultiLabelLoss是好的，我本地训练是有问题的) ",
        "body": "同一个代码 (用AI Studio训练MultiLabelLoss是好的，我本地训练是有问题的)：\r\n\r\n例子： https://aistudio.baidu.com/aistudio/projectdetail/4247343\r\n\r\n训练的log截取如：\r\n\r\n `\t\r\n\t\t\r\n\r\n用AI Studio 训练MultiLabelLoss是好的如：\r\n\r\n\t\t\t===========================================================\r\n\t\t\t==        PaddleClas is powered by PaddlePaddle !        ==\r\n\t\t\t===========================================================\r\n\t\t\t==                                                       ==\r\n\t\t\t==   For more info please go to the following website.   ==\r\n\t\t\t==                                                       ==\r\n\t\t\t==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n\t\t\t===========================================================\r\n\t\t\t\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Arch : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     class_num : 33\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     name : MobileNetV1\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     pretrained : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: DataLoader : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         dataset : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             cls_label_path : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/multilabel_test_list.txt\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             image_root : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/images/\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             name : MultiLabelDataset\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             transform_ops : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 DecodeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     channel_first : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     to_rgb : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 ResizeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     resize_short : 256\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 CropImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     size : 224\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 NormalizeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     order : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     scale : 1.0/255.0\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         loader : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             num_workers : 4\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             use_shared_memory : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         sampler : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             batch_size : 256\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             drop_last : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             name : DistributedBatchSampler\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             shuffle : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Train : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         dataset : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             cls_label_path : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/multilabel_train_list.txt\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             image_root : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/images/\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             name : MultiLabelDataset\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             transform_ops : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 DecodeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     channel_first : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     to_rgb : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 RandCropImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     size : 224\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 RandFlipImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     flip_code : 1\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                 NormalizeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     order : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     scale : 1.0/255.0\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         loader : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             num_workers : 4\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             use_shared_memory : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         sampler : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             batch_size : 64\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             drop_last : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             name : DistributedBatchSampler\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             shuffle : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Global : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     checkpoints : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     device : gpu\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     epochs : 10\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     eval_during_train : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     eval_interval : 1\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     image_shape : [3, 224, 224]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     output_dir : ./output/\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     pretrained_model : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     print_batch_step : 10\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     save_inference_dir : ./inference\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     save_interval : 1\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     use_multilabel : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     use_visualdl : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Infer : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     PostProcess : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         class_id_map_file : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         name : MultiLabelTopk\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         topk : 5\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     batch_size : 10\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     infer_imgs : ./deploy/images/0517_2715693311.jpg\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     transforms : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         DecodeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             channel_first : False\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             to_rgb : True\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         ResizeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             resize_short : 256\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         CropImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             size : 224\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         NormalizeImage : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             order : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             scale : 1.0/255.0\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         ToCHWImage : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Loss : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         MultiLabelLoss : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             weight : 1.0\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Train : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         MultiLabelLoss : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:             weight : 1.0\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Metric : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         HammingDistance : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         AccuracyScore : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     Train : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         HammingDistance : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         AccuracyScore : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: Optimizer : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     lr : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         learning_rate : 0.1\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         name : Cosine\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     momentum : 0.9\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     name : Momentum\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:     regularizer : \r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         coeff : 4e-05\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO:         name : L2\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: profiler_options : None\r\n\t\t\t[2022/07/16 17:07:52] ppcls INFO: train with paddle 2.3.0 and device Place(gpu:0)\r\n\t\t\t[2022/07/16 17:07:57] ppcls INFO: unique_endpoints {''}\r\n\t\t\t[2022/07/16 17:07:57] ppcls INFO: Downloading MobileNetV1_pretrained.pdparams from https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/legendary_models/MobileNetV1_pretrained.pdparams\r\n\t\t\t[2022/07/16 17:07:59] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\n\t\t\t[2022/07/16 17:08:01] ppcls INFO: [Train][Epoch 1/10][Iter: 0/273]lr(CosineAnnealingDecay): 0.09999993, HammingDistance: 0.49716, AccuracyScore: 0.50284, MultiLabelLoss: 0.85628, loss: 0.85628, batch_cost: 1.44437s, reader_cost: 1.23644, ips: 44.31011 samples/s, eta: 1:05:43\r\n\t\t\t[2022/07/16 17:08:02] ppcls INFO: [Train][Epoch 1/10][Iter: 10/273]lr(CosineAnnealingDecay): 0.09999530, HammingDistance: 0.15526, AccuracyScore: 0.84474, MultiLabelLoss: 0.37622, loss: 0.37622, batch_cost: 0.10000s, reader_cost: 0.00025, ips: 640.00290 samples/s, eta: 0:04:31\r\n\t\t\t[2022/07/16 17:08:03] ppcls INFO: [Train][Epoch 1/10][Iter: 20/273]lr(CosineAnnealingDecay): 0.09998404, HammingDistance: 0.11718, AccuracyScore: 0.88282, MultiLabelLoss: 0.32476, loss: 0.32476, batch_cost: 0.11404s, reader_cost: 0.00106, ips: 561.19280 samples/s, eta: 0:05:09\r\n\t\t\t[2022/07/16 17:08:04] ppcls INFO: [Train][Epoch 1/10][Iter: 30/273]lr(CosineAnnealingDecay): 0.09996617, HammingDistance: 0.10278, AccuracyScore: 0.89722, MultiLabelLoss: 0.29221, loss: 0.29221, batch_cost: 0.12300s, reader_cost: 0.00443, ips: 520.30787 samples/s, eta: 0:05:32\r\n\t\t\t[2022/07/16 17:08:05] ppcls INFO: [Train][Epoch 1/10][Iter: 40/273]lr(CosineAnnealingDecay): 0.09994168, HammingDistance: 0.09368, AccuracyScore: 0.90632, MultiLabelLoss: 0.27051, loss: 0.27051, batch_cost: 0.12503s, reader_cost: 0.00764, ips: 511.86440 samples/s, eta: 0:05:36\r\n\t\t\t[2022/07/16 17:08:07] ppcls INFO: [Train][Epoch 1/10][Iter: 50/273]lr(CosineAnnealingDecay): 0.09991057, HammingDistance: 0.08857, AccuracyScore: 0.91143, MultiLabelLoss: 0.25566, loss: 0.25566, batch_cost: 0.12603s, reader_cost: 0.00750, ips: 507.79879 samples/s, eta: 0:05:37\r\n\t\t\t[2022/07/16 17:08:08] ppcls INFO: [Train][Epoch 1/10][Iter: 60/273]lr(CosineAnnealingDecay): 0.09987286, HammingDistance: 0.08468, AccuracyScore: 0.91532, MultiLabelLoss: 0.24471, loss: 0.24471, batch_cost: 0.13030s, reader_cost: 0.00920, ips: 491.16795 samples/s, eta: 0:05:47\r\n\t\t\t[2022/07/16 17:08:10] ppcls INFO: [Train][Epoch 1/10][Iter: 70/273]lr(CosineAnnealingDecay): 0.09982854, HammingDistance: 0.08121, AccuracyScore: 0.91879, MultiLabelLoss: 0.23447, loss: 0.23447, batch_cost: 0.13031s, reader_cost: 0.00969, ips: 491.11827 samples/s, eta: 0:05:46\r\n\t\t\t[2022/07/16 17:08:12] ppcls INFO: [Train][Epoch 1/10][Iter: 80/273]lr(CosineAnnealingDecay): 0.09977762, HammingDistance: 0.07914, AccuracyScore: 0.92086, MultiLabelLoss: 0.22757, loss: 0.22757, batch_cost: 0.14074s, reader_cost: 0.01000, ips: 454.72867 samples/s, eta: 0:06:12\r\n\t\t\t[2022/07/16 17:08:14] ppcls INFO: [Train][Epoch 1/10][Iter: 90/273]lr(CosineAnnealingDecay): 0.09972011, HammingDistance: 0.07785, AccuracyScore: 0.92215, MultiLabelLoss: 0.22251, loss: 0.22251, batch_cost: 0.14647s, reader_cost: 0.00899, ips: 436.95943 samples/s, eta: 0:06:26\r\n\t\t\t[2022/07/16 17:08:15] ppcls INFO: [Train][Epoch 1/10][Iter: 100/273]lr(CosineAnnealingDecay): 0.09965602, HammingDistance: 0.07627, AccuracyScore: 0.92373, MultiLabelLoss: 0.21681, loss: 0.21681, batch_cost: 0.14683s, reader_cost: 0.01051, ips: 435.88615 samples/s, eta: 0:06:26\r\n\t\t\t[2022/07/16 17:08:16] ppcls INFO: [Train][Epoch 1/10][Iter: 110/273]lr(CosineAnnealingDecay): 0.09958535, HammingDistance: 0.07491, AccuracyScore: 0.92509, MultiLabelLoss: 0.21235, loss: 0.21235, batch_cost: 0.14429s, reader_cost: 0.01024, ips: 443.54869 samples/s, eta: 0:06:18\r\n\t\t\t[2022/07/16 17:08:18] ppcls INFO: [Train][Epoch 1/10][Iter: 120/273]lr(CosineAnnealingDecay): 0.09950812, HammingDistance: 0.07390, AccuracyScore: 0.92610, MultiLabelLoss: 0.20877, loss: 0.20877, batch_cost: 0.14396s, reader_cost: 0.01148, ips: 444.55331 samples/s, eta: 0:06:15\r\n\t\t\t[2022/07/16 17:08:19] ppcls INFO: [Train][Epoch 1/10][Iter: 130/273]lr(CosineAnnealingDecay): 0.09942433, HammingDistance: 0.07272, AccuracyScore: 0.92728, MultiLabelLoss: 0.20525, loss: 0.20525, batch_cost: 0.14281s, reader_cost: 0.01087, ips: 448.14375 samples/s, eta: 0:06:11\r\n\t\t\t[2022/07/16 17:08:20] ppcls INFO: [Train][Epoch 1/10][Iter: 140/273]lr(CosineAnnealingDecay): 0.09933399, HammingDistance: 0.07197, AccuracyScore: 0.92803, MultiLabelLoss: 0.20234, loss: 0.20234, batch_cost: 0.14260s, reader_cost: 0.01128, ips: 448.80568 samples/s, eta: 0:06:09\r\n\t\t\t[2022/07/16 17:08:22] ppcls INFO: [Train][Epoch 1/10][Iter: 150/273]lr(CosineAnnealingDecay): 0.09923712, HammingDistance: 0.07122, AccuracyScore: 0.92878, MultiLabelLoss: 0.19955, loss: 0.19955, batch_cost: 0.14106s, reader_cost: 0.01144, ips: 453.69443 samples/s, eta: 0:06:03\r\n\t\t\t[2022/07/16 17:08:23] ppcls INFO: [Train][Epoch 1/10][Iter: 160/273]lr(CosineAnnealingDecay): 0.09913373, HammingDistance: 0.07050, AccuracyScore: 0.92950, MultiLabelLoss: 0.19703, loss: 0.19703, batch_cost: 0.14162s, reader_cost: 0.01223, ips: 451.90739 samples/s, eta: 0:06:03\r\n\t\t\t[2022/07/16 17:08:24] ppcls INFO: [Train][Epoch 1/10][Iter: 170/273]lr(CosineAnnealingDecay): 0.09902383, HammingDistance: 0.06968, AccuracyScore: 0.93032, MultiLabelLoss: 0.19439, loss: 0.19439, batch_cost: 0.14092s, reader_cost: 0.01232, ips: 454.16743 samples/s, eta: 0:06:00\r\n\t\t\t[2022/07/16 17:08:26] ppcls INFO: [Train][Epoch 1/10][Iter: 180/273]lr(CosineAnnealingDecay): 0.09890745, HammingDistance: 0.06891, AccuracyScore: 0.93109, MultiLabelLoss: 0.19201, loss: 0.19201, batch_cost: 0.14031s, reader_cost: 0.01235, ips: 456.12892 samples/s, eta: 0:05:57\r\n\t\t\t[2022/07/16 17:08:27] ppcls INFO: [Train][Epoch 1/10][Iter: 190/273]lr(CosineAnnealingDecay): 0.09878458, HammingDistance: 0.06841, AccuracyScore: 0.93159, MultiLabelLoss: 0.19022, loss: 0.19022, batch_cost: 0.14028s, reader_cost: 0.01253, ips: 456.23303 samples/s, eta: 0:05:56\r\n\t\t\t[2022/07/16 17:08:28] ppcls INFO: [Train][Epoch 1/10][Iter: 200/273]lr(CosineAnnealingDecay): 0.09865526, HammingDistance: 0.06789, AccuracyScore: 0.93211, MultiLabelLoss: 0.18832, loss: 0.18832, batch_cost: 0.13975s, reader_cost: 0.01238, ips: 457.94703 samples/s, eta: 0:05:53\r\n\t\t\t[2022/07/16 17:08:30] ppcls INFO: [Train][Epoch 1/10][Iter: 210/273]lr(CosineAnnealingDecay): 0.09851949, HammingDistance: 0.06747, AccuracyScore: 0.93253, MultiLabelLoss: 0.18667, loss: 0.18667, batch_cost: 0.13930s, reader_cost: 0.01244, ips: 459.45184 samples/s, eta: 0:05:51\r\n\t\t\t[2022/07/16 17:08:31] ppcls INFO: [Train][Epoch 1/10][Iter: 220/273]lr(CosineAnnealingDecay): 0.09837730, HammingDistance: 0.06700, AccuracyScore: 0.93300, MultiLabelLoss: 0.18511, loss: 0.18511, batch_cost: 0.13931s, reader_cost: 0.01251, ips: 459.40462 samples/s, eta: 0:05:49\r\n\t\t\t[2022/07/16 17:08:32] ppcls INFO: [Train][Epoch 1/10][Iter: 230/273]lr(CosineAnnealingDecay): 0.09822870, HammingDistance: 0.06672, AccuracyScore: 0.93328, MultiLabelLoss: 0.18408, loss: 0.18408, batch_cost: 0.13934s, reader_cost: 0.01277, ips: 459.31651 samples/s, eta: 0:05:48\r\n\t\t\t[2022/07/16 17:08:34] ppcls INFO: [Train][Epoch 1/10][Iter: 240/273]lr(CosineAnnealingDecay): 0.09807371, HammingDistance: 0.06645, AccuracyScore: 0.93355, MultiLabelLoss: 0.18297, loss: 0.18297, batch_cost: 0.13894s, reader_cost: 0.01266, ips: 460.61978 samples/s, eta: 0:05:45\r\n\t\t\t[2022/07/16 17:08:35] ppcls INFO: [Train][Epoch 1/10][Iter: 250/273]lr(CosineAnnealingDecay): 0.09791236, HammingDistance: 0.06608, AccuracyScore: 0.93392, MultiLabelLoss: 0.18163, loss: 0.18163, batch_cost: 0.13939s, reader_cost: 0.01296, ips: 459.14592 samples/s, eta: 0:05:45\r\n\t\t\t[2022/07/16 17:08:36] ppcls INFO: [Train][Epoch 1/10][Iter: 260/273]lr(CosineAnnealingDecay): 0.09774466, HammingDistance: 0.06579, AccuracyScore: 0.93421, MultiLabelLoss: 0.18057, loss: 0.18057, batch_cost: 0.13863s, reader_cost: 0.01254, ips: 461.66447 samples/s, eta: 0:05:42\r\n\t\t\t[2022/07/16 17:08:38] ppcls INFO: [Train][Epoch 1/10][Iter: 270/273]lr(CosineAnnealingDecay): 0.09757064, HammingDistance: 0.06547, AccuracyScore: 0.93453, MultiLabelLoss: 0.17950, loss: 0.17950, batch_cost: 0.13838s, reader_cost: 0.01274, ips: 462.49553 samples/s, eta: 0:05:40\r\n\t\t\t[2022/07/16 17:08:38] ppcls INFO: [Train][Epoch 1/10][Avg]HammingDistance: 0.06545, AccuracyScore: 0.93455, MultiLabelLoss: 0.17936, loss: 0.17936\r\n\t\t\t[2022/07/16 17:08:42] ppcls INFO: [Eval][Epoch 1][Iter: 0/69]MultiLabelLoss: 0.11665, loss: 0.11665, HammingDistance: 0.04013, AccuracyScore: 0.95987, batch_cost: 3.60435s, reader_cost: 3.00752, ips: 71.02521 images/sec\r\n\t\t\t\r\n\r\n\r\n我 本地 训练MultiLabelLoss是有问题的如：\r\n\r\n\t\t\t===========================================================\r\n\t\t\t==        PaddleClas is powered by PaddlePaddle !        ==\r\n\t\t\t===========================================================\r\n\t\t\t==                                                       ==\r\n\t\t\t==   For more info please go to the following website.   ==\r\n\t\t\t==                                                       ==\r\n\t\t\t==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n\t\t\t===========================================================\r\n\t\t\t\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Arch : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     class_num : 33\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     name : MobileNetV1\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     pretrained : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: DataLoader : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         dataset : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             cls_label_path : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/multilabel_test_list.txt\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             image_root : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/images/\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             name : MultiLabelDataset\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             transform_ops : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 DecodeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     channel_first : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     to_rgb : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 ResizeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     resize_short : 256\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 CropImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     size : 224\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 NormalizeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     order : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     scale : 1.0/255.0\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         loader : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             num_workers : 4\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             use_shared_memory : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         sampler : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             batch_size : 256\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             drop_last : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             name : DistributedBatchSampler\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             shuffle : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Train : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         dataset : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             cls_label_path : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/multilabel_train_list.txt\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             image_root : ./dataset/NUS-WIDE-SCENE/NUS-SCENE-dataset/images/\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             name : MultiLabelDataset\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             transform_ops : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 DecodeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     channel_first : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     to_rgb : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 RandCropImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     size : 224\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 RandFlipImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     flip_code : 1\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                 NormalizeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     order : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     scale : 1.0/255.0\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         loader : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             num_workers : 4\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             use_shared_memory : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         sampler : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             batch_size : 64\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             drop_last : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             name : DistributedBatchSampler\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             shuffle : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Global : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     checkpoints : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     device : gpu\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     epochs : 10\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     eval_during_train : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     eval_interval : 1\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     image_shape : [3, 224, 224]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     output_dir : ./output/\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     pretrained_model : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     print_batch_step : 10\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     save_inference_dir : ./inference\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     save_interval : 1\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     use_multilabel : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     use_visualdl : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Infer : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     PostProcess : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         class_id_map_file : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         name : MultiLabelTopk\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         topk : 5\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     batch_size : 10\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     infer_imgs : ./deploy/images/0517_2715693311.jpg\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     transforms : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         DecodeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             channel_first : False\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             to_rgb : True\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         ResizeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             resize_short : 256\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         CropImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             size : 224\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         NormalizeImage : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             order : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             scale : 1.0/255.0\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         ToCHWImage : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Loss : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         MultiLabelLoss : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             weight : 1.0\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Train : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         MultiLabelLoss : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:             weight : 1.0\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Metric : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Eval : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         HammingDistance : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         AccuracyScore : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     Train : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         HammingDistance : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         AccuracyScore : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: Optimizer : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     lr : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         learning_rate : 0.1\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         name : Cosine\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     momentum : 0.9\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     name : Momentum\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:     regularizer : \r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         coeff : 4e-05\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO:         name : L2\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: profiler_options : None\r\n\t\t\t[2022/07/18 09:40:48] ppcls INFO: train with paddle 2.3.0 and device Place(gpu:0)\r\n\t\t\t[2022/07/18 09:40:55] ppcls INFO: unique_endpoints {''}\r\n\t\t\t[2022/07/18 09:40:55] ppcls INFO: Found C:\\Users\\Administrator/.paddleclas/weights\\MobileNetV1_pretrained.pdparams\r\n\t\t\t[2022/07/18 09:40:55] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\n\t\t\t[2022/07/18 09:40:57] ppcls INFO: [Train][Epoch 1/10][Iter: 0/273]lr(CosineAnnealingDecay): 0.09999993, HammingDistance: 0.78883, AccuracyScore: 0.20360, MultiLabelLoss: 0.00000, loss: 0.00000, batch_cost: 1.35928s, reader_cost: 0.35935, ips: 47.08391 samples/s, eta: 1:01:50\r\n\t\t\t[2022/07/18 09:41:01] ppcls INFO: [Train][Epoch 1/10][Iter: 10/273]lr(CosineAnnealingDecay): 0.09999530, HammingDistance: 0.36359, AccuracyScore: 0.63572, MultiLabelLoss: 15540.73622, loss: 15540.73622, batch_cost: 0.47913s, reader_cost: 0.13281, ips: 133.57495 samples/s, eta: 0:21:43\r\n\t\t\t[2022/07/18 09:41:06] ppcls INFO: [Train][Epoch 1/10][Iter: 20/273]lr(CosineAnnealingDecay): 0.09998404, HammingDistance: 0.38591, AccuracyScore: 0.61373, MultiLabelLoss: 36724.26478, loss: 36724.26478, batch_cost: 0.49703s, reader_cost: 0.14355, ips: 128.76380 samples/s, eta: 0:22:26\r\n\t\t\t[2022/07/18 09:41:11] ppcls INFO: [Train][Epoch 1/10][Iter: 30/273]lr(CosineAnnealingDecay): 0.09996617, HammingDistance: 0.37392, AccuracyScore: 0.62584, MultiLabelLoss: 24898.26703, loss: 24898.26703, batch_cost: 0.49876s, reader_cost: 0.14542, ips: 128.31781 samples/s, eta: 0:22:26\r\n\t\t\t[2022/07/18 09:41:23] ppcls INFO: [Train][Epoch 1/10][Iter: 40/273]lr(CosineAnnealingDecay): 0.09994168, HammingDistance: 0.39181, AccuracyScore: 0.60800, MultiLabelLoss: -92611.72725, loss: -92611.72725, batch_cost: 0.46481s, reader_cost: 0.10980, ips: 137.69074 samples/s, eta: 0:20:50\r\n\t\t\t[2022/07/18 09:41:28] ppcls INFO: [Train][Epoch 1/10][Iter: 50/273]lr(CosineAnnealingDecay): 0.09991057, HammingDistance: 0.38774, AccuracyScore: 0.61211, MultiLabelLoss: -50456.68341, loss: -50456.68341, batch_cost: 0.46702s, reader_cost: 0.11344, ips: 137.03984 samples/s, eta: 0:20:51\r\n\t\t\t[2022/07/18 09:41:33] ppcls INFO: [Train][Epoch 1/10][Iter: 60/273]lr(CosineAnnealingDecay): 0.09987286, HammingDistance: 0.38567, AccuracyScore: 0.61421, MultiLabelLoss: -22486.64255, loss: -22486.64255, batch_cost: 0.46899s, reader_cost: 0.11690, ips: 136.46209 samples/s, eta: 0:20:52\r\n\t\t\t[2022/07/18 09:41:37] ppcls INFO: [Train][Epoch 1/10][Iter: 70/273]lr(CosineAnnealingDecay): 0.09982854, HammingDistance: 0.38313, AccuracyScore: 0.61676, MultiLabelLoss: -19252.86648, loss: -19252.86648, batch_cost: 0.46990s, reader_cost: 0.11836, ips: 136.19938 samples/s, eta: 0:20:49\r\n\t\t\t[2022/07/18 09:41:42] ppcls INFO: [Train][Epoch 1/10][Iter: 80/273]lr(CosineAnnealingDecay): 0.09977762, HammingDistance: 0.39454, AccuracyScore: 0.60536, MultiLabelLoss: -16924.69063, loss: -16924.69063, batch_cost: 0.47057s, reader_cost: 0.11924, ips: 136.00645 samples/s, eta: 0:20:46\r\n\t\t\t[2022/07/18 09:41:47] ppcls INFO: [Train][Epoch 1/10][Iter: 90/273]lr(CosineAnnealingDecay): 0.09972011, HammingDistance: 0.39503, AccuracyScore: 0.60489, MultiLabelLoss: 349381514.77505, loss: 349381514.77505, batch_cost: 0.47108s, reader_cost: 0.12027, ips: 135.85876 samples/s, eta: 0:20:43\r\n\t\t\t[2022/07/18 09:41:52] ppcls INFO: [Train][Epoch 1/10][Iter: 100/273]lr(CosineAnnealingDecay): 0.09965602, HammingDistance: 0.39561, AccuracyScore: 0.60431, MultiLabelLoss: 314791201.08847, loss: 314791201.08847, batch_cost: 0.47132s, reader_cost: 0.12060, ips: 135.78894 samples/s, eta: 0:20:39\r\n\t\t\t[2022/07/18 09:41:56] ppcls INFO: [Train][Epoch 1/10][Iter: 110/273]lr(CosineAnnealingDecay): 0.09958535, HammingDistance: 0.39322, AccuracyScore: 0.60671, MultiLabelLoss: 286436854.72710, loss: 286436854.72710, batch_cost: 0.47196s, reader_cost: 0.12160, ips: 135.60517 samples/s, eta: 0:20:36\r\n\t\t\t[2022/07/18 09:42:01] ppcls INFO: [Train][Epoch 1/10][Iter: 120/273]lr(CosineAnnealingDecay): 0.09950812, HammingDistance: 0.38938, AccuracyScore: 0.61056, MultiLabelLoss: 266475598.22907, loss: 266475598.22907, batch_cost: 0.47222s, reader_cost: 0.12176, ips: 135.53073 samples/s, eta: 0:20:32\r\n\t\t\t[2022/07/18 09:42:06] ppcls INFO: [Train][Epoch 1/10][Iter: 130/273]lr(CosineAnnealingDecay): 0.09942433, HammingDistance: 0.39447, AccuracyScore: 0.60547, MultiLabelLoss: 246135450.44263, loss: 246135450.44263, batch_cost: 0.47256s, reader_cost: 0.12227, ips: 135.43263 samples/s, eta: 0:20:28\r\n\t\t\t[2022/07/18 09:42:11] ppcls INFO: [Train][Epoch 1/10][Iter: 140/273]lr(CosineAnnealingDecay): 0.09933399, HammingDistance: 0.39562, AccuracyScore: 0.60433, MultiLabelLoss: 228682885.43340, loss: 228682885.43340, batch_cost: 0.47297s, reader_cost: 0.12293, ips: 135.31618 samples/s, eta: 0:20:24\r\n\t\t\t[2022/07/18 09:42:15] ppcls INFO: [Train][Epoch 1/10][Iter: 150/273]lr(CosineAnnealingDecay): 0.09923712, HammingDistance: 0.39547, AccuracyScore: 0.60448, MultiLabelLoss: 213542288.18181, loss: 213542288.18181, batch_cost: 0.47321s, reader_cost: 0.12339, ips: 135.24643 samples/s, eta: 0:20:20\r\n\t\t\t[2022/07/18 09:42:20] ppcls INFO: [Train][Epoch 1/10][Iter: 160/273]lr(CosineAnnealingDecay): 0.09913373, HammingDistance: 0.39550, AccuracyScore: 0.60446, MultiLabelLoss: 200279231.33699, loss: 200279231.33699, batch_cost: 0.47362s, reader_cost: 0.12389, ips: 135.12851 samples/s, eta: 0:20:17\r\n\t\t\t[2022/07/18 09:42:25] ppcls INFO: [Train][Epoch 1/10][Iter: 170/273]lr(CosineAnnealingDecay): 0.09902383, HammingDistance: 0.39739, AccuracyScore: 0.60257, MultiLabelLoss: 400101751.08385, loss: 400101751.08385, batch_cost: 0.47380s, reader_cost: 0.12424, ips: 135.07861 samples/s, eta: 0:20:12\r\n\t\t\t[2022/07/18 09:42:30] ppcls INFO: [Train][Epoch 1/10][Iter: 180/273]lr(CosineAnnealingDecay): 0.09890745, HammingDistance: 0.39598, AccuracyScore: 0.60398, MultiLabelLoss: 378067441.94226, loss: 378067441.94226, batch_cost: 0.47395s, reader_cost: 0.12437, ips: 135.03441 samples/s, eta: 0:20:08\r\n\t\t\t[2022/07/18 09:42:35] ppcls INFO: [Train][Epoch 1/10][Iter: 190/273]lr(CosineAnnealingDecay): 0.09878458, HammingDistance: 0.39366, AccuracyScore: 0.60630, MultiLabelLoss: 8491173.37458, loss: 8491173.37458, batch_cost: 0.47426s, reader_cost: 0.12457, ips: 134.94716 samples/s, eta: 0:20:04\r\n\t\t\t[2022/07/18 09:42:39] ppcls INFO: [Train][Epoch 1/10][Iter: 200/273]lr(CosineAnnealingDecay): 0.09865526, HammingDistance: 0.39221, AccuracyScore: 0.60775, MultiLabelLoss: 2851103.73324, loss: 2851103.73324, batch_cost: 0.47446s, reader_cost: 0.12475, ips: 134.89158 samples/s, eta: 0:20:00\r\n\t\t\t[2022/07/18 09:42:44] ppcls INFO: [Train][Epoch 1/10][Iter: 210/273]lr(CosineAnnealingDecay): 0.09851949, HammingDistance: 0.39390, AccuracyScore: 0.60606, MultiLabelLoss: -2290493.99880, loss: -2290493.99880, batch_cost: 0.47456s, reader_cost: 0.12484, ips: 134.86298 samples/s, eta: 0:19:55\r\n\t\t\t[2022/07/18 09:42:49] ppcls INFO: [Train][Epoch 1/10][Iter: 220/273]lr(CosineAnnealingDecay): 0.09837730, HammingDistance: 0.39434, AccuracyScore: 0.60562, MultiLabelLoss: -2186844.87674, loss: -2186844.87674, batch_cost: 0.47479s, reader_cost: 0.12499, ips: 134.79596 samples/s, eta: 0:19:51\r\n\t\t\t[2022/07/18 09:42:54] ppcls INFO: [Train][Epoch 1/10][Iter: 230/273]lr(CosineAnnealingDecay): 0.09822870, HammingDistance: 0.39287, AccuracyScore: 0.60710, MultiLabelLoss: -2093130.91939, loss: -2093130.91939, batch_cost: 0.47494s, reader_cost: 0.12492, ips: 134.75454 samples/s, eta: 0:19:47\r\n\t\t\t[2022/07/18 09:42:58] ppcls INFO: [Train][Epoch 1/10][Iter: 240/273]lr(CosineAnnealingDecay): 0.09807371, HammingDistance: 0.39554, AccuracyScore: 0.60443, MultiLabelLoss: -2003783.23691, loss: -2003783.23691, batch_cost: 0.47507s, reader_cost: 0.12506, ips: 134.71665 samples/s, eta: 0:19:42\r\n\t\t\t[2022/07/18 09:43:03] ppcls INFO: [Train][Epoch 1/10][Iter: 250/273]lr(CosineAnnealingDecay): 0.09791236, HammingDistance: 0.39686, AccuracyScore: 0.60311, MultiLabelLoss: -1933839.57987, loss: -1933839.57987, batch_cost: 0.47519s, reader_cost: 0.12525, ips: 134.68186 samples/s, eta: 0:19:38\r\n\t\t\t[2022/07/18 09:43:08] ppcls INFO: [Train][Epoch 1/10][Iter: 260/273]lr(CosineAnnealingDecay): 0.09774466, HammingDistance: 0.39622, AccuracyScore: 0.60375, MultiLabelLoss: -1859746.09497, loss: -1859746.09497, batch_cost: 0.47531s, reader_cost: 0.12542, ips: 134.64980 samples/s, eta: 0:19:34\r\n\t\t\t[2022/07/18 09:43:13] ppcls INFO: [Train][Epoch 1/10][Iter: 270/273]lr(CosineAnnealingDecay): 0.09757064, HammingDistance: 0.39745, AccuracyScore: 0.60253, MultiLabelLoss: -1780679.59171, loss: -1780679.59171, batch_cost: 0.47541s, reader_cost: 0.12558, ips: 134.62017 samples/s, eta: 0:19:29\r\n\t\t\t[2022/07/18 09:43:13] ppcls INFO: [Train][Epoch 1/10][Avg]HammingDistance: 0.39777, AccuracyScore: 0.60220, MultiLabelLoss: -1774132.37936, loss: -1774132.37936\r\n\t\t\t[2022/07/18 09:43:15] ppcls INFO: [Eval][Epoch 1][Iter: 0/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.51136, AccuracyScore: 0.48864, batch_cost: 1.85924s, reader_cost: 1.34365, ips: 137.69075 images/sec\r\n\t\t\t[2022/07/18 09:43:29] ppcls INFO: [Eval][Epoch 1][Iter: 10/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.23842, AccuracyScore: 0.76158, batch_cost: 1.34105s, reader_cost: 0.80984, ips: 190.89550 images/sec\r\n\t\t\t[2022/07/18 09:43:42] ppcls INFO: [Eval][Epoch 1][Iter: 20/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.18564, AccuracyScore: 0.81436, batch_cost: 1.34072s, reader_cost: 0.80951, ips: 190.94184 images/sec\r\n\t\t\t[2022/07/18 09:43:56] ppcls INFO: [Eval][Epoch 1][Iter: 30/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.16790, AccuracyScore: 0.83210, batch_cost: 1.34485s, reader_cost: 0.81545, ips: 190.35529 images/sec\r\n\t\t\t[2022/07/18 09:44:09] ppcls INFO: [Eval][Epoch 1][Iter: 40/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.16036, AccuracyScore: 0.83964, batch_cost: 1.34756s, reader_cost: 0.81722, ips: 189.97333 images/sec\r\n\t\t\t[2022/07/18 09:44:23] ppcls INFO: [Eval][Epoch 1][Iter: 50/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.15452, AccuracyScore: 0.84548, batch_cost: 1.34637s, reader_cost: 0.81584, ips: 190.14109 images/sec\r\n\t\t\t[2022/07/18 09:44:36] ppcls INFO: [Eval][Epoch 1][Iter: 60/69]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.14978, AccuracyScore: 0.85022, batch_cost: 1.34533s, reader_cost: 0.81467, ips: 190.28854 images/sec\r\n\t\t\t[2022/07/18 09:44:46] ppcls INFO: [Eval][Epoch 1][Avg]MultiLabelLoss: 0.00000, loss: 0.00000, HammingDistance: 0.14743, AccuracyScore: 0.85257\r\n\r\n`",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-07-18T06:22:27+00:00",
        "updated_at": "2022-07-22T08:04:01+00:00",
        "closed_at": "2022-07-22T08:04:01+00:00",
        "comments_count": [
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "cuicheng01",
            "gg22mm",
            "gg22mm",
            "gg22mm",
            "gg22mm",
            "gg22mm"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2160,
        "title": "paddle2onnx转主体检测模型onnx中出现\"Constant\"这个额外输入怎么处理",
        "body": "我使用paddle2onnx转主体检测模型ppyolov2_r50vd_dcn_mainbody_v1.0_infer时候出现onnx中有一个“Constant”的输入，要怎么处理掉啊\r\n",
        "state": "closed",
        "user": "lovegit2021",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-18T12:16:56+00:00",
        "updated_at": "2022-10-18T06:49:03+00:00",
        "closed_at": "2022-10-18T06:49:01+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2163,
        "title": "predict_cls里面不能从utils导入logger怎么回事呢？utils打开也是空的",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统：Windows\r\n  b. Python版本号：Python3.8\r\n    c. CPU\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n 5. error:cannot import name 'logger' from 'utils' \r\n",
        "state": "closed",
        "user": "dandanRenn",
        "closed_by": "TingquanGao",
        "created_at": "2022-07-20T08:27:02+00:00",
        "updated_at": "2022-08-23T12:02:27+00:00",
        "closed_at": "2022-08-23T12:02:24+00:00",
        "comments_count": [
            "cyy0523xc",
            "TingquanGao",
            "cyy0523xc",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2164,
        "title": "在单分类任务中，如果处理包含多个类别的图片",
        "body": "使用PaddleClas做的单分类任务，有一批数据包含了多个类别，这种情况如何处理？\r\n如果删除就很可惜。\r\n使用多分类任务，整体的准确率就不高。\r\n因为是重叠的，无法使用目标检测分开。\r\n这种情况有什么好的处理办法吗？",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2022-07-21T02:54:32+00:00",
        "updated_at": "2022-07-27T09:33:41+00:00",
        "closed_at": "2022-07-27T09:33:39+00:00",
        "comments_count": [
            "cuicheng01",
            "yeyupiaoling",
            "tranngocphuong89",
            "yeyupiaoling"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2165,
        "title": "PaddleClas 怎么使用backbone为 ResNet50？",
        "body": "你好，请问哪位 有 链接介绍关于 使用 ResNet50为backbone 求助分享一下，谢谢！",
        "state": "closed",
        "user": "tranngocphuong89",
        "closed_by": "tranngocphuong89",
        "created_at": "2022-07-21T09:15:28+00:00",
        "updated_at": "2022-07-21T10:57:08+00:00",
        "closed_at": "2022-07-21T10:57:06+00:00",
        "comments_count": [
            "tranngocphuong89"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2166,
        "title": "missing file configs/build_product.yaml",
        "body": "Any one downloaded the file configs/build_product.yaml, please create a url download for me.\r\nThank you very much!\r\n\r\nError from this document:\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/en/quick_start/quick_start_recognition_en.md#21-download-and-unzip-the-inference-model-and-demo-data\r\n\r\nStep:\r\npython python/build_gallery.py -c configs/build_product.yaml -o Global.rec_inference_model_dir=./models/general_PPLCNet_x2_5_lite_v1.0_infer\r\n\r\nError:\r\nTraceback (most recent call last):\r\n  File \"python/build_gallery.py\", line 213, in <module>\r\n    config = config.get_config(args.config, overrides=args.override, show=True)\r\n  File \"/home/anhtp/PycharmProjects/pythonProject/PaddleClas/deploy/utils/config.py\", line 164, in get_config\r\n    'config file({}) is not exist'.format(fname))\r\nAssertionError: config file(configs/build_product.yaml) is not exist\r\n",
        "state": "closed",
        "user": "PhanAnh1001",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-21T10:52:10+00:00",
        "updated_at": "2022-11-15T06:49:28+00:00",
        "closed_at": "2022-11-15T06:49:25+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2167,
        "title": "安全帽佩戴问题：如果图片中有多个人，只要其中有一个人没有佩戴安全帽就输出未佩戴安全帽，应该怎么修改呢",
        "body": "默认的是只要其中有人佩戴了安全帽，返回值就是佩戴了\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/zh_CN/PULC/PULC_safety_helmet.md",
        "state": "open",
        "user": "sweetboxwwy",
        "closed_by": null,
        "created_at": "2022-07-26T02:29:29+00:00",
        "updated_at": "2024-02-26T04:28:38+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "sweetboxwwy",
            "cuicheng01",
            "sweetboxwwy",
            "TingquanGao",
            "sweetboxwwy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2168,
        "title": "同样的环境同一时间连续2次运行eval.py，得到的loss和top1精度不一样",
        "body": "环境:ubuntu18 python3.7 paddle版本 2.2.2  paddleclas版本 release-2.4  \r\nGPU有多个2080Ti，但运行eval.py时应该只调用了第一个GPU\r\n\r\n同样的环境同一时间连续2次运行python tools/eval.py -c ./ppcls/configs/ImageNet/MobileNetV3/MobileNetV3_large_x1_0.yaml  -o Global.pretrained_model=output/MobileNetV3_large_x1_0/best_model\r\n\r\n第一次得到的结果[2022/07/27 12:46:57] ppcls INFO: [Eval][Epoch 0][Iter: 0/1]CELoss: 0.31883, loss: 0.31883, top1: 0.91358, batch_cost: 3.03612s, reader_cost: 2.11685, ips: 80.03632 images/sec\r\n[2022/07/27 12:46:57] ppcls INFO: [Eval][Epoch 0][Avg]CELoss: 0.31883, loss: 0.31883, top1: 0.91358\r\n\r\n第二次得到的结果[2022/07/27 12:49:14] ppcls INFO: [Eval][Epoch 0][Iter: 0/1]CELoss: 0.30605, loss: 0.30605, top1: 0.92593, batch_cost: 2.05298s, reader_cost: 1.15805, ips: 118.36433 images/sec\r\n[2022/07/27 12:49:14] ppcls INFO: [Eval][Epoch 0][Avg]CELoss: 0.30605, loss: 0.30605, top1: 0.92593\r\n\r\n请问为什么两次得到的loss和top1精度不一样啊？",
        "state": "closed",
        "user": "skyeyeCV",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-27T05:06:40+00:00",
        "updated_at": "2022-11-08T06:46:34+00:00",
        "closed_at": "2022-11-08T06:46:31+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2169,
        "title": "图片分类模型加载inference模型时报错",
        "body": "环境信息：\r\n  a. Linux\r\n  b. Python3.6\r\n  c.  CUDA10.2/cuDNN 7.6.5\r\n报错信息：\r\nInvalidArgumentError: The inverse of Fused batch norm variance should be finite. Found nonfinite values! Please check batch_norm_6.w_2\r\n[Hint: Expected std::isfinite(variance_array[i]) == true, but received std::isfinite(variance_array[i]):0 != true:1.] (at /paddle/paddle/fluid/framework/ir/conv_bn_fuse_pass.cc:101)\r\n",
        "state": "closed",
        "user": "KyleWang-Hunter",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-27T07:46:12+00:00",
        "updated_at": "2022-11-29T06:49:00+00:00",
        "closed_at": "2022-11-29T06:48:57+00:00",
        "comments_count": [
            "weisy11",
            "Zenmaster188",
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2170,
        "title": "模型评估时map的使用",
        "body": "在paddleClas中的PaddleClas/ppcls/configs/quick_start/professional/MobileNetV1_multilabel.yaml ：\r\n\r\nMetric:\r\nTrain:\r\n- HammingDistance:\r\n- AccuracyScore:\r\nEval:\r\n- HammingDistance:\r\n- AccuracyScore:\r\n- mAP: {}\r\n\r\n在最后添加map:{}这行时，训练验证部分会报错\r\nTypeError: forward() missing 2 required positional arguments: 'gallery_img_id' and 'keep_mask'\r\n，如果想查看map该怎么写呢",
        "state": "closed",
        "user": "fan-min-97",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-27T07:56:05+00:00",
        "updated_at": "2022-11-29T06:49:01+00:00",
        "closed_at": "2022-11-29T06:48:58+00:00",
        "comments_count": [
            "cuicheng01",
            "tranngocphuong89"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2172,
        "title": "paddle-shitu训练集下载",
        "body": "请问paddleClas里的paddle-shitu中的提到的Aliproduct，GLDv2，VeRI-Wild，LogoDet-3K，iCartoonFace，SOP，Inshop 7个数据集，其中有的链接已经下载不到了，可以提供一份训练集下载地址吗，谢谢。",
        "state": "closed",
        "user": "tingyuyan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-28T02:25:20+00:00",
        "updated_at": "2022-11-01T06:47:26+00:00",
        "closed_at": "2022-11-01T06:47:24+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2173,
        "title": "按照官方文档实现图像分类服务部署出错，",
        "body": "部署环境：docker,PaddleClas release/2.4,. PaddleServing0.7\r\n问题：在启动客户端程序test_cpp_serving_clien.py 后出现如下报错： TypeError: numpy_predict(): incompatible function arguments. The following argument types are supported:\r\n    1. (self: paddle_serving_client.serving_client.PredictorClient, arg0: List[numpy.ndarray[float32]], arg1: List[str],\r\n    2. \r\n![图片](https://user-images.githubusercontent.com/31660684/181742919-43757eb7-448f-4b5d-9a13-99930a5046e6.png)\r\n\r\n",
        "state": "closed",
        "user": "Lanqingsong",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-29T10:43:08+00:00",
        "updated_at": "2022-11-29T06:49:01+00:00",
        "closed_at": "2022-11-29T06:48:59+00:00",
        "comments_count": [
            "RainFrost1",
            "HydrogenSulfate",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2175,
        "title": "python tools/export_model.py 导出的模型怎么没有 .yml 是不是这个原因导致我用paddle-inference不成功",
        "body": "python tools/export_model.py 导出的模型怎么没有 .yml 是不是这个原因导致我用paddle-inference不成功\r\n代码如下：\r\n[代码.txt](https://github.com/PaddlePaddle/PaddleClas/files/9227940/default.txt)\r\n\r\n\r\n\r\n报错：\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-15-4077ebdcb5ea> in <module>\r\n    135 \r\n    136 # # 推理解析\r\n--> 137 result = run(pred, [im_shape, data, scale_factor]) #  [im_shape, data, scale_factor] 他们的shap = (1, 2)  (1, 3, 608, 608)  (1, 2)\r\n    138 \r\n    139 result\r\n\r\n<ipython-input-15-4077ebdcb5ea> in run(predictor, img)\r\n     84 \r\n     85     # (5) 执行推理\r\n---> 86     predictor.run()\r\n     87 \r\n     88     results = []\r\n\r\nValueError: In user code:\r\n\r\n    File \"tools/export_model.py\", line 36, in <module>\r\n      engine.export()\r\n    File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 487, in export\r\n      paddle.jit.save(model, save_path)\r\n    File \"<decorator-gen-101>\", line 2, in save\r\n      \r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 51, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 744, in save\r\n      inner_input_spec)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 517, in concrete_program_specify_input_spec\r\n      *desired_input_spec)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 427, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 723, in __getitem__\r\n      self._caches[item] = self._build_once(item)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 714, in _build_once\r\n      **cache_key.kwargs)\r\n    File \"<decorator-gen-99>\", line 2, in from_func_spec\r\n      \r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 51, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 662, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/home/aistudio/PaddleClas/ppcls/engine/engine.py\", line 526, in forward\r\n      x = self.base_model(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/aistudio/PaddleClas/ppcls/arch/backbone/legendary_models/mobilenet_v1.py\", line 166, in forward\r\n      x = self.conv(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/aistudio/PaddleClas/ppcls/arch/backbone/legendary_models/mobilenet_v1.py\", line 69, in forward\r\n      x = self.conv(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 917, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 907, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/conv.py\", line 677, in forward\r\n      use_cudnn=self._use_cudnn)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/functional/conv.py\", line 148, in _conv_nd\r\n      type=op_type, inputs=inputs, outputs=outputs, attrs=attrs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n      return self.main_program.current_block().append_op(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3184, in append_op\r\n      attrs=kwargs.get(\"attrs\", None))\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2224, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    InvalidArgumentError: The input of Op(Conv) should be a 4-D or 5-D Tensor. But received: input's dimension is 2, input's shape is [1, 2].\r\n      [Hint: Expected in_dims.size() == 4 || in_dims.size() == 5 == true, but received in_dims.size() == 4 || in_dims.size() == 5:0 != true:1.] (at C:/home/workspace/Paddle_release/paddle/fluid/operators/conv_op.cc:65)\r\n      [operator < conv2d > error]\r\n\r\n",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-07-31T02:36:59+00:00",
        "updated_at": "2022-08-20T03:18:45+00:00",
        "closed_at": "2022-08-20T03:18:40+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2174,
        "title": "PaddleClas MultiLabels模型导出的onnx模型推理有BUG",
        "body": "MultiLabels模型导出的onnx模型推理 与 paddle模型相差非常大。\r\n\r\n\r\n1 代码：PaddleClas develop分支\r\n2 环境：docker images paddlepaddle/paddle:2.1.0-gpu-cuda11.2-cudnn8\r\n\r\n下面是我操作的过程：\r\n# 导出到paddle推理模型\r\npython3 tools/export_model.py -c ./ppcls/configs/quick_start/professional/MobileNetV1_multilabel_intent_eval.yaml -o Arch.pretrained=\"./output/k1000_focal_2/MobileNetV2/latest\"\r\n![image](https://user-images.githubusercontent.com/25652821/181870448-eff7df78-d052-47ba-b19b-c2b03e24eec0.png)\r\n\r\n# 安装必要的包\r\npython -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip\r\npip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\r\npip install paddle2onnx onnx onnx-simplifier onnxruntime-gpu\r\n![image](https://user-images.githubusercontent.com/25652821/181870397-4c60a3b0-5b58-4117-a9ca-b9bdd1720c3c.png)\r\n\r\n# 导出到onnx\r\npaddle2onnx --model_dir inference/ --model_filename inference.pdmodel --params_filename inference.pdiparams --save_file focal2.onnx --opset_version 10 --enable_dev_version True --enable_onnx_checker True\r\n\r\n对于同一张图片输入，paddle的输出是：\r\n![image](https://user-images.githubusercontent.com/25652821/181870203-b7a10a75-e331-45ac-a37d-00b8a5d1bf4e.png)\r\n\r\n但是onnx的输出是：\r\n![image](https://user-images.githubusercontent.com/25652821/181870251-ba57b33d-d94e-4608-961a-9249bb60bcd9.png)\r\n\r\n我做的是130类的多标签分类器，两者输出的数值相差很大，经过sigmod之后标签概率大小排序，最大的是同样的，但是数值上明显差别很大。\r\n\r\nbtw，官方的例子https://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/en/quick_start/quick_start_multilabel_classification_en.md里面，使用NUS-WIDE-SCENE做多标签任务，最后的模型导出到onnx依旧会遇到这个问题。\r\n\r\n\r\n是我操作不对，还是有解决办法，希望尽快给一个答复。不行的话，我想我在下一周将转到使用pytorch来完成我的工作。\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "xxddccaa",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-07-30T03:16:56+00:00",
        "updated_at": "2023-02-24T08:00:34+00:00",
        "closed_at": "2022-11-29T06:49:00+00:00",
        "comments_count": [
            "xxddccaa",
            "xxddccaa",
            "xxddccaa",
            "cuicheng01",
            "xxddccaa",
            "xxddccaa",
            "xxddccaa",
            "cuicheng01",
            "cuicheng01",
            "xxddccaa",
            "cuicheng01",
            "xxddccaa",
            "xxddccaa",
            "cuicheng01",
            "xxddccaa",
            "phoenixliu666",
            "chennankuan",
            "xxddccaa",
            "xxddccaa",
            "phoenixliu666",
            "cuicheng01",
            "YSYS101010000"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2178,
        "title": "下载预训练模型",
        "body": "请问一下，\r\n![image](https://user-images.githubusercontent.com/87969070/182106910-eca80a29-c1d4-48c7-b0dc-016abfb7fcc1.png)\r\n该配置文件中的预训练模型哪有呢？\r\n",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-01T08:28:44+00:00",
        "updated_at": "2022-11-01T06:47:27+00:00",
        "closed_at": "2022-11-01T06:47:25+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2182,
        "title": "release/2.2特征学习部分特征图",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本：PaddleClas release/2.2\r\n\r\n![image](https://user-images.githubusercontent.com/34644177/182406716-48a598a6-b29b-408f-822c-f18968713708.png)\r\n如图所示，请问VehicleNeck执行Flatten()操作后输出向量尺寸是[bs, 512*14*14]吗？\r\n",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-02T15:02:23+00:00",
        "updated_at": "2022-11-08T06:46:35+00:00",
        "closed_at": "2022-11-08T06:46:32+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2185,
        "title": "无法找到相应文件",
        "body": "\r\nPaddleClas release/2.4和PaddlePaddle 2.3.1\r\nLinux\r\n 如Python3.7\r\nCUDA10.2/cuDNN 7.6.5\r\n \r\nPULC快速体验时\r\npaddleclas --model_name=person_exists --infer_imgs=pulc_demo_imgs/person_exists/objects365_01780782.jpg\r\n发生找不到图片问题，在训练测试数据集flower102时也发生找不到所在数据集文件\r\n",
        "state": "closed",
        "user": "hice1207",
        "closed_by": "hice1207",
        "created_at": "2022-08-04T10:10:29+00:00",
        "updated_at": "2022-08-30T05:59:04+00:00",
        "closed_at": "2022-08-05T02:29:29+00:00",
        "comments_count": [
            "RainFrost1",
            "hice1207",
            "cuicheng01",
            "hice1207",
            "TingquanGao",
            "hice1207",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2184,
        "title": "docker: failed to register layer: open /eddata/overlay2/2a3cadb118906de3d274d7fcaf6f8c1473e3c52d8d0576330ba7fc42e68d1983/committed: no such file or directory. ",
        "body": "\r\n\r\nubuntu18.04  python3.7   CUDA10.2/cuDNN 7.6.5 PaddlePaddle\r\n按照教程安装docker版本的paddleclas 提示错误docker: failed to register layer: open /eddata/overlay2/2a3cadb118906de3d274d7fcaf6f8c1473e3c52d8d0576330ba7fc42e68d1983/committed: no such file or directory.\r\n\r\n\r\n",
        "state": "closed",
        "user": "xiaomujiang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-04T10:00:56+00:00",
        "updated_at": "2022-11-08T06:46:35+00:00",
        "closed_at": "2022-11-08T06:46:33+00:00",
        "comments_count": [
            "RainFrost1",
            "cuicheng01",
            "xiaomujiang",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2187,
        "title": "转换最佳精度检测模型时出现错误，我使用了最新的桨克隆 2.5",
        "body": "当我转换为检测模型时，我得到了同样的错误,  , 我使用最新的桨克隆\r\n, 2022.5.9 Release PaddleOCR [release/2.5](https://github.com/PaddlePaddle/PaddleOCR/tree/release/2.5), 我该怎么办，这是我的错误\r\nPaddleOCR/tools/infer/utility.py\", line 317, in create_predictor\r\n    predictor = inference.create_predictor(config)\r\nValueError: (InvalidArgument) The inverse of Fused batch norm variance should be finite. Found nonfinite values! Please check batch_norm_55.w_2 \r\n  [Hint: Expected std::isfinite(variance_array[i]) == true, but received std::isfinite(variance_array[i]):0 != true:1.] (at /paddle/paddle/fluid/framework/ir/conv_bn_fuse_pass.cc:105)\r\n\r\n_Originally posted by @Zenmaster188 in https://github.com/PaddlePaddle/PaddleClas/issues/2169#issuecomment-1205294750_",
        "state": "closed",
        "user": "Zenmaster188",
        "closed_by": "Zenmaster188",
        "created_at": "2022-08-05T05:30:54+00:00",
        "updated_at": "2022-08-05T07:22:20+00:00",
        "closed_at": "2022-08-05T07:22:16+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2186,
        "title": "LCNet训练速度很慢约50分钟1个Epoch，请问这样正常吗？ ",
        "body": "使用ImageNet 1K数据集，发现单GPU一个Epoch需要50分钟，请问训练速度就是这样慢吗？\r\n\r\n训练环境信息：\r\nAIStudio 平台的后台训练环境\r\n  \r\n \r\n```python\r\n[2022/08/05 01:28:59] ppcls INFO: [Eval][Epoch 2][Avg]CELoss: 3.78812, loss: 3.78812, top1: 0.23302, top5: 0.47420\r\n[2022/08/05 01:28:59] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/best_model\r\n[2022/08/05 01:28:59] ppcls INFO: [Eval][Epoch 2][best metric: 0.23301999270915985]\r\n[2022/08/05 01:28:59] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/epoch_2\r\n[2022/08/05 01:28:59] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/latest\r\n[2022/08/05 01:29:06] ppcls INFO: [Train][Epoch 3/360][Iter: 0/2503]lr(LinearWarmup): 0.32006392, top1: 0.22070, top5: 0.44531, CELoss: 4.46140, loss: 4.46140, batch_cost: 1.15203s, reader_cost: 0.85557, ips: 444.43222 samples/s, eta: 11 days, 22:45:05\r\n[2022/08/05 01:29:15] ppcls INFO: [Train][Epoch 3/360][Iter: 10/2503]lr(LinearWarmup): 0.32070316, top1: 0.22106, top5: 0.44442, CELoss: 4.46500, loss: 4.46500, batch_cost: 0.77438s, reader_cost: 0.47391, ips: 661.17681 samples/s, eta: 8 days, 0:44:51\r\n...\r\n[2022/08/05 02:16:23] ppcls INFO: [Train][Epoch 3/360][Iter: 2500/2503]lr(LinearWarmup): 0.47987215, top1: 0.26237, top5: 0.49933, CELoss: 4.21598, loss: 4.21598, batch_cost: 1.13472s, reader_cost: 0.83854, ips: 451.21227 samples/s, eta: 11 days, 17:39:17\r\n[2022/08/05 02:16:27] ppcls INFO: [Train][Epoch 3/360][Avg]top1: 0.26239, top5: 0.49933, CELoss: 4.21592, loss: 4.21592\r\n[2022/08/05 02:16:29] ppcls INFO: [Eval][Epoch 3][Iter: 0/782]CELoss: 3.26093, loss: 3.26093, top1: 0.40625, top5: 0.51562, batch_cost: 1.05495s, reader_cost: 1.00962, ips: 60.66656 images/sec\r\n[2022/08/05 02:16:30] ppcls INFO: [Eval][Epoch 3][Iter: 10/782]CELoss: 4.17455, loss: 4.17455, top1: 0.31960, top5: 0.55398, batch_cost: 0.14513s, reader_cost: 0.12555, ips: 440.98926 images/sec\r\n...\r\n[2022/08/05 02:18:25] ppcls INFO: [Eval][Epoch 3][Iter: 770/782]CELoss: 3.11223, loss: 3.11223, top1: 0.30875, top5: 0.56688, batch_cost: 0.15140s, reader_cost: 0.13277, ips: 422.72105 images/sec\r\n[2022/08/05 02:18:26] ppcls INFO: [Eval][Epoch 3][Iter: 780/782]CELoss: 3.49495, loss: 3.49495, top1: 0.30864, top5: 0.56718, batch_cost: 0.15086s, reader_cost: 0.13223, ips: 424.24429 images/sec\r\n[2022/08/05 02:18:26] ppcls INFO: [Eval][Epoch 3][Avg]CELoss: 3.30073, loss: 3.30073, top1: 0.30862, top5: 0.56718\r\n[2022/08/05 02:18:27] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/best_model\r\n[2022/08/05 02:18:27] ppcls INFO: [Eval][Epoch 3][best metric: 0.30862000584602356]\r\n[2022/08/05 02:18:27] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/epoch_3\r\n[2022/08/05 02:18:27] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/latest\r\n[2022/08/05 02:18:33] ppcls INFO: [Train][Epoch 4/360][Iter: 0/2503]lr(LinearWarmup): 0.48006392, top1: 0.29492, top5: 0.56641, CELoss: 3.94345, loss: 3.94345, batch_cost: 1.13760s, reader_cost: 0.84150, ips: 450.07001 samples/s, eta: 11 days, 18:22:07\r\n```\r\n",
        "state": "closed",
        "user": "skywalk163",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-04T23:48:40+00:00",
        "updated_at": "2022-11-08T06:46:36+00:00",
        "closed_at": "2022-11-08T06:46:34+00:00",
        "comments_count": [
            "skywalk163",
            "RainFrost1",
            "cuicheng01",
            "skywalk163",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2188,
        "title": "训练PPLCNet X2_5，保存模型的时候报错",
        "body": "训练正常，在保存的时候保存，报错信息如下:\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/ubuntu/Desktop/Alex/PaddleClas/ppcls/engine/engine.py\", line 384, in train\r\n    save_student_model=True)\r\n  File \"/home/ubuntu/Desktop/Alex/PaddleClas/ppcls/utils/save_load.py\", line 176, in save_model\r\n    paddle.save([opt.state_dict() for opt in optimizer], model_path + \".pdopt\")\r\n  File \"/home/ubuntu/miniconda3/envs/paddle/lib/python3.7/site-packages/paddle/framework/io.py\", line 246, in save\r\n    \"expect dict, but received %s.\" % type(obj))\r\nNotImplementedError: Now only supports save state_dict of Layer or Optimizer, expect dict, but received <class 'list'>.\r\n\r\n只改动了config文件，没有其他操作，paddlepaddle版本为2.0",
        "state": "open",
        "user": "alexHxun",
        "closed_by": null,
        "created_at": "2022-08-05T15:17:29+00:00",
        "updated_at": "2024-02-26T04:28:37+00:00",
        "closed_at": null,
        "comments_count": [
            "alexHxun",
            "weisy11",
            "alexHxun"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2189,
        "title": "PaddleClas配置怎么添加损失函数的类别权重",
        "body": "现在有一个数据集标签分布不均衡，想通过添加类别权重的方式训练，PaddleClas的配置文件支持吗，如果支持的话是修改哪里？",
        "state": "closed",
        "user": "JiehangXie",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-07T05:19:58+00:00",
        "updated_at": "2022-11-08T06:46:38+00:00",
        "closed_at": "2022-11-08T06:46:35+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2190,
        "title": "paddle_serving僵尸进程，请问我显卡资源占了75%的时候，开启的这个paddleClas识别服务还是会变成僵尸进程defunct。到底是什么原因造成服务进程defunct的了？",
        "body": "\r\n请问我显卡资源占了75%的时候，开启的这个paddleClas识别服务还是会变成这样。到底是什么原因造成服务进程defunct的了？具体进程状态如下图",
        "state": "closed",
        "user": "chen960217",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-07T05:48:14+00:00",
        "updated_at": "2022-11-15T06:49:28+00:00",
        "closed_at": "2022-11-15T06:49:26+00:00",
        "comments_count": [
            "chen960217",
            "TingquanGao",
            "chen960217",
            "chen960217",
            "TingquanGao",
            "chen960217",
            "TingquanGao",
            "chen960217",
            "chen960217",
            "TingquanGao",
            "chen960217",
            "TingquanGao",
            "chen960217",
            "TingquanGao",
            "chen960217",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2191,
        "title": "用来判断图片模糊 或 清晰 没有效果",
        "body": "用的数据集：https://aistudio.baidu.com/aistudio/projectdetail/535801?channelType=0&channel=0\r\n![1](https://user-images.githubusercontent.com/6648329/183321865-00763ad3-c43b-4d33-847d-4c643d6a2926.png)\r\n![2](https://user-images.githubusercontent.com/6648329/183321873-eaf27e26-3cb9-4259-bcfd-a1ce51e694f8.png)\r\n![3](https://user-images.githubusercontent.com/6648329/183321876-34a86b70-71db-4892-8cf2-6e6fc7416223.png)\r\n\r\n![或是老是识别某个分类](https://user-images.githubusercontent.com/6648329/183329743-fe343540-0e3d-4aef-84f5-a1584a851618.png)\r\n\r\n老是识别某个分类，分不清楚是清晰 或 模糊，  都显示是 [{'class_ids': [0], 'scores': [0.8815], 'file_name': './images/mohu/img/qingXi.jpg', 'label_names': []}]\r\n",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-08-08T03:00:43+00:00",
        "updated_at": "2022-08-08T08:01:12+00:00",
        "closed_at": "2022-08-08T08:01:07+00:00",
        "comments_count": [
            "gg22mm",
            "weisy11",
            "gg22mm",
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2192,
        "title": "还有为什么导出模型没有deploy.yaml",
        "body": "python tools/export_model.py -c ./ppcls/configs/quick_start/professional/MobileNetV1_multilabel_st.yaml -o Global.pretrained_model=./weight/best_model_tongue -o Global.save_inference_dir=./inference_model\r\n\r\n\r\n还有为什么导出模型没有：deploy.yaml\r\n\r\n![5](https://user-images.githubusercontent.com/6648329/183331524-1fdc75b4-c8ad-45ca-bab6-f51ea36a771b.png)\r\n",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-08-08T03:17:43+00:00",
        "updated_at": "2022-08-08T08:42:30+00:00",
        "closed_at": "2022-08-08T08:40:50+00:00",
        "comments_count": [
            "weisy11",
            "gg22mm",
            "weisy11",
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2193,
        "title": "使用python tools/export_model.py  导出后模型推理效果不对",
        "body": "正常推理：\r\n![22](https://user-images.githubusercontent.com/6648329/183348631-4bfa0c20-c987-40e7-a96b-0a1a80736b55.png)\r\n\r\n使用inference 推理（与上面是同一张图片，效果确不一样）\r\n![11](https://user-images.githubusercontent.com/6648329/183348509-72236c5c-802c-4934-88f5-71ae1a226886.png)\r\n\r\n\r\n###########\r\n\r\n如果是多标签 MobileNetV1_multilabel.yaml 训练出来的话,  用 Paddle Inference 推理对应的配置是哪个呢：\r\n python  tools/train.py -c ./ppcls/configs/quick_start/professional/MobileNetV1_multilabel.yaml   \r\n \r\n推理我尝试过用：\r\n /deploy/python/inference_cls.yaml 和   /deploy/python/inference_cls_multilabel.yaml  都得不到相应该的结果\r\n\r\n\r\n我看文档没看到有讲:  MobileNetV1_multilabel.yaml   多标签的",
        "state": "closed",
        "user": "gg22mm",
        "closed_by": "gg22mm",
        "created_at": "2022-08-08T05:53:26+00:00",
        "updated_at": "2022-08-09T03:03:34+00:00",
        "closed_at": "2022-08-09T02:49:04+00:00",
        "comments_count": [
            "gg22mm"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2195,
        "title": "如何合并生成的log文件",
        "body": "由于我的模型是断点训练，所有每次重新加载模型的时候会重新生成log日志，在使用use_visualdl: True时候，如何将多个log合并起来。我在官方文档中没有看到如果合并log文件。\r\n",
        "state": "closed",
        "user": "Hxd8991",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-08T12:42:47+00:00",
        "updated_at": "2022-11-15T06:49:30+00:00",
        "closed_at": "2022-11-15T06:49:27+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2196,
        "title": "关于使用GeneralRecognition_PPLCNet_x2_5.yaml训练后，提取特征进行图片检索精度很差的问题",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release 最新，PaddlePaddle 2.0\r\n 2. 涉及的其他产品使用的版本号：无\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Ubuntu·18.04\r\n  b. Python版本号，python3.7.4\r\n  c. CUDA/cuDNN版本， CUDA11.0 CUDNN7.6\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n只修改了向量尺寸，数据集路径：\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n  eval_mode: retrieval\r\n  use_dali: False\r\n  to_static: False\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone: \r\n    name: PPLCNet_x2_5\r\n    pretrained: True\r\n    use_ssld: True\r\n  BackboneStopLayer:\r\n    name: \"flatten\"\r\n  Neck:\r\n    name: FC\r\n    embedding_size: 1280\r\n    class_num: 256\r\n  Head:\r\n    name: ArcMargin \r\n    embedding_size: 256\r\n    class_num: 250\r\n    margin: 0.2\r\n    scale: 30\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.04\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/\r\n      cls_label_path: ./dataset/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 32\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    Query:\r\n      dataset: \r\n        name: VeriWild\r\n        image_root: ./dataset/query/\r\n        cls_label_path: ./dataset//query.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: 224\r\n          - NormalizeImage:\r\n              scale: 0.00392157\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: ''\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 32\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\n    Gallery:\r\n      dataset: \r\n        name: VeriWild\r\n        image_root: ./dataset/gallery/\r\n        cls_label_path: ./dataset/gallery.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: 224\r\n          - NormalizeImage:\r\n              scale: 0.00392157\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: ''\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 32\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\nMetric:\r\n  Eval:\r\n    - Recallk:\r\n        topk: [1, 5]\r\n\r\n正常训练过程中，metric都有接近90%，训练完后，使用模型提取特征进行图片检索，评估准确率，结果非常不理想。。。。top1只有30%多\r\n\r\n请问哪里有问题吗？\r\n\r\n另外，想知道训练过程中，评估metric的方法是什么？类似于正常的分类准确率？ gallery和query集岂不是跟分类任务中的测试集，验证集没区别？\r\n还是说训练过程中的评估方法是使用该epoch训练生成的模型进行特征提取，生成数据库gallery,然后根据相似距离，计算query中所有图片正确检索的准确率？？\r\n\r\n希望有人能解答，如果 有描述的不清楚的地方，请指出",
        "state": "closed",
        "user": "alexHxun",
        "closed_by": "alexHxun",
        "created_at": "2022-08-10T02:54:26+00:00",
        "updated_at": "2024-07-24T10:49:04+00:00",
        "closed_at": "2022-08-12T08:46:10+00:00",
        "comments_count": [
            "RainFrost1",
            "alexHxun",
            "alexHxun",
            "chinesejunzai12"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2197,
        "title": "请问有没有针对人体特征提取的reid模型？还是我需要使用PPLCNet网络训练一个呢？",
        "body": "我在/PaddleClas/docs/images/reid/reid_overview.jpg 目录下看到了有关人体reId的相关图片，想请问一下有没有预训练的人体reid模型",
        "state": "open",
        "user": "PaulX1029",
        "closed_by": null,
        "created_at": "2022-08-10T06:14:15+00:00",
        "updated_at": "2024-02-26T04:28:36+00:00",
        "closed_at": null,
        "comments_count": [
            "PaulX1029",
            "PaulX1029",
            "HydrogenSulfate",
            "PaulX1029"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2202,
        "title": "图像识别中图像检索时Query和Gallery的cls_label_path文件如何生成？",
        "body": "icartoon数据集的Query和Gallery的cls_label_path文件如何生成",
        "state": "closed",
        "user": "Veiiling",
        "closed_by": "Veiiling",
        "created_at": "2022-08-11T10:51:00+00:00",
        "updated_at": "2022-08-12T09:59:54+00:00",
        "closed_at": "2022-08-12T09:59:49+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2206,
        "title": "UnboundLocalError: local variable 'fp' referenced before assignment",
        "body": "安全帽识别代码报错：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.4/docs/zh_CN/PULC/PULC_safety_helmet.md\r\n\r\n换了一个数据集就会报以上错误\r\n\r\n原因是PaddleClas\\ppcls\\metric\\metrics.py第201行fpr在赋值前被引用，换了个数据集就会报这个错误呢。不换数据集不会报这个错误，是因为代码没有考虑到数据量小于10000的情况嘛\r\n\r\n            if len(gt_neg_score_list) == 0 and tpr > max_tpr:\r\n                max_tpr = tpr\r\n                result = \"threshold: {}, fpr: {}, tpr: {:.5f}\".format(\r\n                    threshold, fpr, tpr)\r\n            fpr = np.sum(\r\n                gt_neg_score_list > threshold) / len(gt_neg_score_list)\r\n",
        "state": "closed",
        "user": "sweetboxwwy",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-16T06:58:27+00:00",
        "updated_at": "2022-12-27T06:52:35+00:00",
        "closed_at": "2022-12-27T06:52:32+00:00",
        "comments_count": [
            "RainFrost1",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2210,
        "title": "多标签图像分类训练，预测结果没有label_name",
        "body": " 1. PaddleClas版本：PaddleClas release/2.4\r\n 2. 文件是：/PaddleClas/blob/release/2.4/deploy/python/postprocess.py\r\n 3. \r\n![image](https://user-images.githubusercontent.com/111444479/185170539-5553ade1-6e04-4f7e-b254-5fc364b6c9cb.png)\r\n继承父类的初始化函数时没有传参topk、class_id_map_file到父类初始化函数，导致模型预测结果没有获取到映射文件的label_name(s)\r\n",
        "state": "closed",
        "user": "phoenixliu666",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-17T14:56:49+00:00",
        "updated_at": "2022-11-29T06:49:05+00:00",
        "closed_at": "2022-11-29T06:49:02+00:00",
        "comments_count": [
            "cuicheng01",
            "phoenixliu666",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2208,
        "title": "有没有替换backbone的详细指导？比如我在训练通用识别模型的时候",
        "body": "用的GeneralRecognition_PPLCNet_x2_5.yaml ，想把backbone替换成efficientnetB3，支不支持？如何改？\r\n\r\n我改了一下，报错：\r\n EfficientNet object has no attribute \"stop_after\"",
        "state": "closed",
        "user": "alexHxun",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-16T14:01:10+00:00",
        "updated_at": "2022-11-29T06:49:03+00:00",
        "closed_at": "2022-11-29T06:49:01+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2211,
        "title": "多标签图像分类，topk参数设置不为1，预测结果仍是只有1个预测值",
        "body": " 1. PaddleClas版本：PaddleClas release/2.4\r\n 2. ![image](https://user-images.githubusercontent.com/111444479/185180145-1316188b-8815-4f39-8cd6-91cc7bba8c9f.png)\r\n 继承父类的__call__方法，传入的multilabel参数为True会导致代码跳到else语句，结果也就是topk参数设置>1无效\r\n![image](https://user-images.githubusercontent.com/111444479/185180596-aa1051f4-02a2-4a0f-904c-467b77fd3dd0.png)\r\n\r\n",
        "state": "closed",
        "user": "phoenixliu666",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-17T15:32:08+00:00",
        "updated_at": "2022-11-29T06:49:06+00:00",
        "closed_at": "2022-11-29T06:49:03+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2216,
        "title": "如何使用yoloe训练主体检测",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "zhibin-hong",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-22T03:06:23+00:00",
        "updated_at": "2022-11-29T06:49:07+00:00",
        "closed_at": "2022-11-29T06:49:05+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2218,
        "title": "通过paddleclas训练好的模型，怎么通过paddleserving进行部署呢，文档的例子跑通了，但是自己的模型报错，有没有基于自己训练好的模型进行部署的文档",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "simplemrchen",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2022-08-22T05:57:58+00:00",
        "updated_at": "2025-03-04T09:19:09+00:00",
        "closed_at": "2025-03-04T06:35:52+00:00",
        "comments_count": [
            "weisy11",
            "dougzhi",
            "sunzhaoyang",
            "fanruifeng",
            "HaoLiuHust",
            "HaoLiuHust",
            "vikhil0609",
            "HaoLiuHust",
            "2018-Summer",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2222,
        "title": "训练模型时gpu无法被识别",
        "body": "_目前使用的是：paddlepaddle-gpu 2.1.3 和最新版本的paddleclas,\r\nwindows系统，显卡配有集显和3060\r\npython 3.7 cuda11.6 cudnn 8.4.1_\r\n\r\n在使用train训练模型时，出现gpu少于4的提示，调整batch等训练参数后仍然出现内存不足无法继续训练的情况。后发现训练过程中并没有调用gpu。\r\n指定gpu=“1”后提示gpu范围只有[0,1)，无法识别全显卡。\r\n求解！感谢！",
        "state": "closed",
        "user": "JHQY",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-23T00:57:34+00:00",
        "updated_at": "2022-11-29T06:49:08+00:00",
        "closed_at": "2022-11-29T06:49:06+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2223,
        "title": "如何修改PULC训练配置文件",
        "body": "Hi PaddleClas Team,\r\n我这边使用PULC进行分类，我图片的长度高度一般固定在35，但是宽度是不一定的，那训练和评估配置文件中ResizeImg应该怎么填写会比较好？ 我在使用原始的160,80效果不太理想\r\n",
        "state": "closed",
        "user": "ANDROIDTODO",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-23T07:12:10+00:00",
        "updated_at": "2022-11-29T06:49:09+00:00",
        "closed_at": "2022-11-29T06:49:07+00:00",
        "comments_count": [
            "cuicheng01",
            "ANDROIDTODO",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2230,
        "title": "请问主体检测的轻量模型配置文件在哪？",
        "body": "[picodet_PPLCNet_x2_5_mainbody_lite_v1.0_pretrained.pdparams](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/pretrain/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_pretrained.pdparams)\r\n如题，导出onnx时要用，但在repo下没找到。\r\n谢谢！",
        "state": "closed",
        "user": "BackT0TheFuture",
        "closed_by": "BackT0TheFuture",
        "created_at": "2022-08-24T15:51:16+00:00",
        "updated_at": "2022-08-26T15:32:01+00:00",
        "closed_at": "2022-08-26T15:31:58+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "BackT0TheFuture"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2234,
        "title": "图像识别服务部署C++ serving报错",
        "body": "参考的这个文档：\r\nhttps://gitee.com/paddlepaddle/PaddleClas/blob/release/2.4/docs/zh_CN/inference_deployment/paddle_serving_deploy.md\r\n\r\n图像识别服务部署Python serving成功，但是C++ serving 执行测试：python3 test_cpp_serving_client.py ,报错\r\n```\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nI0827 14:56:09.732882   538 naming_service_thread.cpp:202] brpc::policy::ListNamingService(\"127.0.0.1:9400\"): added 1\r\nW0827 14:56:09.752732   538 predictor.hpp:129] inference call failed, message: [E112]1/1 channels failed, fail_limit=1 [C0][E111]Fail to connect Socket{id=1 addr=127.0.0.1:9400} (0x0x558f976c7070): Connection refused [R1][E112]Fail to select server from list://127.0.0.1:9400 lb=la [R2][E112]Fail to select server from list://127.0.0.1:9400 lb=la\r\nI0827 14:56:09.852802   553 socket.cpp:2201] Checking Socket\r\n```\r\n\r\n看了一下，C++ serving启动的端口是9293和9294 ，但是test_cpp_serving_client.py文件中写的是：client.connect(['127.0.0.1:9400'])\r\n\r\n手工改成client.connect(['127.0.0.1:9293'])\r\n后，报错信息改为\r\n```\r\nI0827 14:50:38.149065 32165 general_model.cpp:490] [client]logid=0,client_cost=50.166ms,\r\nTraceback (most recent call last):\r\n  File \"test_cpp_serving_client.py\", line 118, in <module>\r\n    det_boxes = fetch_map[\"boxes\"]\r\nKeyError: 'boxes'\r\n```\r\n",
        "state": "closed",
        "user": "skywalk163",
        "closed_by": "skywalk163",
        "created_at": "2022-08-27T06:59:19+00:00",
        "updated_at": "2022-08-31T10:02:45+00:00",
        "closed_at": "2022-08-31T10:02:40+00:00",
        "comments_count": [
            "cuicheng01",
            "HydrogenSulfate",
            "skywalk163",
            "skywalk163"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2231,
        "title": "量化损失",
        "body": "对于图像识别任务，模型进行uint8量化后，会带来严重的精度损失吗？尤其在使用relu时？",
        "state": "closed",
        "user": "Veiiling",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-25T08:35:35+00:00",
        "updated_at": "2022-11-29T06:49:10+00:00",
        "closed_at": "2022-11-29T06:49:07+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2235,
        "title": "请问作者如何在eval的时候生成precisions, recalls, fscores值",
        "body": "作者您好，请问在evaluate的时候如何生成precisions, recalls, fscores值，我在metrics.py中看到def precision_recall_fscore(output, target):函数，想请问作者如何添加在网络中，输出这些值（precisions, recalls, fscores）\r\n",
        "state": "closed",
        "user": "Hxd8991",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-28T07:53:46+00:00",
        "updated_at": "2022-11-29T06:49:11+00:00",
        "closed_at": "2022-11-29T06:49:08+00:00",
        "comments_count": [
            "cuicheng01",
            "Hxd8991",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2237,
        "title": "按照教程来的，前向的时候就出错了",
        "body": "  File \"/media/shf/shf_moredian/Moredian/code/vedio_demo/paddleclas.py\", line 31, in <module>\r\n    from .ppcls.arch import backbone\r\nImportError: attempted relative import with no known parent package",
        "state": "closed",
        "user": "sssssshf",
        "closed_by": "TingquanGao",
        "created_at": "2022-08-29T10:24:45+00:00",
        "updated_at": "2023-03-23T13:23:32+00:00",
        "closed_at": "2022-08-30T06:52:13+00:00",
        "comments_count": [
            "TingquanGao",
            "sssssshf",
            "TingquanGao",
            "sssssshf",
            "zhanghangzzz"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2239,
        "title": "主体检测推理代码存在bug",
        "body": "代码位置：PaddleClas/deploy/python/predict_system.py 94-98行：\r\n`\r\n        # st1: get all detection results\r\n        results = self.det_predictor.predict(img)\r\n\r\n        # st2: add the whole image for recognition to improve recall\r\n        results = self.append_self(results, img.shape)\r\n`\r\n这里，首先将主体检测的检测结果放入results，然后为了提高精度，又添加了一张整图的shape。这样理论上没有问题，如果主体检测推理的bbox都不合适的话，整张图像送入特征提取模型一定会得到一个比较好的结果，因为索引库的编码都是整图编码。但是经过多次实验发现，主体检测大多数情况下性能都不错，这样的话检测到效果最好的图像主体分数一般接近1，但是整图的分数会更高，之后nms会将最好的bbox过滤掉，最后输出的可视化结果如下图所示：\r\n\r\n![image](https://user-images.githubusercontent.com/77494834/187343304-8ba1ce0b-d729-4965-bc58-49496c3c2488.png)\r\n\r\n\r\n删除 \r\n `# st2: add the whole image for recognition to improve recall\r\n  results = self.append_self(results, img.shape)`\r\n之后，可视化结果如下图所示：\r\n\r\n![image](https://user-images.githubusercontent.com/77494834/187343357-f44b1296-4c37-4380-a669-f729f0b012f1.png)\r\n\r\n\r\n这种做法其实导致的问题就是主体检测最好的那个bbox很多时候会被丢弃，改进策略如下：\r\n\r\n**一开始的results里面不要添加整图，当对所有的bbox都进行了一遍特征提取和比对之后，如果最好的score没有超过阈值，再使用整图做一次特征提取，这样只有主体检测模型真正没有检测到的时候才会输出一个整图的预测框，这样可以最大限度的利用好主体检测模型的推理结果。**\r\n",
        "state": "closed",
        "user": "Zhao-Yian",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-30T03:35:20+00:00",
        "updated_at": "2022-12-06T06:51:36+00:00",
        "closed_at": "2022-12-06T06:51:33+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2238,
        "title": "图像识别训练eval阶段mAP值为nan",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.4和PaddlePaddle 2.3.2\r\n 3. 训练环境信息\r\n  a. 具体操作系统，Windows\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本，  @如CUDA11.2/cuDNN 8.2\r\n 4. 使用ppcls/configs/Logo/ResNet50_ReID.yaml配置文件进行训练，仅修改数据文件以及batchsize，learningrate，评估过程中recall值输出正常，但map值为nan\r\n \r\n\r\n\r\n[2022/08/29 22:13:34] ppcls INFO: [Eval][Epoch 2][Avg]recall1: 0.05172, recall5: 0.20690, mAP: nan\r\n[2022/08/29 22:13:34] ppcls INFO: [Eval][Epoch 2][best metric: 0.08620689809322357]\r\n[2022/08/29 22:13:34] ppcls INFO: Already save model in ./output/LYC_fourth_logo_200e_L20.00007_REID_without_50train_1940+50/RecModel\\epoch_2\r\n[2022/08/29 22:13:34] ppcls INFO: Already save model in ./output/LYC_fourth_logo_200e_L20.00007_REID_without_50train_1940+50/RecModel\\latest\r\n[2022/08/29 22:13:45] ppcls INFO: [Train][Epoch 3/200][Iter: 0/7]lr(LinearWarmup): 0.00185714, CELoss: 38.80627, PairwiseCosface: 26.59665, loss: 65.40291, batch_cost: 10.28565s, reader_cost: 10.05277, ips: 6.22226 samples/s, eta: 3:57:35\r\n[2022/08/29 22:14:46] ppcls INFO: [Train][Epoch 3/200][Avg]CELoss: 35.17182, PairwiseCosface: 26.52682, loss: 61.69864\r\n[2022/08/29 22:14:54] ppcls INFO: gallery feature calculation process: [0/2]\r\n[2022/08/29 22:14:59] ppcls INFO: Build gallery done, all feat shape: [64, 512], begin to eval..\r\n[2022/08/29 22:15:09] ppcls INFO: query feature calculation process: [0/2]\r\n[2022/08/29 22:15:12] ppcls INFO: Build query done, all feat shape: [64, 512], begin to eval..\r\n[2022/08/29 22:15:12] ppcls INFO: re_ranking=False\r\n[2022/08/29 22:15:12] ppcls INFO: [Eval][Epoch 3][Avg]recall1: 0.03448, recall5: 0.29310, mAP: nan\r\n[2022/08/29 22:15:12] ppcls INFO: [Eval][Epoch 3][best metric: 0.08620689809322357]\r\n[2022/08/29 22:15:13] ppcls INFO: Already save model in ./output/LYC_fourth_logo_200e_L20.00007_REID_without_50train_1940+50/RecModel\\epoch_3\r\n[2022/08/29 22:15:13] ppcls INFO: Already save model in ./output/LYC_fourth_logo_200e_L20.00007_REID_without_50train_1940+50/RecModel\\latest\r\n[2022/08/29 22:15:23] ppcls INFO: [Train][Epoch 4/200][Iter: 0/7]lr(LinearWarmup): 0.00271429, CELoss: 28.42189, PairwiseCosface: 26.45329, loss: 54.87518, batch_cost: 10.23694s, reader_cost: 10.00255, ips: 6.25187 samples/s, eta: 3:55:16\r\n[2022/08/29 22:16:24] ppcls INFO: [Train][Epoch 4/200][Avg]CELoss: 27.01882, PairwiseCosface: 26.46839, loss: 53.48722\r\n[2022/08/29 22:16:33] ppcls INFO: gallery feature calculation process: [0/2]\r\n[2022/08/29 22:16:38] ppcls INFO: Build gallery done, all feat shape: [64, 512], begin to eval..\r\n[2022/08/29 22:16:47] ppcls INFO: query feature calculation process: [0/2]\r\n[2022/08/29 22:16:51] ppcls INFO: Build query done, all feat shape: [64, 512], begin to eval..\r\n[2022/08/29 22:16:51] ppcls INFO: re_ranking=False\r\n[2022/08/29 22:16:51] ppcls INFO: [Eval][Epoch 4][Avg]recall1: 0.05172, recall5: 0.29310, mAP: nan\r\n[2022/08/29 22:16:51] ppcls INFO: [Eval][Epoch 4][best metric: 0.08620689809322357]\r\n\r\n",
        "state": "open",
        "user": "lazyn1997",
        "closed_by": null,
        "created_at": "2022-08-29T14:27:57+00:00",
        "updated_at": "2024-02-26T04:28:33+00:00",
        "closed_at": null,
        "comments_count": [
            "lazyn1997",
            "lazyn1997"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2241,
        "title": "pat100k 标签不对",
        "body": "为什么百度盘的人体属性标签是不对的?\r\n我检查每一张图去核验标签 大概几十张图标签全部是错的是为啥? 还能用于训练?",
        "state": "closed",
        "user": "sssssshf",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-31T06:04:47+00:00",
        "updated_at": "2022-12-06T06:51:37+00:00",
        "closed_at": "2022-12-06T06:51:34+00:00",
        "comments_count": [
            "sssssshf",
            "cuicheng01",
            "sssssshf",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2242,
        "title": "看到test_cpp_serving_client.py里有一句大约没有用的话",
        "body": "在PaddleClas/deploy/paddleserving/recognition/test_cpp_serving_client.py文件中，导入库有这么一句\r\n第18行 ：`from paddle_serving_app.reader import *`\r\n\r\n我测试了一下，在这个文件中把这句注释掉是不会报错的。\r\n不太明白这句话存在的意义，请教一下。\r\n\r\n或者是 paddle_serving_app.reader里面的某些个函数会在一些语境下用到？\r\n\r\n",
        "state": "closed",
        "user": "skywalk163",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-31T13:22:55+00:00",
        "updated_at": "2022-12-06T06:51:38+00:00",
        "closed_at": "2022-12-06T06:51:35+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2243,
        "title": "能否提供AdaFace数据集的分割过程",
        "body": "AdaFace配置文件中提到的数据集需要在哪里下载啊，或者如何制作和分割数据集呢，有无参考demo？",
        "state": "closed",
        "user": "Zheng-Bicheng",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-08-31T16:31:17+00:00",
        "updated_at": "2022-12-06T06:51:39+00:00",
        "closed_at": "2022-12-06T06:51:36+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2246,
        "title": "从数据库一张张读图片，能用内存存放数据集么",
        "body": "请问我从数据库Mongo一张张读图片是要先写在硬盘image_root: ./dataset/flowers102/么，然后再进行训练，\r\n有谁知道这还能优化不，能用内存存放数据集嘛，PaddleClas训练时必须ResNet50_vd.yaml从硬盘吗",
        "state": "closed",
        "user": "Juruobudong",
        "closed_by": "HydrogenSulfate",
        "created_at": "2022-09-01T06:53:10+00:00",
        "updated_at": "2022-10-06T07:42:32+00:00",
        "closed_at": "2022-10-06T07:42:30+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2247,
        "title": "PaddleDetection主题检测的矩形框和PaddleCls主体检测不一致问题？",
        "body": "https://aistudio.baidu.com/aistudio/projectdetail/344560\r\n\r\n将示例中的通用主体检测模型替换为自己训练的主体检测模型后，最后的图像检索结果矩形框大多框住的是整个图片，没有框住物体主体。\r\n\r\n但是把自训练的主体检测模型直接做主体检测的推断是没问题的，请问问题出在什么地方呢？谢谢！\r\n\r\n",
        "state": "closed",
        "user": "jeomincham",
        "closed_by": "jeomincham",
        "created_at": "2022-09-01T07:31:12+00:00",
        "updated_at": "2022-09-02T09:36:06+00:00",
        "closed_at": "2022-09-02T09:35:49+00:00",
        "comments_count": [
            "zengshao0622",
            "jeomincham"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2259,
        "title": "请问类别少于5,训练-o Metric.Eval.TopkAcc.topk={}该怎么-o",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n二分类，三分类之类的\r\n。我是这样的，\" -o Metric.Train.TopkAcc.topk={} -o Metric.Eval.TopkAcc.topk={}\".format([1,class_num], [1,class_num])\r\n但不起作用，请问如何-o才对呢。因为一些原因不能直接改yaml，只能命令行-o,谢谢\r\n\r\n另外1629issue，https://github.com/PaddlePaddle/PaddleClas/issues/1629的解答也没了，问题之前的issue有回答，参见 https://github.com/PaddlePaddle/PaddleClas/issues/1625%EF%BC%9B 另外，对于二分类的情况，类别数设置为2\r\n",
        "state": "closed",
        "user": "Juruobudong",
        "closed_by": "Juruobudong",
        "created_at": "2022-09-06T00:47:02+00:00",
        "updated_at": "2022-09-08T14:44:43+00:00",
        "closed_at": "2022-09-08T14:44:39+00:00",
        "comments_count": [
            "TingquanGao",
            "Juruobudong"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2260,
        "title": "使用GPU训练的时候  利用率太低",
        "body": "\r\nnum_workers 设置16 但是还是单线程在载入数据  CPU使用率一致在25%\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/29864557/188530631-c57c976d-af9d-4b3a-ad87-f58a1eba177a.png)\r\n\r\n\r\n\r\n# global configs\r\nGlobal:\r\n  checkpoints: \r\n  pretrained_model: \"../pretrained/PPLCNet_x0_25_pretrained\"\r\n  output_dir: H:/jobs/2/3min\r\n  device: gpu\r\n  save_interval: 5\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 360\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 56, 56]\r\n  save_inference_dir: H:/jobs/2/3min\r\n# model architecture\r\nArch:\r\n  name: PPLCNet_x0_25\r\n  class_num: 5194\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00003\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: \"H:/jobs/2/3min/samples\"\r\n      cls_label_path: \"H:/jobs/2/3min/label-train.txt\"\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 56\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 640\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 16\r\n      use_shared_memory: False\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: \"H:/jobs/2/3min/samples\"\r\n      cls_label_path: \"H:/jobs/2/3min/label-val.txt\"\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 56\r\n        - CropImage:\r\n            size: 56\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 640\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 16\r\n      use_shared_memory: False\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n\r\n",
        "state": "closed",
        "user": "qwe7771",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-06T01:56:43+00:00",
        "updated_at": "2022-12-13T06:47:05+00:00",
        "closed_at": "2022-12-13T06:47:03+00:00",
        "comments_count": [
            "TingquanGao",
            "qwe7771",
            "cuicheng01",
            "qwe7771",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2265,
        "title": "人的属性与output的值匹配吗？！",
        "body": ">>> result\r\n[{'attributes': ['Male', 'Age18-60', 'Back', 'Glasses: False', 'Hat: False', 'HoldObjectsInFront: False', 'Backpack', 'Upper: LongSleeve UpperPlaid', 'Lower:  Trousers', 'No boots'], 'output': [0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1], 'filename': 'pulc_demo_imgs/person_attribute/090004.jpg'}] 在人的属性检测中，这个output的输出值和这个检测出的attributes有什么对应关系吗？分别表示什么属性呢？都没有任何的说明",
        "state": "closed",
        "user": "XingYuanWei",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-07T13:40:09+00:00",
        "updated_at": "2022-12-27T06:52:41+00:00",
        "closed_at": "2022-12-27T06:52:39+00:00",
        "comments_count": [
            "cuicheng01",
            "XingYuanWei",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2271,
        "title": "Understanding the output",
        "body": "`  {'attributes': 'Color: (yellow, prob: 0.9893478155136108), Type: (hatchback, prob: 0.9734099507331848)', 'output': [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]}`\r\n\r\nwhat does the hot encoding in the outmeans , 1 at certain places ?",
        "state": "closed",
        "user": "jaideep11061982",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-08T11:59:23+00:00",
        "updated_at": "2022-12-27T06:52:42+00:00",
        "closed_at": "2022-12-27T06:52:39+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2272,
        "title": "Build New Teacher/Student yml",
        "body": "@ZeyuChen @QingshuChen @procr @jacquesqiao @zhxfl \r\nCan we introduce new pair of Teacher/student models apart from what is provided in /configs/Imagenet/Distillition",
        "state": "closed",
        "user": "jaideep11061982",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-08T17:15:56+00:00",
        "updated_at": "2022-12-13T06:47:06+00:00",
        "closed_at": "2022-12-13T06:47:04+00:00",
        "comments_count": [
            "littletomatodonkey"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2276,
        "title": "请问各位大佬，PP-LCNet为什么使用两个SE??",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "zhangyoy",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-09T08:47:32+00:00",
        "updated_at": "2022-12-13T06:47:07+00:00",
        "closed_at": "2022-12-13T06:47:04+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2299,
        "title": "我修改了模型之后为什么用paddle.summary显示正常，而在训练时却出错了。",
        "body": "[2022/09/14 22:23:19] root INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2022/09/14 22:23:19] root INFO: Arch : \r\n[2022/09/14 22:23:19] root INFO:     class_num : 7\r\n[2022/09/14 22:23:19] root INFO:     name : DBSTDCNet1\r\n[2022/09/14 22:23:19] root INFO: DataLoader : \r\n[2022/09/14 22:23:19] root INFO:     Eval : \r\n[2022/09/14 22:23:19] root INFO:         dataset : \r\n[2022/09/14 22:23:19] root INFO:             cls_label_path : ./dataset/yan/val.txt\r\n[2022/09/14 22:23:19] root INFO:             image_root : ./dataset/yan/\r\n[2022/09/14 22:23:19] root INFO:             name : ImageNetDataset\r\n[2022/09/14 22:23:19] root INFO:             transform_ops : \r\n[2022/09/14 22:23:19] root INFO:                 DecodeImage : \r\n[2022/09/14 22:23:19] root INFO:                     channel_first : False\r\n[2022/09/14 22:23:19] root INFO:                     to_rgb : True\r\n[2022/09/14 22:23:19] root INFO:                 ResizeImage : \r\n[2022/09/14 22:23:19] root INFO:                     resize_short : 256\r\n[2022/09/14 22:23:19] root INFO:                 CropImage : \r\n[2022/09/14 22:23:19] root INFO:                     size : 224\r\n[2022/09/14 22:23:19] root INFO:                 NormalizeImage : \r\n[2022/09/14 22:23:19] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/09/14 22:23:19] root INFO:                     order : \r\n[2022/09/14 22:23:19] root INFO:                     scale : 1.0/255.0\r\n[2022/09/14 22:23:19] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/09/14 22:23:19] root INFO:         loader : \r\n[2022/09/14 22:23:19] root INFO:             num_workers : 1\r\n[2022/09/14 22:23:19] root INFO:             use_shared_memory : True\r\n[2022/09/14 22:23:19] root INFO:         sampler : \r\n[2022/09/14 22:23:19] root INFO:             batch_size : 8\r\n[2022/09/14 22:23:19] root INFO:             drop_last : False\r\n[2022/09/14 22:23:19] root INFO:             name : DistributedBatchSampler\r\n[2022/09/14 22:23:19] root INFO:             shuffle : False\r\n[2022/09/14 22:23:19] root INFO:     Train : \r\n[2022/09/14 22:23:19] root INFO:         dataset : \r\n[2022/09/14 22:23:19] root INFO:             batch_transform_ops : \r\n[2022/09/14 22:23:19] root INFO:                 MixupOperator : \r\n[2022/09/14 22:23:19] root INFO:                     alpha : 0.2\r\n[2022/09/14 22:23:19] root INFO:             cls_label_path : ./dataset/yan/train.txt\r\n[2022/09/14 22:23:19] root INFO:             image_root : ./dataset/yan/\r\n[2022/09/14 22:23:19] root INFO:             name : ImageNetDataset\r\n[2022/09/14 22:23:19] root INFO:             transform_ops : \r\n[2022/09/14 22:23:19] root INFO:                 DecodeImage : \r\n[2022/09/14 22:23:19] root INFO:                     channel_first : False\r\n[2022/09/14 22:23:19] root INFO:                     to_rgb : True\r\n[2022/09/14 22:23:19] root INFO:                 ResizeImage : \r\n[2022/09/14 22:23:19] root INFO:                     resize_short : 256\r\n[2022/09/14 22:23:19] root INFO:                 RandCropImage : \r\n[2022/09/14 22:23:19] root INFO:                     size : 224\r\n[2022/09/14 22:23:19] root INFO:                 RandFlipImage : \r\n[2022/09/14 22:23:19] root INFO:                     flip_code : 1\r\n[2022/09/14 22:23:19] root INFO:                 NormalizeImage : \r\n[2022/09/14 22:23:19] root INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2022/09/14 22:23:19] root INFO:                     order : \r\n[2022/09/14 22:23:19] root INFO:                     scale : 1.0/255.0\r\n[2022/09/14 22:23:19] root INFO:                     std : [0.229, 0.224, 0.225]\r\n[2022/09/14 22:23:19] root INFO:         loader : \r\n[2022/09/14 22:23:19] root INFO:             num_workers : 1\r\n[2022/09/14 22:23:19] root INFO:             use_shared_memory : True\r\n[2022/09/14 22:23:19] root INFO:         sampler : \r\n[2022/09/14 22:23:19] root INFO:             batch_size : 128\r\n[2022/09/14 22:23:19] root INFO:             drop_last : False\r\n[2022/09/14 22:23:19] root INFO:             name : DistributedBatchSampler\r\n[2022/09/14 22:23:19] root INFO:             shuffle : True\r\n[2022/09/14 22:23:19] root INFO: Global : \r\n[2022/09/14 22:23:19] root INFO:     checkpoints : None\r\n[2022/09/14 22:23:19] root INFO:     device : gpu\r\n[2022/09/14 22:23:19] root INFO:     epochs : 100\r\n[2022/09/14 22:23:19] root INFO:     eval_during_train : True\r\n[2022/09/14 22:23:19] root INFO:     eval_interval : 1\r\n[2022/09/14 22:23:19] root INFO:     image_shape : [1, 3, 224, 224]\r\n[2022/09/14 22:23:19] root INFO:     output_dir : ./output/\r\n[2022/09/14 22:23:19] root INFO:     pretrained_model : None\r\n[2022/09/14 22:23:19] root INFO:     print_batch_step : 30\r\n[2022/09/14 22:23:19] root INFO:     save_inference_dir : ./inference\r\n[2022/09/14 22:23:19] root INFO:     save_interval : 10\r\n[2022/09/14 22:23:19] root INFO:     use_visualdl : True\r\n[2022/09/14 22:23:19] root INFO: Infer : \r\n[2022/09/14 22:23:19] root INFO:     PostProcess : \r\n[2022/09/14 22:23:19] root INFO:         class_id_map_file : dataset/yan/label.txt\r\n[2022/09/14 22:23:19] root INFO:         name : Topk\r\n[2022/09/14 22:23:19] root INFO:         topk : 5\r\n[2022/09/14 22:23:19] root INFO:     batch_size : 10\r\n[2022/09/14 22:23:19] root INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2022/09/14 22:23:19] root INFO:     transforms : \r\n[2022/09/14 22:23:19] root INFO:         DecodeImage : \r\n[2022/09/14 22:23:19] root INFO:             channel_first : False\r\n[2022/09/14 22:23:19] root INFO:             to_rgb : True\r\n[2022/09/14 22:23:19] root INFO:         ResizeImage : \r\n[2022/09/14 22:23:19] root INFO:             resize_short : 256\r\n[2022/09/14 22:23:19] root INFO:         CropImage : \r\n[2022/09/14 22:23:19] root INFO:             size : 224\r\n[2022/09/14 22:23:19] root INFO:         NormalizeImage : \r\n[2022/09/14 22:23:19] root INFO:             mean : [0.485, 0.456, 0.406]\r\n[2022/09/14 22:23:19] root INFO:             order : \r\n[2022/09/14 22:23:19] root INFO:             scale : 1.0/255.0\r\n[2022/09/14 22:23:19] root INFO:             std : [0.229, 0.224, 0.225]\r\n[2022/09/14 22:23:19] root INFO:         ToCHWImage : None\r\n[2022/09/14 22:23:19] root INFO: Loss : \r\n[2022/09/14 22:23:19] root INFO:     Eval : \r\n[2022/09/14 22:23:19] root INFO:         CELoss : \r\n[2022/09/14 22:23:19] root INFO:             weight : 1.0\r\n[2022/09/14 22:23:19] root INFO:     Train : \r\n[2022/09/14 22:23:19] root INFO:         CELoss : \r\n[2022/09/14 22:23:19] root INFO:             epsilon : 0.1\r\n[2022/09/14 22:23:19] root INFO:             weight : 1.0\r\n[2022/09/14 22:23:19] root INFO: Metric : \r\n[2022/09/14 22:23:19] root INFO:     Eval : \r\n[2022/09/14 22:23:19] root INFO:         TopkAcc : \r\n[2022/09/14 22:23:19] root INFO:             topk : [1, 5]\r\n[2022/09/14 22:23:19] root INFO:     Train : None\r\n[2022/09/14 22:23:19] root INFO: Optimizer : \r\n[2022/09/14 22:23:19] root INFO:     lr : \r\n[2022/09/14 22:23:19] root INFO:         learning_rate : 0.001\r\n[2022/09/14 22:23:19] root INFO:         name : Cosine\r\n[2022/09/14 22:23:19] root INFO:     momentum : 0.9\r\n[2022/09/14 22:23:19] root INFO:     name : Momentum\r\n[2022/09/14 22:23:19] root INFO:     regularizer : \r\n[2022/09/14 22:23:19] root INFO:         coeff : 1e-05\r\n[2022/09/14 22:23:19] root INFO:         name : L2\r\n[2022/09/14 22:23:19] root INFO: profiler_options : None\r\n[2022/09/14 22:23:19] root INFO: train with paddle 2.2.2 and device CUDAPlace(0)\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:44: DeprecationWarning: NEAREST is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.NEAREST or Dither.NONE instead.\r\n  'nearest': Image.NEAREST,\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:45: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  'bilinear': Image.BILINEAR,\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:46: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  'bicubic': Image.BICUBIC,\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:47: DeprecationWarning: BOX is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BOX instead.\r\n  'box': Image.BOX,\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:48: DeprecationWarning: LANCZOS is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.LANCZOS instead.\r\n  'lanczos': Image.LANCZOS,\r\n/home/aistudio/work/PaddleClas/ppcls/data/preprocess/ops/operators.py:49: DeprecationWarning: HAMMING is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.HAMMING instead.\r\n  'hamming': Image.HAMMING\r\nW0914 22:23:20.629117   613 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.2, Runtime API Version: 10.1\r\nW0914 22:23:20.634636   613 device_context.cc:465] device: 0, cuDNN Version: 7.6.\r\n### **summary的shape 是正常的 到训练阶段就不对了。**\r\n[8, 32, 112, 112]\r\n[8, 64, 112, 112]\r\nout_eca [8, 128, 56, 56]\r\n[8, 128, 56, 56]\r\nout_eca [8, 256, 28, 28]\r\n[8, 128, 28, 28]\r\nout_eca [8, 256, 14, 14]\r\n[8, 256, 14, 14]\r\nout_eca [8, 512, 7, 7]\r\n-------------------------------------------------------------------------------\r\n\r\n===============================================================================\r\nTotal params: 221,699\r\nTrainable params: 210,243\r\nNon-trainable params: 11,456\r\n-------------------------------------------------------------------------------\r\nInput size (MB): 4.59\r\nForward/backward pass size (MB): 1034.44\r\nParams size (MB): 0.85\r\nEstimated Total Size (MB): 1039.88\r\n-------------------------------------------------------------------------------\r\n\r\n[2022/09/14 22:23:24] root WARNING: The training strategy in config files provided by PaddleClas is based on 4 gpus. But the number of gpus is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use config files in PaddleClas to train.\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/norm.py:653: UserWarning: When training, we now always track global mean and variance.\r\n  \"When training, we now always track global mean and variance.\")\r\n### 训练这里就开始出错了\r\n### [128, 32, 112, 112]\r\n[128, 64, 112, 112]\r\nout_eca [128, 128, 56, 56]\r\n[128, 128, 56, 56]\r\nout_eca [128, 256, 28, 28]\r\n[128, 128, 28, 28]\r\nout_eca [128, 256, 14, 14]\r\n[128, 256, 14, 14]\r\nout_eca [128, 512, 7, 7]\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/aistudio/work/PaddleClas/ppcls/engine/engine.py\", line 290, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/home/aistudio/work/PaddleClas/ppcls/engine/train/train.py\", line 63, in train_epoch\r\n    loss_dict[\"loss\"].backward()\r\n  File \"<decorator-gen-128>\", line 2, in backward\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 229, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 249, in backward\r\n    framework._dygraph_tracer())\r\nValueError: (InvalidArgument)  shape should have the save dim with perm, but received shape size is:4, perm size is:3.\r\n  [Hint: Expected shape.size() == perm.size(), but received shape.size():4 != perm.size():3.] (at /paddle/paddle/fluid/operators/transpose_op.cu.h:562)\r\n",
        "state": "closed",
        "user": "qqwantu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-14T14:26:54+00:00",
        "updated_at": "2022-12-27T06:52:43+00:00",
        "closed_at": "2022-12-27T06:52:40+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 2344
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2307,
        "title": "能否分享一下text_image_orientation识别的训练模型",
        "body": "该模型性能还是很强大的，但只提供了inference的模型，没有提供预训练的模型，由于要训练自己的数据，能否分享一下text_image_orientation识别的训练模型，非常感谢。\r\n\r\n另外如果有了您的预训练模型了，只需要在config中的\r\nGlobal：\r\n     pretrained_model:您提供的预训练模型地址\r\n\r\n进行修改就可以了吧。\r\n\r\n非常感谢您的答复。\r\n",
        "state": "closed",
        "user": "qiyuezhiguang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-15T14:32:36+00:00",
        "updated_at": "2023-01-31T06:41:50+00:00",
        "closed_at": "2023-01-31T06:41:48+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2300,
        "title": "文档image_recognition_pipeline/feature_extraction.md错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：如PaddleClas release/2.5\r\n \r\n文档image_recognition_pipeline/feature_extraction.md恢复训练部分关键字错误，文档中为-o Global.checkpoint，应该为-o Global.checkpoints",
        "state": "closed",
        "user": "lazyn1997",
        "closed_by": "HydrogenSulfate",
        "created_at": "2022-09-14T17:33:25+00:00",
        "updated_at": "2022-10-06T07:42:46+00:00",
        "closed_at": "2022-10-06T07:42:44+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2333,
        "title": "PaddleClas运行特征提取示例报错。",
        "body": "环境：\r\nPaddlePaddle docker：2.3.2-gpu-cuda11.2-cudnn8\r\nPaddleClas branch: release/2.5, installed from repo by `python setup.py install`\r\n\r\n问题描述：\r\n运行特征提取示例报错。\r\n运行命令：\r\n```bash\r\ncd deploy  # Under /pth/to/PaddleClas/deploy/\r\npython python/predict_rec.py -c configs/inference_rec.yaml -o Global.rec_inference_model_dir=\"../../deploy_cus/models/PPLCNetV2_base_ssld_infer\r\n```\r\n模型文件确认无误。\r\n补充说明：似乎和系统环境有关系：\r\n- 我在一台Ubuntu20.04的电脑上手动安装PaddlePaddle 2.3.2 + Python 3.7 + CUDA11.2 & cudnn8，用同样的PaddleClas分支，是可以正常运行上述命令的；\r\n- 但是在一台基于CentOS7定制的Linux的服务器（公司内部系统，CUDA配置相同）上重复上述过程就会报下面的错误；\r\n- 在同样的服务器上用上述PaddlePaddle docker，重复上述过程，依然会报下面的错误。\r\n\r\n报错信息：\r\n```bash\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\n2022-09-21 15:14:15 INFO: Loading faiss with AVX2 support.\r\n2022-09-21 15:14:15 INFO: Could not load library with AVX2 support due to:\r\nModuleNotFoundError(\"No module named 'faiss.swigfaiss_avx2'\")\r\n2022-09-21 15:14:15 INFO: Loading faiss.\r\n2022-09-21 15:14:15 INFO: Successfully loaded faiss.\r\n2022-09-21 15:14:15 INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-09-21 15:14:15 INFO: Global :\r\n2022-09-21 15:14:15 INFO:     batch_size : 1\r\n2022-09-21 15:14:15 INFO:     cpu_num_threads : 10\r\n2022-09-21 15:14:15 INFO:     enable_benchmark : True\r\n2022-09-21 15:14:15 INFO:     enable_mkldnn : True\r\n2022-09-21 15:14:15 INFO:     enable_profile : False\r\n2022-09-21 15:14:15 INFO:     gpu_mem : 8000\r\n2022-09-21 15:14:15 INFO:     infer_imgs : ./images/wangzai.jpg\r\n2022-09-21 15:14:15 INFO:     ir_optim : True\r\n2022-09-21 15:14:15 INFO:     rec_inference_model_dir : ../../deploy_cus/models/PPLCNetV2_base_ssld_infer\r\n2022-09-21 15:14:15 INFO:     use_fp16 : False\r\n2022-09-21 15:14:15 INFO:     use_gpu : False\r\n2022-09-21 15:14:15 INFO:     use_tensorrt : False\r\n2022-09-21 15:14:15 INFO: RecPostProcess : None\r\n2022-09-21 15:14:15 INFO: RecPreProcess :\r\n2022-09-21 15:14:15 INFO:     transform_ops :\r\n2022-09-21 15:14:15 INFO:         ResizeImage :\r\n2022-09-21 15:14:15 INFO:             backend : cv2\r\n2022-09-21 15:14:15 INFO:             interpolation : bilinear\r\n2022-09-21 15:14:15 INFO:             return_numpy : False\r\n2022-09-21 15:14:15 INFO:             size : [224, 224]\r\n2022-09-21 15:14:15 INFO:         NormalizeImage :\r\n2022-09-21 15:14:15 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-09-21 15:14:15 INFO:             order : hwc\r\n2022-09-21 15:14:15 INFO:             scale : 1.0/255.0\r\n2022-09-21 15:14:15 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-09-21 15:14:15 INFO:         ToCHWImage : None\r\nTraceback (most recent call last):\r\n  File \"python/predict_rec.py\", line 143, in <module>\r\n    main(config)\r\n  File \"python/predict_rec.py\", line 104, in main\r\n    rec_predictor = RecPredictor(config)\r\n  File \"python/predict_rec.py\", line 29, in __init__\r\n    config[\"Global\"][\"rec_inference_model_dir\"])\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddleclas-0.0.0-py3.7.egg/paddleclas/deploy/utils/predictor.py\", line 37, in __init__\r\n    args, inference_model_dir)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddleclas-0.0.0-py3.7.egg/paddleclas/deploy/utils/predictor.py\", line 100, in create_paddle_predictor\r\n    predictor = create_predictor(config)\r\nIndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)\r\n```",
        "state": "open",
        "user": "SunLoveSheep",
        "closed_by": null,
        "created_at": "2022-09-21T07:20:31+00:00",
        "updated_at": "2024-11-18T07:35:14+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "SunLoveSheep",
            "sxk000"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 2345
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 2346
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2338,
        "title": "CVPR2022中发表的Implicit Sample Extension for Unsupervised Person Re-Identification部分代码",
        "body": "您好，我在阅读了CVPR2022中Implicit Sample Extension for Unsupervised Person Re-Identification的论文，对您的ISE和PLI部分内容十分感兴趣，但是在论文中给出的github地址中并未能很好的找到相关的部分代码，希望您能够帮我指明一下这部分的代码在何处，十分感谢",
        "state": "closed",
        "user": "krmui",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-22T07:00:26+00:00",
        "updated_at": "2023-01-24T06:41:42+00:00",
        "closed_at": "2023-01-24T06:41:40+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2340,
        "title": "Where is the code for Mixformer ",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "htdepot",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-23T04:14:02+00:00",
        "updated_at": "2022-12-27T06:52:45+00:00",
        "closed_at": "2022-12-27T06:52:42+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2341,
        "title": "mixformer",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "punk1",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-23T08:30:45+00:00",
        "updated_at": "2022-12-27T06:52:46+00:00",
        "closed_at": "2022-12-27T06:52:43+00:00",
        "comments_count": [
            "punk1",
            "HydrogenSulfate"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2353,
        "title": "ppshitu导出picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer.tar问题",
        "body": "参考https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/quick_start/quick_start_recognition.md\r\n请问在部署的时候，如何导出picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer.tar？\r\n也就是怎么生成这个推理模型？\r\n",
        "state": "closed",
        "user": "alanzhai219",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2022-09-27T08:10:40+00:00",
        "updated_at": "2022-09-27T09:02:43+00:00",
        "closed_at": "2022-09-27T09:02:36+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2360,
        "title": "是否有网页版的库管理工具",
        "body": "能在web页面上远程管理资源库就好啦",
        "state": "closed",
        "user": "Tkwitty",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-09-29T02:54:08+00:00",
        "updated_at": "2023-01-03T06:49:11+00:00",
        "closed_at": "2023-01-03T06:49:08+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2358,
        "title": "预训练模型无法下载",
        "body": "\r\n在resnest.py里面给的resnest101预训练模型的下载链接，无法下载模型，请问这个有这个模型吗？\r\nhttps://paddle-imagenet-models-name.bj.bcebos.com/dygraph/ResNeSt101_pretrained.pdparams",
        "state": "open",
        "user": "ZiQiangXie",
        "closed_by": null,
        "created_at": "2022-09-29T01:37:13+00:00",
        "updated_at": "2024-02-26T04:28:31+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "ZiQiangXie"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2364,
        "title": "deploy 程序应在正确的位置 import 套件",
        "body": "以 ONNX runtime deploy PULC 语种分类模型時\r\n\r\n發現 python deploy 程序沒有在正确的位置 import 套件\r\n\r\n## 实作流程\r\n\r\n2022/10/07\r\n\r\n使用 docker image `python:3.7`\r\n\r\n使用最新 Release tag `v2.4.0`\r\n\r\n```shell\r\ngit clone https://github.com/PaddlePaddle/PaddleClas.git\r\ncd PaddleClas\r\ngit reset --hard v2.4.0\r\n```\r\n\r\n以 ONNX deploy\r\n要避免安装 paddleclas 和他的一大包 requirements \r\n\r\n```shell\r\npip install opencv-contrib-python-headless\r\npip install requests tqdm prettytable pillow six PyYAML\r\npip install onnxruntime==1.12.1 paddle2onnx==1.0.1\r\n```\r\n\r\n### language_classification_infer 模型下载\r\n\r\n```shell\r\ncd deploy\r\nmkdir models && cd models\r\nwget -nc https://paddleclas.bj.bcebos.com/models/PULC/language_classification_infer.tar && tar xf language_classification_infer.tar\r\ncd ..\r\n```\r\n\r\n### 转换 ONNX\r\n\r\n```shell\r\npaddle2onnx \\\r\n--model_dir=models/language_classification_infer/ \\\r\n--model_filename=inference.pdmodel \\\r\n--params_filename=inference.pdiparams \\\r\n--save_file=models/language_classification_infer/inference.onnx \\\r\n--opset_version=11 \\\r\n--enable_onnx_checker=True\r\n```\r\n\r\n### 预测\r\n\r\n```shell\r\npython python/predict_cls.py \\\r\n-c configs/PULC/language_classification/inference_language_classification.yaml \\\r\n-o Global.use_gpu=False \\\r\n-o Global.use_onnx=True\r\n```\r\n\r\n出错\r\n\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"python/predict_cls.py\", line 23, in <module>\r\n    from utils import logger\r\n  File \"/root/PaddleClas/deploy/utils/__init__.py\", line 4, in <module>\r\n    from . import predictor\r\n  File \"/root/PaddleClas/deploy/utils/predictor.py\", line 22, in <module>\r\n    from paddle.inference import Config\r\nModuleNotFoundError: No module named 'paddle'\r\n```\r\n\r\n用 onnxruntime 时不需要 paddle\r\n\r\n所以 import paddle 应该放在 `def create_paddle_predictor` 内\r\n\r\nutils/predictor.py  # 22\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/3a28ee29003621ecdb9fd4bb8633a681fb1f8ddf/deploy/utils/predictor.py#L22-L23\r\n\r\n```python=22\r\n# - from paddle.inference import Config\r\n# - from paddle.inference import create_predictor\r\n```\r\n\r\nutils/predictor.py  # 42\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/3a28ee29003621ecdb9fd4bb8633a681fb1f8ddf/deploy/utils/predictor.py#L42-L43\r\n\r\n```python=42\r\n    def create_paddle_predictor(self, args, inference_model_dir=None):\r\n        from paddle.inference import Config\r\n        from paddle.inference import create_predictor\r\n        if inference_model_dir is None:\r\n            inference_model_dir = args.inference_model_dir\r\n```\r\n\r\n多余的 import paddle\r\n\r\npython/postprocess.py  # 21\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/3a28ee29003621ecdb9fd4bb8633a681fb1f8ddf/deploy/python/postprocess.py#L21-L22\r\n\r\n```python=21\r\n# - import paddle\r\n# - import paddle.nn.functional as F\r\n```\r\n\r\n### 再预测\r\n\r\n```shell\r\npython python/predict_cls.py \\\r\n-c configs/PULC/language_classification/inference_language_classification.yaml \\\r\n-o Global.use_gpu=False \\\r\n-o Global.use_onnx=True\r\n```\r\n\r\n```shell\r\n2022-10-07 06:34:40 WARNING: A new filed (use_onnx) detected!\r\n2022-10-07 06:34:40 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-10-07 06:34:40 INFO: Global : \r\n2022-10-07 06:34:40 INFO:     batch_size : 1\r\n2022-10-07 06:34:40 INFO:     cpu_num_threads : 10\r\n2022-10-07 06:34:40 INFO:     enable_benchmark : True\r\n2022-10-07 06:34:40 INFO:     enable_mkldnn : False\r\n2022-10-07 06:34:40 INFO:     enable_profile : False\r\n2022-10-07 06:34:40 INFO:     gpu_mem : 8000\r\n2022-10-07 06:34:40 INFO:     infer_imgs : ./images/PULC/language_classification/word_35404.png\r\n2022-10-07 06:34:40 INFO:     inference_model_dir : ./models/language_classification_infer\r\n2022-10-07 06:34:40 INFO:     ir_optim : True\r\n2022-10-07 06:34:40 INFO:     use_fp16 : False\r\n2022-10-07 06:34:40 INFO:     use_gpu : False\r\n2022-10-07 06:34:40 INFO:     use_onnx : True\r\n2022-10-07 06:34:40 INFO:     use_tensorrt : False\r\n2022-10-07 06:34:40 INFO: PostProcess : \r\n2022-10-07 06:34:40 INFO:     SavePreLabel : \r\n2022-10-07 06:34:40 INFO:         save_dir : ./pre_label/\r\n2022-10-07 06:34:40 INFO:     Topk : \r\n2022-10-07 06:34:40 INFO:         class_id_map_file : ../ppcls/utils/PULC_label_list/language_classification_label_list.txt\r\n2022-10-07 06:34:40 INFO:         topk : 2\r\n2022-10-07 06:34:40 INFO:     main_indicator : Topk\r\n2022-10-07 06:34:40 INFO: PreProcess : \r\n2022-10-07 06:34:40 INFO:     transform_ops : \r\n2022-10-07 06:34:40 INFO:         ResizeImage : \r\n2022-10-07 06:34:40 INFO:             size : [160, 80]\r\n2022-10-07 06:34:40 INFO:         NormalizeImage : \r\n2022-10-07 06:34:40 INFO:             channel_num : 3\r\n2022-10-07 06:34:40 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-10-07 06:34:40 INFO:             order : \r\n2022-10-07 06:34:40 INFO:             scale : 0.00392157\r\n2022-10-07 06:34:40 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-10-07 06:34:40 INFO:         ToCHWImage : None\r\nWarning: If want to use your own label_dict, please input legal path!\r\nOtherwise label_names will be empty!\r\nTraceback (most recent call last):\r\n  File \"python/predict_cls.py\", line 153, in <module>\r\n    main(config)\r\n  File \"python/predict_cls.py\", line 134, in main\r\n    batch_results = cls_predictor.predict(batch_imgs)\r\n  File \"python/predict_cls.py\", line 99, in predict\r\n    input_feed={input_names: image})[0]\r\n  File \"/usr/local/lib/python3.7/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 200, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidArgument: [ONNXRuntimeError] : 2 : INVALID_ARGUMENT : Got invalid dimensions for input: x for the following indices\r\n index: 2 Got: 80 Expected: 160\r\n index: 3 Got: 160 Expected: 80\r\n Please fix either the inputs or the model.\r\n```\r\n\r\n修改後\r\n不使用 paddle 顺利运行\r\n到模型预测前\r\n但是发现 onnx 的 input shape  有问题 #2365 \r\n\r\n## 其他 \r\n\r\npillow 要求升级 API\r\n\r\ndeploy/python/preprocess.py  # 64\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/3a28ee29003621ecdb9fd4bb8633a681fb1f8ddf/deploy/python/preprocess.py#L64-L71\r\n\r\n```python=64\r\n        _pil_interp_from_str = {\r\n            'nearest': Image.Resampling.NEAREST,\r\n            'bilinear': Image.Resampling.BILINEAR,\r\n            'bicubic': Image.Resampling.BICUBIC,\r\n            'box': Image.Resampling.BOX,\r\n            'lanczos': Image.Resampling.LANCZOS,\r\n            'hamming': Image.Resampling.HAMMING\r\n        }\r\n```",
        "state": "closed",
        "user": "hirortw101",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-07T09:30:03+00:00",
        "updated_at": "2023-01-24T06:41:43+00:00",
        "closed_at": "2023-01-24T06:41:41+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2365,
        "title": "PULC language_classification 语种分类模型转 ONNX 预测时发生 input shape 错误",
        "body": "承 #2364\r\n\r\n以 ONNX runtime deploy PULC language_classification 语种分类模型時\r\n\r\n在 ONNX 预测时发生 input shape 错误\r\n\r\n## 实作流程\r\n\r\n2022/10/07\r\n\r\n使用 docker image `python:3.7`\r\n\r\n使用最新 Release tag `v2.4.0`\r\n\r\n```shell\r\ngit clone https://github.com/PaddlePaddle/PaddleClas.git\r\ncd PaddleClas\r\ngit reset --hard v2.4.0\r\n```\r\n\r\n以 ONNX deploy 要避免安装 paddleclas 和他的一大包 requirements\r\n\r\n```shell\r\npip install opencv-contrib-python-headless\r\npip install requests tqdm prettytable pillow six PyYAML\r\npip install onnxruntime==1.12.1 paddle2onnx==1.0.1\r\n```\r\n\r\n### language_classification_infer 模型下载\r\n\r\n```shell\r\ncd deploy\r\nmkdir models && cd models\r\nwget -nc https://paddleclas.bj.bcebos.com/models/PULC/language_classification_infer.tar && tar xf language_classification_infer.tar\r\ncd ..\r\n```\r\n\r\n### 转换 ONNX\r\n\r\n```shell\r\npaddle2onnx \\\r\n--model_dir=models/language_classification_infer/ \\\r\n--model_filename=inference.pdmodel \\\r\n--params_filename=inference.pdiparams \\\r\n--save_file=models/language_classification_infer/inference.onnx \\\r\n--opset_version=11 \\\r\n--enable_onnx_checker=True\r\n```\r\n\r\n### 预测\r\n\r\n```shell\r\npython python/predict_cls.py \\\r\n-c configs/PULC/language_classification/inference_language_classification.yaml \\\r\n-o Global.use_gpu=False \\\r\n-o Global.use_onnx=True\r\n```\r\n\r\n```shell\r\n2022-10-07 06:34:40 WARNING: A new filed (use_onnx) detected!\r\n2022-10-07 06:34:40 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-10-07 06:34:40 INFO: Global : \r\n2022-10-07 06:34:40 INFO:     batch_size : 1\r\n2022-10-07 06:34:40 INFO:     cpu_num_threads : 10\r\n2022-10-07 06:34:40 INFO:     enable_benchmark : True\r\n2022-10-07 06:34:40 INFO:     enable_mkldnn : False\r\n2022-10-07 06:34:40 INFO:     enable_profile : False\r\n2022-10-07 06:34:40 INFO:     gpu_mem : 8000\r\n2022-10-07 06:34:40 INFO:     infer_imgs : ./images/PULC/language_classification/word_35404.png\r\n2022-10-07 06:34:40 INFO:     inference_model_dir : ./models/language_classification_infer\r\n2022-10-07 06:34:40 INFO:     ir_optim : True\r\n2022-10-07 06:34:40 INFO:     use_fp16 : False\r\n2022-10-07 06:34:40 INFO:     use_gpu : False\r\n2022-10-07 06:34:40 INFO:     use_onnx : True\r\n2022-10-07 06:34:40 INFO:     use_tensorrt : False\r\n2022-10-07 06:34:40 INFO: PostProcess : \r\n2022-10-07 06:34:40 INFO:     SavePreLabel : \r\n2022-10-07 06:34:40 INFO:         save_dir : ./pre_label/\r\n2022-10-07 06:34:40 INFO:     Topk : \r\n2022-10-07 06:34:40 INFO:         class_id_map_file : ../ppcls/utils/PULC_label_list/language_classification_label_list.txt\r\n2022-10-07 06:34:40 INFO:         topk : 2\r\n2022-10-07 06:34:40 INFO:     main_indicator : Topk\r\n2022-10-07 06:34:40 INFO: PreProcess : \r\n2022-10-07 06:34:40 INFO:     transform_ops : \r\n2022-10-07 06:34:40 INFO:         ResizeImage : \r\n2022-10-07 06:34:40 INFO:             size : [160, 80]\r\n2022-10-07 06:34:40 INFO:         NormalizeImage : \r\n2022-10-07 06:34:40 INFO:             channel_num : 3\r\n2022-10-07 06:34:40 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-10-07 06:34:40 INFO:             order : \r\n2022-10-07 06:34:40 INFO:             scale : 0.00392157\r\n2022-10-07 06:34:40 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-10-07 06:34:40 INFO:         ToCHWImage : None\r\nWarning: If want to use your own label_dict, please input legal path!\r\nOtherwise label_names will be empty!\r\nTraceback (most recent call last):\r\n  File \"python/predict_cls.py\", line 153, in <module>\r\n    main(config)\r\n  File \"python/predict_cls.py\", line 134, in main\r\n    batch_results = cls_predictor.predict(batch_imgs)\r\n  File \"python/predict_cls.py\", line 99, in predict\r\n    input_feed={input_names: image})[0]\r\n  File \"/usr/local/lib/python3.7/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 200, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidArgument: [ONNXRuntimeError] : 2 : INVALID_ARGUMENT : Got invalid dimensions for input: x for the following indices\r\n index: 2 Got: 80 Expected: 160\r\n index: 3 Got: 160 Expected: 80\r\n Please fix either the inputs or the model.\r\n```\r\n\r\n发现 onnx 的 input shape 有问题\r\n\r\n#### 修改测试\r\n\r\n~~粗暴~~修改 input size\r\n\r\nconfigs/PULC/language_classification/inference_language_classification.yaml  # 18\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/3a28ee29003621ecdb9fd4bb8633a681fb1f8ddf/deploy/configs/PULC/language_classification/inference_language_classification.yaml#L18\r\n\r\n```yaml=18\r\n        size: [80, 160]\r\n```\r\n\r\n再预测\r\n\r\n```shell\r\npython python/predict_cls.py \\\r\n-c configs/PULC/language_classification/inference_language_classification.yaml \\\r\n-o Global.use_gpu=False \\\r\n-o Global.use_onnx=True\r\n```\r\n\r\n有东西\r\n\r\n```shell\r\nword_35404.png: class id(s): [4, 9], score(s): [0.88, 0.02], label_name(s): ['japan', 'latin']\r\n```\r\n\r\n但是 input 到 model 是變形图片\r\n\r\n![](https://i.imgur.com/COoQxDt.png)\r\n",
        "state": "closed",
        "user": "hirortw101",
        "closed_by": "hirortw101",
        "created_at": "2022-10-07T09:31:40+00:00",
        "updated_at": "2022-10-14T09:10:30+00:00",
        "closed_at": "2022-10-14T09:10:27+00:00",
        "comments_count": [
            "TingquanGao",
            "hirortw101"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2366,
        "title": "使用单通道的图片进行训练，无法导出模型",
        "body": "### 这是我的配置文件\r\n**我想将3通道的图片改成单通道的图片进行训练**\r\n![image](https://user-images.githubusercontent.com/102778714/194746853-10a70ecb-ebf8-40e6-9522-3d678c20b599.png)\r\n### 这是导出时候报错\r\n![image](https://user-images.githubusercontent.com/102778714/194747223-65e01ed2-674a-4846-984a-d950531852a2.png)\r\n",
        "state": "open",
        "user": "yuexiayiren159aaa",
        "closed_by": null,
        "created_at": "2022-10-09T08:48:43+00:00",
        "updated_at": "2022-11-18T06:46:30+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "yuexiayiren159aaa"
        ],
        "labels": [
            "documentation",
            "good first issue",
            "PP-LCNet"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2377,
        "title": "C++编译运行报错：The given version [11] is not supported, only version 1 to 7 is supported in this build.",
        "body": "PaddleClas 2.5\r\nPaddlePaddle 2.4.0\r\n操作系统：Windows11\r\nCUDA/cuDNN版本： CUDA11.6/cuDNN8.5\r\n\r\n源码：deploy/cpp ,无更改，正常编译，编译通过。\r\n问题：\r\n在运行时显示：\r\n![4_4ROM3@PA__LM75O} QRK3](https://user-images.githubusercontent.com/95566315/195543633-b8004bb7-8235-419a-9e5c-2a23255d7c31.png)\r\n\r\n无法定位错误。\r\n\r\n\r\n",
        "state": "open",
        "user": "ty01528",
        "closed_by": null,
        "created_at": "2022-10-13T08:27:32+00:00",
        "updated_at": "2024-02-26T04:28:30+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "ty01528",
            "ty01528"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2378,
        "title": "预训练模型",
        "body": "请问release/2.4版本有CSwinTransformer，PVTv2，MobileViT，VAN这几个系列的模型的预训练模型吗？配置文件里没找到。\r\n",
        "state": "closed",
        "user": "peiwenYe",
        "closed_by": "Evezerest",
        "created_at": "2022-10-14T02:13:08+00:00",
        "updated_at": "2022-12-23T06:08:30+00:00",
        "closed_at": "2022-12-23T06:08:28+00:00",
        "comments_count": [
            "TingquanGao",
            "peiwenYe",
            "TingquanGao"
        ],
        "labels": [
            "documentation",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2380,
        "title": "PaddleClas\\deploy\\python\\predict_rec.py\", line 23, in from utils import logger ImportError: cannot import name 'logger' from 'utils'",
        "body": "PaddleClas\\deploy\\python\\predict_rec.py\", line 23, in\r\nfrom utils import logger\r\nImportError: cannot import name 'logger' from 'utils'\r\n\r\n用的是paddleocr-2.6\r\nPaddleClas 2.4.0\r\n",
        "state": "closed",
        "user": "yangguangyu369",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-17T03:13:57+00:00",
        "updated_at": "2023-04-18T06:43:53+00:00",
        "closed_at": "2023-04-18T06:43:50+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2386,
        "title": "faiss-cpu==1.7.1.post2   ,不支持python3.10",
        "body": "faiss-cpu==1.7.1.post2   ,不支持python3.10\r\npython3.10安装 PaddleClas 2.4.3时 faiss-cpu==1.7.1.post2 出错\r\n",
        "state": "closed",
        "user": "yangguangyu369",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-18T02:42:27+00:00",
        "updated_at": "2023-01-24T06:41:44+00:00",
        "closed_at": "2023-01-24T06:41:42+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2388,
        "title": "PULC训练自己的分类模型，生成推理模型时，预测结果不符",
        "body": "使用PULC，通过修改person_exists下的yaml文件生成自己的分类模型后，在infer.py和predict_cls.py进行推理都没有问题，但当我使用export_model.py进行转换时，转换后使用paddleclas.PaddleClas加载转换后的模型进行推理时，不仅预测结果有很大的偏差，就连label_names也不对，由于我是0，1二分类，生成的标签变成了'tench, Tinca tinca', 'goldfish, Carassius auratus‘，并不是我原来的标签，但是我是按照https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_person_exists.md中6.1.1中的指示进行训练的，请问您知道怎么解决这个问题嘛\r\n训练中使用的yaml参数\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output_mask/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  start_eval_epoch: 10\r\n  epochs: 20\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 256, 128]\r\n  save_inference_dir: ./inference\r\n  # training model under @to_static\r\n  to_static: False\r\n  use_dali: False\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: PPLCNet_x1_0\r\n  class_num: 2\r\n  pretrained: True\r\n  use_ssld: True\r\n  use_sync_bn: True\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00004\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/mask_data/\r\n      cls_label_path: ./dataset/mask_data/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [256,128]\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - TimmAutoAugment:\r\n            prob: 0.0\r\n            config_str: rand-m9-mstd0.5-inc1\r\n            interpolation: bicubic\r\n            img_size: [256,128]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - RandomErasing:\r\n            EPSILON: 0.0\r\n            sl: 0.02\r\n            sh: 1.0/3.0\r\n            r1: 0.3\r\n            attempt: 10\r\n            use_log_aspect: True\r\n            mode: pixel\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 8\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ./dataset/mask_data/\r\n      cls_label_path: ./dataset/mask_data/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [256,128]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: deploy/images/PULC/person_exists/objects365_02035329.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n            size: [256,128]\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: ThreshOutput\r\n    threshold: 0.5\r\n    label_0: mask\r\n    label_1: nomask\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n  Eval:\r\n    - TprAtFpr:\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n\r\n使用这个yaml配置文件，是可以进行训练，并且使用infer.py进行推理时正确的，只有转换模型之后才出现错误",
        "state": "closed",
        "user": "ronghonghui",
        "closed_by": "ronghonghui",
        "created_at": "2022-10-18T08:41:27+00:00",
        "updated_at": "2023-04-11T15:55:11+00:00",
        "closed_at": "2022-10-18T10:08:41+00:00",
        "comments_count": [
            "ChengFengGu",
            "ronghonghui"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2394,
        "title": "PaddleX数据集格式，能通用吗",
        "body": "1. PaddleX数据集格式，能通用吗\r\n```\r\nlabels.txt\r\nxx1\r\nxx2\r\n\r\ntrain_list.txt\r\nxx1\\1.jpg 0\r\nxx2\\1.jpg 1\r\n\r\nval_list.txt\r\ntest_list\r\n```\r\n\r\n\r\n2. 另外我的数据集是\r\nXX1\r\nXX2\r\nXX3\r\nXX4\r\n文件夹\r\n\r\n在WIN中\r\n怎么转换为PaddleClas需要的格式\r\n\r\n\r\n\r\n3. PPHGNet_base.yaml 进行训练\r\n```\r\n\r\nInfer:\r\n  infer_imgs: E:\\XX1\\1.jpg\r\n    class_id_map_file: E:\\XX1\\labels.txt\r\n```\r\nlabels.txt 格式 和 默认的 imagenet1k_label_list.txt 不对",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "monkeycc",
        "created_at": "2022-10-18T12:40:12+00:00",
        "updated_at": "2022-12-03T08:00:52+00:00",
        "closed_at": "2022-12-03T06:18:17+00:00",
        "comments_count": [
            "zengshao0622",
            "monkeycc"
        ],
        "labels": [
            "status: WIP",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2395,
        "title": "WARNING: device:  . The installed Paddle is compiled with CUDNN 8.4, but CUDNN version in your machine is 8.2, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：paddleclas 2.4.3     paddlepaddle-gpu 2.3.2.post116\r\n 3. 训练环境信息：\r\n  a. 具体操作系统：Windows\r\n  b. Python版本号，anaconda  Python3.7\r\n  c. CUDA/cuDNN版本， cuda 11.6  ,  cudnn 8.4.0\r\n```\r\n\r\n\r\npython3 tools/infer.py \\\r\n    -c ppcls/configs/ImageNet/PPHGNet/PPHGNet_small.yaml \\\r\n    -o Global.pretrained_model=output/PPHGNet_small/best_model\r\n\r\n```\r\n\r\n提示 \r\n`WARNING: device:  . The installed Paddle is compiled with CUDNN 8.4, but CUDNN version in your machine is 8.2, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.`\r\n\r\ncudnn-windows-x86_64-8.4.0.27_cuda11.6-archive\r\n覆盖还是一样\r\n",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-19T01:33:19+00:00",
        "updated_at": "2023-01-24T06:41:45+00:00",
        "closed_at": "2023-01-24T06:41:43+00:00",
        "comments_count": [
            "zengshao0622",
            "monkeycc",
            "zengshao0622"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2399,
        "title": "最新分支release/2.5怎么训练PPShiTu的量化模型",
        "body": "请问，怎么在最新分支的代码中训练PPShiTu的量化模型，都没看到相关的配置文件，slim目录下的`GeneralRecognition_PPLCNet_x2_5_quantization.yaml`应该是PPShiTu V1的配置文件吧",
        "state": "closed",
        "user": "superdu12138",
        "closed_by": "superdu12138",
        "created_at": "2022-10-20T05:49:55+00:00",
        "updated_at": "2024-09-18T07:14:50+00:00",
        "closed_at": "2022-10-21T03:11:06+00:00",
        "comments_count": [
            "RainFrost1",
            "wenzhu2018",
            "wenzhu2018"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2396,
        "title": "层级分类",
        "body": "paddleclas 可以支持层级分类吗\r\n",
        "state": "closed",
        "user": "LeeLear",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-19T02:10:14+00:00",
        "updated_at": "2023-02-21T06:41:36+00:00",
        "closed_at": "2023-02-21T06:41:33+00:00",
        "comments_count": [
            "zengshao0622",
            "LeeLear",
            "weisy11"
        ],
        "labels": [
            "good first issue",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2402,
        "title": "报错 from .ppcls.arch import backbone",
        "body": "执行 python3.7 python/predict_system.py -c configs/inference_general.yaml -o Global.use_gpu=False\r\n报错：from .ppcls.arch import backbone\r\n我感觉像是github上下载的PaddleClas源码和PaddleClas的安装包冲突了，这个如何解决？\r\n我是win10 or win11",
        "state": "closed",
        "user": "xinyujituan",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-21T07:42:22+00:00",
        "updated_at": "2023-05-12T09:28:31+00:00",
        "closed_at": "2023-02-21T06:41:34+00:00",
        "comments_count": [
            "weisy11",
            "zhanghangzzz",
            "verseboys"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2404,
        "title": "Cant install paddleclas",
        "body": "Python 3.10\r\n\r\npip3 install paddleclas==2.2.1\r\nCollecting paddleclas==2.2.1\r\n  Using cached paddleclas-2.2.1-py3-none-any.whl (306 kB)\r\nCollecting prettytable\r\n  Using cached prettytable-3.4.1-py3-none-any.whl (26 kB)\r\nRequirement already satisfied: visualdl>=2.0.0b in c:\\users\\1\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (from paddleclas==2.2.1) (2.4.1)\r\nCollecting ujson\r\n  Using cached ujson-5.5.0-cp310-cp310-win_amd64.whl (37 kB)\r\nCollecting gast==0.3.3\r\n  Using cached gast-0.3.3-py2.py3-none-any.whl (9.7 kB)\r\nCollecting scikit-learn==0.23.2\r\n  Using cached scikit-learn-0.23.2.tar.gz (7.2 MB)\r\n  Installing build dependencies ... /\r\n... a lot of shits\r\n\r\n\r\n```\r\n       error: Command \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX86\\x64\\cl.exe /c /nologo /O2 /W3 /GL /DNDEBUG /MD \r\n\t   -DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 \r\n\t   -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\umath -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\npymath \r\n\t   -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\common -Inumpy\\core\\include \r\n\t   -Ibuild\\src.win-amd64-3.1\\numpy\\core\\include/numpy -Inumpy\\core\\src\\common -Inumpy\\core\\src -Inumpy\\core \r\n\t   -Inumpy\\core\\src\\npymath -Inumpy\\core\\src\\multiarray -Inumpy\\core\\src\\umath -Inumpy\\core\\src\\npysort \r\n\t   -IC:\\Users\\1\\AppData\\Local\\Programs\\Python\\Python310\\include \r\n\t   -IC:\\Users\\1\\AppData\\Local\\Programs\\Python\\Python310\\Include -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\common \r\n\t   -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\npymath -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\common \r\n\t   -Ibuild\\src.win-amd64-3.1\\numpy\\core\\src\\npymath -IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\include -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\ucrt -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\shared \r\n\t   -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\um \r\n\t   -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\winrt \r\n\t   -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\cppwinrt /Tcbuild\\src.win-amd64-3.1\\numpy\\core\\src\\multiarray\\scalartypes.c \r\n\t   /Fobuild\\temp.win-amd64-cpython-310\\Release\\build\\src.win-amd64-3.1\\numpy\\core\\src\\multiarray\\scalartypes.obj\" failed with exit status 2\r\n        [end of output]\r\n```\r\n\r\n        note: This error originates from a subprocess, and is likely not a problem with pip.\r\n      error: legacy-install-failure\r\n\r\n      Encountered error while trying to install package.\r\n\r\n      numpy\r\n\r\n      note: This is an issue with the package mentioned above, not pip.\r\n      hint: See above for output from the failure.\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: subprocess-exited-with-error\r\n\r\n× pip subprocess to install build dependencies did not run successfully.\r\n│ exit code: 1\r\n╰─> See above for output.\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\r\n",
        "state": "closed",
        "user": "JonhSilver",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2022-10-22T17:40:46+00:00",
        "updated_at": "2024-03-05T09:22:17+00:00",
        "closed_at": "2022-12-23T06:06:51+00:00",
        "comments_count": [
            "JonhSilver",
            "HydrogenSulfate",
            "JonhSilver",
            "HydrogenSulfate",
            "JonhSilver",
            "HydrogenSulfate",
            "weisy11",
            "githubmuziyi"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2407,
        "title": "人员属性服务部署问题",
        "body": "你好，我参考https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/deployment/image_classification/paddle_serving.md\r\n对人员属性预训练模型进行转化部署，但是失败了，报错如下：\r\n![image](https://user-images.githubusercontent.com/51695758/197485391-6130b10a-a662-4968-a91a-12a414f5399a.png)\r\n{'err_no': 5000, 'err_msg': '[imagenet] failed to predict. Log_id: 0  Raise_msg:  invalid arg list  ClassName: Op.process.<locals>.feed_fetch_list_check_helper  FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.', 'key': [], 'value': [], 'tensors': []}\r\n我的config.yml如下：\r\n![image](https://user-images.githubusercontent.com/51695758/197485621-c32040cd-ef13-4c89-bd37-68c6a8b91eea.png)\r\n你能帮我看下是哪的问题，谢谢\r\n这个是我的日志文件\r\n[log.txt](https://github.com/PaddlePaddle/PaddleClas/files/9850407/log.txt)\r\n[pipeline.log](https://github.com/PaddlePaddle/PaddleClas/files/9850246/pipeline.log)\r\n",
        "state": "open",
        "user": "gitmhg",
        "closed_by": null,
        "created_at": "2022-10-24T08:44:31+00:00",
        "updated_at": "2024-02-26T04:28:29+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "gitmhg",
            "TingquanGao",
            "gitmhg",
            "TingquanGao",
            "gitmhg"
        ],
        "labels": [
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2409,
        "title": "服务器部署中，request中需要传入其他参数，怎么改呀？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "Firestick-Xia",
        "closed_by": "Firestick-Xia",
        "created_at": "2022-10-24T10:30:27+00:00",
        "updated_at": "2022-10-25T08:33:51+00:00",
        "closed_at": "2022-10-25T08:33:49+00:00",
        "comments_count": [
            "TingquanGao",
            "Firestick-Xia",
            "HydrogenSulfate",
            "Firestick-Xia"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2412,
        "title": "RepVgg配置文件",
        "body": "请问RepVgg的配置文件在哪里呢？官方给的目录下没有找到\r\n![image](https://user-images.githubusercontent.com/37332773/197666345-9049966b-9dbb-4532-93a9-7966c0cf4466.png)\r\n\r\n",
        "state": "closed",
        "user": "peiwenYe",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-25T02:17:02+00:00",
        "updated_at": "2023-02-21T06:41:38+00:00",
        "closed_at": "2023-02-21T06:41:35+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2418,
        "title": "pulc模型python服务部署问题",
        "body": "我正在按部署文档部署人员属性模型python server ,服务能够正常启动，我i客户端提测出现一下问题：\r\nINFO 2022-10-28 13:59:48,868 [local_service_handler.py:197] Models(/opt/DS61/paddle/PaddleClas-release-2.5/deploy/models/person_exists_vd_serving) will be launched by device gpu. use_gpu:True, use_trt:False, use_lite:False, use_xpu:False, device_type:1, devices:[0], mem_optim:True, ir_optim:False, use_profile:False, thread_num:2, client_type:local_predictor, fetch_names:None, precision:fp32, use_calib:False, use_mkldnn:False, mkldnn_cache_capacity:0, mkldnn_op_list:None, mkldnn_bf16_op_list:None, use_ascend_cl:False, min_subgraph_size:3,is_set_dynamic_shape_info:False\r\nINFO 2022-10-28 13:59:48,868 [operator.py:1393] Init cuda env in process 0\r\nINFO 2022-10-28 13:59:48,868 [local_service_handler.py:233] GET_CLIENT : concurrency_idx=0, device_num=1\r\nINFO 2022-10-28 13:59:49,671 [local_predict.py:150] pdmodel_file_list:['/opt/DS61/paddle/PaddleClas-release-2.5/deploy/models/person_exists_vd_serving/inference.pdmodel'], pdiparams_file_list:['/opt/DS61/paddle/PaddleClas-release-2.5/deploy/models/person_exists_vd_serving/inference.pdiparams']\r\nINFO 2022-10-28 13:59:49,672 [local_predict.py:168] LocalPredictor load_model_config params: model_path:/opt/DS61/paddle/PaddleClas-release-2.5/deploy/models/person_exists_vd_serving, use_gpu:True, gpu_id:0, use_profile:False, thread_num:2, mem_optim:True, ir_optim:False, use_trt:False, use_lite:False, use_xpu:False, precision:fp32, use_calib:False, use_mkldnn:False, mkldnn_cache_capacity:0, mkldnn_op_list:None, mkldnn_bf16_op_list:None, use_feed_fetch_ops:False, use_ascend_cl:False, min_subgraph_size:3, dynamic_shape_info:{}\r\nINFO 2022-10-28 13:59:50,506 [operator.py:428] init_client, feed_list:['x'], fetch_list: ['prediction']\r\nINFO 2022-10-28 13:59:50,507 [operator.py:1415] [imagenet|0] Succ init\r\nINFO 2022-10-28 13:59:54,507 [pipeline_server.py:64] (log_id=0) inference request name:imagenet self.name:imagenet time:1666936794.5075152\r\nINFO 2022-10-28 13:59:54,508 [operator.py:1826] RequestOp unpack one request. log_id:0, clientip:             name:imagenet, method:prediction, time:1666936794.508803\r\nINFO 2022-10-28 13:59:54,509 [dag.py:379] (data_id=0 log_id=0) Succ Generate ID\r\nERROR 2022-10-28 13:59:54,531 [error_catch.py:106]\r\nLog_id: 0\r\nTraceback (most recent call last):\r\n  File \"/home/sysadmin/miniconda3/envs/byom/lib/python3.6/site-packages/paddle_serving_server/pipeline/error_catch.py\", line 97, in wrapper\r\n    res = func(*args, **kw)\r\n  File \"/home/sysadmin/miniconda3/envs/byom/lib/python3.6/site-packages/paddle_serving_server/pipeline/error_catch.py\", line 160, in wrapper\r\n    raise CustomException(CustomExceptionCode.INPUT_PARAMS_ERROR, \"invalid arg list: {}\".format(invalid_argument_list), True)\r\npaddle_serving_server.pipeline.error_catch.CustomException:\r\n        exception_code: 5000\r\n        exception_type: INPUT_PARAMS_ERROR\r\n        **error_msg: invalid arg list: ['feed_batch']**\r\n        is_send_to_user: True\r\nClassname: Op.process.<locals>.feed_fetch_list_check_helper\r\nFunctionName: feed_fetch_list_check_helper\r\n**ERROR 2022-10-28 13:59:54,531 [operator.py:1101] [imagenet] failed to predict. Log_id: 0  Raise_msg:  invalid arg list  ClassName: Op.process.<locals>.feed_fetch_list_check_helper  FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.\r\nINFO 2022-10-28 13:59:54,531 [operator.py:1488] prometheus inf count +1\r\nERROR 2022-10-28 13:59:54,534 [dag.py:420] (data_id=0 log_id=0) Failed to predict: [imagenet] failed to predict. Log_id: 0  Raise_msg:  invalid arg list  ClassName: Op.process.<locals>.feed_fetch_list_check_helper  FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.**\r\n\r\n",
        "state": "closed",
        "user": "gitmhg",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-28T06:14:20+00:00",
        "updated_at": "2023-06-16T07:46:46+00:00",
        "closed_at": "2023-04-18T06:43:51+00:00",
        "comments_count": [
            "cuicheng01",
            "gitmhg",
            "cuicheng01",
            "sunzhaoyang",
            "fanruifeng",
            "2018-Summer"
        ],
        "labels": [
            "status: WIP",
            "Feature request",
            "status/close",
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2424,
        "title": "使用paddleseving部署shitu，一次请求多张图片，det模型耗时随图片数量线性增加",
        "body": "请求代码如下所示：\r\n`imgpath = \"../../drink_dataset_v1.0/test_images/001.jpeg\"\r\n\r\ndef cv2_to_base64(image):\r\n    return base64.b64encode(image).decode('utf8')\r\n\r\nif __name__ == \"__main__\":\r\n    url = \"http://127.0.0.1:18081/recognition/prediction\"\r\n\r\n    with open(os.path.join(\".\",  imgpath), 'rb') as file:\r\n        image_data1 = file.read()\r\n    image = cv2_to_base64(image_data1)\r\n    data = {\"key\": [\"image0xxxx\",\"image1xx\",\"image2x\",\"image3x\",\"image4\"], \"value\": [image]*5}\r\n    data = {\"key\": [\"image0xxxx\"], \"value\": [image]}\r\n    for i in range(1):\r\n        r = requests.post(url=url, data=json.dumps(data))\r\n        print(r.json())`\r\n对比了一张图片和五张图片，1是20ms，5张是50ms，10张大概是100ms：\r\n一张：\r\n2022-10-28 20:18:54,831 Op(det):\r\n2022-10-28 20:18:54,831 \tin[103813.24 ms]\r\n2022-10-28 20:18:54,831 \tprep[12.466 ms]\r\n2022-10-28 20:18:54,831 \tmidp[19.438 ms]\r\n2022-10-28 20:18:54,831 \tpostp[0.154 ms]\r\n2022-10-28 20:18:54,831 \tout[0.705 ms]\r\n2022-10-28 20:18:54,831 \tidle[0.9996912928849077]\r\n五张：\r\n2022-10-28 20:17:04,702 Op(det):\r\n2022-10-28 20:17:04,702 \tin[435137.036 ms]\r\n2022-10-28 20:17:04,702 \tprep[58.18 ms]\r\n2022-10-28 20:17:04,702 \tmidp[49.842 ms]\r\n2022-10-28 20:17:04,702 \tpostp[0.391 ms]\r\n2022-10-28 20:17:04,703 \tout[1.503 ms]\r\n\r\n配置文件：\r\n`#worker_num, 最大并发数。当build_dag_each_worker=True时, 框架会创建worker_num个进程，每个进程内构建grpcSever和DAG\r\n##当build_dag_each_worker=False时，框架会设置主线程grpc线程池的max_workers=worker_num\r\nworker_num: 1\r\n\r\n#http端口, rpc_port和http_port不允许同时为空。当rpc_port可用且http_port为空时，不自动生成http_port\r\nhttp_port: 18081\r\nrpc_port: 9994\r\n\r\ndag:\r\n    #op资源类型, True, 为线程模型；False，为进程模型\r\n    is_thread_op: False\r\n    use_profile: True\r\n    \r\n    tracer:\r\n        interval_s: 10\r\nop:\r\n    rec:\r\n        #并发数，is_thread_op=True时，为线程并发；否则为进程并发\r\n        concurrency: 1\r\n\r\n        #当op配置没有server_endpoints时，从local_service_conf读取本地服务配置\r\n        local_service_conf:\r\n\r\n            #uci模型路径\r\n            model_config: ../../models/general_PPLCNet_x2_5_lite_v1.0_serving\r\n\r\n            #计算硬件类型: 空缺时由devices决定(CPU/GPU)，0=cpu, 1=gpu, 2=tensorRT, 3=arm cpu, 4=kunlun xpu\r\n            device_type: 1\r\n\r\n            #计算硬件ID，当devices为\"\"或不写时为CPU预测；当devices为\"0\", \"0,1,2\"时为GPU预测，表示使用的GPU卡\r\n            devices: \"0\" # \"0,1\"\r\n\r\n            #client类型，包括brpc, grpc和local_predictor.local_predictor不启动Serving服务，进程内预测\r\n            client_type: local_predictor\r\n\r\n            #Fetch结果列表，以client_config中fetch_var的alias_name为准\r\n            fetch_list: [\"features\"]\r\n\r\n    det:\r\n        concurrency: 1\r\n        local_service_conf:\r\n            client_type: local_predictor\r\n            device_type: 1\r\n            devices: '0'\r\n            fetch_list:\r\n            - save_infer_model/scale_0.tmp_1\r\n            model_config: ../../models/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_serving/\r\n`",
        "state": "closed",
        "user": "yywangfei",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-28T12:20:22+00:00",
        "updated_at": "2023-02-21T06:41:39+00:00",
        "closed_at": "2023-02-21T06:41:36+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close",
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2432,
        "title": "UnboundLocalError: local variable 'fpr' referenced before assignment",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本git \r\n   release/2.5\r\n 3. 涉及的其他产品使用的版本号：\r\n  无\r\n 5. 训练环境信息：\r\n  a. 具体操作系统=Linux \r\n  b. Python版本号=Python3.9\r\n  c. CUDA/cuDNN版本=CUDA11.6、cuDNN 8.4\r\n\r\n代码报错\r\n```2022/10/31 14:35:12] ppcls INFO: [Train][Epoch 10/20][Avg]top1: 0.88217, top2: 1.00000, CELoss: 0.27312, loss: 0.27312\r\nTraceback (most recent call last):\r\n  File \"/home/r1/PaddleClas/tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/r1/PaddleClas/ppcls/engine/engine.py\", line 372, in train\r\n    acc = self.eval(epoch_id)\r\n  File \"/home/r1/anaconda3/envs/paddle_env/lib/python3.9/site-packages/decorator.py\", line 232, in fun\r\n    return caller(func, *(extras + args), **kw)\r\n  File \"/home/r1/anaconda3/envs/paddle_env/lib/python3.9/site-packages/paddle/fluid/dygraph/base.py\", line 354, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/r1/PaddleClas/ppcls/engine/engine.py\", line 451, in eval\r\n    eval_result = self.eval_func(self, epoch_id)\r\n  File \"/home/r1/PaddleClas/ppcls/engine/evaluation/classification.py\", line 157, in classification_eval    metric_msg += \", {}\".format(engine.eval_metric_func.avg_info)\r\n  File \"/home/r1/PaddleClas/ppcls/metric/__init__.py\", line 53, in avg_info\r\n    return \", \".join([metric.avg_info for metric in self.metric_func_list])\r\n  File \"/home/r1/PaddleClas/ppcls/metric/__init__.py\", line 53, in <listcomp>\r\n    return \", \".join([metric.avg_info for metric in self.metric_func_list])\r\n  File \"/home/r1/PaddleClas/ppcls/metric/metrics.py\", line 208, in avg_info\r\n    threshold, fpr, tpr)\r\n```\r\n\r\n问题代码截图(PaddleClas/ppcls/metric/metrics.py line 208, in avg_info)\r\n![image](https://user-images.githubusercontent.com/8815759/198947813-ef81f57f-ac70-434b-91e4-5c64b68e42de.png)\r\n",
        "state": "closed",
        "user": "dddrecall",
        "closed_by": "Evezerest",
        "created_at": "2022-10-31T06:48:05+00:00",
        "updated_at": "2022-11-21T06:01:11+00:00",
        "closed_at": "2022-11-21T06:01:09+00:00",
        "comments_count": [
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2419,
        "title": "加载模型",
        "body": "导出inference模型后怎么使用paddle.load()加载模型？\r\n![_ T84OGR{F977D92GP1QDT1](https://user-images.githubusercontent.com/53975909/198541980-1bde334d-1f02-4af5-bc4d-ad4dbdef1a7f.png)\r\n",
        "state": "closed",
        "user": "Monday-Leo",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-10-28T08:30:23+00:00",
        "updated_at": "2023-01-31T06:41:52+00:00",
        "closed_at": "2023-01-31T06:41:50+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2433,
        "title": "人体属性识别扩展其他的属性",
        "body": "首先，感谢大佬分享了PAR模型。我尝试了一下网站，效果相当不错。\r\n[https://ai.baidu.com/tech/body/attr](https://ai.baidu.com/tech/body/attr)\r\n\r\n测试中我发现网站的输出类似\r\n`\"person_info\": [\r\n\t\t{\r\n\t\t\t\"attributes\": {\r\n\t\t\t\t\"orientation\": {\r\n\t\t\t\t\t\"score\": 0.99993073940277,\r\n\t\t\t\t\t\"name\": \"右侧面\"\r\n\t\t\t\t},\r\n\t\t\t\t\"gender\": {\r\n\t\t\t\t\t\"score\": 0.99729353189468,\r\n\t\t\t\t\t\"name\": \"女性\"\r\n\t\t\t\t},\r\n\t\t\t\t\"umbrella\": {\r\n\t\t\t\t\t\"score\": 0.99989748001099,\r\n\t\t\t\t\t\"name\": \"未打伞\"\r\n\t\t\t\t},\r\n\t\t\t\t\"lower_color\": {\r\n\t\t\t\t\t\"score\": 0.98367667198181,\r\n\t\t\t\t\t\"name\": \"蓝\"\r\n\t\t\t\t},\r\n\t\t\t\t\"face_mask\": {\r\n\t\t\t\t\t\"score\": 0.99999898672104,\r\n\t\t\t\t\t\"name\": \"戴口罩\"\r\n\t\t\t\t},\r\n\t\t\t\t\"smoke\": {\r\n\t\t\t\t\t\"score\": 0.99913018941879,\r\n\t\t\t\t\t\"name\": \"未吸烟\"\r\n\t\t\t\t},\r\n\t\t\t\t\"bag\": {\r\n\t\t\t\t\t\"score\": 0.96256989240646,\r\n\t\t\t\t\t\"name\": \"无背包\"\r\n\t\t\t\t},\r\n\t\t\t\t\"upper_wear\": {\r\n\t\t\t\t\t\"score\": 0.94788938760757,\r\n\t\t\t\t\t\"name\": \"长袖\"\r\n\t\t\t\t},\r\n\t\t\t\t\"is_human\": {\r\n\t\t\t\t\t\"score\": 0.99996364116669,\r\n\t\t\t\t\t\"name\": \"正常人体\"\r\n\t\t\t\t},\r\n\t\t\t\t\"vehicle\": {\r\n\t\t\t\t\t\"score\": 0.99995183944702,\r\n\t\t\t\t\t\"name\": \"无交通工具\"\r\n\t\t\t\t},\r\n\t\t\t\t\"glasses\": {\r\n\t\t\t\t\t\"score\": 0.87400287389755,\r\n\t\t\t\t\t\"name\": \"无眼镜\"\r\n\t\t\t\t},\r\n\t\t\t\t\"headwear\": {\r\n\t\t\t\t\t\"score\": 0.75554066896439,\r\n\t\t\t\t\t\"name\": \"普通帽\"\r\n\t\t\t\t},\r\n\t\t\t\t\"upper_wear_fg\": {\r\n\t\t\t\t\t\"score\": 0.99537992477417,\r\n\t\t\t\t\t\"name\": \"风衣\"\r\n\t\t\t\t},\r\n\t\t\t\t\"upper_wear_texture\": {\r\n\t\t\t\t\t\"score\": 0.9064017534256,\r\n\t\t\t\t\t\"name\": \"纯色\"\r\n\t\t\t\t},\r\n\t\t\t\t\"upper_cut\": {\r\n\t\t\t\t\t\"score\": 0.99869328737259,\r\n\t\t\t\t\t\"name\": \"无上方截断\"\r\n\t\t\t\t},\r\n\t\t\t\t\"occlusion\": {\r\n\t\t\t\t\t\"score\": 0.99969339370728,\r\n\t\t\t\t\t\"name\": \"无遮挡\"\r\n\t\t\t\t},\r\n\t\t\t\t\"lower_cut\": {\r\n\t\t\t\t\t\"score\": 0.99461853504181,\r\n\t\t\t\t\t\"name\": \"无下方截断\"\r\n\t\t\t\t},\r\n\t\t\t\t\"cellphone\": {\r\n\t\t\t\t\t\"score\": 0.99999898672104,\r\n\t\t\t\t\t\"name\": \"看手机\"\r\n\t\t\t\t},\r\n\t\t\t\t\"carrying_item\": {\r\n\t\t\t\t\t\"score\": 0.98618221282959,\r\n\t\t\t\t\t\"name\": \"无手提物\"\r\n\t\t\t\t},\r\n\t\t\t\t\"age\": {\r\n\t\t\t\t\t\"score\": 0.98111075162888,\r\n\t\t\t\t\t\"name\": \"青年\"\r\n\t\t\t\t},\r\n\t\t\t\t\"lower_wear\": {\r\n\t\t\t\t\t\"score\": 0.99056619405746,\r\n\t\t\t\t\t\"name\": \"长裤\"\r\n\t\t\t\t},\r\n\t\t\t\t\"upper_color\": {\r\n\t\t\t\t\t\"score\": 0.98910427093506,\r\n\t\t\t\t\t\"name\": \"棕\"\r\n\t\t\t\t}\r\n\t\t\t}]`\r\n\r\n比如打伞、口罩、衣服颜色、是否看手机、上方截断等相当丰富的信息，在PULC 人体属性识别模型里是没有的。\r\n因此，想问一下多的这些属性是否提供了其他模型呢？\r\n谢谢！",
        "state": "open",
        "user": "sunxirui310",
        "closed_by": null,
        "created_at": "2022-10-31T09:21:11+00:00",
        "updated_at": "2024-02-26T04:28:28+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "sunxirui310"
        ],
        "labels": [
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2442,
        "title": "请问有含文字图像方向分类模型的预训练模型吗？",
        "body": "请问有含文字图像方向分类模型的预训练模型吗？使用的模型为PPLCNet_x1_0+SSLD",
        "state": "closed",
        "user": "ZzyChris97",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-01T12:19:51+00:00",
        "updated_at": "2023-02-21T06:41:40+00:00",
        "closed_at": "2023-02-21T06:41:37+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2434,
        "title": "PP-ShiTuV2评估脚本",
        "body": "请问PP-ShiTuV2官方发布了用于评估的脚本吗？",
        "state": "open",
        "user": "peiwenYe",
        "closed_by": null,
        "created_at": "2022-10-31T10:52:45+00:00",
        "updated_at": "2022-11-18T06:21:59+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "zengshao0622",
            "peiwenYe",
            "zengshao0622",
            "peiwenYe",
            "peiwenYe",
            "zengshao0622",
            "peiwenYe"
        ],
        "labels": [
            "documentation"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2445,
        "title": "static 分支使用官方提供的 yaml 文件训练 GoogleNet, 不收敛。",
        "body": "1. PaddleClas版本: release/static\r\n2. 训练环境：\r\n  a. OS: Ubuntu18.04\r\n  b. GPU: A10\r\n  c. python, cuda 以及 paddlepaddle 版本信息：使用以下 docker\r\n    `nvidia-docker pull registry.baidubce.com/paddlepaddle/paddle:2.3.2-gpu-cuda11.2-cudnn8`\r\n3. 训练脚本\r\n``` bash\r\npython -m paddle.distributed.launch \\\r\n    --gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./configs/Inception/GoogLeNet.yaml \\\r\n        -o print_interval=10 \\\r\n        --vdl_dir=vdl_logs/googlenet_v9_imagenet1k\r\n```\r\n5. 配置文件 GoogLeNet.yaml\r\n```yaml\r\n\r\nvalid_interval: 1\r\nepochs: 120\r\ntopk: 5\r\nimage_shape: [3, 224, 224]\r\n\r\nLEARNING_RATE:\r\n   function: 'Cosine'\r\n   params:\r\n       lr: 0.01\r\n\r\nOPTIMIZER:\r\n    function: 'Momentum'\r\n    params:\r\n        momentum: 0.9\r\n    regularizer:\r\n        function: 'L2'\r\n        factor: 0.0001\r\n\r\nTRAIN:\r\n    batch_size: 256\r\n    num_workers: 4\r\n    file_list: \"./dataset/imagenet_raw/train_list.txt\"\r\n    data_dir: \"./dataset/imagenet_raw/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1./255.\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n\r\nVALID:\r\n    batch_size: 64\r\n    num_workers: 4\r\n    file_list: \"./dataset/imagenet_raw/evaluate/val.txt\"\r\n    data_dir: \"./dataset/imagenet_raw/evaluate/\"\r\n    shuffle_seed: 0\r\n    transforms:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            to_np: False\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - ToCHWImage:\r\n```\r\n\r\n我尝试使用了 flower102, imagenet50, imagenet1k 这三个数据集，在 train from scratch 的情况下，都无法收敛。\r\n请问这是什么问题？",
        "state": "closed",
        "user": "taosean",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-03T09:08:37+00:00",
        "updated_at": "2023-02-07T06:46:25+00:00",
        "closed_at": "2023-02-07T06:46:21+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2446,
        "title": "PreconditionNotMetError",
        "body": "Windows WSL Ubuntu 22.04\r\n![图片](https://user-images.githubusercontent.com/12975204/199690372-13a10c82-5065-429d-b4f3-0a2266bc7585.png)\r\n```\r\ndocker run --name dev --gpus all -v $PWD:/mnt -p 8888:8888 -it --shm-size=32g paddlecloud/paddleocr:2.4-gpu-cuda10.2-cudnn7-latest /bin/bash\r\n```\r\n代码：\r\n```\r\npython3.7 python/predict_system.py -c configs/inference_general.yaml\r\n```\r\n报错：\r\n![图片](https://user-images.githubusercontent.com/12975204/199690910-d4371580-19e8-4c0e-86cb-40e002aaf0ea.png)\r\n![图片](https://user-images.githubusercontent.com/12975204/199690952-a3aff123-7292-49d0-818e-99d3616bcf66.png)\r\n![图片](https://user-images.githubusercontent.com/12975204/199690987-ced2914a-eeb0-4425-ae32-599753c0b2e3.png)\r\n![图片](https://user-images.githubusercontent.com/12975204/199691021-cd4fffba-4f7d-4491-93fb-2c358f1faa84.png)\r\n![图片](https://user-images.githubusercontent.com/12975204/199691068-1b82319c-2489-410e-a3e3-eea6a02002c3.png)\r\n\r\n",
        "state": "closed",
        "user": "luckyriko",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-03T09:52:17+00:00",
        "updated_at": "2023-02-21T06:41:42+00:00",
        "closed_at": "2023-02-21T06:41:38+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2447,
        "title": "关于使用OpenVINO和GPU inference推理输出结果有差异的问题",
        "body": "# 概述\r\n模型网络为`GeneralRecognition_PPLCNet_x2_5`,完成训练后，导出inference模型，因需要测试CPU平台的运行情况，使用同一张图片、相同的预处理方式，分别在`PaddleClas`项目源码中使用`CUDA`环境和`OpenVINO runtime`环境中进行特征提取，对比数据时候发现，二者输出的`512维特征向量`比对有差异\r\n\r\n# 环境\r\n- PaddlePaddle ： v2.3\r\n- CUDA :  10.1\r\n- OpenVINO: 2022.02\r\n\r\n# 差异情况如下(仅截取部分数据)：\r\n![image](https://user-images.githubusercontent.com/36251986/199731574-3db2f99e-b97c-48ee-8230-fd60ab827ef5.png)\r\n\r\n\r\n# 请教您： 该情况是否属于正常现象？ 如果不是，如何处理与改进？\r\n\r\n",
        "state": "closed",
        "user": "lujx1024",
        "closed_by": "lujx1024",
        "created_at": "2022-11-03T13:23:11+00:00",
        "updated_at": "2022-11-16T03:17:19+00:00",
        "closed_at": "2022-11-16T03:17:16+00:00",
        "comments_count": [
            "RainFrost1",
            "lujx1024"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2453,
        "title": "预测卡死",
        "body": "python3.8 python/predict_system.py -c configs/inference_general.yaml\r\n\r\n运行完之后就一直卡主不动了。\r\n![image](https://user-images.githubusercontent.com/38575158/200269931-4501da1b-a95a-414b-bb5c-0065f1c4fc7f.png)\r\n",
        "state": "closed",
        "user": "David-19940718",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-07T09:02:44+00:00",
        "updated_at": "2023-02-14T06:42:08+00:00",
        "closed_at": "2023-02-14T06:42:08+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2463,
        "title": "【三日部署直播课】分类、检测、识别等AI模型在TensorRT、OpenVINO、ONNX Runtime、RKNN、Paddle Inference、Paddle Lite部署实战。覆盖150+热门模型",
        "body": "🔥 全场景部署套件 FastDeploy：\r\n1. 目前支持了150+热门CV、NLP、Speech模型的部署，其中分类模型支持全量FastDeploy支持硬件的部署。\r\n2. 支持TensorRT、OpenVINO、ONNX Runtime、RKNN、Paddle Inference、Paddle lite等。\r\n3. 支持CPU、GPU、Jetson、ARM CPU、瑞芯微NPU、晶晨NPU、恩智浦NPU、飞腾CPU、IPU等九大类硬件，更多硬件能力完善中。\r\n4.  3行代码搞定AI模型部署，1行代码切换不同后端和硬件。\r\n5. \r\nGitHub地址：https://github.com/PaddlePaddle/FastDeploy\r\n\r\n🔥 三日直播课：\r\n【直播分享】2022.11.09 20:30～21:30，《覆盖云边端全场景，150+热门模型快速部署》。微信扫码报名\r\n【直播分享】2022.11.10 20:30～21:30，《瑞芯微、晶晨、恩智浦等10+AI硬件部署，直达产业落地》。微信扫码报名\r\n【直播分享】2022.11.10 19:00～20:00，《10+热门模型在RK3588、RK3568部署实战》。微信扫码报名\r\n <div align=\"center\">\r\n  <img src=\"https://user-images.githubusercontent.com/54695910/200145290-d5565d18-6707-4a0b-a9af-85fd36d35d13.jpg\" width = \"120\" height = \"120\" />\r\n  </div>\r\n\r\n🔥 部分分类模型部署能力：（更多模型部署，欢迎移步[FastDeploy仓库](https://github.com/PaddlePaddle/FastDeploy)）\r\n  <img src=\"https://user-images.githubusercontent.com/54695910/200784907-c5957995-9b42-4c7d-ad4a-54a20227df39.png\" />\r\n",
        "state": "open",
        "user": "leiqing1",
        "closed_by": null,
        "created_at": "2022-11-09T08:56:45+00:00",
        "updated_at": "2024-02-26T04:28:25+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2457,
        "title": "训练时报错Found inf or nan",
        "body": "虽然训练能继续，但是一直触发异常处理报这个错误，想问下是哪个脚本会报这个错误？麻烦告知方便定位问题，谢谢了！\r\n\r\n[2022/11/08 14:54:54] ppcls INFO: [Train][Epoch 2/800][Iter: 0/366]lr(LinearWarmup): 0.05000000, CELoss: 11.76099, TripletAngularMarginLoss: 0.68000, loss: 12.44099, batch_cost: 0.54552s, reader_cost: 0.41536, ips: 117.31981 samples/s, eta: 1 day, 20:18:47\r\nFound inf or nan, current scale is: 3.0517578125e-05, decrease to: 3.0517578125e-05*0.5\r\nFound inf or nan, current scale is: 1.52587890625e-05, decrease to: 1.52587890625e-05*0.5\r\nFound inf or nan, current scale is: 7.62939453125e-06, decrease to: 7.62939453125e-06*0.5\r\nFound inf or nan, current scale is: 3.814697265625e-06, decrease to: 3.814697265625e-06*0.5\r\nFound inf or nan, current scale is: 1.9073486328125e-06, decrease to: 1.9073486328125e-06*0.5\r\nFound inf or nan, current scale is: 9.5367431640625e-07, decrease to: 9.5367431640625e-07*0.5\r\nFound inf or nan, current scale is: 4.76837158203125e-07, decrease to: 4.76837158203125e-07*0.5\r\nFound inf or nan, current scale is: 2.384185791015625e-07, decrease to: 2.384185791015625e-07*0.5\r\nFound inf or nan, current scale is: 1.1920928955078125e-07, decrease to: 1.1920928955078125e-07*0.5\r\nFound inf or nan, current scale is: 5.960464477539063e-08, decrease to: 5.960464477539063e-08*0.5\r\n",
        "state": "closed",
        "user": "JiehangXie",
        "closed_by": "JiehangXie",
        "created_at": "2022-11-08T07:22:41+00:00",
        "updated_at": "2023-12-20T02:19:06+00:00",
        "closed_at": "2022-11-08T07:34:27+00:00",
        "comments_count": [
            "JiehangXie",
            "keepgoing365"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2455,
        "title": "预测时指定了模型依然会下载预训练模型、提示缺少sync_batch_norm",
        "body": "使用 ./ppcls/configs/PULC/person_exists/PPLCNet_x1_0_search.yaml 在 Ai Studio 使用PaddleClas 2.5 训练好的模型，放到本地机器，在使用如下命令进行推理时，指定了模型，但还是要下载预训练模型，怎么解决？（机器不联网）\r\n!python tools/infer.py \\\r\n    -c ./ppcls/configs/PULC/person_exists/PPLCNet_x1_0_search.yaml \\\r\n    -o Global.pretrained_model=./output/PPLCNet_x1_0/best_model\r\n\r\n\r\n同时在 Ai Studio 上使用如下代码测试的时候，报错，提示如下：\r\n测试代码：\r\n%cd /home/aistudio/work/PaddleClas/\r\n!python tools/infer.py \\\r\n    -c ./ppcls/configs/PULC/person_exists/PPLCNet_x1_0_search.yaml \\\r\n    -o Global.device=cpu \\\r\n    -o Global.pretrained_model=./output/PPLCNet_x1_0/best_model\r\n\r\n报错信息：\r\nTraceback (most recent call last):\r\n  File \"tools/infer.py\", line 31, in <module>\r\n    engine.infer()\r\n  File \"<decorator-gen-551>\", line 2, in infer\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 354, in _decorate_function\r\n    return func(*args, **kwargs)\r\n  File \"/home/aistudio/work/PaddleClas/ppcls/engine/engine.py\", line 486, in infer\r\n    out = self.model(batch_tensor)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/work/PaddleClas/ppcls/arch/backbone/legendary_models/pp_lcnet.py\", line 314, in forward\r\n    x = self.conv1(x)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/home/aistudio/work/PaddleClas/ppcls/arch/backbone/legendary_models/pp_lcnet.py\", line 112, in forward\r\n    x = self.bn(x)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 930, in __call__\r\n    return self._dygraph_call_func(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 915, in _dygraph_call_func\r\n    outputs = self.forward(*inputs, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/nn/layer/norm.py\", line 1096, in forward\r\n    sync_batch_norm_out, _, _, _, _, _ = _C_ops.sync_batch_norm(\r\nAttributeError: module 'paddle.fluid.core_avx.ops' has no attribute 'sync_batch_norm'",
        "state": "closed",
        "user": "dium6i",
        "closed_by": "dium6i",
        "created_at": "2022-11-07T10:04:31+00:00",
        "updated_at": "2022-11-16T08:05:24+00:00",
        "closed_at": "2022-11-15T09:43:43+00:00",
        "comments_count": [
            "weisy11",
            "dium6i",
            "TingquanGao",
            "TingquanGao",
            "dium6i",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2468,
        "title": "celoss.py中损失函数写错",
        "body": "PaddleClas 2.4\r\npaddle 2.3.2\r\n\r\nppcls/losss/celoss.py 中 loss 在无label smooth时计算是不是有错， F.softmax后加了一个F.cross_entropy,默认情况下，F.cross_entropy中就有一个use_softmax=True ，用pytorch和tensorflow做了同样的试验，应该可以确认，是错了。你们确认一下。\r\n\r\n    def forward(self, x, label):\r\n        if isinstance(x, dict):\r\n            x = x[\"logits\"]\r\n        if self.epsilon is not None:\r\n            class_num = x.shape[-1]\r\n            label = self._labelsmoothing(label, class_num)\r\n            x = -F.log_softmax(x, axis=-1)\r\n            loss = paddle.sum(x * label, axis=-1)\r\n        else:\r\n            if label.shape[-1] == x.shape[-1]:\r\n                label = F.softmax(label, axis=-1)\r\n                soft_label = True\r\n            else:\r\n                soft_label = False\r\n            loss = F.cross_entropy(x, label=label, soft_label=soft_label)\r\n        loss = loss.mean()\r\n        return {\"CELoss\": loss}\r\n\r\n",
        "state": "closed",
        "user": "DLlearn",
        "closed_by": "Evezerest",
        "created_at": "2022-11-09T12:05:26+00:00",
        "updated_at": "2023-12-07T03:24:31+00:00",
        "closed_at": "2022-11-21T06:01:24+00:00",
        "comments_count": [
            "cuicheng01",
            "RobinChiu"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2469,
        "title": "自己编译arm版的paddlepaddle，进行shitu2为什么预测速度这么慢呢，新建索引也慢",
        "body": "项目需要在麒麟arm架构上运行，所以在自己的mac上通过docker模拟了arm-ubuntu系统容器，编译arm版的paddlepaddle，然后在模拟的arm-ubuntu容器中运行shitu2预测速度很慢，重新建索引的过程也很慢，但是在x86的环境是正常的，下面是运行识别命令之后的结果\r\n(base) λ docker-desktop /paddle/PaddleClas/deploy python python/predict_system.py -c configs/inference_general.yaml -o Global.infer_imgs=\"./drink_dataset_v2.0/test_images/mosilian.jpeg\" -o IndexProcess.index_dir=\"./drink_dataset_v2.0/index_all\"\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\nHint: Your machine support AVX, but the installed paddlepaddle doesn't have avx core. Hence, no-avx core with worse preformance will be imported.\r\nIf you like, you could reinstall paddlepaddle by 'python -m pip install --force-reinstall paddlepaddle-gpu[==version]' to get better performance.\r\nThe original error is: cannot import name 'core_avx' from partially initialized module 'paddle.fluid' (most likely due to a circular import) (/opt/conda/lib/python3.8/site-packages/paddle/fluid/__init__.py)\r\n2022-11-10 10:55:32 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2022-11-10 10:55:32 INFO: DetPostProcess : \r\n2022-11-10 10:55:32 INFO: DetPreProcess : \r\n2022-11-10 10:55:32 INFO:     transform_ops : \r\n2022-11-10 10:55:32 INFO:         DetResize : \r\n2022-11-10 10:55:32 INFO:             interp : 2\r\n2022-11-10 10:55:32 INFO:             keep_ratio : False\r\n2022-11-10 10:55:32 INFO:             target_size : [640, 640]\r\n2022-11-10 10:55:32 INFO:         DetNormalizeImage : \r\n2022-11-10 10:55:32 INFO:             is_scale : True\r\n2022-11-10 10:55:32 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-11-10 10:55:32 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-11-10 10:55:32 INFO:         DetPermute : \r\n2022-11-10 10:55:32 INFO: Global : \r\n2022-11-10 10:55:32 INFO:     batch_size : 1\r\n2022-11-10 10:55:32 INFO:     cpu_num_threads : 10\r\n2022-11-10 10:55:32 INFO:     det_inference_model_dir : ./models/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer\r\n2022-11-10 10:55:32 INFO:     enable_benchmark : True\r\n2022-11-10 10:55:32 INFO:     enable_mkldnn : True\r\n2022-11-10 10:55:32 INFO:     enable_profile : False\r\n2022-11-10 10:55:32 INFO:     gpu_mem : 8000\r\n2022-11-10 10:55:32 INFO:     image_shape : [3, 640, 640]\r\n2022-11-10 10:55:32 INFO:     infer_imgs : ./drink_dataset_v2.0/test_images/mosilian.jpeg\r\n2022-11-10 10:55:32 INFO:     ir_optim : True\r\n2022-11-10 10:55:32 INFO:     label_list : ['foreground']\r\n2022-11-10 10:55:32 INFO:     max_det_results : 5\r\n2022-11-10 10:55:32 INFO:     rec_inference_model_dir : ./models/general_PPLCNetV2_base_pretrained_v1.0_infer\r\n2022-11-10 10:55:32 INFO:     rec_nms_thresold : 0.05\r\n2022-11-10 10:55:32 INFO:     threshold : 0.2\r\n2022-11-10 10:55:32 INFO:     use_fp16 : False\r\n2022-11-10 10:55:32 INFO:     use_gpu : True\r\n2022-11-10 10:55:32 INFO:     use_tensorrt : False\r\n2022-11-10 10:55:32 INFO: IndexProcess : \r\n2022-11-10 10:55:32 INFO:     batch_size : 32\r\n2022-11-10 10:55:32 INFO:     data_file : ./drink_dataset_v2.0/gallery/drink_label.txt\r\n2022-11-10 10:55:32 INFO:     delimiter : \t\r\n2022-11-10 10:55:32 INFO:     dist_type : IP\r\n2022-11-10 10:55:32 INFO:     embedding_size : 512\r\n2022-11-10 10:55:32 INFO:     image_root : ./drink_dataset_v2.0/gallery/\r\n2022-11-10 10:55:32 INFO:     index_dir : ./drink_dataset_v2.0/index_all\r\n2022-11-10 10:55:32 INFO:     index_method : HNSW32\r\n2022-11-10 10:55:32 INFO:     index_operation : new\r\n2022-11-10 10:55:32 INFO:     return_k : 5\r\n2022-11-10 10:55:32 INFO:     score_thres : 0.5\r\n2022-11-10 10:55:32 INFO: RecPostProcess : None\r\n2022-11-10 10:55:32 INFO: RecPreProcess : \r\n2022-11-10 10:55:32 INFO:     transform_ops : \r\n2022-11-10 10:55:32 INFO:         ResizeImage : \r\n2022-11-10 10:55:32 INFO:             backend : cv2\r\n2022-11-10 10:55:32 INFO:             interpolation : bilinear\r\n2022-11-10 10:55:32 INFO:             return_numpy : False\r\n2022-11-10 10:55:32 INFO:             size : [224, 224]\r\n2022-11-10 10:55:32 INFO:         NormalizeImage : \r\n2022-11-10 10:55:32 INFO:             mean : [0.485, 0.456, 0.406]\r\n2022-11-10 10:55:32 INFO:             order : hwc\r\n2022-11-10 10:55:32 INFO:             scale : 1.0/255.0\r\n2022-11-10 10:55:32 INFO:             std : [0.229, 0.224, 0.225]\r\n2022-11-10 10:55:32 INFO:         ToCHWImage : None\r\nE1110 10:55:32.812544   818 analysis_config.cc:95] Please compile with gpu to EnableGpu()\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:67: DeprecationWarning: NEAREST is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.NEAREST or Dither.NONE instead.\r\n  'nearest': Image.NEAREST,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:68: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  'bilinear': Image.BILINEAR,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:69: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  'bicubic': Image.BICUBIC,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:70: DeprecationWarning: BOX is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BOX instead.\r\n  'box': Image.BOX,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:71: DeprecationWarning: LANCZOS is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.LANCZOS instead.\r\n  'lanczos': Image.LANCZOS,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:72: DeprecationWarning: HAMMING is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.HAMMING instead.\r\n  'hamming': Image.HAMMING,\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:73: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  'random': (Image.BILINEAR, Image.BICUBIC)\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/python/preprocess.py:73: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  'random': (Image.BILINEAR, Image.BICUBIC)\r\nE1110 10:55:35.293304   818 analysis_config.cc:95] Please compile with gpu to EnableGpu()\r\nInference: 59035.258769989014 ms per batch image\r\n/opt/conda/lib/python3.8/site-packages/paddleclas/deploy/utils/draw_bbox.py:42: DeprecationWarning: getsize is deprecated and will be removed in Pillow 10 (2023-07-01). Use getbbox or getlength instead.\r\n  tw = font.getsize(text)[0]\r\n[{'bbox': [289, 297, 564, 919], 'rec_docs': '光明_莫斯利安', 'rec_scores': 0.5926596}]\r\n\r\n这是我在编译中所用的参数\r\ncmake .. -DPY_VERSION=3.8 -DWITH_ARM=ON -WITH_GPU=OFF -DWITH_TESTING=OFF -DCMAKE_BUILD_TYPE=Release  -DON_INFER=ON -DWITH_XBYAK=OFF -DWITH_AVX=OFF -DWITH_DISTRIBUTE=ON -DWITH_PSCORE=OFF",
        "state": "closed",
        "user": "miller0520",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-10T03:53:49+00:00",
        "updated_at": "2023-04-18T06:43:55+00:00",
        "closed_at": "2023-04-18T06:43:52+00:00",
        "comments_count": [
            "weisy11",
            "BerryRB"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 2479
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2471,
        "title": "训练224*224太小了,怎么修改大一点",
        "body": "比如\r\nPPHGNet_base.yaml\r\n训练\r\n\r\n224*224 图太小 \r\n特征都看不清楚了\r\n想改为512*512或者1024*1024\r\n\r\n应该怎么修改配置文件\r\n只改image_shape: [3, 512, 512]\r\n会报错\r\n\r\n还应该改哪里才合适",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "monkeycc",
        "created_at": "2022-11-10T06:36:17+00:00",
        "updated_at": "2022-11-18T06:20:56+00:00",
        "closed_at": "2022-11-18T06:20:53+00:00",
        "comments_count": [
            "weisy11",
            "cuicheng01",
            "monkeycc",
            "cuicheng01",
            "monkeycc"
        ],
        "labels": [
            "status: WIP",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2473,
        "title": "多属性识别metric 代码bug反馈",
        "body": "基于标签的评价函数有点小问题，不应该用eps来处理某一维属性的ground truth为零的情况，该问题会导致ma等一系列指标计算错误。\r\n\r\n问题代码如下：\r\n```\r\n        #ppcls/utils/misc.py\r\n        eps = 1e-20\r\n        label_pos_recall = 1.0 * self.true_pos / (\r\n            self.gt_pos + eps)  # true positive\r\n        label_neg_recall = 1.0 * self.true_neg / (\r\n            self.gt_neg + eps)  # true negative\r\n        # mean accuracy\r\n        label_ma = (label_pos_recall + label_neg_recall) / 2\r\n```\r\n例如，当true_pos和gt_pos都为[1,0,1,0]，true_neg 和gt_neg 都为[0,1,0,1]时，计算出来的ma=0.5，但实际上应该是1.0才对。",
        "state": "closed",
        "user": "stwrd",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-10T14:29:30+00:00",
        "updated_at": "2023-02-21T06:41:43+00:00",
        "closed_at": "2023-02-21T06:41:39+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "bug",
            "status: WIP",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2474,
        "title": "PP-ShiTuV2构建索引时是否有先进行目标检测切图选项",
        "body": "PP-ShiTuV2推理是先进行目标检测再做图片相似度比较。但是建索引时我查了下好像没有先用目标检测进行切图再进行索引构建。是否有此选项可以配置。如果没有先检测切图再构建索引会出现推理时检测出来的对象还是整张图片。\r\n 1. PaddleClas版本 v2.5\r\n\r\n",
        "state": "closed",
        "user": "983183947",
        "closed_by": "983183947",
        "created_at": "2022-11-11T01:54:10+00:00",
        "updated_at": "2022-11-18T12:50:16+00:00",
        "closed_at": "2022-11-18T12:50:12+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "Feature request",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2477,
        "title": "大规模提取特征速度慢",
        "body": "操作系统为ubuntu/centos\r\nPython3.9\r\nCUDA/cuDNN版本， 11.2\r\n使用predict_rec,单卡T4，模型为Global_General_v2,batch=8,速度非常不稳定，3it/s-20s/it都有，同时gpu_utils较低，长期处在0",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2022-11-13T15:03:43+00:00",
        "updated_at": "2022-12-23T06:09:38+00:00",
        "closed_at": "2022-12-23T06:09:38+00:00",
        "comments_count": [
            "zengshao0622"
        ],
        "labels": [
            "status: WIP",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2476,
        "title": "如何将车辆的ReID模型与Deepsort结合到一起",
        "body": "请问如何将车辆的ReID模型与Deepsort结合到一起 并导出推理模型？ 就像PaddleDetection中Deepsort_pplcnet_vehicle.tar这样的 我想将其中的pplcnet替换掉 谢谢",
        "state": "closed",
        "user": "MessonC",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-13T03:33:37+00:00",
        "updated_at": "2023-02-21T06:41:43+00:00",
        "closed_at": "2023-02-21T06:41:40+00:00",
        "comments_count": [
            "weisy11",
            "Evezerest"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2496,
        "title": "请问主体网络能否框出为训练集未出现得类别得位置，因为我看主体网络能够将背景前景，分开，例如我现在拿了500个类别来训练，主体侦测网络都是侦测他们框",
        "body": "\r\n请问主体网络能否框出为训练集未出现得类别得位置，因为我看主体网络能够将背景前景，分开，例如我现在拿了500个类别来训练，主体侦测网络都是侦测他们框。那再使用过程中，如果图片出现了新的类别，训练集未曾见过得类别，主体网络能过框选得到呢？ \r\n",
        "state": "open",
        "user": "God-song",
        "closed_by": null,
        "created_at": "2022-11-21T01:53:03+00:00",
        "updated_at": "2024-08-03T02:15:06+00:00",
        "closed_at": null,
        "comments_count": [
            "weisy11",
            "God-song",
            "hf62580"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2500,
        "title": "index_operation为append时，要遍历整个相册的图片抽取特征",
        "body": "[         gallery_features = self._extract_features(gallery_images, config)](https://github.com/PaddlePaddle/PaddleClas/blob/622a94eea97442ea23e0f0535378dc09c866b5ac/deploy/python/build_gallery.py#L67)\r\n\r\n配置中index_operation为append添加新类时，要遍历抽取相册的特征，如果特征图像比较多，这样每添加新类非常耗时 @JonhSilver， @HydrogenSulfate",
        "state": "closed",
        "user": "jeomincham",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-11-22T02:44:45+00:00",
        "updated_at": "2023-03-28T06:44:30+00:00",
        "closed_at": "2023-03-28T06:44:27+00:00",
        "comments_count": [
            "RainFrost1",
            "jeomincham",
            "RainFrost1",
            "jeomincham",
            "RainFrost1"
        ],
        "labels": [
            "question",
            "status/close",
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2508,
        "title": "使用paddle serving部署PULC含文字图像方向分类模型，启动server后返回5000错误",
        "body": "软件相关版本如下\r\ncuda 11.6\r\npaddleclas         2.5.0\r\npaddlepaddle-gpu   2.3.2.post116\r\n参考的文档是，分类模型服务化部署，已对serving_server_conf.prototxt和serving_client_conf.prototxt两个文件进行过修改，修改后的两个文件内容如下\r\n<img width=\"240\" alt=\"07331a7e9077ffcd15b0de8df5790bc\" src=\"https://user-images.githubusercontent.com/14150869/204075760-80e460ce-01fe-4b4b-be1c-13616a7135f7.png\">\r\n服务端的错误日志文件如下\r\n<img width=\"845\" alt=\"a28936f0a77c609c6244f90f30ba510\" src=\"https://user-images.githubusercontent.com/14150869/204075808-edfdc534-4e3a-4d8e-b396-ba4dc19a9ce4.png\">\r\n接口响应的错误内容如下\r\n<img width=\"474\" alt=\"ad54cd3636fecdddc8e6f3dcf1aa8bc\" src=\"https://user-images.githubusercontent.com/14150869/204075818-1e3f1c4d-4ab4-404c-92d2-5bdf3dcfae58.png\">\r\n",
        "state": "open",
        "user": "xshaitt",
        "closed_by": null,
        "created_at": "2022-11-26T06:38:14+00:00",
        "updated_at": "2023-01-16T09:28:08+00:00",
        "closed_at": null,
        "comments_count": [
            "HydrogenSulfate",
            "xshaitt"
        ],
        "labels": [
            "status: wontfix",
            "PULC",
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2513,
        "title": "paddleclas可以用来做目标检测，比如车辆识别吗，效果咋样有没有人试过。",
        "body": "有人没试过用paddlecla去进行车辆目标检测呢。\r\n",
        "state": "closed",
        "user": "Pytorchlover",
        "closed_by": "Evezerest",
        "created_at": "2022-11-29T03:15:13+00:00",
        "updated_at": "2022-12-23T06:14:43+00:00",
        "closed_at": "2022-12-23T06:14:41+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2514,
        "title": "pip install paddleclas报错",
        "body": "64位,windows10系统,cuda10.5,cudnn7.6.5,飞桨2.4GPU版本,python3.10.8\r\n1.官网的安装教程中,git clone https://github.com/PaddlePaddle/PaddleClas.git -b release/2.4,现在已经是2.5了,应该更新一下\r\n2.使用pip install paddleclas语句安装paddleclas报错.我看原因,好像是faiss_cpu库的问题.\r\n报错信息如下:Collecting cycler>=0.10\r\n  Using cached cycler-0.11.0-py3-none-any.whl (6.4 kB)\r\nCollecting dill>=0.3.6\r\n  Using cached dill-0.3.6-py3-none-any.whl (110 kB)\r\nRequirement already satisfied: idna<4,>=2.5 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (from requests->visualdl>=2.2.0->paddleclas) (3.4)\r\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (from requests->visualdl>=2.2.0->paddleclas) (1.26.13)\r\nRequirement already satisfied: certifi>=2017.4.17 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (from requests->visualdl>=2.2.0->paddleclas) (2022.9.24)\r\nRequirement already satisfied: charset-normalizer<3,>=2 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (from requests->visualdl>=2.2.0->paddleclas) (2.1.1)\r\nCollecting MarkupSafe>=2.0\r\n  Using cached MarkupSafe-2.1.1-cp310-cp310-win_amd64.whl (17 kB)\r\nInstalling collected packages: wcwidth, pytz, faiss-cpu, easydict, ujson, threadpoolctl, scipy, PyYAML, python-dateutil, pyparsing, pycryptodome, prettytable, opencv-python, MarkupSafe, kiwisolver, joblib, itsdangerous, gast, future, fonttools, dill, cycler, contourpy, colorama, Babel, Werkzeug, tqdm, scikit-learn, pandas, packaging, multiprocess, Jinja2, click, bce-python-sdk, matplotlib, flask, Flask-Babel, visualdl, paddleclas\r\n  DEPRECATION: faiss-cpu is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\r\n  Running setup.py install for faiss-cpu ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Running setup.py install for faiss-cpu did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [10 lines of output]\r\n      running install\r\n      C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\setuptools\\command\\install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.\r\n        warnings.warn(\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss\\faiss\\python\\swigfaiss.i to faiss\\faiss\\python\\swigfaiss_wrap.cpp\r\n      swig.exe -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWIN -o faiss\\faiss\\python\\swigfaiss_wrap.cpp faiss\\faiss\\python\\swigfaiss.i\r\n      error: command 'swig.exe' failed: None\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: legacy-install-failure\r\n\r\n× Encountered error while trying to install package.\r\n╰─> faiss-cpu\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for output from the failure.\r\n\r\n希望paddleclas官方尽快修复bug,但我也不敢保证不是因为飞桨2.4太新了导致的错误,其实我用飞桨2.4安装一些其他的飞桨官方套件,也会有问题.所以我不确定是faiss_cpu库的问题,还是clas还没有适配飞桨2.4的问题",
        "state": "closed",
        "user": "yuwoyizhan",
        "closed_by": "Evezerest",
        "created_at": "2022-11-30T03:36:18+00:00",
        "updated_at": "2024-01-02T03:53:58+00:00",
        "closed_at": "2023-01-16T09:32:27+00:00",
        "comments_count": [
            "zengshao0622",
            "yuwoyizhan",
            "GreatV",
            "GreatV",
            "xxcoco763",
            "cobaltautomationdev"
        ],
        "labels": [
            "bug",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2515,
        "title": "进群二维码失效",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "zilianglei",
        "closed_by": "zilianglei",
        "created_at": "2022-11-30T08:08:55+00:00",
        "updated_at": "2022-12-01T06:26:55+00:00",
        "closed_at": "2022-12-01T06:26:53+00:00",
        "comments_count": [
            "zilianglei",
            "zengshao0622"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2519,
        "title": "推理报错",
        "body": "推理代码如下：\r\nimport paddleclas\r\nmodel = paddleclas.PaddleClas(model_name=\"person_exists\")\r\nresult = model.predict(input_data=\"./mask_4.jpg\")\r\nprint(next(result))\r\n\r\n\r\n报错如下：\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\nNo stack trace in paddle, may be caused by external reasons.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1669866144 (unix time) try \"date -d @1669866144\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 14863 (TID 0x7fa5085260c0) from PID 0 ***]\r\n\r\n\r\nProcess finished with exit code 139 (interrupted by signal 11: SIGSEGV)\r\n",
        "state": "closed",
        "user": "BoragoCode",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-01T03:45:02+00:00",
        "updated_at": "2023-03-28T06:44:31+00:00",
        "closed_at": "2023-03-28T06:44:28+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2532,
        "title": "如何修改单卡策略（学习率、批量大小等）",
        "body": "The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nPaddleClas提供的训练策略基于4 gpus。但在目前的训练中，gpu的数量是1。如果使用此配置进行训练，请修改策略（学习率、批量大小等）。\r\n\r\n如何修改单卡策略（学习率、批量大小等）\r\n\r\n是否可以考虑出一个单卡转换脚本\r\n\r\n比如选择 3060 单卡  选择模型\r\n就会出 学习率、批量大小 的结果\r\n\r\n这样是不是更加人性化呢",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-03T06:20:17+00:00",
        "updated_at": "2023-05-05T03:14:32+00:00",
        "closed_at": "2023-03-07T06:42:40+00:00",
        "comments_count": [
            "cuicheng01",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2531,
        "title": "分类不准确问题",
        "body": "每个文件夹的图片尺寸都是一样的\r\n\r\n有以下的图片尺寸\r\n214 * 54\r\n150 * 50\r\n41 * 44\r\n26 * 26\r\n\r\n训练是224*224\r\n\r\n但是发现识别效果 惨不忍睹\r\n训练 精确度也只有60%\r\n\r\n这种是不是需要原图全部调整为224 * 224\r\n还是怎么样\r\n需要怎么样调整",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-03T03:11:13+00:00",
        "updated_at": "2023-03-28T06:44:33+00:00",
        "closed_at": "2023-03-28T06:44:29+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2535,
        "title": "clarity_assessment相关文件缺失",
        "body": "deploy\\configs\\PULC  目录下没有clarity_assessment相关文件\r\n\r\nmodel = paddleclas.PaddleClas(model_name=\"clarity_assessment\")\r\n报错：InputModelError: clarity_assessment is not provided by PaddleClas. \r\n源码中缺失没有clarity_assessment相关的信息。\r\n",
        "state": "open",
        "user": "471417367",
        "closed_by": null,
        "created_at": "2022-12-06T09:59:50+00:00",
        "updated_at": "2025-06-30T02:20:39+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "471417367",
            "jufengli"
        ],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2538,
        "title": "PP-ShiTu 合适做成 人脸验证 人脸对比吗",
        "body": "PP-ShiTu 合适做成 人脸验证 人脸对比吗\r\n\r\n还是什么框架合适",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-08T12:57:34+00:00",
        "updated_at": "2023-03-28T06:44:34+00:00",
        "closed_at": "2023-03-28T06:44:31+00:00",
        "comments_count": [
            "zengshao0622"
        ],
        "labels": [
            "Feature request",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2541,
        "title": "PPShitu中主体检测如何实现为单主体检测",
        "body": "PPShitu部署时候，主体检测那一部分，代码里头做的应该是多主体检测。\r\n对于类似生鲜、果蔬的场景，待测目标都是单一品类，能否实现成单主体检测，类似百度云里头的业务。https://ai.baidu.com/tech/imagerecognition/object_detect\r\n是用同一个模型，修改代码部分，还是要替换成专门的单主体检测模型\r\n",
        "state": "closed",
        "user": "harhar539",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-10T14:19:10+00:00",
        "updated_at": "2023-03-28T06:44:35+00:00",
        "closed_at": "2023-03-28T06:44:32+00:00",
        "comments_count": [
            "zengshao0622"
        ],
        "labels": [
            "good first issue",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2546,
        "title": "DSNet网络结构",
        "body": "DSNet网络结构图：\r\n\r\n<img width=\"1131\" alt=\"DSNet\" src=\"https://user-images.githubusercontent.com/71830213/207497958-f9802c03-3eec-4ba5-812f-c6a9158856c1.png\">\r\n",
        "state": "closed",
        "user": "DuanXiaoyue-LittleMoon",
        "closed_by": "DuanXiaoyue-LittleMoon",
        "created_at": "2022-12-14T03:28:30+00:00",
        "updated_at": "2022-12-14T03:31:11+00:00",
        "closed_at": "2022-12-14T03:31:08+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2550,
        "title": "请问 serving 部署时 config.yaml 应该怎么改？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5\r\n 2. 涉及的其他产品使用的版本号：paddle-serving-server 0.9.0\r\n\r\n\r\n请教一下在 serving 部署时 config.yaml 需要填写 rec 和 det 两个模型路径。\r\n\r\n而自行训练和推理的的时候用的是 inference_cls.yaml ，只生成了一个模型，也可以正常推理`python python/predict_cls.py -c inference_cls.yaml`\r\n\r\n不太懂 serving 部署时 rec 和 det 的配置要怎么填.... 问题比较低级...谢谢指点\r\n\r\n<img width=\"236\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2182116/208389837-99bf0c6a-e77c-4caa-919a-3f926d0e97fd.png\">\r\n\r\n\r\n",
        "state": "closed",
        "user": "sunzhaoyang",
        "closed_by": "sunzhaoyang",
        "created_at": "2022-12-19T09:12:42+00:00",
        "updated_at": "2022-12-19T19:48:30+00:00",
        "closed_at": "2022-12-19T19:48:27+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2548,
        "title": "【咨询】关于所有配置文件【数据transform】中的Infer都比Train多一个ToCHWImage，这是什么原因呢？",
        "body": "Train中的\r\n```yaml\r\nTrain:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/ILSVRC2012/\r\n      cls_label_path: ./dataset/ILSVRC2012/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0\r\n            mean: [123.675, 116.28, 103.53]\r\n            std: [58.395, 57.12, 57.375]\r\n            order: ''\r\n```\r\nInfer的配置\r\n```yaml\r\nInfer:\r\n  infer_imgs: docs/images/inference_deployment/whl_demo.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 1.0\r\n        mean: [123.675, 116.28, 103.53]\r\n        std: [58.395, 57.12, 57.375]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: ppcls/utils/imagenet1k_label_list.txt\r\n```\r\n\r\n后续自行实现inference时，做请求数据的预处理时，是否需要`ToCHWImage`。",
        "state": "closed",
        "user": "wenmingwei",
        "closed_by": "Evezerest",
        "created_at": "2022-12-15T09:21:51+00:00",
        "updated_at": "2023-01-16T09:36:28+00:00",
        "closed_at": "2023-01-16T09:36:25+00:00",
        "comments_count": [
            "HydrogenSulfate"
        ],
        "labels": [
            "good first issue",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2549,
        "title": "请问检索中用到的主题检测模型picodet支持onnx导出吗",
        "body": "请问检索中用到的主题检测模型picodet支持onnx导出吗，我直接用推理模型倒出会报错\r\n![image](https://user-images.githubusercontent.com/60816348/208255081-f75daa03-cb6c-4269-812c-40c089bbc9cf.png)\r\n",
        "state": "closed",
        "user": "Twilight89",
        "closed_by": "Evezerest",
        "created_at": "2022-12-17T17:57:26+00:00",
        "updated_at": "2023-01-16T09:37:01+00:00",
        "closed_at": "2023-01-16T09:36:58+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2552,
        "title": "服务化部署过程中始终报错 error_msg: invalid arg list: ['fetch_list']",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5\r\n 2. 涉及的其他产品使用的版本号：\r\n ```\r\npaddle-bfloat         0.1.7\r\npaddle-serving-app    0.9.0\r\npaddle-serving-client 0.9.0\r\npaddle-serving-server 0.9.0\r\npaddle2onnx           1.0.5\r\npaddleclas            2.5.1\r\npaddlefsl             1.1.0\r\npaddlehub             2.3.1\r\npaddlenlp             2.4.3\r\npaddlepaddle          2.4.1\r\n```\r\n 3. 训练环境信息：\r\n  a. 具体操作系统: Linux, registry.baidubce.com/paddlepaddle/serving:0.9.0-devel\r\n  b. Python版本号: Python3.6\r\n  c. CUDA/cuDNN版本: cpu\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n根据文档：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/deployment/image_classification/paddle_serving.md\r\n\r\n使用自己训练的模型，验证了下是可以跑的\r\n```\r\npython3 python/predict_cls.py -c configs/sun.yaml\r\n\r\n2022-12-19 20:02:54 INFO:         ToCHWImage : None\r\nE1219 20:02:54.029156 21438 analysis_config.cc:96] Please compile with gpu to EnableGpu()\r\nIMG_8512.JPG:\tclass id(s): [0, 4, 1, 3, 5], score(s): [0.62, 0.18, 0.14, 0.03, 0.02], label_name(s): ['optometry-0', 'eye-axis-2', 'optometry-1', 'eye-axis-1', 'eye-axis-3']\r\n```\r\n\r\n服务化部署的时候始终报错：\r\n```\r\n{'err_no': 5000, 'err_msg': '[imagenet] failed to predict. Log_id: 2  Raise_msg:  invalid arg list  ClassName: Op.process.<locals>.feed_fetch_list_check_helper  FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.', 'key': [], 'value': [], 'tensors': []}\r\n```\r\nPipelineServingLogs/pipeline.log\r\n```\r\nERROR 2022-12-19 19:54:52,613 [error_catch.py:106]\r\nLog_id: 1\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle_serving_server/pipeline/error_catch.py\", line 97, in wrapper\r\n    res = func(*args, **kw)\r\n  File \"/usr/local/lib/python3.6/site-packages/paddle_serving_server/pipeline/error_catch.py\", line 160, in wrapper\r\n    raise CustomException(CustomExceptionCode.INPUT_PARAMS_ERROR, \"invalid arg list: {}\".format(invalid_argument_list), True)\r\npaddle_serving_server.pipeline.error_catch.CustomException:\r\n\texception_code: 5000\r\n\texception_type: INPUT_PARAMS_ERROR\r\n\terror_msg: invalid arg list: ['fetch_list']\r\n\tis_send_to_user: True\r\n```\r\n\r\nserving_server_conf.prototxt\r\n```\r\nfeed_var {\r\n  name: \"inputs\"\r\n  alias_name: \"inputs\"\r\n  is_lod_tensor: false\r\n  feed_type: 1\r\n  shape: 3\r\n  shape: 224\r\n  shape: 224\r\n}\r\nfetch_var {\r\n  name: \"softmax_1.tmp_0\"\r\n  alias_name: \"prediction\"\r\n  is_lod_tensor: false\r\n  fetch_type: 1\r\n  shape: 1000\r\n}\r\n```\r\n",
        "state": "closed",
        "user": "sunzhaoyang",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2022-12-19T20:09:31+00:00",
        "updated_at": "2024-04-10T08:49:41+00:00",
        "closed_at": "2023-04-18T06:43:53+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "HydrogenSulfate",
            "2018-Summer",
            "liangasheng"
        ],
        "labels": [
            "question",
            "status/close",
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2569,
        "title": "MobileNetV3中文文档错误",
        "body": "MobileNetV3.md 的中文文档错误！\r\nMobileNetV3 的文档，开头却在讲 ShuffleNet。相关的V1、V2及英文文档是对的。",
        "state": "closed",
        "user": "icedream2linxi",
        "closed_by": "Evezerest",
        "created_at": "2023-01-01T03:25:24+00:00",
        "updated_at": "2023-01-16T09:37:46+00:00",
        "closed_at": "2023-01-16T09:37:43+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2556,
        "title": "paddleClas 数据增强：旋转",
        "body": "您好，请问一下，paddleclas数据增强的配置策略有以下几种：\r\n![图片](https://user-images.githubusercontent.com/66996161/209065813-ed7d1579-d1c3-4006-b3cd-9657129fc2b0.png)\r\n这里面没有包含图像的旋转，请问一下，如何配置图像的旋转策略？\r\n\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2022-12-22T05:48:33+00:00",
        "updated_at": "2022-12-29T07:01:49+00:00",
        "closed_at": "2022-12-29T07:01:46+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "documentation",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2561,
        "title": "在 Python 代码中预测报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. paddlepaddle       2.4.1\r\n 2. paddleclas         2.4.0\r\n 3. 训练环境信息：\r\n  a. 具体操作系统：Windows\r\n  b. Python版本号：Python3.7\r\n  c. 虚拟环境：Anaconda\r\n\r\n源码如下：\r\n\r\nfrom paddleclas import PaddleClas\r\nimport warnings\r\n\r\nwarnings.filterwarnings('ignore')\r\ninfer_imgs = r'D:\\Files\\python\\images\\fff587897edb4a49a2497fe10610d335.jpg'\r\nclas = PaddleClas(\r\n    model_name='PPLCNet_x0_25',\r\n    inference_model_dir='D:/Project/My/python/paddleclas-demo/model/PPLCNet_x0_25',\r\n    class_id_map_file='D:/Project/My/python/paddleclas-demo/model/ccj_label_list.txt',\r\n    topk=2,\r\n    use_gpu=False\r\n)\r\nresult = clas.predict(infer_imgs)\r\nprint(next(result))\r\n\r\n\r\n 报错代码：\r\n\r\nTraceback (most recent call last):\r\n  File \"D:/Project/My/python/paddleclas-demo/main.py\", line 37, in <module>\r\n    print(next(result))\r\n  File \"D:\\ProgramData\\.conda\\envs\\paddleclas\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 573, in predict\r\n    preds = self.cls_predictor.predict(img_list)\r\n  File \"D:\\ProgramData\\.conda\\envs\\paddleclas\\lib\\site-packages\\paddleclas\\deploy\\python\\predict_cls.py\", line 109, in predict\r\n    batch_output = self.postprocess(batch_output)\r\n  File \"D:\\ProgramData\\.conda\\envs\\paddleclas\\lib\\site-packages\\paddleclas\\deploy\\python\\postprocess.py\", line 50, in __call__\r\n    tmp = func(x, image_file)\r\n  File \"D:\\ProgramData\\.conda\\envs\\paddleclas\\lib\\site-packages\\paddleclas\\deploy\\python\\postprocess.py\", line 127, in __call__\r\n    label_name_list.append(self.class_id_map[i.item()])\r\nKeyError: 605\r\n\r\n\r\nccj_label_list.txt\r\n0 gun\r\n1 signal\r\n\r\n在源码postprocess.py第123行报错\r\n\r\n            for i in index:\r\n                clas_id_list.append(i.item())\r\n                score_list.append(probs[i].item())\r\n                if self.class_id_map is not None:\r\n                    label_name_list.append(self.class_id_map[i.item()])\r\n\r\n这里的index为[605,704]，正常应该是ccj_label_list.txt里[0,1]，请问是哪里配置错误？",
        "state": "closed",
        "user": "mark-chinese",
        "closed_by": "mark-chinese",
        "created_at": "2022-12-25T17:19:11+00:00",
        "updated_at": "2022-12-26T01:32:52+00:00",
        "closed_at": "2022-12-26T01:31:21+00:00",
        "comments_count": [
            "mark-chinese"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2571,
        "title": "OSError: (External) CUDA error(719), unspecified launch failure.",
        "body": "版本：paddlepaddle-gpu             2.4.1.post117\r\n错误信息：OSError: (External) CUDA error(719), unspecified launch failure. \r\n  [Hint: Please search for the error code(719) on website (https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__TYPES.html#group__CUDART__TYPES_1g3f51e3575c2178246db0a94a430e0038) to get Nvidia's official solution and advice about CUDA Error.] (at /paddle/paddle/phi/backends/gpu/cuda/cuda_info.cc:259)\r\n随机性出现---",
        "state": "closed",
        "user": "w863071864",
        "closed_by": "Evezerest",
        "created_at": "2023-01-03T05:16:56+00:00",
        "updated_at": "2023-01-16T09:38:16+00:00",
        "closed_at": "2023-01-16T09:38:13+00:00",
        "comments_count": [
            "weisy11"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2574,
        "title": "人体属性识别示例后处理结果有问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：\r\n 2.5.1\r\n 2.4.1\r\n \r\n 2. 训练环境信息：\r\n  a. 具体操作系统\r\nUbuntu20.04\r\n  b. Python版本号\r\nPython3.8\r\n  c. CUDA/cuDNN版本\r\n无，用的cpu版本\r\n 3. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n \r\n![image](https://user-images.githubusercontent.com/107376080/210523819-a15b1251-ce6f-4e10-8c1a-fa5cecc590e4.png)\r\n下载的是PULC的人体属性识别模型，自定义路径放进去跑示例的时候发现输出不对：\r\n![image](https://user-images.githubusercontent.com/107376080/210524070-9f74ef00-18ce-45a6-9c01-74cb68d15510.png)\r\n但如果不自定义路径，使用模型名字来识别自动下载同样的模型，出来的输出是对的：\r\n![image](https://user-images.githubusercontent.com/107376080/210524283-7730d721-a7ae-49bd-a576-63a6df8f8b1a.png)\r\n![image](https://user-images.githubusercontent.com/107376080/210524405-10229c46-70bd-4736-840b-a497190f3551.png)\r\n推测原因是针对人体属性识别有特殊的后处理对应，如果不写名字则无法对应，使用了默认的后处理。这点能否改进？\r\n",
        "state": "closed",
        "user": "EscaticZheng",
        "closed_by": "EscaticZheng",
        "created_at": "2023-01-04T09:30:57+00:00",
        "updated_at": "2023-01-05T02:53:48+00:00",
        "closed_at": "2023-01-05T02:53:48+00:00",
        "comments_count": [
            "zengshao0622"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2575,
        "title": "slim不能量化Deit，Deit不属于TheseusLayer？",
        "body": "release2.5：PaddleClas/ppcls/arch/__init__.py的第54行\r\n“if isinstance(arch, TheseusLayer): ”\r\nresnet就符合条件，但Deit就不符合条件，请问为什么呀\r\n",
        "state": "closed",
        "user": "wangzihanxmu",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2023-01-04T12:43:26+00:00",
        "updated_at": "2023-04-18T06:43:57+00:00",
        "closed_at": "2023-04-18T06:43:54+00:00",
        "comments_count": [
            "zengshao0622",
            "wangzihanxmu",
            "TingquanGao"
        ],
        "labels": [
            "Feature request",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2586,
        "title": "分类数据集大小不一",
        "body": "请问大佬，我的分类数据集大小不一，可能相差还比较大，应该用什么模型或者预处理方式比较好",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Evezerest",
        "created_at": "2023-01-09T01:49:23+00:00",
        "updated_at": "2023-02-10T03:47:09+00:00",
        "closed_at": "2023-01-16T09:42:43+00:00",
        "comments_count": [
            "zengshao0622",
            "Dandelion111"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2576,
        "title": "利用图像检索a类物体，检索库中包括了a类物体，然后检索的时候排除掉a，看看a和那些类的物体最相似",
        "body": "我遇到一个问题，利用图像检索a类物体，检索库中包括了a类物体，我想在检索的时候排除掉a，看看a和那些类的物体最相似？\r\n如果建立一个不包含a的图像检索库，再去检索，感觉好繁琐，不知道有没有什么更好的方法，请求大佬支援",
        "state": "closed",
        "user": "Firestick-Xia",
        "closed_by": "paddle-bot-old[bot]",
        "created_at": "2023-01-05T02:50:15+00:00",
        "updated_at": "2023-04-18T06:43:58+00:00",
        "closed_at": "2023-04-18T06:43:55+00:00",
        "comments_count": [
            "RainFrost1",
            "Firestick-Xia",
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2591,
        "title": "本地预测结果，与在服务器端预测结果不一样",
        "body": "本地预测：\r\n![image](https://user-images.githubusercontent.com/57173448/211770834-397d5cba-c709-4d7f-a2a3-1c2ea3fefe44.png)\r\n服务器预测：\r\n![image](https://user-images.githubusercontent.com/57173448/211771016-f6b98e30-9867-4db3-b74b-40d7620db663.png)\r\n服务器部署是按照，官方教程部署的",
        "state": "open",
        "user": "Firestick-Xia",
        "closed_by": null,
        "created_at": "2023-01-11T09:40:29+00:00",
        "updated_at": "2023-01-31T02:35:03+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "Firestick-Xia",
            "RainFrost1",
            "Firestick-Xia",
            "RainFrost1",
            "Firestick-Xia"
        ],
        "labels": [
            "status: WIP"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2593,
        "title": "安卓demo中VectorSearch.h中faiss报错导致无法运行",
        "body": "PaddleClas-release-2.5\\deploy\\shitu_android_demo路径下的安卓demo在WIN11中AndroidStudio运行报错\r\n报错信息如下:\r\n\r\nshitu_android_demo\\app\\src\\main\\cpp\\VectorSearch.h:22:10: fatal error: 'include/faiss/Index.h' file not found\r\n\r\n版本及环境如下:\r\n1.win11系统\r\n2.AndroidStudio版本:Chipmunk\r\n3.PaddleClas版本:PaddleClas-release-2.5\r\n4.Python版本: 3.9.13\r\n\r\n",
        "state": "closed",
        "user": "Satsna",
        "closed_by": "Satsna",
        "created_at": "2023-01-12T02:19:25+00:00",
        "updated_at": "2024-09-18T02:15:10+00:00",
        "closed_at": "2023-01-12T07:20:38+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "Satsna",
            "HydrogenSulfate",
            "Satsna",
            "Satsna",
            "dlaoy"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2589,
        "title": "单卡GPU配置推荐",
        "body": "在使用单卡训练的时候会有如下 warning，默认的配置是 4 卡 GPU 的，那么如果使用单卡的话，应该如何修改配置才比较好呢？\r\n\r\nWARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\n\r\n能否以 https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/ppcls/configs/PULC/person_attribute/PPLCNet_x1_0.yaml 为例子，帮忙解释一下，多谢\r\n",
        "state": "closed",
        "user": "zhjunqin",
        "closed_by": "Evezerest",
        "created_at": "2023-01-09T08:52:27+00:00",
        "updated_at": "2023-01-16T09:42:53+00:00",
        "closed_at": "2023-01-16T09:42:50+00:00",
        "comments_count": [
            "zh-hike"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2594,
        "title": "couldn't find \"libNative.so\"",
        "body": "PaddleClas-release-2.5\\deploy\\shitu_android_demo安卓设备报错\r\n报错信息如下:\r\n2023-01-12 14:31:19.038 3597-3597/com.baidu.paddle.lite.demo.pp_shitu E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.baidu.paddle.lite.demo.pp_shitu, PID: 3597\r\n    java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file \"/data/app/com.baidu.paddle.lite.demo.pp_shitu-1/base.apk\"],nativeLibraryDirectories=[/data/app/com.baidu.paddle.lite.demo.pp_shitu-1/lib/arm, /system/lib, /vendor/lib]]] couldn't find \"libNative.so\"\r\n        at java.lang.Runtime.loadLibrary0(Runtime.java:984)\r\n        at java.lang.System.loadLibrary(System.java:1562)\r\n        at com.baidu.paddle.lite.demo.pp_shitu.Native.<clinit>(Native.java:26)\r\n        at com.baidu.paddle.lite.demo.pp_shitu.MainActivity.<init>(MainActivity.java:112)\r\n\r\n![1](https://user-images.githubusercontent.com/28588015/211996823-78a525d0-8261-47f1-b781-958718a137b6.png)\r\n\r\n\r\n版本及环境如下:\r\n安卓系统:7.1.2\r\n设备芯片:Rockchip RK3288",
        "state": "closed",
        "user": "Satsna",
        "closed_by": "Satsna",
        "created_at": "2023-01-12T06:46:54+00:00",
        "updated_at": "2024-05-15T00:38:54+00:00",
        "closed_at": "2023-01-13T06:46:55+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "Satsna",
            "HoneyLoveven"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2596,
        "title": "armeabi-v7a安卓无法编译",
        "body": "PaddleClas-release-2.5\\deploy\\shitu_android_demo路径下的安卓demo在WIN11中AndroidStudio运行报错\r\n\r\n报错信息如下:\r\n\r\n![image](https://user-images.githubusercontent.com/28588015/212255941-989ec10a-0afe-4293-ad4e-7eb886288510.png)\r\n\r\n\r\n\r\narmeabi-v7a 无法编译,arm64-v8a可以正常编译\r\n\r\n版本及环境如下:\r\n1.win11系统\r\n2.AndroidStudio版本:Chipmunk\r\n3.PaddleClas版本:PaddleClas-release-2.5\r\n4.Python版本: 3.9.13",
        "state": "open",
        "user": "Satsna",
        "closed_by": null,
        "created_at": "2023-01-13T06:51:35+00:00",
        "updated_at": "2023-09-20T08:31:28+00:00",
        "closed_at": null,
        "comments_count": [
            "Satsna",
            "HydrogenSulfate",
            "Satsna",
            "HydrogenSulfate",
            "Satsna",
            "HydrogenSulfate",
            "Satsna",
            "Satsna",
            "Satsna"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2597,
        "title": "Cannot train PULC Classification Model of Language: Illegal index value",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n\r\nWhat happened?\r\nI am following the instructions from [PULC offical ENG language language classification](https://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/en/PULC/PULC_language_classification_en.md). Step 1 to 3.2 is fine. \r\n\r\nI use the original datasets provided from PaddleClas (example dataset) and the [Multi-lingual scene text detection and recognition](https://rrc.cvc.uab.es/?ch=15&com=downloads) (only Chinese word datasets, from Task 2: Cropped Word Script identification ) advised from the manual.\r\n\r\nThe original datasets are in the `img` folder and the multi-lingual dataset are in the `img2` folder (See point 4 `train.txt`)\r\n\r\nCannot train on step 3.3 (See Point number 4 for logs).\r\n\r\n\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n    paddleclas (develop version), got it from `git clone https://github.com/PaddlePaddle/PaddleClas.git -b develop`\r\n\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n    Nil. Just PaddleClas\r\n \r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS:\r\n       Google colab notebook\r\n\r\n  b. Python版本号，如Python3.6/7/8\r\n      python 3.8.16\r\n\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n    CUDA 11.2/cudnn 8.1\r\n\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n No code changes in repo, but the file structure inside pulc have the following changes.\r\n```\r\n├── img\r\n│   ├── word_1.png\r\n│   ├── word_2.png\r\n├── img2\r\n│   ├── word_19866.png\r\n│   ├── word_19867.png\r\n...\r\n│   ├── word_27634.png\r\n...\r\n├── train_list.txt\r\n├── train_list_for_distill.txt\r\n├── test_list.txt\r\n└── label_list.txt\r\n```\r\n\r\ntrain_list.txt\r\n```\r\n...\r\nimg/word_6618.png 3\r\nimg/word_6619.png 3\r\nimg/word_6620.png 3\r\nimg/word_6621.png 3\r\nimg/word_6622.png 3\r\nimg/word_6623.png 3\r\nimg/word_6624.png 3\r\nimg2/word_19866.png 4\r\nimg2/word_19867.png 4\r\nimg2/word_19869.png 4\r\nimg2/word_19871.png 4\r\nimg2/word_19872.png 4\r\nimg2/word_19873.png 4\r\nimg2/word_19875.png 4\r\nimg2/word_19876.png 4\r\nimg2/word_19877.png 4\r\nimg2/word_19879.png 4\r\n...\r\n``` \r\n \r\nLogs:\r\n```python\r\nlibpng warning: iCCP: known incorrect sRGB profile\r\nlibpng warning: iCCP: profile 'ICC Profile': 'RGB ': RGB color space not permitted on grayscale PNG\r\nlibpng warning: iCCP: profile 'ICC Profile': 'RGB ': RGB color space not permitted on grayscale PNG\r\nlibpng warning: iCCP: known incorrect sRGB profile\r\nW0116 04:19:18.195961  1664 gpu_resources.cc:217] WARNING: device: �. The installed Paddle is compiled with CUDNN 8.2, but CUDNN version in your machine is 8.1, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\r\nlibpng warning: iCCP: known incorrect sRGB profile\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/content/PaddleClas/ppcls/engine/engine.py\", line 393, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/content/PaddleClas/ppcls/engine/train/train.py\", line 72, in train_epoch\r\n    loss.backward()\r\n  File \"<decorator-gen-157>\", line 2, in backward\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/wrapped_decorator.py\", line 26, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/framework.py\", line 534, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 297, in backward\r\n    core.eager.run_backward([self], grad_tensor, retain_graph)\r\nOSError: (External) CUBLAS error(13). \r\n  [Hint: Please search for the error code(13) on website (https://docs.nvidia.com/cuda/cublas/index.html#cublasstatus_t) to get Nvidia's official solution and advice about CUBLAS Error.] (at /paddle/paddle/phi/kernels/funcs/blas/blas_impl.cu.h:35)\r\n\r\nLAUNCH INFO 2023-01-16 04:19:27,946 Pod failed\r\nLAUNCH ERROR 2023-01-16 04:19:27,947 Container failed !!!\r\nContainer rank 0 status failed cmd ['/usr/bin/python3', '-u', 'tools/train.py', '-c', './ppcls/configs/PULC/language_classification/PPLCNet_x1_0.yaml', '-o', 'Arch.class_num=4'] code 1 log log/workerlog.0 \r\nenv {'NV_LIBCUBLAS_DEV_VERSION': '11.4.1.1043-1', 'NV_CUDA_COMPAT_PACKAGE': 'cuda-compat-11-2', '__EGL_VENDOR_LIBRARY_DIRS': '/usr/lib64-nvidia:/usr/share/glvnd/egl_vendor.d/', 'NV_CUDNN_PACKAGE_DEV': 'libcudnn8-dev=8.1.1.33-1+cuda11.2', 'PYDEVD_USE_FRAME_EVAL': 'NO', 'LD_LIBRARY_PATH': '/usr/local/lib/python3.8/dist-packages/cv2/../../lib64:/usr/lib64-nvidia', 'NV_LIBNCCL_DEV_PACKAGE': 'libnccl-dev=2.8.4-1+cuda11.2', 'TCLLIBPATH': '/usr/share/tcltk/tcllib1.19', 'CLOUDSDK_PYTHON': 'python3', 'LANG': 'en_US.UTF-8', 'NV_LIBNPP_DEV_PACKAGE': 'libnpp-dev-11-2=11.3.2.152-1', 'ENABLE_DIRECTORYPREFETCHER': '1', 'HOSTNAME': '7a273e6fecce', 'OLDPWD': '/', 'CLOUDSDK_CONFIG': '/content/.config', 'USE_AUTH_EPHEM': '1', 'KMP_EXTRA_ARGS': '--listen_host=172.28.0.2 --target_host=172.28.0.2 --tunnel_background_save_url=https://colab.research.google.com/tun/m/cc48301118ce562b961b3c22d803539adc1e0c19/gpu-t4-s-24inkprm8mait --tunnel_background_save_delay=10s --tunnel_periodic_background_save_frequency=30m0s --enable_output_coalescing=true --output_coalescing_required=true', 'NV_LIBNPP_VERSION': '11.3.2.152-1', 'NV_NVPROF_DEV_PACKAGE': 'cuda-nvprof-11-2=11.2.152-1', 'NVIDIA_VISIBLE_DEVICES': 'all', 'NV_NVPROF_VERSION': '11.2.152-1', 'NV_LIBCUSPARSE_VERSION': '11.4.1.1152-1', 'DATALAB_SETTINGS_OVERRIDES': '{\"kernelManagerProxyPort\":6000,\"kernelManagerProxyHost\":\"172.28.0.2\",\"jupyterArgs\":[\"--ip=172.28.0.2\"],\"debugAdapterMultiplexerPath\":\"/usr/local/bin/dap_multiplexer\",\"enableLsp\":true}', 'NV_LIBCUBLAS_DEV_PACKAGE': 'libcublas-dev-11-2=11.4.1.1043-1', 'COLAB_RELEASE_TAG': 'release-colab-20230109-060104-RC00', 'ENV': '/root/.bashrc', 'PAGER': 'cat', 'NCCL_VERSION': '2.8.4-1', 'COLAB_BACKEND_VERSION': 'default', 'TF_FORCE_GPU_ALLOW_GROWTH': 'true', 'JPY_PARENT_PID': '89', 'NO_GCE_CHECK': 'False', 'PWD': '/content/PaddleClas', 'NVARCH': 'x86_64', 'NV_LIBCUSPARSE_DEV_VERSION': '11.4.1.1152-1', 'HOME': '/root', 'KMP_LISTEN_PORT': '6000', 'LAST_FORCED_REBUILD': '20221207', 'CLICOLOR': '1', 'NV_LIBNCCL_PACKAGE_VERSION': '2.8.4-1', 'NV_LIBNCCL_PACKAGE': 'libnccl2=2.8.4-1+cuda11.2', 'DEBIAN_FRONTEND': 'noninteractive', 'NV_LIBNCCL_DEV_PACKAGE_NAME': 'libnccl-dev', 'NV_CUDA_LIB_VERSION': '11.2.2-1', 'NV_LIBNPP_PACKAGE': 'libnpp-11-2=11.3.2.152-1', 'NV_LIBNCCL_PACKAGE_NAME': 'libnccl2', 'LIBRARY_PATH': '/usr/local/cuda/lib64/stubs', 'NV_NVTX_VERSION': '11.2.152-1', 'NV_LIBCUBLAS_VERSION': '11.4.1.1043-1', 'NV_LIBCUBLAS_PACKAGE': 'libcublas-11-2=11.4.1.1043-1', 'GCE_METADATA_TIMEOUT': '3', 'NV_CUDNN_VERSION': '8.1.1.33', 'VM_GCE_METADATA_HOST': '169.254.169.253', 'NV_CUDA_CUDART_DEV_VERSION': '11.2.152-1', 'KMP_TARGET_PORT': '9000', 'GLIBCPP_FORCE_NEW': '1', 'TBE_CREDS_ADDR': '172.28.0.1:8008', 'TERM': 'xterm-color', 'SHELL': '/bin/bash', 'GCS_READ_CACHE_BLOCK_SIZE_MB': '16', 'NV_NVML_DEV_VERSION': '11.2.152-1', 'PYTHONWARNINGS': 'ignore:::pip._internal.cli.base_command', 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline', 'CUDA_VERSION': '11.2.2', 'NV_LIBCUBLAS_PACKAGE_NAME': 'libcublas-11-2', 'NVIDIA_DRIVER_CAPABILITIES': 'compute,utility', 'TBE_RUNTIME_ADDR': '172.28.0.1:8011', 'SHLVL': '1', 'PYTHONPATH': '/env/python', 'NV_LIBCUBLAS_DEV_PACKAGE_NAME': 'libcublas-dev-11-2', 'NVIDIA_REQUIRE_CUDA': 'cuda>=11.2 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=450,driver<451', 'NV_LIBNPP_DEV_VERSION': '11.3.2.152-1', 'TBE_EPHEM_CREDS_ADDR': '172.28.0.1:8009', 'NV_CUDA_CUDART_VERSION': '11.2.152-1', 'NV_CUDNN_PACKAGE_NAME': 'libcudnn8', 'GLIBCXX_FORCE_NEW': '1', 'PATH': '/opt/bin:/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/tools/node/bin:/tools/google-cloud-sdk/bin', 'NV_LIBNCCL_DEV_PACKAGE_VERSION': '2.8.4-1', 'LD_PRELOAD': '/usr/lib/x86_64-linux-gnu/libtcmalloc.so.4', 'NV_CUDNN_PACKAGE': 'libcudnn8=8.1.1.33-1+cuda11.2', 'CGROUP_MEMORY_EVENTS': '/sys/fs/cgroup/memory.events /var/colab/cgroup/jupyter-children/memory.events', 'GIT_PAGER': 'cat', '_': '/usr/bin/python3', 'CUSTOM_DEVICE_ROOT': '', 'OMP_NUM_THREADS': '1', 'QT_QPA_PLATFORM_PLUGIN_PATH': '/usr/local/lib/python3.8/dist-packages/cv2/qt/plugins', 'QT_QPA_FONTDIR': '/usr/local/lib/python3.8/dist-packages/cv2/qt/fonts', 'POD_NAME': 'qcnjek', 'PADDLE_MASTER': '172.28.0.2:37824', 'PADDLE_GLOBAL_SIZE': '1', 'PADDLE_LOCAL_SIZE': '1', 'PADDLE_GLOBAL_RANK': '0', 'PADDLE_LOCAL_RANK': '0', 'PADDLE_NNODES': '1', 'PADDLE_TRAINER_ENDPOINTS': '172.28.0.2:37825', 'PADDLE_CURRENT_ENDPOINT': '172.28.0.2:37825', 'PADDLE_TRAINER_ID': '0', 'PADDLE_TRAINERS_NUM': '1', 'PADDLE_RANK_IN_NODE': '0', 'FLAGS_selected_gpus': '0'}\r\nLAUNCH INFO 2023-01-16 04:19:27,947 ------------------------- ERROR LOG DETAIL -------------------------\r\nin_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nError: /paddle/paddle/phi/kernels/gpu/one_hot_kernel.cu:38 Assertion `p_in_data[idx] >= 0 && p_in_data[idx] < depth` failed. Illegal index value, Input(input) value should be greater than or equal to 0, and less than depth [4], but received [4].\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/content/PaddleClas/ppcls/engine/engine.py\", line 393, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/content/PaddleClas/ppcls/engine/train/train.py\", line 72, in train_epoch\r\n    loss.backward()\r\n  File \"<decorator-gen-157>\", line 2, in backward\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/wrapped_decorator.py\", line 26, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/framework.py\", line 534, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddle/fluid/dygraph/varbase_patch_methods.py\", line 297, in backward\r\n    core.eager.run_backward([self], grad_tensor, retain_graph)\r\nOSError: (External) CUBLAS error(13). \r\n  [Hint: Please search for the error code(13) on website (https://docs.nvidia.com/cuda/cublas/index.html#cublasstatus_t) to get Nvidia's official solution and advice about CUBLAS Error.] (at /paddle/paddle/phi/kernels/funcs/blas/blas_impl.cu.h:35)\r\n\r\nLAUNCH INFO 2023-01-16 04:19:27,947 Exit code 1\r\n```\r\nAttached here are the full logs for reference\r\n[full_logs.txt](https://github.com/PaddlePaddle/PaddleClas/files/10422568/full_logs.txt)\r\n",
        "state": "open",
        "user": "AbitraryYu",
        "closed_by": null,
        "created_at": "2023-01-16T04:43:03+00:00",
        "updated_at": "2024-10-30T07:16:14+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "AbitraryYu",
            "BuiTuanrbt"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2604,
        "title": "PULC 人体属性识别模型 批量预测不显示文件名？",
        "body": "1. 版本号：PaddlePaddle: 2.4.1，PaddleClas：2.4.3\r\n2. 用的PULC_person_attribute 模型，使用pa100K数据集，在tool/infer.py进行批量预测时，发现结果不显示文件名：\r\n![image](https://user-images.githubusercontent.com/44767255/213124428-a8fde230-2c7b-4550-bcac-14ca1b0a19b6.png)\r\n\r\n\r\n而其他的PULC模型比如person_exists，就有filename 这个字段：\r\n![image](https://user-images.githubusercontent.com/44767255/213124264-36f4d2bf-0835-4c1e-8f35-627ad1c379b4.png)\r\n",
        "state": "open",
        "user": "MooTong123",
        "closed_by": null,
        "created_at": "2023-01-18T08:43:49+00:00",
        "updated_at": "2024-02-26T04:28:21+00:00",
        "closed_at": null,
        "comments_count": [
            "MooTong123"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2608,
        "title": "PaddleClas怎么没有像PaddleDetection和PaddleSeg类似的自制数据集划分工具",
        "body": "PaddleClas缺乏自制数据集划分工具，无法让使用者快速开展自身数据集的训练及评估工作",
        "state": "closed",
        "user": "D-ai-Y",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-01-20T16:21:49+00:00",
        "updated_at": "2024-02-06T06:34:28+00:00",
        "closed_at": "2024-02-06T06:34:24+00:00",
        "comments_count": [
            "D-ai-Y",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2616,
        "title": "fill_constant_compute not supported dtype 6",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n  a. 具体操作系统，MacOS\r\n  b. Python版本号，如Python3.7\r\n\r\nopt command:\r\nopt --model_dir=./picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer --optimize_out_type=naive_buffer --valid_targets=x86 --record_tailoring_info =false --quant_model=true --quant_type=QUANT_INT16 --optimize_out=./mainbody_PPLCNet_x2_5_640_quant_v1.0_lite\r\nwarning tip: lite/core/program.cc:693 operator()] Unable to convert var desc type(6) to precision type!\r\n\r\ndownload model url:\r\nhttps://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer.tar\r\n\r\nmac x86 platform  libpaddle_full_api_shared.dylib  \r\nget runtime error: fill_constant_compute.cc:50] not supported dtype 6\r\n",
        "state": "closed",
        "user": "gofugoo",
        "closed_by": "gofugoo",
        "created_at": "2023-02-01T06:14:42+00:00",
        "updated_at": "2023-02-02T01:07:33+00:00",
        "closed_at": "2023-02-02T01:07:29+00:00",
        "comments_count": [
            "gofugoo"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2638,
        "title": "High CPU usage on custom trained model (car_exists)",
        "body": "Python: 3.8.10\r\npaddlepaddle: 2.3.2\r\npaddleclas: 2.5.1\r\nWindows 10 Pro\r\nCPU: Intel i7 11th 1165G7 2.8Ghz\r\nBackbone: PPCLNet_x1_0\r\nCommand: python -m paddle.distributed.launch  tools/train.py  -c ./ppcls/configs/PULC/car_exists/PPLCNet_x1_0.yaml\r\n\r\nHello, I'm trying to train a model to find out if a car lane is occupied or not, so I took the car_exists model as a base, which works quite well, but it's not 100% adequate for my needs, so I decided to train my own model.\r\n\r\nThe problem is that once my model was trained, the CPU usage got too high, it went from ~8% with the car_exists model to ~50% with my model. With the example model I also have a fairly high CPU consumption, but if I add the parameter cpu_num_threads=1 it is solved, this does not work if I do it with the model trained by me.\r\n\r\n**EDIT: I test my model on a Alma Linux Machine and the CPU usage is low too, like ~7% so, this issue is only presented on Windows**\r\n\r\nThe model was trained with aproximately 100 images for ocuped and 100 images for empty, and it gives me good predictions and good performance because it only takes ~9ms in make the prediction, meanwhile the car_exists model takes ~40 ms in do the prediction.\r\n\r\nThe app is simple, just take one frame from a RTSP stream and check if a truck exists or not\r\nThis is my CPU when run the app with my model.\r\n![image](https://user-images.githubusercontent.com/54409459/217678510-7fa93d3c-bdd1-4349-95ab-6048e79bfcb1.png)\r\n\r\nAnd this is when use the car_exists model.\r\n![image](https://user-images.githubusercontent.com/54409459/217678721-cf9bda3a-2b09-455d-bf22-06b475899f05.png)\r\n\r\n\r\nAnother thing that I have noticed is that when I load the trained model the following lines appear that do not appear when I load the car_exists model\r\n\r\ne[37m---    fused 0 elementwise_add with relu activatione[0m\r\ne[37m---    fused 0 elementwise_add with tanh activatione[0m\r\ne[37m---    fused 0 elementwise_add with leaky_relu activatione[0m\r\ne[37m---    fused 0 elementwise_add with swish activatione[0m\r\ne[37m---    fused 0 elementwise_add with hardswish activatione[0m\r\ne[37m---    fused 0 elementwise_add with sqrt activatione[0m\r\ne[37m---    fused 0 elementwise_add with abs activatione[0m\r\ne[37m---    fused 0 elementwise_add with clip activatione[0m\r\ne[37m---    fused 0 elementwise_add with gelu activatione[0m\r\ne[37m---    fused 0 elementwise_add with relu6 activatione[0m\r\ne[37m---    fused 0 elementwise_add with sigmoid activatione[0m\r\ne[37m---    fused 0 elementwise_sub with relu activatione[0m\r\ne[37m---    fused 0 elementwise_sub with tanh activatione[0m\r\ne[37m---    fused 0 elementwise_sub with leaky_relu activatione[0m\r\ne[37m---    fused 0 elementwise_sub with swish activatione[0m\r\ne[37m---    fused 0 elementwise_sub with hardswish activatione[0m\r\ne[37m---    fused 0 elementwise_sub with sqrt activatione[0m\r\ne[37m---    fused 0 elementwise_sub with abs activatione[0m\r\ne[37m---    fused 0 elementwise_sub with clip activatione[0m\r\ne[37m---    fused 0 elementwise_sub with gelu activatione[0m\r\ne[37m---    fused 0 elementwise_sub with relu6 activatione[0m\r\ne[37m---    fused 0 elementwise_sub with sigmoid activatione[0m\r\ne[37m---    fused 0 elementwise_mul with relu activatione[0m\r\ne[37m---    fused 0 elementwise_mul with tanh activatione[0m\r\ne[37m---    fused 0 elementwise_mul with leaky_relu activatione[0m\r\ne[37m---    fused 0 elementwise_mul with swish activatione[0m\r\ne[37m---    fused 0 elementwise_mul with hardswish activatione[0m\r\ne[37m---    fused 0 elementwise_mul with sqrt activatione[0m\r\ne[37m---    fused 0 elementwise_mul with abs activatione[0m\r\ne[37m---    fused 0 elementwise_mul with clip activatione[0m\r\ne[37m---    fused 0 elementwise_mul with gelu activatione[0m\r\ne[37m---    fused 0 elementwise_mul with relu6 activatione[0m\r\ne[37m---    fused 0 elementwise_mul with sigmoid activatione[0m\r\n\r\nThere is my yaml file used to training \r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: cpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  start_eval_epoch: 10\r\n  epochs: 20\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n  # training model under @to_static\r\n  to_static: False\r\n  use_dali: False\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: PPLCNet_x1_0\r\n  class_num: 2\r\n  pretrained: True\r\n  use_ssld: True\r\n  use_sync_bn: True\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.0125\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00004\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/car_exists/\r\n      cls_label_path: ./dataset/car_exists/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 192\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - TimmAutoAugment:\r\n            prob: 0.5\r\n            config_str: rand-m9-mstd0.5-inc1\r\n            interpolation: bicubic\r\n            img_size: 192\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - RandomErasing:\r\n            EPSILON: 0.5\r\n            sl: 0.02\r\n            sh: 1.0/3.0\r\n            r1: 0.3\r\n            attempt: 10\r\n            use_log_aspect: True\r\n            mode: pixel\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 8\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ./dataset/car_exists\r\n      cls_label_path: ./dataset/car_exists/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: deploy/images/PULC/car_exists/objects365_00001507.jpeg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: ThreshOutput\r\n    threshold: 0.9\r\n    label_0: no_car\r\n    label_1: contains_car\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n  Eval:\r\n    - TprAtFpr:\r\n        max_fpr: 0.01\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n\r\nAnd there is some examples of my dataset\r\n\r\nOccuped\r\n![camion(46)](https://user-images.githubusercontent.com/54409459/217678120-009f66f2-6ed2-4299-86e5-c75576e3d79d.jpeg)\r\n\r\nEmpty\r\n![nada(33)](https://user-images.githubusercontent.com/54409459/217678189-7b7a7add-a347-4835-8cdc-91bf9d65ddc9.jpeg)\r\n\r\n",
        "state": "open",
        "user": "elechocruz",
        "closed_by": null,
        "created_at": "2023-02-08T23:58:41+00:00",
        "updated_at": "2024-02-26T04:28:18+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2630,
        "title": "paddlecls 训练出的模型可以用paddlex的C#部署API接口加载吗? ",
        "body": "# 环境\r\n 1. PaddleClas == release/2.5\r\n 2. PaddlePaddle-gpu==2.3.2\r\n 3. Paddlex==2.1.0\r\n# 训练环境信息：\r\n  a. 具体操作系统，Ubuntu20.0.4\r\n  b. Python版本号，Python==3.9\r\n  c. CUDA/cuDNN版本， CUDA==11.6, cuDNN==8.6.5\r\n\r\n# 问题\r\npaddlecls 训练出的模型可以用paddlex的C#部署API接口加载吗? 如果需要转换格式该如何转换呢?\r\n\r\n\r\n这个是paddlex训练出的模型文件夹:\r\n\r\n![a2](https://user-images.githubusercontent.com/62006079/216964544-b9b5f9e5-b05f-434f-8cf0-a900f04f62b3.png)\r\n\r\n\r\n这个是paddlecls训练出的模型文件夹:\r\n\r\n![a3](https://user-images.githubusercontent.com/62006079/216964620-7601bbc9-7cbd-4e85-8541-4de448c566fa.png)\r\n\r\n怎么进行模型格式的转换才能满足pddlex的C# API所要求的模型格式呢?(带model.yml的那种) 不知道我的描述是否清楚.",
        "state": "closed",
        "user": "dongyangli-del",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-06T11:54:03+00:00",
        "updated_at": "2024-02-13T06:33:38+00:00",
        "closed_at": "2024-02-13T06:33:32+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2622,
        "title": "静态图训练接口，不支持swin transformer训练",
        "body": "tags: v2.5.1\r\n使用ppcls/static/train.py训练swin transformer报错，修改后训练不收敛。\r\n主要修改代码：\r\nswin_transformer.py:\r\n\r\n- self.register_buffer(\"relative_position_index\",  relative_position_index) 改为 self.relative_position_index = relative_position_index\r\n- self.register_buffer(\"relative_position_bias\", relative_position_bias) 改为 self.relative_position_bias = relative_position_bias\r\n- self.register_buffer(\"attn_mask\", attn_mask) 改为 self.attn_mask = attn_mask\r\n\r\nvision_transformer.py:\r\n\r\n- keep_prob = paddle.to_tensor(1 - drop_prob) 改为 keep_prob = paddle.ones(shape=[1]).astype(x.dtype) * (1 - drop_prob)\r\n修改后可以训练，但是模型不收敛。\r\n",
        "state": "closed",
        "user": "xiaolaoshu156",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-02T07:51:16+00:00",
        "updated_at": "2024-02-13T06:33:35+00:00",
        "closed_at": "2024-02-13T06:33:31+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2634,
        "title": "如何使用PPLCNetV2_base训练一个针对于衣服特征提取的模型？",
        "body": "我想做一个衣服类别识别的demo，通用特征提取模型无法满足我的要求，我该怎么训练一个专门针对衣物特征提取的模型呢？",
        "state": "open",
        "user": "PaulX1029",
        "closed_by": null,
        "created_at": "2023-02-07T08:03:46+00:00",
        "updated_at": "2024-02-26T04:28:19+00:00",
        "closed_at": null,
        "comments_count": [
            "PaulX1029"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2639,
        "title": "具体代码",
        "body": "想问一下论文中的代码具体在哪一部分",
        "state": "closed",
        "user": "stu977",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-09T01:34:04+00:00",
        "updated_at": "2024-02-20T06:36:48+00:00",
        "closed_at": "2024-02-20T06:35:42+00:00",
        "comments_count": [
            "zengshao0622",
            "stu977",
            "stu977",
            "stu977",
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2642,
        "title": "请问分类图像尺寸差异较大，有没有推荐的模型或者处理办法",
        "body": "分类数据集图像尺寸差异较大，比如有的50*1000，有的100*100，有的2000*1000，有没有推荐的模型或者处理办法",
        "state": "open",
        "user": "Dandelion111",
        "closed_by": null,
        "created_at": "2023-02-10T03:38:53+00:00",
        "updated_at": "2024-02-26T04:28:17+00:00",
        "closed_at": null,
        "comments_count": [
            "zh-hike",
            "Dandelion111",
            "zh-hike",
            "Dandelion111"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2645,
        "title": "关于RandomApply的问题。",
        "body": "PaddleClas的develop分支。\r\n[代码链接](https://github.com/PaddlePaddle/PaddleClas/blob/develop/ppcls/data/preprocess/ops/randaugment.py#L160)\r\n\r\n这里的RandomApply好像并没有用到`self.p`。",
        "state": "closed",
        "user": "AllenWrong",
        "closed_by": "AllenWrong",
        "created_at": "2023-02-10T14:41:05+00:00",
        "updated_at": "2023-02-16T14:00:24+00:00",
        "closed_at": "2023-02-16T14:00:21+00:00",
        "comments_count": [
            "zengshao0622",
            "zh-hike"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2646,
        "title": "PULC train vehicle_attribute脚本出错",
        "body": "你好：\r\n运行环境如下：\r\n硬件平台 Jetson AGX Orin\r\n操作系统 ubuntu20.04\r\nCUDA 11.4.239\r\nPaddlePaddle 2.4\r\n我参考https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/PULC.md\r\n进行自定义数据集分类训练，\r\npython脚本\r\npython3 -m paddle.distributed.launch --gpus=\"0\" -c ./ppcls/configs/PULC/vehicle_attribute/PPLCNet_x1_0.yaml\r\n运行时报错如下：\r\n  File \"./ppcls/configs/PULC/vehicle_attribute/PPLCNet_x1_0.yaml\", line 2\r\n    Global:\r\n          ^\r\nSyntaxError: invalid syntax\r\n\r\n请问如何解决，谢谢",
        "state": "closed",
        "user": "zhanglei-rlsd-vip",
        "closed_by": "zhanglei-rlsd-vip",
        "created_at": "2023-02-12T06:47:15+00:00",
        "updated_at": "2023-02-14T01:27:15+00:00",
        "closed_at": "2023-02-14T01:27:15+00:00",
        "comments_count": [
            "zh-hike",
            "zhanglei-rlsd-vip",
            "zh-hike"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2647,
        "title": "分类模型是否支持再训练",
        "body": "我使用分类模型训练了一个模型，效果为top1:0.9 在使用过程中我收集了识别错误的数据 进行再次训练，对老数据的识别降低了，请问我是过拟合了吗，另外这种提高精度的方法可取吗，需要注意什么\r\n",
        "state": "closed",
        "user": "xujiang1",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-14T03:06:41+00:00",
        "updated_at": "2024-02-20T06:36:49+00:00",
        "closed_at": "2024-02-20T06:35:43+00:00",
        "comments_count": [
            "zh-hike",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2653,
        "title": "关于特征提取模型对服装特征不敏感的问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5和PaddlePaddle 2.1.4\r\n 2. 涉及的其他产品使用的版本号：\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/cuDNN 8.8.0等\r\n\r\n\r\n使用PPShiTu-V2，想做一个工服识别的功能，特征提取模型对服装的各项特征不够敏感，如下图：\r\n图库：\r\n![image](https://user-images.githubusercontent.com/77143808/219995781-eddedef6-cc0b-482e-8f18-c97bec0841e3.png)\r\n![image](https://user-images.githubusercontent.com/77143808/219995817-86ce64cb-2f33-41a0-91b2-ff194c15340f.png)\r\n![image](https://user-images.githubusercontent.com/77143808/219995844-bc2dc63a-5d0f-427c-9fe7-aae3f741930e.png)\r\n寻找了一些测试图片，测试结果如下：\r\n![test](https://user-images.githubusercontent.com/77143808/219996891-0e05dacd-e3ab-4aae-8670-5b1f38fd71c7.png)\r\n识别效果不太好，鲁棒性太差，请问有什么好的解决办法吗？\r\n\r\n\r\n\r\n\r\n",
        "state": "open",
        "user": "PaulX1029",
        "closed_by": null,
        "created_at": "2023-02-20T02:40:07+00:00",
        "updated_at": "2024-02-26T04:28:15+00:00",
        "closed_at": null,
        "comments_count": [
            "PaulX1029",
            "RainFrost1",
            "PaulX1029"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2651,
        "title": "模型配置yml文件中的参数有相关完整文档来解析的吗",
        "body": " 模型的配置里面的参数有什么可选项和相关文档来解释。例如PaddleClas\\ppcls\\configs\\PULC\\vehicle_attribute下的PPLCNet_x1_0.yaml中\r\n“\r\nLoss:\r\n  Train:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n  Eval:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n\r\n”\r\n我不太清楚loss有哪些可选的。希望能得到帮助\r\n",
        "state": "closed",
        "user": "anheidadi",
        "closed_by": "anheidadi",
        "created_at": "2023-02-16T08:34:24+00:00",
        "updated_at": "2024-08-22T08:43:47+00:00",
        "closed_at": "2024-08-22T08:43:44+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2650,
        "title": "关于主体检测",
        "body": "请问我用Paddledetection训练完主体检测后，进行推理，并对结果可视化，然后导出模型用于paddleclass，设置\r\n                      rec_nms_thresold: 1\r\n主体检测的：threshold: 与paddledetection中可视化的阈值是一样的，设为0.2\r\n                      max_det_results: 100\r\npaddleclass: return_k: 100\r\n                    score_thres: 0.1\r\n底库数据也没有问题，但这样输出的结果只有图像最外围的边框，本该主体检测能检测出的边框都没有，是什么原因呢\r\n\r\n",
        "state": "closed",
        "user": "Jeling-W",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-15T10:36:54+00:00",
        "updated_at": "2024-02-20T06:36:51+00:00",
        "closed_at": "2024-02-20T06:35:44+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2657,
        "title": "404： (https://github.com/PaddlePaddle/FluidDoc/blob/develop/doc/paddle/install/install_Kunlun_zh.md)",
        "body": "如下，连接，点击后，404 \r\n1. 主页面，如下：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.1/docs/zh_CN/extension/train_on_xpu.md\r\n2. 点画圈连接，404 详细地址，如下：\r\n<img width=\"968\" alt=\"fe81f341e45da8d2854644d5870911d8\" src=\"https://user-images.githubusercontent.com/93261295/220514308-4cae0abb-08d9-4694-9aed-b3711744833d.png\">\r\n\r\n本文档介绍了目前昆仑支持的模型以及如何在昆仑设备上训练这些模型。支持昆仑的PaddlePaddle安装参考install_kunlun(https://github.com/PaddlePaddle/FluidDoc/blob/develop/doc/paddle/install/install_Kunlun_zh.md)\r\n",
        "state": "closed",
        "user": "destinyny",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-22T03:31:00+00:00",
        "updated_at": "2025-03-04T09:19:12+00:00",
        "closed_at": "2025-03-04T06:35:53+00:00",
        "comments_count": [
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2658,
        "title": "多标签图像分类分类Paddle转ONNX模型",
        "body": "使用python 脚本推理infer结果与导出onnx模型结果不一样，发现是导出模型对所有类别softmax, 没有单独分类。“（softmax_1.tmp_0）”,模型导出onnx时需要如何设置？\r\n",
        "state": "closed",
        "user": "YSYS101010000",
        "closed_by": "YSYS101010000",
        "created_at": "2023-02-22T04:32:55+00:00",
        "updated_at": "2023-06-20T03:05:11+00:00",
        "closed_at": "2023-06-20T03:05:08+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2661,
        "title": "关于使用VeRI-Wild数据集训练车辆ReID模型配置文件的问题",
        "body": "请问在ppcls/config/Vehicle/ResNet50_ReID.yaml配置文件中的train_list_start0.txt是什么？\r\n![0](https://user-images.githubusercontent.com/98454125/220857677-e3f81383-0bc6-412d-b6d0-8b860cd3956e.PNG)\r\n在VeRI-Wild数据集中的train_test_split文件夹下并没有该文件的存在\r\n![1](https://user-images.githubusercontent.com/98454125/220857920-218d4455-8d54-4dd7-acd6-0164b29e517e.PNG)\r\n",
        "state": "open",
        "user": "Hyperjunct",
        "closed_by": null,
        "created_at": "2023-02-23T08:38:40+00:00",
        "updated_at": "2024-02-26T04:28:12+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "Hyperjunct",
            "Zhw1997",
            "Zhw1997",
            "Hyperjunct"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2664,
        "title": "用PP-HGNet  训练时间慢",
        "body": "请问一下，用 AI Studio 训练PP-HGNet 网络比较慢，很多时候训练不完。\r\n现在需要训练 30 种类别，每种大概1000多张图，我可以每次训练 5 种 或者 10种吗，后续再添加进去。需要怎么操作 ，感谢！",
        "state": "closed",
        "user": "caojun226",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-23T11:22:16+00:00",
        "updated_at": "2025-03-04T09:19:14+00:00",
        "closed_at": "2025-03-04T06:35:54+00:00",
        "comments_count": [
            "zengshao0622",
            "caojun226",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2665,
        "title": "PPLCNet-2.5的ReID模型训练有配置文件吗？",
        "body": "我在PaddleDetection上看到\r\n![image](https://user-images.githubusercontent.com/26297768/221106387-61023e30-db5d-4db2-a36f-604aff5ae340.png)\r\n\r\n\r\nhttps://github.com/PaddlePaddle/PaddleDetection/blob/release/2.6/configs/mot/deepsort/reid/README_cn.md\r\n\r\n但是行人重识别的我只看到这三个：\r\nhttps://github.com/PaddlePaddle/PaddleClas/tree/release/2.5/ppcls/configs/reid/strong_baseline",
        "state": "closed",
        "user": "yeyupiaoling",
        "closed_by": "yeyupiaoling",
        "created_at": "2023-02-24T06:18:35+00:00",
        "updated_at": "2023-03-23T02:35:49+00:00",
        "closed_at": "2023-03-23T02:35:45+00:00",
        "comments_count": [
            "zengshao0622"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2669,
        "title": "测试mobilenetV1和InceptionV3的预训练模型在ImageNet上精度为0",
        "body": "下载了mobilenetV1和InceptionV3的预训练模型，想看一看这两个预训练模型的精度，按照readme给的说明测试了下， 精度为0，代码都没动过，执行命令为： 同样命令执行MobileNetV2 精度正常\r\n```\r\npython tools/eval.py -c ./ppcls/configs/ImageNet/Inception/InceptionV3.yaml \\\r\n -o Global.pretrained_model=models/InceptionV3_pretrained \\\r\n -o DataLoader.Eval.dataset.cls_label_path=./dataset/ILSVRC2012/dataset.txt\" \\\r\n -o DataLoader.Eval.loader.num_workers=0 \\\r\n -o Global.device=cpu\r\n```\r\n\r\n```\r\npython tools/eval.py -c ./ppcls/configs/ImageNet/MobileNetV1/MobileNetV1.yaml \\\r\n -o Global.pretrained_model=models/MobileNetV1_pretrained \\\r\n -o DataLoader.Eval.dataset.cls_label_path=./dataset/ILSVRC2012/dataset.txt\" \\\r\n -o DataLoader.Eval.loader.num_workers=0 \\\r\n -o Global.device=cpu\r\n```\r\n",
        "state": "open",
        "user": "schabc",
        "closed_by": null,
        "created_at": "2023-02-28T01:24:54+00:00",
        "updated_at": "2024-02-26T04:28:09+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "zhangyubo0722",
            "schabc",
            "schabc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2666,
        "title": "训练车辆ReID模型报错",
        "body": " PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5和PaddlePaddle 2.3.2\r\n\r\n 训练环境信息：\r\n  a. 操作系统，Windows\r\n  b. Python版本号，Python3.9.13\r\n  c. CUDA/cuDNN版本， CUDA12.0/cuDNN 8.4\r\n\r\n 使用pplcs/conifgs/Vehicle下的ResNet50_ReID.yaml和VeRI-Wild数据集训练车辆ReID模型，命令如下：\r\n python tools/train.py -c pplcs/conifgs/Vehicle/ResNet50_ReID.yaml\r\n 仅在配置文件中修改了标注文件的路径并缩小了batch size\r\n![0](https://user-images.githubusercontent.com/98454125/221344891-7bc554f7-8bd4-48f3-9bbd-605fcdad231e.png)\r\n\r\n在第一轮训练完成之间报错：\r\nOSError: (External) CUDA error(700), an illegal memory access was encountered.\r\n  [Hint: 'cudaErrorIllegalAddress'. The device encountered a load or store instruction on an invalid memory address. This leaves the process in an inconsistentstate and any further CUDA work will return the same error. To continue using CUDA, the process must be terminated and relaunched. ] (at ..\\paddle\\phi\\backends\\gpu\\cuda\\cuda_info.cc:258)\r\n\r\n![1](https://user-images.githubusercontent.com/98454125/221345033-b372614d-11fc-4ac2-89dd-46bfd264054e.png)\r\n\r\n以下是我的训练日志：\r\n[train.log](https://github.com/PaddlePaddle/PaddleClas/files/10830529/train.log)\r\n\r\n请问该如何解决上述问题？\r\n\r\n",
        "state": "closed",
        "user": "Hyperjunct",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-02-25T07:35:52+00:00",
        "updated_at": "2025-03-04T09:19:15+00:00",
        "closed_at": "2025-03-04T06:35:54+00:00",
        "comments_count": [
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2674,
        "title": "如何修改车辆ReID模型中的骨干网络？",
        "body": "请问ppcls/config/Vehicle/ResNet50_ReID.yaml中的Backbone, Neck和Head部分该如何替换？是否有相关的帮助文档？\r\n\r\n例如我想将原配置文件中的ResNet-50替换为ResNet-101或者其他的backbone，请问该如何替换？\r\n\r\n![221496137-24ef8409-5bb0-4ce4-b483-e97f5e39011f](https://user-images.githubusercontent.com/98454125/222132940-f7128afd-2f29-471d-bdd4-73d269c0d995.png)\r\n",
        "state": "closed",
        "user": "Hyperjunct",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-01T11:57:29+00:00",
        "updated_at": "2025-03-04T09:19:17+00:00",
        "closed_at": "2025-03-04T06:35:55+00:00",
        "comments_count": [
            "RainFrost1",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2670,
        "title": "关于C++部署RGB三通道的问题",
        "body": "你好，请问一下，我用C++进行部署，实际图像是RGB三通道的，但是用C++预测的结果跟灰度图像的预测结果一致，请问一下，在C++部署代码中如何去修改可以把图像转成RGB的进行预测",
        "state": "open",
        "user": "Hold-on-li",
        "closed_by": null,
        "created_at": "2023-02-28T10:46:20+00:00",
        "updated_at": "2024-02-26T04:28:07+00:00",
        "closed_at": null,
        "comments_count": [
            "RainFrost1",
            "Hold-on-li"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2675,
        "title": "请问repo中是否有ResNet50 v1的实现和配置？",
        "body": "RT.",
        "state": "closed",
        "user": "Jaason19",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-01T13:37:39+00:00",
        "updated_at": "2025-03-04T09:19:20+00:00",
        "closed_at": "2025-03-04T06:35:56+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2677,
        "title": "找不到faiss::write_index方法",
        "body": "android armv7 运行时报错，提示faiss库方法找不到，请问https://paddle-inference-dist.bj.bcebos.com/faiss1.5.3.tar.gz对应的armv7faiss库是否正确？\r\n\r\n![image](https://user-images.githubusercontent.com/28588015/222379032-c787c84a-f2a5-4bac-b395-542741e88f73.png)\r\n",
        "state": "closed",
        "user": "Satsna",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-02T08:54:17+00:00",
        "updated_at": "2025-06-10T06:40:09+00:00",
        "closed_at": "2025-06-10T06:39:31+00:00",
        "comments_count": [
            "RainFrost1",
            "Satsna",
            "Satsna",
            "Satsna",
            "Satsna",
            "RainFrost1",
            "HoneyLoveven",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2684,
        "title": "问一下resnet50_vd_ssld的教师模型和学生模型分别是哪个",
        "body": "问一下resnet50_vd_ssld的教师模型和学生模型分别是哪个",
        "state": "closed",
        "user": "linxiaodan-bit",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-03T14:13:29+00:00",
        "updated_at": "2025-03-04T09:19:21+00:00",
        "closed_at": "2025-03-04T06:35:57+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2689,
        "title": "使用服务器进行训练，请问如何修改使用GPU的个数以及使用哪个GPU",
        "body": null,
        "state": "closed",
        "user": "guoyunqingyue",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-08T02:08:52+00:00",
        "updated_at": "2025-03-04T09:19:23+00:00",
        "closed_at": "2025-03-04T06:35:58+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2688,
        "title": "Engine.infer()方法的行为很奇怪",
        "body": "Engine.infer()方法没有返回值，而是将预测结果print至控制台，甚至没有使用logger等常用的日志工具。详见：\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/4cd9dc0e057331a65257d53938f64804fca020ac/ppcls/engine/engine.py#L539-L544",
        "state": "closed",
        "user": "parap1uie-s",
        "closed_by": "parap1uie-s",
        "created_at": "2023-03-07T10:29:54+00:00",
        "updated_at": "2023-04-11T11:33:19+00:00",
        "closed_at": "2023-04-11T11:33:16+00:00",
        "comments_count": [
            "RainFrost1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2692,
        "title": "读取数据时异常",
        "body": "Paddle版本2.3.2\r\n想用工程里边的mobilenetv3训练自己的数据集然后就报错了\r\n\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/152096.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/51542.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/107756.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_5video2_1867.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_13video1_2275.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_6video3_1725.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/147207.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/139045.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/88569.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_4video1_2839.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/81380.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_2video2_3567.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_13video2_415.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_10video2_2768.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/40408.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/41097.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_8video4_10467.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_7video1_2766.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/133193.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_6video2_978.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_2video3_8576.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_15video1_3234.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_10video4_10139.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_3video1_4368.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_12video4_11590.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/40408.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_13video1_2815.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/41372.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/152451.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_5video3_11619.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/145695.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/74092.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_13video3_472.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/136362.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_5video2_4788.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_9video2_3901.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/133751.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_9video1_6700.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_6video2_2223.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/133171.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/93549.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_3video4_2856.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_2video3_13085.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/140552.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/55464.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_13video3_15919.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_5video3_10589.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_8video4_12717.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_14video2_3197.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/86326.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_5video1_6242.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/23363.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_8video4_7781.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_3video1_3679.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/22212.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_1video2_3136.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_10video1_5418.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/77270.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_6video1_1424.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/134706.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_10video4_12110.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_7video1_3831.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_9video1_1361.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_11video2_1199.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/85164.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_3video3_17945.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/21496.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_9video2_5946.jpg with msg: list index out of range\r\nFatal Python error: Cannot recover from stack overflow.\r\n\r\nCurrent thread 0x00007f16d82db740 (most recent call first):\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 419 in usesTime\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 577 in usesTime\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 609 in format\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 869 in format\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1025 in emit\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1127 in emit\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 894 in handle\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1586 in callHandlers\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1524 in handle\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1514 in _log\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1407 in error\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/utils/logger.py\", line 118 in error\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/utils/logger.py\", line 96 in wrapper\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 78 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/60096.jpg with msg: list index out of range\r\nPaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __ge[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_4video2_553.jpg with msg: list index out of range\r\ntitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getit[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_12video4_11034.jpg with msg: list index out of range\r\nem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  ...\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_6video2_3531.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_0video1_502.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_5video3_18219.jpg with msg: list index out of range\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\nNo stack trace in paddle, may be caused by external reasons.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Process abort signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1678347503 (unix time) try \"date -d @1678347503\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGABRT (@0xac2) received by PID 2754 (TID 0x7f16d82db740) from PID 2754 ***]\r\n\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/139683.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_12video1_6249.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/105718.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_6video4_11938.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_0video1_3333.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_12video4_5958.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_15video2_2290.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/101424.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_15video1_5879.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/30250.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/106285.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/pos/part_3video1_639.jpg with msg: list index out of range\r\n[2023/03/08 22:38:23] ppcls ERROR: Exception occured when parse line: ./dataset/Person_BC/train/neg/part_0video1_223.jpg with msg: list index out of range\r\nFatal Python error: Cannot recover from stack overflow.\r\n\r\nCurrent thread 0x00007f16d82db740 (most recent call first):\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 419 in usesTime\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 577 in usesTime\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 609 in format\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 869 in format\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1025 in emit\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1127 in emit\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 894 in handle\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1586 in callHandlers\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1524 in handle\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1514 in _log\r\n  File \"/opt/conda/lib/python3.7/logging/__init__.py\", line 1407 in error\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/utils/logger.py\", line 118 in error\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/utils/logger.py\", line 96 in wrapper\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 78 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/data/dataloader/common_dataset.py\", line 80 in __getitem__\r\n  ...\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\nNo stack trace in paddle, may be caused by external reasons.\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Process abort signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1678347503 (unix time) try \"date -d @1678347503\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGABRT (@0xac7) received by PID 2759 (TID 0x7f16d82db740) from PID 2759 ***]\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/engine/engine.py\", line 356, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/home/wangzhiwei/workspace/PaddleClas/ppcls/engine/train/train.py\", line 24, in train_epoch\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 620, in _get_data\r\n    data = self._data_queue.get(timeout=self._timeout)\r\n  File \"/opt/conda/lib/python3.7/multiprocessing/queues.py\", line 105, in get\r\n    raise Empty\r\n_queue.Empty\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/conda/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 534, in _thread_loop\r\n    batch = self._get_data()\r\n  File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 636, in _get_data\r\n    \"pids: {}\".format(len(failed_workers), pids))\r\nRuntimeError: DataLoader 4 workers exit unexpectedly, pids: 2754, 2759, 2760, 2761\r\n\r\n    for iter_id, batch in enumerate(engine.train_dataloader):\r\n  File \"/opt/conda/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 746, in __next__\r\n    data = self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:166)",
        "state": "closed",
        "user": "TD-wzw",
        "closed_by": "TD-wzw",
        "created_at": "2023-03-09T07:42:33+00:00",
        "updated_at": "2024-07-15T17:51:33+00:00",
        "closed_at": "2023-03-09T08:03:00+00:00",
        "comments_count": [
            "VisImage"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2694,
        "title": "Docker版本,测试ShiTuV2调用paddleclas一直报告参数错误",
        "body": "docker 版本 paddlecloud/paddleclas   2.4-cpu-latest\r\n正常docker运行后可以测试推理 person_exist 等pulc小模型.\r\n测试ShituV2的代码,按照文档中执行:\r\npaddleclas --build_gallery=True --model_name=\"PP-ShiTuV2\" \\\r\n-o IndexProcess.image_root=./drink_dataset_v2.0/gallery/ \\\r\n-o IndexProcess.index_dir=./drink_dataset_v2.0/index \\\r\n-o IndexProcess.data_file=./drink_dataset_v2.0/gallery/drink_label.txt\r\n\r\n这个命令 后一直报错:\r\npaddleclas: error: the following arguments are required: --infer_imgs\r\n没有思路解决.\r\n谢谢!\r\n\r\n\r\n",
        "state": "closed",
        "user": "matakk",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-11T10:23:13+00:00",
        "updated_at": "2025-03-04T09:19:25+00:00",
        "closed_at": "2025-03-04T06:35:58+00:00",
        "comments_count": [
            "zh-hike",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2697,
        "title": "threading predict Intel MKL function load error",
        "body": "只有在开启多线程预测的时候会遇到 Intel MKL function load error",
        "state": "closed",
        "user": "smartliuyonggang",
        "closed_by": "smartliuyonggang",
        "created_at": "2023-03-13T05:57:03+00:00",
        "updated_at": "2023-03-13T08:16:57+00:00",
        "closed_at": "2023-03-13T08:16:54+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2695,
        "title": "SwinTransformer_base_patch4_window12_384模型训练失败",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：如PaddleClas release/2.4和paddlepaddle-gpu 2.4.1.post112\r\n 2. 涉及的其他产品使用的版本号：无\r\n 3. 训练环境信息：\r\n      a. 具体操作系统，如Linux\r\n      b. Python版本号，如Python3.9\r\n      c. CUDA/cuDNN版本， 如CUDA10.2等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n![image](https://user-images.githubusercontent.com/65645246/224503397-37b3043c-2a6e-4643-b27b-06f9d8be7dc8.png)\r\n",
        "state": "closed",
        "user": "a-strong-python",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-11T17:41:07+00:00",
        "updated_at": "2025-03-04T09:19:27+00:00",
        "closed_at": "2025-03-04T06:35:59+00:00",
        "comments_count": [
            "cuicheng01",
            "a-strong-python",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2696,
        "title": "使用 python/predict_cls.py 预测时报错：给定的新形状和原始的张量大小不匹配",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.4和paddlepaddle-gpu 2.4.1.post112\r\n 2. 涉及的其他产品使用的版本号：无\r\n 3. 训练环境信息：\r\n        a. 具体操作系统：Linux\r\n        b. Python版本号：Python3.9\r\n        c. CUDA/cuDNN版本： CUDA10.2\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n \r\n![image](https://user-images.githubusercontent.com/65645246/224521419-9ef50348-69b9-4138-b3bc-c88eac374f8a.png)\r\n\r\n```\r\n/home/aistudio/work/PaddleClas-2.4.0/deploy\r\n2023-03-12 10:29:39 INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n2023-03-12 10:29:39 INFO: Global : \r\n2023-03-12 10:29:39 INFO:     batch_size : 16\r\n2023-03-12 10:29:39 INFO:     cpu_num_threads : 10\r\n2023-03-12 10:29:39 INFO:     enable_benchmark : True\r\n2023-03-12 10:29:39 INFO:     enable_mkldnn : True\r\n2023-03-12 10:29:39 INFO:     enable_profile : False\r\n2023-03-12 10:29:39 INFO:     gpu_mem : 8000\r\n2023-03-12 10:29:39 INFO:     infer_imgs : /home/aistudio/work/data/test\r\n2023-03-12 10:29:39 INFO:     inference_model_dir : models/SwinTransformer_infer\r\n2023-03-12 10:29:39 INFO:     ir_optim : True\r\n2023-03-12 10:29:39 INFO:     use_fp16 : False\r\n2023-03-12 10:29:39 INFO:     use_gpu : True\r\n2023-03-12 10:29:39 INFO:     use_tensorrt : False\r\n2023-03-12 10:29:39 INFO: PostProcess : \r\n2023-03-12 10:29:39 INFO:     SavePreLabel : \r\n2023-03-12 10:29:39 INFO:         save_dir : ./pre_label/\r\n2023-03-12 10:29:39 INFO:     Topk : \r\n2023-03-12 10:29:39 INFO:         class_id_map_file : /home/aistudio/work/data/data/labels.txt\r\n2023-03-12 10:29:39 INFO:         topk : 5\r\n2023-03-12 10:29:39 INFO:     main_indicator : Topk\r\n2023-03-12 10:29:39 INFO: PreProcess : \r\n2023-03-12 10:29:39 INFO:     transform_ops : \r\n2023-03-12 10:29:39 INFO:         ResizeImage : \r\n2023-03-12 10:29:39 INFO:             resize_short : 256\r\n2023-03-12 10:29:39 INFO:         CropImage : \r\n2023-03-12 10:29:39 INFO:             size : 224\r\n2023-03-12 10:29:39 INFO:         NormalizeImage : \r\n2023-03-12 10:29:39 INFO:             channel_num : 3\r\n2023-03-12 10:29:39 INFO:             mean : [0.485, 0.456, 0.406]\r\n2023-03-12 10:29:39 INFO:             order : \r\n2023-03-12 10:29:39 INFO:             scale : 0.00392157\r\n2023-03-12 10:29:39 INFO:             std : [0.229, 0.224, 0.225]\r\n2023-03-12 10:29:39 INFO:         ToCHWImage : None\r\nTraceback (most recent call last):\r\n  File \"python/predict_cls.py\", line 165, in <module>\r\n    main(config)\r\n  File \"python/predict_cls.py\", line 139, in main\r\n    batch_results = cls_predictor.predict(batch_imgs)\r\n  File \"python/predict_cls.py\", line 99, in predict\r\n    self.predictor.run()\r\nValueError: In user code:\r\n\r\n    File \"tools/export_model.py\", line 36, in <module>\r\n      engine.export()\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/engine/engine.py\", line 487, in export\r\n      paddle.jit.save(model, save_path)\r\n    File \"<decorator-gen-123>\", line 2, in save\r\n      \r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 26, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 649, in wrapper\r\n      func(layer, path, input_spec, **configs)\r\n    File \"<decorator-gen-122>\", line 2, in save\r\n      \r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 26, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 67, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/jit.py\", line 928, in save\r\n      inner_input_spec, with_hook=with_hook)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 580, in concrete_program_specify_input_spec\r\n      is_train=self._is_train_mode())\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 485, in get_concrete_program\r\n      concrete_program, partial_program_layer = self._program_cache[cache_key]\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 955, in __getitem__\r\n      self._caches[item_id] = self._build_once(item)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 944, in _build_once\r\n      **cache_key.kwargs)\r\n    File \"<decorator-gen-119>\", line 2, in from_func_spec\r\n      \r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 26, in __impl__\r\n      return wrapped_func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/base.py\", line 67, in __impl__\r\n      return func(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/program_translator.py\", line 888, in from_func_spec\r\n      outputs = static_func(*inputs)\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/engine/engine.py\", line 526, in forward\r\n      x = self.base_model(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 950, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 935, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 747, in forward\r\n      x = self.forward_features(x)\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 738, in forward_features\r\n      for layer in self.layers:\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 106, in convert_while_loop\r\n      _run_py_while(cond, body, getter, setter)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 165, in _run_py_while\r\n      body()\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 739, in forward_features\r\n      x = layer(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 950, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 935, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 536, in forward\r\n      for blk in self.blocks:\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 106, in convert_while_loop\r\n      _run_py_while(cond, body, getter, setter)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/dygraph_to_static/convert_operators.py\", line 165, in _run_py_while\r\n      body()\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 537, in forward\r\n      x = blk(x)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 950, in __call__\r\n      return self._dygraph_call_func(*inputs, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 935, in _dygraph_call_func\r\n      outputs = self.forward(*inputs, **kwargs)\r\n    File \"/home/aistudio/work/PaddleClas-2.4.0/ppcls/arch/backbone/legendary_models/swin_transformer.py\", line 355, in forward\r\n      x = x.reshape([B, H, W, C])\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/tensor/manipulation.py\", line 3662, in reshape\r\n      outputs={\"Out\": out, \"XShape\": x_shape},\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/layer_helper.py\", line 45, in append_op\r\n      return self.main_program.current_block().append_op(*args, **kwargs)\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 4023, in append_op\r\n      attrs=kwargs.get(\"attrs\", None),\r\n    File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 2858, in __init__\r\n      for frame in traceback.extract_stack():\r\n\r\n    InvalidArgumentError: The 'shape' in ReshapeOp is invalid. The input tensor X'size must be equal to the capacity of 'shape'. But received X's shape = [16, 3136, 128], X's size = 6422528, 'shape' is [16, 96, 96, 128], the capacity of 'shape' is 18874368.\r\n      [Hint: Expected capacity == in_size, but received capacity:18874368 != in_size:6422528.] (at /paddle/paddle/phi/infermeta/unary.cc:1435)\r\n      [operator < reshape2 > error]\r\n```",
        "state": "closed",
        "user": "a-strong-python",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-12T02:49:09+00:00",
        "updated_at": "2025-03-04T09:19:28+00:00",
        "closed_at": "2025-03-04T06:36:00+00:00",
        "comments_count": [
            "cuicheng01",
            "a-strong-python",
            "a-strong-python",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2702,
        "title": "paddleclas前向推理的时候遇到的问题，deploy/python/predict_cls运行报错",
        "body": "    from .ppcls.arch import backbone\r\nImportError: attempted relative import with no known parent package",
        "state": "closed",
        "user": "qumoy",
        "closed_by": "qumoy",
        "created_at": "2023-03-14T08:35:07+00:00",
        "updated_at": "2023-08-09T05:35:17+00:00",
        "closed_at": "2023-03-15T08:23:09+00:00",
        "comments_count": [
            "qumoy",
            "zhanghangzzz",
            "Quentin-Song"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2707,
        "title": "Linux 离线安装paddleclas，paddleclas.whl文件下载地址",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本：release/2.5以及PaddlePaddle版本:2.2.2\r\n 2. 部署环境信息：\r\n  a. 具体操作系统，如ubantu cpu环境\r\n  b. Python版本号，如Python3.9\r\n\r\n目前我已完成推理模型测试，使用paddleclas进行部署推理，代码如下：\r\nfrom paddleclas import PaddleClas\r\nclas = PaddleClas(inference_model_dir='output/inference/',\r\n                  use_gpu=False, use_tensorrt=False)\r\nresult = clas.predict('image/cla_images_down/test_roi/00000.jpg')\r\nprint(next(result))\r\n\r\n我想在linux环境下离线安装paddleclas,请问paddleclas.whl的官网下载地址有么，以及离线安装是否有文档或者是否有需要安装的离线库文件列表",
        "state": "closed",
        "user": "qumoy",
        "closed_by": "qumoy",
        "created_at": "2023-03-16T01:54:52+00:00",
        "updated_at": "2023-03-16T03:12:37+00:00",
        "closed_at": "2023-03-16T03:12:37+00:00",
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2709,
        "title": "训练topk一直为0",
        "body": "我按照\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/quick_start/quick_start_classification_new_user.md中的教程训练花的分类，训练输出如下\r\n![image](https://user-images.githubusercontent.com/27075974/225521462-a285bed4-3d0f-4af1-9cac-31c53f2feff5.png)\r\n参数配置如下\r\n[2023/03/16 12:50:48] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/03/16 12:50:48] ppcls INFO: Arch : \r\n[2023/03/16 12:50:48] ppcls INFO:     class_num : 102\r\n[2023/03/16 12:50:48] ppcls INFO:     name : ResNet50_vd\r\n[2023/03/16 12:50:48] ppcls INFO: DataLoader :\r\n[2023/03/16 12:50:48] ppcls INFO:     Eval :\r\n[2023/03/16 12:50:48] ppcls INFO:         dataset :\r\n[2023/03/16 12:50:48] ppcls INFO:             cls_label_path : ./dataset/flowers102/val_list.txt\r\n[2023/03/16 12:50:48] ppcls INFO:             image_root : ./dataset/flowers102\r\n[2023/03/16 12:50:48] ppcls INFO:             name : ImageNetDataset\r\n[2023/03/16 12:50:48] ppcls INFO:             transform_ops :\r\n[2023/03/16 12:50:48] ppcls INFO:                 DecodeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     channel_first : False\r\n[2023/03/16 12:50:48] ppcls INFO:                     to_rgb : True\r\n[2023/03/16 12:50:48] ppcls INFO:                 ResizeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     resize_short : 256\r\n[2023/03/16 12:50:48] ppcls INFO:                 CropImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     size : 224\r\n[2023/03/16 12:50:48] ppcls INFO:                 NormalizeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/03/16 12:50:48] ppcls INFO:                     order :\r\n[2023/03/16 12:50:48] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/03/16 12:50:48] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/03/16 12:50:48] ppcls INFO:         loader :\r\n[2023/03/16 12:50:48] ppcls INFO:             num_workers : 0\r\n[2023/03/16 12:50:48] ppcls INFO:             use_shared_memory : True\r\n[2023/03/16 12:50:48] ppcls INFO:         sampler :\r\n[2023/03/16 12:50:48] ppcls INFO:             batch_size : 64\r\n[2023/03/16 12:50:48] ppcls INFO:             drop_last : False\r\n[2023/03/16 12:50:48] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/03/16 12:50:48] ppcls INFO:             shuffle : False\r\n[2023/03/16 12:50:48] ppcls INFO:     Train :\r\n[2023/03/16 12:50:48] ppcls INFO:         dataset :\r\n[2023/03/16 12:50:48] ppcls INFO:             cls_label_path : ./dataset/flowers102/train_list.txt\r\n[2023/03/16 12:50:48] ppcls INFO:             image_root : ./dataset/flowers102\r\n[2023/03/16 12:50:48] ppcls INFO:             name : ImageNetDataset\r\n[2023/03/16 12:50:48] ppcls INFO:             transform_ops :\r\n[2023/03/16 12:50:48] ppcls INFO:                 DecodeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     channel_first : False\r\n[2023/03/16 12:50:48] ppcls INFO:                     to_rgb : True\r\n[2023/03/16 12:50:48] ppcls INFO:                 RandCropImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     size : 224\r\n[2023/03/16 12:50:48] ppcls INFO:                 RandFlipImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     flip_code : 1\r\n[2023/03/16 12:50:48] ppcls INFO:                 NormalizeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/03/16 12:50:48] ppcls INFO:                     order :\r\n[2023/03/16 12:50:48] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/03/16 12:50:48] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/03/16 12:50:48] ppcls INFO:         loader :\r\n[2023/03/16 12:50:48] ppcls INFO:             num_workers : 8\r\n[2023/03/16 12:50:48] ppcls INFO:             use_shared_memory : True\r\n[2023/03/16 12:50:48] ppcls INFO:         sampler :\r\n[2023/03/16 12:50:48] ppcls INFO:             batch_size : 16\r\n[2023/03/16 12:50:48] ppcls INFO:             drop_last : False\r\n[2023/03/16 12:50:48] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/03/16 12:50:48] ppcls INFO:             shuffle : True\r\n[2023/03/16 12:50:48] ppcls INFO: Global :\r\n[2023/03/16 12:50:48] ppcls INFO:     checkpoints : None\r\n[2023/03/16 12:50:48] ppcls INFO:     device : gpu\r\n[2023/03/16 12:50:48] ppcls INFO:     epochs : 20\r\n[2023/03/16 12:50:48] ppcls INFO:     eval_during_train : True\r\n[2023/03/16 12:50:48] ppcls INFO:     eval_interval : 1\r\n[2023/03/16 12:50:48] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2023/03/16 12:50:48] ppcls INFO:     output_dir : ./output/\r\n[2023/03/16 12:50:48] ppcls INFO:     pretrained_model : None\r\n[2023/03/16 12:50:48] ppcls INFO:     print_batch_step : 10\r\n[2023/03/16 12:50:48] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/03/16 12:50:48] ppcls INFO:     save_interval : 1\r\n[2023/03/16 12:50:48] ppcls INFO:     use_visualdl : False\r\n[2023/03/16 12:50:48] ppcls INFO: Infer :\r\n[2023/03/16 12:50:48] ppcls INFO:     PostProcess :\r\n[2023/03/16 12:50:48] ppcls INFO:         class_id_map_file : ./datase/flowers102t/labels.txt\r\n[2023/03/16 12:50:48] ppcls INFO:         name : Topk\r\n[2023/03/16 12:50:48] ppcls INFO:         topk : 5\r\n[2023/03/16 12:50:48] ppcls INFO:     batch_size : 2\r\n[2023/03/16 12:50:48] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/03/16 12:50:48] ppcls INFO:     transforms :\r\n[2023/03/16 12:50:48] ppcls INFO:         DecodeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:             channel_first : False\r\n[2023/03/16 12:50:48] ppcls INFO:             to_rgb : True\r\n[2023/03/16 12:50:48] ppcls INFO:         ResizeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:             resize_short : 256\r\n[2023/03/16 12:50:48] ppcls INFO:         CropImage :\r\n[2023/03/16 12:50:48] ppcls INFO:             size : 224\r\n[2023/03/16 12:50:48] ppcls INFO:         NormalizeImage :\r\n[2023/03/16 12:50:48] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/03/16 12:50:48] ppcls INFO:             order :\r\n[2023/03/16 12:50:48] ppcls INFO:             scale : 1.0/255.0\r\n[2023/03/16 12:50:48] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/03/16 12:50:48] ppcls INFO:         ToCHWImage : None\r\n[2023/03/16 12:50:48] ppcls INFO: Loss :\r\n[2023/03/16 12:50:48] ppcls INFO:     Eval : \r\n[2023/03/16 12:50:48] ppcls INFO:         CELoss :\r\n[2023/03/16 12:50:48] ppcls INFO:             weight : 1.0\r\n[2023/03/16 12:50:48] ppcls INFO:     Train :\r\n[2023/03/16 12:50:48] ppcls INFO:         CELoss :\r\n[2023/03/16 12:50:48] ppcls INFO:             weight : 1.0\r\n[2023/03/16 12:50:48] ppcls INFO: Metric :\r\n[2023/03/16 12:50:48] ppcls INFO:     Eval :\r\n[2023/03/16 12:50:48] ppcls INFO:         TopkAcc :\r\n[2023/03/16 12:50:48] ppcls INFO:             topk : [1, 5]\r\n[2023/03/16 12:50:48] ppcls INFO:     Train :\r\n[2023/03/16 12:50:48] ppcls INFO:         TopkAcc :\r\n[2023/03/16 12:50:48] ppcls INFO:             topk : [1, 5]\r\n[2023/03/16 12:50:48] ppcls INFO: Optimizer :\r\n[2023/03/16 12:50:48] ppcls INFO:     lr :\r\n[2023/03/16 12:50:48] ppcls INFO:         learning_rate : 0.0125\r\n[2023/03/16 12:50:48] ppcls INFO:         name : Cosine\r\n[2023/03/16 12:50:48] ppcls INFO:         warmup_epoch : 5\r\n[2023/03/16 12:50:48] ppcls INFO:     momentum : 0.9\r\n[2023/03/16 12:50:48] ppcls INFO:     name : Momentum\r\n[2023/03/16 12:50:48] ppcls INFO:     regularizer :\r\n[2023/03/16 12:50:48] ppcls INFO:         coeff : 1e-05\r\n[2023/03/16 12:50:48] ppcls INFO:         name : L2\r\n[2023/03/16 12:50:48] ppcls INFO: profiler_options : None\r\n[2023/03/16 12:50:48] ppcls INFO: train with paddle 2.4.1 and device Place(gpu:0)\r\n",
        "state": "closed",
        "user": "czzzy",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-16T05:17:51+00:00",
        "updated_at": "2025-03-04T09:19:31+00:00",
        "closed_at": "2025-03-04T06:36:01+00:00",
        "comments_count": [
            "cuicheng01",
            "czzzy",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2715,
        "title": "可以提供一下生成train.txt的代码或者脚本吗",
        "body": "使用HGNET训练分类网络，制作数据集，可以分享一下制作train.txt、test.txt的代码吗，万分感谢\r\n\r\n",
        "state": "closed",
        "user": "jingmingtao",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-21T02:54:04+00:00",
        "updated_at": "2025-05-06T06:35:55+00:00",
        "closed_at": "2025-05-06T06:35:50+00:00",
        "comments_count": [
            "zengshao0622",
            "monkeycc",
            "YELLOWZAN",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2716,
        "title": "2.5版本 恢复训练如何进行",
        "body": "2.5版本我训练到了210轮现在想恢复训练，请问应该如何回复训练",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-21T07:41:43+00:00",
        "updated_at": "2025-03-04T09:19:32+00:00",
        "closed_at": "2025-03-04T06:36:02+00:00",
        "comments_count": [
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2719,
        "title": "resnet50 将bs从64修改成256，调整对应lr, 但是精度掉了很多。",
        "body": "resnet50 将bs从64修改成256，调整对应lr, 但是精度掉了很多。 在GPU上出现精度降低很多，调参很久依旧回复不到76.5",
        "state": "closed",
        "user": "HongweiChe",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-22T07:52:53+00:00",
        "updated_at": "2025-03-04T09:19:37+00:00",
        "closed_at": "2025-03-04T06:36:04+00:00",
        "comments_count": [
            "cuicheng01",
            "HongweiChe",
            "cuicheng01",
            "HongweiChe",
            "cuicheng01",
            "chaofanl",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2720,
        "title": "模型导出时报错",
        "body": "训练环境：\r\narm+xpu （飞腾cpu+昆仑xpu）\r\npython3.7\r\n\r\n导出模型时发生报错如下：\r\nImportError: /usr/local/lib64/python3.7/site-packages/faiss/../faiss_cpu.libs/libgomp-d22c30c5.so.1.0.0: cannot allocate memory in static TLS block\r\n\r\n尝试更新faiss_cpu无果，请问该如何解决",
        "state": "open",
        "user": "HustleOoo",
        "closed_by": null,
        "created_at": "2023-03-22T09:05:33+00:00",
        "updated_at": "2024-02-26T04:27:50+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "HustleOoo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2718,
        "title": "如何对网络进行tensorrt测速",
        "body": "请问如何把paddleclas中训练好的网络，用tensorrt进行预测，测试速度呀\r\n",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-22T03:31:46+00:00",
        "updated_at": "2025-03-04T09:19:35+00:00",
        "closed_at": "2025-03-04T06:36:03+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2725,
        "title": "使用paddleserver部署paddleCls，如何输出top5？",
        "body": "使用paddleserver部署paddleCls，如何输出top5？\r\n\r\n使用python predict_cls.py可以输出top5，但使用paddlerserver部署后只能输出top1，在哪里可以修改这个参数？",
        "state": "closed",
        "user": "chengshaoxi0",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-26T12:39:24+00:00",
        "updated_at": "2025-03-04T09:19:38+00:00",
        "closed_at": "2025-03-04T06:36:04+00:00",
        "comments_count": [
            "cuicheng01",
            "chengshaoxi0",
            "chengshaoxi0",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2726,
        "title": "求助，PP-ShiTu主体检测模型推理时出现问题",
        "body": "win11系统，电脑安装了miniconda后配置了paddlepaddle,然后在终端按照文档克隆并安装了paddleclas,在pycharm里运行predict_det.py文件时出现以下错误：\r\n<img width=\"1269\" alt=\"微信图片_20230325161357\" src=\"https://user-images.githubusercontent.com/128710784/227778048-c6a799d3-0509-485e-8c82-20600e00d415.png\">\r\n请问这是什么原因？",
        "state": "open",
        "user": "zhanghangzzz",
        "closed_by": null,
        "created_at": "2023-03-26T13:14:58+00:00",
        "updated_at": "2024-02-26T04:27:48+00:00",
        "closed_at": null,
        "comments_count": [
            "zengshao0622",
            "zhanghangzzz",
            "zengshao0622",
            "zhanghangzzz",
            "zhanghangzzz"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2727,
        "title": "二分类医学影像检验怎么自定义函数计算recall，F",
        "body": "Paddleclas的eval.py只给出了loss，top1等指标。我如何获取模型的分类结果以便于我自定义函数算出模型的recall等其他指标",
        "state": "open",
        "user": "Wangyibo321",
        "closed_by": null,
        "created_at": "2023-03-26T14:28:00+00:00",
        "updated_at": "2024-02-26T04:27:47+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "Wangyibo321",
            "cuicheng01",
            "Wangyibo321",
            "Wangyibo321"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2731,
        "title": "GoogleNet Loss发散",
        "body": "PaddleClas release/v2.5.0\r\nPaddleClas/ppcls/static/train.py静态图训练\r\n基于PaddleClas/ppcls/configs/ImageNet/Inception/GoogLeNet.yaml的config文件\r\n原始参数的学习率为0.01，4卡，batchsize=64，epochs=200\r\n根据学习率线性原则，我尝试了多组参数，都有不同程度的问题\r\n我训练采用了8卡，batchsize=512，epochs=260，这三个参数控制不变。LR按照公式应该为0.01\\*2\\*8=0.16\r\n1. V100训，LR=0.16，loss为nan\r\n`[2023/03/10 15:22:29] ppcls INFO: END epoch:4   train  loss: 10.5109 top1:  0.0075 top5:  0.0311 batch_cost: 1.72545 s, reader_cost: 0.73170 s, batch_cost_sum: 531.43794 s,\r\n[2023/03/10 15:23:08] ppcls INFO: eval step:10/12   lr: 0.000000, loss: 10.2267 top1:  0.0256 top5:  0.0427 batch_cost: 3.93402 s, reader_cost: 3.55247 s, ips: 130.14687 samples/sec.\r\n[2023/03/10 15:23:08] ppcls INFO: END eval  loss: 10.1443 top1:  0.0218 top5:  0.0397 batch_cost: 2.99022 s, reader_cost: 2.66437 s, batch_cost_sum: 23.92174 s, ips: 171.22504 samples/sec.\r\n[2023/03/10 15:23:33] ppcls INFO: epoch:5   train step:10/312  lr: 0.160000, loss: 10.1033 top1:  0.0137 top5:  0.0527 batch_cost: 2.12634 s, reader_cost: 1.18384 s, ips: 240.78891 samples/sec.\r\n[2023/03/10 15:23:48] ppcls INFO: epoch:5   train step:20/312  lr: 0.160000, loss: 10.0797 top1:  0.0137 top5:  0.0605 batch_cost: 1.71752 s, reader_cost: 0.93166 s, ips: 298.10482 samples/sec.\r\n[2023/03/10 15:24:07] ppcls INFO: epoch:5   train step:30/312  lr: 0.160000, loss:  9.8848 top1:  0.0195 top5:  0.0762 batch_cost: 1.78643 s, reader_cost: 1.10920 s, ips: 286.60467 samples/sec.\r\n[2023/03/10 15:24:23] ppcls INFO: epoch:5   train step:40/312  lr: 0.160000, loss: 10.0230 top1:  0.0098 top5:  0.0410 batch_cost: 1.74012 s, reader_cost: 1.10945 s, ips: 294.23223 samples/sec.\r\n[2023/03/10 15:24:42] ppcls INFO: epoch:5   train step:50/312  lr: 0.160000, loss: 10.4545 top1:  0.0156 top5:  0.0488 batch_cost: 1.76497 s, reader_cost: 1.06466 s, ips: 290.08975 samples/sec.\r\n[2023/03/10 15:24:58] ppcls INFO: epoch:5   train step:60/312  lr: 0.160000, loss: 10.8923 top1:  0.0059 top5:  0.0195 batch_cost: 1.73792 s, reader_cost: 1.00511 s, ips: 294.60507 samples/sec.\r\n[2023/03/10 15:25:17] ppcls INFO: epoch:5   train step:70/312  lr: 0.160000, loss:     nan top1:  0.0000 top5:  0.0000 batch_cost: 1.76621 s, reader_cost: 0.93592 s, ips: 289.88627 samples/sec.\r\n[2023/03/10 15:25:33] ppcls INFO: epoch:5   train step:80/312  lr: 0.160000, loss:     nan top1:  0.0000 top5:  0.0000 batch_cost: 1.74204 s, reader_cost: 0.86519 s, ips: 293.90764 samples/sec.\r\n[2023/03/10 15:25:51] ppcls INFO: epoch:5   train step:90/312  lr: 0.160000, loss:     nan top1:  0.0000 top5:  0.0039 batch_cost: 1.74813 s, reader_cost: 0.81782 s, ips: 292.88438 samples/sec.\r\n[2023/03/10 15:26:07] ppcls INFO: epoch:5   train step:100/312  lr: 0.159999, loss:     nan top1:  0.0000 top5:  0.0020 batch_cost: 1.73421 s, reader_cost: 0.77123 s, ips: 295.23521 samples/sec.\r\n[2023/03/10 15:26:25] ppcls INFO: epoch:5   train step:110/312  lr: 0.159999, loss:     nan top1:  0.0000 top5:  0.0000 batch_cost: 1.73959 s, reader_cost: 0.72059 s, ips: 294.32270 samples/sec.\r\n[2023/03/10 15:26:41] ppcls INFO: epoch:5   train step:120/312  lr: 0.159999, loss:     nan top1:  0.0000 top5:  0.0059 batch_cost: 1.73075 s, reader_cost: 0.69257 s, ips: 295.82510 samples/sec.\r\n[2023/03/10 15:26:59] ppcls INFO: epoch:5   train step:130/312  lr: 0.159999, loss:     nan top1:  0.0000 top5:  0.0059 batch_cost: 1.73725 s, reader_cost: 0.63771 s, ips: 294.71827 samples/sec.\r\n[2023/03/10 15:27:17] ppcls INFO: epoch:5   train step:140/312  lr: 0.159999, loss:     nan top1:  0.0000 top5:  0.0059 batch_cost: 1.73839 s, reader_cost: 0.59091 s, ips: 294.52592 samples/sec.\r\n`\r\n2. V100训，LR=0.08，loss为nan\r\n`[2023/03/14 10:33:30] ppcls INFO: epoch:3   train step:110/312  lr: 0.053590, loss:  9.7275 top1:  0.0176 top5:  0.0996 batch_cost: 1.21926 s, reader_cost: 0.02299 s, ips: 419.92794 samples/sec.\r\n[2023/03/14 10:33:41] ppcls INFO: epoch:3   train step:120/312  lr: 0.054103, loss:  9.9623 top1:  0.0234 top5:  0.0723 batch_cost: 1.20839 s, reader_cost: 0.02129 s, ips: 423.70488 samples/sec.\r\n[2023/03/14 10:33:52] ppcls INFO: epoch:3   train step:130/312  lr: 0.054615, loss: 10.5817 top1:  0.0039 top5:  0.0254 batch_cost: 1.19854 s, reader_cost: 0.02209 s, ips: 427.18508 samples/sec.\r\n[2023/03/14 10:34:05] ppcls INFO: epoch:3   train step:140/312  lr: 0.055128, loss: 10.8235 top1:  0.0020 top5:  0.0176 batch_cost: 1.20586 s, reader_cost: 0.02621 s, ips: 424.59483 samples/sec.\r\n[2023/03/14 10:34:15] ppcls INFO: epoch:3   train step:150/312  lr: 0.055641, loss: 10.7556 top1:  0.0000 top5:  0.0176 batch_cost: 1.19614 s, reader_cost: 0.02449 s, ips: 428.04180 samples/sec.\r\n[2023/03/14 10:34:27] ppcls INFO: epoch:3   train step:160/312  lr: 0.056154, loss: 26505928.0000 top1:  0.0000 top5:  0.0039 batch_cost: 1.19224 s, reader_cost: 0.03028 s, ips: 429.44332 samples/sec.\r\n[2023/03/14 10:34:39] ppcls INFO: epoch:3   train step:170/312  lr: 0.056667, loss:     nan top1:  0.0020 top5:  0.0098 batch_cost: 1.19156 s, reader_cost: 0.02897 s, ips: 429.68994 samples/sec.\r\n[2023/03/14 10:34:50] ppcls INFO: epoch:3   train step:180/312  lr: 0.057179, loss:     nan top1:  0.0000 top5:  0.0020 batch_cost: 1.19133 s, reader_cost: 0.05566 s, ips: 429.77278 samples/sec.\r\n[2023/03/14 10:35:00] ppcls INFO: epoch:3   train step:190/312  lr: 0.057692, loss:     nan top1:  0.0000 top5:  0.0020 batch_cost: 1.17733 s, reader_cost: 0.07871 s, ips: 434.88303 samples/sec.\r\n`\r\n3. LR=0.04，精度严重下降，best_acc=0.68，小于0.7070\r\n4. 切换到我们公司自己的计算卡，LR=0.16，loss不下降\r\n`[2023/03/24 14:20:15] ppcls INFO: epoch:4   train step:260/312  lr: 0.154564, loss: 11.0547 top1:  0.0000 top5:  0.0039 batch_cost: 0.64943 s, reader_cost: 0.17305 s, ips: 788.38802 samples/sec.\r\n[2023/03/24 14:20:22] ppcls INFO: epoch:4   train step:270/312  lr: 0.155590, loss: 11.0555 top1:  0.0000 top5:  0.0039 batch_cost: 0.65140 s, reader_cost: 0.17455 s, ips: 785.99916 samples/sec.\r\n[2023/03/24 14:20:28] ppcls INFO: epoch:4   train step:280/312  lr: 0.156615, loss: 11.0506 top1:  0.0000 top5:  0.0098 batch_cost: 0.65101 s, reader_cost: 0.17245 s, ips: 786.47022 samples/sec.\r\n[2023/03/24 14:20:35] ppcls INFO: epoch:4   train step:290/312  lr: 0.157641, loss: 11.0523 top1:  0.0020 top5:  0.0020 batch_cost: 0.65081 s, reader_cost: 0.17130 s, ips: 786.71365 samples/sec.\r\n[2023/03/24 14:20:41] ppcls INFO: epoch:4   train step:300/312  lr: 0.158667, loss: 11.0480 top1:  0.0000 top5:  0.0039 batch_cost: 0.64909 s, reader_cost: 0.16824 s, ips: 788.79841 samples/sec.\r\n[2023/03/24 14:20:47] ppcls INFO: epoch:4   train step:310/312  lr: 0.159692, loss: 11.0508 top1:  0.0000 top5:  0.0000 batch_cost: 0.64962 s, reader_cost: 0.16895 s, ips: 788.15565 samples/sec.\r\n[2023/03/24 14:20:49] ppcls INFO: END epoch:4   train  loss: 15839393614735003877376.0000 top1:  0.0011 top5:  0.0053 batch_cost: 0.64834 s, reader_cost: 0.16786 s, batch_cost_sum: 199.69018 s,\r\n[2023/03/24 14:20:59] ppcls INFO: eval step:10/97   lr: 0.000000, loss: 11.0561 top1:  0.0020 top5:  0.0039 batch_cost: 0.92563 s, reader_cost: 0.71669 s, ips: 553.13960 samples/sec.\r\n[2023/03/24 14:21:05] ppcls INFO: eval step:20/97   lr: 0.000000, loss: 11.0515 top1:  0.0000 top5:  0.0000 batch_cost: 0.73484 s, reader_cost: 0.53632 s, ips: 696.75178 samples/sec`\r\n5. 切换到我们公司自己的计算卡，LR=0.12，loss突然增大导致不收敛\r\n`[2023/03/28 04:46:33] ppcls INFO: epoch:31  train step:210/312  lr: 0.116790, loss:  4.7807 top1:  0.4570 top5:  0.6562 batch_cost: 0.64071 s, reader_cost: 0.09158 s, ips: 799.11953 samples/sec.\r\n[2023/03/28 04:46:39] ppcls INFO: epoch:31  train step:220/312  lr: 0.116783, loss:  4.6514 top1:  0.4531 top5:  0.7031 batch_cost: 0.63812 s, reader_cost: 0.09161 s, ips: 802.36235 samples/sec.\r\n[2023/03/28 04:46:46] ppcls INFO: epoch:31  train step:230/312  lr: 0.116775, loss:  4.9205 top1:  0.4043 top5:  0.6562 batch_cost: 0.63854 s, reader_cost: 0.09477 s, ips: 801.82858 samples/sec.\r\n[2023/03/28 04:46:52] ppcls INFO: epoch:31  train step:240/312  lr: 0.116767, loss: 11.3166 top1:  0.0332 top5:  0.1094 batch_cost: 0.63756 s, reader_cost: 0.09501 s, ips: 803.06311 samples/sec.\r\n[2023/03/28 04:46:59] ppcls INFO: epoch:31  train step:250/312  lr: 0.116760, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.63984 s, reader_cost: 0.09414 s, ips: 800.19987 samples/sec.\r\n[2023/03/28 04:47:05] ppcls INFO: epoch:31  train step:260/312  lr: 0.116752, loss: 11.0524 top1:  0.0020 top5:  0.0098 batch_cost: 0.63850 s, reader_cost: 0.09053 s, ips: 801.87608 samples/sec.\r\n[2023/03/28 04:47:11] ppcls INFO: epoch:31  train step:270/312  lr: 0.116744, loss: 11.0524 top1:  0.0020 top5:  0.0098 batch_cost: 0.63894 s, reader_cost: 0.08959 s, ips: 801.32267 samples/sec.\r\n[2023/03/28 04:47:17] ppcls INFO: epoch:31  train step:280/312  lr: 0.116737, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.63775 s, reader_cost: 0.08976 s, ips: 802.82523 samples/sec.\r\n[2023/03/28 04:47:24] ppcls INFO: epoch:31  train step:290/312  lr: 0.116729, loss: 11.0524 top1:  0.0020 top5:  0.0098 batch_cost: 0.63687 s, reader_cost: 0.09123 s, ips: 803.92670 samples/sec.\r\n[2023/03/28 04:47:30] ppcls INFO: epoch:31  train step:300/312  lr: 0.116721, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.63591 s, reader_cost: 0.09264 s, ips: 805.14025 samples/sec.\r\n[2023/03/28 04:47:36] ppcls INFO: epoch:31  train step:310/312  lr: 0.116713, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.63745 s, reader_cost: 0.09639 s, ips: 803.19694 samples/sec.\r\n[2023/03/28 04:47:38] ppcls INFO: END epoch:31  train  loss:     nan top1:  0.3402 top5:  0.5266 batch_cost: 0.63627 s, reader_cost: 0.09577 s, batch_cost_sum: 195.96976 s,\r\n[2023/03/28 04:47:48] ppcls INFO: eval step:10/97   lr: 0.000000, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.91719 s, reader_cost: 0.72803 s, ips: 558.22838 samples/sec.\r\n[2023/03/28 04:47:54] ppcls INFO: eval step:20/97   lr: 0.000000, loss: 11.0524 top1:  0.0000 top5:  0.0000 batch_cost: 0.72456 s, reader_cost: 0.53962 s, ips: 706.63230 samples/sec.`\r\n6. 切换到我们公司自己的计算卡，LR=0.08，loss收敛，但是掉精度，best_acc1=0.69783",
        "state": "closed",
        "user": "NascentAscension",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-03-29T03:11:33+00:00",
        "updated_at": "2025-03-04T09:19:40+00:00",
        "closed_at": "2025-03-04T06:36:05+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2743,
        "title": "random seed未被正确设置",
        "body": "## 问题描述\r\n当前PaddleClas中，多卡训练时seed未被正确设置，会导致dataloader的不同线程使用相同的random seed。\r\n在ppcls/engine/engine.py中：\r\n```\r\nif seed or seed == 0:\r\n    paddle.seed(seed)\r\n    np.random.seed(seed)\r\n    random.seed(seed)\r\n\r\n...\r\n\r\n# build dataloader here\r\nself.train_dataloader = build_dataloader(self.config[\"DataLoader\"], \"Train\", self.device, self.use_dali)\r\n\r\n...\r\n\r\nif self.config[\"Global\"][\"distributed\"]:\r\n    ...\r\n    paddle.seed(int(seed) + dist.get_rank())\r\n    np.random.seed(int(seed) + dist.get_rank())\r\n    random.seed(int(seed) + dist.get_rank())\r\n```\r\n\r\n在创建dataloader前，不同进程被设置为同一seed，会导致不同进程上相同worker_id的loader的seed相同。\r\n在创建dataloader后，设置随机种子为seed + get_rank已经太晚。\r\n\r\n## 解决方法\r\n\r\n1.创建dataloader时，自定义worker_init_fn，为每个loader设置不同的seed。目前PaddleClas有正确的worker_init_fn代码，但未被正确启用，需要在调用build_dataloader时指定seed。\r\n\r\n2.将随机种子设置为seed + get_rank。即，将相关代码从创建dataloader后移到创建dataloader前。\r\n\r\n## 版本信息\r\nPaddleClas devlop\r\nPaddlePaddle 2.4.2",
        "state": "open",
        "user": "flytocc",
        "closed_by": null,
        "created_at": "2023-04-07T08:55:56+00:00",
        "updated_at": "2024-02-26T04:27:41+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2733,
        "title": "paddlecls 模型训练报错，前几天还好好的！",
        "body": "工程师，您好，请问这为什么问题，前几天训练的时候还好好的！\r\n\r\nTraceback (most recent call last):\r\n  File \"./tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"D:\\xiaoxiong-d\\PaddleClas\\ppcls\\engine\\engine.py\", line 356, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"D:\\xiaoxiong-d\\PaddleClas\\ppcls\\engine\\train\\train.py\", line 67, in train_epoch\r\n    loss.backward()\r\n  File \"D:\\Anaconda\\envs\\PaddleClas\\lib\\site-packages\\decorator.py\", line 232, in fun\r\n    return caller(func, *(extras + args), **kw)\r\n  File \"D:\\Anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\wrapped_decorator.py\", line 26, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"D:\\Anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\framework.py\", line 534, in __impl__\r\n    return func(*args, **kwargs)\r\n  File \"D:\\Anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\dygraph\\varbase_patch_methods.py\", line 297, in backward\r\n    core.eager.run_backward([self], grad_tensor, retain_graph)\r\nOSError: (External) CUDNN error(8), CUDNN_STATUS_EXECUTION_FAILED.\r\n  [Hint: Please search for the error code(8) on website (https://docs.nvidia.com/deeplearning/cudnn/api/index.html#cudnnStatus_t) to get Nvidia's official soluti\r\non and advice about CUDNN Error.] (at C:\\home\\workspace\\Paddle\\paddle\\phi\\kernels\\gpudnn\\conv_grad_kernel.cu:502)\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-03-30T05:17:17+00:00",
        "updated_at": "2023-04-03T05:27:29+00:00",
        "closed_at": "2023-04-03T05:27:20+00:00",
        "comments_count": [
            "cuicheng01",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2736,
        "title": "如何使用双显卡训练模型，需要修改哪些配置？",
        "body": "您好，请问一下，如何使用双显卡训练模型，需要修改哪些配置？",
        "state": "open",
        "user": "happybear1015",
        "closed_by": null,
        "created_at": "2023-04-03T09:09:00+00:00",
        "updated_at": "2024-02-26T04:27:43+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "happybear1015"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2739,
        "title": "多显卡训练报错AttributeError: module 'paddle.fluid.libpaddle' has no attribute 'ProcessGroupNCCL'",
        "body": "(paddle_cls) D:\\xx\\PaddleClas>python -m paddle.distributed.launch --gpus=\"0,1\" tools/train.py -c ./ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml     \r\nLAUNCH INFO 2023-04-06 13:26:02,235 -----------  Configuration  ----------------------\r\nLAUNCH INFO 2023-04-06 13:26:02,235 devices: 0,1\r\nLAUNCH INFO 2023-04-06 13:26:02,235 elastic_level: -1\r\nLAUNCH INFO 2023-04-06 13:26:02,235 elastic_timeout: 30\r\nLAUNCH INFO 2023-04-06 13:26:02,235 gloo_port: 6767\r\nLAUNCH INFO 2023-04-06 13:26:02,236 host: None\r\nLAUNCH INFO 2023-04-06 13:26:02,236 ips: None\r\nLAUNCH INFO 2023-04-06 13:26:02,236 job_id: default\r\nLAUNCH INFO 2023-04-06 13:26:02,236 legacy: False\r\nLAUNCH INFO 2023-04-06 13:26:02,236 log_dir: log\r\nLAUNCH INFO 2023-04-06 13:26:02,236 log_level: INFO\r\nLAUNCH INFO 2023-04-06 13:26:02,236 master: None\r\nLAUNCH INFO 2023-04-06 13:26:02,236 max_restart: 3\r\nLAUNCH INFO 2023-04-06 13:26:02,236 nnodes: 1\r\nLAUNCH INFO 2023-04-06 13:26:02,236 nproc_per_node: None\r\nLAUNCH INFO 2023-04-06 13:26:02,236 rank: -1\r\nLAUNCH INFO 2023-04-06 13:26:02,236 run_mode: collective\r\nLAUNCH INFO 2023-04-06 13:26:02,237 server_num: None\r\nLAUNCH INFO 2023-04-06 13:26:02,237 servers:\r\nLAUNCH INFO 2023-04-06 13:26:02,237 start_port: 6070\r\nLAUNCH INFO 2023-04-06 13:26:02,237 trainer_num: None\r\nLAUNCH INFO 2023-04-06 13:26:02,237 trainers:\r\nLAUNCH INFO 2023-04-06 13:26:02,237 training_script: tools/train.py\r\nLAUNCH INFO 2023-04-06 13:26:02,237 training_script_args: ['-c', './ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml']\r\nLAUNCH INFO 2023-04-06 13:26:02,237 with_gloo: 1\r\nLAUNCH INFO 2023-04-06 13:26:02,237 --------------------------------------------------\r\nLAUNCH INFO 2023-04-06 13:26:02,238 Job: default, mode collective, replicas 1[1:1], elastic False\r\nLAUNCH INFO 2023-04-06 13:26:02,239 Run Pod: ylqihp, replicas 2, status ready\r\nLAUNCH INFO 2023-04-06 13:26:02,242 Watching Pod: ylqihp, replicas 2, status running\r\nLAUNCH WARNING 2023-04-06 13:26:02,377 save gpu info failed\r\nD:\\xx\\PaddleClas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\nD:\\xx\\PaddleClas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\n[2023/04/06 13:26:05] ppcls INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/04/06 13:26:05] ppcls INFO: Arch :\r\n[2023/04/06 13:26:05] ppcls INFO:     class_num : 2\r\n[2023/04/06 13:26:05] ppcls INFO:     name : ResNet101_vd\r\n[2023/04/06 13:26:05] ppcls INFO: DataLoader :\r\n[2023/04/06 13:26:05] ppcls INFO:     Eval :\r\n[2023/04/06 13:26:05] ppcls INFO:         dataset :\r\n[2023/04/06 13:26:05] ppcls INFO:             cls_label_path : ./dataset/val_list.txt\r\n[2023/04/06 13:26:05] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/06 13:26:05] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/06 13:26:05] ppcls INFO:             transform_ops :\r\n[2023/04/06 13:26:05] ppcls INFO:                 DecodeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     channel_first : False\r\n[2023/04/06 13:26:05] ppcls INFO:                     to_rgb : True\r\n[2023/04/06 13:26:05] ppcls INFO:                 ResizeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     resize_short : 448\r\n[2023/04/06 13:26:05] ppcls INFO:                 CropImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     size : 448\r\n[2023/04/06 13:26:05] ppcls INFO:                 NormalizeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/06 13:26:05] ppcls INFO:                     order :\r\n[2023/04/06 13:26:05] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/06 13:26:05] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/06 13:26:05] ppcls INFO:         loader :\r\n[2023/04/06 13:26:05] ppcls INFO:             num_workers : 4\r\n[2023/04/06 13:26:05] ppcls INFO:             use_shared_memory : True\r\n[2023/04/06 13:26:05] ppcls INFO:         sampler :\r\n[2023/04/06 13:26:05] ppcls INFO:             batch_size : 16\r\n[2023/04/06 13:26:05] ppcls INFO:             drop_last : False\r\n[2023/04/06 13:26:05] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/06 13:26:05] ppcls INFO:             shuffle : False\r\n[2023/04/06 13:26:05] ppcls INFO:     Train :\r\n[2023/04/06 13:26:05] ppcls INFO:         dataset :\r\n[2023/04/06 13:26:05] ppcls INFO:             batch_transform_ops : None\r\n[2023/04/06 13:26:05] ppcls INFO:             cls_label_path : ./dataset/train_list.txt\r\n[2023/04/06 13:26:05] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/06 13:26:05] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/06 13:26:05] ppcls INFO:             transform_ops :\r\n[2023/04/06 13:26:05] ppcls INFO:                 DecodeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     channel_first : False\r\n[2023/04/06 13:26:05] ppcls INFO:                     to_rgb : True\r\n[2023/04/06 13:26:05] ppcls INFO:                 RandCropImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     size : 448\r\n[2023/04/06 13:26:05] ppcls INFO:                 RandFlipImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     flip_code : 1\r\n[2023/04/06 13:26:05] ppcls INFO:                 NormalizeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/06 13:26:05] ppcls INFO:                     order :\r\n[2023/04/06 13:26:05] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/06 13:26:05] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/06 13:26:05] ppcls INFO:         loader :\r\n[2023/04/06 13:26:05] ppcls INFO:             num_workers : 10\r\n[2023/04/06 13:26:05] ppcls INFO:             use_shared_memory : True\r\n[2023/04/06 13:26:05] ppcls INFO:         sampler :\r\n[2023/04/06 13:26:05] ppcls INFO:             batch_size : 16\r\n[2023/04/06 13:26:05] ppcls INFO:             drop_last : False\r\n[2023/04/06 13:26:05] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/06 13:26:05] ppcls INFO:             shuffle : True\r\n[2023/04/06 13:26:05] ppcls INFO: Global :\r\n[2023/04/06 13:26:05] ppcls INFO:     checkpoints : D:\\xx\\PaddleClas\\output\\ResNet101_vd\\epoch_130\r\n[2023/04/06 13:26:05] ppcls INFO:     device : gpu\r\n[2023/04/06 13:26:05] ppcls INFO:     distributed : Ture\r\n[2023/04/06 13:26:05] ppcls INFO:     epochs : 300\r\n[2023/04/06 13:26:05] ppcls INFO:     eval_during_train : True\r\n[2023/04/06 13:26:05] ppcls INFO:     eval_interval : 1\r\n[2023/04/06 13:26:05] ppcls INFO:     image_shape : [3, 448, 448]\r\n[2023/04/06 13:26:05] ppcls INFO:     output_dir : ./output/\r\n[2023/04/06 13:26:05] ppcls INFO:     pretrained_model : D:\\xx\\PaddleClas\\output\\ResNet101_vd\\epoch_130\r\n[2023/04/06 13:26:05] ppcls INFO:     print_batch_step : 10\r\n[2023/04/06 13:26:05] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/04/06 13:26:05] ppcls INFO:     save_interval : 1\r\n[2023/04/06 13:26:05] ppcls INFO:     use_visualdl : True\r\n[2023/04/06 13:26:05] ppcls INFO: Infer :\r\n[2023/04/06 13:26:05] ppcls INFO:     PostProcess :\r\n[2023/04/06 13:26:05] ppcls INFO:         class_id_map_file : ./dataset/mianma_step2.txt\r\n[2023/04/06 13:26:05] ppcls INFO:         name : Topk\r\n[2023/04/06 13:26:05] ppcls INFO:         topk : 5\r\n[2023/04/06 13:26:05] ppcls INFO:     batch_size : 10\r\n[2023/04/06 13:26:05] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/04/06 13:26:05] ppcls INFO:     transforms :\r\n[2023/04/06 13:26:05] ppcls INFO:         DecodeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:             channel_first : False\r\n[2023/04/06 13:26:05] ppcls INFO:             to_rgb : True\r\n[2023/04/06 13:26:05] ppcls INFO:         ResizeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:             resize_short : 448\r\n[2023/04/06 13:26:05] ppcls INFO:         CropImage :\r\n[2023/04/06 13:26:05] ppcls INFO:             size : 448\r\n[2023/04/06 13:26:05] ppcls INFO:         NormalizeImage :\r\n[2023/04/06 13:26:05] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/04/06 13:26:05] ppcls INFO:             order :\r\n[2023/04/06 13:26:05] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/06 13:26:05] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/06 13:26:05] ppcls INFO:         ToCHWImage : None\r\n[2023/04/06 13:26:05] ppcls INFO: Loss :\r\n[2023/04/06 13:26:05] ppcls INFO:     Eval :\r\n[2023/04/06 13:26:05] ppcls INFO:         CELoss :\r\n[2023/04/06 13:26:05] ppcls INFO:             weight : 1.0\r\n[2023/04/06 13:26:05] ppcls INFO:     Train :\r\n[2023/04/06 13:26:05] ppcls INFO:         CELoss :\r\n[2023/04/06 13:26:05] ppcls INFO:             epsilon : 0.1\r\n[2023/04/06 13:26:05] ppcls INFO:             weight : 1.0\r\n[2023/04/06 13:26:05] ppcls INFO: Metric :\r\n[2023/04/06 13:26:05] ppcls INFO:     Eval :\r\n[2023/04/06 13:26:05] ppcls INFO:         TopkAcc :\r\n[2023/04/06 13:26:05] ppcls INFO:             topk : [1, 5]\r\n[2023/04/06 13:26:05] ppcls INFO:     Train : None\r\n[2023/04/06 13:26:05] ppcls INFO: Optimizer :\r\n[2023/04/06 13:26:05] ppcls INFO:     lr :\r\n[2023/04/06 13:26:05] ppcls INFO:         learning_rate : 0.1\r\n[2023/04/06 13:26:05] ppcls INFO:         name : Cosine\r\n[2023/04/06 13:26:05] ppcls INFO:     momentum : 0.9\r\n[2023/04/06 13:26:05] ppcls INFO:     name : Momentum\r\n[2023/04/06 13:26:05] ppcls INFO:     regularizer :\r\n[2023/04/06 13:26:05] ppcls INFO:         coeff : 0.0001\r\n[2023/04/06 13:26:05] ppcls INFO:         name : L2\r\n[2023/04/06 13:26:05] ppcls INFO: profiler_options : None\r\n[2023/04/06 13:26:05] ppcls INFO: train with paddle 2.4.2 and device Place(gpu:0)\r\nW0406 13:26:07.537612 19884 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 11.6, Runtime API Version: 11.6\r\nW0406 13:26:07.540604 19884 gpu_resources.cc:91] device: 0, cuDNN Version: 8.4.\r\npath D:\\xx\\PaddleClas\\output\\ResNet101_vd\\epoch_130\r\n[2023/04/06 13:26:08] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 2 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config\r\n to train.\r\nI0406 13:26:08.834146 19884 tcp_utils.cc:181] The server starts to listen on IP_ANY:54537\r\nI0406 13:26:08.834146 19884 tcp_utils.cc:130] Successfully connected to 10.0.0.13:54537\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"D:\\xx\\PaddleClas\\ppcls\\engine\\engine.py\", line 304, in __init__\r\n    dist.init_parallel_env()\r\n  File \"D:\\anaconda\\envs\\paddle_cls\\lib\\site-packages\\paddle\\distributed\\parallel.py\", line 281, in init_parallel_env\r\n    pg = _new_process_group_impl(\r\n  File \"D:\\anaconda\\envs\\paddle_cls\\lib\\site-packages\\paddle\\distributed\\collective.py\", line 207, in _new_process_group_impl\r\n    pg = core.ProcessGroupNCCL(store, rank, world_size, place, group_id)\r\nAttributeError: module 'paddle.fluid.libpaddle' has no attribute 'ProcessGroupNCCL'\r\nLAUNCH INFO 2023-04-06 13:26:10,309 Pod failed\r\nLAUNCH ERROR 2023-04-06 13:26:10,310 Container failed !!!\r\nContainer rank 1 status failed cmd ['D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\python.exe', '-u', 'tools/train.py', '-c', './ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml'] code 1 log log\\workerlog.1\r\nenv {'TERM_SESSION_ID': 'de808eb6-bc00-4886-b12b-9d25dd6fdb0c', 'COMMONPROGRAMW6432': 'C:\\\\Program Files\\\\Common Files', 'PROGRAMW6432': 'C:\\\\Program Files', 'CONDA_DEFAULT_ENV': 'paddle_cls', 'CONDA_SHLVL': '1', 'USERNAME': 'Admini\r\nstrator', 'ALLUSERSPROFILE': 'C:\\\\ProgramData', 'USERPROFILE': 'C:\\\\Users\\\\Administrator', 'PROCESSOR_REVISION': '9e0d', 'IDEA_INITIAL_DIRECTORY': 'D:\\\\xx', 'FPS_BROWSER_APP_PROFILE_STRING': 'Internet Explorer', 'PUBLIC': 'C:\\\\Users\r\n\\\\Public', 'CUDA_PATH_V11_6': 'C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.6', 'PATH': 'D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\lib\\\\site-packages\\\\paddle\\\\fluid;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\lib\\\\site-packages\\\\paddle\\\\flu\r\nid\\\\..\\\\libs;D:\\\\anaconda\\\\envs\\\\paddle_cls;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\Library\\\\mingw-w64\\\\bin;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\Library\\\\usr\\\\bin;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\Library\\\\bin;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\Scrip\r\nts;D:\\\\anaconda\\\\envs\\\\paddle_cls\\\\bin;D:\\\\anaconda\\\\condabin;C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.6\\\\bin;C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.6\\\\libnvvp;D:\\\\python\\\\Scripts;D:\\\\python;D:\\\r\n\\Scripts;D:\\\\;C:\\\\Program Files\\\\Eclipse Foundation\\\\jdk-8.0.302.8-hotspot\\\\bin;C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v10.1\\\\bin;C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v10.1\\\\libnvvp;C:\\\\Windows\\\\sys\r\ntem32;C:\\\\Windows;C:\\\\Windows\\\\System32\\\\Wbem;C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0;C:\\\\Windows\\\\System32\\\\OpenSSH;C:\\\\Program Files\\\\Git\\\\cmd;C:\\\\Program Files\\\\TortoiseSVN\\\\bin;:\\\\Program Files\\\\ffmpeg-4.3.1-2020-10-01-fu\r\nll_build\\\\bin;C:\\\\Program Files\\\\ffmpeg-4.3.1-2020-10-01-full_build\\\\bin;C:\\\\Program Files\\\\Microsoft SQL Server\\\\130\\\\Tools\\\\Binn;C:\\\\Program Files (x86)\\\\NVIDIA Corporation\\\\PhysX\\\\Common;C:\\\\Program Files\\\\NVIDIA Corporation\\\\NVI\r\nDIA NvDLISR;C:\\\\Program Files\\\\dotnet;C:\\\\Program Files\\\\Microsoft SQL Server\\\\Client SDK\\\\ODBC\\\\170\\\\Tools\\\\Binn;C:\\\\Program Files\\\\NVIDIA Corporation\\\\Nsight Compute 2022.1.0;D:\\\\zlib123dllx64\\\\dll_x64;D:\\\\anaconda\\\\pip.ini;C:\\\\Us\r\ners\\\\Administrator\\\\AppData\\\\Local\\\\Microsoft\\\\WindowsApps;C:\\\\Program Files (x86)\\\\GnuWin32\\\\bin;G:\\\\Anaconda3\\\\Scripts;D:\\\\xx\\\\PyCharm Community Edition 2022.3.3\\\\bin;.;C:\\\\Users\\\\Administrator\\\\.dotnet\\\\tools;D:\\\\opencv\\\\build\\\\x\r\n64\\\\vc15\\\\bin;.', 'DRIVERDATA': 'C:\\\\Windows\\\\System32\\\\Drivers\\\\DriverData', 'HOMEDRIVE': 'C:', 'SESSIONNAME': 'Console', 'LOGONSERVER': '\\\\\\\\DESKTOP-3RK0CE8', 'TERMINAL_EMULATOR': 'JetBrains-JediTerm', 'CONDA_PREFIX': 'D:\\\\anacond\r\na\\\\envs\\\\paddle_cls', 'HOMEPATH': '\\\\Users\\\\Administrator', 'SYSTEMROOT': 'C:\\\\Windows', 'VS140COMNTOOLS': 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\Common7\\\\Tools\\\\', 'LOCALAPPDATA': 'C:\\\\Users\\\\Administrator\\\\AppData\r\n\\\\Local', 'WXDRIVE_START_ARGS': '--wxdrive-setting=0 --disable-gpu --disable-software-rasterizer --enable-features=NetworkServiceInProcess', 'APPDATA': 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming', 'PROCESSOR_IDENTIFIER': 'Intel64 F\r\namily 6 Model 158 Stepping 13, GenuineIntel', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW', 'PSMODULEPATH': 'C:\\\\Program Files\\\\WindowsPowerShell\\\\Modules;C:\\\\Windows\\\\system32\\\\WindowsPowerShell\\\\v1.0\r\n\\\\Modules', 'CONDA_PROMPT_MODIFIER': '(paddle_cls) ', 'PROGRAMFILES(X86)': 'C:\\\\Program Files (x86)', 'CUDA_PATH_V10_1': 'C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v10.1', 'PROMPT': '(paddle_cls) $P$G', 'NVTOOLSEXT_PATH\r\n': 'C:\\\\Program Files\\\\NVIDIA Corporation\\\\NvToolsExt\\\\', 'OS': 'Windows_NT', 'PROCESSOR_ARCHITECTURE': 'AMD64', 'NUMBER_OF_PROCESSORS': '16', 'COMSPEC': 'C:\\\\Windows\\\\system32\\\\cmd.exe', 'PROCESSOR_LEVEL': '6', 'PYCHARM COMMUNITY E\r\nDITION': 'D:\\\\xx\\\\PyCharm Community Edition 2022.3.3\\\\bin;', 'USERDOMAIN_ROAMINGPROFILE': 'DESKTOP-3RK0CE8', 'WINDIR': 'C:\\\\Windows', 'GNU_HOME': 'C:\\\\Program Files (x86)\\\\GnuWin32', 'PROGRAMFILES': 'C:\\\\Program Files', 'TEMP': 'C:\\\r\n\\Users\\\\ADMINI~1\\\\AppData\\\\Local\\\\Temp', 'TMP': 'C:\\\\Users\\\\ADMINI~1\\\\AppData\\\\Local\\\\Temp', 'COMMONPROGRAMFILES(X86)': 'C:\\\\Program Files (x86)\\\\Common Files', 'ONEDRIVE': 'C:\\\\Users\\\\Administrator\\\\OneDrive', 'CUDA_PATH': 'C:\\\\Pro\r\ngram Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.6', 'USERDOMAIN': 'DESKTOP-3RK0CE8', 'SYSTEMDRIVE': 'C:', 'COMPUTERNAME': 'DESKTOP-3RK0CE8', 'PROGRAMDATA': 'C:\\\\ProgramData', 'NVCUDASAMPLES10_1_ROOT': 'C:\\\\ProgramData\\\\NVIDIA Co\r\nrporation\\\\CUDA Samples\\\\v10.1', 'NVCUDASAMPLES_ROOT': 'C:\\\\ProgramData\\\\NVIDIA Corporation\\\\CUDA Samples\\\\v10.1', 'FPS_BROWSER_USER_PROFILE_STRING': 'Default', 'COMMONPROGRAMFILES': 'C:\\\\Program Files\\\\Common Files', '__INTELLIJ_CO\r\nMMAND_HISTFILE__': 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\JetBrains\\\\PyCharmCE2022.3\\\\terminal\\\\history\\\\PaddleClas-history', 'CUSTOM_DEVICE_ROOT': '', 'OMP_NUM_THREADS': '1', 'POD_NAME': 'ylqihp', 'PADDLE_MASTER': '10.0.0.13:54\r\n537', 'PADDLE_GLOBAL_SIZE': '2', 'PADDLE_LOCAL_SIZE': '2', 'PADDLE_GLOBAL_RANK': '1', 'PADDLE_LOCAL_RANK': '1', 'PADDLE_NNODES': '1', 'PADDLE_TRAINER_ENDPOINTS': '10.0.0.13:54538,10.0.0.13:54539', 'PADDLE_CURRENT_ENDPOINT': '10.0.0.\r\n13:54539', 'PADDLE_TRAINER_ID': '1', 'PADDLE_TRAINERS_NUM': '2', 'PADDLE_RANK_IN_NODE': '1', 'FLAGS_selected_gpus': '1'}\r\nLAUNCH INFO 2023-04-06 13:26:10,316 ------------------------- ERROR LOG DETAIL -------------------------\r\nD:\\xx\\PaddleClas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BILINEAR is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BILINEAR instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\nD:\\xx\\PaddleClas\\ppcls\\data\\preprocess\\ops\\timm_autoaugment.py:39: DeprecationWarning: BICUBIC is deprecated and will be removed in Pillow 10 (2023-07-01). Use Resampling.BICUBIC instead.\r\n  _RANDOM_INTERPOLATION = (Image.BILINEAR, Image.BICUBIC)\r\nW0406 13:26:07.538610  1480 gpu_resources.cc:61] Please NOTE: device: 1, GPU Compute Capability: 7.5, Driver API Version: 11.6, Runtime API Version: 11.6\r\nW0406 13:26:07.540604  1480 gpu_resources.cc:91] device: 1, cuDNN Version: 8.4.\r\npath D:\\xx\\PaddleClas\\output\\ResNet101_vd\\epoch_130\r\nI0406 13:26:09.057548  1480 tcp_utils.cc:130] Successfully connected to 10.0.0.13:54537\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"D:\\xx\\PaddleClas\\ppcls\\engine\\engine.py\", line 304, in __init__\r\n    dist.init_parallel_env()\r\n  File \"D:\\anaconda\\envs\\paddle_cls\\lib\\site-packages\\paddle\\distributed\\parallel.py\", line 281, in init_parallel_env\r\n    pg = _new_process_group_impl(\r\n  File \"D:\\anaconda\\envs\\paddle_cls\\lib\\site-packages\\paddle\\distributed\\collective.py\", line 207, in _new_process_group_impl\r\n    pg = core.ProcessGroupNCCL(store, rank, world_size, place, group_id)\r\nAttributeError: module 'paddle.fluid.libpaddle' has no attribute 'ProcessGroupNCCL'\r\nLAUNCH INFO 2023-04-06 13:26:10,528 Exit code 1\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-04-06T06:11:32+00:00",
        "updated_at": "2023-04-27T02:04:51+00:00",
        "closed_at": "2023-04-27T02:04:47+00:00",
        "comments_count": [
            "cuicheng01",
            "happybear1015",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2735,
        "title": "本地训练模型不报错，在BML上训练就报错了",
        "body": "![Snipaste_2023-04-03_12-20-37](https://user-images.githubusercontent.com/66996161/229419225-d35e83b7-ba20-45ae-a514-11500cbf641e.png)\r\n",
        "state": "open",
        "user": "happybear1015",
        "closed_by": null,
        "created_at": "2023-04-03T05:28:51+00:00",
        "updated_at": "2024-02-26T04:27:44+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "happybear1015"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2741,
        "title": "tensorrt提速效果不明显",
        "body": "我的环境是ubuntu18.04,cuda 11.4,cudnn 8,2 ,2080ti,部署了两个模型，一个是swinTransform-base一个是Resnet101，使用tensorrt加速后两个模型推理速度变化不大，加在一起仍然在200ms左右",
        "state": "open",
        "user": "kkpssr",
        "closed_by": null,
        "created_at": "2023-04-06T09:11:50+00:00",
        "updated_at": "2024-02-26T04:27:42+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "kkpssr",
            "kkpssr",
            "cuicheng01",
            "kkpssr"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2746,
        "title": "Momentum对one_dim_param_no_weight_decay的支持有错误",
        "body": "在Momentum optimizer中，当one_dim_param_no_weight_decay==True时，params_with_decay和params_without_decay可能重复。报错信息如下：\r\n```\r\nValueError: some parameters appear in more than one parameter group\r\n```",
        "state": "closed",
        "user": "flytocc",
        "closed_by": "flytocc",
        "created_at": "2023-04-08T15:16:24+00:00",
        "updated_at": "2023-04-10T07:08:05+00:00",
        "closed_at": "2023-04-10T07:08:01+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2749,
        "title": "双卡训练报错 (External) CUDA error(2), out of memory.",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas 2.5和PaddlePaddle_gpu 2.4\r\n 2. 涉及的其他产品使用的版本号：no\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.7/cuDNN 8.8等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n(paddle_gpu) uvtec@uvtec-MS-7B98:~/桌面/PaddleClas$ python -m paddle.distributed.launch --gpus=\"0,1\" tools/train.py -c ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:121: DeprecationWarning: pkg_resources is deprecated as an API\r\n  warnings.warn(\"pkg_resources is deprecated as an API\", DeprecationWarning)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('zope')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\nLAUNCH INFO 2023-04-12 10:37:25,213 -----------  Configuration  ----------------------\r\nLAUNCH INFO 2023-04-12 10:37:25,213 devices: 0,1\r\nLAUNCH INFO 2023-04-12 10:37:25,213 elastic_level: -1\r\nLAUNCH INFO 2023-04-12 10:37:25,213 elastic_timeout: 30\r\nLAUNCH INFO 2023-04-12 10:37:25,213 gloo_port: 6767\r\nLAUNCH INFO 2023-04-12 10:37:25,213 host: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 ips: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 job_id: default\r\nLAUNCH INFO 2023-04-12 10:37:25,213 legacy: False\r\nLAUNCH INFO 2023-04-12 10:37:25,213 log_dir: log\r\nLAUNCH INFO 2023-04-12 10:37:25,213 log_level: INFO\r\nLAUNCH INFO 2023-04-12 10:37:25,213 master: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 max_restart: 3\r\nLAUNCH INFO 2023-04-12 10:37:25,213 nnodes: 1\r\nLAUNCH INFO 2023-04-12 10:37:25,213 nproc_per_node: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 rank: -1\r\nLAUNCH INFO 2023-04-12 10:37:25,213 run_mode: collective\r\nLAUNCH INFO 2023-04-12 10:37:25,213 server_num: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 servers: \r\nLAUNCH INFO 2023-04-12 10:37:25,213 start_port: 6070\r\nLAUNCH INFO 2023-04-12 10:37:25,213 trainer_num: None\r\nLAUNCH INFO 2023-04-12 10:37:25,213 trainers: \r\nLAUNCH INFO 2023-04-12 10:37:25,213 training_script: tools/train.py\r\nLAUNCH INFO 2023-04-12 10:37:25,213 training_script_args: ['-c', 'ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml']\r\nLAUNCH INFO 2023-04-12 10:37:25,213 with_gloo: 1\r\nLAUNCH INFO 2023-04-12 10:37:25,213 --------------------------------------------------\r\nLAUNCH INFO 2023-04-12 10:37:25,213 Job: default, mode collective, replicas 1[1:1], elastic False\r\nLAUNCH INFO 2023-04-12 10:37:25,216 Run Pod: ghenbx, replicas 2, status ready\r\nLAUNCH INFO 2023-04-12 10:37:25,223 Watching Pod: ghenbx, replicas 2, status running\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:121: DeprecationWarning: pkg_resources is deprecated as an API\r\n  warnings.warn(\"pkg_resources is deprecated as an API\", DeprecationWarning)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('zope')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n[2023/04/12 10:37:26] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/04/12 10:37:26] ppcls INFO: Arch : \r\n[2023/04/12 10:37:26] ppcls INFO:     class_num : 2\r\n[2023/04/12 10:37:26] ppcls INFO:     name : ResNet101_vd\r\n[2023/04/12 10:37:26] ppcls INFO: DataLoader : \r\n[2023/04/12 10:37:26] ppcls INFO:     Eval : \r\n[2023/04/12 10:37:26] ppcls INFO:         dataset : \r\n[2023/04/12 10:37:26] ppcls INFO:             cls_label_path : ./dataset/val_list.txt\r\n[2023/04/12 10:37:26] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/12 10:37:26] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/12 10:37:26] ppcls INFO:             transform_ops : \r\n[2023/04/12 10:37:26] ppcls INFO:                 DecodeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     channel_first : False\r\n[2023/04/12 10:37:26] ppcls INFO:                     to_rgb : True\r\n[2023/04/12 10:37:26] ppcls INFO:                 ResizeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     resize_short : 448\r\n[2023/04/12 10:37:26] ppcls INFO:                 CropImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     size : 448\r\n[2023/04/12 10:37:26] ppcls INFO:                 NormalizeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:37:26] ppcls INFO:                     order : \r\n[2023/04/12 10:37:26] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/12 10:37:26] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:37:26] ppcls INFO:         loader : \r\n[2023/04/12 10:37:26] ppcls INFO:             num_workers : 4\r\n[2023/04/12 10:37:26] ppcls INFO:             use_shared_memory : True\r\n[2023/04/12 10:37:26] ppcls INFO:         sampler : \r\n[2023/04/12 10:37:26] ppcls INFO:             batch_size : 8\r\n[2023/04/12 10:37:26] ppcls INFO:             drop_last : False\r\n[2023/04/12 10:37:26] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/12 10:37:26] ppcls INFO:             shuffle : False\r\n[2023/04/12 10:37:26] ppcls INFO:     Train : \r\n[2023/04/12 10:37:26] ppcls INFO:         dataset : \r\n[2023/04/12 10:37:26] ppcls INFO:             batch_transform_ops : None\r\n[2023/04/12 10:37:26] ppcls INFO:             cls_label_path : ./dataset/train_list.txt\r\n[2023/04/12 10:37:26] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/12 10:37:26] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/12 10:37:26] ppcls INFO:             transform_ops : \r\n[2023/04/12 10:37:26] ppcls INFO:                 DecodeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     channel_first : False\r\n[2023/04/12 10:37:26] ppcls INFO:                     to_rgb : True\r\n[2023/04/12 10:37:26] ppcls INFO:                 RandCropImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     size : 448\r\n[2023/04/12 10:37:26] ppcls INFO:                 RandFlipImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     flip_code : -1\r\n[2023/04/12 10:37:26] ppcls INFO:                 NormalizeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:37:26] ppcls INFO:                     order : \r\n[2023/04/12 10:37:26] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/12 10:37:26] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:37:26] ppcls INFO:         loader : \r\n[2023/04/12 10:37:26] ppcls INFO:             num_workers : 4\r\n[2023/04/12 10:37:26] ppcls INFO:             use_shared_memory : True\r\n[2023/04/12 10:37:26] ppcls INFO:         sampler : \r\n[2023/04/12 10:37:26] ppcls INFO:             batch_size : 8\r\n[2023/04/12 10:37:26] ppcls INFO:             drop_last : False\r\n[2023/04/12 10:37:26] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/12 10:37:26] ppcls INFO:             shuffle : True\r\n[2023/04/12 10:37:26] ppcls INFO: Global : \r\n[2023/04/12 10:37:26] ppcls INFO:     checkpoints : None\r\n[2023/04/12 10:37:26] ppcls INFO:     device : gpu\r\n[2023/04/12 10:37:26] ppcls INFO:     epochs : 300\r\n[2023/04/12 10:37:26] ppcls INFO:     eval_during_train : True\r\n[2023/04/12 10:37:26] ppcls INFO:     eval_interval : 1\r\n[2023/04/12 10:37:26] ppcls INFO:     image_shape : [3, 448, 448]\r\n[2023/04/12 10:37:26] ppcls INFO:     output_dir : ./output/\r\n[2023/04/12 10:37:26] ppcls INFO:     pretrained_model : None\r\n[2023/04/12 10:37:26] ppcls INFO:     print_batch_step : 10\r\n[2023/04/12 10:37:26] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/04/12 10:37:26] ppcls INFO:     save_interval : 1\r\n[2023/04/12 10:37:26] ppcls INFO:     use_visualdl : True\r\n[2023/04/12 10:37:26] ppcls INFO: Infer : \r\n[2023/04/12 10:37:26] ppcls INFO:     PostProcess : \r\n[2023/04/12 10:37:26] ppcls INFO:         class_id_map_file : ./dataset/label_2.txt\r\n[2023/04/12 10:37:26] ppcls INFO:         name : Topk\r\n[2023/04/12 10:37:26] ppcls INFO:         topk : 5\r\n[2023/04/12 10:37:26] ppcls INFO:     batch_size : 10\r\n[2023/04/12 10:37:26] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/04/12 10:37:26] ppcls INFO:     transforms : \r\n[2023/04/12 10:37:26] ppcls INFO:         DecodeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:             channel_first : False\r\n[2023/04/12 10:37:26] ppcls INFO:             to_rgb : True\r\n[2023/04/12 10:37:26] ppcls INFO:         ResizeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:             resize_short : 448\r\n[2023/04/12 10:37:26] ppcls INFO:         CropImage : \r\n[2023/04/12 10:37:26] ppcls INFO:             size : 448\r\n[2023/04/12 10:37:26] ppcls INFO:         NormalizeImage : \r\n[2023/04/12 10:37:26] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:37:26] ppcls INFO:             order : \r\n[2023/04/12 10:37:26] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/12 10:37:26] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:37:26] ppcls INFO:         ToCHWImage : None\r\n[2023/04/12 10:37:26] ppcls INFO: Loss : \r\n[2023/04/12 10:37:26] ppcls INFO:     Eval : \r\n[2023/04/12 10:37:26] ppcls INFO:         CELoss : \r\n[2023/04/12 10:37:26] ppcls INFO:             weight : 1.0\r\n[2023/04/12 10:37:26] ppcls INFO:     Train : \r\n[2023/04/12 10:37:26] ppcls INFO:         CELoss : \r\n[2023/04/12 10:37:26] ppcls INFO:             epsilon : 0.1\r\n[2023/04/12 10:37:26] ppcls INFO:             weight : 1.0\r\n[2023/04/12 10:37:26] ppcls INFO: Metric : \r\n[2023/04/12 10:37:26] ppcls INFO:     Eval : \r\n[2023/04/12 10:37:26] ppcls INFO:         TopkAcc : \r\n[2023/04/12 10:37:26] ppcls INFO:             topk : [1, 5]\r\n[2023/04/12 10:37:26] ppcls INFO:     Train : None\r\n[2023/04/12 10:37:26] ppcls INFO: Optimizer : \r\n[2023/04/12 10:37:26] ppcls INFO:     lr : \r\n[2023/04/12 10:37:26] ppcls INFO:         learning_rate : 0.1\r\n[2023/04/12 10:37:26] ppcls INFO:         name : Cosine\r\n[2023/04/12 10:37:26] ppcls INFO:     momentum : 0.9\r\n[2023/04/12 10:37:26] ppcls INFO:     name : Momentum\r\n[2023/04/12 10:37:26] ppcls INFO:     regularizer : \r\n[2023/04/12 10:37:26] ppcls INFO:         coeff : 0.0001\r\n[2023/04/12 10:37:26] ppcls INFO:         name : L2\r\n[2023/04/12 10:37:26] ppcls INFO: profiler_options : None\r\n[2023/04/12 10:37:26] ppcls INFO: train with paddle 2.4.2 and device Place(gpu:0)\r\nW0412 10:37:28.252017 77017 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 12.0, Runtime API Version: 11.7\r\nW0412 10:37:28.252557 77017 gpu_resources.cc:91] device: 0, cuDNN Version: 8.8.\r\nLAUNCH INFO 2023-04-12 10:37:29,228 Pod failed\r\nLAUNCH ERROR 2023-04-12 10:37:29,228 Container failed !!!\r\nContainer rank 1 status failed cmd ['/home/uvtec/miniconda3/envs/paddle_gpu/bin/python', '-u', 'tools/train.py', '-c', 'ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml'] code 1 log log/workerlog.1 \r\nenv {'SHELL': '/bin/bash', 'SESSION_MANAGER': 'local/uvtec-MS-7B98:@/tmp/.ICE-unix/2449,unix/uvtec-MS-7B98:/tmp/.ICE-unix/2449', 'QT_ACCESSIBILITY': '1', 'SNAP_REVISION': '327', 'XDG_CONFIG_DIRS': '/etc/xdg/xdg-ubuntu:/etc/xdg', 'SSH_AGENT_LAUNCHER': 'gnome-keyring', 'XDG_MENU_PREFIX': 'gnome-', 'GNOME_DESKTOP_SESSION_ID': 'this-is-deprecated', 'GTK_IM_MODULE': 'fcitx', 'CONDA_EXE': '/home/uvtec/miniconda3/bin/conda', '_CE_M': '', 'SNAP_REAL_HOME': '/home/uvtec', 'TERMINAL_EMULATOR': 'JetBrains-JediTerm', 'SNAP_USER_COMMON': '/home/uvtec/snap/pycharm-community/common', 'LANGUAGE': 'zh_CN:en', 'LC_ADDRESS': 'zh_CN.UTF-8', 'GNOME_SHELL_SESSION_MODE': 'ubuntu', 'LC_NAME': 'zh_CN.UTF-8', 'SSH_AUTH_SOCK': '/run/user/1000/keyring/ssh', 'TERM_SESSION_ID': '57c2ec97-ef48-47f9-93f5-ff3bcb0fdbfb', 'SNAP_INSTANCE_KEY': '', 'XMODIFIERS': '@im=fcitx', 'DESKTOP_SESSION': 'ubuntu', 'LC_MONETARY': 'zh_CN.UTF-8', 'BAMF_DESKTOP_FILE_HINT': '/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop', 'GTK_MODULES': 'gail:atk-bridge', 'PWD': '/home/uvtec/桌面/PaddleClas', 'XDG_SESSION_DESKTO: 'ubuntu', 'LOGNAME': 'uvtec', 'XDG_SESSION_TYPE': 'x11', 'CONDA_PREFIX': '/home/uvtec/miniconda3/envs/paddle_gpu', 'GPG_AGENT_INFO': '/run/user/1000/gnupg/S.gpg-agent:0:1', 'SYSTEMD_EXEC_PID': '2495', 'XAUTHORITY': '/run/user/1000/gdm/Xauthority', 'DESKTOP_STARTUP_ID': 'gnome-shell/PyCharm Community Edition/2495-5-uvtec-MS-7B98_TIME2911610', 'SNAP_CONTEXT': 'ZuJxgu1H3YdQT5tdItmx-E12K1RVMaIlPkc1wxfjrhKWDBj4BUYQ', 'GJS_DEBUG_TOPICS': 'JS ERROR;JS LOG', 'WINDOWPATH': '2', 'HOME': '/home/uvtec', 'USERNAME': 'uvtec', 'IM_CONFIG_PHASE': '1', 'LANG': 'zh_CN.UTF-8', 'LC_PAPER': 'zh_CN.UTF-8', 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:', 'XDG_CURRENT_DESKTOP': 'ubuntu:GNOME', 'SNAP_ARCH': 'amd64', 'SNAP_INSTANCE_NAME': 'pycharm-community', 'SNAP_USER_DATA': '/home/uvtec/snap/pycharm-community/327', 'CONDA_PROMPT_MODIFIER': '(paddle_gpu) ', 'INVOCATION_ID': '6d17a770a1b24382ae70cccd6d28034c', 'MANAGERPID': '2089', 'SNAP_REEXEC': '', 'CLUTTER_IM_MODULE': 'fcitx', 'GJS_DEBUG_OUTPUT': 'stderr', 'LESSCLOSE': '/usr/bin/lesspipe %s %s', 'XDG_SESSION_CLASS': 'user', 'TERM': 'xterm-256color', 'LC_IDENTIFICATION': 'zh_CN.UTF-8', '_CE_CONDA': '', 'LESSOPEN': '| /usr/bin/lesspipe %s', 'USER': 'uvtec', 'SNAP': '/snap/pycharm-community/327', 'CONDA_SHLVL': '2', 'SNAP_COMMON': '/var/snap/pycharm-community/common', 'SNAP_VERSION': '2023.1', 'DISPLAY': ':1', 'SHLVL': '1', 'SNAP_LIBRARY_PATH': '/var/lib/snapd/lib/gl:/var/lib/snapd/lib/gl32:/var/lib/snapd/void', 'SNAP_COOKIE': 'ZuJxgu1H3YdQT5tdItmx-E12K1RVMaIlPkc1wxfjrhKWDBj4BUYQ', 'LC_TELEPHONE': 'zh_CN.UTF-8', 'QT_IM_MODULE': 'fcitx', 'LC_MEASUREMENT': 'zh_CN.UTF-8', 'PAPERSIZE': 'a4', 'SNAP_DATA': '/var/snap/pycharm-community/327', 'CONDA_PYTHON_EXE': '/home/uvtec/miniconda3/bin/python', 'LD_LIBRARY_PATH': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/../../lib64:/usr/local/cuda-11.7/lib64:', 'XDG_RUNTIME_DIR': '/run/user/1000', 'CONDA_DEFAULT_ENV': 'paddle_gpu', 'LC_TIME': 'zh_CN.UTF-8', 'SNAP_NAME': 'pycharm-community', 'JOURNAL_STREAM': '8:30614', 'XDG_DATA_DIRS': '/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop', 'PATH': '/usr/local/cuda-11.7/bin:/home/uvtec/miniconda3/envs/paddle_gpu/bin:/home/uvtec/miniconda3/condabin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin', 'GDMSESSION': 'ubuntu', 'DBUS_SESSION_BUS_ADDRESS': 'unix:path=/run/user/1000/bus', 'CONDA_PREFIX_1': '/home/uvtec/miniconda3', 'GIO_LAUNCHED_DESKTOP_FILE_PID': '48184', 'GIO_LAUNCHED_DESKTOP_FILE': '/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop', 'LC_NUMERIC': 'zh_CN.UTF-8', '_': '/home/uvtec/miniconda3/envs/paddle_gpu/bin/python', 'CUSTOM_DEVICE_ROOT': '', 'OMP_NUM_THREADS': '1', 'QT_QPA_PLATFORM_PLUGIN_PATH': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/qt/plugins', 'QT_QPA_FONTDIR': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/qt/fonts', 'POD_NAME': 'ghenbx', 'PADDLE_MASTER': '127.0.1.1:52132', 'PADDLE_GLOBAL_SIZE': '2', 'PADDLE_LOCAL_SIZE': '2', 'PADDLE_GLOBAL_RANK': '1', 'PADDLE_LOCAL_RANK': '1', 'PADDLE_NNODES': '1', 'PADDLE_TRAINER_ENDPOINTS': '127.0.1.1:52133,127.0.1.1:52134', 'PADDLE_CURRENT_ENDPOINT': '127.0.1.1:52134', 'PADDLE_TRAINER_ID': '1', 'PADDLE_TRAINERS_NUM': '2', 'PADDLE_RANK_IN_NODE': '1', 'FLAGS_selected_gpus': '1'}\r\nLAUNCH INFO 2023-04-12 10:37:29,228 ------------------------- ERROR LOG DETAIL -------------------------\r\n.declare_namespace('zope')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\nW0412 10:37:28.252017 77019 gpu_resources.cc:61] Please NOTE: device: 1, GPU Compute Capability: 7.5, Driver API Version: 12.0, Runtime API Version: 11.7\r\nW0412 10:37:28.252559 77019 gpu_resources.cc:91] device: 1, cuDNN Version: 8.8.\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/engine/engine.py\", line 192, in __init__\r\n    self.model = build_model(self.config, self.mode)\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/arch/__init__.py\", line 40, in build_model\r\n    arch = getattr(mod, model_type)(**arch_config)\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 554, in ResNet101_vd\r\n    model = ResNet(\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 331, in __init__\r\n    self.stem = nn.Sequential(* [\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 332, in <listcomp>\r\n    ConvBNLayer(\r\n  File \"/home/uvtec/桌面/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 127, in __init__\r\n    self.conv = Conv2D(\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/nn/layer/conv.py\", line 687, in __init__\r\n    super(Conv2D, self).__init__(\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/nn/layer/conv.py\", line 157, in __init__\r\n    self.weight = self.create_parameter(\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/fluid/dygraph/layers.py\", line 471, in create_parameter\r\n    return self._helper.create_parameter(\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/fluid/layer_helper_base.py\", line 374, in create_parameter\r\n    return self.main_program.global_block().create_parameter(\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/fluid/framework.py\", line 3988, in create_parameter\r\n    initializer(param, self)\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/fluid/initializer.py\", line 56, in __call__\r\n    return self.forward(param, block)\r\n  File \"/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/paddle/fluid/initializer.py\", line 382, in forward\r\n    out_var = _C_ops.gaussian_random(var.shape, self._mean,\r\nOSError: (External) CUDA error(2), out of memory. \r\n  [Hint: Please search for the error code(2) on website (https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__TYPES.html#group__CUDART__TYPES_1g3f51e3575c2178246db0a94a430e0038) to get Nvidia's official solution and advice about CUDA Error.] (at /paddle/paddle/phi/core/cuda_stream.h:73)\r\n\r\nLAUNCH INFO 2023-04-12 10:37:29,429 Exit code -15\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-04-12T02:41:28+00:00",
        "updated_at": "2023-04-12T05:06:34+00:00",
        "closed_at": "2023-04-12T05:04:34+00:00",
        "comments_count": [
            "happybear1015",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2758,
        "title": "能否提供支持FastDeploy或者ONNX的主体检测inference预训练模型",
        "body": "如题\r\n主体检测模型picodet_PPLCNet_x2_5_mainbody_lite_v1.0_infer\r\n转ONNX或者FastDeploy都会报错，FastDeploy那边的大哥说是因为模型包含控制流操作，而新版paddledetection导出的模型不会有这样的问题，请问能否提供一个支持FastDeploy或者ONNX的主体检测inference预训练模型呢，谢谢。\r\n",
        "state": "open",
        "user": "huge3286",
        "closed_by": null,
        "created_at": "2023-04-17T06:45:46+00:00",
        "updated_at": "2024-02-26T04:27:37+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2764,
        "title": "windows使用ppcls中的deploy/predict_cls.py预测时，如何指定本地显卡编号",
        "body": "python3.7 python/deploy/predict_cls.py -c configs/inference_cls.yaml\r\n使用该命令预测图像，cpu不会报错，gpu预测出来的结果score 全是0  0 0 0 0 0\r\n\r\n我查看了一下自己windows的显卡，0号显卡是intel，1编号的才是geforce。请问如何指定？\r\n",
        "state": "open",
        "user": "happybear1015",
        "closed_by": null,
        "created_at": "2023-04-21T12:51:02+00:00",
        "updated_at": "2024-02-26T04:27:34+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2752,
        "title": "模型服务化部署时报错{'err_no': 8, 'err_msg': \"(data_id=1 log_id=0) [det|0] Failed to postprocess: 'save_infer_model/scale_0.tmp_1.lod'\", 'key': [], 'value': [], 'tensors': []",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "hitwhwudicao",
        "closed_by": null,
        "created_at": "2023-04-13T01:49:54+00:00",
        "updated_at": "2025-02-12T06:27:42+00:00",
        "closed_at": null,
        "comments_count": [
            "hitwhwudicao",
            "chaichaivi",
            "libertyfree"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2763,
        "title": "eval.py和train.py指标不一致",
        "body": "1、使用train.pyd 日志中指标挺高，top1 96%+\r\n![image](https://user-images.githubusercontent.com/52409244/233613920-e97213f3-1b68-4764-b040-f9a1f5606288.png)\r\n2、但使用eval.py  计算指标，指标却很低，这是为什么呢？\r\n![image](https://user-images.githubusercontent.com/52409244/233613751-466eb6a5-d309-42e4-a478-90adbcb59650.png)\r\n",
        "state": "closed",
        "user": "qiu-pinggaizi",
        "closed_by": "qiu-pinggaizi",
        "created_at": "2023-04-21T10:29:45+00:00",
        "updated_at": "2023-04-25T03:00:12+00:00",
        "closed_at": "2023-04-25T03:00:09+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2755,
        "title": "使用PaddleClas训练回归模型",
        "body": "**请问如何使用PaddleClas的模型合理进行回归（regression）训练？**\r\n我使用的是Resnet50骨架，具体做法是将num_class定为1，然后loss选择distance loss (smooth L1)。Metric没有找到合适的（如mean absolute error），所以就默认了top k（训练过程中这个没意义，但是不分配任何指标会报错）。从visualdl的loss曲线来看训练是正常进行的，不过导出的推理模型无论是在paddle inference还是fastdeploy中都是默认输出softmax的结果(类别0概率1)，其实我需要的是进行激活前的预测值。请问是否有办法做到这一点呢？还是说模型导出有相应的设置？",
        "state": "open",
        "user": "atgc1984",
        "closed_by": null,
        "created_at": "2023-04-14T09:20:47+00:00",
        "updated_at": "2024-02-26T04:27:38+00:00",
        "closed_at": null,
        "comments_count": [
            "atgc1984"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2750,
        "title": "在linux训练模型报错",
        "body": "(paddle_gpu) uvtec@uvtec-MS-7B98:~/桌面/PaddleClas$ python tools/train.py -c ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:121: DeprecationWarning: pkg_resources is deprecated as an API\r\n  warnings.warn(\"pkg_resources is deprecated as an API\", DeprecationWarning)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('zope')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n[2023/04/12 10:51:08] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/04/12 10:51:08] ppcls INFO: Arch : \r\n[2023/04/12 10:51:08] ppcls INFO:     class_num : 2\r\n[2023/04/12 10:51:08] ppcls INFO:     name : ResNet101_vd\r\n[2023/04/12 10:51:08] ppcls INFO: DataLoader : \r\n[2023/04/12 10:51:08] ppcls INFO:     Eval : \r\n[2023/04/12 10:51:08] ppcls INFO:         dataset : \r\n[2023/04/12 10:51:08] ppcls INFO:             cls_label_path : ./dataset/val_list.txt\r\n[2023/04/12 10:51:08] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/12 10:51:08] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/12 10:51:08] ppcls INFO:             transform_ops : \r\n[2023/04/12 10:51:08] ppcls INFO:                 DecodeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     channel_first : False\r\n[2023/04/12 10:51:08] ppcls INFO:                     to_rgb : True\r\n[2023/04/12 10:51:08] ppcls INFO:                 ResizeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     resize_short : 448\r\n[2023/04/12 10:51:08] ppcls INFO:                 CropImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     size : 448\r\n[2023/04/12 10:51:08] ppcls INFO:                 NormalizeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:51:08] ppcls INFO:                     order : \r\n[2023/04/12 10:51:08] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/12 10:51:08] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:51:08] ppcls INFO:         loader : \r\n[2023/04/12 10:51:08] ppcls INFO:             num_workers : 4\r\n[2023/04/12 10:51:08] ppcls INFO:             use_shared_memory : True\r\n[2023/04/12 10:51:08] ppcls INFO:         sampler : \r\n[2023/04/12 10:51:08] ppcls INFO:             batch_size : 8\r\n[2023/04/12 10:51:08] ppcls INFO:             drop_last : False\r\n[2023/04/12 10:51:08] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/12 10:51:08] ppcls INFO:             shuffle : False\r\n[2023/04/12 10:51:08] ppcls INFO:     Train : \r\n[2023/04/12 10:51:08] ppcls INFO:         dataset : \r\n[2023/04/12 10:51:08] ppcls INFO:             batch_transform_ops : None\r\n[2023/04/12 10:51:08] ppcls INFO:             cls_label_path : ./dataset/train_list.txt\r\n[2023/04/12 10:51:08] ppcls INFO:             image_root : ./dataset/\r\n[2023/04/12 10:51:08] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/12 10:51:08] ppcls INFO:             transform_ops : \r\n[2023/04/12 10:51:08] ppcls INFO:                 DecodeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     channel_first : False\r\n[2023/04/12 10:51:08] ppcls INFO:                     to_rgb : True\r\n[2023/04/12 10:51:08] ppcls INFO:                 RandCropImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     size : 448\r\n[2023/04/12 10:51:08] ppcls INFO:                 RandFlipImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     flip_code : -1\r\n[2023/04/12 10:51:08] ppcls INFO:                 NormalizeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:51:08] ppcls INFO:                     order : \r\n[2023/04/12 10:51:08] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/12 10:51:08] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:51:08] ppcls INFO:         loader : \r\n[2023/04/12 10:51:08] ppcls INFO:             num_workers : 4\r\n[2023/04/12 10:51:08] ppcls INFO:             use_shared_memory : True\r\n[2023/04/12 10:51:08] ppcls INFO:         sampler : \r\n[2023/04/12 10:51:08] ppcls INFO:             batch_size : 8\r\n[2023/04/12 10:51:08] ppcls INFO:             drop_last : False\r\n[2023/04/12 10:51:08] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/12 10:51:08] ppcls INFO:             shuffle : True\r\n[2023/04/12 10:51:08] ppcls INFO: Global : \r\n[2023/04/12 10:51:08] ppcls INFO:     checkpoints : None\r\n[2023/04/12 10:51:08] ppcls INFO:     device : gpu\r\n[2023/04/12 10:51:08] ppcls INFO:     epochs : 300\r\n[2023/04/12 10:51:08] ppcls INFO:     eval_during_train : True\r\n[2023/04/12 10:51:08] ppcls INFO:     eval_interval : 1\r\n[2023/04/12 10:51:08] ppcls INFO:     image_shape : [3, 448, 448]\r\n[2023/04/12 10:51:08] ppcls INFO:     output_dir : ./output/\r\n[2023/04/12 10:51:08] ppcls INFO:     pretrained_model : None\r\n[2023/04/12 10:51:08] ppcls INFO:     print_batch_step : 10\r\n[2023/04/12 10:51:08] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/04/12 10:51:08] ppcls INFO:     save_interval : 1\r\n[2023/04/12 10:51:08] ppcls INFO:     use_visualdl : True\r\n[2023/04/12 10:51:08] ppcls INFO: Infer : \r\n[2023/04/12 10:51:08] ppcls INFO:     PostProcess : \r\n[2023/04/12 10:51:08] ppcls INFO:         class_id_map_file : ./dataset/label_2.txt\r\n[2023/04/12 10:51:08] ppcls INFO:         name : Topk\r\n[2023/04/12 10:51:08] ppcls INFO:         topk : 5\r\n[2023/04/12 10:51:08] ppcls INFO:     batch_size : 10\r\n[2023/04/12 10:51:08] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/04/12 10:51:08] ppcls INFO:     transforms : \r\n[2023/04/12 10:51:08] ppcls INFO:         DecodeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:             channel_first : False\r\n[2023/04/12 10:51:08] ppcls INFO:             to_rgb : True\r\n[2023/04/12 10:51:08] ppcls INFO:         ResizeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:             resize_short : 448\r\n[2023/04/12 10:51:08] ppcls INFO:         CropImage : \r\n[2023/04/12 10:51:08] ppcls INFO:             size : 448\r\n[2023/04/12 10:51:08] ppcls INFO:         NormalizeImage : \r\n[2023/04/12 10:51:08] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/04/12 10:51:08] ppcls INFO:             order : \r\n[2023/04/12 10:51:08] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/12 10:51:08] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/12 10:51:08] ppcls INFO:         ToCHWImage : None\r\n[2023/04/12 10:51:08] ppcls INFO: Loss : \r\n[2023/04/12 10:51:08] ppcls INFO:     Eval : \r\n[2023/04/12 10:51:08] ppcls INFO:         CELoss : \r\n[2023/04/12 10:51:08] ppcls INFO:             weight : 1.0\r\n[2023/04/12 10:51:08] ppcls INFO:     Train : \r\n[2023/04/12 10:51:08] ppcls INFO:         CELoss : \r\n[2023/04/12 10:51:08] ppcls INFO:             epsilon : 0.1\r\n[2023/04/12 10:51:08] ppcls INFO:             weight : 1.0\r\n[2023/04/12 10:51:08] ppcls INFO: Metric : \r\n[2023/04/12 10:51:08] ppcls INFO:     Eval : \r\n[2023/04/12 10:51:08] ppcls INFO:         TopkAcc : \r\n[2023/04/12 10:51:08] ppcls INFO:             topk : [1, 5]\r\n[2023/04/12 10:51:08] ppcls INFO:     Train : None\r\n[2023/04/12 10:51:08] ppcls INFO: Optimizer : \r\n[2023/04/12 10:51:08] ppcls INFO:     lr : \r\n[2023/04/12 10:51:08] ppcls INFO:         learning_rate : 0.1\r\n[2023/04/12 10:51:08] ppcls INFO:         name : Cosine\r\n[2023/04/12 10:51:08] ppcls INFO:     momentum : 0.9\r\n[2023/04/12 10:51:08] ppcls INFO:     name : Momentum\r\n[2023/04/12 10:51:08] ppcls INFO:     regularizer : \r\n[2023/04/12 10:51:08] ppcls INFO:         coeff : 0.0001\r\n[2023/04/12 10:51:08] ppcls INFO:         name : L2\r\n[2023/04/12 10:51:08] ppcls INFO: profiler_options : None\r\n[2023/04/12 10:51:08] ppcls INFO: train with paddle 2.4.2 and device Place(gpu:0)\r\nW0412 10:51:10.881142 89901 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 12.0, Runtime API Version: 11.7\r\nW0412 10:51:10.881628 89901 gpu_resources.cc:91] device: 0, cuDNN Version: 8.8.\r\nterminate called after throwing an instance of 'paddle::memory::allocation::BadAlloc'\r\n  what():  \r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   gaussian_random_ad_func(paddle::experimental::IntArrayBase<paddle::experimental::Tensor>, float, float, int, paddle::experimental::DataType, phi::Place)\r\n1   paddle::experimental::gaussian_random(paddle::experimental::IntArrayBase<paddle::experimental::Tensor> const&, float, float, int, paddle::experimental::DataType, phi::Place const&)\r\n2   void phi::GaussianRandomKernel<float, phi::GPUContext>(phi::GPUContext const&, paddle::experimental::IntArrayBase<phi::DenseTensor> const&, float, float, int, paddle::experimental::DataType, phi::DenseTensor*)\r\n3   float* phi::DeviceContext::Alloc<float>(phi::TensorBase*, unsigned long, bool) const\r\n4   phi::DeviceContext::Impl::Alloc(phi::TensorBase*, phi::Place const&, paddle::experimental::DataType, unsigned long, bool) const\r\n5   phi::DenseTensor::AllocateFrom(phi::Allocator*, paddle::experimental::DataType, unsigned long)\r\n6   paddle::memory::allocation::StatAllocator::AllocateImpl(unsigned long)\r\n7   paddle::memory::allocation::Allocator::Allocate(unsigned long)\r\n8   paddle::memory::allocation::Allocator::Allocate(unsigned long)\r\n9   paddle::memory::allocation::Allocator::Allocate(unsigned long)\r\n10  paddle::memory::allocation::CUDAAllocator::AllocateImpl(unsigned long)\r\n11  std::string phi::enforce::GetCompleteTraceBackString<std::string >(std::string&&, char const*, int)\r\n12  phi::enforce::GetCurrentTraceBackString[abi:cxx11](bool)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nResourceExhaustedError: \r\n\r\nOut of memory error on GPU 0. Cannot allocate 1.000000MB memory on GPU 0, 10.721985GB memory has been allocated and available memory is only 24.375000MB.\r\n\r\nPlease check whether there is any other process using GPU 0.\r\n1. If yes, please stop them, or start PaddlePaddle on another GPU.\r\n2. If no, please decrease the batch size of your model. \r\nIf the above ways do not solve the out of memory problem, you can try to use CUDA managed memory. The command is `export FLAGS_use_cuda_managed_memory=false`.\r\n (at /paddle/paddle/fluid/memory/allocation/cuda_allocator.cc:95)\r\n\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::pybind::ThrowExceptionToPython(std::__exception_ptr::exception_ptr)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Process abort signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1681267891 (unix time) try \"date -d @1681267891\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGABRT (@0x3e800015f2d) received by PID 89901 (TID 0x7ff7190bc740) from PID 89901 ***]\r\n\r\n已放弃 (核心已转储)\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-04-12T02:58:07+00:00",
        "updated_at": "2023-04-12T05:05:49+00:00",
        "closed_at": "2023-04-12T05:04:09+00:00",
        "comments_count": [
            "happybear1015",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2760,
        "title": "使用安装class包，对自己数据训练的模型推理，结果很差",
        "body": "model = paddleclas.PaddleClas(inference_model_dir=\"./deploy/models/aaal/\",class_id_map_file =\"./ppcls/utils/PULC_label_list/aal.tt\",resize_short=224,topk=1 )\r\npath='aaaaa'\r\nsave_path = './result2/'\r\nprint(path)\r\ntestList=os.listdir(path)\r\nfor file in testList:\r\n    # try:\r\n        numbers = len(testList)\r\n        img_path = path+file\r\n        img_cv2 = cv2.imdecode(np.fromfile(img_path,dtype=np.uint8),-1)\r\n        result = model.predict(input_data=img_path)\r\n        result = next(result)\r\n发现直接传入numpy格式的图像，好像没有进行归一化操作。这个是需要自己进行完归一化之后再传入么，直接使用eval.py得到的结果就是正常的。",
        "state": "open",
        "user": "wangxinzhe0617",
        "closed_by": null,
        "created_at": "2023-04-19T09:36:12+00:00",
        "updated_at": "2024-02-26T04:27:36+00:00",
        "closed_at": null,
        "comments_count": [
            "zengshao0622",
            "wangxinzhe0617"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2766,
        "title": "PP-ShiTu 增加新种类时需要多少图片？",
        "body": "PP-ShiTu 已经可以识别很多零售商品，如果我要增加相似的零售商品，一般需要多少张照片？\r\n（1）图片采集数量是否可估算，还是依靠测试效果和经验值？\r\n（2）需要照片的数量，是不是跟  图像复杂度 有关？\r\n",
        "state": "closed",
        "user": "wpb3dm",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-04-23T09:24:21+00:00",
        "updated_at": "2025-03-04T09:19:42+00:00",
        "closed_at": "2025-03-04T06:36:06+00:00",
        "comments_count": [
            "zengshao0622",
            "wpb3dm",
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2767,
        "title": "linux training error  :(",
        "body": "\r\n(paddle_gpu) uvtec@uvtec-MS-7B98:/media/uvtec/9AF4F5A0F4F57EB7/PaddleClas$ python -m paddle.distributed.launch --gpus=\"0,1\" tools/train.py -c ./ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml\r\nLAUNCH INFO 2023-04-24 09:09:32,830 -----------  Configuration  ----------------------\r\nLAUNCH INFO 2023-04-24 09:09:32,831 devices: 0,1\r\nLAUNCH INFO 2023-04-24 09:09:32,831 elastic_level: -1\r\nLAUNCH INFO 2023-04-24 09:09:32,831 elastic_timeout: 30\r\nLAUNCH INFO 2023-04-24 09:09:32,831 gloo_port: 6767\r\nLAUNCH INFO 2023-04-24 09:09:32,831 host: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 ips: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 job_id: default\r\nLAUNCH INFO 2023-04-24 09:09:32,831 legacy: False\r\nLAUNCH INFO 2023-04-24 09:09:32,831 log_dir: log\r\nLAUNCH INFO 2023-04-24 09:09:32,831 log_level: INFO\r\nLAUNCH INFO 2023-04-24 09:09:32,831 master: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 max_restart: 3\r\nLAUNCH INFO 2023-04-24 09:09:32,831 nnodes: 1\r\nLAUNCH INFO 2023-04-24 09:09:32,831 nproc_per_node: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 rank: -1\r\nLAUNCH INFO 2023-04-24 09:09:32,831 run_mode: collective\r\nLAUNCH INFO 2023-04-24 09:09:32,831 server_num: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 servers: \r\nLAUNCH INFO 2023-04-24 09:09:32,831 start_port: 6070\r\nLAUNCH INFO 2023-04-24 09:09:32,831 trainer_num: None\r\nLAUNCH INFO 2023-04-24 09:09:32,831 trainers: \r\nLAUNCH INFO 2023-04-24 09:09:32,831 training_script: tools/train.py\r\nLAUNCH INFO 2023-04-24 09:09:32,831 training_script_args: ['-c', './ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml']\r\nLAUNCH INFO 2023-04-24 09:09:32,831 with_gloo: 1\r\nLAUNCH INFO 2023-04-24 09:09:32,831 --------------------------------------------------\r\nLAUNCH INFO 2023-04-24 09:09:32,831 Job: default, mode collective, replicas 1[1:1], elastic False\r\nLAUNCH INFO 2023-04-24 09:09:32,834 Run Pod: gnhppr, replicas 2, status ready\r\nLAUNCH INFO 2023-04-24 09:09:32,842 Watching Pod: gnhppr, replicas 2, status running\r\n[2023/04/24 09:09:38] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/04/24 09:09:38] ppcls INFO: Arch : \r\n[2023/04/24 09:09:38] ppcls INFO:     class_num : 2\r\n[2023/04/24 09:09:38] ppcls INFO:     name : ResNet101_vd\r\n[2023/04/24 09:09:38] ppcls INFO: DataLoader : \r\n[2023/04/24 09:09:38] ppcls INFO:     Eval : \r\n[2023/04/24 09:09:39] ppcls INFO:         dataset : \r\n[2023/04/24 09:09:39] ppcls INFO:             cls_label_path : ./dataset/maorong_dif_long/val_list.txt\r\n[2023/04/24 09:09:39] ppcls INFO:             image_root : ./dataset/maorong_dif_long/\r\n[2023/04/24 09:09:39] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/24 09:09:39] ppcls INFO:             transform_ops : \r\n[2023/04/24 09:09:39] ppcls INFO:                 DecodeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     channel_first : False\r\n[2023/04/24 09:09:39] ppcls INFO:                     to_rgb : True\r\n[2023/04/24 09:09:39] ppcls INFO:                 ResizeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     resize_short : 896\r\n[2023/04/24 09:09:39] ppcls INFO:                 CropImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     size : 896\r\n[2023/04/24 09:09:39] ppcls INFO:                 NormalizeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/24 09:09:39] ppcls INFO:                     order : \r\n[2023/04/24 09:09:39] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/24 09:09:39] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/24 09:09:39] ppcls INFO:         loader : \r\n[2023/04/24 09:09:39] ppcls INFO:             num_workers : 4\r\n[2023/04/24 09:09:39] ppcls INFO:             use_shared_memory : True\r\n[2023/04/24 09:09:39] ppcls INFO:         sampler : \r\n[2023/04/24 09:09:39] ppcls INFO:             batch_size : 4\r\n[2023/04/24 09:09:39] ppcls INFO:             drop_last : False\r\n[2023/04/24 09:09:39] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/24 09:09:39] ppcls INFO:             shuffle : False\r\n[2023/04/24 09:09:39] ppcls INFO:     Train : \r\n[2023/04/24 09:09:39] ppcls INFO:         dataset : \r\n[2023/04/24 09:09:39] ppcls INFO:             batch_transform_ops : None\r\n[2023/04/24 09:09:39] ppcls INFO:             cls_label_path : ./dataset/maorong_dif_long/train_list.txt\r\n[2023/04/24 09:09:39] ppcls INFO:             image_root : ./dataset/maorong_dif_long/\r\n[2023/04/24 09:09:39] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/24 09:09:39] ppcls INFO:             transform_ops : \r\n[2023/04/24 09:09:39] ppcls INFO:                 DecodeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     channel_first : False\r\n[2023/04/24 09:09:39] ppcls INFO:                     to_rgb : True\r\n[2023/04/24 09:09:39] ppcls INFO:                 RandCropImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     size : 896\r\n[2023/04/24 09:09:39] ppcls INFO:                 RandFlipImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     flip_code : 1\r\n[2023/04/24 09:09:39] ppcls INFO:                 NormalizeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/24 09:09:39] ppcls INFO:                     order : \r\n[2023/04/24 09:09:39] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/24 09:09:39] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/24 09:09:39] ppcls INFO:         loader : \r\n[2023/04/24 09:09:39] ppcls INFO:             num_workers : 4\r\n[2023/04/24 09:09:39] ppcls INFO:             use_shared_memory : True\r\n[2023/04/24 09:09:39] ppcls INFO:         sampler : \r\n[2023/04/24 09:09:39] ppcls INFO:             batch_size : 4\r\n[2023/04/24 09:09:39] ppcls INFO:             drop_last : False\r\n[2023/04/24 09:09:39] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/24 09:09:39] ppcls INFO:             shuffle : True\r\n[2023/04/24 09:09:39] ppcls INFO: Global : \r\n[2023/04/24 09:09:39] ppcls INFO:     checkpoints : None\r\n[2023/04/24 09:09:39] ppcls INFO:     device : gpu\r\n[2023/04/24 09:09:39] ppcls INFO:     epochs : 200\r\n[2023/04/24 09:09:39] ppcls INFO:     eval_during_train : True\r\n[2023/04/24 09:09:39] ppcls INFO:     eval_interval : 1\r\n[2023/04/24 09:09:39] ppcls INFO:     image_shape : [3, 896, 896]\r\n[2023/04/24 09:09:39] ppcls INFO:     output_dir : ./output/\r\n[2023/04/24 09:09:39] ppcls INFO:     pretrained_model : None\r\n[2023/04/24 09:09:39] ppcls INFO:     print_batch_step : 10\r\n[2023/04/24 09:09:39] ppcls INFO:     save_inference_dir : ./inference/ResNet101_vd\r\n[2023/04/24 09:09:39] ppcls INFO:     save_interval : 1\r\n[2023/04/24 09:09:39] ppcls INFO:     use_visualdl : True\r\n[2023/04/24 09:09:39] ppcls INFO: Infer : \r\n[2023/04/24 09:09:39] ppcls INFO:     PostProcess : \r\n[2023/04/24 09:09:39] ppcls INFO:         class_id_map_file : ppcls/utils/imagenet1k_label_list.txt\r\n[2023/04/24 09:09:39] ppcls INFO:         name : Topk\r\n[2023/04/24 09:09:39] ppcls INFO:         topk : 5\r\n[2023/04/24 09:09:39] ppcls INFO:     batch_size : 10\r\n[2023/04/24 09:09:39] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/04/24 09:09:39] ppcls INFO:     transforms : \r\n[2023/04/24 09:09:39] ppcls INFO:         DecodeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:             channel_first : False\r\n[2023/04/24 09:09:39] ppcls INFO:             to_rgb : True\r\n[2023/04/24 09:09:39] ppcls INFO:         ResizeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:             resize_short : 896\r\n[2023/04/24 09:09:39] ppcls INFO:         CropImage : \r\n[2023/04/24 09:09:39] ppcls INFO:             size : 896\r\n[2023/04/24 09:09:39] ppcls INFO:         NormalizeImage : \r\n[2023/04/24 09:09:39] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/04/24 09:09:39] ppcls INFO:             order : \r\n[2023/04/24 09:09:39] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/24 09:09:39] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/24 09:09:39] ppcls INFO:         ToCHWImage : None\r\n[2023/04/24 09:09:39] ppcls INFO: Loss : \r\n[2023/04/24 09:09:39] ppcls INFO:     Eval : \r\n[2023/04/24 09:09:39] ppcls INFO:         CELoss : \r\n[2023/04/24 09:09:39] ppcls INFO:             weight : 1.0\r\n[2023/04/24 09:09:39] ppcls INFO:     Train : \r\n[2023/04/24 09:09:39] ppcls INFO:         CELoss : \r\n[2023/04/24 09:09:39] ppcls INFO:             epsilon : 0.1\r\n[2023/04/24 09:09:39] ppcls INFO:             weight : 1.0\r\n[2023/04/24 09:09:39] ppcls INFO: Metric : \r\n[2023/04/24 09:09:39] ppcls INFO:     Eval : \r\n[2023/04/24 09:09:39] ppcls INFO:         TopkAcc : \r\n[2023/04/24 09:09:39] ppcls INFO:             topk : [1, 5]\r\n[2023/04/24 09:09:39] ppcls INFO:     Train : None\r\n[2023/04/24 09:09:39] ppcls INFO: Optimizer : \r\n[2023/04/24 09:09:39] ppcls INFO:     lr : \r\n[2023/04/24 09:09:39] ppcls INFO:         learning_rate : 0.1\r\n[2023/04/24 09:09:39] ppcls INFO:         name : Cosine\r\n[2023/04/24 09:09:39] ppcls INFO:     momentum : 0.9\r\n[2023/04/24 09:09:39] ppcls INFO:     name : Momentum\r\n[2023/04/24 09:09:39] ppcls INFO:     regularizer : \r\n[2023/04/24 09:09:39] ppcls INFO:         coeff : 0.0001\r\n[2023/04/24 09:09:39] ppcls INFO:         name : L2\r\n[2023/04/24 09:09:39] ppcls INFO: profiler_options : None\r\n[2023/04/24 09:09:39] ppcls INFO: train with paddle 2.4.2 and device Place(gpu:0)\r\nW0424 09:09:43.058949  7970 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 12.0, Runtime API Version: 11.7\r\nW0424 09:09:43.059475  7970 gpu_resources.cc:91] device: 0, cuDNN Version: 8.9.\r\n[2023/04/24 09:09:43] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 2 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nI0424 09:09:43.886898  7970 tcp_utils.cc:181] The server starts to listen on IP_ANY:48471\r\nI0424 09:09:43.887037  7970 tcp_utils.cc:130] Successfully connected to 127.0.1.1:48471\r\n[2023/04/24 09:09:57] ppcls INFO: [Train][Epoch 1/200][Iter: 0/5493]lr(CosineAnnealingDecay): 0.10000000, CELoss: 0.70461, loss: 0.70461, batch_cost: 12.86058s, reader_cost: 0.89499, ips: 0.31103 samples/s, eta: 163 days, 12:37:14\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::pybind::ThrowExceptionToPython(std::__exception_ptr::exception_ptr)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Process abort signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1682298608 (unix time) try \"date -d @1682298608\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGABRT (@0x3e800001f22) received by PID 7970 (TID 0x7f4b4ac39740) from PID 7970 ***]\r\n\r\nLAUNCH INFO 2023-04-24 09:10:08,912 Pod failed\r\nLAUNCH ERROR 2023-04-24 09:10:08,912 Container failed !!!\r\nContainer rank 0 status failed cmd ['/home/uvtec/miniconda3/envs/paddle_gpu/bin/python', '-u', 'tools/train.py', '-c', './ppcls/configs/ImageNet/ResNet/ResNet101_vd.yaml'] code -6 log log/workerlog.0 \r\nenv {'SHELL': '/bin/bash', 'SESSION_MANAGER': 'local/uvtec-MS-7B98:@/tmp/.ICE-unix/2423,unix/uvtec-MS-7B98:/tmp/.ICE-unix/2423', 'QT_ACCESSIBILITY': '1', 'SNAP_REVISION': '327', 'XDG_CONFIG_DIRS': '/etc/xdg/xdg-ubuntu:/etc/xdg', 'SSH_AGENT_LAUNCHER': 'gnome-keyring', 'XDG_MENU_PREFIX': 'gnome-', 'GNOME_DESKTOP_SESSION_ID': 'this-is-deprecated', 'CONDA_EXE': '/home/uvtec/miniconda3/bin/conda', '_CE_M': '', 'SNAP_REAL_HOME': '/home/uvtec', 'TERMINAL_EMULATOR': 'JetBrains-JediTerm', 'SNAP_USER_COMMON': '/home/uvtec/snap/pycharm-community/common', 'LANGUAGE': 'zh_CN:en', 'LC_ADDRESS': 'zh_CN.UTF-8', 'GNOME_SHELL_SESSION_MODE': 'ubuntu', 'LC_NAME': 'zh_CN.UTF-8', 'SSH_AUTH_SOCK': '/run/user/1000/keyring/ssh', 'TERM_SESSION_ID': 'a956c70c-5d9f-4680-8ac6-2ad7d58ec4f1', 'SNAP_INSTANCE_KEY': '', 'XMODIFIERS': '@im=ibus', 'DESKTOP_SESSION': 'ubuntu', 'LC_MONETARY': 'zh_CN.UTF-8', 'BAMF_DESKTOP_FILE_HINT': '/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop', 'GTK_MODULES': 'gail:atk-bridge', 'PWD': '/media/uvtec/9AF4F5A0F4F57EB7/PaddleClas', 'XDG_SESSION_DESKTOP': 'ubuntu', 'LOGNAME': 'uvtec', 'XDG_SESSION_TYPE': 'x11', 'CONDA_PREFIX': '/home/uvtec/miniconda3/envs/paddle_gpu', 'GPG_AGENT_INFO': '/run/user/1000/gnupg/S.gpg-agent:0:1', 'SYSTEMD_EXEC_PID': '2442', 'XAUTHORITY': '/run/user/1000/gdm/Xauthority', 'DESKTOP_STARTUP_ID': 'gnome-shell/PyCharm Community Edition/2442-0-uvtec-MS-7B98_TIME1963332', 'SNAP_CONTEXT': 'ItXkcY4SkrtWx8kN-yr9nOSIKj2CLtxC0KLdiOUjek9vLzFvhRJT', 'GJS_DEBUG_TOPICS': 'JS ERROR;JS LOG', 'WINDOWPATH': '2', 'HOME': '/home/uvtec', 'USERNAME': 'uvtec', 'LANG': 'zh_CN.UTF-8', 'LC_PAPER': 'zh_CN.UTF-8', 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:', 'XDG_CURRENT_DESKTOP': 'ubuntu:GNOME', 'SNAP_ARCH': 'amd64', 'SNAP_INSTANCE_NAME': 'pycharm-community', 'SNAP_USER_DATA': '/home/uvtec/snap/pycharm-community/327', 'CONDA_PROMPT_MODIFIER': '(paddle_gpu) ', 'INVOCATION_ID': 'f614011ab40f4ab98614d015201130dd', 'MANAGERPID': '2142', 'SNAP_REEXEC': '', 'GJS_DEBUG_OUTPUT': 'stderr', 'LESSCLOSE': '/usr/bin/lesspipe %s %s', 'XDG_SESSION_CLASS': 'user', 'TERM': 'xterm-256color', 'LC_IDENTIFICATION': 'zh_CN.UTF-8', '_CE_CONDA': '', 'LESSOPEN': '| /usr/bin/lesspipe %s', 'USER': 'uvtec', 'SNAP': '/snap/pycharm-community/327', 'CONDA_SHLVL': '2', 'SNAP_COMMON': '/var/snap/pycharm-community/common', 'SNAP_VERSION': '2023.1', 'DISPLAY': ':1', 'SHLVL': '1', 'SNAP_LIBRARY_PATH': '/var/lib/snapd/lib/gl:/var/lib/snapd/lib/gl32:/var/lib/snapd/void', 'SNAP_COOKIE': 'ItXkcY4SkrtWx8kN-yr9nOSIKj2CLtxC0KLdiOUjek9vLzFvhRJT', 'LC_TELEPHONE': 'zh_CN.UTF-8', 'QT_IM_MODULE': 'ibus', 'LC_MEASUREMENT': 'zh_CN.UTF-8', 'PAPERSIZE': 'a4', 'SNAP_DATA': '/var/snap/pycharm-community/327', 'CONDA_PYTHON_EXE': '/home/uvtec/miniconda3/bin/python', 'LD_LIBRARY_PATH': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/../../lib64:/usr/local/cuda-11.7/lib64:', 'XDG_RUNTIME_DIR': '/run/user/1000', 'CONDA_DEFAULT_ENV': 'paddle_gpu', 'LC_TIME': 'zh_CN.UTF-8', 'SNAP_NAME': 'pycharm-community', 'JOURNAL_STREAM': '8:31656', 'XDG_DATA_DIRS': '/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop', 'PATH': '/home/uvtec/miniconda3/envs/paddle_gpu/bin:/home/uvtec/miniconda3/condabin:/usr/local/cuda-11.7/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin', 'GDMSESSION': 'ubuntu', 'DBUS_SESSION_BUS_ADDRESS': 'unix:path=/run/user/1000/bus', 'CONDA_PREFIX_1': '/home/uvtec/miniconda3', 'GIO_LAUNCHED_DESKTOP_FILE_PID': '3863', 'GIO_LAUNCHED_DESKTOP_FILE': '/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop', 'LC_NUMERIC': 'zh_CN.UTF-8', '_': '/home/uvtec/miniconda3/envs/paddle_gpu/bin/python', 'CUSTOM_DEVICE_ROOT': '', 'OMP_NUM_THREADS': '1', 'QT_QPA_PLATFORM_PLUGIN_PATH': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/qt/plugins', 'QT_QPA_FONTDIR': '/home/uvtec/miniconda3/envs/paddle_gpu/lib/python3.8/site-packages/cv2/qt/fonts', 'POD_NAME': 'gnhppr', 'PADDLE_MASTER': '127.0.1.1:48471', 'PADDLE_GLOBAL_SIZE': '2', 'PADDLE_LOCAL_SIZE': '2', 'PADDLE_GLOBAL_RANK': '0', 'PADDLE_LOCAL_RANK': '0', 'PADDLE_NNODES': '1', 'PADDLE_TRAINER_ENDPOINTS': '127.0.1.1:48472,127.0.1.1:48473', 'PADDLE_CURRENT_ENDPOINT': '127.0.1.1:48472', 'PADDLE_TRAINER_ID': '0', 'PADDLE_TRAINERS_NUM': '2', 'PADDLE_RANK_IN_NODE': '0', 'FLAGS_selected_gpus': '0'}\r\nLAUNCH INFO 2023-04-24 09:10:08,912 ------------------------- ERROR LOG DETAIL -------------------------\r\n5, 0.456, 0.406]\r\n[2023/04/24 09:09:39] ppcls INFO:             order : \r\n[2023/04/24 09:09:39] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/24 09:09:39] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/24 09:09:39] ppcls INFO:         ToCHWImage : None\r\n[2023/04/24 09:09:39] ppcls INFO: Loss : \r\n[2023/04/24 09:09:39] ppcls INFO:     Eval : \r\n[2023/04/24 09:09:39] ppcls INFO:         CELoss : \r\n[2023/04/24 09:09:39] ppcls INFO:             weight : 1.0\r\n[2023/04/24 09:09:39] ppcls INFO:     Train : \r\n[2023/04/24 09:09:39] ppcls INFO:         CELoss : \r\n[2023/04/24 09:09:39] ppcls INFO:             epsilon : 0.1\r\n[2023/04/24 09:09:39] ppcls INFO:             weight : 1.0\r\n[2023/04/24 09:09:39] ppcls INFO: Metric : \r\n[2023/04/24 09:09:39] ppcls INFO:     Eval : \r\n[2023/04/24 09:09:39] ppcls INFO:         TopkAcc : \r\n[2023/04/24 09:09:39] ppcls INFO:             topk : [1, 5]\r\n[2023/04/24 09:09:39] ppcls INFO:     Train : None\r\n[2023/04/24 09:09:39] ppcls INFO: Optimizer : \r\n[2023/04/24 09:09:39] ppcls INFO:     lr : \r\n[2023/04/24 09:09:39] ppcls INFO:         learning_rate : 0.1\r\n[2023/04/24 09:09:39] ppcls INFO:         name : Cosine\r\n[2023/04/24 09:09:39] ppcls INFO:     momentum : 0.9\r\n[2023/04/24 09:09:39] ppcls INFO:     name : Momentum\r\n[2023/04/24 09:09:39] ppcls INFO:     regularizer : \r\n[2023/04/24 09:09:39] ppcls INFO:         coeff : 0.0001\r\n[2023/04/24 09:09:39] ppcls INFO:         name : L2\r\n[2023/04/24 09:09:39] ppcls INFO: profiler_options : None\r\n[2023/04/24 09:09:39] ppcls INFO: train with paddle 2.4.2 and device Place(gpu:0)\r\nW0424 09:09:43.058949  7970 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.5, Driver API Version: 12.0, Runtime API Version: 11.7\r\nW0424 09:09:43.059475  7970 gpu_resources.cc:91] device: 0, cuDNN Version: 8.9.\r\n[2023/04/24 09:09:43] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 2 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nI0424 09:09:43.886898  7970 tcp_utils.cc:181] The server starts to listen on IP_ANY:48471\r\nI0424 09:09:43.887037  7970 tcp_utils.cc:130] Successfully connected to 127.0.1.1:48471\r\n[2023/04/24 09:09:57] ppcls INFO: [Train][Epoch 1/200][Iter: 0/5493]lr(CosineAnnealingDecay): 0.10000000, CELoss: 0.70461, loss: 0.70461, batch_cost: 12.86058s, reader_cost: 0.89499, ips: 0.31103 samples/s, eta: 163 days, 12:37:14\r\n\r\n\r\n--------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle::pybind::ThrowExceptionToPython(std::__exception_ptr::exception_ptr)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Process abort signal` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1682298608 (unix time) try \"date -d @1682298608\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGABRT (@0x3e800001f22) received by PID 7970 (TID 0x7f4b4ac39740) from PID 7970 ***]\r\n\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-04-24T01:16:01+00:00",
        "updated_at": "2023-04-26T09:37:14+00:00",
        "closed_at": "2023-04-26T09:37:02+00:00",
        "comments_count": [
            "Hongyuan-Liu",
            "happybear1015",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2771,
        "title": "细粒度的分类的模型选择",
        "body": "请问：要进行细粒度的分类（就是特别难分类的），采用哪种模型比较好呢？",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "happybear1015",
        "created_at": "2023-04-26T09:38:58+00:00",
        "updated_at": "2023-05-05T02:49:13+00:00",
        "closed_at": "2023-05-05T02:49:07+00:00",
        "comments_count": [
            "zengshao0622",
            "happybear1015",
            "happybear1015"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2768,
        "title": "PP-HGNet 模型转换后  paddleserving 无法正常加载",
        "body": "\r\n\r\n1. PaddleClas release/2.5 \r\n2. paddleserving docker镜像 registry.baidubce.com/paddlepaddle/serving:0.8.0-cuda10.2-cudnn8-runtime\r\n3. 转换模型成功\r\n\r\n```\r\npython -m paddle_serving_client.convert --dirname ./PPHGNet_base_infer/ \\\r\n                                         --model_filename inference.pdmodel          \\\r\n                                         --params_filename inference.pdiparams       \\\r\n                                         --serving_server ./PPHGNet_base_serving/ \\\r\n                                         --serving_client ./PPHGNet_base_client/\r\n```\r\n\r\n4. 已修改 alias_name\r\n\r\n```\r\n# cat /data/ppclas/models/PPHGNet_base_serving/serving_server_conf.prototxt \r\nfeed_var {\r\n  name: \"inputs\"\r\n  alias_name: \"inputs\"\r\n  is_lod_tensor: false\r\n  feed_type: 1\r\n  shape: 3\r\n  shape: 224\r\n  shape: 224\r\n}\r\nfetch_var {\r\n  name: \"softmax_1.tmp_0\"\r\n  alias_name: \"prediction\"\r\n  is_lod_tensor: false\r\n  fetch_type: 1\r\n  shape: 342\r\n}\r\n```\r\n\r\n```\r\n# cat /data/ppclas/models/PPHGNet_base_client/serving_client_conf.prototxt  \r\nfeed_var {\r\n  name: \"inputs\"\r\n  alias_name: \"inputs\"\r\n  is_lod_tensor: false\r\n  feed_type: 1\r\n  shape: 3\r\n  shape: 224\r\n  shape: 224\r\n}\r\nfetch_var {\r\n  name: \"softmax_1.tmp_0\"\r\n  alias_name: \"prediction\"\r\n  is_lod_tensor: false\r\n  fetch_type: 1\r\n  shape: 342\r\n}\r\n```\r\n\r\n5.  deploy/paddleserving/config_hgnet.yml 配置文件， 只修改了 model_config 字段\r\n\r\n```\r\n#worker_num, 最大并发数。当build_dag_each_worker=True时, 框架会创建worker_num个进程，每个进程内构建grpcSever和DAG\r\n##当build_dag_each_worker=False时，框架会设置主线程grpc线程池的max_workers=worker_num\r\nworker_num: 1\r\n\r\n#http端口, rpc_port和http_port不允许同时为空。当rpc_port可用且http_port为空时，不自动生成http_port\r\nhttp_port: 18080\r\nrpc_port: 9993\r\n\r\ndag:\r\n    #op资源类型, True, 为线程模型；False，为进程模型\r\n    is_thread_op: False\r\nop:\r\n    imagenet:\r\n        #并发数，is_thread_op=True时，为线程并发；否则为进程并发\r\n        concurrency: 1\r\n\r\n        #当op配置没有server_endpoints时，从local_service_conf读取本地服务配置\r\n        local_service_conf:\r\n\r\n            #uci模型路径\r\n            model_config: /data/ppclas/models/PPHGNet_base_serving\r\n\r\n            #计算硬件类型: 空缺时由devices决定(CPU/GPU)，0=cpu, 1=gpu, 2=tensorRT, 3=arm cpu, 4=kunlun xpu\r\n            device_type: 1\r\n\r\n            #计算硬件ID，当devices为\"\"或不写时为CPU预测；当devices为\"0\", \"0,1,2\"时为GPU预测，表示使用的GPU卡\r\n            devices: \"0\" # \"0,1\"\r\n\r\n            #client类型，包括brpc, grpc和local_predictor.local_predictor不启动Serving服务，进程内预测\r\n            client_type: local_predictor\r\n\r\n            #Fetch结果列表，以client_config中fetch_var的alias_name为准\r\n            fetch_list: [\"prediction\"]\r\n\r\n```\r\n\r\n\r\n\r\n6. clas_web_service.py copy 自classification_web_service.py , 增加 config label 参数。\r\n\r\n```python\r\nimport argparse\r\n\r\n\r\nclass ClassOp(Op):\r\n    def init_op(self):\r\n        self.seq = Sequential([\r\n            Resize(256), CenterCrop(224), RGB2BGR(), Transpose((2, 0, 1)),\r\n            Div(255), Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225],\r\n                                True)\r\n        ])\r\n        self.label_dict = {}\r\n        label_idx = 0\r\n        with open(args.label) as fin:\r\n            for line in fin:\r\n                self.label_dict[label_idx] = line.strip()\r\n                label_idx += 1\r\n        print('label_idx:', label_idx)\r\n\r\n    def preprocess(self, input_dicts, data_id, log_id):\r\n        (_, input_dict), = input_dicts.items()\r\n        batch_size = len(input_dict.keys())\r\n        imgs = []\r\n        for key in input_dict.keys():\r\n            data = base64.b64decode(input_dict[key].encode('utf8'))\r\n            data = np.fromstring(data, np.uint8)\r\n            im = cv2.imdecode(data, cv2.IMREAD_COLOR)\r\n            img = self.seq(im)\r\n            imgs.append(img[np.newaxis, :].copy())\r\n        input_imgs = np.concatenate(imgs, axis=0)\r\n        print('preprocess return')\r\n        return {\"inputs\": input_imgs}, False, None, \"\"\r\n\r\n    def postprocess(self, input_dicts, fetch_dict, data_id, log_id):\r\n        print('postprocess')\r\n        score_list = fetch_dict[\"prediction\"]\r\n        print('score_list:', score_list)\r\n        result = {\"label\": [], \"prob\": []}\r\n        for score in score_list:\r\n            score = score.tolist()\r\n            max_score = max(score)\r\n            result[\"label\"].append(self.label_dict[score.index(max_score)]\r\n                                   .strip().replace(\",\", \"\"))\r\n            result[\"prob\"].append(max_score)\r\n        result[\"label\"] = str(result[\"label\"])\r\n        result[\"prob\"] = str(result[\"prob\"])\r\n        return result, None, \"\"\r\n\r\n\r\nclass ImageService(WebService):\r\n    def get_pipeline_response(self, read_op):\r\n        image_op = ClassOp(name=\"clas\", input_ops=[read_op])\r\n        return image_op\r\n\r\n\r\nparser = argparse.ArgumentParser(description='class web service.')\r\nparser.add_argument('--config', help='Path to the config yaml file.', required=True)\r\nparser.add_argument('--label', help='Path to the label file.', required=True)\r\nargs = parser.parse_args()\r\n\r\nprint('config:', args.config)\r\nprint('label:', args.label)\r\n\r\nuci_service = ImageService(name=\"clas\")\r\nuci_service.prepare_pipeline_config(args.config)\r\nuci_service.run_service()\r\n\r\n```\r\n\r\n\r\n\r\n7. 启动测试, 日志如下，后面卡住，不再输出日志\r\n\r\n```\r\n# python clas_web_service.py --config=config_hgnet.yml --label=material_category.names\r\nconfig: config_hgnet.yml\r\nlabel: material_category.names\r\n[DAG] Succ init\r\n[PipelineServicer] succ init\r\nlabel_idx: 342\r\n[OP Object] init success\r\n2023/04/25 15:52:12 start proxy service\r\n\r\n```\r\n\r\n\r\n\r\n8 **测试对比: 在同一个容器，使用 ResNet50_vd_serving 测试 ，可以正常启动。** 日志如下\r\n\r\n```\r\npython classification_web_service.py \r\n[DAG] Succ init\r\n[PipelineServicer] succ init\r\n2023/04/25 15:53:35 start proxy service\r\n/usr/local/lib/python3.7/site-packages/setuptools/depends.py:2: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\nW0425 15:53:37.676652  2188 analysis_predictor.cc:1118] The one-time configuration of analysis predictor failed, which may be due to native predictor called first and its configurations taken effect.\r\nI0425 15:53:37.698829  2188 analysis_predictor.cc:985] ir_optim is turned off, no IR pass will be executed\r\n--- Running analysis [ir_graph_build_pass]\r\n--- Running analysis [ir_graph_clean_pass]\r\n--- Running analysis [ir_analysis_pass]\r\n--- Running analysis [ir_params_sync_among_devices_pass]\r\nI0425 15:53:37.794505  2188 ir_params_sync_among_devices_pass.cc:100] Sync params from CPU to GPU\r\n--- Running analysis [adjust_cudnn_workspace_size_pass]\r\n--- Running analysis [inference_op_replace_pass]\r\n--- Running analysis [memory_optimize_pass]\r\nI0425 15:53:37.862497  2188 memory_optimize_pass.cc:216] Cluster name : batch_norm_47.tmp_1  size: 8192\r\nI0425 15:53:37.862529  2188 memory_optimize_pass.cc:216] Cluster name : inputs  size: 602112\r\nI0425 15:53:37.862537  2188 memory_optimize_pass.cc:216] Cluster name : elementwise_add_4  size: 1605632\r\nI0425 15:53:37.862562  2188 memory_optimize_pass.cc:216] Cluster name : batch_norm_6.tmp_2  size: 3211264\r\nI0425 15:53:37.862571  2188 memory_optimize_pass.cc:216] Cluster name : batch_norm_12.tmp_2  size: 3211264\r\nI0425 15:53:37.862581  2188 memory_optimize_pass.cc:216] Cluster name : batch_norm_9.tmp_2  size: 3211264\r\n--- Running analysis [ir_graph_to_program_pass]\r\nI0425 15:53:37.918294  2188 analysis_predictor.cc:1035] ======= optimize end =======\r\nI0425 15:53:37.922237  2188 naive_executor.cc:102] ---  skip [feed], feed -> inputs\r\nI0425 15:53:37.924780  2188 naive_executor.cc:102] ---  skip [save_infer_model/scale_0.tmp_1], fetch -> fetch\r\n[OP Object] init success\r\n```\r\n\r\n",
        "state": "closed",
        "user": "math345",
        "closed_by": "math345",
        "created_at": "2023-04-25T07:55:43+00:00",
        "updated_at": "2023-04-26T02:53:58+00:00",
        "closed_at": "2023-04-26T02:53:55+00:00",
        "comments_count": [
            "math345"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2773,
        "title": "IndexError: index 1262 is out of bounds for axis 0 with size 2",
        "body": " **1. PaddleClas develop以及paddle 2.3.2版本**\r\n train with paddle 2.3.2 and device Place(gpu:0)\r\n[2023/04/28 14:30:15] ppcls WARNING: Unable to calculate accuracy when using \"batch_transform_ops\". The metric \"{'TopkAcc': {'topk': [1, 1]}}\" has been removed.\r\nW0428 14:30:15.277129 929007 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 8.6, Driver API Version: 12.0, Runtime API Version: 11.1\r\nW0428 14:30:15.279021 929007 gpu_resources.cc:91] device: 0, cuDNN Version: 8.7.\r\n[2023/04/28 14:30:15] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\n\r\n **2. 训练环境信息：**\r\n  \r\na. Linux\r\n  b. Python3.7.0\r\n  c. CUDA/cuDNN版本， 如CUDA11.1/cuDNN8.7等\r\n\r\n3. 详细的错误信息及相关log\r\n(paddle2) dp504@504:/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas$ python3 tools/train.py -c ppcls/configs/practical_models/PPHGNet_tiny_calling_halfbody.yaml\r\n/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/pkg_resources/__init__.py:121: DeprecationWarning: pkg_resources is deprecated as an API\r\n  warnings.warn(\"pkg_resources is deprecated as an API\", DeprecationWarning)\r\n/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/pkg_resources/__init__.py:2870: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('zope')`.\r\nImplementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\r\n  declare_namespace(pkg)\r\n[2023/04/28 14:30:15] ppcls INFO: \r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n[2023/04/28 14:30:15] ppcls INFO: Arch : \r\n[2023/04/28 14:30:15] ppcls INFO:     class_num : 2\r\n[2023/04/28 14:30:15] ppcls INFO:     name : PPHGNet_tiny\r\n[2023/04/28 14:30:15] ppcls INFO: DataLoader : \r\n[2023/04/28 14:30:15] ppcls INFO:     Eval : \r\n[2023/04/28 14:30:15] ppcls INFO:         dataset : \r\n[2023/04/28 14:30:15] ppcls INFO:             cls_label_path : /media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/dataset/phone_call/val_list.txt\r\n[2023/04/28 14:30:15] ppcls INFO:             image_root : /media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/dataset/phone_call/\r\n[2023/04/28 14:30:15] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/28 14:30:15] ppcls INFO:             transform_ops : \r\n[2023/04/28 14:30:15] ppcls INFO:                 DecodeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     channel_first : False\r\n[2023/04/28 14:30:15] ppcls INFO:                     to_rgb : True\r\n[2023/04/28 14:30:15] ppcls INFO:                 ResizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     backend : pil\r\n[2023/04/28 14:30:15] ppcls INFO:                     interpolation : bicubic\r\n[2023/04/28 14:30:15] ppcls INFO:                     size : 224\r\n[2023/04/28 14:30:15] ppcls INFO:                 NormalizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/28 14:30:15] ppcls INFO:                     order : \r\n[2023/04/28 14:30:15] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/28 14:30:15] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/28 14:30:15] ppcls INFO:         loader : \r\n[2023/04/28 14:30:15] ppcls INFO:             num_workers : 1\r\n[2023/04/28 14:30:15] ppcls INFO:             use_shared_memory : True\r\n[2023/04/28 14:30:15] ppcls INFO:         sampler : \r\n[2023/04/28 14:30:15] ppcls INFO:             batch_size : 2\r\n[2023/04/28 14:30:15] ppcls INFO:             drop_last : False\r\n[2023/04/28 14:30:15] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/28 14:30:15] ppcls INFO:             shuffle : False\r\n[2023/04/28 14:30:15] ppcls INFO:     Train : \r\n[2023/04/28 14:30:15] ppcls INFO:         dataset : \r\n[2023/04/28 14:30:15] ppcls INFO:             batch_transform_ops : \r\n[2023/04/28 14:30:15] ppcls INFO:                 OpSampler : \r\n[2023/04/28 14:30:15] ppcls INFO:                     CutmixOperator : \r\n[2023/04/28 14:30:15] ppcls INFO:                         alpha : 1.0\r\n[2023/04/28 14:30:15] ppcls INFO:                         prob : 0.5\r\n[2023/04/28 14:30:15] ppcls INFO:                     MixupOperator : \r\n[2023/04/28 14:30:15] ppcls INFO:                         alpha : 0.2\r\n[2023/04/28 14:30:15] ppcls INFO:                         prob : 0.5\r\n[2023/04/28 14:30:15] ppcls INFO:             cls_label_path : /media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/dataset/phone_call/train_list.txt\r\n[2023/04/28 14:30:15] ppcls INFO:             image_root : /media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/dataset/phone_call/\r\n[2023/04/28 14:30:15] ppcls INFO:             name : ImageNetDataset\r\n[2023/04/28 14:30:15] ppcls INFO:             transform_ops : \r\n[2023/04/28 14:30:15] ppcls INFO:                 DecodeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     channel_first : False\r\n[2023/04/28 14:30:15] ppcls INFO:                     to_rgb : True\r\n[2023/04/28 14:30:15] ppcls INFO:                 ResizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     size : 224\r\n[2023/04/28 14:30:15] ppcls INFO:                 RandFlipImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     flip_code : 1\r\n[2023/04/28 14:30:15] ppcls INFO:                 TimmAutoAugment : \r\n[2023/04/28 14:30:15] ppcls INFO:                     config_str : rand-m7-mstd0.5-inc1\r\n[2023/04/28 14:30:15] ppcls INFO:                     img_size : 224\r\n[2023/04/28 14:30:15] ppcls INFO:                     interpolation : bicubic\r\n[2023/04/28 14:30:15] ppcls INFO:                 NormalizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/04/28 14:30:15] ppcls INFO:                     order : \r\n[2023/04/28 14:30:15] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/04/28 14:30:15] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/04/28 14:30:15] ppcls INFO:                 RandomErasing : \r\n[2023/04/28 14:30:15] ppcls INFO:                     EPSILON : 0.25\r\n[2023/04/28 14:30:15] ppcls INFO: ------------------------------------------------------------\r\n[2023/04/28 14:30:15] ppcls INFO:                     attempt : 10\r\n[2023/04/28 14:30:15] ppcls INFO:                     mode : pixel\r\n[2023/04/28 14:30:15] ppcls INFO:                     r1 : 0.3\r\n[2023/04/28 14:30:15] ppcls INFO:                     sh : 1.0/3.0\r\n[2023/04/28 14:30:15] ppcls INFO:                     sl : 0.02\r\n[2023/04/28 14:30:15] ppcls INFO:                     use_log_aspect : True\r\n[2023/04/28 14:30:15] ppcls INFO:         loader : \r\n[2023/04/28 14:30:15] ppcls INFO:             num_workers : 1\r\n[2023/04/28 14:30:15] ppcls INFO:             use_shared_memory : True\r\n[2023/04/28 14:30:15] ppcls INFO:         sampler : \r\n[2023/04/28 14:30:15] ppcls INFO:             batch_size : 2\r\n[2023/04/28 14:30:15] ppcls INFO:             drop_last : False\r\n[2023/04/28 14:30:15] ppcls INFO:             name : DistributedBatchSampler\r\n[2023/04/28 14:30:15] ppcls INFO:             shuffle : True\r\n[2023/04/28 14:30:15] ppcls INFO: Global : \r\n[2023/04/28 14:30:15] ppcls INFO:     checkpoints : None\r\n[2023/04/28 14:30:15] ppcls INFO:     device : gpu\r\n[2023/04/28 14:30:15] ppcls INFO:     epochs : 50\r\n[2023/04/28 14:30:15] ppcls INFO:     eval_during_train : True\r\n[2023/04/28 14:30:15] ppcls INFO:     eval_interval : 1\r\n[2023/04/28 14:30:15] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2023/04/28 14:30:15] ppcls INFO:     output_dir : ./output/\r\n[2023/04/28 14:30:15] ppcls INFO:     pretrained_model : None\r\n[2023/04/28 14:30:15] ppcls INFO:     print_batch_step : 10\r\n[2023/04/28 14:30:15] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/04/28 14:30:15] ppcls INFO:     save_interval : 1\r\n[2023/04/28 14:30:15] ppcls INFO:     to_static : False\r\n[2023/04/28 14:30:15] ppcls INFO:     use_dali : False\r\n[2023/04/28 14:30:15] ppcls INFO:     use_visualdl : False\r\n[2023/04/28 14:30:15] ppcls INFO: Infer : \r\n[2023/04/28 14:30:15] ppcls INFO:     PostProcess : \r\n[2023/04/28 14:30:15] ppcls INFO:         class_id_map_file : /media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/dataset/phone_call/labels.txt\r\n[2023/04/28 14:30:15] ppcls INFO:         name : Topk\r\n[2023/04/28 14:30:15] ppcls INFO:         topk : 2\r\n[2023/04/28 14:30:15] ppcls INFO:     batch_size : 1\r\n[2023/04/28 14:30:15] ppcls INFO:     infer_imgs : docs/images/inference_deployment/whl_demo.jpg\r\n[2023/04/28 14:30:15] ppcls INFO:     transforms : \r\n[2023/04/28 14:30:15] ppcls INFO:         DecodeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:             channel_first : False\r\n[2023/04/28 14:30:15] ppcls INFO:             to_rgb : True\r\n[2023/04/28 14:30:15] ppcls INFO:         ResizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:             size : 224\r\n[2023/04/28 14:30:15] ppcls INFO:         NormalizeImage : \r\n[2023/04/28 14:30:15] ppcls INFO:             mean : [0.485, 0.456, 0.406]\r\n[2023/04/28 14:30:15] ppcls INFO:             order : \r\n[2023/04/28 14:30:15] ppcls INFO:             scale : 1.0/255.0\r\n[2023/04/28 14:30:15] ppcls INFO:             std : [0.229, 0.224, 0.225]\r\n[2023/04/28 14:30:15] ppcls INFO:         ToCHWImage : None\r\n[2023/04/28 14:30:15] ppcls INFO: Loss : \r\n[2023/04/28 14:30:15] ppcls INFO:     Eval : \r\n[2023/04/28 14:30:15] ppcls INFO:         CELoss : \r\n[2023/04/28 14:30:15] ppcls INFO:             weight : 1.0\r\n[2023/04/28 14:30:15] ppcls INFO:     Train : \r\n[2023/04/28 14:30:15] ppcls INFO:         CELoss : \r\n[2023/04/28 14:30:15] ppcls INFO:             epsilon : 0.1\r\n[2023/04/28 14:30:15] ppcls INFO:             weight : 1.0\r\n[2023/04/28 14:30:15] ppcls INFO: Metric : \r\n[2023/04/28 14:30:15] ppcls INFO:     Eval : \r\n[2023/04/28 14:30:15] ppcls INFO:         TopkAcc : \r\n[2023/04/28 14:30:15] ppcls INFO:             topk : [1, 1]\r\n[2023/04/28 14:30:15] ppcls INFO:     Train : \r\n[2023/04/28 14:30:15] ppcls INFO:         TopkAcc : \r\n[2023/04/28 14:30:15] ppcls INFO:             topk : [1, 1]\r\n[2023/04/28 14:30:15] ppcls INFO: Optimizer : \r\n[2023/04/28 14:30:15] ppcls INFO:     lr : \r\n[2023/04/28 14:30:15] ppcls INFO:         learning_rate : 0.0125\r\n[2023/04/28 14:30:15] ppcls INFO:         name : Cosine\r\n[2023/04/28 14:30:15] ppcls INFO:         warmup_epoch : 3\r\n[2023/04/28 14:30:15] ppcls INFO:     momentum : 0.9\r\n[2023/04/28 14:30:15] ppcls INFO:     name : Momentum\r\n[2023/04/28 14:30:15] ppcls INFO:     regularizer : \r\n[2023/04/28 14:30:15] ppcls INFO:         coeff : 4e-05\r\n[2023/04/28 14:30:15] ppcls INFO:         name : L2\r\n[2023/04/28 14:30:15] ppcls INFO: profiler_options : None\r\n[2023/04/28 14:30:15] ppcls INFO: train with paddle 2.3.2 and device Place(gpu:0)\r\n[2023/04/28 14:30:15] ppcls WARNING: Unable to calculate accuracy when using \"batch_transform_ops\". The metric \"{'TopkAcc': {'topk': [1, 1]}}\" has been removed.\r\nW0428 14:30:15.277129 929007 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 8.6, Driver API Version: 12.0, Runtime API Version: 11.1\r\nW0428 14:30:15.279021 929007 gpu_resources.cc:91] device: 0, cuDNN Version: 8.7.\r\n[2023/04/28 14:30:15] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\n---------------------------------------------------------------------------------labels[idx]: [  62 1262]\r\n------------------------------------------self.class_num2\r\ntargets: [1262   62]\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 34, in <module>\r\n    engine.train()\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/engine/engine.py\", line 356, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/engine/train/train.py\", line 24, in train_epoch\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/threading.py\", line 865, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 534, in _thread_loop\r\n    batch = self._get_data()\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 671, in _get_data\r\n    batch.reraise()\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/worker.py\", line 169, in reraise\r\n    raise self.exc_type(msg)\r\nIndexError: DataLoader worker(0) caught IndexError with message:\r\nTraceback (most recent call last):\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/worker.py\", line 336, in _worker_loop\r\n    batch = fetcher.fetch(indices)\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/fetcher.py\", line 134, in fetch\r\n    data = self.collate_fn(data)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/__init__.py\", line 110, in mix_collate_fn\r\n    batch = transform(batch, batch_ops)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/preprocess/__init__.py\", line 55, in transform\r\n    data = op(data)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/preprocess/batch_ops/batch_operators.py\", line 238, in __call__\r\n    return op(batch) if op else batch\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/preprocess/batch_ops/batch_operators.py\", line 157, in __call__\r\n    targets = self._mix_target(labels, labels[idx], lam)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/preprocess/batch_ops/batch_operators.py\", line 57, in _mix_target\r\n    one_hots0 = self._one_hot(targets0)\r\n  File \"/media/dp504/36675aac-be99-45b0-abf0-9c74c037c1b7/PycharmProjects/swf/PaddleClas/ppcls/data/preprocess/batch_ops/batch_operators.py\", line 53, in _one_hot\r\n    return np.eye(self.class_num, dtype=\"float32\")[targets]\r\nIndexError: index 1262 is out of bounds for axis 0 with size 2\r\n\r\n    for iter_id, batch in enumerate(engine.train_dataloader):\r\n\r\n  File \"/home/dp504/miniconda3/envs/paddle2/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 746, in __next__\r\n    data = self._reader.read_next_var_list()\r\nSystemError: (Fatal) Blocking queue is killed because the data reader raises an exception.\r\n  [Hint: Expected killed_ != true, but received killed_:1 == true:1.] (at /paddle/paddle/fluid/operators/reader/blocking_queue.h:166)\r\n\r\n",
        "state": "open",
        "user": "Bradly-s",
        "closed_by": null,
        "created_at": "2023-04-28T06:46:58+00:00",
        "updated_at": "2024-02-26T04:27:31+00:00",
        "closed_at": null,
        "comments_count": [
            "zengshao0622",
            "Bradly-s",
            "Bradly-s",
            "zengshao0622",
            "Bradly-s"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2772,
        "title": "【BUG？】ValueError： Target 4294967296 is out of lower bound.",
        "body": "PaddleClas release/2.5.1  PaddlePaddle 2.4.0-rc0\r\n Linux Ubuntu18.04，python3.8，CUDA11.1\r\n\r\n没有对代码做任何改动，参考readme教程，下载了你们提供的person_exists数据，训练PPLCNet网络：\r\n单卡训练正常，训练指令为：\r\npython tools/train.py -c ./ppcls/configs/PULC/person_exists/PPLCNet_x1_0.yaml\r\n\r\n多卡训练报错，训练指令为：\r\npython -m paddle.distributed.launch --gpus=\"0,1,2,3\" tools/train.py -c ./ppcls/configs/PULC/person_exists/PPLCNet_x1_0.yaml\r\n\r\n报错信息：\r\nFile \"root/anaconda3/envs/paddleclas/lib/python3.8/site-packages/paddle/nn/functional/loss.py\"，line 2392，in cross_entropy\r\n    raise ValueError(\"Target {} is out of lower bound.\".format(\r\nValueError: Target 4294967296 is out of lower bound. \r\n\r\n我看了下，报错原因在这行代码(\"root/anaconda3/envs/paddleclas/lib/python3.8/site-packages/paddle/nn/functional/loss.py 2387)：\r\nvalid_label = paddle.cast(label != ignore_index, dtype=label.dtype) * label\r\n输入的label是正确的，ignore_index是默认的-100，但是多卡训练状态下，得到的valid_label是异常值（全是类似4294967296这种值）。但是单卡训练状态，得到的valid_label是正常的。这是bug吗？还是哪里有问题？\r\n\r\n\r\n\r\n\r\n",
        "state": "open",
        "user": "XA-hyy",
        "closed_by": null,
        "created_at": "2023-04-27T08:05:15+00:00",
        "updated_at": "2024-02-26T04:27:32+00:00",
        "closed_at": null,
        "comments_count": [
            "XA-hyy"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2774,
        "title": "请问这个项目支持相似图片去重吗？",
        "body": "请问这个项目支持相似图片去重吗？如果想找这个方向上的论文，应该搜索哪一些关键字呢？在哪里搜索呢？",
        "state": "closed",
        "user": "ZZHHogan",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-04T02:14:00+00:00",
        "updated_at": "2025-03-04T09:19:43+00:00",
        "closed_at": "2025-03-04T06:36:07+00:00",
        "comments_count": [
            "zengshao0622",
            "ZZHHogan",
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2779,
        "title": "paddlelabel导出的yolo voc，paddleclas无法使用",
        "body": "paddlelabel导出的yolo，voc 的数据train_list.txt内容如下\r\n\r\n```\r\nJPEGImages\\230209_075442_0000000009_CAM2_NG.jpg Annotations\\230209_075442_0000000009_CAM2_NG.txt\r\nJPEGImages\\230209_080039_0000000092_CAM2_NG.jpg Annotations\\230209_080039_0000000092_CAM2_NG.txt\r\n```\r\npaddleclas2.4.0需要的格式，在加载数据的时候，labels需要转换成int，是一个分类标签，但是这有个问题，一张图片可能会有多个标签（分类）\r\n`File \"/home/aistudio/PaddleClas-2.4.0/ppcls/data/dataloader/imagenet_dataset.py\", line 46, in _load_anno self.labels.append(np.int64(l[1])) ValueError: invalid literal for int() with base 10: 'Annotations\\\\230209_075442_0000000009_CAM2_NG.xml'`\r\n",
        "state": "open",
        "user": "andyz168",
        "closed_by": null,
        "created_at": "2023-05-06T02:56:02+00:00",
        "updated_at": "2024-02-26T04:27:26+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2776,
        "title": "学习率不降低反而增加，为什么？",
        "body": "关键配置信息如下：\r\n# model architecture\r\nArch:\r\n  name: ResNet101_vd\r\n  class_num: 2\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.1\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0001\r\n",
        "state": "closed",
        "user": "happybear1015",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-05T00:56:31+00:00",
        "updated_at": "2025-03-04T09:19:45+00:00",
        "closed_at": "2025-03-04T06:36:08+00:00",
        "comments_count": [
            "happybear1015",
            "zengshao0622",
            "happybear1015",
            "zengshao0622",
            "happybear1015",
            "happybear1015",
            "zengshao0622",
            "happybear1015",
            "zengshao0622",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2778,
        "title": "训练灰度图",
        "body": "如果需要训练灰度图，请问怎么改配置文件呢\r\n",
        "state": "closed",
        "user": "Tolk5946",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-05T09:11:52+00:00",
        "updated_at": "2025-03-04T09:19:47+00:00",
        "closed_at": "2025-03-04T06:36:08+00:00",
        "comments_count": [
            "zengshao0622",
            "Tolk5946",
            "zengshao0622",
            "Tolk5946",
            "Tolk5946",
            "liujia761",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2782,
        "title": "如何将ppshitu-v2特征模型PPLCNetV2_base更改为 EfficientNetB7,或者更换为一个精度更高的模型",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "pozhizhi",
        "closed_by": null,
        "created_at": "2023-05-08T09:24:20+00:00",
        "updated_at": "2024-02-26T04:27:24+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2781,
        "title": "pp-shitu主体检测的预训练模型和inference模型的网络结构不一样",
        "body": "\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/PP-ShiTu/mainbody_detection.md\r\n\r\n在该网页下载的预训练模型，再将其导出为.pdmodel模型，导出设置post_process为true，nms为true，用Netron查看导出的pdmodel模型，和在网页下载的inference模型，网络结构不一样，输入tensor的数量也不一样，预训练模型导出为pdmodel模型和nference模型效果一样吗？",
        "state": "open",
        "user": "edition3234",
        "closed_by": null,
        "created_at": "2023-05-08T06:33:31+00:00",
        "updated_at": "2024-02-26T04:27:25+00:00",
        "closed_at": null,
        "comments_count": [
            "edition3234"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2799,
        "title": "ResNet50静态图训练得到的模型文件如何正确导出onnx?",
        "body": "1、 PaddleClas版本以及PaddlePaddle版本：\r\n    paddlepaddle-gpu    2.3.2.post112  \r\n    paddleclas          2.5.1\r\n \r\n 2、加速卡：RTX 3090 \r\n  ubuntu18.04\r\n  Python3.7\r\n  Driver Version: 525.105.17 \r\n  CUDA 11.2  \r\n  CUDNN 8.5\r\n \r\n3、问题描述\r\n     用paddle静态图模式训练（ppcls/static/train.py）得到的权重通过 tools/export_model.py 转换得到的inference模型rn50推理输出不正确，导致转换成onnx后推理结果不符合预期。请问静态图训练得到的权重如何正确导出onnx？\r\n     \r\n\r\n \r\n",
        "state": "open",
        "user": "tanwei8699",
        "closed_by": null,
        "created_at": "2023-05-15T10:15:23+00:00",
        "updated_at": "2024-02-26T04:27:19+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2787,
        "title": "paddlecls验证的时候，评价指标里面看不到每一类的准确率吗？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "Tolk5946",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-10T04:20:11+00:00",
        "updated_at": "2025-03-04T09:19:49+00:00",
        "closed_at": "2025-03-04T06:36:09+00:00",
        "comments_count": [
            "hahashayebuhui",
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2796,
        "title": "用那个版本",
        "body": "仓库里有好多个版本，但是除了static的那个版本其他的版本好像都没有使用教程，并且static的那个版本中已经存在了一些api不支持的情况，请问有没有新版的使用教程。\r\n",
        "state": "closed",
        "user": "baoyuchen",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-12T13:37:38+00:00",
        "updated_at": "2025-03-04T09:19:51+00:00",
        "closed_at": "2025-03-04T06:36:10+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2797,
        "title": "按照教程训练的主体识别效果差",
        "body": "我需要训练关于鞋子的主体识别，按照这个教程操作的：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/PP-ShiTu/mainbody_detection.md#41-%E6%8E%A8%E7%90%86%E6%A8%A1%E5%9E%8B%E5%87%86%E5%A4%87\r\n 1. 使用PaddleDetection-release-2.6\r\n 2. 训练环境信息：\r\n  a. 具体操作系统Windows\r\n  b. Python版本号：3.6\r\n  c. CUDA/cuDNN版本：CUDA10.2/cuDNN 7.6.5等\r\n 3.picodet_lcnet_x2_5_640_mainbody.yml配置如下。其他文件中只修改了学习率为base_lr: 0.00025。\r\n\r\n_BASE_: [\r\n  '../../../../runtime.yml',\r\n  '../../_base_/picodet_esnet.yml',\r\n  '../../_base_/optimizer_100e.yml',\r\n  '../../_base_/picodet_640_reader.yml',\r\n]\r\n\r\npretrain_weights: premodels/LCNet_x2_5_ssld_pretrained.pdparams\r\n#pretrain_weights: https://paddledet.bj.bcebos.com/models/pretrained/LCNet_x2_5_ssld_pretrained.pdparams\r\nweights: output/picodet_lcnet_x2_5_640_mainbody/model_final\r\nfind_unused_parameters: True\r\nuse_ema: true\r\ncycle_epoch: 20\r\nsnapshot_epoch: 8\r\n\r\nPicoDet:\r\n  backbone: LCNet\r\n  neck: CSPPAN\r\n  head: PicoHead\r\n\r\nLCNet:\r\n  scale: 2.5\r\n  feature_maps: [3, 4, 5]\r\n\r\nmetric: COCO\r\nnum_classes: 1\r\n\r\nTrainDataset:\r\n  !COCODataSet\r\n    image_dir: JPEGImage\r\n    anno_path: ImageSets/voc_train.json\r\n    dataset_dir: dataset/MyDataset/shoes/  \r\n    data_fields: ['image', 'gt_bbox', 'gt_class', 'is_crowd']\r\n\r\nEvalDataset:\r\n  !COCODataSet\r\n    image_dir: JPEGImage\r\n    anno_path: ImageSets/voc_val.json\r\n    dataset_dir: dataset/MyDataset/shoes/\r\n\r\nTestDataset:\r\n  !ImageFolder\r\n    anno_path: ImageSets/voc_val.json # also support txt (like VOC's label_list.txt)   \r\n    \r\n    \r\n\r\n\r\n出现的问题：\r\n 1.预测的结果杂乱目标太多了，不知道哪里出了问题。希望指导下。如下图\r\n 2.按照文档修改了voc_train.json和voc_val.json里面的为\"categories\": [{\"supercategory\": \"foreground\", \"id\": 1, \"name\": \"foreground\"}]。只有前景类型，但是预测出来的都是‘person’，这是怎么回事？\r\n\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/86935392/8ff5b30d-137c-4850-be19-95955ec1c06f)\r\n\r\n",
        "state": "closed",
        "user": "itues",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-14T14:23:32+00:00",
        "updated_at": "2025-03-04T09:19:53+00:00",
        "closed_at": "2025-03-04T06:36:12+00:00",
        "comments_count": [
            "xiaohui0225",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2800,
        "title": "模型导出",
        "body": "AssertionError: config file(configs/config.yaml) is not exist\r\n",
        "state": "closed",
        "user": "isweeks",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-16T10:46:06+00:00",
        "updated_at": "2025-03-04T09:19:55+00:00",
        "closed_at": "2025-03-04T06:36:12+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2806,
        "title": "怎样训练字体分类模型？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n怎样训练字体分类模型？\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_language_classification.md\r\n\r\n\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_language_classification.md",
        "state": "closed",
        "user": "nissansz",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-18T02:42:27+00:00",
        "updated_at": "2025-03-04T09:19:57+00:00",
        "closed_at": "2025-03-04T06:36:13+00:00",
        "comments_count": [
            "cuicheng01",
            "nissansz",
            "cuicheng01",
            "nissansz",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 2809
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2807,
        "title": "关于AMP后断点重新训练的问题",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.5\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n这里主要问题是：代码中途断了以后，我原计划续上，但却出现了无法加载的问题，报错为：半精度无法加载双精度的情况。估计为网络在加载checkpoint之前已经采用了O2的裁剪，导致参数的类型不匹配，希望官方可以尽快修补。顺便一问2.6什么时候出呀~\r\n",
        "state": "closed",
        "user": "swx3027925806",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-18T14:12:28+00:00",
        "updated_at": "2025-03-04T09:20:01+00:00",
        "closed_at": "2025-03-04T06:36:14+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2808,
        "title": "【PP-ShiTu 库管理工具】没有弹出操作界面。",
        "body": "\r\n 1. PaddleClas release/2.5和PaddlePaddle 2.4.2\r\n 2. Linux x86 64 Ubuntu18.04\r\n 3. Python3.9.12\r\n 4. faiss-cpu                 1.7.1.post2\r\n 5. 运行python index_manager.py -c inference_general.yaml 之后，没有弹出操作界面，程序直接退出了，也没有任何提示信息。\r\n \r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/94025121/7546e2d5-7c41-4c82-928e-ddabc927f3d5)\r\n",
        "state": "closed",
        "user": "Taichipeace",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-19T01:30:35+00:00",
        "updated_at": "2025-03-04T09:20:02+00:00",
        "closed_at": "2025-03-04T06:36:15+00:00",
        "comments_count": [
            "cuicheng01",
            "Taichipeace",
            "cuicheng01",
            "sunshinehui",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2810,
        "title": "如何将paddleClas训练好的模型转换成onnx格式",
        "body": "使用[该教程](https://github.com/PaddlePaddle/PaddleClas/blob/v2.4.0/docs/zh_CN/models_training/recognition.md)，训练完成后保存的模型是这样的：\r\n![微信图片_20230522100353](https://github.com/PaddlePaddle/PaddleClas/assets/26426479/78f18c32-13b3-4cb5-b1eb-78341e4e5773)\r\n请问如何将这种格式转换成onnx格式呢，我使用的是这个命令：`paddle2onnx --model_dir=./models/ResNet50_vd_infer/ --model_filename=/workspace/PaddleClas/tools/output/PPLCNet_x1_0/best_model.pdopt --params_filename=/workspace/PaddleClas/tools/output/PPLCNet_x1_0/best_model.pdparams --save_file=/workspace/models/ResNet50_vd_infer/inference.onnx --opset_version=11 --enable_onnx_checker=True`，但是导出不成功：\r\n![微信图片_20230522100627](https://github.com/PaddlePaddle/PaddleClas/assets/26426479/7e7e8458-b71a-444d-b06e-21d5870dec32)\r\n\r\n",
        "state": "closed",
        "user": "DequanZhu",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-22T02:07:26+00:00",
        "updated_at": "2023-05-22T09:13:07+00:00",
        "closed_at": "2023-05-22T09:13:07+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2811,
        "title": "clas能更新最新模型吗？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n\r\n你好，使用paddle有时候真的很不方便，大多前沿论文都是给的pytorch代码，好多优秀的模型结构在paddleclas里面得不到及时的更新，如ghostv2，MobileViTv2，MobileViTv3等，其中MobileViTv3给的pytorch官方实现确实有点难改入到paddleclas仓库中，而且预训练加载起来也很麻烦，请问paddleclas仓库有实现的计划或者建议吗？\r\n",
        "state": "open",
        "user": "shangshanruowo",
        "closed_by": null,
        "created_at": "2023-05-22T02:53:36+00:00",
        "updated_at": "2024-02-26T04:27:13+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "shangshanruowo",
            "shangshanruowo",
            "shangshanruowo",
            "shangshanruowo",
            "shangshanruowo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2822,
        "title": "Resnet-50训练loss function为什么需要DataParallel？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n在单个loss单个优化器的情况下，为什么要DataParallel loss function？\r\n训练时会有loss无法收敛的问题。\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/ppcls/engine/engine.py#L308",
        "state": "closed",
        "user": "zhurou603",
        "closed_by": "zhurou603",
        "created_at": "2023-05-31T05:43:08+00:00",
        "updated_at": "2023-05-31T05:58:35+00:00",
        "closed_at": "2023-05-31T05:58:32+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2819,
        "title": "多机多卡训练问题：不训练",
        "body": "训练环境信息：\r\n  a. 具体操作系统，如Linux/\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.7等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n现在主机和从机连接成功了，但是不训练，这是为什么呢 ：（\r\n![643d02649eee18208b1071317ef27a9](https://github.com/PaddlePaddle/PaddleClas/assets/66996161/6fe97bfa-222e-4f1c-b005-9b03fdc6b5d9)\r\n![a05520aa0bb46b49e9bb2528622a2bc](https://github.com/PaddlePaddle/PaddleClas/assets/66996161/8cd9db19-22b2-4392-af6e-b2f0f1559a42)\r\n",
        "state": "open",
        "user": "happybear1015",
        "closed_by": null,
        "created_at": "2023-05-26T09:01:03+00:00",
        "updated_at": "2024-02-26T04:27:11+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "happybear1015",
            "happybear1015",
            "happybear1015"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2812,
        "title": "PaddleClas2.5版本multi-label onnx模型推断问题",
        "body": "paddleclas2.5使用MobileNetV3_large_x1_25训练multilabel数据集NUS-SCENE-dataset之后，导出成onnx格式后，onnx推断的结果和原始模型结果对不上，图片传不上来，我把文本结果直接粘贴出来了：\r\n1、原始模型的推断结果：\r\n[{'class_ids': [23], 'scores': [0.58354], 'file_name': '/VisualGroup/share5/xty/multi_label/NUS-SCENE-dataset/test_images/0041_2456602544.jpg', 'label_names': []}, {'class_ids': [6, 23, 26], 'scores': [0.98388, 0.98754, 0.95522], 'file_name': '/VisualGroup/share5/xty/multi_label/NUS-SCENE-dataset/test_images/0090_1224483022.jpg', 'label_names': []}]\r\n\r\n2、onnx模型的推断结果：\r\n[{'class_ids': [6, 9, 10, 11, 13, 17, 20, 22, 25, 30], 'scores': [0.63128, 0.90035, 0.59094, 0.58351, 0.54941, 0.54111, 0.70221, 0.62138, 0.57074, 0.51775], 'file_name': '/VisualGroup/share5/xty/multi_label/NUS-SCENE-dataset/test_images/0041_2456602544.jpg', 'label_names': []}, {'class_ids': [1, 4, 5, 8, 9, 10, 11, 18, 22, 24, 27, 28, 30], 'scores': [0.50695, 0.74952, 0.65327, 0.87077, 0.73512, 0.89273, 0.80755, 0.5755, 0.82439, 0.51918, 0.77082, 0.81393, 0.56884], 'file_name': '/VisualGroup/share5/xty/multi_label/NUS-SCENE-dataset/test_images/0090_1224483022.jpg', 'label_names': []}]\r\n\r\n**导出onnx的命令是：**\r\npython3 tools/export_model.py \\\r\n    -c /VisualGroup/share3/xiatianyu/PaddleClas-release-2.5/ppcls/configs/quick_start/professional/MobileNetV3_multilabel.yaml \\\r\n    -o Arch.pretrained=\"/VisualGroup/share3/xiatianyu/PaddleClas-release-2.5/output/MobileNetV3_large_x1_25/best_model\"\r\n\r\npaddle2onnx --model_dir=./inference \\\r\n    --model_filename=inference.pdmodel \\\r\n    --params_filename=inference.pdiparams \\\r\n    --save_file=./models_onnx/MobileNetV3/inference.onnx \\\r\n    --opset_version=10 \\\r\n    --enable_onnx_checker=True\r\n\r\n**推断onnx的命令是：**\r\npython3 tools/infer.py \\\r\n    -c /VisualGroup/share3/xiatianyu/PaddleClas-release-2.5/ppcls/configs/quick_start/professional/MobileNetV3_multilabel.yaml \\\r\n    -o Global.use_onnx=True \\\r\n    -o Global.use_gpu=False \\\r\n    -o Global.inference_model_dir=/VisualGroup/share3/xiatianyu/PaddleClas-release-2.5/models_onnx/MobileNetV3 \\\r\n\t2>&1 | tee  > /VisualGroup/share3/xiatianyu/PaddleClas-release-2.5/logs/infer_MobileNetV3_large_x1_25_onnx.log\r\n",
        "state": "closed",
        "user": "legendxty",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-22T07:53:18+00:00",
        "updated_at": "2025-03-04T09:20:04+00:00",
        "closed_at": "2025-03-04T06:36:16+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2823,
        "title": "评估指标Top1 Top5",
        "body": "请问评估指标是怎么算的，训练两个类别时，为什么Top5不是100%，此外为什么Top1比Top5的值大很多",
        "state": "open",
        "user": "youwei2567",
        "closed_by": null,
        "created_at": "2023-05-31T07:03:14+00:00",
        "updated_at": "2024-02-26T04:27:10+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "youwei2567",
            "youwei2567"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2824,
        "title": "onnx模型不支持GPU推理",
        "body": "\r\n 1. PaddleClas版本2.3使用自有数据训练的resnet50_vd模型\r\n 2. 使用paddleonnx转换的onnx模型\r\n 3. 使用infer.py进行推理\r\n 发现onnx的推理不支持GPU推理，使用onnxruntime-gpu进行推理时报错  ，提示onnx模型不支持GPU推理\r\n请问paddleclas转换的onnx模型不能使用GPU推理吗？\r\n",
        "state": "closed",
        "user": "neuwangmq",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-05-31T08:52:30+00:00",
        "updated_at": "2025-04-29T06:37:51+00:00",
        "closed_at": "2025-04-29T06:36:19+00:00",
        "comments_count": [
            "cuicheng01",
            "BeyondYourself",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2821,
        "title": "Mixup报错",
        "body": "use_mix: True是在yaml里面配置吗，我配置完了，然后出现下面错误：\r\nValueError: (InvalidArgument) ShapeError: label's dimensions of AccuracyOp must be 2. But received label's dimensions = 1, label's shape = [64]\r\n  [Hint: Expected label_dim.size() == 2, but received label_dim.size():1 != 2:2.] (at ..\\paddle\\phi\\infermeta\\ternary.cc:44)\r\n  [operator < accuracy > error]\r\n\r\n",
        "state": "closed",
        "user": "youwei2567",
        "closed_by": "youwei2567",
        "created_at": "2023-05-30T09:26:03+00:00",
        "updated_at": "2023-05-31T11:33:13+00:00",
        "closed_at": "2023-05-31T11:33:10+00:00",
        "comments_count": [
            "cuicheng01",
            "youwei2567",
            "youwei2567",
            "cuicheng01",
            "youwei2567"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2825,
        "title": "关于Clas训练数据增强训练",
        "body": "\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/87969070/79304139-0ae5-4bea-9ee7-1836635ff051)\r\n您好，请问一下，我目前在配置文件中只看到了随机裁剪和随机Flip 还有其他数据增强方式吗？ 如果有我如何在配置文件中添加？\r\n",
        "state": "open",
        "user": "Hold-on-li",
        "closed_by": null,
        "created_at": "2023-05-31T10:27:09+00:00",
        "updated_at": "2024-02-26T04:27:07+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2829,
        "title": "paddle-onnx-gemm操作和torch-onnx-gemm操作不一致问题",
        "body": "**问题描述：**\r\n\r\n目前使用paddle框架训练repvgg分类模型，然后进行转onnx，之后在进行转caffe，但是发现转caffe的时候，遇到了op不支持的问题。\r\n同样使用mmcls-torch框架训练resnet18分类模型，然后进行转哦你那些，之后进行转caffe，发现转caffe是可以的。\r\n\r\n比对了，两个分类模型onnx拓扑图，发现均存在gemm操作。具体如下图：\r\n\r\n![repvgg](https://github.com/PaddlePaddle/PaddleClas/assets/37217594/27bb3b74-aefd-4575-a8c9-d5c527365141)\r\n\r\n![resnet18](https://github.com/PaddlePaddle/PaddleClas/assets/37217594/544c436d-9410-4445-8a0a-c0148f369c24)\r\n\r\n考虑到caffe框架比较老，目前想通过对paddle-repvgg的gemm操作做修改来实现caffe模型的转换。\r\n\r\n请问是否有好的建议或方法？谢谢！",
        "state": "open",
        "user": "tensorflowt",
        "closed_by": null,
        "created_at": "2023-06-07T03:35:46+00:00",
        "updated_at": "2024-02-26T04:27:05+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2827,
        "title": "关于PaddleClas分类部署",
        "body": "不好，请问一下，\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/87969070/7e437b66-cc15-4ced-9fa3-8234a7b11c0b)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/87969070/7570b2d4-0e3c-40f8-a4e5-d76ed4ccc18d)\r\n相关文件都有，\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/87969070/0fe2e3dc-299a-4a3d-962b-3738d1045fa9)\r\n也成功编译了，但是始终无法运行，请问一下，这是怎么一回事呢？\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/87969070/bacfbbd9-4f21-45fe-bc09-75703617de2d)\r\n\r\n",
        "state": "closed",
        "user": "Hold-on-li",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-06-02T10:44:59+00:00",
        "updated_at": "2025-03-04T09:20:06+00:00",
        "closed_at": "2025-03-04T06:36:17+00:00",
        "comments_count": [
            "2mhk",
            "Hold-on-li",
            "2mhk",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2835,
        "title": "ImportError: cannot import name 'Identity' from 'paddle.nn'",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "Schanppi",
        "closed_by": null,
        "created_at": "2023-06-15T08:03:18+00:00",
        "updated_at": "2024-02-26T04:27:01+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "Schanppi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2842,
        "title": "onnxruntime 加载自己训练的模型，怎么构造输入参数",
        "body": "`欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！`\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统 Windows\r\n  b. Python版本号，Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.2\r\n\r\n\r\n`# onnx测试\r\nsession = onnxruntime.InferenceSession(onnx_model_path)\r\n\r\n# 构造输入参数\r\ninputs = {session.get_inputs()[0].name: np.array([1.0, 2.0], dtype=np.float32),\r\n          session.get_inputs()[1].name: img,\r\n          session.get_inputs()[2].name: np.array([1.0, 2.0], dtype=np.float32)}\r\n\r\nouts = session.run(None, inputs)\r\ny_pred_binary = np.argmax(outs, axis=1)\r\nprint(\"onnx prediction\", y_pred_binary[0])\r\n`\r\n报错信息如下\r\n`Traceback (most recent call last):\r\n  File \"C:\\Program Files (x86)\\python37\\lib\\code.py\", line 90, in runcode\r\n    exec(code, self.locals)\r\n  File \"<input>\", line 2, in <module>\r\n  File \"C:\\Users\\94752\\PycharmProjects\\Pytorch2serving\\venv\\lib\\site-packages\\onnxruntime\\capi\\onnxruntime_inference_collection.py\", line 200, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidArgument: [ONNXRuntimeError] : 2 : INVALID_ARGUMENT : Invalid rank for input: im_shape Got: 1 Expected: 2 Please fix either the inputs or the model.\r\n`\r\n检测模型的netron 图如下\r\n![c2aea715a4e2bbf30d559adc6d9094c](https://github.com/PaddlePaddle/PaddleClas/assets/35995146/4f4d813e-903a-4fe5-8312-299f6deb748f)\r\n不知道怎么构造输入参数，请大神指导一下谢谢？\r\n\r\n",
        "state": "open",
        "user": "2018-Summer",
        "closed_by": null,
        "created_at": "2023-06-28T02:36:24+00:00",
        "updated_at": "2024-02-26T04:26:57+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2831,
        "title": "identity_head.py 和 RecModel 的问题",
        "body": "在develop分支\r\n\r\n下面是code链接：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/6edd612453cdef44b379fdf07fe1244e40750e15/ppcls/arch/gears/identity_head.py#L9 和 https://github.com/PaddlePaddle/PaddleClas/blob/6edd612453cdef44b379fdf07fe1244e40750e15/ppcls/arch/__init__.py#L104 可能存在冲突\r\n\r\n如果self.head是IdentityHead则https://github.com/PaddlePaddle/PaddleClas/blob/6edd612453cdef44b379fdf07fe1244e40750e15/ppcls/arch/__init__.py#L104这里的y将会是一个dict",
        "state": "open",
        "user": "AllenWrong",
        "closed_by": null,
        "created_at": "2023-06-12T05:44:33+00:00",
        "updated_at": "2024-02-26T04:27:03+00:00",
        "closed_at": null,
        "comments_count": [
            "AllenWrong"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2830,
        "title": "安装demo失败",
        "body": "Building wheels for collected packages: faiss-cpu\r\n  Building wheel for faiss-cpu (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for faiss-cpu (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [82 lines of output]\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss\\faiss\\python\\swigfaiss.i to faiss\\faiss\\python\\swigfaiss_wrap.cpp\r\n      swig.exe -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWIN -o faiss\\faiss\\python\\swigfaiss_wrap.cpp faiss\\faiss\\python\\swigfaiss.i\r\n      (1) : Error: Unable to find 'swig.swg'\r\n      (3) : Error: Unable to find 'python.swg'\r\n      faiss\\faiss\\python\\swigfaiss.i(24) : Error: Unable to find 'windows.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(36) : Error: Unable to find 'stdint.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(208) : Error: Unable to find 'std_string.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(209) : Error: Unable to find 'std_pair.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(210) : Error: Unable to find 'std_map.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(211) : Error: Unable to find 'std_shared_ptr.i'\r\n      faiss\\faiss\\python\\swigfaiss.i(250) : Error: Unable to find 'faiss\\impl\\platform_macros.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(254) : Error: Unable to find 'faiss\\utils\\ordered_key_value.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(255) : Error: Unable to find 'faiss\\utils\\Heap.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(260) : Error: Unable to find 'faiss\\utils\\AlignedTable.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(261) : Error: Unable to find 'faiss\\utils\\partitioning.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(262) : Error: Unable to find 'faiss\\utils\\hamming.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(365) : Error: Unable to find 'faiss\\utils\\utils.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(366) : Error: Unable to find 'faiss\\utils\\distances.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(367) : Error: Unable to find 'faiss\\utils\\random.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(369) : Error: Unable to find 'faiss\\MetricType.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(372) : Error: Unable to find 'faiss\\Index.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(373) : Error: Unable to find 'faiss\\Clustering.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(375) : Error: Unable to find 'faiss\\utils\\extra_distances.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(379) : Error: Unable to find 'faiss\\impl\\ProductQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(380) : Error: Unable to find 'faiss\\impl\\AdditiveQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(381) : Error: Unable to find 'faiss\\impl\\ResidualQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(382) : Error: Unable to find 'faiss\\impl\\LocalSearchQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(384) : Error: Unable to find 'faiss\\VectorTransform.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(385) : Error: Unable to find 'faiss\\IndexPreTransform.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(386) : Error: Unable to find 'faiss\\IndexFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(387) : Error: Unable to find 'faiss\\IndexRefine.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(388) : Error: Unable to find 'faiss\\IndexLSH.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(389) : Error: Unable to find 'faiss\\impl\\PolysemousTraining.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(390) : Error: Unable to find 'faiss\\IndexPQ.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(391) : Error: Unable to find 'faiss\\IndexResidual.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(392) : Error: Unable to find 'faiss\\impl\\io.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(394) : Error: Unable to find 'faiss\\invlists\\InvertedLists.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(395) : Error: Unable to find 'faiss\\invlists\\InvertedListsIOHook.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(397) : Error: Unable to find 'faiss\\invlists\\BlockInvertedLists.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(398) : Error: Unable to find 'faiss\\invlists\\DirectMap.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(401) : Error: Unable to find 'faiss\\IndexIVF.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(406) : Error: Unable to find 'faiss\\IVFlib.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(407) : Error: Unable to find 'faiss\\impl\\ScalarQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(408) : Error: Unable to find 'faiss\\IndexScalarQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(409) : Error: Unable to find 'faiss\\IndexIVFSpectralHash.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(410) : Error: Unable to find 'faiss\\impl\\HNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(411) : Error: Unable to find 'faiss\\IndexHNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(414) : Error: Unable to find 'faiss\\impl\\NNDescent.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(415) : Error: Unable to find 'faiss\\IndexNNDescent.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(417) : Error: Unable to find 'faiss\\IndexIVFFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(418) : Error: Unable to find 'faiss\\impl\\NSG.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(419) : Error: Unable to find 'faiss\\IndexNSG.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(427) : Error: Unable to find 'faiss\\impl\\lattice_Zn.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(428) : Error: Unable to find 'faiss\\IndexLattice.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(431) : Error: Unable to find 'faiss\\IndexIVFPQ.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(432) : Error: Unable to find 'faiss\\IndexIVFPQR.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(433) : Error: Unable to find 'faiss\\Index2Layer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(435) : Error: Unable to find 'faiss\\IndexPQFastScan.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(436) : Error: Unable to find 'faiss\\IndexIVFPQFastScan.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(437) : Error: Unable to find 'faiss\\utils\\quantize_lut.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(439) : Error: Unable to find 'faiss\\IndexBinary.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(440) : Error: Unable to find 'faiss\\IndexBinaryFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(441) : Error: Unable to find 'faiss\\IndexBinaryIVF.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(442) : Error: Unable to find 'faiss\\IndexBinaryFromFloat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(443) : Error: Unable to find 'faiss\\IndexBinaryHNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(444) : Error: Unable to find 'faiss\\IndexBinaryHash.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(446) : Error: Unable to find 'faiss\\impl\\ThreadedIndex.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(450) : Error: Unable to find 'faiss\\IndexShards.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(454) : Error: Unable to find 'faiss\\IndexReplicas.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(458) : Error: Unable to find 'faiss\\MetaIndexes.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(473) : Error: Unable to find 'faiss\\impl\\AuxIndexStructures.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(663) : Error: Unable to find 'faiss\\index_io.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(664) : Error: Unable to find 'faiss\\clone_index.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(668) : Error: Unable to find 'faiss\\AutoTune.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(669) : Error: Unable to find 'faiss\\index_factory.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(670) : Error: Unable to find 'faiss\\MatrixStats.h'\r\n      error: command 'C:\\\\Windows\\\\System32\\\\swigwin-4.1.1\\\\swig.exe' failed with exit code 1\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects",
        "state": "closed",
        "user": "MJ19970128",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-06-12T02:53:05+00:00",
        "updated_at": "2025-03-04T09:20:08+00:00",
        "closed_at": "2025-03-04T06:36:17+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2844,
        "title": "求助：同一程序中多次进行训练，会出现错误",
        "body": "我需要在程序中，进行两次训练，第一次训练是OK的，但是第二次训练初始化时，调用engine = Engine(cfg, mode=\"train\")时，会报错。\r\n错误信息如下：\r\n\r\n09:59:52.962 onTrainning()函数调用错误:ValueError: parameter name [conv1_1_weights] have be been used. In dygraph mode, the name of parameter can't be same.Please check the parameter attr value passed to self.create_parameter or constructor of dygraph Layers\r\n\r\nAt:\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddle\\fluid\\layer_helper_base.py(371): create_parameter\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddle\\fluid\\dygraph\\layers.py(423): create_parameter\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddle\\nn\\layer\\conv.py(133): __init__\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddle\\nn\\layer\\conv.py(644): __init__\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddleclas\\ppcls\\arch\\backbone\\model_zoo\\res2net_vd.py(62): __init__\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddleclas\\ppcls\\arch\\backbone\\model_zoo\\res2net_vd.py(193): __init__\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddleclas\\ppcls\\arch\\backbone\\model_zoo\\res2net_vd.py(282): Res2Net50_vd_26w_4s\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddleclas\\ppcls\\arch\\__init__.py(40): build_model\r\n  C:\\Users\\ouyan\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\paddleclas\\ppcls\\engine\\engine.py(187): __init__\r\nPaddleClas.py(222): onTrainning\r\n\r\n我的环境是\r\n 1. PaddleClas2.4.0版本\r\n2. 训练环境信息：Windows 10 python3.9   cuda10.1\r\n\r\n这个错误好像是第一次的动态图没有释放，第二次初始化时网络重名了。\r\n\r\n请问一下，有没有方法将第一次创建的engin所占用的资源彻底释放？\r\n\r\n\r\n代码很简单\r\ndef   train()：\r\n    config = config.get_config('D:/temp/test/PaddleClas/Res2Net50_vd_26w_4s_test.yaml')\r\n    config.profiler_options = None\r\n    engine = Engine(config, mode=\"train\")\r\n    engine.train()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n     train()  #第一次训练\r\n     train()   #第二次训练\r\n",
        "state": "open",
        "user": "ouyangguang0726",
        "closed_by": null,
        "created_at": "2023-06-28T04:13:08+00:00",
        "updated_at": "2024-02-26T04:26:56+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2837,
        "title": "图片方向分类模型serving部署报错：{'err_no': 5, 'err_msg': '(log_id=2) imagenet failed to predict.', 'key': [], 'value': [], 'tensors': []}",
        "body": "将图片文字方向模型部署为serving服务。\r\n模型参考文档：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_text_image_orientation.md\r\n对方向分类模型进行了微调，inference模型预测正常。\r\n部署参考文档：https://github.com/PaddlePaddle/PaddleClas/tree/release/2.5/deploy/paddleserving#readme\r\n采用docker部署方式，没有GPU；文档中的imagenet部署成功；方向分类器始终报错。\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\n    paddle-serving-app    0.7.0\r\n    paddle-serving-client 0.7.0\r\n    paddle-serving-server 0.7.0\r\n    paddleclas            2.5.1\r\n    paddlepaddle          2.2.0\r\n  a. 具体操作系统：Linux docker\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， CPU预测\r\n 5. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n    log.txt内容\r\n`2023/06/19 07:53:02 start proxy service\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\nE0619 07:53:03.268620  3511 analysis_config.cc:91] Please compile with gpu to EnableGpu()\r\nI0619 07:53:03.288556  3511 analysis_predictor.cc:668] ir_optim is turned off, no IR pass will be executed\r\n^[[1m^[[35m--- Running analysis [ir_graph_build_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [ir_graph_clean_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [ir_analysis_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [ir_params_sync_among_devices_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [adjust_cudnn_workspace_size_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [inference_op_replace_pass]^[[0m\r\n^[[1m^[[35m--- Running analysis [memory_optimize_pass]^[[0m\r\nI0619 07:53:03.306725  3511 memory_optimize_pass.cc:214] Cluster name : conv2d_48.tmp_1  size: 2048\r\nI0619 07:53:03.306746  3511 memory_optimize_pass.cc:214] Cluster name : batch_norm_2.tmp_2  size: 1605632\r\nI0619 07:53:03.306756  3511 memory_optimize_pass.cc:214] Cluster name : hardswish_33.tmp_0  size: 802816\r\nI0619 07:53:03.306766  3511 memory_optimize_pass.cc:214] Cluster name : hardswish_30.tmp_0  size: 1605632\r\nI0619 07:53:03.306774  3511 memory_optimize_pass.cc:214] Cluster name : x  size: 602112\r\n^[[1m^[[35m--- Running analysis [ir_graph_to_program_pass]^[[0m\r\nI0619 07:53:03.325022  3511 analysis_predictor.cc:717] ======= optimize end =======\r\nI0619 07:53:03.325529  3511 naive_executor.cc:98] ---  skip [feed], feed -> x\r\nI0619 07:53:03.326546  3511 naive_executor.cc:98] ---  skip [hardswish_30.tmp_0], fetch -> fetch`\r\n\r\npython web服务启动代码，仅修改了读取标签部分：\r\n`import sys\r\nfrom paddle_serving_app.reader import Sequential, URL2Image, Resize, CenterCrop, RGB2BGR, Transpose, Div, Normalize, Base64ToImage\r\ntry:\r\n    from paddle_serving_server_gpu.web_service import WebService, Op\r\nexcept ImportError:\r\n    from paddle_serving_server.web_service import WebService, Op\r\nimport logging\r\nimport numpy as np\r\nimport base64, cv2\r\n\r\n\r\nclass ImagenetOp(Op):\r\n    def init_op(self):\r\n        self.seq = Sequential([\r\n            Resize(256), CenterCrop(224), RGB2BGR(), Transpose((2, 0, 1)),\r\n            Div(255), Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225],\r\n                                True)\r\n        ])\r\n        self.label_dict = {}\r\n        label_idx = 0\r\n        with open(\"pplcnet.label\") as fin:\r\n            for line in fin:\r\n                idx, label = line.split()\r\n                self.label_dict[idx] = label\r\n                label_idx += 1\r\n\r\n    def preprocess(self, input_dicts, data_id, log_id):\r\n        (_, input_dict), = input_dicts.items()\r\n        batch_size = len(input_dict.keys())\r\n        imgs = []\r\n        for key in input_dict.keys():\r\n            data = base64.b64decode(input_dict[key].encode('utf8'))\r\n            data = np.fromstring(data, np.uint8)\r\n            im = cv2.imdecode(data, cv2.IMREAD_COLOR)\r\n            img = self.seq(im)\r\n            imgs.append(img[np.newaxis, :].copy())\r\n        input_imgs = np.concatenate(imgs, axis=0)\r\n        return {\"inputs\": input_imgs}, False, None, \"\"\r\n\r\n    def postprocess(self, input_dicts, fetch_dict, data_id, log_id):\r\n        score_list = fetch_dict[\"prediction\"]\r\n        result = {\"label\": [], \"prob\": []}\r\n        for score in score_list:\r\n            score = score.tolist()\r\n            max_score = max(score)\r\n            result[\"label\"].append(self.label_dict[score.index(max_score)]\r\n                                   .strip().replace(\",\", \"\"))\r\n            result[\"prob\"].append(max_score)\r\n        result[\"label\"] = str(result[\"label\"])\r\n        result[\"prob\"] = str(result[\"prob\"])\r\n        return result, None, \"\"\r\n\r\n\r\nclass ImageService(WebService):\r\n    def get_pipeline_response(self, read_op):\r\n        image_op = ImagenetOp(name=\"imagenet\", input_ops=[read_op])\r\n        return image_op\r\n\r\n\r\nuci_service = ImageService(name=\"imagenet\")\r\nuci_service.prepare_pipeline_config(\"config.yml\")\r\nuci_service.run_service()\r\n`\r\n\r\n标签文件pplcnet.label内容：\r\n`0 0\r\n1 90\r\n2 180\r\n3 270\r\n`\r\n\r\n配置文件config.yum内容，仅修改了serving模型目录：\r\n`worker_num: 1\r\n\r\n#http端口, rpc_port和http_port不允许同时为空。当rpc_port可用且http_port为空时，不自动生成http_port\r\nhttp_port: 18080\r\nrpc_port: 9993\r\n\r\ndag:\r\n    #op资源类型, True, 为线程模型；False，为进程模型\r\n    is_thread_op: False\r\nop:\r\n    imagenet:\r\n        #并发数，is_thread_op=True时，为线程并发；否则为进程并发\r\n        concurrency: 1\r\n\r\n        #当op配置没有server_endpoints时，从local_service_conf读取本地服务配置\r\n        local_service_conf:\r\n\r\n            #uci模型路径\r\n            model_config: Direction_cls_serving\r\n\r\n            #计算硬件类型: 空缺时由devices决定(CPU/GPU)，0=cpu, 1=gpu, 2=tensorRT, 3=arm cpu, 4=kunlun xpu\r\n            device_type: 1\r\n\r\n            #计算硬件ID，当devices为\"\"或不写时为CPU预测；当devices为\"0\", \"0,1,2\"时为GPU预测，表示使用的GPU卡\r\n            devices: \"0\" # \"0,1\"\r\n\r\n            #client类型，包括brpc, grpc和local_predictor.local_predictor不启动Serving服务，进程内预测\r\n            client_type: local_predictor\r\n\r\n            #Fetch结果列表，以client_config中fetch_var的alias_name为准\r\n            fetch_list: [\"prediction\"]\r\n`\r\n\r\n预测命令：python3.7 pipeline_http_client.py\r\n报错信息为：{'err_no': 5, 'err_msg': '(log_id=0) imagenet failed to predict.', 'key': [], 'value': [], 'tensors': []}\r\n\r\n请大牛们指教",
        "state": "open",
        "user": "MarkHe735",
        "closed_by": null,
        "created_at": "2023-06-19T08:39:12+00:00",
        "updated_at": "2024-08-27T02:32:47+00:00",
        "closed_at": null,
        "comments_count": [
            "Summmerlpc"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2836,
        "title": "PP-ShiTu android demo，同一幅图片上有多个待检测目标，怎么才能一起识别出来？",
        "body": "release/2.5 分支下 [deploy/shitu_android_demo](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.5/deploy/shitu_android_demo)，PP-ShiTu android demo里，同一幅图片上有多个待检测物体时，目前只能识别出一个，怎么样才能多个目标一起识别出来？\r\n",
        "state": "closed",
        "user": "jaunce",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-06-16T11:51:55+00:00",
        "updated_at": "2025-03-04T09:20:10+00:00",
        "closed_at": "2025-03-04T06:36:18+00:00",
        "comments_count": [
            "dlaoy",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2849,
        "title": "如何将PaddleClas与PaddleDetection结合起来，实现行人属性识别",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "nuonuo0426",
        "closed_by": null,
        "created_at": "2023-07-03T07:25:48+00:00",
        "updated_at": "2024-02-26T04:26:54+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2848,
        "title": "quick_start/ResNet50_vd.yaml 是否可以只填 train_list ， 让它帮我自动分层划分 val_list  , 因为我分类比较多，不方便手动划分 val_list  ",
        "body": "quick_start/ResNet50_vd.yaml 是否可以只填 train_list ， 让它帮我自动分层划分 val_list  , 因为我分类比较多，不方便手动划分 val_list  ",
        "state": "closed",
        "user": "alexhmyang",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-06-30T13:20:18+00:00",
        "updated_at": "2025-03-04T09:20:12+00:00",
        "closed_at": "2025-03-04T06:36:19+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2850,
        "title": "按照PaddleClas/deploy/paddleserving/recognition下的Readme部署C++Serving，部署后请求失败(inference call failed, message: [E112]1/1 channels failed, fail_limit=1 [C0][E1014]Got EOF of Socket...) ",
        "body": "环境：ubuntu20.04；python3.8；paddlepaddle==2.3.2；PaddleClas2.5；cmake：3.16.3；gcc：9.4.0\r\n使用CPU，与原build_server.sh相比，删除了CUDA相关命令，并对一些命令做出调整\r\ncmake命令如下，\r\n![cmake命令](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/316fa3f0-6254-4501-905e-1dd241b9228d)\r\n执行后的输出，\r\n![cmake_1](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/4afc0264-12b0-4a8a-9c95-12bd5b304614)\r\n![cmake_2](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/79565ff9-a7f4-4896-b882-526809e2cbc3)\r\n![cmake_3](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/c5ce9f4a-e71f-4dfe-b709-55518a8c2fc5)\r\n![cmake_4](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/5f3895db-04d6-4219-b02d-5c349e9a30a8)\r\n![cmake_5](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/c559db1e-4b69-419a-b52a-b4c79e85bdbe)\r\n存在几处Failed和not found，忽略。\r\nmake后的部分输出，\r\n![make_1](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/4a720e1d-b557-4aec-a14f-d06b64e5e898)\r\n![make_2](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/f1fee6df-710e-45be-ad14-495b07f3cb76)\r\n![make_3](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/7d1a6cfe-e53d-4532-86bf-0d45f6518770)\r\n![make_4](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/e6ff533c-6448-42f7-b64c-52ea6289e301)\r\n![make_5](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/001bbabc-396f-4929-8ff2-b66050197efe)\r\n![make_6](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/0272062a-73a2-4a99-9546-ebfde40959b6)\r\n开启服务后，生成的logPPShiTu.txt如下，\r\n![log_PPShiTu](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/fc1a87f4-d900-462b-bf10-2abba62dd337)\r\n执行test_cpp_serving_client.py发送识别请求后，\r\nlogPPShiTu.txt如下，\r\n![log_PPShiTu_发送请求后](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/46691984-d051-4182-8233-c4f77c54b3e6)\r\n终端显示如下，\r\n![发送请求后的终端_1](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/b8f4abad-0473-41d2-b972-73e4065bc69c)\r\n![发送请求后的终端_2](https://github.com/PaddlePaddle/PaddleClas/assets/101171150/baef603e-1b25-43cd-9157-558540d23ff2)\r\n报错如下：inference call failed, message: [E112]1/1 channels failed, fail_limit=1 [C0][E1014]Got EOF of Socket{id=1 fd=4 addr=127.0.0.1:9400:45838} (0x0x561c4ca330b0) [R1][E111]Fail to connect Socket{id=8589934594 addr=127.0.0.1:9400} (0x0x561c4ca332b0): Connection refused [R2][E112]Fail to select server from list://127.0.0.1:9400 lb=la\r\nE0703 21:52:48.302803 79137 general_model.cpp:370] failed call predictor with req: tensor\r\n请问是cmake或make部分出现错误导致识别失败，还是什么原因导致？",
        "state": "open",
        "user": "yguofirst",
        "closed_by": null,
        "created_at": "2023-07-04T06:29:37+00:00",
        "updated_at": "2024-02-26T04:26:53+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2855,
        "title": "版本信息如下：",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "leigao-dev",
        "closed_by": "leigao-dev",
        "created_at": "2023-07-05T01:19:34+00:00",
        "updated_at": "2023-07-05T01:29:09+00:00",
        "closed_at": "2023-07-05T01:29:06+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2856,
        "title": "版本信息如下： ",
        "body": "版本信息如下： \r\n[2023/07/05 09:02:03] ppcls INFO: train with paddle 2.4.0 and device Place(gpu:0)\r\nW0705 09:02:03.294425   771 gpu_resources.cc:61] Please NOTE: device: 0, GPU Compute Capability: 7.0, Driver API Version: 11.2, Runtime API Version: 11.2\r\nW0705 09:02:03.299454   771 gpu_resources.cc:91] device: 0, cuDNN Version: 8.2.\r\n报错如下 ：Exception occured when parse line: /home/aistudio/work/cat_12_train/yGcJHV8Uuft6grFs7QWnK5CTAZvYzdDO.jpg with msg: 'NoneType' object has no attribute 'shape'",
        "state": "open",
        "user": "leigao-dev",
        "closed_by": null,
        "created_at": "2023-07-05T01:19:35+00:00",
        "updated_at": "2024-02-26T04:26:51+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2863,
        "title": "机器有多个显卡，如何指定python 推理的gpu id",
        "body": "如何指定gpu id，测试过参数gpu_id='2'或者gpu_id=2 都不生效，始终使用第id等于0的显卡。\r\npython推理代码如下：\r\nimport paddleclas\r\nmodel = paddleclas.PaddleClas(model_name=\"text_image_orientation\")\r\nresult = model.predict(input_data=\"pulc_demo_imgs/text_image_orientation/img_rot0_demo.jpg\")\r\nprint(next(result))\r\n帮助解答要实现设置gpu id如何正确设置参数。谢谢。",
        "state": "closed",
        "user": "dtiny",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-11T03:11:52+00:00",
        "updated_at": "2025-03-04T09:20:13+00:00",
        "closed_at": "2025-03-04T06:36:20+00:00",
        "comments_count": [
            "KimBioInfoStudio",
            "KimBioInfoStudio",
            "YanhuiDua",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2866,
        "title": "配置文件图像宽高问题",
        "body": "**问题是在配置配置文件图像宽高调整（image_shape: [3, 350, 550]或image_shape: [3 550, 350,]）不影响训练结果为什么？**\r\n\r\n-  配置文件如下\r\n\r\n`# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 120\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  #used for static mode and model export\r\n  image_shape: [3, 350, 550]\r\n  save_inference_dir: ./inference\r\n  #training model under @to_static\r\n  to_static: False\r\n\r\n#model architecture\r\nArch:\r\n  name: ResNet50\r\n  class_num: 2\r\n\r\n#data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /data/bapps/dd/\r\n      cls_label_path: /data/bapps/dd/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /data/bapps/dd/\r\n      cls_label_path: /data/bapps/dd/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 350\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n`\r\n\r\n\r\n\r\n\r\n 1. PaddleClas版本以及PaddlePaddle版本：Paddle2.4.2，PaddleClas2.4\r\n 2. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，Python 3.9.16 \r\n  c. CUDA/cuDNN版本， CUDA10.2/cuDNN 7.6.5等\r\n\r\n",
        "state": "open",
        "user": "abanger",
        "closed_by": null,
        "created_at": "2023-07-11T07:55:22+00:00",
        "updated_at": "2024-02-26T04:26:48+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "abanger"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2868,
        "title": "我想做一个重复视频检测，有没有什么现成的模型？",
        "body": "from https://github.com/PaddlePaddle/Paddle/issues/55106\r\n\r\n具体的需求，希望能找出用户上传的视频是不是已经存在了，或者是不是由其他视频拼接、加工产生的。我初步的想法是将视频转换成一秒一张的图片序列，然后将图片用resnet、PP-LCNetv2这些模型提取特征，然后计算两个视频图片的相似度。但是在不训练的情况下，提取出来的特征区分度不高（预训练的1000维），难以判断哪些内容是重复的。自行标注训练成本又大\r\n有没有什么专门处理这种情况的模型，或者其他一些思路？",
        "state": "open",
        "user": "TingquanGao",
        "closed_by": null,
        "created_at": "2023-07-11T11:05:16+00:00",
        "updated_at": "2024-02-26T04:26:47+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2860,
        "title": "长期训练host端内存耗尽",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/11333c8e-6bb5-496d-8bb4-b14c8cde1407)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/487df25a-4c50-416b-911d-8cb6c0c69723)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/93aa0fad-1772-45e3-be20-6a47911cb6e0)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/ac9b246a-27eb-4d64-b8d1-13cce12d1535)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/6ea83af4-0df1-4753-8351-e7fe7ac97f2e)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/32234672/dd8aa7c0-79bf-422c-92c7-357e87c5177f)\r\n\r\n现象：\r\n长期训练resnet-50，每个epoch的eval以及训练都会分配内存，并且没有释放？导致最后内存满了？\r\n是有内存泄露吗？还是什么\r\n",
        "state": "open",
        "user": "zhurou603",
        "closed_by": null,
        "created_at": "2023-07-07T07:21:18+00:00",
        "updated_at": "2024-11-08T03:01:43+00:00",
        "closed_at": null,
        "comments_count": [
            "zhurou603",
            "KimBioInfoStudio",
            "zhurou603",
            "zhurou603",
            "zhurou603",
            "KimBioInfoStudio",
            "zhurou603",
            "TingquanGao",
            "zhurou603",
            "zhurou603",
            "zhurou603",
            "kamiLight",
            "zhurou603",
            "TingquanGao",
            "zhurou603",
            "zhurou603",
            "zhurou603",
            "zhurou603",
            "188080501"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2869,
        "title": "使用pphgnet-base多卡训练时卡住，占用资源但并不开始训练",
        "body": "1. paddleclas2.32\r\n2. 未使用其他产品\r\n3. 训练环境：\r\n  操作系统：linux\r\n  Python3.7\r\n  cuda10.2\r\n4. 任意结构使用这个pphgnet训练时，训练完全卡住，log中未打印报错信息，占用资源但并不进行训练，预训练权重url用在线的会无法download，用本地的绝对路径权重时会卡住Arch:\r\nname: PPHGNet_base_Human\r\npretrained: \"PPHGNet_base_ssld_pretrained\"\r\nuse_ssld: False\r\n\r\n任意结构使用这个pphgnet训练时，训练完全卡住，log中未打印报错信息，占用资源但并不进行训练，预训练权重url用在线的会无法download，用本地的绝对路径权重时会卡住\r\n没有error信息，只是卡在这里\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/62364611/ff608595-57cb-4dd4-86ae-6f2a3ba64f03)\r\n",
        "state": "closed",
        "user": "ariessweety07",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-12T10:47:22+00:00",
        "updated_at": "2025-03-04T09:20:15+00:00",
        "closed_at": "2025-03-04T06:36:21+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2870,
        "title": "如何自定义自己的dataloader？",
        "body": "1：能否提供自定义的dataloader官方教程或者示例文档？\r\n2：dataset中name除了ImageNetDataset，还有哪些？能否提供一下示例指引？\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/12853603/52994e1a-808d-44be-95c4-549c971e8873)\r\n",
        "state": "closed",
        "user": "0-LL-0",
        "closed_by": "0-LL-0",
        "created_at": "2023-07-12T12:12:37+00:00",
        "updated_at": "2023-07-25T10:37:14+00:00",
        "closed_at": "2023-07-25T10:37:07+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2872,
        "title": "模型预测单张图片速度慢",
        "body": "import paddleclas\r\nmodel = paddleclas.PaddleClas(inference_model_dir=\"./infer_dir/\")\r\nresult = model.predict(input_data=\"./crop_img/616_crop_1.jpg\")\r\nresult = next(result)\r\n\r\n使用以上代码对单张图片的类别进行预测，耗时约为1.3s。输入图片大小对于预测时间几乎没有影响。\r\n调试时发现self.predictor.run()这一句耗时过长，有可以改进加速的地方吗？",
        "state": "closed",
        "user": "H-eaven-1",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-13T06:22:14+00:00",
        "updated_at": "2025-03-04T09:20:19+00:00",
        "closed_at": "2025-03-04T06:36:23+00:00",
        "comments_count": [
            "abanger",
            "H-eaven-1",
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2871,
        "title": "在模型蒸馏时算损失的时候nan",
        "body": "问题：损失一直是负数最后nan。\r\n\r\n解决方法：CEloss里边有soft_label = True这个变量可以控制，但不知道什么原因导致算出的损失有问题，只要在外边把teacher model的输出从[b,n_cls]转到[b,1]和gt一样的格式就可以了。\r\n\r\n疑问：这个是paddle的bug吗？我的是paddlepaddle-gpu       2.3.2 如果是版本导致的原因，请在requirements.txt添加一下吧，否则要用蒸馏的都会遇到这个问题，readme中的示例跑出来损失也都是负数。",
        "state": "closed",
        "user": "TD-wzw",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-13T01:20:29+00:00",
        "updated_at": "2025-03-04T09:20:17+00:00",
        "closed_at": "2025-03-04T06:36:22+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2876,
        "title": "windows 下 不同batch size的topk评测结果不一致",
        "body": "在windows 下不同的batch size 的topk acc 不一致，定位到代码里面对于windows 系统在最后一次迭代的时候会跳出，去掉这个判断后结果就是一致的，不明白为什么 windows 系统无法推理最后一个epoch？\r\nPaddlePaddle/PaddleClas/tree/develop/ppcls/engine/evaluation/classification.py：  line 42 \r\n```\r\n    total_samples = len(\r\n        engine.eval_dataloader.\r\n        dataset) if not engine.use_dali else engine.eval_dataloader.size\r\n    max_iter = len(engine.eval_dataloader) - 1 if platform.system(\r\n    ) == \"Windows\" else len(engine.eval_dataloader)\r\n```",
        "state": "open",
        "user": "taroshi",
        "closed_by": null,
        "created_at": "2023-07-16T13:58:01+00:00",
        "updated_at": "2024-02-26T04:26:41+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2874,
        "title": "paddle2.5.0 pip安装paddleclas报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.10\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\nBuilding wheels for collected packages: faiss-cpu\r\n  Building wheel for faiss-cpu (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  × python setup.py bdist_wheel did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [18 lines of output]\r\n      /opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/setuptools/__init__.py:84: _DeprecatedInstaller: setuptools.installer and fetch_build_eggs are deprecated.\r\n      !!\r\n      \r\n              ********************************************************************************\r\n              Requirements should be satisfied by a PEP 517 installer.\r\n              If you are using pip, you can try `pip install --use-pep517`.\r\n              ********************************************************************************\r\n      \r\n      !!\r\n        dist.fetch_build_eggs(dist.setup_requires)\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss/faiss/python/swigfaiss.i to faiss/faiss/python/swigfaiss_wrap.cpp\r\n      swig -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWORDSIZE64 -o faiss/faiss/python/swigfaiss_wrap.cpp faiss/faiss/python/swigfaiss.i\r\n      error: command 'swig' failed: No such file or directory\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\n  Running setup.py clean for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects",
        "state": "closed",
        "user": "a-strong-python",
        "closed_by": "TingquanGao",
        "created_at": "2023-07-13T09:50:44+00:00",
        "updated_at": "2023-07-14T04:00:31+00:00",
        "closed_at": "2023-07-14T04:00:28+00:00",
        "comments_count": [
            "TingquanGao",
            "a-strong-python",
            "TingquanGao",
            "a-strong-python",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2875,
        "title": "模型训练结束后进行模型导出，利用导出后模型进行inference不同图片结果均相同",
        "body": null,
        "state": "closed",
        "user": "wanggoudanscd",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-14T04:21:18+00:00",
        "updated_at": "2025-03-04T09:20:20+00:00",
        "closed_at": "2025-03-04T06:36:24+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2877,
        "title": "AI studio 中 python3.10 安装 paddleclas 失败",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nBuilding wheels for collected packages: faiss-cpu\r\n  Building wheel for faiss-cpu (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  × python setup.py bdist_wheel did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [18 lines of output]\r\n      /opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/setuptools/__init__.py:84: _DeprecatedInstaller: setuptools.installer and fetch_build_eggs are deprecated.\r\n      !!\r\n      \r\n              ********************************************************************************\r\n              Requirements should be satisfied by a PEP 517 installer.\r\n              If you are using pip, you can try `pip install --use-pep517`.\r\n              ********************************************************************************\r\n      \r\n      !!\r\n        dist.fetch_build_eggs(dist.setup_requires)\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss/faiss/python/swigfaiss.i to faiss/faiss/python/swigfaiss_wrap.cpp\r\n      swig -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWORDSIZE64 -o faiss/faiss/python/swigfaiss_wrap.cpp faiss/faiss/python/swigfaiss.i\r\n      error: command 'swig' failed: No such file or directory\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\n  Running setup.py clean for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects\r\n",
        "state": "closed",
        "user": "a-strong-python",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-18T12:06:20+00:00",
        "updated_at": "2025-03-04T09:20:23+00:00",
        "closed_at": "2025-03-04T06:36:25+00:00",
        "comments_count": [
            "a-strong-python",
            "a-strong-python",
            "a-strong-python",
            "a-strong-python",
            "TingquanGao",
            "TingquanGao",
            "se7enXF",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2879,
        "title": "加载训练好的推理模型，结果中label_names乱码",
        "body": "model = paddleclas.PaddleClas(inference_model_dir=\"/home/aistudio/PaddleClas/deploy/models/PPLCNet_x1_0_text_image_orientation_infer/\", topk=2)\r\nresult = model.predict(input_data=\"images/图片旋转问题.png\")\r\nprint(next(result))\r\n\r\n\r\n打印结果：\r\n[{'class_ids': [2, 3], 'scores': [0.95938, 0.01851], 'label_names': ['great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias', 'tiger shark, Galeocerdo cuvieri'], 'filename': 'images/图片旋转问题.png'}]\r\n",
        "state": "closed",
        "user": "wuxiuxiunlp",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-20T08:48:32+00:00",
        "updated_at": "2025-03-04T09:20:25+00:00",
        "closed_at": "2025-03-04T06:36:26+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2883,
        "title": "paddleclas2.4.0及之后的版本封装🉐好厉害,最近能出个源码解析的教程吗?",
        "body": "我在AI Studio上查到的源码解析教程是2020年12月的,当时的版本是2.0.2.\r\nPaddleClas 分类套件源码解析（一）:   https://aistudio.baidu.com/aistudio/projectdetail/1308952?channelType=0&channel=0\r\nPaddleClas 分类套件源码解析（二）:   https://aistudio.baidu.com/aistudio/projectdetail/1315501?channelType=0&channel=0\r\nPaddleClas 分类套件源码解析（三）:   https://aistudio.baidu.com/aistudio/projectdetail/1339544?channelType=0&channel=0",
        "state": "open",
        "user": "a-strong-python",
        "closed_by": null,
        "created_at": "2023-07-24T08:09:32+00:00",
        "updated_at": "2024-02-26T04:26:36+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2890,
        "title": "paddlehub serving 装不起来，ubuntu环境运行hub install hubserving/clas/ 各种报错，不同版本的paddlehub 均试过",
        "body": "paddlehub serving 装不起来，ubuntu环境运行hub install hubserving/clas/ 各种报错，不同版本的paddlehub 均试过都报错\r\n\r\n网上没找到任何一个 能用的教程\r\n\r\n    Found existing installation: paddlehub 2.0.0\r\n    Uninstalling paddlehub-2.0.0:\r\n      Successfully uninstalled paddlehub-2.0.0\r\nSuccessfully installed paddlehub-2.0.0rc0\r\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\r\n(ocr) root@ecs-3b45:/data/PaddleClas/deploy# hub install hubserving/clas/\r\n/data/miniconda/envs/ocr/lib/python3.7/site-packages/paddle/fluid/layers/utils.py:26: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\nDeprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n  def convert_to_list(value, n, name, dtype=np.int):\r\nTraceback (most recent call last):\r\n  File \"/data/miniconda/envs/ocr/bin/hub\", line 5, in <module>\r\n    from paddlehub.commands.utils import execute\r\n  File \"/data/miniconda/envs/ocr/lib/python3.7/site-packages/paddlehub/commands/__init__.py\", line 24, in <module>\r\n    import paddlehub.commands.install\r\n  File \"/data/miniconda/envs/ocr/lib/python3.7/site-packages/paddlehub/commands/install.py\", line 21, in <module>\r\n    from paddlehub.module.manager import LocalModuleManager\r\n  File \"/data/miniconda/envs/ocr/lib/python3.7/site-packages/paddlehub/module/manager.py\", line 28, in <module>\r\n    from paddlehub.utils import xarfile, log, utils, pypi\r\n  File \"/data/miniconda/envs/ocr/lib/python3.7/site-packages/paddlehub/utils/pypi.py\", line 18, in <module>\r\n    from pip._internal.utils.misc import get_installed_distributions\r\nImportError: cannot import name 'get_installed_distributions' from 'pip._internal.utils.misc' (/data/miniconda/envs/ocr/lib/python3.7/site-packages/pip/_internal/utils/misc.py)\r\n",
        "state": "open",
        "user": "alexhmyang",
        "closed_by": null,
        "created_at": "2023-07-28T07:45:05+00:00",
        "updated_at": "2024-02-26T04:26:34+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2882,
        "title": "AIStudio 上 paddleclas 2.5.0 读取8位深的jpg或png图片报错（(训练脚本，评估及推理脚本都存在这个问题)",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nException occured when parse line: ./dataset/training_set/RuddyShelduck/ML220226881.jpg with msg: 'NoneType' object has no attribute 'shape'\r\n",
        "state": "closed",
        "user": "a-strong-python",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-24T05:56:36+00:00",
        "updated_at": "2025-03-04T09:20:28+00:00",
        "closed_at": "2025-03-04T06:36:27+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2881,
        "title": "警告:Warning:Tensor.numpy()[0]' to 'float(Tensor)' 在哪里改呢应该？",
        "body": "环境如下：\r\n 1. PaddleClas release/2.5 paddlepaddle2.5.0\r\n 3. 训练环境信息：\r\n  a. 操作系统 Windows11\r\n  b. Python版本号=Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA11.6\r\n具体报警如下：I0723 10:43:00.096150 18988 eager_method.cc:140] Warning:: 0D Tensor cannot be used as 'Tensor.numpy()[0]' . In order to avoid this problem, 0D Tensor will be changed to 1D numpy currently, but it's not correct and will be removed in release 2.6. For Tensor contain only one element, Please modify 'Tensor.numpy()[0]' to 'float(Tensor)' as soon as possible, otherwise 'Tensor.numpy()[0]' will raise error in release 2.6.\r\n应该是需要改为float(Tensor)就可以了，但是并不知道在哪里修改？\r\n",
        "state": "closed",
        "user": "Zhw1997",
        "closed_by": "Zhw1997",
        "created_at": "2023-07-23T02:55:15+00:00",
        "updated_at": "2023-12-20T09:50:24+00:00",
        "closed_at": "2023-08-03T07:10:04+00:00",
        "comments_count": [
            "TingquanGao",
            "Zhw1997",
            "awarebayes",
            "ShawnNew",
            "Zhw1997",
            "hzauliutingting",
            "Atopos111"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2887,
        "title": "REID Center Loss Learning Rate",
        "body": " In file `ppcls/configs/reid/strong_baseline/softmax_triplet_with_center.yaml`\r\n ```yml\r\nOptimizer:\r\n  - Adam:\r\n      scope: RecModel\r\n      lr:\r\n        name: Piecewise\r\n        decay_epochs: [30, 60]\r\n        values: [0.00035, 0.000035, 0.0000035]\r\n        warmup_epoch: 10\r\n        warmup_start_lr: 0.0000035\r\n        by_epoch: True\r\n        last_epoch: 0\r\n      regularizer:\r\n        name: \"L2\"\r\n        coeff: 0.0005\r\n  - SGD:\r\n      scope: CenterLoss\r\n      lr:\r\n        name: Constant\r\n        learning_rate: 1000 # NOTE: set to ori_lr*(1/centerloss_weight) to avoid manually scaling centers' gradidents.\r\n```\r\nNumber 1000 seems to big to be used as a learning rate for sgd. I think it needs to be changed.\r\nIt is not clear what ori_lr refers to... Is it 0.0000035 in adam?",
        "state": "closed",
        "user": "awarebayes",
        "closed_by": "awarebayes",
        "created_at": "2023-07-25T14:19:23+00:00",
        "updated_at": "2023-08-10T11:52:36+00:00",
        "closed_at": "2023-08-10T11:52:32+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "awarebayes"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2888,
        "title": "如何在配置文件中为多个输出分别指定loss？",
        "body": "\r\n情景：\r\n我有一个网络，是两个输出a和b，如何在config文件中分别对a，b指定不同的loss？\r\n能否给个示例？",
        "state": "closed",
        "user": "0-LL-0",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-07-26T01:46:33+00:00",
        "updated_at": "2025-03-04T09:20:30+00:00",
        "closed_at": "2025-03-04T06:36:28+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2896,
        "title": "多标签分类任务ML-Decoder论文复现",
        "body": "# 背景\r\n\r\n经过前沿技术调研与讨论，我们最终确定了ML-Decoder任务，该论文提出的可扩展通用分类头在多标签分类、zero-sho以及单标签分类任务上表现出很好的效果。本任务的完成可以扩充PaddleClas多标签分类相关视觉任务，并有众多应用场景。\r\n作者团队基于不同数据集验证不同任务的性能，充分证明ML-Decoder分类头的性能以及泛用性。\r\n现已有开源代码并提供了预训练权重，该论文需复现出resnet101的多标签分类部分，训练指标对齐。\r\n\r\n# 解决步骤\r\n\r\n1. 根据开源代码进行网络结构、评估指标转换。代码链接：https://github.com/Alibaba-MIIL/ML_Decoder\r\n2. 结合[论文复现指南](https://github.com/PaddlePaddle/models/blob/release%2F2.2/tutorials/article-implementation/ArticleReproduction_CV.md)，对多标签分类部分进行前反向对齐等操作，并复现多标签分类指标，ResNet101训练精度达到论文Table.5中的mAP为87.1%，多标签分类训练方式可参考[文档](https://github.com/PaddlePaddle/PaddleClas/blob/e877e6a9414a5b4dbcd3e49006a9804220253edd/docs/zh_CN/quick_start/quick_start_multilabel_classification.md)。\r\n<img width=\"421\" alt=\"图片\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/94225063/4ac8d59a-b028-487c-92f8-5a7f4d7d1ea5\">\r\n\r\n3. 参考[PR提交规范](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/community/how_to_contribute.md)提交代码PR到PaddleClas中。\r\n\r\n数据集：[MS-COCO](https://datagen.tech/guides/image-datasets/ms-coco-dataset-using-it-in-your-computer-vision-projects/)\r\n\r\n<img width=\"404\" alt=\"图片\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/94225063/d7ebc95f-b22c-46d4-ade7-69476d101133\">\r\n",
        "state": "open",
        "user": "zhangyubo0722",
        "closed_by": null,
        "created_at": "2023-08-03T09:37:21+00:00",
        "updated_at": "2024-02-26T04:26:32+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2895,
        "title": "paddleclas中的EfficientNetB0_small模型无法执行",
        "body": "paddleclas版本为2.5.1，paddle版本为2.4.0的情况下，EfficientNetB0_small模型的源码的第342行调用了paddle.nn的Conv2D,但是传递的参数不符合要求，Conv2D显示没有act参数。请问这是paddle的版本问题导致的吗？\r\n<img width=\"663\" alt=\"2023-08-02_234203\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/49232003/ed37aa28-2401-465a-b64b-67a19328ab42\">\r\n\r\n",
        "state": "closed",
        "user": "Laurazlj",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-02T15:45:42+00:00",
        "updated_at": "2025-03-04T09:20:31+00:00",
        "closed_at": "2025-03-04T06:36:28+00:00",
        "comments_count": [
            "Laurazlj",
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2897,
        "title": "人体视觉任务SOLIDER论文复现",
        "body": "# 背景\r\n经过前沿技术调研与讨论，我们最终确定了SOLIDER论文复现任务。该论文利用自监督训练方式，充分利用现有大量人体无标注数据，得到一个可以通用于下游各种人体视觉任务的预训练大模型，本任务的完成可以支持PaddleClas各种人体视觉任务。\r\n现已有开源代码，该论文只需前向对齐即可，即输入相同图片，输出结果差距在1e-6以内。\r\n\r\n# 解决步骤\r\n\r\n1. 根据开源代码进行网络结构转换，代码链接：https://github.com/tinyvision/SOLIDER  。\r\n2. 参考[论文复现指南](https://github.com/PaddlePaddle/models/blob/release%2F2.2/tutorials/article-implementation/ArticleReproduction_CV.md)，本任务只需要对齐前向，无需训练，即使用[demo.py](https://github.com/tinyvision/SOLIDER/blob/main/demo.py)来前向对齐，需对齐的模型包括swin_tiny_patch4_window7_224、swin_small_patch4_window7_224以及swin_base_patch4_window7_224，因PaddleClas已有这些模型，只需在现有模型进行修改，无需创建新的模型代码。\r\n3. 参考[PR提交规范](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/community/how_to_contribute.md)提交代码PR到PaddleClas中。\r\n\r\n## 验收标准：\r\n1. 增加介绍文档PaddleClas/docs/zh_CN/models/sodier.md\r\n2. 对swin系列backbone进行必要的修改\r\n3. 发送转化swin系列（swin_tiny_patch4_window7_224、swin_small_patch4_window7_224以及swin_base_patch4_window7_224）的权重和对齐日志。",
        "state": "open",
        "user": "zhangyubo0722",
        "closed_by": null,
        "created_at": "2023-08-03T10:02:42+00:00",
        "updated_at": "2024-02-26T04:26:30+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2900,
        "title": "推理报错",
        "body": "![image](https://github.com/PaddlePaddle/PaddleClas/assets/49420977/70ea56cc-673e-45ec-adac-f95a8d472095)\r\nubuntu 18.04版本 物理机 ",
        "state": "closed",
        "user": "umie0128",
        "closed_by": "umie0128",
        "created_at": "2023-08-07T02:23:01+00:00",
        "updated_at": "2023-08-14T06:40:15+00:00",
        "closed_at": "2023-08-14T06:40:12+00:00",
        "comments_count": [
            "umie0128",
            "TingquanGao",
            "umie0128",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2903,
        "title": "paddlecls推理时报错",
        "body": "from .ppcls.arch import backbone\r\n\r\nImportError: attempted relative import with no known parent package\r\n\r\n\r\n",
        "state": "closed",
        "user": "Quentin-Song",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-09T03:39:13+00:00",
        "updated_at": "2025-03-04T09:20:33+00:00",
        "closed_at": "2025-03-04T06:36:29+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2904,
        "title": "我在使用PULC含文字图像方向分类模型,PPLCNet_x1_0",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：paddle2.5.1\r\n  a. 具体操作系统，如Linux/Windows/MacOS:Linux\r\n  b. Python版本号，如Python3.6/7/8:python3.9\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等,cuda11.6\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n按照训练代码，运行满屏报警告\r\nI0810 09:46:41.147565 3689318 eager_method.cc:140] Warning:: 0D Tensor cannot be used as 'Tensor.numpy()[0]' . In order to avoid this problem, 0D Tensor will be changed to 1D numpy currently, but it's not correct and will be removed in release 2.6. For Tensor contain only one element, Please modify  'Tensor.numpy()[0]' to 'float(Tensor)' as soon as possible, otherwise 'Tensor.numpy()[0]' will raise error in release 2.6.\r\n",
        "state": "closed",
        "user": "God-song",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-10T02:09:42+00:00",
        "updated_at": "2025-03-04T09:20:35+00:00",
        "closed_at": "2025-03-04T06:36:30+00:00",
        "comments_count": [
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2909,
        "title": "如何使用一个模型，分类多个任务呢，我目前使用PPLCNet_x1_0，分类四个方向，我除了想要分开四个方向，我还想分类，是类型的图片，我想要有两个输出头，第一个输出口输出4，代表4个方向，第二个输出口位图片类型，例如10中类型，我该怎么做呢",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n如何使用一个模型，分类多个任务呢，我目前使用PPLCNet_x1_0，分类四个方向，我除了想要分开四个方向，我还想分类，是类型的图片，我想要有两个输出头，第一个输出口输出4，代表4个方向，第二个输出口位图片类型，例如10中类型，我该怎么做呢",
        "state": "closed",
        "user": "God-song",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-15T09:45:49+00:00",
        "updated_at": "2025-03-04T09:20:39+00:00",
        "closed_at": "2025-03-04T06:36:32+00:00",
        "comments_count": [
            "God-song",
            "TingquanGao",
            "God-song",
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2906,
        "title": "关于 cv2.matchTemplate",
        "body": "`cv2.matchTemplate`的`图找图`，非常low\r\n`paddle` 有对应的强化版本嘛，\r\n感觉所以的要素都齐了，却没找到paddle有相应的demo",
        "state": "closed",
        "user": "wolanx",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-10T09:30:21+00:00",
        "updated_at": "2025-03-04T09:20:37+00:00",
        "closed_at": "2025-03-04T06:36:31+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2910,
        "title": "text_image_orientation.tar gets deleted",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：paddleclas==2.5.1  , paddlepaddle-gpu==2.4.2.post116\r\n 2. 涉及的其他产品使用的版本号：Not applicable. Only imported paddleclas\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，On Windows 10 but not training.\r\n  b. Python版本号，python 3.9\r\n  c. CUDA/cuDNN版本，CUDA 11.6\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nI tried to load the text_image_orientation model but got the SSL Error so I downloaded the .tar file and placed it in the directory stated by the log. When I rerun the code it deletes the tar file from the directory and gives the same error. Please assist me with this.\r\n\r\nCode:\r\n```\r\nimport paddleclas\r\nmodel = paddleclas.PaddleClas(model_name=\"text_image_orientation\")\r\n```\r\nLog:\r\n[2023/08/16 16:07:08] ppcls INFO: download https://paddleclas.bj.bcebos.com/models/PULC/inference/text_image_orientation_infer.tar to [C:\\Users\\xxx/.paddleclas/inference_model\\PULC\\text_image_orientation\\text_image_orientation_infer.tar](file:///C:/Users/xxx/.paddleclas/inference_model/PULC/text_image_orientation/text_image_orientation_infer.tar)\r\n\r\nError:\r\nSSLError: HTTPSConnectionPool(host='paddleclas.bj.bcebos.com', port=443): Max retries exceeded with url: /models/PULC/inference/text_image_orientation_infer.tar (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1129)')))\r\n\r\n",
        "state": "closed",
        "user": "glitchyordis",
        "closed_by": "glitchyordis",
        "created_at": "2023-08-16T08:19:05+00:00",
        "updated_at": "2023-08-16T12:05:29+00:00",
        "closed_at": "2023-08-16T12:05:14+00:00",
        "comments_count": [
            "glitchyordis"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2913,
        "title": "Specify GPU memory for paddleclas.PaddleClas",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\nPaddleClas版本以及PaddlePaddle版本：paddleclas==2.5.1 , paddlepaddle-gpu==2.4.2.post116\r\n涉及的其他产品使用的版本号：Not applicable. Only imported paddleclas\r\n训练环境信息：\r\na. 具体操作系统，On Windows 10 but not training. 4GB GPU\r\nb. Python版本号，python 3.9\r\nc. CUDA/cuDNN版本，CUDA 11.6\r\n完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nIs there a way to specify gpu_mem like CLI when using `model = paddleclas.PaddleClas(model_name=\"text_image_orientation\")`?",
        "state": "closed",
        "user": "glitchyordis",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-16T13:45:31+00:00",
        "updated_at": "2025-03-04T09:20:40+00:00",
        "closed_at": "2025-03-04T06:36:32+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2914,
        "title": "multi-card（intel-gpu） training 只有workerlog.0有数据，其他workerlog就几行log",
        "body": "1. PaddleClas版本是develop\r\n2. 训练环境：\r\n    a. linux22.04\r\n    b.python3.10\r\n    c.intel-gpu\r\n\r\nworkerlog.0 log :\r\n[2023/08/16 19:54:43] ppcls INFO: profiler_options : None\r\n[2023/08/16 19:54:43] ppcls INFO: train with paddle 0.0.0 and device Place(intel_gpu:0)\r\n[2023/08/16 19:54:45] ppcls WARNING: \"init_res\" will be deprecated, please use \"init_net\" instead.\r\n[2023/08/16 19:54:45] ppcls WARNING: When using warm up, the value of \"Global.epochs\" must be greater than value of \"Optimizer.lr.warmup_epoch\". The value of \"Optimizer.lr.warmup_epoch\" has been set to 5.\r\n[2023/08/16 19:54:45] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 2 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nI0816 19:54:45.905280 1947284 tcp_utils.cc:181] The server starts to listen on IP_ANY:41848\r\nI0816 19:54:45.905407 1947284 tcp_utils.cc:130] Successfully connected to 10.165.58.187:41848\r\n2023:08:16-19:54:45:(1947284) |CCL_WARN| could not get local_idx/count from environment variables, trying to get them from ATL\r\n2023:08:16-19:54:45:(1947284) |CCL_WARN| sockets exchange mode is set. It may cause potential problem of 'Too many open file descriptors'\r\n[2023/08/16 19:54:48] ppcls INFO: Set random seed to (0 + $PADDLE_TRAINER_ID) for different trainer\r\n[2023/08/16 19:55:18] ppcls INFO: [Train][Epoch 1/5][Iter: 0/14]lr(LinearWarmup): 0.00017857, top1: 0.00000, top5: 0.05859, CELoss: 4.83407, loss: 4.83407, hw_cost: 28.08635s, batch_cost: 30.07965s, reader_cost: 1.98999, hw: 9.11475 fps, ips: 8.51074 samples/s, eta: 0:35:05\r\n[2023/08/16 19:55:18] ppcls INFO: [Train][Epoch 1/5][Iter: 1/14]lr(LinearWarmup): 0.00035714, top1: 0.00000, top5: 0.07031, CELoss: 4.83559, loss: 4.83559, hw_cost: 14.43727s, batch_cost: 15.43543s, reader_cost: 0.99506, hw: 324.79581 fps, ips: 16.58522 samples/s, eta: 0:17:45\r\n[2023/08/16 19:55:19] ppcls INFO: [Train][Epoch 1/5][Iter: 2/14]lr(LinearWarmup): 0.00053571, top1: 0.00000, top5: 0.04688, CELoss: 4.89722, loss: 4.89722, hw_cost: 9.88877s, batch_cost: 10.55530s, reader_cost: 0.66340, hw: 323.32837 fps, ips: 24.25322 samples/s, eta: 0:11:57\r\n[2023/08/16 19:55:20] ppcls INFO: [Train][Epoch 1/5][Iter: 3/14]lr(LinearWarmup): 0.00071429, top1: 0.00000, top5: 0.03516, CELoss: 4.95507, loss: 4.95507, hw_cost: 7.61374s, batch_cost: 8.11436s, reader_cost: 0.49756, hw: 324.60562 fps, ips: 31.54899 samples/s, eta: 0:09:03\r\n[2023/08/16 19:55:21] ppcls INFO: [Train][Epoch 1/5][Iter: 4/14]lr(LinearWarmup): 0.00089286, top1: 0.01016, top5: 0.04766, CELoss: 4.84117, loss: 4.84117, hw_cost: 6.24948s, batch_cost: 6.65057s, reader_cost: 0.39806, hw: 323.04976 fps, ips: 38.49293 samples/s, eta: 0:07:18\r\n[2023/08/16 19:55:22] ppcls INFO: [Train][Epoch 1/5][Iter: 5/14]lr(LinearWarmup): 0.00107143, top1: 0.00846, top5: 0.03971, CELoss: 4.93871, loss: 4.93871, hw_cost: 0.79408s, batch_cost: 0.79694s, reader_cost: 0.00009, hw: 322.38613 fps, ips: 321.23011 samples/s, eta: 0:00:51\r\n[2023/08/16 19:55:22] ppcls INFO: [Train][Epoch 1/5][Iter: 6/14]lr(LinearWarmup): 0.00125000, top1: 0.00725, top5: 0.06027, CELoss: 4.92091, loss: 4.92091, hw_cost: 0.79583s, batch_cost: 0.79864s, reader_cost: 0.00008, hw: 320.97142 fps, ips: 320.54559 samples/s, eta: 0:00:51\r\n[2023/08/16 19:55:23] ppcls INFO: [Train][Epoch 1/5][Iter: 7/14]lr(LinearWarmup): 0.00142857, top1: 0.00684, top5: 0.07080, CELoss: 4.88681, loss: 4.88681, hw_cost: 0.79366s, batch_cost: 0.79648s, reader_cost: 0.00007, hw: 324.32726 fps, ips: 321.41556 samples/s, eta: 0:00:50\r\n\r\n\r\nworkerlog.1 只有几行log\r\nI0816 19:54:42.765476 1947285 init.cc:232] ENV [CUSTOM_DEVICE_ROOT]=/home/afas/miniconda3/envs/chaofanl/lib/python3.10/site-packages/paddle_custom_device\r\nI0816 19:54:42.765515 1947285 init.cc:141] Try loading custom device libs from: [/home/afas/miniconda3/envs/chaofanl/lib/python3.10/site-packages/paddle_custom_device]\r\nI0816 19:54:42.834534 1947285 custom_device.cc:1042] Successed in loading custom runtime in lib: /home/afas/miniconda3/envs/chaofanl/lib/python3.10/site-packages/paddle_custom_device/libpaddle-custom-intel-gpu.so\r\nI0816 19:54:42.835247 1947285 custom_kernel.cc:76] Successed in loading 94 custom kernel(s) from loaded lib(s), will be used like native ones.\r\nI0816 19:54:42.835278 1947285 init.cc:153] Finished in LoadCustomDevice with libs_path: [/home/afas/miniconda3/envs/chaofanl/lib/python3.10/site-packages/paddle_custom_device]\r\nI0816 19:54:42.835289 1947285 init.cc:238] CustomDevice: intel_gpu, visible devices count: 1\r\nI0816 19:54:45.908782 1947285 tcp_utils.cc:130] Successfully connected to 10.165.58.187:41848\r\n2023:08:16-19:54:46:(1947285) |CCL_WARN| could not get local_idx/count from environment variables, trying to get them from ATL\r\n2023:08:16-19:54:46:(1947285) |CCL_WARN| sockets exchange mode is set. It may cause potential problem of 'Too many open file descriptors'",
        "state": "closed",
        "user": "chaofanl",
        "closed_by": "chaofanl",
        "created_at": "2023-08-17T03:12:17+00:00",
        "updated_at": "2023-08-17T05:06:33+00:00",
        "closed_at": "2023-08-17T05:06:29+00:00",
        "comments_count": [
            "chaofanl",
            "TingquanGao",
            "chaofanl",
            "TingquanGao",
            "chaofanl"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2917,
        "title": "RepVGG模型使用问题",
        "body": "原版RepVGG和DBB模型中都配有convert.py进行权重的重参数化转换，请问PaddleClas中这个脚本到哪里可以找到呢？谢谢！",
        "state": "closed",
        "user": "caikw0602",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-18T08:37:31+00:00",
        "updated_at": "2025-03-04T09:20:42+00:00",
        "closed_at": "2025-03-04T06:36:33+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2918,
        "title": "多标签图像分类模型：标注必须是one-hot encoding 标注吗？",
        "body": "请问下多标签图像分类的标签标注必须是one-hot encoding的形式吗？比如说PULC的车辆属性识别模型和人体属性模型的样例，我看都是one-hot的形式，比如车辆属性的标注：\r\n```\r\nimage_train/0001_c001_00016450_0.jpg\t1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0\r\n```\r\n\r\n可以换种形式标注吗？比如我的标签如下所示：\r\n```\r\n0 绿色\r\n1 红色\r\n2 黄色\r\n3 橙色\r\n4 轿车\r\n5 面包车\r\n```\r\n\r\n然后我的标注如下，也不一定是相同标签的，有的有2个标签，有的有3个标签，比如：\r\n```\r\ntrain/000001.jpg\t0,4\r\ntrain/000002.jpg\t1,5\r\ntrain/000003.jpg\t2,3,4\r\n```\r\n\r\n标注成这样的形式，进行训练可以吗？？\r\n",
        "state": "open",
        "user": "MooTong123",
        "closed_by": null,
        "created_at": "2023-08-18T08:56:21+00:00",
        "updated_at": "2024-07-16T19:08:28+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "MooTong123",
            "ghplvh"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2923,
        "title": "ESE 的术语全名是什么呢？",
        "body": "PPHGNet 中有一个 ESE Module，该模块使用自适应卷积操作固定输出大小。我不是很清楚 ESE 表示什么意思呢？\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/9984080a3d7ca52dd9044afaae1df1bed676fd1c/ppcls/arch/backbone/legendary_models/pp_hgnet.py#L74-L91",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-08-24T10:14:45+00:00",
        "updated_at": "2023-10-10T16:17:49+00:00",
        "closed_at": "2023-10-10T16:17:46+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2919,
        "title": "PP-ShiTu V2主体检测静态图模型无法转成ONNX",
        "body": "## 设备开发环境\r\n\r\n* PaddleClas版本型号: develop\r\n* CPU架构: Arm aarch64\r\n* 部署设备: RKNPU2\r\n\r\n## 需求说明\r\n\r\nPaddle模型在国内各大厂商的设备上部署很大一部分依赖 ONNX -> Deivece Model的模式，PP-ShiTu V2主体检测静态图模型无法转成ONNX意味着无法在很多设备上实现部署，有考虑优化后处理，改成ONNX兼容的格式吗？\r\n\r\n## 个人思路\r\n\r\n我的理解上用现在最新的PaddleDetection重新训练一次就行，本来是自己动手训练的，但是我没有处理好的数据集。",
        "state": "closed",
        "user": "Zheng-Bicheng",
        "closed_by": "Zheng-Bicheng",
        "created_at": "2023-08-23T01:46:18+00:00",
        "updated_at": "2024-02-04T11:23:53+00:00",
        "closed_at": "2024-01-27T06:19:18+00:00",
        "comments_count": [
            "Zheng-Bicheng",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2922,
        "title": "shitu_android_demo 的 paddleLIte库 能否支持升级到2.12版本",
        "body": "请问  shitu_android_demo 的 paddleLIte库 使用的 是官网编译好的 so 库吗？ 用的是官网编译的那个版本的库，为什么我替换成官网编译好的so 无法编译通过",
        "state": "closed",
        "user": "lizheng1992",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-24T03:44:29+00:00",
        "updated_at": "2025-03-04T09:20:44+00:00",
        "closed_at": "2025-03-04T06:36:34+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2927,
        "title": "mac os下安装paddleClas有问题",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\n      paddleclas==2.5.1\r\n      paddleocr==2.6.1.3\r\n      paddlepaddle==2.5.0\r\n 2. 涉及的其他产品使用的版本号：\r\n 3. 训练环境信息：\r\n  a. 具体操作系统:MacOS\r\n  b. Python版本号:Python=3.9\r\n  c. CUDA/cuDNN版本:不知\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n 16:41ERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects\r\n\r\n",
        "state": "closed",
        "user": "ILearn-better",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-28T09:29:59+00:00",
        "updated_at": "2025-03-04T09:20:46+00:00",
        "closed_at": "2025-03-04T06:36:35+00:00",
        "comments_count": [
            "beelzebub2006",
            "thsno02",
            "ILearn-better",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2929,
        "title": "优化器多个scope 作用域的问题",
        "body": "比如以下的[例子](https://github.com/PaddlePaddle/PaddleClas/blob/develop/ppcls/configs/reid/MetaBIN_ResNet50_cross_domain.yaml)(改自)\r\n\r\n```\r\nOptimizer:\r\n  - SGD:\r\n      scope: \"backbone\"\r\n      lr:\r\n        name: Constant\r\n        learning_rate: 0.2\r\n        last_epoch: -1\r\n  - SGD:\r\n      scope: \"RecModel\"\r\n      lr:\r\n        name: Cyclic\r\n        epochs: *epochs\r\n        step_each_epoch: *iter_per_epoch\r\n        base_learning_rate: 0.001\r\n        max_learning_rate: 0.1\r\n        warmup_epoch: 0\r\n        warmup_start_lr: 1\r\n        step_size_up: 1095\r\n        step_size_down: 1095\r\n        by_epoch: False\r\n        last_epoch: 0\r\n```\r\n\r\nRecModel 包含了backbone, neck 和head， 那么两个optimizer 会同时作用于\"backbone\"？ 还是其中有优先级的概念？\r\n感谢！\r\n\r\n@HydrogenSulfate ",
        "state": "open",
        "user": "hsuanguo",
        "closed_by": null,
        "created_at": "2023-08-28T16:48:48+00:00",
        "updated_at": "2024-02-26T04:26:18+00:00",
        "closed_at": null,
        "comments_count": [
            "HydrogenSulfate",
            "hsuanguo"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2933,
        "title": "多机多卡训练问题",
        "body": "环境：arm+xpu\r\n\r\n运行python3.7 -m paddle.distributed.launch --xpus=\"0\" --ips=\"192.168.1.20,192.168.1.22\" --log_dir=/media/didaima/user_base/PaddleClas/output PaddleClas/tools/train.py -c=/media/didaima/user_base/PaddleClas/ResNet50.yaml命令后结果如下：\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/119485829/facefc38-9e1b-4438-83c7-8439fc90e08b)\r\n\r\n为何运行之后是这样的？会自动退出？",
        "state": "closed",
        "user": "HustleOoo",
        "closed_by": "HustleOoo",
        "created_at": "2023-08-29T06:47:00+00:00",
        "updated_at": "2023-08-30T01:14:49+00:00",
        "closed_at": "2023-08-30T01:14:46+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2930,
        "title": "PaddleClas/ppcls/loss/tripletangularmarginloss.py中的输入参数target维度代表什么呢？",
        "body": "可否举例说明 谢谢。\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/18610954/4aa01126-c899-40ea-82f1-5375f47a00f9)\r\n\r\n",
        "state": "closed",
        "user": "zhishao",
        "closed_by": "zhishao",
        "created_at": "2023-08-29T01:31:01+00:00",
        "updated_at": "2023-08-30T02:43:40+00:00",
        "closed_at": "2023-08-30T02:43:38+00:00",
        "comments_count": [
            "HydrogenSulfate",
            "zhishao",
            "HydrogenSulfate",
            "zhishao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2936,
        "title": "visualdl 无法可视化",
        "body": "visualdl --logdir ./output/vdl/ --host 10.54.128.72\r\n终端 ：\r\n<img width=\"825\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/50936814/94d80542-b4f5-494f-b17e-2ef17972839b\">\r\n网页端：\r\n<img width=\"487\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/50936814/cbf7fe62-2867-4891-84fd-60e4db338012\">\r\n\r\n",
        "state": "closed",
        "user": "chaofanl",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-30T08:59:25+00:00",
        "updated_at": "2025-03-04T09:20:48+00:00",
        "closed_at": "2025-03-04T06:36:36+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2939,
        "title": "戴安全帽识别前一阶段可以使用人体检测模型吗？",
        "body": "我看到安全帽识别中使用的数据集基本只有头，那么分类的前一阶段需要使用一个人头检测模型吗？还是说人体检测模型也可以？请问paddle有人头检测相关预训练模型吗？",
        "state": "closed",
        "user": "zhishao",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-01T02:32:16+00:00",
        "updated_at": "2025-03-04T09:20:51+00:00",
        "closed_at": "2025-03-04T06:36:37+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2942,
        "title": "多标签使用 mixup 或 cutmix 皆报错",
        "body": "1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5和PaddlePaddle 2.3.0\r\n2. 涉及的其他产品使用的版本号：\r\n3. 训练环境信息：\r\na. 具体操作系统，如Linux\r\nb. Python版本号，如Python3.9\r\nc. CUDA/cuDNN版本， CUDA11.7/cuDNN 8.1.0\r\n\r\n4. 详细的错误信息及相关log\r\n\r\n在 config.yml 中按照 https://github.com/PaddlePaddle/PaddleClas/blob/9984080a3d7ca52dd9044afaae1df1bed676fd1c/docs/en/advanced_tutorials/DataAugmentation_en.md#1.8 中的 \r\n\r\n```\r\n      batch_transform_ops:\r\n        - MixupOperator:\r\n            alpha: 0.2\r\n```\r\n\r\n分别配置了 cutmix 或者 mixup。但是在训练加载数据的时候在此处报错：\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/9984080a3d7ca52dd9044afaae1df1bed676fd1c/ppcls/data/preprocess/batch_ops/batch_operators.py#L51\r\n\r\n如果不使用 cutmix 或者 mixup 模型能正常训练，但是一旦加上就会报错。\r\n\r\n我打印了 targets 中的内容，发现不是单纯的 labels，label.txt 中 label 加上一个长度相同的向量。",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-09-01T09:30:24+00:00",
        "updated_at": "2023-12-20T09:36:19+00:00",
        "closed_at": "2023-12-20T09:36:12+00:00",
        "comments_count": [
            "thsno02",
            "cuicheng01",
            "thsno02",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2940,
        "title": "Resnet50 training loss不下降",
        "body": "目前基于paddleclas 在imagenet2012 上面 训练resnet50  发现loss 不下降\r\n<img width=\"441\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/50936814/aa02107e-77bf-4c8a-b50e-673ce43c036c\">\r\n\r\n为了验证kernel，特地跑了下resnet18  ：\r\n<img width=\"428\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/50936814/73dbc25b-fec5-4448-acb4-52bd25a75170\">\r\n\r\n\r\nresnet50和resnet18的配置一样的， 所以想问下大概是哪个出了问题，期待你们的回复，谢谢！\r\n配置如下：\r\nbatch size 两个网络都是用的 256 ，都是单卡\r\nArch:\r\n  name: ResNet50\r\n  class_num: 1000\r\n  input_image_channel: *image_channel\r\n  data_format: \"NHWC\"\r\n \r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\nOptimizer:\r\n  name: SGD\r\n  lr:\r\n    name: Piecewise\r\n    learning_rate: 0.1\r\n    decay_epochs: [30, 60, 90]\r\n    values: [0.1, 0.01, 0.001, 0.0001]\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0001\r\n",
        "state": "closed",
        "user": "chaofanl",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-01T03:01:50+00:00",
        "updated_at": "2025-03-04T09:20:53+00:00",
        "closed_at": "2025-03-04T06:36:38+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2938,
        "title": "在使用模型预测的是时候出现KeyError: 'x'",
        "body": "PaddlePaddle-gpu 2.5.1\r\npaddleclas 0.0.0 \r\nwin11\r\npython3.11\r\ncuda12.2/cudnn8.6\r\n\r\n根据https://github.com/PaddlePaddle/PaddleClas/blob/9984080a3d7ca52dd9044afaae1df1bed676fd1c/docs/zh_CN/training/PP-ShiTu/feature_extraction.md这个文档训练出来了模型，能获取到图片的特征输出\r\n\r\n在使用模型预测的是时候出现KeyError: 'x'   执行的命令  python\\predict_system.py  -c shitu\\inference.yaml  配置文件是拷贝的deploy\\configs\\inference_general.yaml这个文件进行修改的\r\n\r\n是我的操作问题还是哪有问题，知道的回下，谢谢！！\r\n\r\n\r\n",
        "state": "closed",
        "user": "yz8654773",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-08-30T10:55:40+00:00",
        "updated_at": "2025-03-04T09:20:50+00:00",
        "closed_at": "2025-03-04T06:36:37+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2951,
        "title": "多标签 weight loss 的疑惑",
        "body": "在 _Rethinking of Pedestrian Attribute Recognition: Realistic Datasets with Efficient Method_ 这篇论文中提到了三种 weight loss 的方法，\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/103615460/557396ca-00b2-4259-89ae-f8f519ba11bd)\r\n\r\n实验结果如下：\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/103615460/e7de5c03-800f-4a77-9124-fae4e0824176)\r\n\r\nPaddleClas 在多标签中仅包含了 https://github.com/PaddlePaddle/PaddleClas/blob/9984080a3d7ca52dd9044afaae1df1bed676fd1c/ppcls/loss/multilabelloss.py#L6-L14 WF1 这一种，请问这里是有什么考量吗？比如基于实验，WF2 和 WF3 的表现不如 WF1？还是说目前没有官方支持？\r\n\r\n\r\nREF: https://arxiv.org/abs/2107.03576",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-09-04T01:33:25+00:00",
        "updated_at": "2023-12-20T09:36:08+00:00",
        "closed_at": "2023-12-20T09:36:05+00:00",
        "comments_count": [
            "thsno02",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2967,
        "title": "PaddleClas日志打印loss为nan训练不正常",
        "body": "使用相同的训练样本，使用相同的Docker镜像，在不同的Linux服务器上，一个正常，一个不正常，并打印许多nan\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\npaddle-bfloat       0.1.7\r\npaddleclas          2.5.1\r\npaddlepaddle-gpu    2.5.1.post117\r\n使用的代码分支为PaddleCLas/develop分支（使用release-2.5.1分支报错）\r\n 2. 涉及的其他产品使用的版本号：PaddleClas\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux（Ubuntu 20.04.5）\r\n  b. Python版本号，python 3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.7/cuDNN 8.4等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n[2023/09/13 09:33:10] ppcls INFO: [Train][Epoch 56/100][Avg]top1: 0.00000, top2: 0.00000, CELoss: nan, loss: nan\r\n[2023/09/13 09:33:11] ppcls WARNING: The number of negative samples is 0, please add negative samples.\r\n[2023/09/13 09:33:11] ppcls INFO: [Eval][Epoch 56][Iter: 0/2]CELoss: 0.00000, loss: 0.00000, threshold: 0.0, fpr: 0.0, tpr: 1.00000, top1: 0.00000, top2: 0.00000, batch_cost: 0.25136s, reader_cost: 0.14974, ips: 254.61737 images/sec\r\n[2023/09/13 09:33:11] ppcls WARNING: The number of negative samples is 0, please add negative samples.\r\n[2023/09/13 09:33:11] ppcls INFO: [Eval][Epoch 56][Avg]CELoss: 0.00000, loss: 0.00000, threshold: 0.0, fpr: 0.0, tpr: 1.00000, top1: 0.00000, top2: 0.00000\r\n[2023/09/13 09:33:11] ppcls INFO: [Eval][Epoch 56][best metric: 1.0]\r\n[2023/09/13 09:33:11] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/epoch_56\r\n[2023/09/13 09:33:11] ppcls INFO: Already save model in ./output/PPLCNet_x1_0/latest\r\n[2023/09/13 09:33:12] ppcls INFO: [Train][Epoch 57/100][Iter: 0/20]lr(LinearWarmup): 0.00441437, top1: 0.00000, top2: 0.00000, CELoss: nan, loss: nan, batch_cost: 0.07035s, reader_cost: 0.00910, ips: 909.78493 samples/s, eta: 0:01:01\r\n[2023/09/13 09:33:12] ppcls INFO: [Train][Epoch 57/100][Iter: 10/20]lr(LinearWarmup): 0.00433234, top1: 0.00000, top2: 0.00000, CELoss: nan, loss: nan, batch_cost: 0.05662s, reader_cost: 0.00016, ips: 1130.35529 samples/s, eta: 0:00:49\r\n[2023/09/13 09:33:13] ppcls INFO: [Train][Epoch 57/100][Avg]top1: 0.00000, top2: 0.00000, CELoss: nan, loss: nan\r\n",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-13T09:43:47+00:00",
        "updated_at": "2025-03-04T09:20:57+00:00",
        "closed_at": "2025-03-04T06:36:40+00:00",
        "comments_count": [
            "cuicheng01",
            "yaphet266",
            "guoyunqingyue",
            "cuicheng01",
            "cuicheng01",
            "yaphet266",
            "lhz-1",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2958,
        "title": "人体属性识别模型PPLCNet训练loss不下降",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：**paddleclas==2.5.1 && paddlepaddle-gpu==2.4.0.post117**\r\n 2. 涉及的其他产品使用的版本号：**未涉及**\r\n 3. 训练环境信息：\r\n  a. 具体操作系统: **Linux**\r\n  b. Python版本号: **Python3.8.10**\r\n  c. CUDA/cuDNN版本: **CUDA11.7/cuDNN 8.5.0**\r\n 4. 完整的代码: **代码未改动**\r\n\r\n你好，我基于下载的工程和人体属性识别数据集pa100k进行训练，但是训练过程中的loss会变大或者基本不变，但是评估指标看起来是正常的。命令行如下：\r\n`export CUDA_VISIBLE_DEVICES=0,1,2,3\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0,1,2,3\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0.yaml`\r\n\r\n配置信息PPLCNet_x1_0.yaml如下：\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: /mnt/AlgoTempData1/wangsijun/guoshouxiang/Projects/classification/paddlecla/pretrained_models/person_attribute_pretrained\r\n  output_dir: \"./output/11_PA_PA100k_PPLCNet/\"\r\n  device: \"gpu\"\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 60\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 256, 192]\r\n  save_inference_dir: \"./inference\"\r\n  use_multilabel: True\r\n\r\n# model architecture\r\nArch:\r\n  name: \"PPLCNet_x1_0\"\r\n  pretrained: True\r\n  use_ssld: True\r\n  class_num: 26\r\n  \r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n  Eval:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0005\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: MultiLabelDataset\r\n      image_root: \"/mnt/AlgoTempData1/wangsijun/guoshouxiang/Data/classification/05_Person_Attr/pa100k/\"\r\n      cls_label_path: \"/mnt/AlgoTempData1/wangsijun/guoshouxiang/Data/classification/05_Person_Attr/pa100k/train_list.txt\"\r\n      label_ratio: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [192, 256]\r\n        - TimmAutoAugment:\r\n            prob: 0.8\r\n            config_str: rand-m9-mstd0.5-inc1\r\n            interpolation: bicubic\r\n            img_size: [192, 256]\r\n        - Padv2:\r\n            size: [212, 276]\r\n            pad_mode: 1\r\n            fill_value: 0\r\n        - RandomCropImage:\r\n            size: [192, 256]\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - RandomErasing:\r\n            EPSILON: 0.4\r\n            sl: 0.02\r\n            sh: 1.0/3.0\r\n            r1: 0.3\r\n            attempt: 10\r\n            use_log_aspect: True\r\n            mode: pixel\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: True\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n  Eval:\r\n    dataset:\r\n      name: MultiLabelDataset\r\n      image_root: \"/mnt/AlgoTempData1/wangsijun/guoshouxiang/Data/classification/05_Person_Attr/pa100k/\"\r\n      cls_label_path: \"/mnt/AlgoTempData1/wangsijun/guoshouxiang/Data/classification/05_Person_Attr/pa100k/val_list.txt\"\r\n      label_ratio: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [192, 256]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: deploy/images/PULC/person_attribute/090004.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        size: [192, 256]\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: PersonAttribute\r\n    threshold: 0.5  #default threshold\r\n    glasses_threshold: 0.3  #threshold only for glasses\r\n    hold_threshold: 0.6 #threshold only for hold\r\n\r\nMetric:\r\n  Eval:\r\n    - ATTRMetric:\r\n\r\nloss变化如图所示：\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/44281534/b5440c8e-b859-415d-848a-eca238670c92)\r\n",
        "state": "closed",
        "user": "gsx1378",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-07T06:32:38+00:00",
        "updated_at": "2025-03-04T09:20:55+00:00",
        "closed_at": "2025-03-04T06:36:39+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2968,
        "title": "CropImage 操作的 size 参数的内部顺序可能是反了",
        "body": "`CropImage.__call__()` 认为 size 参数的格式是 [w, h]：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/ef796960c0e4227db606d7683254a0d6352ef3f5/ppcls/data/preprocess/ops/operators.py#L313-L314\r\n但`CropImage.__init__()` 的注释认为 size 参数的格式是 [h, w]：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/ef796960c0e4227db606d7683254a0d6352ef3f5/ppcls/data/preprocess/ops/operators.py#L307-L311\r\n我认为前者可能是反了，因为 [h, w] 格式是更常用的。314行应改为`h, w = self.size`。\r\n我大概看了一下本项目的配置文件，没有在 CropImage 操作中使用 w 和 h 不相等的 size 参数的案例，这个修改应该不会导致兼容性问题，但确实可能影响外部用户。",
        "state": "closed",
        "user": "duanyao",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-13T10:10:53+00:00",
        "updated_at": "2025-03-04T09:20:59+00:00",
        "closed_at": "2025-03-04T06:36:41+00:00",
        "comments_count": [
            "thsno02",
            "hsuanguo",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2969,
        "title": "LcNet 的结构",
        "body": "官方md中介绍的结构\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/images/PP-LCNet/PP-LCNet.png\r\n与代码中结构不一致\r\n```python\r\nNET_CONFIG = {\r\n    \"blocks2\":\r\n    #k, in_c, out_c, s, use_se\r\n    [[3, 16, 32, 1, False]],\r\n    \"blocks3\": [[3, 32, 64, 2, False], [3, 64, 64, 1, False]],\r\n    \"blocks4\": [[3, 64, 128, 2, False], [3, 128, 128, 1, False]],\r\n    \"blocks5\": [[3, 128, 256, 2, False], [5, 256, 256, 1, False],\r\n                [5, 256, 256, 1, False], [5, 256, 256, 1, False],\r\n                [5, 256, 256, 1, False], [5, 256, 256, 1, False]],\r\n    \"blocks6\": [[5, 256, 512, 2, True], [5, 512, 512, 1, True]]\r\n}\r\n```\r\n代码中\r\nblocks2 只有一层\r\nblocks5 有6层\r\n 图解中没有 blocks6\r\n\r\n",
        "state": "closed",
        "user": "Zhang-O",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-14T07:20:43+00:00",
        "updated_at": "2025-03-04T09:21:01+00:00",
        "closed_at": "2025-03-04T06:36:42+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2980,
        "title": "person_exit 数据集问题",
        "body": "这个数据集为什么30多个G，作为demo数据集也太大了吧\r\n<img width=\"463\" alt=\"1695201959806\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/38728358/8a324b63-4985-4ae5-b0ad-99c20d8e59b6\">\r\n\r\n",
        "state": "closed",
        "user": "jo-dean",
        "closed_by": "jo-dean",
        "created_at": "2023-09-20T09:27:32+00:00",
        "updated_at": "2023-09-21T01:26:10+00:00",
        "closed_at": "2023-09-21T01:26:07+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2970,
        "title": "麒麟系统上怎样安装paddleclas",
        "body": "工作中需要在国产麒麟系统上安装paddleclas， \r\n使用 `pip install paddleclas`后，在python3.7中导入paddlclas 报错\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/3f4039a1-b507-403d-8049-8b75ccdc5b23)\r\n\r\n另外很奇怪的一点是使用pip卸载paddleclas 后，在python3 中依然可以导入paddlclas。 有人可以解惑一下吗\r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-15T06:48:54+00:00",
        "updated_at": "2025-03-04T09:21:03+00:00",
        "closed_at": "2025-03-04T06:36:42+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2977,
        "title": "ML Decoder 的两个小问题",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：develop\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/2200f30052634249ec6c985c711184e8fbff5a74/ppcls/arch/gears/__init__.py#L43\r\n\r\n无法读取到 model.class_num，目前的 workaround 是，在 MLDecoder 中添加 `class_num`，可解决。\r\n\r\n文档中 https://github.com/PaddlePaddle/PaddleClas/blob/develop/ppcls/configs/MultiLabelCOCO/MLDecoder/README.md 的配置信息不对：\r\n\r\n```\r\n# model architecture\r\nArch:\r\n  name: ResNet101\r\n  class_num: 80\r\n  pretrained: True\r\n  # use ml-decoder head to replace avg_pool and fc\r\n  use_ml_decoder: True\r\n\r\n# ml-decoder head\r\nMLDecoder:\r\n  query_num: 80 # default: 80, query_num <= class_num\r\n  in_chans: 2048\r\n```\r\n\r\nin_chans 应为 in_channels\r\n\r\n",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-09-18T09:37:53+00:00",
        "updated_at": "2023-10-07T05:23:19+00:00",
        "closed_at": "2023-10-07T05:23:16+00:00",
        "comments_count": [
            "MINGtoMING",
            "kennyvoo",
            "MINGtoMING",
            "kennyvoo",
            "MINGtoMING"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2978,
        "title": "ModuleNotFoundError: No module named 'PaddleClas'",
        "body": "### import paddleclas出现报错，如下\r\n\r\n**from .ppcls.arch import backbone ImportError: attempted relative import with no known parent package**\r\n\r\n然后将paddleclas.py文件改为绝对引用，如下：\r\n..........\r\nimport sys\r\nsys.path.append('D:/PaddleClass')\r\n\r\nimport cv2\r\nimport numpy as np\r\nfrom tqdm import tqdm\r\nfrom prettytable import PrettyTable\r\nimport paddle\r\n\r\nfrom PaddleClas.ppcls.arch import backbone\r\nfrom PaddleClas.ppcls.utils import logger\r\n\r\nfrom PaddleClas.deploy.python.predict_cls import ClsPredictor\r\nfrom PaddleClas.deploy.utils.get_image_list import get_image_list\r\nfrom PaddleClas.deploy.utils import config\r\n...........\r\n\r\n再次 import paddleclas，再次报错：\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\paddle_env\\lib\\site-packages\\paddleclas-0.0.0-py3.9.egg\\paddleclas\\__init__.py\", line 16, in <module>\r\n    from .paddleclas import PaddleClas\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\paddle_env\\lib\\site-packages\\paddleclas-0.0.0-py3.9.egg\\paddleclas\\paddleclas.py\", line 35, in <module>\r\n    from PaddleClas.ppcls.arch import backbone\r\nModuleNotFoundError: No module named 'PaddleClas'\r\n\r\n请问如何解决？",
        "state": "closed",
        "user": "Junxiang-Zeng8443",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-19T09:08:09+00:00",
        "updated_at": "2025-03-04T09:21:04+00:00",
        "closed_at": "2025-03-04T06:36:43+00:00",
        "comments_count": [
            "cuicheng01",
            "MathewsJosh",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2984,
        "title": "MixFormer代码不见了啊，请问是删除了吗",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "PeytonTse",
        "closed_by": null,
        "created_at": "2023-09-25T03:13:41+00:00",
        "updated_at": "2024-02-26T04:26:04+00:00",
        "closed_at": null,
        "comments_count": [
            "PeytonTse"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2985,
        "title": "PaddleClas ResNet50 训练 batch_size 改小后收敛问题",
        "body": "请问是否支持batch_size改小后训练收敛？比如batch_size修改为32,16,8\r\n如果支持应该是否需要调整其它参数，应该怎么调整？",
        "state": "closed",
        "user": "tiandou-tangdou",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-26T04:20:00+00:00",
        "updated_at": "2025-03-04T09:21:08+00:00",
        "closed_at": "2025-03-04T06:36:45+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2981,
        "title": "How to load pdparams file",
        "body": " 1. PaddleClas版本：PaddleClas release/2.5\r\n 2. 训练环境信息：飞桨AI Studio\r\n\r\nnetwork = paddle.vision.models.resnet50(num_classes=get('num_classes'), pretrained=True)\r\nmodel = paddle.Model(network)\r\n...\r\nmodel.fit(...)\r\n\r\n我在飞桨AI Studio中通过上述代码进行模型的加载和训练，可我发现ResNet50_vd_ssld_v2模型并未在paddle.vision.models中，于是我下载了ResNet50_vd_ssld_v2_pretrained.pdparams文件，想通过以下代码方法进行加载\r\n\r\nlayer_state_dict = paddle.load(\"./work/ResNet50_vd_ssld_v2_pretrained.pdparams\")\r\nnetwork.load_dict(layer_state_dict)\r\n\r\n但好像并未成功，提示\r\nwarnings.warn(f\"Skip loading for {key}. \" + str(err))\r\n等异常信息\r\n![3745EAFE-BBCC-4bca-952E-140C4874AA05](https://github.com/PaddlePaddle/PaddleClas/assets/70926594/c1dbe27e-ab70-44b8-97f6-4f34ac33c160)\r\n\r\n\r\n想请教一下如何加载类似ResNet50_vd_ssld_v2这种不在内置模型库之内的模型来进行训练",
        "state": "closed",
        "user": "SaitamaSiSi",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-09-21T06:22:34+00:00",
        "updated_at": "2025-03-04T09:21:06+00:00",
        "closed_at": "2025-03-04T06:36:44+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2986,
        "title": "paddledetection 单机多卡训练设置了使用其他gpu但总是自动使用第一个gpu",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：ubuntu22 + paddle2.2 docker\r\n  a. 具体操作系统，linux\r\n  b. Python版本号，Python3.7\r\n  c. CUDA/cuDNN版本: 11.2 \r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n     服务器中共有4张卡， 因为gpu0 被占满， 所以设置CUDA_VISIBLE_DEVICES=2,3 , 在训练命令中也设置了--gpus 2,3 , 但是启动训练后还是会使用gpu0 ，导致gpu显存不够而终止训练进程。  请问这是什么原因。\r\n我的训练脚本:\r\n`export CUDA_VISIBLE_DEVICES=2,3\r\npython -m paddle.distributed.launch --gpus 2,3 tools/train.py -c ./configs/picodet/application/mainbody_detection/picodet_lcnet_x2_5_640_mainbody.yml --eval\r\n`\r\n报错信息如下\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/08a3afd4-71d9-4f2a-b1ed-8f14323a5d05)\r\n\r\n",
        "state": "open",
        "user": "ericosmic",
        "closed_by": null,
        "created_at": "2023-09-26T09:10:17+00:00",
        "updated_at": "2024-02-26T04:26:01+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "ericosmic"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2996,
        "title": "请问，clip算法有开放提取文本特征的模型吗？",
        "body": null,
        "state": "closed",
        "user": "205418367",
        "closed_by": "205418367",
        "created_at": "2023-10-08T08:40:47+00:00",
        "updated_at": "2023-10-16T13:02:57+00:00",
        "closed_at": "2023-10-16T03:32:17+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 2999,
        "title": "在 ONNX 中添加 preprocess 的脚本",
        "body": "现有的 paddle2onnx 和 delopy 中尚未提供添加 preprocess node 的操作，这对模型部署来说有一些不便。",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-10-09T02:32:15+00:00",
        "updated_at": "2023-10-09T02:36:17+00:00",
        "closed_at": "2023-10-09T02:36:13+00:00",
        "comments_count": [
            "thsno02"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3005,
        "title": "单GPU训练模型如何提速？",
        "body": "\r\n操作系统：windows\r\ncuda：12.2\r\nPP-LCNetV2模型\r\nGPU：NVIDIA  T4080\r\n\r\n模型寻来你需要花费的时间太长：\r\n[2023/10/11 17:48:53] ppcls INFO: [Train][Epoch 1/480][Iter: 0/3988]lr(LinearWarmup): 0.00004011, top1: 0.00000, top5: 0.00000, CELoss: 7.04317, loss: 7.04317, batch_cost: 8.75525s, reader_cost: 4.40119, ips: 17.58944 samples/s, eta: 193 days, 23:27:31\r\n[2023/10/11 17:49:48] ppcls INFO: [Train][Epoch 1/480][Iter: 10/3988]lr(LinearWarmup): 0.00044121, top1: 0.00044, top5: 0.00525, CELoss: 6.93004, loss: 6.93004, batch_cost: 4.98785s, reader_cost: 3.34932, ips: 25.06091 samples/s, eta: 110 days, 12:11:29",
        "state": "closed",
        "user": "azureblue01",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-10-11T12:20:35+00:00",
        "updated_at": "2025-03-04T09:21:10+00:00",
        "closed_at": "2025-03-04T06:36:46+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3006,
        "title": "新建索引库失败",
        "body": "环境:\r\nubuntu 18\r\npaddleclas-2.5\r\n\r\n使用官方提供的数据集（drink_dataset_v2.0）以及官方检测和特征抽取模型新建索引库， 但是对测试图片给出的预测置信度都低于设置阈值,  \r\n新建库的命令：\r\n`python deploy/python/build_gallery.py -c ./deploy/configs/inference_drink.yaml`\r\n\r\ninference_drink.yaml:\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/f4b18b06-96ac-4bc3-80f2-9dea770dc8df)\r\n\r\n预测命令\r\n`python paddleclas.py --index_dir ./dataset/drink_dataset_v2.0/index_all --infer_imgs ./dataset/drink_dataset_v2.0/test_images/005.jpeg`\r\n预测结果\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/83b882d9-76e8-4cc0-9111-3859f25175d4)\r\n\r\n",
        "state": "open",
        "user": "ericosmic",
        "closed_by": null,
        "created_at": "2023-10-13T10:10:11+00:00",
        "updated_at": "2024-11-28T08:51:08+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "WR-CREATOR"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3007,
        "title": "RK3588按照官方指引部署classification运行成功，但是结果不正确。",
        "body": "完全一步步按照官方教程来做。得到结果如下：\r\n\r\n[INFO] fastdeploy/vision/common/processors/transform.cc(93)::FuseNormalizeHWC2CHW\tNormalize and HWC2CHW are fused to NormalizeAndPermute  in preprocessing pipeline. [INFO] fastdeploy/vision/common/processors/transform.cc(159)::FuseNormalizeColorConvert\tBGR2RGB and NormalizeAndPermute are fused to NormalizeAndPermute with swap_rb=1 [INFO] fastdeploy/runtime/backends/rknpu2/rknpu2_backend.cc(81)::GetSDKAndDeviceVersion\trknpu2 runtime version: 1.5.1b19 (32afb0e92@2023-07-14T12:46:17) [INFO] fastdeploy/runtime/backends/rknpu2/rknpu2_backend.cc(82)::GetSDKAndDeviceVersion\trknpu2 driver version: 0.8.2 index=0, name=inputs, n_dims=4, dims=[1, 224, 224, 3], n_elems=150528, size=301056, fmt=NHWC, type=FP16, qnt_type=AFFINE, zp=0, scale=1.000000, pass_through=0 index=0, name=save_infer_model/scale_0.tmp_1, n_dims=2, dims=[1, 1000, 0, 0], n_elems=1000, size=2000, fmt=UNDEFINED, type=FP32, qnt_type=AFFINE, zp=0, scale=1.000000, pass_through=0 [INFO] fastdeploy/runtime/runtime.cc(367)::CreateRKNPU2Backend\tRuntime initialized with Backend::RKNPU2 in Device::RKNPU. [INFO] fastdeploy/vision/common/processors/transform.cc(159)::FuseNormalizeColorConvert\tBGR2RGB and Normalize are fused to Normalize with swap_rb=1 [WARNING] fastdeploy/runtime/backends/rknpu2/rknpu2_backend.cc(420)::InitRKNNTensorMemory\tThe input tensor type != model's inputs type.The input_type need FP16,but inputs[0].type is FP32 ClassifyResult( label_ids: 644,  scores: 0.073181,  ) [FastDeploy] PPClas in RKNPU2 duration = 0.028111s. \r\n\r\n结果一直是 label_ids: 644,  scores: 0.073181，没有变化。",
        "state": "closed",
        "user": "7288Fzq",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-10-14T21:43:52+00:00",
        "updated_at": "2025-03-04T09:21:11+00:00",
        "closed_at": "2025-03-04T06:36:47+00:00",
        "comments_count": [
            "cuicheng01",
            "7288Fzq",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3008,
        "title": "判断图片清晰度的模型，实测效果不理想",
        "body": "`该模型对于背景虚化的图像都判断为模糊，这是不合理的。想了解一下，该模型的训练数据怎么做？我想加一些数据自己训练，改善效果。谢谢！`\r\n",
        "state": "closed",
        "user": "205418367",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-10-16T03:28:45+00:00",
        "updated_at": "2025-03-04T09:21:13+00:00",
        "closed_at": "2025-03-04T06:36:48+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "PULC"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3009,
        "title": "inference模型如何得到中间任意层网络输出的tensor值",
        "body": "在predict_rec.py中给出了输入和输出tensor值，但我想要获得任意层的tensor值，用于特征图可视化或其他任务，请问用什么函数或方法可以得到？\r\ninput_names = self.predictor.get_input_names()\r\ninput_tensor = self.predictor.get_input_handle(input_names[0])\r\noutput_names = self.predictor.get_output_names()\r\noutput_tensor = self.predictor.get_output_handle(output_names[0])",
        "state": "closed",
        "user": "dengxy9527",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-10-16T04:45:01+00:00",
        "updated_at": "2025-03-04T09:21:15+00:00",
        "closed_at": "2025-03-04T06:36:49+00:00",
        "comments_count": [
            "dengxy9527",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3010,
        "title": "ppshitu可以做文档分类吗",
        "body": "有个疑问需要各位大佬给予个帮助，目前遇到文档或者表格的分类，ppshitu或者有什么分类模式适合这种文档类的分类吗，谢谢，因为实际的业务中，经常会新增一种表格或者证件之类的，这种适合动态文档类别的动态新增吗",
        "state": "closed",
        "user": "BeyondYourself",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-10-18T06:15:07+00:00",
        "updated_at": "2025-03-04T09:21:17+00:00",
        "closed_at": "2025-03-04T06:36:49+00:00",
        "comments_count": [
            "cuicheng01",
            "BeyondYourself",
            "BeyondYourself",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3012,
        "title": "How to visualize PPHGNet multi-label model?",
        "body": "Is there a tutorial on how to utilize [InterpretDL](https://github.com/PaddlePaddle/InterpretDL) to visualize the PPHGNet multi-label model?",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-10-19T09:26:29+00:00",
        "updated_at": "2023-10-19T11:19:42+00:00",
        "closed_at": "2023-10-19T11:19:39+00:00",
        "comments_count": [
            "cuicheng01",
            "thsno02",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3014,
        "title": "train报错",
        "body": "023/10/23 19:57:42] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nLAUNCH INFO 2023-10-23 19:57:59,699 Pod failed\r\nLAUNCH ERROR 2023-10-23 19:57:59,700 Container failed !!!\r\nAUNCH INFO 2023-10-23 19:57:59,714 ------------------------- ERROR LOG DETAIL -------------------------\r\nLAUNCH INFO 2023-10-23 19:57:59,715 Exit code 3221226505\r\n\r\n报错没头绪",
        "state": "closed",
        "user": "lhz-1",
        "closed_by": "lhz-1",
        "created_at": "2023-10-23T12:01:23+00:00",
        "updated_at": "2023-10-24T09:03:19+00:00",
        "closed_at": "2023-10-24T09:03:15+00:00",
        "comments_count": [
            "lhz-1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3015,
        "title": "Running check on Ubuntu 22.04: ImportError: libssl.so.1.1",
        "body": "Trying to install and import paddlecla under `Ubuntu 22.04` with `venv` I got the following error:\r\n```bash\r\n( \\\r\n. .local.env \\\r\n&& . venv/cpu/bin/activate \\\r\n&& python -c \"import paddle; paddle.utils.run_check()\" \\\r\n)\r\nError: Can not import paddle core while this file exists: /mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/fluid/libpaddle.so\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/__init__.py\", line 31, in <module>\r\n    from .framework import monkey_patch_variable\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/framework/__init__.py\", line 17, in <module>\r\n    from . import random  # noqa: F401\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/framework/random.py\", line 17, in <module>\r\n    from paddle import fluid\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/fluid/__init__.py\", line 36, in <module>\r\n    from . import framework\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/fluid/framework.py\", line 35, in <module>\r\n    from . import core\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/fluid/core.py\", line 356, in <module>\r\n    raise e\r\n  File \"/mnt/local/data02/home2/worker/project/PaddleClas/venv/cpu/lib/python3.10/site-packages/paddle/fluid/core.py\", line 269, in <module>\r\n    from . import libpaddle\r\nImportError: libssl.so.1.1: cannot open shared object file: No such file or directory\r\nmake: [Makefile:33: venv-test-cpu] Error 1 (ignored)\r\n```\r\nPlease is somebody known how to fix this?\r\n\r\n",
        "state": "closed",
        "user": "ucsky",
        "closed_by": "ucsky",
        "created_at": "2023-10-24T09:26:29+00:00",
        "updated_at": "2023-11-02T07:22:59+00:00",
        "closed_at": "2023-10-31T07:34:11+00:00",
        "comments_count": [
            "ucsky"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3017,
        "title": "paddle.utils.run_check() stuck with docker image",
        "body": "I try to run check inside using the docker image but the prcocess got stuck at line 3:\r\n```bash\r\n>>> paddle.utils.run_check()\r\nRunning verify PaddlePaddle program ... \r\nW1024 14:29:12.073942    16 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.0, Runtime API Version: 10.2\r\nW1024 14:29:12.078971    16 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\n```\r\nI s tarted docker using this command:\r\n```bash\r\n\tdocker run \\\r\n\t--name ppcls-gpu-dev \\\r\n\t-v $PWD:/paddle \\\r\n\t--rm \\\r\n\t--shm-size=8G \\\r\n\t--network=host \\\r\n\t--gpus all \\\r\n\t-it paddlepaddle/paddle:2.1.0-gpu-cuda10.2-cudnn7 /bin/bash \r\n```\r\nHost is:\r\n```bash\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 22.04.3 LTS\r\nRelease:\t22.04\r\nCodename:\tjammy\r\n```\r\nnvidia-smi give\r\n```bash\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 525.125.06   Driver Version: 525.125.06   CUDA Version: 12.0     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|                               |                      |               MIG M. |\r\n|===============================+======================+======================|\r\n|   0  NVIDIA A100-PCI...  On   | 00000000:17:00.0 Off |                    0 |\r\n| N/A   43C    P0    42W / 250W |      4MiB / 40960MiB |      0%      Default |\r\n|                               |                      |             Disabled |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                                  |\r\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n|        ID   ID                                                   Usage      |\r\n|=============================================================================|\r\n|    0   N/A  N/A      2671      G   /usr/lib/xorg/Xorg                  4MiB |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\nPlease is somebody known what is going on and how I can pass `paddle.utils.run_check()`?",
        "state": "closed",
        "user": "ucsky",
        "closed_by": "ucsky",
        "created_at": "2023-10-24T14:34:33+00:00",
        "updated_at": "2023-11-02T09:47:09+00:00",
        "closed_at": "2023-11-02T08:33:36+00:00",
        "comments_count": [
            "Clayrisee",
            "ucsky",
            "Clayrisee",
            "ucsky"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3022,
        "title": "部分import语句可能造成循环引用错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "ziishuo",
        "closed_by": null,
        "created_at": "2023-10-27T13:57:20+00:00",
        "updated_at": "2024-11-08T10:21:53+00:00",
        "closed_at": null,
        "comments_count": [
            "ziishuo",
            "cuicheng01",
            "ericosmic"
        ],
        "labels": [
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3023,
        "title": "Questions about the squeeze-and-exicitation module in PPHGNet series model",
        "body": "Q: Is there any justification for using the ESE module instead of the SE module in PPHGNetv1?\r\n\r\nThe design of PPHGNetv1 strikes a balance between computational efficiency and model performance. However, the ESE module has more parameters than the SE module. The ESE module consists of a fully connected layer without dimension reduction, resulting in a parameter size of $C * C$. In contrast, the SE module includes two fully connected layers with a dimension reduction ratio of $r$, leading to a parameter size of $C * C / r + C/r * C$, which simplifies to $2 * C * C / r$. If $r$ is greater than 2, the SE module has fewer parameters. The original paper recommends setting $r$ to 16[^3].\r\n\r\nWhen considering the model's inference performance, it appears that using the ES module would be faster. So, why opt for the ESE[^1] module in v1? Additionally, v2 employs an ES module with a ratio of 2 (if I understand correctly[^2]). Would the performance of the ES module be superior while maintaining a consistent number of parameters?\r\n\r\nFrom my perspective, the SE module may have an advantage in capturing inter-channel dependencies, given its utilization of dimension reduction as a form of compression. On the other hand, the ESE module might not be as effective in this regard.\r\n\r\n[^1]: https://github.com/PaddlePaddle/PaddleClas/blob/e35611697a3514f24289f170e115a12399f6a342/ppcls/arch/backbone/legendary_models/pp_hgnet.py#L74-L84\r\n[^2]: https://github.com/PaddlePaddle/PaddleClas/blob/2bc2fc0348e5778291362d64781830b142e9d85e/ppcls/arch/backbone/legendary_models/pp_hgnet_v2.py#L299-L312\r\n[^3]: https://arxiv.org/abs/1709.01507",
        "state": "closed",
        "user": "thsno02",
        "closed_by": "thsno02",
        "created_at": "2023-10-30T07:22:28+00:00",
        "updated_at": "2024-01-11T08:55:34+00:00",
        "closed_at": "2024-01-11T08:55:31+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3029,
        "title": "这个新版本export的size怎么设置",
        "body": "使用如下命令默认export model \r\n<img width=\"492\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/26667855/5a8a5035-58a7-4fb3-bc58-bb4fcfcd32c7\">\r\nconfig文件的size也是合理的\r\n<img width=\"318\" alt=\"image\" src=\"https://github.com/PaddlePaddle/PaddleClas/assets/26667855/31f659a7-2759-47e8-9082-df12014df3b5\">\r\nz在用cpp推理库进行推理的时候报错如下size不对\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/26667855/c66ab6fd-cb90-4a69-aef5-35d102307c39)\r\n\r\n",
        "state": "closed",
        "user": "Cristhine",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-02T08:29:38+00:00",
        "updated_at": "2025-03-04T09:21:21+00:00",
        "closed_at": "2025-03-04T06:36:51+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3031,
        "title": "进群二维码失效",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "qingjiaozyn",
        "closed_by": null,
        "created_at": "2023-11-02T10:09:21+00:00",
        "updated_at": "2024-02-26T04:25:49+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": [
            "documentation"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3027,
        "title": "含文字的图像方向分类模型预测分数总是0",
        "body": "PaddleClas 2.5.1版本直接安装官方提供的文字图像方向分类模型预测demo操作，结果与官方不一致：\r\n [https://github.com/PaddlePaddle/PaddleClas/blob/e35611697a3514f24289f170e115a12399f6a342/docs/zh_CN/models/PULC/PULC_text_image_orientation.md](url)按照 2.3 预测demo操作的。但是得到的结果是：\r\n[2023/11/01 02:47:50] ppcls INFO: class_ids: [3, 2], scores: [0.0, 0.0], label_names: ['270', '180'], filename: pulc_demo_imgs/text_image_orientation/img_rot0_demo.jpg\r\n[2023/11/01 02:47:50] ppcls INFO: Predict complete!\r\n![iShot_2023-11-01_10 48 04](https://github.com/PaddlePaddle/PaddleClas/assets/43000188/7efa2fca-4ca0-4658-844a-1832ae57ccc9)\r\n\r\n",
        "state": "closed",
        "user": "llhy60",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-01T02:49:01+00:00",
        "updated_at": "2025-03-04T09:21:19+00:00",
        "closed_at": "2025-03-04T06:36:50+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug",
            "PULC"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3030,
        "title": "训练完第一个epock程序挂了 报错Exit code 3221225477 ",
        "body": "\r\n\r\n我在本地跑可以正常跑 loss也是正常的\r\n0/1302]lr(CosineAnnealingDecay): 0.00031954, top1: 0.81220, CELoss: 0.47974, loss: 0.47974, batch_cost: 0.38412s, reader_cost: 0.00061, ips: 20.82710 samples/s, eta: 1 day, 16:39:56\r\n[2023/11/02 16:32:37] ppcls INFO: [Train][Epoch 8/300][Iter: 370/1302]lr(CosineAnnealingDecay): 0.00031953, top1: 0.81153, CELoss: 0.48013, loss: 0.48013, batch_cost: 0.38424s, reader_cost: 0.00059, ips: 20.82025 samples/s, eta: 1 day, 16:40:40\r\n[2023/11/02 16:32:41] ppcls INFO: [Train][Epoch 8/300][Iter: 380/1302]lr(CosineAnnealingDecay): 0.00031953, top1: 0.81057, CELoss: 0.48120, loss: 0.48120, batch_cost: 0.38436s, reader_cost: 0.00058, ips: 20.81403 samples/s, eta: 1 day, 16:41:20\r\n[2023/11/02 16:32:44] ppcls INFO: [Train][Epoch 8/300][Iter: 390/1302]lr(CosineAnnealingDecay): 0.00031953, top1: 0.81062, CELoss: 0.48075, loss: 0.48075, batch_cost: 0.38249s, reader_cost: 0.00057, ips: 20.91583 samples/s, eta: 1 day, 16:29:23\r\n[2023/11/02 16:32:47] ppcls INFO: [Train][Epoch 8/300][Iter: 400/1302]lr(CosineAnnealingDecay): 0.00031953, top1: 0.81098, CELoss: 0.47976, loss: 0\r\n\r\n\r\n但是我用另一台机器\r\n在第一个epoch结束后会报错Exit code 3221225477 \r\n而且 loss也很奇怪,top1也比较异常,环境配置是一样的\r\nAnnealingDecay): 0.00031918, top1: 0.00000, CELoss: 8.29736, loss: 8.29736, batch_cost: 0.27995s, reader_cost: 0.05223, ips: 28.57630 samples/s, eta: 2:56:22\r\n[2023/11/02 16:29:31] ppcls INFO: [Train][Epoch 1/30][Iter: 1270/1302]lr(CosineAnnealingDecay): 0.00031916, top1: 0.00000, CELoss: 8.28184, loss: 8.28184, batch_cost: 0.27995s, reader_cost: 0.05234, ips: 28.57686 samples/s, eta: 2:56:19\r\n[2023/11/02 16:29:34] ppcls INFO: [Train][Epoch 1/30][Iter: 1280/1302]lr(CosineAnnealingDecay): 0.00031915, top1: 0.00000, CELoss: 8.21719, loss: 8.21719, batch_cost: 0.27993s, reader_cost: 0.05256, ips: 28.57837 samples/s, eta: 2:56:15\r\n[2023/11/02 16:29:37] ppcls INFO: [Train][Epoch 1/30][Iter: 1290/1302]lr(CosineAnnealingDecay): 0.00031914, top1: 0.00000, CELoss: 8.20253, loss: 8.20253, batch_cost: 0.28013s, reader_cost: 0.05258, ips: 28.55802 samples/s, eta: 2:56:20\r\n[2023/11/02 16:29:40] ppcls INFO: [Train][Epoch 1/30][Iter: 1300/1302]lr(CosineAnnealingDecay): 0.00031912, top1: 0.00000, CELoss: 8.18809, loss: 8.18809, batch_cost: 0.28023s, reader_cost: 0.052\r\n\r\n都是单卡\r\n",
        "state": "closed",
        "user": "lhz-1",
        "closed_by": "lhz-1",
        "created_at": "2023-11-02T08:35:34+00:00",
        "updated_at": "2023-11-03T03:01:47+00:00",
        "closed_at": "2023-11-03T03:01:44+00:00",
        "comments_count": [
            "lhz-1",
            "lhz-1",
            "lhz-1"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3033,
        "title": "How to set \"color jitter\" in the yaml file for data augmentation.",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5 和 PaddlePaddle 2.4.2\r\n 2. 涉及的其他产品使用的版本号：PaddleSeg 2.7\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Ubuntu 18.04\r\n  b. Python版本号，Python 3.7\r\n  c. CUDA/cuDNN版本，CUDA11.6 cuDNN 8.4.0 & NCCL 2.7\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n----\r\n\r\nHey, thanks for the excellent work. I am looking for the \"color jitter\" data augmentation for image classification. For example, in the paper \"MixFormer,\" the authors adopt the color jitter with 0.4 weight for data augmentation.\r\n\r\nPaper Link: https://arxiv.org/abs/2204.02557 (Table 17 shows the detailed hyperparameters for MixFormer using PaddleClas)\r\n\r\nHowever, when I checked the official configure files (*.yaml) for this paper, I could not locate the hyperparameters for color jitter \r\n\r\nCode Link: https://github.com/PaddlePaddle/PaddleClas/pull/1820/files#diff-5c766eb92d812786d833a369132d7a2caa62b1eef57bfdf263640b2209cb84c3\r\n\r\nTherefore, I would like to know how to set the \"color jitter\" in the yaml files. Thanks. ",
        "state": "closed",
        "user": "ZhengyuXia",
        "closed_by": "ZhengyuXia",
        "created_at": "2023-11-03T20:09:10+00:00",
        "updated_at": "2023-11-18T21:20:21+00:00",
        "closed_at": "2023-11-18T21:20:21+00:00",
        "comments_count": [
            "TingquanGao",
            "ZhengyuXia"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3038,
        "title": "registry.baidubce.com/paddlepaddle/paddle   2.5.1-gpu-cuda12.0-cudnn8.9-trt8.6镜像容器里面安装paddleclas报错",
        "body": "劳烦大佬帮忙解决一下！！！！\r\nλ 550999ce7df0 /home pip install paddleclas==2.5.1 -i https://pypi.tuna.tsinghua.edu.cn/simple\r\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\r\nCollecting paddleclas==2.5.1\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/1f/d5/2544711d7bf23947f36bcfce81447af750adebb92f135fcaa28dfc014929/paddleclas-2.5.1-py3-none-any.whl (342 kB)\r\nCollecting prettytable (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/4d/81/316b6a55a0d1f327d04cc7b0ba9d04058cb62de6c3a4d4b0df280cbe3b0b/prettytable-3.9.0-py3-none-any.whl (27 kB)\r\nCollecting ujson (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/78/90/bfa62616208bd5195a113c0aa4e42c9f471e69edfc48feba6a0ab494cccb/ujson-5.8.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (53 kB)\r\nRequirement already satisfied: opencv-python in /usr/local/lib/python3.10/dist-packages (from paddleclas==2.5.1) (4.8.1.78)\r\nRequirement already satisfied: pillow in /usr/local/lib/python3.10/dist-packages (from paddleclas==2.5.1) (9.5.0)\r\nRequirement already satisfied: tqdm in /usr/local/lib/python3.10/dist-packages (from paddleclas==2.5.1) (4.66.1)\r\nRequirement already satisfied: PyYAML>=5.1 in /usr/local/lib/python3.10/dist-packages (from paddleclas==2.5.1) (6.0)\r\nCollecting visualdl>=2.2.0 (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/ea/b5/37726c750a4f4598660998327c3566b2d2ed5a1a5f44e9f0dde875602447/visualdl-2.5.3-py3-none-any.whl (6.3 MB)\r\nRequirement already satisfied: scipy>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from paddleclas==2.5.1) (1.11.3)\r\nCollecting scikit-learn>=0.21.0 (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/d0/0b/26ad95cf0b747be967b15fb71a06f5ac67aba0fd2f9cd174de6edefc4674/scikit_learn-1.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (10.8 MB)\r\nCollecting gast==0.3.3 (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/d6/84/759f5dd23fec8ba71952d97bcc7e2c9d7d63bdc582421f3cd4be845f0c98/gast-0.3.3-py2.py3-none-any.whl (9.7 kB)\r\nCollecting faiss-cpu==1.7.1.post2 (from paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/87/91/bf8ea0d42733cbb04f98d3bf27808e4919ceb5ec71102e21119398a97237/faiss-cpu-1.7.1.post2.tar.gz (41 kB)\r\n  Preparing metadata (setup.py) ... done\r\nCollecting easydict (from paddleclas==2.5.1)\r\n  Using cached easydict-1.11-py3-none-any.whl\r\nRequirement already satisfied: numpy<2.0,>=1.17.3 in /usr/local/lib/python3.10/dist-packages (from scikit-learn>=0.21.0->paddleclas==2.5.1) (1.22.0)\r\nCollecting joblib>=1.1.1 (from scikit-learn>=0.21.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/10/40/d551139c85db202f1f384ba8bcf96aca2f329440a844f924c8a0040b6d02/joblib-1.3.2-py3-none-any.whl (302 kB)\r\nCollecting threadpoolctl>=2.0.0 (from scikit-learn>=0.21.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/81/12/fd4dea011af9d69e1cad05c75f3f7202cdcbeac9b712eea58ca779a72865/threadpoolctl-3.2.0-py3-none-any.whl (15 kB)\r\nCollecting bce-python-sdk (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/4d/9c/fbaeeebdc341e88223faf7464ca38b31a428b5ad7503636393f7233d64aa/bce_python_sdk-0.8.95-py3-none-any.whl (240 kB)\r\nCollecting flask>=1.1.1 (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/36/42/015c23096649b908c809c69388a805a571a3bea44362fe87e33fc3afa01f/flask-3.0.0-py3-none-any.whl (99 kB)\r\nCollecting Flask-Babel>=3.0.0 (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/14/c2/e0ab5abe37882e118482884f2ec660cd06da644ddfbceccf5f88f546b574/flask_babel-4.0.0-py3-none-any.whl (9.6 kB)\r\nRequirement already satisfied: protobuf>=3.20.0 in /usr/local/lib/python3.10/dist-packages (from visualdl>=2.2.0->paddleclas==2.5.1) (4.23.2)\r\nRequirement already satisfied: requests in /usr/lib/python3/dist-packages (from visualdl>=2.2.0->paddleclas==2.5.1) (2.22.0)\r\nRequirement already satisfied: six>=1.14.0 in /usr/lib/python3/dist-packages (from visualdl>=2.2.0->paddleclas==2.5.1) (1.14.0)\r\nRequirement already satisfied: matplotlib in /usr/local/lib/python3.10/dist-packages (from visualdl>=2.2.0->paddleclas==2.5.1) (3.8.1)\r\nCollecting pandas (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/02/52/815f643ed3afb3365354548b3c8b557dbf926a65c40ad5b6d9e455147c7e/pandas-2.1.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.3 MB)\r\nRequirement already satisfied: packaging in /usr/local/lib/python3.10/dist-packages (from visualdl>=2.2.0->paddleclas==2.5.1) (23.1)\r\nCollecting rarfile (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/75/34/f06b7de74bcea328d8d7a950aad099c1100578cc3960ffc5a00d30ab511c/rarfile-4.1-py3-none-any.whl (28 kB)\r\nCollecting psutil (from visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/19/06/4e3fa3c1b79271e933c5ddbad3a48aa2c3d5f592a0fb7c037f3e0f619f4d/psutil-5.9.6-cp36-abi3-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (283 kB)\r\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.10/dist-packages (from prettytable->paddleclas==2.5.1) (0.2.6)\r\nCollecting Werkzeug>=3.0.0 (from flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c3/fc/254c3e9b5feb89ff5b9076a23218dafbc99c96ac5941e900b71206e6313b/werkzeug-3.0.1-py3-none-any.whl (226 kB)\r\nCollecting Jinja2>=3.1.2 (from flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/bc/c3/f068337a370801f372f2f8f6bad74a5c140f6fda3d9de154052708dd3c65/Jinja2-3.1.2-py3-none-any.whl (133 kB)\r\nCollecting itsdangerous>=2.1.2 (from flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/68/5f/447e04e828f47465eeab35b5d408b7ebaaaee207f48b7136c5a7267a30ae/itsdangerous-2.1.2-py3-none-any.whl (15 kB)\r\nRequirement already satisfied: click>=8.1.3 in /usr/local/lib/python3.10/dist-packages (from flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1) (8.1.7)\r\nCollecting blinker>=1.6.2 (from flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/fa/2a/7f3714cbc6356a0efec525ce7a0613d581072ed6eb53eb7b9754f33db807/blinker-1.7.0-py3-none-any.whl (13 kB)\r\nCollecting Babel>=2.12 (from Flask-Babel>=3.0.0->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/86/14/5dc2eb02b7cc87b2f95930310a2cc5229198414919a116b564832c747bc1/Babel-2.13.1-py3-none-any.whl (10.1 MB)\r\nCollecting pytz>=2022.7 (from Flask-Babel>=3.0.0->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/32/4d/aaf7eff5deb402fd9a24a1449a8119f00d74ae9c2efa79f8ef9994261fc2/pytz-2023.3.post1-py2.py3-none-any.whl (502 kB)\r\nCollecting pycryptodome>=3.8.0 (from bce-python-sdk->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/00/e6/73931df4046e34a6354d323b4a5b5c18e5184f4a08687806ee3353c81a6b/pycryptodome-3.19.0-cp35-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)\r\nCollecting future>=0.6.0 (from bce-python-sdk->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached future-0.18.3-py3-none-any.whl\r\nRequirement already satisfied: contourpy>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (1.2.0)\r\nRequirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (0.12.1)\r\nRequirement already satisfied: fonttools>=4.22.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (4.44.0)\r\nRequirement already satisfied: kiwisolver>=1.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (1.4.5)\r\nRequirement already satisfied: pyparsing>=2.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (3.1.1)\r\nRequirement already satisfied: python-dateutil>=2.7 in /usr/local/lib/python3.10/dist-packages (from matplotlib->visualdl>=2.2.0->paddleclas==2.5.1) (2.8.2)\r\nCollecting numpy<2.0,>=1.17.3 (from scikit-learn>=0.21.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/2d/5e/cb38e3d1916cc29880c84a9332a9122a8f49a7b57ec7aea63e0f678587a2/numpy-1.26.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)\r\nCollecting tzdata>=2022.1 (from pandas->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/d5/fb/a79efcab32b8a1f1ddca7f35109a50e4a80d42ac1c9187ab46522b2407d7/tzdata-2023.3-py2.py3-none-any.whl (341 kB)\r\nCollecting MarkupSafe>=2.0 (from Jinja2>=3.1.2->flask>=1.1.1->visualdl>=2.2.0->paddleclas==2.5.1)\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/12/b3/d9ed2c0971e1435b8a62354b18d3060b66c8cb1d368399ec0b9baa7c0ee5/MarkupSafe-2.1.3-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25 kB)\r\nBuilding wheels for collected packages: faiss-cpu\r\n  Building wheel for faiss-cpu (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  × python setup.py bdist_wheel did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [75 lines of output]\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss/faiss/python/swigfaiss.i to faiss/faiss/python/swigfaiss_wrap.cpp\r\n      swig -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWORDSIZE64 -o faiss/faiss/python/swigfaiss_wrap.cpp faiss/faiss/python/swigfaiss.i\r\n      faiss/faiss/python/swigfaiss.i:250: Error: Unable to find 'faiss/impl/platform_macros.h'\r\n      faiss/faiss/python/swigfaiss.i:254: Error: Unable to find 'faiss/utils/ordered_key_value.h'\r\n      faiss/faiss/python/swigfaiss.i:255: Error: Unable to find 'faiss/utils/Heap.h'\r\n      faiss/faiss/python/swigfaiss.i:260: Error: Unable to find 'faiss/utils/AlignedTable.h'\r\n      faiss/faiss/python/swigfaiss.i:261: Error: Unable to find 'faiss/utils/partitioning.h'\r\n      faiss/faiss/python/swigfaiss.i:262: Error: Unable to find 'faiss/utils/hamming.h'\r\n      faiss/faiss/python/swigfaiss.i:365: Error: Unable to find 'faiss/utils/utils.h'\r\n      faiss/faiss/python/swigfaiss.i:366: Error: Unable to find 'faiss/utils/distances.h'\r\n      faiss/faiss/python/swigfaiss.i:367: Error: Unable to find 'faiss/utils/random.h'\r\n      faiss/faiss/python/swigfaiss.i:369: Error: Unable to find 'faiss/MetricType.h'\r\n      faiss/faiss/python/swigfaiss.i:372: Error: Unable to find 'faiss/Index.h'\r\n      faiss/faiss/python/swigfaiss.i:373: Error: Unable to find 'faiss/Clustering.h'\r\n      faiss/faiss/python/swigfaiss.i:375: Error: Unable to find 'faiss/utils/extra_distances.h'\r\n      faiss/faiss/python/swigfaiss.i:379: Error: Unable to find 'faiss/impl/ProductQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:380: Error: Unable to find 'faiss/impl/AdditiveQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:381: Error: Unable to find 'faiss/impl/ResidualQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:382: Error: Unable to find 'faiss/impl/LocalSearchQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:384: Error: Unable to find 'faiss/VectorTransform.h'\r\n      faiss/faiss/python/swigfaiss.i:385: Error: Unable to find 'faiss/IndexPreTransform.h'\r\n      faiss/faiss/python/swigfaiss.i:386: Error: Unable to find 'faiss/IndexFlat.h'\r\n      faiss/faiss/python/swigfaiss.i:387: Error: Unable to find 'faiss/IndexRefine.h'\r\n      faiss/faiss/python/swigfaiss.i:388: Error: Unable to find 'faiss/IndexLSH.h'\r\n      faiss/faiss/python/swigfaiss.i:389: Error: Unable to find 'faiss/impl/PolysemousTraining.h'\r\n      faiss/faiss/python/swigfaiss.i:390: Error: Unable to find 'faiss/IndexPQ.h'\r\n      faiss/faiss/python/swigfaiss.i:391: Error: Unable to find 'faiss/IndexResidual.h'\r\n      faiss/faiss/python/swigfaiss.i:392: Error: Unable to find 'faiss/impl/io.h'\r\n      faiss/faiss/python/swigfaiss.i:394: Error: Unable to find 'faiss/invlists/InvertedLists.h'\r\n      faiss/faiss/python/swigfaiss.i:395: Error: Unable to find 'faiss/invlists/InvertedListsIOHook.h'\r\n      faiss/faiss/python/swigfaiss.i:397: Error: Unable to find 'faiss/invlists/BlockInvertedLists.h'\r\n      faiss/faiss/python/swigfaiss.i:398: Error: Unable to find 'faiss/invlists/DirectMap.h'\r\n      faiss/faiss/python/swigfaiss.i:401: Error: Unable to find 'faiss/IndexIVF.h'\r\n      faiss/faiss/python/swigfaiss.i:406: Error: Unable to find 'faiss/IVFlib.h'\r\n      faiss/faiss/python/swigfaiss.i:407: Error: Unable to find 'faiss/impl/ScalarQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:408: Error: Unable to find 'faiss/IndexScalarQuantizer.h'\r\n      faiss/faiss/python/swigfaiss.i:409: Error: Unable to find 'faiss/IndexIVFSpectralHash.h'\r\n      faiss/faiss/python/swigfaiss.i:410: Error: Unable to find 'faiss/impl/HNSW.h'\r\n      faiss/faiss/python/swigfaiss.i:411: Error: Unable to find 'faiss/IndexHNSW.h'\r\n      faiss/faiss/python/swigfaiss.i:414: Error: Unable to find 'faiss/impl/NNDescent.h'\r\n      faiss/faiss/python/swigfaiss.i:415: Error: Unable to find 'faiss/IndexNNDescent.h'\r\n      faiss/faiss/python/swigfaiss.i:417: Error: Unable to find 'faiss/IndexIVFFlat.h'\r\n      faiss/faiss/python/swigfaiss.i:418: Error: Unable to find 'faiss/impl/NSG.h'\r\n      faiss/faiss/python/swigfaiss.i:419: Error: Unable to find 'faiss/IndexNSG.h'\r\n      faiss/faiss/python/swigfaiss.i:424: Error: Unable to find 'faiss/invlists/OnDiskInvertedLists.h'\r\n      faiss/faiss/python/swigfaiss.i:427: Error: Unable to find 'faiss/impl/lattice_Zn.h'\r\n      faiss/faiss/python/swigfaiss.i:428: Error: Unable to find 'faiss/IndexLattice.h'\r\n      faiss/faiss/python/swigfaiss.i:431: Error: Unable to find 'faiss/IndexIVFPQ.h'\r\n      faiss/faiss/python/swigfaiss.i:432: Error: Unable to find 'faiss/IndexIVFPQR.h'\r\n      faiss/faiss/python/swigfaiss.i:433: Error: Unable to find 'faiss/Index2Layer.h'\r\n      faiss/faiss/python/swigfaiss.i:435: Error: Unable to find 'faiss/IndexPQFastScan.h'\r\n      faiss/faiss/python/swigfaiss.i:436: Error: Unable to find 'faiss/IndexIVFPQFastScan.h'\r\n      faiss/faiss/python/swigfaiss.i:437: Error: Unable to find 'faiss/utils/quantize_lut.h'\r\n      faiss/faiss/python/swigfaiss.i:439: Error: Unable to find 'faiss/IndexBinary.h'\r\n      faiss/faiss/python/swigfaiss.i:440: Error: Unable to find 'faiss/IndexBinaryFlat.h'\r\n      faiss/faiss/python/swigfaiss.i:441: Error: Unable to find 'faiss/IndexBinaryIVF.h'\r\n      faiss/faiss/python/swigfaiss.i:442: Error: Unable to find 'faiss/IndexBinaryFromFloat.h'\r\n      faiss/faiss/python/swigfaiss.i:443: Error: Unable to find 'faiss/IndexBinaryHNSW.h'\r\n      faiss/faiss/python/swigfaiss.i:444: Error: Unable to find 'faiss/IndexBinaryHash.h'\r\n      faiss/faiss/python/swigfaiss.i:446: Error: Unable to find 'faiss/impl/ThreadedIndex.h'\r\n      faiss/faiss/python/swigfaiss.i:450: Error: Unable to find 'faiss/IndexShards.h'\r\n      faiss/faiss/python/swigfaiss.i:454: Error: Unable to find 'faiss/IndexReplicas.h'\r\n      faiss/faiss/python/swigfaiss.i:458: Error: Unable to find 'faiss/MetaIndexes.h'\r\n      faiss/faiss/python/swigfaiss.i:473: Error: Unable to find 'faiss/impl/AuxIndexStructures.h'\r\n      faiss/faiss/python/swigfaiss.i:663: Error: Unable to find 'faiss/index_io.h'\r\n      faiss/faiss/python/swigfaiss.i:664: Error: Unable to find 'faiss/clone_index.h'\r\n      faiss/faiss/python/swigfaiss.i:668: Error: Unable to find 'faiss/AutoTune.h'\r\n      faiss/faiss/python/swigfaiss.i:669: Error: Unable to find 'faiss/index_factory.h'\r\n      faiss/faiss/python/swigfaiss.i:670: Error: Unable to find 'faiss/MatrixStats.h'\r\n      error: command '/usr/bin/swig' failed with exit code 1\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\n  Running setup.py clean for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects\r\n",
        "state": "closed",
        "user": "chang50961471",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-10T06:26:24+00:00",
        "updated_at": "2025-03-04T09:21:23+00:00",
        "closed_at": "2025-03-04T06:36:52+00:00",
        "comments_count": [
            "chang50961471",
            "cuicheng01",
            "xixixihaha",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3040,
        "title": "目标检测裁剪的图片进行分类预测时出现Error Message Summary错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. paddleclas==2.5.1        paddledet==0.0.0        paddlepaddle-gpu==2.5.2.post117\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.8\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n --------------------------------------\r\nC++ Traceback (most recent call last):\r\n--------------------------------------\r\n0   paddle_infer::Predictor::Predictor(paddle::AnalysisConfig const&)\r\n1   std::unique_ptr<paddle::PaddlePredictor, std::default_delete<paddle::PaddlePredictor> > paddle::CreatePaddlePredictor<paddle::AnalysisConfig, (paddle::PaddleEngineKind)2>(paddle::AnalysisConfig const&)\r\n2   paddle::AnalysisPredictor::Init(std::shared_ptr<paddle::framework::Scope> const&, std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n3   paddle::AnalysisPredictor::PrepareProgram(std::shared_ptr<paddle::framework::ProgramDesc> const&)\r\n4   paddle::AnalysisPredictor::OptimizeInferenceProgram()\r\n5   paddle::inference::analysis::Analyzer::RunAnalysis(paddle::inference::analysis::Argument*)\r\n6   paddle::inference::analysis::IrGraphBuildPass::RunImpl(paddle::inference::analysis::Argument*)\r\n\r\n----------------------\r\nError Message Summary:\r\n----------------------\r\nFatalError: `Segmentation fault` is detected by the operating system.\r\n  [TimeInfo: *** Aborted at 1700545549 (unix time) try \"date -d @1700545549\" if you are using GNU date ***]\r\n  [SignalInfo: *** SIGSEGV (@0x0) received by PID 2382912 (TID 0x7faf8d171700) from PID 0 ***]\r\n",
        "state": "closed",
        "user": "tammy-na",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-21T05:50:15+00:00",
        "updated_at": "2025-03-04T09:21:25+00:00",
        "closed_at": "2025-03-04T06:36:53+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3048,
        "title": "在PULC语种分类模型基础上训练成手写中文和印刷体中文的分类模型是否可行",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：paddle2.5.2  paddleclas2.5\r\n 2. 涉及的其他产品使用的版本号：paddleocr2.7\r\n\r\n\r\n在使用paddleocr的时候混合手写体和印刷体训练了一个ocr模型，但实际上印刷体的准确率有下降，现在想在ocr的检测模型和识别模型之间加一个分类模型，根据分类的类别是印刷体或手写体选择对应的识别模型。\r\n\r\n目前在PULC语种分类模型的基础上使用了一百多万的手写数据和印刷体数据，得到的模型效果是有的但不是特别好，不知道是否和背景有关，从某一张文档上截的文本行就会分类错误率很高。\r\n\r\n现在是有两个问题：\r\n1.以ocr识别模型的训练数据作为训练集，能否达成我想要的印刷体和手写体分类的效果？\r\n2.下面有几张数据样例，目前我手上的ocr识别模型的训练数据，由于是分开收集的开源数据，**印刷体数据的背景颜色明暗不一致，手写体数据的背景全是亮白色**。印刷体和手写体的训练数据的背景不一致是否影响分类模型的效果？\r\n![20436312_1683447152](https://github.com/PaddlePaddle/PaddleClas/assets/51530060/88de370c-8324-4aa4-9e9b-7ed946d69a2a)\r\n![20436421_2900540980](https://github.com/PaddlePaddle/PaddleClas/assets/51530060/3385adab-f576-4f8a-8f2d-c5f8036d00fd)\r\n![0](https://github.com/PaddlePaddle/PaddleClas/assets/51530060/c2ae90fc-4d34-414b-b942-d00a5a0c2935)\r\n![001-P16_0](https://github.com/PaddlePaddle/PaddleClas/assets/51530060/ece512c9-2f22-4f5e-8a13-87f9a1344fa1)\r\n",
        "state": "closed",
        "user": "TOMORINAONAO",
        "closed_by": "TOMORINAONAO",
        "created_at": "2023-11-27T01:29:28+00:00",
        "updated_at": "2024-01-19T01:09:06+00:00",
        "closed_at": "2024-01-19T01:09:03+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "question",
            "status/close",
            "PULC"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3044,
        "title": "文生图示例报错：raise errors.RequestLimitError(emsg, ecode=ecode) erniebot.errors.RequestLimitError: 并发超限",
        "body": "raise errors.RequestLimitError(emsg, ecode=ecode)\r\nerniebot.errors.RequestLimitError: 并发超限\r\n",
        "state": "closed",
        "user": "caojuan1997",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-22T10:59:14+00:00",
        "updated_at": "2025-03-04T09:21:28+00:00",
        "closed_at": "2025-03-04T06:36:54+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "Others"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3049,
        "title": "libcudart.so.11.0: cannot open shared object file: No such file or directory",
        "body": "记录一下：\r\nubuntu18.04\r\n解决方案：将以下代码添加到 ~/.bashrc 并source  ~/.bashrc更新\r\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:\"/home/user/anaconda3/envs/ppcls/lib\" (你的conda环境，确保该目录下有libcudart.so.11.0文件)\r\n\r\n分割线------------------------------------------------------------------------------------------------------------------\r\n补充：你的conda环境下envs/ppcls/lib，确保该目录下有libcudart.so.11.0文件，如果没有，可能是因为你是用pip安装的paddle-gpu，用conda安装paddle就会有这个文件。",
        "state": "closed",
        "user": "keepgoing365",
        "closed_by": "keepgoing365",
        "created_at": "2023-11-27T08:07:09+00:00",
        "updated_at": "2023-12-06T02:07:41+00:00",
        "closed_at": "2023-12-06T02:07:22+00:00",
        "comments_count": [
            "keepgoing365"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3051,
        "title": "AssertionError: We only support 'to_tensor()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode.",
        "body": "我在运行代码时遇到了这个问题，我不知道应该怎么解决。\r\n我的版本是：PaddlePaddle==2.3.2；Python=3.7.4\r\n我尝试在代码最开始添加“paddle.disable_static()”，但是也无济于事。\r\nfail to perform transform [<paddle.vision.transforms.transforms.Normalize object at 0x7fcd13455150>] with error: We only support 'to_tensor()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode. and stack:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 113, in __call__\r\n    data = f(data)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 269, in __call__\r\n    outputs.append(apply_func(inputs[i]))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 715, in _apply_image\r\n    self.to_rgb)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/functional.py\", line 674, in normalize\r\n    return F_t.normalize(img, mean, std, data_format)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/functional_tensor.py\", line 105, in normalize\r\n    mean = paddle.to_tensor(mean, place=img.place)\r\n  File \"<decorator-gen-163>\", line 2, in to_tensor\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 433, in __impl__\r\n    ), \"We only support '%s()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode.\" % func.__name__\r\nAssertionError: We only support 'to_tensor()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode.\r\n\r\nException in thread Thread-2:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/dataloader_iter.py\", line 218, in _thread_loop\r\n    self._thread_done_event)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dataloader/fetcher.py\", line 121, in fetch\r\n    data.append(self.dataset[idx])\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/datasets/cifar.py\", line 163, in __getitem__\r\n    image = self.transform(image)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 118, in __call__\r\n    raise e\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 113, in __call__\r\n    data = f(data)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 269, in __call__\r\n    outputs.append(apply_func(inputs[i]))\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/transforms.py\", line 715, in _apply_image\r\n    self.to_rgb)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/functional.py\", line 674, in normalize\r\n    return F_t.normalize(img, mean, std, data_format)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/vision/transforms/functional_tensor.py\", line 105, in normalize\r\n    mean = paddle.to_tensor(mean, place=img.place)\r\n  File \"<decorator-gen-163>\", line 2, in to_tensor\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/wrapped_decorator.py\", line 25, in __impl__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 433, in __impl__\r\n    ), \"We only support '%s()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode.\" % func.__name__\r\nAssertionError: We only support 'to_tensor()' in dynamic graph mode, please call 'paddle.disable_static()' to enter dynamic graph mode.",
        "state": "closed",
        "user": "Yukimini",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-04T16:33:56+00:00",
        "updated_at": "2025-03-04T09:21:32+00:00",
        "closed_at": "2025-03-04T06:36:56+00:00",
        "comments_count": [
            "cuicheng01",
            "Yukimini",
            "Yukimini",
            "cuicheng01",
            "Yukimini",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3053,
        "title": "FileNotFoundError: [Errno 2] No such file or directory: ./drink_dataset_v2.0/gallery/drink_label.txt",
        "body": "问题记录：\r\n-------------------------------------\r\n建索引库时，gallery文件夹下要放label文件 ./drink_dataset_v2.0/gallery/drink_label.txt\r\n格式如下:\r\n0/0.jpg\t脉动\r\n0/1.jpg\t脉动\r\n...\r\n所有图片名和lebel,分隔符为\\t\r\n",
        "state": "closed",
        "user": "keepgoing365",
        "closed_by": "keepgoing365",
        "created_at": "2023-12-06T02:03:33+00:00",
        "updated_at": "2023-12-06T02:12:10+00:00",
        "closed_at": "2023-12-06T02:05:57+00:00",
        "comments_count": [
            "keepgoing365"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3050,
        "title": "follow quick_start_classification_professional.md train distill model fail",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n## PaddleClas release/2.3 PaddlePaddle 2.3.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n## No\r\n3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n \r\n## Docker image: paddlecloud/paddleclas:2.3-gpu-cuda11.2-cudnn8-latest\r\n\r\n4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n## No\r\nfollow the docs/zh_CN/quick_start/quick_start_classification_professional.md train the distill model but the top1 only 0.01\r\npython3 -m paddle.distributed.launch \\\r\n    --gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/quick_start/professional/R50_vd_distill_MV3_large_x1_0_CIFAR100.yaml \\\r\n        -o Global.output_dir=\"output_CIFAR\"\r\n\r\nTry to change the Optimizer.lr.learning_rate=0.01, but the same result. \r\n\r\nThe latest train log \r\n====================\r\n[2023/11/29 10:06:05] ppcls INFO: [Train][Epoch 100/100][Avg]top1: 0.01000, top5: 0.03776, CELoss_Student_Teacher: nan, loss: nan\r\n[2023/11/29 10:06:06] ppcls INFO: [Eval][Epoch 100][Iter: 0/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.35142s, reader_cost: 0.29173, ips: 182.11954 images/sec\r\n[2023/11/29 10:06:06] ppcls INFO: [Eval][Epoch 100][Iter: 10/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04212s, reader_cost: 0.00012, ips: 1519.46605 images/sec\r\n[2023/11/29 10:06:06] ppcls INFO: [Eval][Epoch 100][Iter: 20/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04256s, reader_cost: 0.00011, ips: 1503.58581 images/sec\r\n[2023/11/29 10:06:07] ppcls INFO: [Eval][Epoch 100][Iter: 30/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04251s, reader_cost: 0.00011, ips: 1505.49286 images/sec\r\n[2023/11/29 10:06:07] ppcls INFO: [Eval][Epoch 100][Iter: 40/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04235s, reader_cost: 0.00011, ips: 1511.16876 images/sec\r\n[2023/11/29 10:06:08] ppcls INFO: [Eval][Epoch 100][Iter: 50/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04373s, reader_cost: 0.00012, ips: 1463.68354 images/sec\r\n[2023/11/29 10:06:08] ppcls INFO: [Eval][Epoch 100][Iter: 60/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04337s, reader_cost: 0.00011, ips: 1475.82858 images/sec\r\n[2023/11/29 10:06:09] ppcls INFO: [Eval][Epoch 100][Iter: 70/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04312s, reader_cost: 0.00011, ips: 1484.06229 images/sec\r\n[2023/11/29 10:06:09] ppcls INFO: [Eval][Epoch 100][Iter: 80/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04318s, reader_cost: 0.00011, ips: 1482.25883 images/sec\r\n[2023/11/29 10:06:09] ppcls INFO: [Eval][Epoch 100][Iter: 90/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04329s, reader_cost: 0.00011, ips: 1478.36561 images/sec\r\n[2023/11/29 10:06:10] ppcls INFO: [Eval][Epoch 100][Iter: 100/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04332s, reader_cost: 0.00011, ips: 1477.29185 images/sec\r\n[2023/11/29 10:06:10] ppcls INFO: [Eval][Epoch 100][Iter: 110/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04345s, reader_cost: 0.00011, ips: 1472.94545 images/sec\r\n[2023/11/29 10:06:11] ppcls INFO: [Eval][Epoch 100][Iter: 120/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.01562, batch_cost: 0.04338s, reader_cost: 0.00011, ips: 1475.45486 images/sec\r\n[2023/11/29 10:06:11] ppcls INFO: [Eval][Epoch 100][Iter: 130/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04326s, reader_cost: 0.00011, ips: 1479.37751 images/sec\r\n[2023/11/29 10:06:12] ppcls INFO: [Eval][Epoch 100][Iter: 140/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04316s, reader_cost: 0.00012, ips: 1482.68761 images/sec\r\n[2023/11/29 10:06:12] ppcls INFO: [Eval][Epoch 100][Iter: 150/157]CELoss_Student: nan, loss: nan, top1: 0.00000, top5: 0.00000, batch_cost: 0.04314s, reader_cost: 0.00011, ips: 1483.66894 images/sec\r\n[2023/11/29 10:06:12] ppcls INFO: [Eval][Epoch 100][Avg]CELoss_Student: nan, loss: nan, top1: 0.01000, top5: 0.03890\r\n[2023/11/29 10:06:12] ppcls INFO: [Eval][Epoch 100][best metric: 0.01]\r\n[2023/11/29 10:06:13] ppcls INFO: Already save model in output_CIFAR/DistillationModel/epoch_100\r\n[2023/11/29 10:06:14] ppcls INFO: Already save model in output_CIFAR/DistillationModel/latest\r\n\r\n\r\n",
        "state": "closed",
        "user": "RobinChiu",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-11-30T08:03:05+00:00",
        "updated_at": "2025-03-04T09:21:29+00:00",
        "closed_at": "2025-03-04T06:36:55+00:00",
        "comments_count": [
            "RobinChiu",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3056,
        "title": "训练自己的模型后（4类），部署预测的时候会出现大于4个类别导致错误。",
        "body": "1. PaddleClas release/2.5 PaddlePaddle 2.4.2\r\n2. 我参考的是python推理部署的文档，对里面做了一些修改，https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/deployment/image_classification/python.md#1\r\n3. 首先我用PULC 含文字图像方向分类模型这个数据集进行训练，一共4个类，0、90、180、270，然后用PPLCNet_x0_5预训练模型训练了一版，然后export_model.py转换成inference模型了。\r\n4. 然后我对 deploy/python/predict_cls.py的代码进行了一些更改，把它做成了一个flask接口形式的server，然后把它放到docker里，做成一个服务。\r\n\r\n```\r\nimport os\r\nimport cv2\r\nimport logging\r\nimport time\r\nimport shutil\r\nimport numpy as np\r\nfrom minio import Minio\r\nfrom minio.error import S3Error\r\nfrom flask import Flask, request, jsonify\r\n\r\nfrom paddleclas.deploy.utils import logger, config\r\nfrom paddleclas.deploy.utils.predictor import Predictor\r\nfrom paddleclas.deploy.utils.get_image_list import get_image_list\r\nfrom paddleclas.deploy.python.preprocess import create_operators\r\nfrom paddleclas.deploy.python.postprocess import build_postprocess\r\n\r\ncur_dir = os.path.dirname(os.path.realpath(__file__))\r\nconfigs_dir = os.path.join(cur_dir, 'configs')\r\ndata_dir = os.path.join(cur_dir, 'data')\r\nmodels_dir = os.path.join(cur_dir, 'export_model')\r\n\r\ndef generate_logger(name):\r\n    logger = logging.getLogger(name)\r\n    logger.propagate = False\r\n    if not logger.handlers:\r\n        logger.setLevel(level = logging.DEBUG)\r\n        formatter = logging.Formatter(\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\")\r\n        stream_handler = logging.StreamHandler()\r\n        stream_handler.setFormatter(formatter)\r\n        logger.addHandler(stream_handler)    \r\n    return logger\r\n\r\nlogger = generate_logger('predict')\r\napp = Flask(__name__)\r\n\r\nclass ClsPredictor(Predictor):\r\n    def __init__(self, config):\r\n        super().__init__(config[\"Global\"])\r\n\r\n        self.preprocess_ops = []\r\n        self.postprocess = None\r\n        if \"PreProcess\" in config:\r\n            if \"transform_ops\" in config[\"PreProcess\"]:\r\n                self.preprocess_ops = create_operators(config[\"PreProcess\"][\r\n                    \"transform_ops\"])\r\n        if \"PostProcess\" in config:\r\n            self.postprocess = build_postprocess(config[\"PostProcess\"])\r\n\r\n        # for whole_chain project to test each repo of paddle\r\n        self.benchmark = config[\"Global\"].get(\"benchmark\", False)\r\n        if self.benchmark:\r\n            import auto_log\r\n            import os\r\n            pid = os.getpid()\r\n            size = config[\"PreProcess\"][\"transform_ops\"][1][\"CropImage\"][\r\n                \"size\"]\r\n            if config[\"Global\"].get(\"use_int8\", False):\r\n                precision = \"int8\"\r\n            elif config[\"Global\"].get(\"use_fp16\", False):\r\n                precision = \"fp16\"\r\n            else:\r\n                precision = \"fp32\"\r\n            self.auto_logger = auto_log.AutoLogger(\r\n                model_name=config[\"Global\"].get(\"model_name\", \"cls\"),\r\n                model_precision=precision,\r\n                batch_size=config[\"Global\"].get(\"batch_size\", 1),\r\n                data_shape=[3, size, size],\r\n                save_path=config[\"Global\"].get(\"save_log_path\",\r\n                                               \"./auto_log.log\"),\r\n                inference_config=self.config,\r\n                pids=pid,\r\n                process_name=None,\r\n                gpu_ids=None,\r\n                time_keys=[\r\n                    'preprocess_time', 'inference_time', 'postprocess_time'\r\n                ],\r\n                warmup=2)\r\n\r\n    def predict(self, images):\r\n        use_onnx = self.args.get(\"use_onnx\", False)\r\n        if not use_onnx:\r\n            input_names = self.predictor.get_input_names()\r\n            input_tensor = self.predictor.get_input_handle(input_names[0])\r\n\r\n            output_names = self.predictor.get_output_names()\r\n            output_tensor = self.predictor.get_output_handle(output_names[0])\r\n        else:\r\n            input_names = self.predictor.get_inputs()[0].name\r\n            output_names = self.predictor.get_outputs()[0].name\r\n\r\n        if self.benchmark:\r\n            self.auto_logger.times.start()\r\n        if not isinstance(images, (list, )):\r\n            images = [images]\r\n        for idx in range(len(images)):\r\n            for ops in self.preprocess_ops:\r\n                images[idx] = ops(images[idx])\r\n        image = np.array(images)\r\n        if self.benchmark:\r\n            self.auto_logger.times.stamp()\r\n    \r\n        if not use_onnx:\r\n            input_tensor.copy_from_cpu(image)\r\n            self.predictor.run()\r\n            batch_output = output_tensor.copy_to_cpu()\r\n        else:\r\n            batch_output = self.predictor.run(\r\n                output_names=[output_names],\r\n                input_feed={input_names: image})[0]\r\n\r\n        if self.benchmark:\r\n            self.auto_logger.times.stamp()\r\n        \r\n        if self.postprocess is not None:\r\n            batch_output = self.postprocess(batch_output)\r\n        \r\n        if self.benchmark:\r\n            self.auto_logger.times.end(stamp=True)\r\n        return batch_output\r\n\r\n\r\n# 下载文件\r\ndef download_file(in_model_dict):\r\n    logger.info('Connecting to the Object Storage Service...')\r\n    minioClient = Minio(endpoint=in_model_dict['endpoint'],\r\n                        access_key=in_model_dict['accessKey'],\r\n                        secret_key=in_model_dict['secretKey'],\r\n                        secure=False)\r\n\r\n    logger.info('Downloading the file...')\r\n    minioClient.fget_object(bucket_name=in_model_dict['bucket'],\r\n                            object_name=in_model_dict['object_name'],\r\n                            file_path=in_model_dict['file_path'])\r\n\r\n# 单标签的处理\r\ndef process_one_label(input_file, output_file):\r\n    with open(input_file, 'r') as f:\r\n            lines = f.readlines()\r\n            \r\n    with open(output_file, 'w') as f:\r\n        for idx, line in enumerate(lines):\r\n            label = line.strip()\r\n            converted_line = f\"{idx} {label}\\n\"\r\n            f.write(converted_line)\r\n\r\nlabel_path = os.path.join(cur_dir, 'label.txt')\r\nupdated_label = os.path.join(cur_dir, 'updated_label.txt')\r\nprocess_one_label(label_path, updated_label)\r\n\r\nconfig_path = os.path.join(configs_dir, 'inference_cls.yaml')\r\nconfig = config.get_config(config_path)    \r\ncls_predictor = ClsPredictor(config)\r\n\r\n@app.route('/deploy/cv/clas', methods=['POST'])\r\ndef predict():\r\n    logger.info('---------- Clas Prediction -------------')\r\n    results = {\"results\":[], \"code\": -1, \"msg\": \"\"}\r\n    \r\n    # 读取图像地址\r\n    try:\r\n        image_minio = request.json[\"image_minio\"]\r\n        logger.info('image_minio: {}'.format(image_minio))\r\n    except Exception as e:\r\n        results[\"msg\"] = 'Error happened in param image_minio. {}'.format(e)\r\n        logger.error(e)\r\n        return jsonify(results)\r\n    \r\n    # 下载图像\r\n    try:        \r\n        image_minio[\"file_path\"] = \"{}{}\".format(data_dir, image_minio[\"object_name\"])\r\n        download_file(image_minio)\r\n        \r\n        image_path = image_minio[\"file_path\"]\r\n        logger.info(\"image_path: {}\".format(image_path))\r\n    except S3Error as e:\r\n        results[\"msg\"] = 'Error happened in loading model. {}'.format(e)\r\n        logger.error(e)\r\n        return jsonify(results)\r\n    \r\n    \r\n    logger.info('Start predict')\r\n    try:\r\n        image_list = get_image_list(image_path)\r\n        print(image_list)\r\n        \r\n        batch_imgs = []\r\n        batch_names = []\r\n        cnt = 0\r\n        predictions = []\r\n        \r\n        for idx, img_path in enumerate(image_list):\r\n            img = cv2.imread(img_path)\r\n            if img is None:\r\n                logger.warning(\r\n                    \"Image file failed to read and has been skipped. The path: {}\".\r\n                    format(img_path))\r\n            else:\r\n                img = img[:, :, ::-1]\r\n                batch_imgs.append(img)\r\n                img_name = os.path.basename(img_path)\r\n                batch_names.append(img_name)\r\n                cnt += 1\r\n            if cnt % config[\"Global\"][\"batch_size\"] == 0 or (idx + 1) == len(image_list):\r\n                if len(batch_imgs) == 0:\r\n                    continue\r\n                \r\n                batch_results = cls_predictor.predict(batch_imgs)\r\n                \r\n                for number, result_dict in enumerate(batch_results):\r\n\r\n                    filename = batch_names[number]\r\n                    label_names = result_dict[\"label_names\"]\r\n                    scores = [float(score) for score in result_dict[\"scores\"]]\r\n                    predict_dict = {}\r\n                    predict_dict = {\"file_name\": filename,\r\n                                   \"labels_name\": label_names,\r\n                                   \"scores\": scores}\r\n                    predictions.append(predict_dict)\r\n                          \r\n                batch_imgs = []\r\n                batch_names = []\r\n   \r\n        # 删除图片文件\r\n        os.remove(image_path)\r\n        results[\"results\"] = predictions\r\n        results[\"code\"] = 0\r\n        results[\"msg\"] = \"Finish Predicting\"\r\n        logger.info(\"results: {}\".format(results))\r\n        logger.info('Finish predicting')\r\n        return jsonify(results)\r\n        \r\n    except Exception as e:\r\n        results[\"msg\"] = 'Error happened in predicting. {}'.format(e)\r\n        logger.error(e)\r\n        return jsonify(results)\r\n    \r\n# 启动应用程序\r\nif __name__ == '__main__':\r\n    app.run(host=\"0.0.0.0\", port=19000)\r\n\r\n```\r\n\r\n5. 然后config文件inference_cls.yaml，如下所示：\r\n\r\n```\r\nGlobal:\r\n  infer_imgs: \"./images\"\r\n  inference_model_dir: \"./export_model\"\r\n  batch_size: 1\r\n  use_gpu: False\r\n  enable_mkldnn: True\r\n  cpu_num_threads: 10\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 0.00392157\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: \"\"\r\n        channel_num: 3\r\n    - ToCHWImage:\r\n\r\nPostProcess:\r\n  main_indicator: Topk\r\n  Topk:\r\n    topk: 5\r\n    class_id_map_file: \"./updated_label.txt\"\r\n  SavePreLabel:\r\n    save_dir: ./pre_dir\r\n\r\n```\r\n\r\n6. 我把PostProcess.Topk.class_id_map_file这个文件改成了我自己的label文件，如下所示：\r\n\r\n```\r\n0 0\r\n1 90\r\n2 180\r\n3 270\r\n```\r\n\r\n7. 代码运行后就报错，就是报错一个517的类别，但我训练一共就4个类别啊？？\r\n```\r\n2023-12-07 14:14:34,181 - predict - ERROR - 517\r\n```\r\n\r\n8. 我把PostProcess.Topk.class_id_map_file这个改成默认的imagenet1k_label_list.txt这个文件，然后就可以出结果了，我用postman调的结果：\r\n\r\n```\r\n{\r\n    \"code\": 0,\r\n    \"msg\": \"Finish Predicting\",\r\n    \"results\": [\r\n        {\r\n            \"file_name\": \"img_rot90_10.jpg\",\r\n            \"labels_name\": [\r\n                \"crane\",\r\n                \"sunglass\",\r\n                \"gyromitra\",\r\n                \"vase\",\r\n                \"albatross, mollymawk\"\r\n            ],\r\n            \"scores\": [\r\n                0.00166,\r\n                0.00165,\r\n                0.00161,\r\n                0.00157,\r\n                0.00156\r\n            ]\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n9. 所以这是哪里出了问题？？？训练我是直接通过tools/train.py来进行训练的，Arch.class_num=4我也设为4了，训练命令如下：\r\n\r\n```\r\npython train.py         \r\n-c ./configs/PPLCNet/PPLCNet_x0_5.yaml         \r\n-o Global.output_dir=./models\\cv_image_classification_onelabel_test_clas        \r\n -o Global.pretrained_model=../../pretrained_model/cv/image_classification/PPLCNet/PPLCNet_x0_5_pretrained         \r\n-o Global.device=cpu         \r\n-o Global.epochs=100         \r\n-o Global.save_interval=9999999         \r\n-o Optimizer.lr.learning_rate=0.005         \r\n-o Arch.class_num=4         \r\n-o DataLoader.Train.dataset.name=ImageNetDataset         \r\n-o DataLoader.Eval.dataset.name=ImageNetDataset         \r\n-o DataLoader.Eval.dataset.image_root=./datasets\\test_clas         \r\n-o DataLoader.Eval.dataset.cls_label_path=./datasets\\test_clas\\dev.txt         \r\n-o DataLoader.Eval.sampler.batch_size=8         \r\n-o DataLoader.Train.sampler.batch_size=8         \r\n-o DataLoader.Train.dataset.image_root=./datasets\\test_clas         \r\n-o DataLoader.Train.dataset.cls_label_path=./datasets\\test_clas\\train.txt \r\n```\r\n",
        "state": "closed",
        "user": "MooTong123",
        "closed_by": "MooTong123",
        "created_at": "2023-12-07T06:26:17+00:00",
        "updated_at": "2023-12-07T08:25:06+00:00",
        "closed_at": "2023-12-07T08:23:05+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3054,
        "title": "请问在公开的各个模型在imagenet1k数据集上的top1准确率和Latency、flops、params数据中，能添加CLIP_vit_base_patch16_224模型吗",
        "body": "你好，请问在公开的各个模型在imagenet1k数据集上的top1准确率和Latency、flops、params数据中，为什么没有CLIP_vit_base_patch16_224模型呢，请问能加上吗？公开的网址是https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/ImageNet1k/model_list.md#PPHGNet\r\n",
        "state": "closed",
        "user": "Laurazlj",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-06T16:29:03+00:00",
        "updated_at": "2025-03-04T09:21:33+00:00",
        "closed_at": "2025-03-04T06:36:57+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question",
            "Feature request"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3063,
        "title": "ValueError: all input arrays must have the same shape",
        "body": "实验证明，配置文件中的Train: 数据增强会导致这个问题，注释掉就正常训练了，记录一下。\r\n- RandCropImageV2:\r\n    size: [102,256]",
        "state": "closed",
        "user": "keepgoing365",
        "closed_by": "keepgoing365",
        "created_at": "2023-12-19T12:39:37+00:00",
        "updated_at": "2023-12-19T12:41:19+00:00",
        "closed_at": "2023-12-19T12:41:08+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3058,
        "title": "nativesetAddGallery参数问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.5和Paddle Lite v2_10\r\n 2. 环境信息：\r\n  a. 具体操作系统，Android、荣耀20\r\n  b.运行项目: shitu_android_demo\r\n  c.改动: 只改动一些java布局文件和在cpp中添加一些注释标识，核心代码未改动。\r\n 3. 具体描述\r\n shitu_android_demo中的nativesetAddGallery参数，flag使用的是Boolean类型。\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/e57527b4-6957-455f-9994-9d5863911309)\r\n但在应用中使用的是int类型？\r\n![1702374924244](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/755836ef-26b7-4122-acc2-4f8c165e69bc)\r\n\r\n![1702374860808](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/a5dd7be7-d251-426e-af6d-28a065b54440)\r\n而在cpp文件使用的是booleam类型去判断？\r\n![1702375073840](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/c0855395-5939-4e13-80c3-70852ab2e267)\r\n 4.问题\r\n  -这个是怎么判断成功的？\r\n  -进行物体加库操作时，填写了label标签，再次对该物体进行识别，会显示original.txt文件内容数量加1的数字（文件内容最大是986，加库后显示987）而不是我填写的label标签？再次添加会以此类推 ，以下图片就是之前加库后再识别显示的991\r\n![1702375962808](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/08e23b4f-d635-40c4-a18c-6219b54a8e7e)\r\n![1702376428094](https://github.com/PaddlePaddle/PaddleClas/assets/80271173/bed4bc7e-d475-45e4-a7b1-37669115196a)\r\n",
        "state": "open",
        "user": "dlaoy",
        "closed_by": null,
        "created_at": "2023-12-12T10:21:44+00:00",
        "updated_at": "2024-09-20T06:18:31+00:00",
        "closed_at": null,
        "comments_count": [
            "HydrogenSulfate",
            "dlaoy",
            "HydrogenSulfate",
            "dlaoy",
            "dlaoy"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3059,
        "title": "could not execute a primitive",
        "body": " 1.paddlepaddle-gpu== 2.2.2\r\n2.python==3.8.5\r\n3.cuda/10.2\r\n4.执行self.paddle_predictor.run() 出错：could not execute a primitive\r\n5.将enable_mkldnn  设置为False,不再出错，但是时间推理时间增加\r\n6.该如何在不出错的情况下提速\r\n![微信图片_20231213105141](https://github.com/PaddlePaddle/PaddleClas/assets/32634125/76fbce2b-f9d0-422c-812e-9cc4a0216017)\r\n\r\n",
        "state": "closed",
        "user": "chaobeiying",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-13T02:52:07+00:00",
        "updated_at": "2025-03-04T09:21:35+00:00",
        "closed_at": "2025-03-04T06:36:57+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3060,
        "title": "图像方向分类模型微调训练效果较差如何改进",
        "body": " \r\n使用 [PULC 含文字图像方向分类模型](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_text_image_orientation.md)\r\n方案，对1w张pdf图像做微调训练后，发现效果比较差\r\n数据集： 收集的1w张pdf论文图像，并作四个角度的旋转得到四个方向各1万张数据\r\n预训练模型： PULC含文字图像方向分类模型\r\n ",
        "state": "closed",
        "user": "justcodew",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-14T03:27:10+00:00",
        "updated_at": "2025-03-04T09:21:37+00:00",
        "closed_at": "2025-03-04T06:36:58+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "help wanted",
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3064,
        "title": "paddleserving 是不是版本都很老？11.2以后得cuda都没了？",
        "body": "paddleserving 预编译和docker的版本都比较老，没有更新的了吗？\r\n\r\n现在自己要部署，要通过什么形式？（尝试了python调用，serving好像都不行）\r\n也没有看到自己如果用新的方式自己制作镜像，是不是2.5.2支持的serving都没有了？",
        "state": "closed",
        "user": "heyiconan",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-20T02:35:12+00:00",
        "updated_at": "2025-03-04T09:21:39+00:00",
        "closed_at": "2025-03-04T06:36:59+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3065,
        "title": "使用PaddleClas训练一个3分类模型，测试集top1到1,实际使用时精度会差一些，许多没有识别正确",
        "body": "使用PaddleClas训练了100轮，导出的最优模型在实际应用中识别率不高。我先前使用这个参数训练了一段时间（没有跑完，终止训练程序），导出了一个最优模型应用识别率比较高，这个比较高的没有跑到100轮。我设置100轮是不是过拟合了，请问我怎么才能设置具体的epochs这个值，能保证训练不过拟合，导出的是最优的模型。\r\n具体环境信息如下：\r\n 1. PaddleClas develop\r\n 2. PaddleInference 2.4.2\r\n 3. 训练环境信息：\r\n  a. 操作系统Linux ubuntu 20.04\r\n  b. Python 3.8\r\n  c. CUDA/cuDNN版本， 如CUDA12.0\r\n 4. 训练yaml文件内容\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 10\r\n  use_visualdl: True\r\n  image_shape: [3, 32, 32]\r\n  save_inference_dir: ./inference\r\n  to_static: False\r\n  use_dali: False\r\n\r\n\r\nArch:\r\n  name: PPHGNet_small\r\n  class_num: 3\r\n \r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.5\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00004\r\n\r\n\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: /workspace2/yyc/OCR_data/score_marking/data\r\n      cls_label_path: /workspace2/yyc/OCR_data/score_marking/label/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [32, 32]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 128\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 16\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: /workspace2/yyc/OCR_data/score_marking/data\r\n      cls_label_path: /workspace2/yyc/OCR_data/score_marking/label/val.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [32, 32]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 128\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 16\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: /workspace2/yyc/OCR_data/score_marking/test\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        size: [32, 32]\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 2\r\n    class_id_map_file: ppcls/utils/PULC_label_list/marking_symbols_label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 2]\r\n\r\n 6. 对如下图片做3分类\r\n \r\n\r\n",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-20T07:08:10+00:00",
        "updated_at": "2025-03-04T09:21:41+00:00",
        "closed_at": "2025-03-04T06:37:00+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3067,
        "title": "分类模型转换onnx后推理结果与直接paddle推理结果差别比较大",
        "body": "将[PULC模型库](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/model_list.md)中的文字行方向分类模型转换成onnx，使用链接中的推理模型。\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/107862224/e48bbd04-f6dd-4d1f-9608-5bc5d49811ed)\r\n\r\n转换onnx脚本：\r\n\r\n    python  tools/export_model.py  -c ./ppcls/configs/PULC/textline_orientation/PPLCNet_x1_0.yaml -o Global.checkpoints=./textline_orientation_infer/inference \r\n    \r\n    paddle2onnx --model_dir .inference --model_filename inference.pdmodel --params_filename inference.pdiparams --save_file textline_orientation.onnx --opset_version 11 --enable_onnx_checker True\r\n\r\n推理代码：\r\n\r\n\r\n\r\n\r\n\r\n\r\n    import onnxruntime as ort\r\n    import numpy as np\r\n    import cv2\r\n    import glob\r\n    import os\r\n  \r\n  \r\n    angle_list = ['0_degree', '180_degree']\r\n     \r\n    def preproc(img, input_size):\r\n  \r\n          img = img[:, :, ::-1] #BGR to RGB\r\n          img = cv2.resize(img, input_size,interpolation=1) #unified resize   \r\n          mean = [0.485, 0.456, 0.406]\r\n          std = [0.229, 0.224, 0.225]\r\n          mean = np.array(mean).reshape((1, 1, 3)).astype('float32') #broadcast\r\n          std = np.array(std).reshape((1, 1, 3)).astype('float32')   #broadcast\r\n          img = (img.astype('float32') * np.float32(1.0/255.0) - mean) / std #normalize scale:1.0/255.0\r\n          img = img.transpose(2, 0, 1).astype('float32') #whc to chw\r\n      \r\n          return img\r\n\r\n    def get_angle(ort_sess,img_path):\r\n    \r\n          x = cv2.imdecode(np.fromfile(img_path,dtype=np.uint8),1)  \r\n          x = preproc(x, (160,80)) #w,h\r\n          x = x.reshape(1,3,80,160) #batch1\r\n      \r\n          outputs = ort_sess.run(None, {'x': x})\r\n          res = outputs[0][0]\r\n          angle = angle_list[np.argmax(res)]\r\n          print('res,angle ',res,angle)\r\n      \r\n          return  np.argmax(res)\r\n\r\n\r\n\r\n      if __name__ == \"__main__\":\r\n  \r\n          onnx_path = r'textline_orientation.onnx'\r\n          ort_sess = ort.InferenceSession(onnx_path,providers=[ 'CPUExecutionProvider'])\r\n          src_dir = r'./data/ort_line_data'\r\n          files =  glob.glob(src_dir+'/*.jpg') + glob.glob(src_dir+'/*.png')\r\n          for i in range(0,len(files)):\r\n              img_path = files[i]\r\n              angle = get_angle(ort_sess,img_path)\r\n\r\n \r\n测试数据：\r\n[PULC 快速体验数据](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/quick_start/PULC.md)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/107862224/f2bed4f9-a99d-44df-ba81-953d78d64229)\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/107862224/59e0dc68-2db4-42be-9842-c0d8ca61e3d4)\r\n\r\n4张图 onnx 输出结果\r\n\r\nres,angle  [0.07300492 0.92699504] 180_degree\r\nres,angle  [0.0833722  0.91662776] 180_degree\r\nres,angle  [0.09312499 0.90687495] 180_degree\r\nres,angle  [0.03547611 0.9645239 ] 180_degree\r\n\r\n而paddle直接推理的结果是正确的：\r\npaddleclas --model_name=textline_orientation --infer_imgs=./data\r\nppcls INFO: class_ids: [1], scores: [1.0], label_names: ['180_degree']\r\nppcls INFO: class_ids: [0], scores: [1.0], label_names: ['0_degree']\r\nppcls INFO: class_ids: [1], scores: [1.0], label_names: ['180_degree']\r\nppcls INFO: class_ids: [0], scores: [1.0], label_names: ['0_degree']\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "state": "open",
        "user": "justcodew",
        "closed_by": null,
        "created_at": "2023-12-20T09:27:29+00:00",
        "updated_at": "2024-12-11T10:31:03+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "Ruanlt",
            "LiManshiang",
            "LiManshiang"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3068,
        "title": "问题反馈：安装paddleclas包失败",
        "body": "问题：安装paddleclas包失败，第一次报错没有swig,安装swig后仍然报错\r\n\r\n环境：Windows 10/Python 3.10.12/paddlepaddle 2.5.2/paddleocr 2.7.0.3\r\n\r\n报错：  \r\nBuilding wheel for faiss-cpu (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × python setup.py bdist_wheel did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [84 lines of output]\r\n      D:\\Anaconda\\envs\\paddle_env\\lib\\site-packages\\setuptools\\__init__.py:84: _DeprecatedInstaller: setuptools.installer and fetch_build_eggs are deprecated.\r\n      !!\r\n\r\n              ********************************************************************************\r\n              Requirements should be satisfied by a PEP 517 installer.\r\n              If you are using pip, you can try `pip install --use-pep517`.\r\n              ********************************************************************************\r\n\r\n      !!\r\n        dist.fetch_build_eggs(dist.setup_requires)\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss\\faiss\\python\\swigfaiss.i to faiss\\faiss\\python\\swigfaiss_wrap.cpp\r\n      swig.exe -python -c++ -Doverride= -I/usr/local/include -Ifaiss -DSWIGWIN -o faiss\\faiss\\python\\swigfaiss_wrap.cpp faiss\\faiss\\python\\swigfaiss.i\r\n      faiss\\faiss\\python\\swigfaiss.i(250) : Error: Unable to find 'faiss\\impl\\platform_macros.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(254) : Error: Unable to find 'faiss\\utils\\ordered_key_value.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(255) : Error: Unable to find 'faiss\\utils\\Heap.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(260) : Error: Unable to find 'faiss\\utils\\AlignedTable.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(261) : Error: Unable to find 'faiss\\utils\\partitioning.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(262) : Error: Unable to find 'faiss\\utils\\hamming.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(365) : Error: Unable to find 'faiss\\utils\\utils.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(366) : Error: Unable to find 'faiss\\utils\\distances.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(367) : Error: Unable to find 'faiss\\utils\\random.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(369) : Error: Unable to find 'faiss\\MetricType.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(372) : Error: Unable to find 'faiss\\Index.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(373) : Error: Unable to find 'faiss\\Clustering.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(375) : Error: Unable to find 'faiss\\utils\\extra_distances.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(379) : Error: Unable to find 'faiss\\impl\\ProductQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(380) : Error: Unable to find 'faiss\\impl\\AdditiveQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(381) : Error: Unable to find 'faiss\\impl\\ResidualQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(382) : Error: Unable to find 'faiss\\impl\\LocalSearchQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(384) : Error: Unable to find 'faiss\\VectorTransform.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(385) : Error: Unable to find 'faiss\\IndexPreTransform.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(386) : Error: Unable to find 'faiss\\IndexFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(387) : Error: Unable to find 'faiss\\IndexRefine.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(388) : Error: Unable to find 'faiss\\IndexLSH.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(389) : Error: Unable to find 'faiss\\impl\\PolysemousTraining.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(390) : Error: Unable to find 'faiss\\IndexPQ.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(391) : Error: Unable to find 'faiss\\IndexResidual.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(392) : Error: Unable to find 'faiss\\impl\\io.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(394) : Error: Unable to find 'faiss\\invlists\\InvertedLists.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(395) : Error: Unable to find 'faiss\\invlists\\InvertedListsIOHook.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(397) : Error: Unable to find 'faiss\\invlists\\BlockInvertedLists.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(398) : Error: Unable to find 'faiss\\invlists\\DirectMap.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(401) : Error: Unable to find 'faiss\\IndexIVF.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(406) : Error: Unable to find 'faiss\\IVFlib.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(407) : Error: Unable to find 'faiss\\impl\\ScalarQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(408) : Error: Unable to find 'faiss\\IndexScalarQuantizer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(409) : Error: Unable to find 'faiss\\IndexIVFSpectralHash.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(410) : Error: Unable to find 'faiss\\impl\\HNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(411) : Error: Unable to find 'faiss\\IndexHNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(414) : Error: Unable to find 'faiss\\impl\\NNDescent.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(415) : Error: Unable to find 'faiss\\IndexNNDescent.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(417) : Error: Unable to find 'faiss\\IndexIVFFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(418) : Error: Unable to find 'faiss\\impl\\NSG.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(419) : Error: Unable to find 'faiss\\IndexNSG.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(427) : Error: Unable to find 'faiss\\impl\\lattice_Zn.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(428) : Error: Unable to find 'faiss\\IndexLattice.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(431) : Error: Unable to find 'faiss\\IndexIVFPQ.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(432) : Error: Unable to find 'faiss\\IndexIVFPQR.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(433) : Error: Unable to find 'faiss\\Index2Layer.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(435) : Error: Unable to find 'faiss\\IndexPQFastScan.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(436) : Error: Unable to find 'faiss\\IndexIVFPQFastScan.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(437) : Error: Unable to find 'faiss\\utils\\quantize_lut.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(439) : Error: Unable to find 'faiss\\IndexBinary.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(440) : Error: Unable to find 'faiss\\IndexBinaryFlat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(441) : Error: Unable to find 'faiss\\IndexBinaryIVF.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(442) : Error: Unable to find 'faiss\\IndexBinaryFromFloat.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(443) : Error: Unable to find 'faiss\\IndexBinaryHNSW.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(444) : Error: Unable to find 'faiss\\IndexBinaryHash.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(446) : Error: Unable to find 'faiss\\impl\\ThreadedIndex.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(450) : Error: Unable to find 'faiss\\IndexShards.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(454) : Error: Unable to find 'faiss\\IndexReplicas.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(458) : Error: Unable to find 'faiss\\MetaIndexes.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(473) : Error: Unable to find 'faiss\\impl\\AuxIndexStructures.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(663) : Error: Unable to find 'faiss\\index_io.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(664) : Error: Unable to find 'faiss\\clone_index.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(668) : Error: Unable to find 'faiss\\AutoTune.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(669) : Error: Unable to find 'faiss\\index_factory.h'\r\n      faiss\\faiss\\python\\swigfaiss.i(670) : Error: Unable to find 'faiss\\MatrixStats.h'\r\n      error: command 'D:\\\\software\\\\swigwin-4.1.1\\\\swig.exe' failed with exit code 1\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\n  Running setup.py clean for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects\r\n",
        "state": "closed",
        "user": "X17exe",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-21T07:15:44+00:00",
        "updated_at": "2025-04-29T06:37:54+00:00",
        "closed_at": "2025-04-29T06:36:20+00:00",
        "comments_count": [
            "dwpeng",
            "dwpeng",
            "cuicheng01",
            "mamingxuan1",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": [
            "documentation",
            "question"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3069,
        "title": "PP-ShiTuV2的特征提取,如何划分数据集",
        "body": "├── A\r\n│   ├── 1.jpg\r\n│   ├── 2.jpg\r\n├── B\r\n│   ├── 1.jpg\r\n│   ├── 2.jpg\r\n\r\n比如我有这样的结构\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/PP-ShiTu/feature_extraction.md\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/metric_learning/dataset.md\r\n特征提取\r\n\r\n\r\n\r\n```\r\n# 采用\"空格\"作为分隔符号\r\n...\r\ntrain/99/Ovenbird_0136_92859.jpg 99 2\r\n...\r\ntrain/99/Ovenbird_0128_93366.jpg 99 6\r\n...\r\n```\r\n\r\n训练集合（train dataset）：用来训练模型，使模型能够学习该集合的图像特征。\r\n底库数据集合（gallery dataset）：用来提供图像检索任务中的底库数据，该集合可与训练集或测试集相同，也可以不同，当与训练集相同时，测试集的类别体系应与训练集的类别体系相同。\r\n测试数据集合（query dataset）：用来测试模型的好坏，通常要对测试集的每一张测试图片进行特征提取，之后和底库数据的特征进行距离匹配，得到识别结果，后根据识别结果计算整个测试集的指标。\r\n\r\n\r\n每行数据使用“空格”分割，三列数据的含义分别是训练数据的路径、训练数据的 label 信息、训练数据的 unique id。\r\n\r\n注意：\r\n\r\n1.当 gallery dataset 和 query dataset 相同时，为了去掉检索得到的第一个数据（检索图片本身无须评估），每个数据需要对应一个 unique id（每张图片的 id 不同即可，可以用行号来表示 unique id），用于后续评测 mAP、recall@1 等指标。yaml 配置文件的数据集选用 VeriWild。\r\n\r\n2.当 gallery dataset 和 query dataset 不同时，无需增加 unique id，query_list.txt 和 gallery_list.txt 均为两列，分别是训练数据的路径、训练数据的 label 信息。yaml 配置文件的数据集选用 ImageNetDataset。\r\n\r\n-------------------\r\n\r\n数据集应该怎么转换？\r\n是否能提供脚本 ？\r\n\r\n以上信息\r\n训练数据的 label 信息\r\n\r\n├── A\r\n│   ├── 1.jpg\r\n│   ├── 2.jpg\r\n├── B\r\n│   ├── 1.jpg\r\n│   ├── 2.jpg\r\n\r\n是否是 A 和 B 文件夹的  label 信息？\r\n是否一定要转换为数字表示？\r\n\r\n同一个label  类似图片\r\nunique id 是否要相同？ \r\n还是全部用行号 每个不一样？\r\n",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-21T14:32:06+00:00",
        "updated_at": "2025-03-04T09:21:42+00:00",
        "closed_at": "2025-03-04T06:37:01+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question",
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3070,
        "title": "GeneralRecognitionV2_PPLCNetV2_base.yaml\", yaml.scanner.ScannerError: mapping values are not allowed here",
        "body": "paddleclas          0.0.0\r\npaddlepaddle-gpu    2.5.2\r\npython 3.8\r\nwin 11\r\n\r\n` python tools/train.py  -c E:\\PaddlePaddle\\PaddleClas\\ppcls\\configs\\GeneralRecognitionV2\\GeneralRecognitionV2_PPLCNetV2_base.yaml`\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 28, in <module>\r\n    config = config.get_config(\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\utils\\config.py\", line 184, in get_config\r\n    config = parse_config(fname)\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\utils\\config.py\", line 58, in parse_config\r\n    yaml_config = AttrDict(yaml.load(fopen, Loader=yaml.SafeLoader))\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\__init__.py\", line 81, in load\r\n    return loader.get_single_data()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\constructor.py\", line 49, in get_single_data\r\n    node = self.get_single_node()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 36, in get_single_node\r\n    document = self.compose_document()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 55, in compose_document\r\n    node = self.compose_node(None, None)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 133, in compose_mapping_node\r\n    item_value = self.compose_node(node, item_key)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 133, in compose_mapping_node\r\n    item_value = self.compose_node(node, item_key)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 133, in compose_mapping_node\r\n    item_value = self.compose_node(node, item_key)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\composer.py\", line 127, in compose_mapping_node\r\n    while not self.check_event(MappingEndEvent):\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\parser.py\", line 98, in check_event\r\n    self.current_event = self.state()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\parser.py\", line 428, in parse_block_mapping_key\r\n    if self.check_token(KeyToken):\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\scanner.py\", line 116, in check_token\r\n    self.fetch_more_tokens()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\scanner.py\", line 223, in fetch_more_tokens\r\n    return self.fetch_value()\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\yaml\\scanner.py\", line 577, in fetch_value\r\n    raise ScannerError(None, None,\r\nyaml.scanner.ScannerError: mapping values are not allowed here\r\n  in \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\configs\\GeneralRecognitionV2\\GeneralRecognitionV2_PPLCNetV2_base.yaml\", line 150, column 22\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n官方数据集示例:\r\nhttps://ai.baidu.com/ai-doc/AISTUDIO/Clkg7m4y9#%E7%89%B9%E5%BE%81%E6%A3%80%E7%B4%A2%E4%BB%BB%E5%8A%A1\r\nhttps://paddle-model-ecology.bj.bcebos.com/paddlex/data/shitu_rec_dataset_examples.tar\r\n\r\n```\r\nimages\r\ntrain.txt\r\nval.txt\r\n```\r\n\r\n\r\n```yaml\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./outputREC\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 20\r\n  use_visualdl: False\r\n  eval_mode: retrieval\r\n  retrieval_feature_from: features # 'backbone' or 'features'\r\n  re_ranking: False\r\n  use_dali: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n\r\nAMP:\r\n  scale_loss: 65536\r\n  use_dynamic_loss_scaling: True\r\n  # O1: mixed fp16\r\n  level: O1\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone:\r\n    name: PPLCNetV2_base_ShiTu\r\n    pretrained: True\r\n    use_ssld: True\r\n    class_expand: &feat_dim 512\r\n  BackboneStopLayer:\r\n    name: flatten\r\n  Neck:\r\n    name: BNNeck\r\n    num_features: *feat_dim\r\n    weight_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 1.0\r\n    bias_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 0.0\r\n      learning_rate: 1.0e-20 # NOTE: Temporarily set lr small enough to freeze the bias to zero\r\n  Head:\r\n    name: FC\r\n    embedding_size: *feat_dim\r\n    class_num: 9\r\n    weight_attr:\r\n      initializer:\r\n        name: Normal\r\n        std: 0.001\r\n    bias_attr: False\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n    - TripletAngularMarginLoss:\r\n        weight: 1.0\r\n        feature_from: features\r\n        margin: 0.5\r\n        reduction: mean\r\n        add_absolute: True\r\n        absolute_loss_weight: 0.1\r\n        normalize_feature: True\r\n        ap_value: 0.8\r\n        an_value: 0.4\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.06 # for 8gpu x 256bs\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: L2\r\n    coeff: 0.00001\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: E:/shitu_rec_dataset_examples/\r\n      cls_label_path: E:/shitu_rec_dataset_examples/train.txt\r\n      relabel: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - Pad:\r\n            padding: 10\r\n            backend: cv2\r\n        - RandCropImageV2:\r\n            size: [224, 224]\r\n        - RandomRotation:\r\n            prob: 0.5\r\n            degrees: 90\r\n            interpolation: bilinear\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: hwc\r\n    sampler:\r\n      name: PKSampler\r\n      batch_size: 8\r\n      sample_per_id: 4\r\n      drop_last: False\r\n      shuffle: True\r\n      sample_method: \"id_avg_prob\"\r\n      id_list: [50030, 80700, 92019, 96015] # be careful when set relabel=True\r\n      ratio: [4, 4]\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    Query:\r\n      dataset:\r\n        name: VeriWild\r\n      image_root: E:/shitu_rec_dataset_examples/\r\n      cls_label_path: E:/shitu_rec_dataset_examples/val.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 8\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\n    Gallery:\r\n      dataset:\r\n        name: VeriWild\r\n      image_root: E:/shitu_rec_dataset_examples/\r\n      cls_label_path: E:/shitu_rec_dataset_examples/val.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 8\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\nMetric:\r\n  Eval:\r\n    - Recallk:\r\n        topk: [1, 5]\r\n    - mAP: {}\r\n\r\n```",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "monkeycc",
        "created_at": "2023-12-21T15:26:51+00:00",
        "updated_at": "2023-12-21T15:39:37+00:00",
        "closed_at": "2023-12-21T15:39:33+00:00",
        "comments_count": [
            "monkeycc"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3071,
        "title": "RuntimeError: (NotFound) The kernel with key (GPU, Undefined(AnyLayout), int32) of kernel `label_smooth` is not registered and fail to fallback to CPU one. Selected wrong DataType `int32`.",
        "body": "paddleclas          0.0.0\r\npaddlepaddle-gpu    2.5.2\r\npython 3.8\r\nwin 11\r\n\r\n特征提取模型训练报错\r\n\r\n`python tools/train.py  -c E:\\PaddlePaddle\\PaddleClas\\ppcls\\configs\\GeneralRecognitionV2\\GeneralRecognitionV2_PPLCNetV2_base_LL.yaml`\r\n\r\n```python\r\n[2023/12/21 23:40:16] ppcls INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/12/21 23:40:16] ppcls INFO: AMP :\r\n[2023/12/21 23:40:16] ppcls INFO:     level : O1\r\n[2023/12/21 23:40:16] ppcls INFO:     scale_loss : 65536\r\n[2023/12/21 23:40:16] ppcls INFO:     use_dynamic_loss_scaling : True\r\n[2023/12/21 23:40:16] ppcls INFO: ------------------------------------------------------------\r\n[2023/12/21 23:40:16] ppcls INFO: Arch :\r\n[2023/12/21 23:40:16] ppcls INFO:     Backbone :\r\n[2023/12/21 23:40:16] ppcls INFO:         class_expand : 512\r\n[2023/12/21 23:40:16] ppcls INFO:         name : PPLCNetV2_base_ShiTu\r\n[2023/12/21 23:40:16] ppcls INFO:         pretrained : True\r\n[2023/12/21 23:40:16] ppcls INFO:         use_ssld : True\r\n[2023/12/21 23:40:16] ppcls INFO:     BackboneStopLayer :\r\n[2023/12/21 23:40:16] ppcls INFO:         name : flatten\r\n[2023/12/21 23:40:16] ppcls INFO:     Head :\r\n[2023/12/21 23:40:16] ppcls INFO:         bias_attr : False\r\n[2023/12/21 23:40:16] ppcls INFO:         class_num : 1\r\n[2023/12/21 23:40:16] ppcls INFO:         embedding_size : 512\r\n[2023/12/21 23:40:16] ppcls INFO:         name : FC\r\n[2023/12/21 23:40:16] ppcls INFO:         weight_attr :\r\n[2023/12/21 23:40:16] ppcls INFO:             initializer :\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : Normal\r\n[2023/12/21 23:40:16] ppcls INFO:                 std : 0.001\r\n[2023/12/21 23:40:16] ppcls INFO:     Neck :\r\n[2023/12/21 23:40:16] ppcls INFO:         bias_attr :\r\n[2023/12/21 23:40:16] ppcls INFO:             initializer :\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : Constant\r\n[2023/12/21 23:40:16] ppcls INFO:                 value : 0.0\r\n[2023/12/21 23:40:16] ppcls INFO:             learning_rate : 1e-20\r\n[2023/12/21 23:40:16] ppcls INFO:         name : BNNeck\r\n[2023/12/21 23:40:16] ppcls INFO:         num_features : 512\r\n[2023/12/21 23:40:16] ppcls INFO:         weight_attr :\r\n[2023/12/21 23:40:16] ppcls INFO:             initializer :\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : Constant\r\n[2023/12/21 23:40:16] ppcls INFO:                 value : 1.0\r\n[2023/12/21 23:40:16] ppcls INFO:     infer_add_softmax : False\r\n[2023/12/21 23:40:16] ppcls INFO:     infer_output_key : features\r\n[2023/12/21 23:40:16] ppcls INFO:     name : RecModel\r\n[2023/12/21 23:40:16] ppcls INFO: DataLoader :\r\n[2023/12/21 23:40:16] ppcls INFO:     Eval :\r\n[2023/12/21 23:40:16] ppcls INFO:         Gallery :\r\n[2023/12/21 23:40:16] ppcls INFO:             dataset :\r\n[2023/12/21 23:40:16] ppcls INFO:                 cls_label_path : E:/LL_REC/test.txt\r\n[2023/12/21 23:40:16] ppcls INFO:                 image_root : E:/LL_REC/\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : VeriWild\r\n[2023/12/21 23:40:16] ppcls INFO:                 transform_ops :\r\n[2023/12/21 23:40:16] ppcls INFO:                     DecodeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         channel_first : False\r\n[2023/12/21 23:40:16] ppcls INFO:                         to_rgb : True\r\n[2023/12/21 23:40:16] ppcls INFO:                     ResizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         backend : cv2\r\n[2023/12/21 23:40:16] ppcls INFO:                         interpolation : bilinear\r\n[2023/12/21 23:40:16] ppcls INFO:                         return_numpy : False\r\n[2023/12/21 23:40:16] ppcls INFO:                         size : [224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:                     NormalizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2023/12/21 23:40:16] ppcls INFO:                         order : hwc\r\n[2023/12/21 23:40:16] ppcls INFO:                         scale : 1.0/255.0\r\n[2023/12/21 23:40:16] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2023/12/21 23:40:16] ppcls INFO:             loader :\r\n[2023/12/21 23:40:16] ppcls INFO:                 num_workers : 4\r\n[2023/12/21 23:40:16] ppcls INFO:                 use_shared_memory : True\r\n[2023/12/21 23:40:16] ppcls INFO:             sampler :\r\n[2023/12/21 23:40:16] ppcls INFO:                 batch_size : 2\r\n[2023/12/21 23:40:16] ppcls INFO:                 drop_last : False\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : DistributedBatchSampler\r\n[2023/12/21 23:40:16] ppcls INFO:                 shuffle : False\r\n[2023/12/21 23:40:16] ppcls INFO:         Query :\r\n[2023/12/21 23:40:16] ppcls INFO:             dataset :\r\n[2023/12/21 23:40:16] ppcls INFO:                 cls_label_path : E:/LL_REC/val.txt\r\n[2023/12/21 23:40:16] ppcls INFO:                 image_root : E:/LL_REC/\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : VeriWild\r\n[2023/12/21 23:40:16] ppcls INFO:                 transform_ops :\r\n[2023/12/21 23:40:16] ppcls INFO:                     DecodeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         channel_first : False\r\n[2023/12/21 23:40:16] ppcls INFO:                         to_rgb : True\r\n[2023/12/21 23:40:16] ppcls INFO:                     ResizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         backend : cv2\r\n[2023/12/21 23:40:16] ppcls INFO:                         interpolation : bilinear\r\n[2023/12/21 23:40:16] ppcls INFO:                         return_numpy : False\r\n[2023/12/21 23:40:16] ppcls INFO:                         size : [224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:                     NormalizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2023/12/21 23:40:16] ppcls INFO:                         order : hwc\r\n[2023/12/21 23:40:16] ppcls INFO:                         scale : 1.0/255.0\r\n[2023/12/21 23:40:16] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2023/12/21 23:40:16] ppcls INFO:             loader :\r\n[2023/12/21 23:40:16] ppcls INFO:                 num_workers : 4\r\n[2023/12/21 23:40:16] ppcls INFO:                 use_shared_memory : True\r\n[2023/12/21 23:40:16] ppcls INFO:             sampler :\r\n[2023/12/21 23:40:16] ppcls INFO:                 batch_size : 2\r\n[2023/12/21 23:40:16] ppcls INFO:                 drop_last : False\r\n[2023/12/21 23:40:16] ppcls INFO:                 name : DistributedBatchSampler\r\n[2023/12/21 23:40:16] ppcls INFO:                 shuffle : False\r\n[2023/12/21 23:40:16] ppcls INFO:     Train :\r\n[2023/12/21 23:40:16] ppcls INFO:         dataset :\r\n[2023/12/21 23:40:16] ppcls INFO:             cls_label_path : E:/LL_REC/train.txt\r\n[2023/12/21 23:40:16] ppcls INFO:             image_root : E:/LL_REC/\r\n[2023/12/21 23:40:16] ppcls INFO:             name : ImageNetDataset\r\n[2023/12/21 23:40:16] ppcls INFO:             relabel : True\r\n[2023/12/21 23:40:16] ppcls INFO:             transform_ops :\r\n[2023/12/21 23:40:16] ppcls INFO:                 DecodeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                     channel_first : False\r\n[2023/12/21 23:40:16] ppcls INFO:                     to_rgb : True\r\n[2023/12/21 23:40:16] ppcls INFO:                 ResizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                     backend : cv2\r\n[2023/12/21 23:40:16] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/21 23:40:16] ppcls INFO:                     return_numpy : False\r\n[2023/12/21 23:40:16] ppcls INFO:                     size : [224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:                 RandFlipImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                     flip_code : 1\r\n[2023/12/21 23:40:16] ppcls INFO:                 Pad :\r\n[2023/12/21 23:40:16] ppcls INFO:                     backend : cv2\r\n[2023/12/21 23:40:16] ppcls INFO:                     padding : 10\r\n[2023/12/21 23:40:16] ppcls INFO:                 RandCropImageV2 :\r\n[2023/12/21 23:40:16] ppcls INFO:                     size : [224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:                 RandomRotation :\r\n[2023/12/21 23:40:16] ppcls INFO:                     degrees : 90\r\n[2023/12/21 23:40:16] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/21 23:40:16] ppcls INFO:                     prob : 0.5\r\n[2023/12/21 23:40:16] ppcls INFO:                 ResizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                     backend : cv2\r\n[2023/12/21 23:40:16] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/21 23:40:16] ppcls INFO:                     return_numpy : False\r\n[2023/12/21 23:40:16] ppcls INFO:                     size : [224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:                 NormalizeImage :\r\n[2023/12/21 23:40:16] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/12/21 23:40:16] ppcls INFO:                     order : hwc\r\n[2023/12/21 23:40:16] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/12/21 23:40:16] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/12/21 23:40:16] ppcls INFO:         loader :\r\n[2023/12/21 23:40:16] ppcls INFO:             num_workers : 4\r\n[2023/12/21 23:40:16] ppcls INFO:             use_shared_memory : True\r\n[2023/12/21 23:40:16] ppcls INFO:         sampler :\r\n[2023/12/21 23:40:16] ppcls INFO:             batch_size : 2\r\n[2023/12/21 23:40:16] ppcls INFO:             drop_last : False\r\n[2023/12/21 23:40:16] ppcls INFO:             id_list : [50030, 80700, 92019, 96015]\r\n[2023/12/21 23:40:16] ppcls INFO:             name : PKSampler\r\n[2023/12/21 23:40:16] ppcls INFO:             ratio : [4, 4]\r\n[2023/12/21 23:40:16] ppcls INFO:             sample_method : id_avg_prob\r\n[2023/12/21 23:40:16] ppcls INFO:             sample_per_id : 2\r\n[2023/12/21 23:40:16] ppcls INFO:             shuffle : True\r\n[2023/12/21 23:40:16] ppcls INFO: Global :\r\n[2023/12/21 23:40:16] ppcls INFO:     checkpoints : None\r\n[2023/12/21 23:40:16] ppcls INFO:     device : gpu\r\n[2023/12/21 23:40:16] ppcls INFO:     epochs : 100\r\n[2023/12/21 23:40:16] ppcls INFO:     eval_during_train : True\r\n[2023/12/21 23:40:16] ppcls INFO:     eval_interval : 1\r\n[2023/12/21 23:40:16] ppcls INFO:     eval_mode : retrieval\r\n[2023/12/21 23:40:16] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2023/12/21 23:40:16] ppcls INFO:     output_dir : ./output\r\n[2023/12/21 23:40:16] ppcls INFO:     pretrained_model : None\r\n[2023/12/21 23:40:16] ppcls INFO:     print_batch_step : 20\r\n[2023/12/21 23:40:16] ppcls INFO:     re_ranking : False\r\n[2023/12/21 23:40:16] ppcls INFO:     retrieval_feature_from : features\r\n[2023/12/21 23:40:16] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/12/21 23:40:16] ppcls INFO:     save_interval : 1\r\n[2023/12/21 23:40:16] ppcls INFO:     use_dali : False\r\n[2023/12/21 23:40:16] ppcls INFO:     use_visualdl : False\r\n[2023/12/21 23:40:16] ppcls INFO: Loss :\r\n[2023/12/21 23:40:16] ppcls INFO:     Eval :\r\n[2023/12/21 23:40:16] ppcls INFO:         CELoss :\r\n[2023/12/21 23:40:16] ppcls INFO:             weight : 1.0\r\n[2023/12/21 23:40:16] ppcls INFO:     Train :\r\n[2023/12/21 23:40:16] ppcls INFO:         CELoss :\r\n[2023/12/21 23:40:16] ppcls INFO:             epsilon : 0.1\r\n[2023/12/21 23:40:16] ppcls INFO:             weight : 1.0\r\n[2023/12/21 23:40:16] ppcls INFO:         TripletAngularMarginLoss :\r\n[2023/12/21 23:40:16] ppcls INFO:             absolute_loss_weight : 0.1\r\n[2023/12/21 23:40:16] ppcls INFO:             add_absolute : True\r\n[2023/12/21 23:40:16] ppcls INFO:             an_value : 0.4\r\n[2023/12/21 23:40:16] ppcls INFO:             ap_value : 0.8\r\n[2023/12/21 23:40:16] ppcls INFO:             feature_from : features\r\n[2023/12/21 23:40:16] ppcls INFO:             margin : 0.5\r\n[2023/12/21 23:40:16] ppcls INFO:             normalize_feature : True\r\n[2023/12/21 23:40:16] ppcls INFO:             reduction : mean\r\n[2023/12/21 23:40:16] ppcls INFO:             weight : 1.0\r\n[2023/12/21 23:40:16] ppcls INFO: Metric :\r\n[2023/12/21 23:40:16] ppcls INFO:     Eval :\r\n[2023/12/21 23:40:16] ppcls INFO:         Recallk :\r\n[2023/12/21 23:40:16] ppcls INFO:             topk : [1, 5]\r\n[2023/12/21 23:40:16] ppcls INFO:         mAP :\r\n[2023/12/21 23:40:16] ppcls INFO: Optimizer :\r\n[2023/12/21 23:40:16] ppcls INFO:     lr :\r\n[2023/12/21 23:40:16] ppcls INFO:         learning_rate : 0.06\r\n[2023/12/21 23:40:16] ppcls INFO:         name : Cosine\r\n[2023/12/21 23:40:16] ppcls INFO:         warmup_epoch : 5\r\n[2023/12/21 23:40:16] ppcls INFO:     momentum : 0.9\r\n[2023/12/21 23:40:16] ppcls INFO:     name : Momentum\r\n[2023/12/21 23:40:16] ppcls INFO:     regularizer :\r\n[2023/12/21 23:40:16] ppcls INFO:         coeff : 1e-05\r\n[2023/12/21 23:40:16] ppcls INFO:         name : L2\r\n[2023/12/21 23:40:16] ppcls INFO: profiler_options : None\r\n[2023/12/21 23:40:16] ppcls INFO: train with paddle 2.5.2 and device Place(gpu:0)\r\nW1221 23:40:16.366072 17124 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.6, Driver API Version: 12.3, Runtime API Version: 11.8\r\nW1221 23:40:16.369956 17124 gpu_resources.cc:149] device: 0, cuDNN Version: 8.6.\r\n[2023/12/21 23:40:16] ppcls INFO: Found C:\\Users\\monke/.paddleclas/weights\\PPLCNetV2_base_ssld_pretrained.pdparams\r\n[2023/12/21 23:40:16] ppcls WARNING: The training strategy provided by PaddleClas is based on 4 gpus. But the number of gpu is 1 in current training. Please modify the stategy (learning rate, batch size and so on) if use this config to train.\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\engine\\engine.py\", line 356, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\engine\\train\\train.py\", line 51, in train_epoch\r\n    loss_dict = engine.train_loss_func(out, batch[1])\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\loss\\__init__.py\", line 68, in __call__\r\n    loss = loss_func(input, batch)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\paddle\\nn\\layer\\layers.py\", line 1254, in __call__\r\n    return self.forward(*inputs, **kwargs)\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\loss\\celoss.py\", line 49, in forward\r\n    label = self._labelsmoothing(label, class_num)\r\n  File \"E:\\PaddlePaddle\\PaddleClas\\ppcls\\loss\\celoss.py\", line 40, in _labelsmoothing\r\n    soft_target = F.label_smooth(one_hot_target, epsilon=self.epsilon)\r\n  File \"E:\\anaconda3\\envs\\PaddleClas\\lib\\site-packages\\paddle\\nn\\functional\\common.py\", line 1939, in label_smooth\r\n    return _C_ops.label_smooth(label, prior_dist, float(epsilon))\r\nRuntimeError: (NotFound) The kernel with key (GPU, Undefined(AnyLayout), int32) of kernel `label_smooth` is not registered and fail to fallback to CPU one. Selected wrong DataType `int32`. Paddle support following DataTypes: float16, bfloat16, float32, float64.\r\n  [Hint: Expected kernel_iter != iter->second.end(), but received kernel_iter == iter->second.end().] (at ..\\paddle\\phi\\core\\kernel_factory.cc:259)\r\n```",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-21T15:43:50+00:00",
        "updated_at": "2025-03-04T09:21:44+00:00",
        "closed_at": "2025-03-04T06:37:02+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3076,
        "title": "PP-ShiTuV2是不是只能识别单个物体，不能同时识别多个物体",
        "body": "PP-ShiTuV2是不是只能识别单个物体，不能同时识别多个物体",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "monkeycc",
        "created_at": "2023-12-29T00:55:59+00:00",
        "updated_at": "2023-12-29T08:28:35+00:00",
        "closed_at": "2023-12-29T08:28:32+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3072,
        "title": "PP-ShiTu android demo替换自己训练的主体检测模型",
        "body": "根据官方的主体检测文档，我是训练了一个菜品餐盘主体检测的模型，在AIstudio中能很好的进行预测出结果，但是导出并转换为nb模型，替换demo中的mainbody主体检测模型后。重新编译运行到安卓中，测试效果不佳。使用的模型非量化训练，请问我应该从哪些方面进行排查问题？",
        "state": "closed",
        "user": "dlaoy",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-22T02:18:14+00:00",
        "updated_at": "2025-03-04T09:21:46+00:00",
        "closed_at": "2025-03-04T06:37:03+00:00",
        "comments_count": [
            "cuicheng01",
            "dlaoy",
            "cuicheng01",
            "dlaoy",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug",
            "PP-ShiTu",
            "deploy"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3073,
        "title": "AssertionError: batch size should be smaller than",
        "body": "paddleclas          0.0.0\r\npaddlepaddle-gpu    2.5.2\r\npython 3.8\r\nwin 11\r\n\r\n特征提取模型训练报错\r\n\r\n`python tools/train.py  -c E:\\PaddlePaddle\\PaddleClas\\ppcls\\configs\\GeneralRecognitionV2\\GeneralRecognitionV2_PPLCNetV2_base_LL.yaml`\r\n\r\n```python\r\n[2023/12/21 23:40:16] ppcls INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2023/12/22 15:38:31] ppcls INFO: AMP :\r\n[2023/12/22 15:38:31] ppcls INFO:     level : O1\r\n[2023/12/22 15:38:31] ppcls INFO:     scale_loss : 65536\r\n[2023/12/22 15:38:31] ppcls INFO:     use_dynamic_loss_scaling : True\r\n[2023/12/22 15:38:31] ppcls INFO: ------------------------------------------------------------\r\n[2023/12/22 15:38:31] ppcls INFO: Arch :\r\n[2023/12/22 15:38:31] ppcls INFO:     Backbone :\r\n[2023/12/22 15:38:31] ppcls INFO:         class_expand : 512\r\n[2023/12/22 15:38:31] ppcls INFO:         name : PPLCNetV2_base_ShiTu\r\n[2023/12/22 15:38:31] ppcls INFO:         pretrained : True\r\n[2023/12/22 15:38:31] ppcls INFO:         use_ssld : True\r\n[2023/12/22 15:38:31] ppcls INFO:     BackboneStopLayer :\r\n[2023/12/22 15:38:31] ppcls INFO:         name : flatten\r\n[2023/12/22 15:38:31] ppcls INFO:     Head :\r\n[2023/12/22 15:38:31] ppcls INFO:         bias_attr : False\r\n[2023/12/22 15:38:31] ppcls INFO:         class_num : 1\r\n[2023/12/22 15:38:31] ppcls INFO:         embedding_size : 512\r\n[2023/12/22 15:38:31] ppcls INFO:         name : FC\r\n[2023/12/22 15:38:31] ppcls INFO:         weight_attr :\r\n[2023/12/22 15:38:31] ppcls INFO:             initializer :\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : Normal\r\n[2023/12/22 15:38:31] ppcls INFO:                 std : 0.001\r\n[2023/12/22 15:38:31] ppcls INFO:     Neck :\r\n[2023/12/22 15:38:31] ppcls INFO:         bias_attr :\r\n[2023/12/22 15:38:31] ppcls INFO:             initializer :\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : Constant\r\n[2023/12/22 15:38:31] ppcls INFO:                 value : 0.0\r\n[2023/12/22 15:38:31] ppcls INFO:             learning_rate : 1e-20\r\n[2023/12/22 15:38:31] ppcls INFO:         name : BNNeck\r\n[2023/12/22 15:38:31] ppcls INFO:         num_features : 512\r\n[2023/12/22 15:38:31] ppcls INFO:         weight_attr :\r\n[2023/12/22 15:38:31] ppcls INFO:             initializer :\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : Constant\r\n[2023/12/22 15:38:31] ppcls INFO:                 value : 1.0\r\n[2023/12/22 15:38:31] ppcls INFO:     infer_add_softmax : False\r\n[2023/12/22 15:38:31] ppcls INFO:     infer_output_key : features\r\n[2023/12/22 15:38:31] ppcls INFO:     name : RecModel\r\n[2023/12/22 15:38:31] ppcls INFO: DataLoader :\r\n[2023/12/22 15:38:31] ppcls INFO:     Eval :\r\n[2023/12/22 15:38:31] ppcls INFO:         Gallery :\r\n[2023/12/22 15:38:31] ppcls INFO:             dataset :\r\n[2023/12/22 15:38:31] ppcls INFO:                 cls_label_path : E:/LL_REC/test.txt\r\n[2023/12/22 15:38:31] ppcls INFO:                 image_root : E:/LL_REC/\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : VeriWild\r\n[2023/12/22 15:38:31] ppcls INFO:                 transform_ops :\r\n[2023/12/22 15:38:31] ppcls INFO:                     DecodeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         channel_first : False\r\n[2023/12/22 15:38:31] ppcls INFO:                         to_rgb : True\r\n[2023/12/22 15:38:31] ppcls INFO:                     ResizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         backend : cv2\r\n[2023/12/22 15:38:31] ppcls INFO:                         interpolation : bilinear\r\n[2023/12/22 15:38:31] ppcls INFO:                         return_numpy : False\r\n[2023/12/22 15:38:31] ppcls INFO:                         size : [224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:                     NormalizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2023/12/22 15:38:31] ppcls INFO:                         order : hwc\r\n[2023/12/22 15:38:31] ppcls INFO:                         scale : 1.0/255.0\r\n[2023/12/22 15:38:31] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2023/12/22 15:38:31] ppcls INFO:             loader :\r\n[2023/12/22 15:38:31] ppcls INFO:                 num_workers : 4\r\n[2023/12/22 15:38:31] ppcls INFO:                 use_shared_memory : True\r\n[2023/12/22 15:38:31] ppcls INFO:             sampler :\r\n[2023/12/22 15:38:31] ppcls INFO:                 batch_size : 1\r\n[2023/12/22 15:38:31] ppcls INFO:                 drop_last : False\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : DistributedBatchSampler\r\n[2023/12/22 15:38:31] ppcls INFO:                 shuffle : False\r\n[2023/12/22 15:38:31] ppcls INFO:         Query :\r\n[2023/12/22 15:38:31] ppcls INFO:             dataset :\r\n[2023/12/22 15:38:31] ppcls INFO:                 cls_label_path : E:/LL_REC/val.txt\r\n[2023/12/22 15:38:31] ppcls INFO:                 image_root : E:/LL_REC/\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : VeriWild\r\n[2023/12/22 15:38:31] ppcls INFO:                 transform_ops :\r\n[2023/12/22 15:38:31] ppcls INFO:                     DecodeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         channel_first : False\r\n[2023/12/22 15:38:31] ppcls INFO:                         to_rgb : True\r\n[2023/12/22 15:38:31] ppcls INFO:                     ResizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         backend : cv2\r\n[2023/12/22 15:38:31] ppcls INFO:                         interpolation : bilinear\r\n[2023/12/22 15:38:31] ppcls INFO:                         return_numpy : False\r\n[2023/12/22 15:38:31] ppcls INFO:                         size : [224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:                     NormalizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2023/12/22 15:38:31] ppcls INFO:                         order : hwc\r\n[2023/12/22 15:38:31] ppcls INFO:                         scale : 1.0/255.0\r\n[2023/12/22 15:38:31] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2023/12/22 15:38:31] ppcls INFO:             loader :\r\n[2023/12/22 15:38:31] ppcls INFO:                 num_workers : 4\r\n[2023/12/22 15:38:31] ppcls INFO:                 use_shared_memory : True\r\n[2023/12/22 15:38:31] ppcls INFO:             sampler :\r\n[2023/12/22 15:38:31] ppcls INFO:                 batch_size : 1\r\n[2023/12/22 15:38:31] ppcls INFO:                 drop_last : False\r\n[2023/12/22 15:38:31] ppcls INFO:                 name : DistributedBatchSampler\r\n[2023/12/22 15:38:31] ppcls INFO:                 shuffle : False\r\n[2023/12/22 15:38:31] ppcls INFO:     Train :\r\n[2023/12/22 15:38:31] ppcls INFO:         dataset :\r\n[2023/12/22 15:38:31] ppcls INFO:             cls_label_path : E:/LL_REC/train.txt\r\n[2023/12/22 15:38:31] ppcls INFO:             image_root : E:/LL_REC/\r\n[2023/12/22 15:38:31] ppcls INFO:             name : ImageNetDataset\r\n[2023/12/22 15:38:31] ppcls INFO:             relabel : True\r\n[2023/12/22 15:38:31] ppcls INFO:             transform_ops :\r\n[2023/12/22 15:38:31] ppcls INFO:                 DecodeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                     channel_first : False\r\n[2023/12/22 15:38:31] ppcls INFO:                     to_rgb : True\r\n[2023/12/22 15:38:31] ppcls INFO:                 ResizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                     backend : cv2\r\n[2023/12/22 15:38:31] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/22 15:38:31] ppcls INFO:                     return_numpy : False\r\n[2023/12/22 15:38:31] ppcls INFO:                     size : [224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:                 RandFlipImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                     flip_code : 1\r\n[2023/12/22 15:38:31] ppcls INFO:                 Pad :\r\n[2023/12/22 15:38:31] ppcls INFO:                     backend : cv2\r\n[2023/12/22 15:38:31] ppcls INFO:                     padding : 10\r\n[2023/12/22 15:38:31] ppcls INFO:                 RandCropImageV2 :\r\n[2023/12/22 15:38:31] ppcls INFO:                     size : [224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:                 RandomRotation :\r\n[2023/12/22 15:38:31] ppcls INFO:                     degrees : 90\r\n[2023/12/22 15:38:31] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/22 15:38:31] ppcls INFO:                     prob : 0.5\r\n[2023/12/22 15:38:31] ppcls INFO:                 ResizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                     backend : cv2\r\n[2023/12/22 15:38:31] ppcls INFO:                     interpolation : bilinear\r\n[2023/12/22 15:38:31] ppcls INFO:                     return_numpy : False\r\n[2023/12/22 15:38:31] ppcls INFO:                     size : [224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:                 NormalizeImage :\r\n[2023/12/22 15:38:31] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2023/12/22 15:38:31] ppcls INFO:                     order : hwc\r\n[2023/12/22 15:38:31] ppcls INFO:                     scale : 1.0/255.0\r\n[2023/12/22 15:38:31] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2023/12/22 15:38:31] ppcls INFO:         loader :\r\n[2023/12/22 15:38:31] ppcls INFO:             num_workers : 4\r\n[2023/12/22 15:38:31] ppcls INFO:             use_shared_memory : True\r\n[2023/12/22 15:38:31] ppcls INFO:         sampler :\r\n[2023/12/22 15:38:31] ppcls INFO:             batch_size : 1\r\n[2023/12/22 15:38:31] ppcls INFO:             drop_last : False\r\n[2023/12/22 15:38:31] ppcls INFO:             id_list : [50030, 80700, 92019, 96015]\r\n[2023/12/22 15:38:31] ppcls INFO:             name : PKSampler\r\n[2023/12/22 15:38:31] ppcls INFO:             ratio : [4, 4]\r\n[2023/12/22 15:38:31] ppcls INFO:             sample_method : id_avg_prob\r\n[2023/12/22 15:38:31] ppcls INFO:             sample_per_id : 1\r\n[2023/12/22 15:38:31] ppcls INFO:             shuffle : True\r\n[2023/12/22 15:38:31] ppcls INFO: Global :\r\n[2023/12/22 15:38:31] ppcls INFO:     checkpoints : None\r\n[2023/12/22 15:38:31] ppcls INFO:     device : gpu\r\n[2023/12/22 15:38:31] ppcls INFO:     epochs : 100\r\n[2023/12/22 15:38:31] ppcls INFO:     eval_during_train : True\r\n[2023/12/22 15:38:31] ppcls INFO:     eval_interval : 1\r\n[2023/12/22 15:38:31] ppcls INFO:     eval_mode : retrieval\r\n[2023/12/22 15:38:31] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2023/12/22 15:38:31] ppcls INFO:     output_dir : ./outputLL\r\n[2023/12/22 15:38:31] ppcls INFO:     pretrained_model : None\r\n[2023/12/22 15:38:31] ppcls INFO:     print_batch_step : 20\r\n[2023/12/22 15:38:31] ppcls INFO:     re_ranking : False\r\n[2023/12/22 15:38:31] ppcls INFO:     retrieval_feature_from : features\r\n[2023/12/22 15:38:31] ppcls INFO:     save_inference_dir : ./inference\r\n[2023/12/22 15:38:31] ppcls INFO:     save_interval : 1\r\n[2023/12/22 15:38:31] ppcls INFO:     use_dali : False\r\n[2023/12/22 15:38:31] ppcls INFO:     use_visualdl : False\r\n[2023/12/22 15:38:31] ppcls INFO: Loss :\r\n[2023/12/22 15:38:31] ppcls INFO:     Eval :\r\n[2023/12/22 15:38:31] ppcls INFO:         CELoss :\r\n[2023/12/22 15:38:31] ppcls INFO:             weight : 1.0\r\n[2023/12/22 15:38:31] ppcls INFO:     Train :\r\n[2023/12/22 15:38:31] ppcls INFO:         CELoss :\r\n[2023/12/22 15:38:31] ppcls INFO:             epsilon : 0.1\r\n[2023/12/22 15:38:31] ppcls INFO:             weight : 1.0\r\n[2023/12/22 15:38:31] ppcls INFO:         TripletAngularMarginLoss :\r\n[2023/12/22 15:38:31] ppcls INFO:             absolute_loss_weight : 0.1\r\n[2023/12/22 15:38:31] ppcls INFO:             add_absolute : True\r\n[2023/12/22 15:38:31] ppcls INFO:             an_value : 0.4\r\n[2023/12/22 15:38:31] ppcls INFO:             ap_value : 0.8\r\n[2023/12/22 15:38:31] ppcls INFO:             feature_from : features\r\n[2023/12/22 15:38:31] ppcls INFO:             margin : 0.5\r\n[2023/12/22 15:38:31] ppcls INFO:             normalize_feature : True\r\n[2023/12/22 15:38:31] ppcls INFO:             reduction : mean\r\n[2023/12/22 15:38:31] ppcls INFO:             weight : 1.0\r\n[2023/12/22 15:38:31] ppcls INFO: Metric :\r\n[2023/12/22 15:38:31] ppcls INFO:     Eval :\r\n[2023/12/22 15:38:31] ppcls INFO:         Recallk :\r\n[2023/12/22 15:38:31] ppcls INFO:             topk : [1, 5]\r\n[2023/12/22 15:38:31] ppcls INFO:         mAP :\r\n[2023/12/22 15:38:31] ppcls INFO: Optimizer :\r\n[2023/12/22 15:38:31] ppcls INFO:     lr :\r\n[2023/12/22 15:38:31] ppcls INFO:         learning_rate : 0.06\r\n[2023/12/22 15:38:31] ppcls INFO:         name : Cosine\r\n[2023/12/22 15:38:31] ppcls INFO:         warmup_epoch : 5\r\n[2023/12/22 15:38:31] ppcls INFO:     momentum : 0.9\r\n[2023/12/22 15:38:31] ppcls INFO:     name : Momentum\r\n[2023/12/22 15:38:31] ppcls INFO:     regularizer :\r\n[2023/12/22 15:38:31] ppcls INFO:         coeff : 1e-05\r\n[2023/12/22 15:38:31] ppcls INFO:         name : L2\r\n[2023/12/22 15:38:31] ppcls INFO: profiler_options : None\r\n[2023/12/22 15:38:31] ppcls INFO: train with paddle 2.5.2 and device Place(gpu:0)\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"E:\\2023_Code\\PaddlePaddle\\PaddleClas\\ppcls\\engine\\engine.py\", line 120, in __init__\r\n    self.train_dataloader = build_dataloader(\r\n  File \"E:\\2023_Code\\PaddlePaddle\\PaddleClas\\ppcls\\data\\__init__.py\", line 104, in build_dataloader\r\n    batch_sampler = eval(sampler_name)(dataset, **config_sampler)\r\n  File \"E:\\2023_Code\\PaddlePaddle\\PaddleClas\\ppcls\\data\\dataloader\\pk_sampler.py\", line 62, in __init__\r\n    assert len(self.label_list) * self.sample_per_label > self.batch_size, \\\r\nAssertionError: batch size should be smaller than\r\n```\r\n\r\n我的 class_num 就一个  所以写 1",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-22T07:42:23+00:00",
        "updated_at": "2025-03-04T09:21:47+00:00",
        "closed_at": "2025-03-04T06:37:04+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question",
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3075,
        "title": "Potential Bug in Evaluation Process on Windows in classification.py",
        "body": "我在使用 PaddleClas 进行模型测试时发现了一个潜在的问题。当运行环境为 Windows 操作系统时，最后一轮的 batch 测试样本似乎没有被正确处理。经过检查 classification.py 中的代码，我发现了以下逻辑：\r\n\r\n```\r\ntotal_samples = len(\r\n    engine.eval_dataloader.dataset) if not engine.use_dali else engine.eval_dataloader.size\r\nmax_iter = len(engine.eval_dataloader) - 1 if platform.system() == \"Windows\" else len(engine.eval_dataloader)\r\n```\r\n这段代码意味着如果运行平台为 \"Windows\"，max_iter 会被减少 1。这样的处理会导致最后一轮迭代的数据没有被测试，可能会影响整体测试结果的准确性。\r\n\r\n**重现步骤：**\r\n在 Windows 系统上配置 PaddleClas 环境。\r\n使用一个训练好的模型进行测试。\r\n观察最后一轮的 batch 是否被正确处理。\r\n\r\n**环境信息：**\r\nPaddlePaddle 版本: 2.5.2\r\nPaddleClas 版本: 2.4.0\r\n操作系统: Windows 10\r\nPython 版本: 3.8\r\n\r\n理想情况下，无论在哪个平台上，所有的测试样本都应该被正确处理和评估。希望能得到确认这是否是一个 bug，并在后续的版本中得到修复。",
        "state": "closed",
        "user": "Yukimini",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-26T09:00:59+00:00",
        "updated_at": "2025-03-04T09:21:49+00:00",
        "closed_at": "2025-03-04T06:37:05+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "bug"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3077,
        "title": "PP-ShituV2用命令行可以检测，用代码不能检测",
        "body": "`python predict_system.py -c ../configs/inference_general.yaml -o Global.infer_imgs=\"E:/001.jpg\"`\r\n```python\r\n\r\n2023-12-29 16:33:09 INFO: DetPostProcess :\r\n2023-12-29 16:33:09 INFO: DetPreProcess :\r\n2023-12-29 16:33:09 INFO:     transform_ops :\r\n2023-12-29 16:33:09 INFO:         DetResize :\r\n2023-12-29 16:33:09 INFO:             interp : 2\r\n2023-12-29 16:33:09 INFO:             keep_ratio : False\r\n2023-12-29 16:33:09 INFO:             target_size : [640, 640]\r\n2023-12-29 16:33:09 INFO:         DetNormalizeImage :\r\n2023-12-29 16:33:09 INFO:             is_scale : True\r\n2023-12-29 16:33:09 INFO:             mean : [0.485, 0.456, 0.406]\r\n2023-12-29 16:33:09 INFO:             std : [0.229, 0.224, 0.225]\r\n2023-12-29 16:33:09 INFO:         DetPermute :\r\n2023-12-29 16:33:09 INFO: Global :\r\n2023-12-29 16:33:09 INFO:     batch_size : 1\r\n2023-12-29 16:33:09 INFO:     cpu_num_threads : 10\r\n2023-12-29 16:33:09 INFO:     det_inference_model_dir : D:/PXAI/233998/3/DET_LL\r\n2023-12-29 16:33:09 INFO:     enable_benchmark : True\r\n2023-12-29 16:33:09 INFO:     enable_mkldnn : True\r\n2023-12-29 16:33:09 INFO:     enable_profile : False\r\n2023-12-29 16:33:09 INFO:     gpu_mem : 8000\r\n2023-12-29 16:33:09 INFO:     image_shape : [3, 640, 640]\r\n2023-12-29 16:33:09 INFO:     infer_imgs : E:/001.jpg\r\n2023-12-29 16:33:09 INFO:     ir_optim : True\r\n2023-12-29 16:33:09 INFO:     label_list : ['foreground']\r\n2023-12-29 16:33:09 INFO:     max_det_results : 5\r\n2023-12-29 16:33:09 INFO:     rec_inference_model_dir : D:/PXAI/233998/3/rec_LL\r\n2023-12-29 16:33:09 INFO:     rec_nms_thresold : 0.05\r\n2023-12-29 16:33:09 INFO:     threshold : 0.2\r\n2023-12-29 16:33:09 INFO:     use_fp16 : False\r\n2023-12-29 16:33:09 INFO:     use_gpu : True\r\n2023-12-29 16:33:09 INFO:     use_tensorrt : False\r\n2023-12-29 16:33:09 INFO: IndexProcess :\r\n2023-12-29 16:33:09 INFO:     batch_size : 32\r\n2023-12-29 16:33:09 INFO:     data_file : E:/PaddlePaddle/PaddleClas/ShuJu/LL/image_list.txt\r\n2023-12-29 16:33:09 INFO:     delimiter : /t\r\n2023-12-29 16:33:09 INFO:     dist_type : IP\r\n2023-12-29 16:33:09 INFO:     embedding_size : 512\r\n2023-12-29 16:33:09 INFO:     image_root : E:/PaddlePaddle/PaddleClas/ShuJu/LL/images\r\n2023-12-29 16:33:09 INFO:     index_dir : E:/PaddlePaddle/PaddleClas/ShuJu/LL/index\r\n2023-12-29 16:33:09 INFO:     index_method : HNSW32\r\n2023-12-29 16:33:09 INFO:     index_operation : new\r\n2023-12-29 16:33:09 INFO:     return_k : 5\r\n2023-12-29 16:33:09 INFO:     score_thres : 0.5\r\n2023-12-29 16:33:09 INFO: RecPostProcess : None\r\n2023-12-29 16:33:09 INFO: RecPreProcess :\r\n2023-12-29 16:33:09 INFO:     transform_ops :\r\n2023-12-29 16:33:09 INFO:         ResizeImage :\r\n2023-12-29 16:33:09 INFO:             backend : cv2\r\n2023-12-29 16:33:09 INFO:             interpolation : bilinear\r\n2023-12-29 16:33:09 INFO:             return_numpy : False\r\n2023-12-29 16:33:09 INFO:             size : [224, 224]\r\n2023-12-29 16:33:09 INFO:         NormalizeImage :\r\n2023-12-29 16:33:09 INFO:             mean : [0.485, 0.456, 0.406]\r\n2023-12-29 16:33:09 INFO:             order : hwc\r\n2023-12-29 16:33:09 INFO:             scale : 1.0/255.0\r\n2023-12-29 16:33:09 INFO:             std : [0.229, 0.224, 0.225]\r\n2023-12-29 16:33:09 INFO:         ToCHWImage : None\r\nindex_dir E:/PaddlePaddle/PaddleClas/ShuJu/LL/index\r\nInference: 257.21073150634766 ms per batch image\r\nresults [{'class_id': 0, 'score': 0.8642712, 'bbox': array([472.0199 , 269.6967 , 812.2822 , 961.27405], dtype=float32), 'label_name': 'foreground'}]\r\nscores, docs [[0.3738727  0.35400522 0.35075924 0.34733745 0.3449182 ]] [[227 217 226 257 219]]\r\nscores, docs [[0.08726057 0.07980811 0.07879247 0.07827625 0.07226871]] [[111 183 171 135 147]]\r\npreds {'bbox': [0, 0, 1280, 1280]}\r\noutput []\r\n[]\r\n```\r\n------------------\r\n\r\n\r\n`paddleclas --model_name=PP-ShiTuV2 --predict_type=shitu -o Global.infer_imgs='E:/001.jpg' -o IndexProcess.index_dir=E:/2023_Code/PaddlePaddle/PaddleClas/ShuJu/LL/index\r\n`\r\n```python\r\nInference: 328.0155658721924 ms per batch image\r\n[2023/12/29 16:36:42] ppcls INFO: [{'bbox': [528, 297, 745, 920], 'rec_docs': '3', 'rec_scores': 0.9852316}], filename: E:/001.jpg\r\n[2023/12/29 16:36:42] ppcls INFO: Predict complete!\r\n```\r\n",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2023-12-29T08:39:02+00:00",
        "updated_at": "2025-03-04T09:21:51+00:00",
        "closed_at": "2025-03-04T06:37:05+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question",
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3078,
        "title": "PaddleClas是否倒闭了,没人管",
        "body": "PaddleClas是否倒闭了,没人管",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "cuicheng01",
        "created_at": "2024-01-02T00:05:44+00:00",
        "updated_at": "2024-01-18T09:57:41+00:00",
        "closed_at": "2024-01-18T09:57:37+00:00",
        "comments_count": [
            "happybear1015",
            "imyhxy",
            "choipd",
            "cuicheng01",
            "cuicheng01",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3080,
        "title": "以图搜图功能用到提取特征的模型是否需要自己训练？",
        "body": "你好,我现在需要实现一个模板图搜索功能，模板数是不确定的，一直增长的。如果使用resnet50功能来进行特征提取，是否需要基于自己的数据进行训练，因为这个模板数是不确定的，请问这种该怎么训练，是使用度量学习的方式训练吗？\r\n",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-01-19T10:03:04+00:00",
        "updated_at": "2025-03-04T09:21:53+00:00",
        "closed_at": "2025-03-04T06:37:06+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": [
            "question",
            "PP-ShiTu"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3081,
        "title": "人体属性分类模型是否支持单属性训练？即一张图像只有一个属性的标签",
        "body": "您好，训练人体属性识别模型，需要添加自己的一部分数据，每一张图像把所有属性都标注比较困难，且难做到类别均衡。当前工程是否支持一张图仅负责一个属性的训练方式呢？即仍是多标签分类模型，但是训练时不同图像负责不同的属性。若有的话，请问训练标签应该是什么样子的？",
        "state": "closed",
        "user": "gsx1378",
        "closed_by": "gsx1378",
        "created_at": "2024-01-23T06:13:07+00:00",
        "updated_at": "2024-02-04T12:05:12+00:00",
        "closed_at": "2024-01-31T00:48:53+00:00",
        "comments_count": [
            "cuicheng01"
        ],
        "labels": [
            "question",
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3084,
        "title": "PaddleClas量化离线训练无法正常训练",
        "body": "# 运行环境\r\n\r\n* PaddlePaddle 2.6.0\r\n* PaddleClas 2.5\r\n\r\n# 问题排查\r\n\r\n## 文件出现原因排查\r\n按照文档运行后，死在[PaddleClas quant_post_static.py文件第65行](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/deploy/slim/quant_post_static.py#L65)\r\n\r\n该行调用了**paddleslim.quant.quant_post_static**函数，找到这个函数在[PaddleSlim quanter.py 第508行](https://github.com/PaddlePaddle/PaddleSlim/blob/develop/paddleslim/quant/quanter.py#L508)\r\n\r\n该函数调用**PostTrainingQuantization**函数，**PostTrainingQuantization**函数为Paddle框架函数在[Paddle post_training_quantization.py文件第113行](https://github.com/PaddlePaddle/Paddle/blob/1b8710a23ce628f103ec98eda70e397cc806d744/python/paddle/static/quantization/post_training_quantization.py#L113)\r\n\r\n继续往下排查发现错误出现在[Paddle post_training_quantization.py 第313行](https://github.com/PaddlePaddle/Paddle/blob/release/2.6/python/paddle/static/quantization/post_training_quantization.py#L313)，意思为必须传入**data_loader**参数\r\n\r\n## 尝试解决\r\n\r\n修改[PaddleClas quant_post_static.py文件](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/deploy/slim/quant_post_static.py#L65)，将PaddleClas构造的dataloader传入\r\n\r\n```python\r\n    paddleslim.quant.quant_post_static(\r\n        executor=exe,\r\n        data_loader=train_dataloader,\r\n        model_dir=config[\"Global\"][\"save_inference_dir\"],\r\n        model_filename='inference.pdmodel',\r\n        params_filename='inference.pdiparams',\r\n        quantize_model_path=os.path.join(\r\n            config[\"Global\"][\"save_inference_dir\"], \"quant_post_static_model\"),\r\n        sample_generator=sample_generator(train_dataloader),\r\n        batch_size=config[\"DataLoader\"][\"Eval\"][\"sampler\"][\"batch_size\"],\r\n        batch_nums=10)\r\n```\r\n\r\n报错如下：\r\n\r\n```text\r\nTraceback (most recent call last):\r\n  File \"/home/aistudio/PaddleClas/deploy/slim/quant_post_static.py\", line 93, in <module>\r\n    main()\r\n  File \"/home/aistudio/PaddleClas/deploy/slim/quant_post_static.py\", line 79, in main\r\n    paddleslim.quant.quant_post_static(\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/paddleslim-0.0.0.dev0-py3.10.egg/paddleslim/quant/quanter.py\", line 669, in quant_post_static\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/paddle/static/quantization/post_training_quantization.py\", line 452, in quantize\r\n    self._executor.run(\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/paddle/base/executor.py\", line 1742, in run\r\n    res = self._run_impl(\r\n  File \"/opt/conda/envs/python35-paddle120-env/lib/python3.10/site-packages/paddle/base/executor.py\", line 1881, in _run_impl\r\n    assert len(feed) == 1, \"Not compiled with data parallel\"\r\nAssertionError: Not compiled with data parallel\r\n```",
        "state": "closed",
        "user": "Zheng-Bicheng",
        "closed_by": "Zheng-Bicheng",
        "created_at": "2024-01-26T05:05:32+00:00",
        "updated_at": "2024-02-04T11:23:50+00:00",
        "closed_at": "2024-01-27T06:17:54+00:00",
        "comments_count": [
            "Zheng-Bicheng",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3085,
        "title": "Paddle Classification training issue - stuck",
        "body": "Hi there,\r\n\r\nI was trying to train a classification model using my own dataset and I referenced from this: https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_new_user.md\r\n\r\nHowever, when I tried to run tools/train.py, it does not seem to be training and my terminal is stuck at this page referenced below. How do I solve this issue?\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/home/PaddleClas/ppcls/engine/engine.py\", line 210, in __init__\r\n    self.model = build_model(self.config)\r\n  File \"/home/PaddleClas/ppcls/arch/__init__.py\", line 38, in build_model\r\n    arch = getattr(mod, model_type)(**arch_config)\r\n  File \"/home/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 494, in ResNet50_vd\r\n    **kwargs)\r\n  File \"/home/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 321, in __init__\r\n    for in_c, out_c, k, s in self.stem_cfg[version]\r\n  File \"/home/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 321, in <listcomp>\r\n    for in_c, out_c, k, s in self.stem_cfg[version]\r\n  File \"/home/PaddleClas/ppcls/arch/backbone/legendary_models/resnet.py\", line 132, in __init__\r\n    data_format=data_format)\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/nn/layer/conv.py\", line 646, in __init__\r\n    data_format=data_format)\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/nn/layer/conv.py\", line 135, in __init__\r\n    default_initializer=_get_default_param_initializer())\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/dygraph/layers.py\", line 412, in create_parameter\r\n    default_initializer)\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/layer_helper_base.py\", line 374, in create_parameter\r\n    **attr._to_kwargs(with_initializer=True))\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3193, in create_parameter\r\n    initializer(param, self)\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/initializer.py\", line 364, in __call__\r\n    stop_gradient=True)\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/framework.py\", line 3223, in append_op\r\n    kwargs.get(\"stop_gradient\", False))\r\n  File \"/usr/local/python3.7.0/lib/python3.7/site-packages/paddle/fluid/dygraph/tracer.py\", line 45, in trace_op\r\n    not stop_gradient)\r\nSystemError: (Fatal) Operator gaussian_random raises an thrust::system::system_error exception.\r\nThe exception content is\r\n:parallel_for failed: cudaErrorNoKernelImageForDevice: no kernel image is available for execution on the device. (at /paddle/paddle/fluid/imperative/tracer.cc:192)\r\n\r\n",
        "state": "closed",
        "user": "lokeycookie",
        "closed_by": "lokeycookie",
        "created_at": "2024-01-31T08:37:44+00:00",
        "updated_at": "2024-02-04T12:33:05+00:00",
        "closed_at": "2024-02-01T10:54:59+00:00",
        "comments_count": [
            "lokeycookie"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3083,
        "title": "训练集图像尺寸差异过大应该如何配置？",
        "body": "请问下，分类数据集图像尺寸差异过大，应该如何设置 ResizeImage 的相关配置。\r\n我希望将图像的短边resize到统一尺寸，长边按照短边进行缩放。\r\n目前看到这个[回答](https://github.com/PaddlePaddle/PaddleClas/issues/2642)。\r\n当我设置\r\n```\r\n        - ResizeImage:\r\n            resize_short: 48\r\n```\r\n提示\r\n```bash\r\n    raise ValueError('all input arrays must have the same shape')\r\nValueError: all input arrays must have the same shape\r\n```",
        "state": "closed",
        "user": "weirman",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-01-26T02:45:42+00:00",
        "updated_at": "2025-04-29T06:37:56+00:00",
        "closed_at": "2025-04-29T06:36:21+00:00",
        "comments_count": [
            "changdazhou",
            "weirman",
            "changdazhou",
            "weirman",
            "changdazhou",
            "weirman",
            "weirman",
            "cuicheng01",
            "weirman",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3086,
        "title": "How to use trained Resnet classification model in python code",
        "body": "Hi there,\r\n\r\nI have trained a classification model using this: https://github.com/PaddlePaddle/PaddleClas/blob/release/2.3/docs/zh_CN/quick_start/quick_start_classification_new_user.md\r\n\r\nHowever, I do not know how to call the trained model in python code as I wanted to use this model in my existing code.\r\nI do not want to run inference on an image using terminal.\r\n\r\nDoes anyone know how to do this?\r\n\r\n",
        "state": "closed",
        "user": "lokeycookie",
        "closed_by": "lokeycookie",
        "created_at": "2024-02-01T11:00:42+00:00",
        "updated_at": "2024-02-05T01:34:00+00:00",
        "closed_at": "2024-02-05T01:33:57+00:00",
        "comments_count": [
            "cuicheng01",
            "lokeycookie",
            "a31413510",
            "TingquanGao",
            "lokeycookie"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3087,
        "title": "SSLD数据集获取方式",
        "body": "PadddleClas中SSLD使用的400张额外的数据，请问一下是否有获取方式呀，如果没有的话是否提供一下相关的代码，因为SIFT等还有匹配度等细节，我这边想用一下SSLD",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-02-02T08:57:56+00:00",
        "updated_at": "2025-03-18T06:36:26+00:00",
        "closed_at": "2025-03-18T06:35:39+00:00",
        "comments_count": [
            "changdazhou",
            "cuicheng01",
            "violetweir",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3088,
        "title": "PaddleClas Python 3.11 支援",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas \r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS： Windows\r\n  b. Python版本号，如Python3.6/7/8： 3.11 \r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等: CPU\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n \r\n` pip install paddleclas`\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/7208012/f3acfa70-e43f-4721-8e95-ce5434d565be)\r\n\r\n各位大佬： 如何在python3.11里解决这问题？ 什么时候才会有Python3.11的支持？\r\n\r\n\r\n",
        "state": "closed",
        "user": "skwskwskwskw",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-02-05T09:52:56+00:00",
        "updated_at": "2025-04-01T06:35:35+00:00",
        "closed_at": "2025-04-01T06:35:31+00:00",
        "comments_count": [
            "cuicheng01",
            "skwskwskwskw",
            "cuicheng01",
            "jzhang533",
            "gouzil",
            "skwskwskwskw",
            "skwskwskwskw",
            "gouzil",
            "skwskwskwskw",
            "gouzil",
            "skwskwskwskw",
            "gouzil",
            "skwskwskwskw",
            "jzhang533",
            "skwskwskwskw",
            "jzhang533",
            "skwskwskwskw",
            "jzhang533",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3089,
        "title": "如何进行分类大模型的训练，并应用到下游任务。",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n我现在想用PaddleClas的分类模型进行自监督训练一个分类大模型，然后用这个大模型作为骨干网络应用到分类或者分割网络中进行微调，请问我应该如何做？\r\n",
        "state": "closed",
        "user": "ChenjieXu",
        "closed_by": "ChenjieXu",
        "created_at": "2024-02-06T07:09:21+00:00",
        "updated_at": "2024-02-19T02:01:44+00:00",
        "closed_at": "2024-02-19T02:01:40+00:00",
        "comments_count": [
            "cuicheng01",
            "ChenjieXu",
            "ChenjieXu"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3091,
        "title": "ResNeXt152_32x4d配置文件的模型名称存在错误",
        "body": "下面这两个文件内模型名称存在错误，需要修改文件内的所有该字段：\r\n- test_tipc/configs/ResNeXt/ResNeXt152_32x4d_train_amp_infer_python.txt\r\n- test_tipc/configs/ResNeXt/ResNeXt152_32x4d_train_infer_python.txt\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/104260574/7a923edb-7ed5-4070-972e-8afd171e88ff)\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/104260574/e5870707-9354-43b9-825a-e2eea6be1292)\r\n\r\n\r\n\r\n \r\n",
        "state": "closed",
        "user": "Tongkaio",
        "closed_by": "Tongkaio",
        "created_at": "2024-02-21T03:11:50+00:00",
        "updated_at": "2024-03-05T04:32:59+00:00",
        "closed_at": "2024-03-05T04:32:55+00:00",
        "comments_count": [
            "MINGtoMING",
            "Tongkaio"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3093,
        "title": "使用GeneralRecognitionV2_PPLCNetV2_base.yaml训练自己的数据集，有些参数如何调整",
        "body": "是否有文档解释下这个yaml文件中每个配置项的含义\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 20\r\n  use_visualdl: False\r\n  eval_mode: retrieval\r\n  retrieval_feature_from: features # 'backbone' or 'features'\r\n  re_ranking: False\r\n  use_dali: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n\r\nAMP:\r\n  scale_loss: 65536\r\n  use_dynamic_loss_scaling: True\r\n  # O1: mixed fp16\r\n  level: O1\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone:\r\n    name: PPLCNetV2_base_ShiTu\r\n    pretrained: True\r\n    use_ssld: True\r\n    class_expand: &feat_dim 512\r\n  BackboneStopLayer:\r\n    name: flatten\r\n  Neck:\r\n    name: BNNeck\r\n    num_features: *feat_dim\r\n    weight_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 1.0\r\n    bias_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 0.0\r\n      learning_rate: 1.0e-20 # NOTE: Temporarily set lr small enough to freeze the bias to zero\r\n  Head:\r\n    name: FC\r\n    embedding_size: *feat_dim\r\n    class_num: 192612\r\n    weight_attr:\r\n      initializer:\r\n        name: Normal\r\n        std: 0.001\r\n    bias_attr: False\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n    - TripletAngularMarginLoss:\r\n        weight: 1.0\r\n        feature_from: features\r\n        margin: 0.5\r\n        reduction: mean\r\n        add_absolute: True\r\n        absolute_loss_weight: 0.1\r\n        normalize_feature: True\r\n        ap_value: 0.8\r\n        an_value: 0.4\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.06 # for 8gpu x 256bs\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: L2\r\n    coeff: 0.00001\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/\r\n      cls_label_path: ./dataset/train_reg_all_data_v2.txt\r\n      relabel: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - Pad:\r\n            padding: 10\r\n            backend: cv2\r\n        - RandCropImageV2:\r\n            size: [224, 224]\r\n        - RandomRotation:\r\n            prob: 0.5\r\n            degrees: 90\r\n            interpolation: bilinear\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: hwc\r\n    sampler:\r\n      name: PKSampler\r\n      batch_size: 256\r\n      sample_per_id: 4\r\n      drop_last: False\r\n      shuffle: True\r\n      sample_method: \"id_avg_prob\"\r\n      id_list: [50030, 80700, 92019, 96015] # be careful when set relabel=True\r\n      ratio: [4, 4]\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    Query:\r\n      dataset:\r\n        name: VeriWild\r\n        image_root: ./dataset/Aliproduct/\r\n        cls_label_path: ./dataset/Aliproduct/val_list.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 64\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\n    Gallery:\r\n      dataset:\r\n        name: VeriWild\r\n        image_root: ./dataset/Aliproduct/\r\n        cls_label_path: ./dataset/Aliproduct/val_list.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 64\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\nMetric:\r\n  Eval:\r\n    - Recallk:\r\n        topk: [1, 5]\r\n    - mAP: {}\r\n",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-02-27T02:03:59+00:00",
        "updated_at": "2025-04-29T06:37:58+00:00",
        "closed_at": "2025-04-29T06:36:22+00:00",
        "comments_count": [
            "TingquanGao",
            "yaphet266",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3098,
        "title": "训练SwinTransformer模型，loss不下降",
        "body": "\r\n使用https://github.com/PaddlePaddle/PaddleClas代码，develop分支，训练SwinTransformer模型，不收敛，loss曲线一直上升。\r\n硬件环境：8卡A100 80G 和4卡A10\r\nCUDA版本：12.0和11.7\r\npaddle版本：paddlepaddle-gpu  2.6.0.post117\r\n操作系统：ubuntu18.04\r\n训练脚本：\r\n\r\npython\r\n-m paddle.distributed.launch\r\n--ips=\"127.0.0.1\"\r\n--devices=\"0,1,2,3,4,5,6,7\"\r\ntools/train.py \r\n-c ppcls/configs/ImageNet/SwinTransformer/SwinTransformer_base_patch4_window7_224.yaml\r\n\r\n现象：训练开始后，loss从2.6左右开始上升，一直呈上升趋势。\r\n\r\n问题排查，在训练超参中，添加了pretrain_mode，设置为null和指定模型，现象一样。\r\n\r\n请排查该问题，确保训练能正常执行，loss下降。",
        "state": "closed",
        "user": "lhscau",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-01T09:28:52+00:00",
        "updated_at": "2025-03-18T06:36:32+00:00",
        "closed_at": "2025-03-18T06:35:40+00:00",
        "comments_count": [
            "lhscau",
            "lhscau",
            "changdazhou",
            "lhscau",
            "changdazhou",
            "lhscau",
            "changdazhou",
            "lhscau",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3092,
        "title": "循环对主体检测结果进行特征提取很耗时",
        "body": "        for result in results:\r\n            preds = {}\r\n            xmin, ymin, xmax, ymax = result[\"bbox\"].astype(\"int\")\r\n            crop_img = img[ymin:ymax, xmin:xmax, :].copy()\r\n            start = time.time()\r\n            #特征识别\r\n            rec_results = self.rec_predictor.predict(crop_img)\r\n            end = time.time()\r\n            print('rec_predictor.predict程序运行时间为：', end - start, '秒')\r\n这个问题怎么解决，我知道调整\r\nthreshold，max_det_results参数可以控制输出数量，这对检测结果有些什么影响呢，   除了调整参数外能否将识别部分用c++实现，或者有更高明的方式\r\nrec_predictor.predict程序运行时间为： 0.2493739128112793 秒\r\nSearcher.search程序运行时间为： 0.0 秒\r\nrec_predictor.predict程序运行时间为： 0.21487092971801758 秒\r\n\r\nrec_predictor.predict这个数量是max_det_results决定的，我看通常是设置的5，这样好像计算要达到1秒了=5*0,2（估算）\r\n\r\n",
        "state": "closed",
        "user": "anlywxqwu",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-02-22T06:09:13+00:00",
        "updated_at": "2025-03-04T09:21:55+00:00",
        "closed_at": "2025-03-04T06:37:07+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3099,
        "title": "二分类训练评估时如何输出，正样本的精确率、召回率以及f1-score",
        "body": "在metrics.py中看没有该指标，使用自带的Recallk, Precisionk也报错，没有这两个输入参数\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/29060320/7cf281e6-988a-44f8-8757-97175531a207)\r\n",
        "state": "closed",
        "user": "wanghaoran-ucas",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-03T14:21:19+00:00",
        "updated_at": "2025-03-18T06:36:34+00:00",
        "closed_at": "2025-03-18T06:35:41+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3100,
        "title": "PaddleClas支持龙芯吗",
        "body": "如果支持，请给一个下载链接\r\n",
        "state": "closed",
        "user": "yujianxing",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-04T02:49:38+00:00",
        "updated_at": "2025-03-18T06:36:36+00:00",
        "closed_at": "2025-03-18T06:35:41+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3102,
        "title": "关于特征提取后进行feature_normalize的疑问",
        "body": "在”特征提取“脚本中，看通过模型提取到特征向量后，对原有向量进行了feature_normalize操作得到新的特征向量，请问该操作作用是什么，是不是必须的\r\n",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-04T07:48:49+00:00",
        "updated_at": "2025-04-29T06:37:59+00:00",
        "closed_at": "2025-04-29T06:36:23+00:00",
        "comments_count": [
            "cuicheng01",
            "yaphet266",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3103,
        "title": "您好，是否能提供MixFormer的源码？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "201722111112027",
        "closed_by": "cuicheng01",
        "created_at": "2024-03-05T02:21:09+00:00",
        "updated_at": "2024-03-15T07:54:24+00:00",
        "closed_at": "2024-03-15T07:54:21+00:00",
        "comments_count": [
            "cuicheng01",
            "201722111112027",
            "cuicheng01"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3105,
        "title": "缺少PULC_table_attribute.md文档",
        "body": "docs/zh_CN/models/PULC/model_list.md 中列了PULC_table_attribute.md（[PULC表格属性识别](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_table_attribute.md)），但并不存在，无法打开。\r\n",
        "state": "closed",
        "user": "icedream2linxi",
        "closed_by": "TingquanGao",
        "created_at": "2024-03-05T09:04:54+00:00",
        "updated_at": "2024-03-15T10:35:00+00:00",
        "closed_at": "2024-03-15T10:34:57+00:00",
        "comments_count": [
            "changdazhou",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3106,
        "title": "在进行训练时如果自己真实数据样本没有翻转的情况，数据增强RandFlipImage是不是可以不加",
        "body": "以下是截取的yaml文件内容\r\ntransform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        **- RandFlipImage:**\r\n            flip_code: 1\r\n        - Pad:\r\n            padding: 10\r\n            backend: cv2\r\n        - RandCropImageV2:\r\n            size: [224, 224]\r\n        **- RandomRotation:**\r\n            prob: 0.5\r\n            degrees: 90\r\n            interpolation: bilinear\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: hwc\r\n如果样本没有随机翻转的情况，RandFlipImage这个增强是不是可以不加，如果自己的数据样本有可能是旋转0度、90度、180度、270度，RandomRotation这块该怎么设置？",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-07T08:37:56+00:00",
        "updated_at": "2025-03-18T06:36:39+00:00",
        "closed_at": "2025-03-18T06:35:42+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3117,
        "title": "list index out of range的原因是？",
        "body": "Mac系统  PaddleClas-release-2.5  paddle2.6.1\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 31, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/Users/liqiyue/PycharmProjects/PaddleClas-release-2.5/ppcls/engine/engine.py\", line 120, in __init__\r\n    self.train_dataloader = build_dataloader(\r\n  File \"/Users/liqiyue/PycharmProjects/PaddleClas-release-2.5/ppcls/data/__init__.py\", line 91, in build_dataloader\r\n    dataset = eval(dataset_name)(**config_dataset)\r\n  File \"/Users/liqiyue/PycharmProjects/PaddleClas-release-2.5/ppcls/data/dataloader/imagenet_dataset.py\", line 41, in __init__\r\n    super(ImageNetDataset, self).__init__(image_root, cls_label_path,\r\n  File \"/Users/liqiyue/PycharmProjects/PaddleClas-release-2.5/ppcls/data/dataloader/common_dataset.py\", line 62, in __init__\r\n    self._load_anno()\r\n  File \"/Users/liqiyue/PycharmProjects/PaddleClas-release-2.5/ppcls/data/dataloader/imagenet_dataset.py\", line 72, in _load_anno\r\n    self.labels.append(np.int64(line[1]))\r\nIndexError: list index out of range\r\n",
        "state": "closed",
        "user": "cadeliqiyue",
        "closed_by": "cadeliqiyue",
        "created_at": "2024-03-31T01:18:09+00:00",
        "updated_at": "2024-04-01T01:04:22+00:00",
        "closed_at": "2024-04-01T01:04:19+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3109,
        "title": "图片分类训练时报错",
        "body": "1. PaddleClas 2.5.1   PaddlePaddle-gpu 2.6.0\r\n\r\n 2. 训练环境信息：\r\n  a. 操作系统：Linux\r\n  b. Python版本：Python3.10\r\n  c. CUDA 11.8\r\n数据集没有问题， 训练脚本python -m paddle.distributed.launch --gpus=\"0\"  tools/train.py -c ./ppcls/configs/quick_start/ResNet50_vd.yaml\r\n训练开始就报错\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/95615708/d0ed34bf-7391-42ba-b640-863693b72b78)\r\n，假如我把报错源码里的metric_dict[key].numpy()[0]下标去掉改成metric_dict[key].numpy()就没问题，训练时指标没什么异常，但是评估时准确率top1为0，loss值都好几百了，是因为我改了metric_dict[key].numpy()[0]这个的原因吗，有大佬知道怎么回事吗",
        "state": "closed",
        "user": "dencentding",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-12T08:33:47+00:00",
        "updated_at": "2024-03-15T03:29:43+00:00",
        "closed_at": "2024-03-15T03:29:25+00:00",
        "comments_count": [
            "dencentding"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3110,
        "title": "关于tripletangularmarginloss.py中的负样本类距离loss计算absolut_loss_an",
        "body": "你好，请问在[PaddleClas](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.5)/[ppcls](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.5/ppcls)/[loss](https://github.com/PaddlePaddle/PaddleClas/tree/release/2.5/ppcls/loss)\r\n/tripletangularmarginloss.py中\r\nL108的absolut_loss_an计算，对于dist_an<an_value的值为何是置为1而不是置为0？\r\ndist_an应该是小于an_value的，为什么在计算loss时对于小于an_value的dist_an给到了更大的loss?\r\n为何不使用如下计算：absolut_loss_an = paddle.where(absolut_loss_an > 0,absolut_loss_an,paddle.zeros_like(absolut_loss_an))？\r\n期待您的解答，谢谢\r\n![QQ截图20240318161757](https://github.com/PaddlePaddle/PaddleClas/assets/37264112/d64f9c3f-8dfe-46d0-9deb-53bb2c7c86bc)\r\n\r\n\r\n\r\n\r\n欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "aaaaaaaak",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-18T08:32:30+00:00",
        "updated_at": "2025-04-29T06:38:02+00:00",
        "closed_at": "2025-04-29T06:36:24+00:00",
        "comments_count": [
            "RainFrost1",
            "aaaaaaaak",
            "changdazhou",
            "aaaaaaaak",
            "changdazhou",
            "aaaaaaaak",
            "changdazhou",
            "aaaaaaaak",
            "changdazhou",
            "aaaaaaaak",
            "changdazhou",
            "aaaaaaaak",
            "zhangyubo0722",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3116,
        "title": "使用Python命令索引库如何更新",
        "body": "使用python3.7 python/predict_system.py -c configs/inference_general.yaml -o Global.infer_imgs=\"./drink_dataset_v2.0/test_images\"索引库怎么更新，drink_dataset_v2.0/gallery/drink_label_all.txt和drink_label.txt\r\n",
        "state": "closed",
        "user": "chenhop",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-03-28T07:30:19+00:00",
        "updated_at": "2025-04-29T06:38:04+00:00",
        "closed_at": "2025-04-29T06:36:24+00:00",
        "comments_count": [
            "cuicheng01",
            "chenhop",
            "chenhop",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3112,
        "title": "请问 paddleClas适合会计票据的分类吗",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n请问 paddleClas适合会计票据的分类吗。比如增值税专用发票、增值税电子普通发票、火车票、飞机票、银行票据这种的分类吗",
        "state": "open",
        "user": "rexzhengzhihong",
        "closed_by": null,
        "created_at": "2024-03-21T06:43:31+00:00",
        "updated_at": "2024-04-01T07:56:34+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "rexzhengzhihong"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3118,
        "title": "使用PPLCNetV2_base_ShiTu模型，在GPU上运行加速效果不明显",
        "body": "使用PPLCNetV2_base_ShiTu训练了一个特征提取网络，部署到GPU上后压测，发现GPU一直没有什么利用率，且相对于在CPU环境运行无明显效率的提升，请问这个是模型的问题吗还是我哪里设置错了",
        "state": "closed",
        "user": "yaphet266",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-01T08:18:36+00:00",
        "updated_at": "2025-04-08T06:35:11+00:00",
        "closed_at": "2025-04-08T06:35:06+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3119,
        "title": "PaddleClas,图像识别部署，根据2.5文档服务化部署预测过程中出现报错",
        "body": "1. PaddleClas版本:2.5\r\n2. 操作系统：Linux\r\n3. Python版本：Python3.7\r\n4. CUDA/cuDNN版本：CUDA11.2\r\n\r\n不知道是哪里出现了问题..........\r\n\r\nLog_id: 0\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle_serving_server/pipeline/error_catch.py\", line 97, in wrapper\r\n    res = func(*args, **kw)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle_serving_server/pipeline/error_catch.py\", line 160, in wrapper\r\n    raise CustomException(CustomExceptionCode.INPUT_PARAMS_ERROR, \"invalid arg list: {}\".format(invalid_argument_list), True)\r\npaddle_serving_server.pipeline.error_catch.CustomException:\r\n exception_code: 5000\r\n exception_type: INPUT_PARAMS_ERROR\r\n error_msg: invalid arg list: ['feed_batch']\r\n is_send_to_user: True\r\nClassname: Op.process.<locals>.feed_fetch_list_check_helper\r\nFunctionName: feed_fetch_list_check_helper\r\nArgs: ([{'image': array([[[[ 1.7552555e+00, 1.8148961e+00, 1.7683716e+00, ...,\r\n           2.1792855e+00, 2.1337092e+00, 2.1557925e+00],\r\n         [ 1.7678281e+00, 1.7241918e+00, 1.7089617e+00, ...,\r\n           2.1481514e+00, 2.1290350e+00, 2.1594498e+00],\r\n         [ 1.4959710e+00, 1.3775693e+00, 1.3104501e+00, ...,\r\n           2.1353230e+00, 2.1290350e+00, 2.1593294e+00],\r\n         ...,\r\n         [ 1.4529668e+00, 1.2177272e+00, 7.6402998e-01, ...,\r\n           1.0114311e-02, 5.0559867e-02, 5.0877661e-02],\r\n         [ 1.4787341e+00, 1.2957535e+00, 8.5338312e-01, ...,\r\n          -1.3550961e-02, 4.0748253e-02, -7.0087714e-03],\r\n         [ 1.4572664e+00, 1.3168416e+00, 1.0689977e+00, ...,\r\n          -5.6837790e-02, 3.0182380e-02, 2.0347409e-02]],\r\n        [[ 1.9443148e+00, 2.0044556e+00, 1.9560620e+00, ...,\r\n           2.3223805e+00, 2.3108013e+00, 2.3333771e+00],\r\n         [ 1.9876240e+00, 1.9372795e+00, 1.9159753e+00, ...,\r\n           2.2905517e+00, 2.3060226e+00, 2.3371162e+00],\r\n         [ 1.7488244e+00, 1.6234032e+00, 1.5504090e+00, ...,\r\n           2.2774370e+00, 2.3060226e+00, 2.3369932e+00],\r\n         ...,\r\n         [ 1.6323705e+00, 1.4378358e+00, 1.0506046e+00, ...,\r\n           1.0479035e-01, 1.2421219e-01, 1.1144952e-01],\r\n         [ 1.6403871e+00, 1.5176039e+00, 1.1419522e+00, ...,\r\n           6.8877219e-02, 8.0772944e-02, 1.9691624e-02],\r\n         [ 1.5986216e+00, 1.5334285e+00, 1.3375313e+00, ...,\r\n           1.3297900e-03, 3.9848611e-02, 2.7716808e-02]],\r\n        [[ 2.2278881e+00, 2.2883132e+00, 2.2406859e+00, ...,\r\n           2.5865686e+00, 2.5227530e+00, 2.5103703e+00],\r\n         [ 2.2832479e+00, 2.2383115e+00, 2.2222865e+00, ...,\r\n           2.5548813e+00, 2.5179956e+00, 2.5273280e+00],\r\n         [ 2.0658493e+00, 1.9433855e+00, 1.8731155e+00, ...,\r\n           2.5418246e+00, 2.5179956e+00, 2.5488286e+00],\r\n         ...,\r\n         [ 1.5464119e+00, 1.3130666e+00, 8.6728597e-01, ...,\r\n           1.1739653e-01, 1.8901964e-01, 1.7631368e-01],\r\n         [ 1.6102378e+00, 1.3673422e+00, 9.4741601e-01, ...,\r\n           8.2498997e-02, 1.5320638e-01, 1.1739823e-01],\r\n         [ 1.6150274e+00, 1.3576574e+00, 1.1107703e+00, ...,\r\n           3.1824980e-02, 1.2177086e-01, 1.4524069e-01]]]],\r\n      dtype=float32), 'im_shape': array([[640, 640]]), 'scale_factor': array([[0.79800499, 0.53333333]])}], ['save_infer_model/scale_0.tmp_1'])\r\nERROR 2024-04-10 08:46:57,437 [operator.py:1101] [det] failed to predict. Log_id: 0 Raise_msg: invalid arg list ClassName: Op.process.<locals>.feed_fetch_list_check_helper FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.\r\nINFO 2024-04-10 08:46:57,438 [operator.py:1488] prometheus inf count +1\r\nERROR 2024-04-10 08:46:57,441 [dag.py:420] (data_id=0 log_id=0) Failed to predict: [det] failed to predict. Log_id: 0 Raise_msg: invalid arg list ClassName: Op.process.<locals>.feed_fetch_list_check_helper FunctionName: feed_fetch_list_check_helper. Please check the input dict and checkout PipelineServingLogs/pipeline.log for more details.\r\n",
        "state": "closed",
        "user": "liangasheng",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-10T08:59:46+00:00",
        "updated_at": "2025-04-29T06:38:06+00:00",
        "closed_at": "2025-04-29T06:36:25+00:00",
        "comments_count": [
            "cuicheng01",
            "liangasheng",
            "ericosmic",
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3122,
        "title": "PaddleClas 如何实现模型在train 以及 infer 的时候使用不同分支的forword",
        "body": "您好麻烦询问一下\r\nRepVgg在训练的时候会使用3x3 1x1 de1Repvgg 模块 在模型导出以及预测的时候可以将3x3 和1x1 的block合成一个block \r\n我也想实现在训练和预测的时候在forward阶段进行不同的操作 paddleclas以及paddle应该如何做才可以呀\r\n\r\n",
        "state": "closed",
        "user": "violetweir",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-13T01:20:14+00:00",
        "updated_at": "2025-04-29T06:38:09+00:00",
        "closed_at": "2025-04-29T06:36:26+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3121,
        "title": "一张图片中两行文字发生了折叠，如果有文字发生折叠的图片和文字未发生折叠的图片，用哪一个分类模型效果会好一些？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n 5.发生折叠的数据集大概如下图这种形式\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/107532297/83e6b453-a7ec-450c-9901-37233aa848a2)\r\n\r\n",
        "state": "closed",
        "user": "danxuan2022",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-12T09:05:38+00:00",
        "updated_at": "2025-06-10T06:40:13+00:00",
        "closed_at": "2025-06-10T06:39:32+00:00",
        "comments_count": [
            "changdazhou",
            "danxuan2022",
            "danxuan2022",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3123,
        "title": "KeyError: 'save_infer_model/scale_0.tmp_1.lod'",
        "body": "利用pdserving 部署ppshitu ， 启动服务正常，请求服务时报错如下：\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/09d0c74b-4d58-4ece-88e5-5b83014d7c4d)\r\n\r\n查看日志中报错信息如下：\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/c912c5b0-44f8-47ef-b59c-d9d1fdf2c87a)\r\n\r\n有人遇到过这个问题吗\r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-15T08:10:31+00:00",
        "updated_at": "2025-04-29T06:38:10+00:00",
        "closed_at": "2025-04-29T06:36:27+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3125,
        "title": "PPLCNetV2_base_ShiTu模型增加图片的分辨率跟输出的维数会增加检索精度吗？",
        "body": null,
        "state": "closed",
        "user": "intjun",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-19T07:11:24+00:00",
        "updated_at": "2025-04-29T06:38:12+00:00",
        "closed_at": "2025-04-29T06:36:28+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3126,
        "title": "Direct prediction API",
        "body": "I was working in prediction of binary classification model under the following environment:\r\n```\r\n1. PaddleClas and PaddlePaddle version: PaddleClas release/2.5 and PaddlePaddle 2.6\r\n2. Environmental\r\n  a. OS: Linux\r\n  b. Python 3.12\r\n  c. CUDA/cuDNN version: CUDA11.7/cuDNN 8.4\r\n```\r\nso I used the ```python python/predict_cls.py``` to predict my own images, however I would like to know if I can pass the images as ndarray since I want to customize the prediction script for convenient inference?\r\n\r\nThanks!",
        "state": "closed",
        "user": "TheMattBin",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-20T06:58:21+00:00",
        "updated_at": "2025-04-29T06:38:13+00:00",
        "closed_at": "2025-04-29T06:36:29+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3129,
        "title": "release/2.5 ModuleNotFoundError: No module named 'ppcls'",
        "body": " 1. PaddleClas: release/2.5 \r\n 2. 参考文档：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PP-ShiTu/README.md\r\n 3. 构建索引库：\r\n ```\r\npaddleclas --build_gallery=True --model_name=\"PP-ShiTuV2\" \\\r\n-o IndexProcess.image_root=./drink_dataset_v2.0/gallery/ \\\r\n-o IndexProcess.index_dir=./drink_dataset_v2.0/index \\\r\n-o IndexProcess.data_file=./drink_dataset_v2.0/gallery/drink_label.txt\r\n```\r\n   或者执行预测：\r\n`python3.7 python/predict_system.py -c configs/inference_general.yaml -o Global.infer_imgs=\"./drink_dataset_v2.0/test_images/100.jpeg\" -o Global.use_gpu=False`\r\n\r\n都报错：ModuleNotFoundError: No module named 'ppcls'",
        "state": "closed",
        "user": "xuehy",
        "closed_by": "xuehy",
        "created_at": "2024-04-25T03:58:44+00:00",
        "updated_at": "2025-02-08T06:36:20+00:00",
        "closed_at": "2024-05-06T05:28:37+00:00",
        "comments_count": [
            "changdazhou",
            "xuehy",
            "changdazhou",
            "chinesejunzai12",
            "chinesejunzai12",
            "timelovery",
            "Toomooyaa"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3127,
        "title": "关于paddleClas和paddlepaddle版本的问题",
        "body": "你好，当前使用了飞桨最新的版本2.6.1的GPU版本，发现在执行项目的时候会报错，目前是不支持paddle最新版本吗，如果不是，当前支持的paddle版本是哪个，另外一个很大的问题是，在执行deploy/python下的脚本的时候，总是报各种找不到，比如paddleClas找不到，已经克隆了整个代码到Linux环境了，这是这么回事，即使执行了pip install paddleclas   也是有问题，比如在执行predict_cls.py的时候报`  super().__init__(config[\"Global\"])\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddleclas/deploy/utils/predictor.py\", line 29, in __init__\r\n    if args.use_fp16 is True:\r\n  File \"/usr/local/lib/python3.8/dist-packages/paddleclas/deploy/utils/config.py\", line 27, in __getattr__\r\n    return self[key]\r\nKeyError: 'use_fp16'`",
        "state": "closed",
        "user": "BeyondYourself",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-22T08:53:51+00:00",
        "updated_at": "2025-05-27T06:35:15+00:00",
        "closed_at": "2025-05-27T06:35:09+00:00",
        "comments_count": [
            "changdazhou",
            "changdazhou",
            "redforg",
            "changdazhou",
            "redforg",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3130,
        "title": " paddleclas.PaddleClas使用inference_model_dir指定模型PULC模型识别有误",
        "body": " 1. PaddleClas版本：PaddleClas release/2.5 和 PaddlePaddle 2.6.1\r\n \r\n 2. 训练环境信息：\r\n  a. 具体操作系统， Windows \r\n  b. Python版本号，Python3.9\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/cuDNN 8\r\n\r\n3. 错误信息及相关log\r\n\r\nmodel = paddleclas.PaddleClas(model_name=\"person_exists\")\r\nmodel = paddleclas.PaddleClas(inference_model_dir=\"inference_model/PULC/person_exists\")\r\n\r\ninference_model_dir 指定的模型识别结果个模型无关，使用 model.get_config() 发现配置参数与 model_name方式 不一致。\r\n\r\n排查问题发现在paddleclas.BASE_DIR 指定了 ~/.paddleclas/ 文件路径且无法动态修改，在 PaddleClas __init__() 方法修改变量可实现\r\n\r\nglobal BASE_DIR, BASE_INFERENCE_MODEL_DIR\r\n        if base_dir:\r\n            BASE_DIR = base_dir\r\n            BASE_INFERENCE_MODEL_DIR = os.path.join(BASE_DIR, \"inference_model\")\r\n\r\n是否还有其他方法可以指定PaddleClas model_name路径？",
        "state": "closed",
        "user": "solivara",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-25T08:36:42+00:00",
        "updated_at": "2025-04-29T06:38:15+00:00",
        "closed_at": "2025-04-29T06:36:30+00:00",
        "comments_count": [
            "changdazhou",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3133,
        "title": "想要做一个文物拍照识别的课题研究，PP-ShituV2是否适合？",
        "body": "想要做一个文物拍照识别的课题研究，文物有：陶器、瓷器、石刻、雕像、壁画、字画几种，每类文物有10-130件不等，总共有400多件。\r\n最终想要通过通过手机拍照，然后识别出照片中有几个文物，然后可以根据文物名称，关联检索我们文物数据库中的相关数据资料。\r\n\r\n以前只接触过OCR文字和版式识别，对于物体检测是刚接触，相要知道，用PP-ShituV2是否能够实现这个目标？\r\n我需要怎么准备训练数据集？例如应该怎么拍照、拍多少张比较好、需要怎么标注？\r\n需要准备多少训练数据？\r\n怎么保证最终识别的准确度？等等\r\n\r\n望各位大佬不吝赐教，给小萌新指导一下。\r\n",
        "state": "closed",
        "user": "fashioncoolwan",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-04-30T08:35:30+00:00",
        "updated_at": "2025-05-13T06:36:43+00:00",
        "closed_at": "2025-05-13T06:36:39+00:00",
        "comments_count": [
            "fashioncoolwan",
            "TingquanGao",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3134,
        "title": "pp-shituv2 使用paddleserving部署后启动服务运行python3.7 pipeline_http_client.py报/home/aistudio/PaddleClas/deploy/paddleserving/recognition {'err_no': 8, 'err_msg': \"(data_id=0 log_id=0) [det|0] Failed to postprocess: 'scale_factor.lod'\", 'key': [], 'value': [], 'tensors': []}",
        "body": "paddleServing部署时，启动http客户端，报错\r\n\r\n/home/aistudio/PaddleClas/deploy/paddleserving/recognition {'err_no': 8, 'err_msg': \"(data_id=0 log_id=0) [det|0] Failed to postprocess: 'scale_factor.lod'\", 'key': [], 'value': [], 'tensors': []}\r\n\r\n识别推理模型serving_server_conf.prototxt文件是：\r\nfeed_var {\r\nname: \"x\"\r\nalias_name: \"x\"\r\nis_lod_tensor: false\r\nfeed_type: 1\r\nshape: 3\r\nshape: 224\r\nshape: 224\r\n}\r\nfetch_var {\r\nname: \"scale_factor\"\r\nalias_name: \"features\"\r\nis_lod_tensor: false\r\nfetch_type: 1\r\nshape: 512\r\n}\r\n\r\n通用检测模型.prototxt文件是：\r\nfeed_var {\r\nname: \"im_shape\"\r\nalias_name: \"im_shape\"\r\nis_lod_tensor: false\r\nfeed_type: 1\r\nshape: 2\r\n}\r\nfeed_var {\r\nname: \"image\"\r\nalias_name: \"image\"\r\nis_lod_tensor: false\r\nfeed_type: 1\r\nshape: 3\r\nshape: 416\r\nshape: 416\r\n}\r\nfeed_var {\r\nname: \"scale_factor\"\r\nalias_name: \"scale_factor\"\r\nis_lod_tensor: false\r\nfeed_type: 1\r\nshape: 2\r\n}\r\nfetch_var {\r\nname: \"save_infer_model/scale_0.tmp_1\"\r\nalias_name: \"save_infer_model/scale_0.tmp_1\"\r\nis_lod_tensor: true\r\nfetch_type: 1\r\nshape: -1\r\n}\r\nfetch_var {\r\nname: \"save_infer_model/scale_1.tmp_1\"\r\nalias_name: \"save_infer_model/scale_1.tmp_1\"\r\nis_lod_tensor: false\r\nfetch_type: 2\r\n}\r\n\r\n\r\nconfig.yml\r\n#worker_num, 最大并发数。当build_dag_each_worker=True时, 框架会创建worker_num个进程，每个进程内构建grpcSever和DAG\r\n##当build_dag_each_worker=False时，框架会设置主线程grpc线程池的max_workers=worker_num\r\nworker_num: 1\r\n\r\n#http端口, rpc_port和http_port不允许同时为空。当rpc_port可用且http_port为空时，不自动生成http_port\r\nhttp_port: 18080\r\nrpc_port: 9993\r\n\r\ndag:\r\n#op资源类型, True, 为线程模型；False，为进程模型\r\nis_thread_op: False\r\nop:\r\nimagenet:\r\n#并发数，is_thread_op=True时，为线程并发；否则为进程并发\r\nconcurrency: 1\r\n\r\n    #当op配置没有server_endpoints时，从local_service_conf读取本地服务配置\r\n    local_service_conf:\r\n\r\n        #uci模型路径\r\n        model_config: ResNet50_vd_serving\r\n\r\n        #计算硬件类型: 空缺时由devices决定(CPU/GPU)，0=cpu, 1=gpu, 2=tensorRT, 3=arm cpu, 4=kunlun xpu\r\n        device_type: 1\r\n\r\n        #计算硬件ID，当devices为\"\"或不写时为CPU预测；当devices为\"0\", \"0,1,2\"时为GPU预测，表示使用的GPU卡\r\n        devices: \"0\" # \"0,1\"\r\n\r\n        #client类型，包括brpc, grpc和local_predictor.local_predictor不启动Serving服务，进程内预测\r\n        client_type: local_predictor\r\n\r\n        #Fetch结果列表，以client_config中fetch_var的alias_name为准\r\n        fetch_list: [\"prediction\"]\r\n\r\npipeline.log中报错显示\r\nTraceback (most recent call last):\r\nFile \"/home/aistudio/.data/webide/pip/lib/python3.7/site-packages/paddle_serving_server/pipeline/operator.py\", line 1105, in _run_postprocess\r\nlogid_dict.get(data_id))\r\nFile \"recognition_web_service.py\", line 94, in postprocess\r\nboxes = self.img_postprocess(fetch_dict, visualize=False)\r\nFile \"/home/aistudio/.data/webide/pip/lib/python3.7/site-packages/paddle_serving_app/reader/image_reader.py\", line 427, in call\r\nself.clsid2catid)\r\nFile \"/home/aistudio/.data/webide/pip/lib/python3.7/site-packages/paddle_serving_app/reader/image_reader.py\", line 344, in _get_bbox_result\r\nlod = [fetch_map[fetch_name + '.lod']]\r\nKeyError: 'scale_factor.lod'\r\nERROR 2024-03-18 19:23:33,028 [dag.py:410] (data_id=0 log_id=0) Failed to predict: (data_id=0 log_id=0) [det|0] Failed to postprocess: 'scale_factor.lod'\r\n\r\n\r\n",
        "state": "open",
        "user": "sloyqi",
        "closed_by": null,
        "created_at": "2024-05-06T09:02:31+00:00",
        "updated_at": "2024-05-13T06:58:57+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "sloyqi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3137,
        "title": "训练时报错 OSError: (External) CUDA error(719), unspecified launch failure.",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：2.4\r\n  a. 具体操作系统，Windows10\r\n  b. Python版本号，Python38\r\n  c. CUDA/cuDNN版本， CUDA11.7\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nError: C:\\home\\workspace\\Paddle\\paddle\\phi\\kernels\\gpu\\cross_entropy_kernel.cu:1010 Assertion `false` failed. The value of label expected >= 0 and < 7, or == -100, but got 29. Please check label value. \r\nError: C:\\home\\workspace\\Paddle\\paddle\\phi\\kernels\\gpu\\cross_entropy_kernel.cu:1010 Assertion `false` failed. The value of label expected >= 0 and < 7, or == -100, but got 29. Please check label value. \r\nError: C:\\home\\workspace\\Paddle\\paddle\\phi\\kernels\\gpu\\cross_entropy_kernel.cu:1010 Assertion `false` failed. The value of label expected >= 0 and < 7, or == -100, but got 29. Please check label value. \r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"F:\\code\\PaddleClas\\ppcls\\engine\\engine.py\", line 339, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"F:\\code\\PaddleClas\\ppcls\\engine\\train\\train.py\", line 54, in train_epoch\r\n    loss_dict = engine.train_loss_func(out, batch[1])\r\n  File \"F:\\code\\PaddleClas\\ppcls\\loss\\__init__.py\", line 58, in __call__\r\n    loss = self.loss_func[0](input, batch)\r\n  File \"D:\\anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\nn\\layer\\layers.py\", line 1254, in __call__\r\n    return self.forward(*inputs, **kwargs)\r\n  File \"F:\\code\\PaddleClas\\ppcls\\loss\\celoss.py\", line 57, in forward\r\n    loss = F.cross_entropy(x, label=label, soft_label=soft_label)\r\n  File \"D:\\anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\nn\\functional\\loss.py\", line 2790, in cross_entropy\r\n    if paddle.count_nonzero(is_ignore) > 0:  # ignore label\r\n  File \"D:\\anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\dygraph\\tensor_patch_methods.py\", line 673, in __bool__\r\n    return self.__nonzero__()\r\n  File \"D:\\anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\dygraph\\tensor_patch_methods.py\", line 670, in __nonzero__\r\n    return bool(np.array(self) > 0)\r\n  File \"D:\\anaconda\\envs\\PaddleClas\\lib\\site-packages\\paddle\\fluid\\dygraph\\tensor_patch_methods.py\", line 696, in __array__\r\n    array = self.numpy(False)\r\nOSError: (External) CUDA error(719), unspecified launch failure.\r\n  [Hint: 'cudaErrorLaunchFailure'. An exception occurred on the device while executing a kernel. Common causes include dereferencing an invalid device pointerand accessing out of bounds shared memory. L\r\ness common cases can be system specific - more information about these cases canbe found in the system specific user guide. This leaves the process in an inconsistent state and any further CUDA work willreturn the same error. To continue using CUDA, the process must be terminated and relaunched.] (at ..\\paddle\\phi\\backends\\gpu\\cuda\\cuda_info.cc:267)\r\n········\r\n上面是报错信息\r\n\r\n我得cuda环境是没问题的，训练OCR都可以。下面是配置文件与分类文件\r\n······\r\n[class_gt.txt](https://github.com/PaddlePaddle/PaddleClas/files/15248013/class_gt.txt)\r\n[PPLCNet_x1_0_search.txt](https://github.com/PaddlePaddle/PaddleClas/files/15248014/PPLCNet_x1_0_search.txt)\r\n",
        "state": "closed",
        "user": "q465414859",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-08T11:30:43+00:00",
        "updated_at": "2025-07-01T06:37:19+00:00",
        "closed_at": "2025-07-01T06:37:19+00:00",
        "comments_count": [
            "q465414859",
            "q465414859",
            "q465414859",
            "cuicheng01",
            "q465414859",
            "cuicheng01",
            "q465414859",
            "cuicheng01",
            "chinesejunzai12"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3142,
        "title": "怎么训练出不带reshape2算子的general_PPLCNetV2_base模型？",
        "body": "训练步骤：\r\n1.  使用配置文件进行训练`ppcls/configs/GeneralRecognitionV2/GeneralRecognitionV2_PPLCNetV2_base.yaml`\r\n2.  导出推理模型 `python tools/export_model.py`\r\n3.  使用`Paddle-Lite`的`opt`工具统计模型算子信息发现带有`arm`架构不支持的`reshape2`算子\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/59115919/af790f85-e114-4ac3-8f3c-6b0a5de668b7)\r\n4.  使用`Paddle-Lite`的`opt`工具统计`shitu_android_demo`自带模型算子信息\r\n`https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/lite/ppshituv2_lite_models_v1.0.tar`\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/59115919/382742c4-2d38-4747-aece-475359cc00f7)\r\n\r\n 1. PaddleClas版本以及PaddlePaddle版本：PaddlePaddle release/2.5.2 PaddleClas develop\r\n 4. 涉及的其他产品使用的版本号：Paddle-Lite develop\r\n 6. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， 如CUDA11.7\r\n 7. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "lemon3853",
        "closed_by": "lemon3853",
        "created_at": "2024-05-14T01:57:27+00:00",
        "updated_at": "2024-05-20T09:16:38+00:00",
        "closed_at": "2024-05-20T09:16:35+00:00",
        "comments_count": [
            "cuicheng01",
            "lemon3853"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3146,
        "title": "首次接触paddle，我想在win10上部署，应该看哪个教程",
        "body": null,
        "state": "closed",
        "user": "TS0048",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-14T13:32:14+00:00",
        "updated_at": "2025-06-10T06:40:18+00:00",
        "closed_at": "2025-06-10T06:39:33+00:00",
        "comments_count": [
            "cuicheng01",
            "TS0048",
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3148,
        "title": "ERROR: Unexpected segmentation fault encountered in DataLoader workers.",
        "body": "# ERROR: Unexpected segmentation fault encountered in DataLoader workers.\r\n\r\n```\r\nPlease NOTE: device: 3, GPU Compute Capability: 8.9, Driver API Version: 12.2, Runtime API Version: 11.7\r\nW0519 00:39:16.069731  4952 gpu_resources.cc:164] device: 3, cuDNN Version: 8.4.\r\n======================= Modified FLAGS detected =======================\r\nFLAGS(name='FLAGS_max_inplace_grad_add', current_value=8, default_value=0)\r\nFLAGS(name='FLAGS_selected_gpus', current_value='3', default_value='')\r\nFLAGS(name='FLAGS_cudnn_batchnorm_spatial_persistent', current_value=True, default_value=False)\r\n=======================================================================\r\nI0519 00:39:18.472234  4952 tcp_utils.cc:107] Retry to connect to 127.0.0.1:50832 while the server is not yet listening.\r\nI0519 00:39:21.472563  4952 tcp_utils.cc:130] Successfully connected to 127.0.0.1:50832\r\nI0519 00:39:21.480532  4952 process_group_nccl.cc:129] ProcessGroupNCCL pg_timeout_ 1800000\r\nERROR: Unexpected segmentation fault encountered in DataLoader workers.\r\n```\r\nPaddlePaddle 2.6.1\r\nCentos 7\r\nPython 3.10.14\r\ncuda-version              11.7                 h67201e3_3    conda-forge\r\ncudatoolkit               11.7.1              h4bc3d14_13    conda-forge\r\ncudnn                     8.4.1.50             hed8a83a_0    conda-forge\r\n\r\n",
        "state": "open",
        "user": "huaibovip",
        "closed_by": null,
        "created_at": "2024-05-19T03:50:12+00:00",
        "updated_at": "2024-06-09T07:50:34+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "huaibovip"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3143,
        "title": "训练报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：paddlepaddle-gpu 2.5.2    paddleclas 2.4.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows\r\n  b. Python版本号，Python 3.8.19\r\n  c. CUDA/cuDNN版本， Version: 12.2, Runtime API Version: 11.8\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine.train()\r\n  File \"F:\\code\\PaddleClas\\ppcls\\engine\\engine.py\", line 339, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"F:\\code\\PaddleClas\\ppcls\\engine\\train\\train.py\", line 78, in train_epoch\r\n    update_metric(engine, out, batch, batch_size)\r\n  File \"F:\\code\\PaddleClas\\ppcls\\engine\\train\\utils.py\", line 28, in update_metric\r\n    trainer.output_info[key].update(metric_dict[key].numpy()[0],\r\nIndexError: too many indices for array: array is 0-dimensional, but 1 were indexed\r\n\r\n\r\n\r\n(PaddleClas) F:\\code\\PaddleClas>pip list\r\nPackage               Version\r\n--------------------- -----------\r\nanyio                 4.3.0\r\nastor                 0.8.1\r\nBabel                 2.14.0\r\nbce-python-sdk        0.9.7\r\nblinker               1.8.1\r\ncachetools            5.3.3\r\ncertifi               2024.2.2\r\ncharset-normalizer    3.3.2\r\nclick                 8.1.7\r\ncolorama              0.4.6\r\ncontourpy             1.1.1\r\ncssselect             1.2.0\r\ncssutils              2.10.2\r\ncycler                0.12.1\r\nCython                3.0.10\r\ndecorator             5.1.1\r\neasydict              1.13\r\net-xmlfile            1.1.0\r\nexceptiongroup        1.2.1\r\nfaiss-cpu             1.7.1.post2\r\nFlask                 3.0.3\r\nflask-babel           4.0.0\r\nfonttools             4.51.0\r\nfuture                1.0.0\r\ngast                  0.3.3\r\nh11                   0.14.0\r\nhttpcore              1.0.5\r\nhttpx                 0.27.0\r\nidna                  3.7\r\nimageio               2.34.1\r\nimgaug                0.4.0\r\nimportlib_metadata    7.1.0\r\nimportlib_resources   6.4.0\r\nitsdangerous          2.2.0\r\nJinja2                3.1.3\r\njoblib                1.4.2\r\nkiwisolver            1.4.5\r\nlazy_loader           0.4\r\nLevenshtein           0.25.1\r\nlmdb                  1.4.1\r\nlxml                  5.2.1\r\nMarkupSafe            2.1.5\r\nmatplotlib            3.7.5\r\nnetworkx              3.1\r\nnumpy                 1.24.4\r\nopencv-contrib-python 4.4.0.46\r\nopencv-python         4.4.0.46\r\nopenpyxl              3.1.2\r\nopt-einsum            3.3.0\r\npackaging             24.0\r\npaddleclas            2.4.0\r\npaddlepaddle-gpu      2.5.2\r\npandas                2.0.3\r\npillow                10.3.0\r\npip                   24.0\r\npremailer             3.10.0\r\nprettytable           3.10.0\r\nprotobuf              3.20.2\r\npsutil                5.9.8\r\npyclipper             1.3.0.post5\r\npycryptodome          3.20.0\r\npyparsing             3.1.2\r\npython-dateutil       2.9.0.post0\r\npython-Levenshtein    0.25.1\r\npytz                  2024.1\r\nPyWavelets            1.4.1\r\nPyYAML                6.0.1\r\nrapidfuzz             3.9.0\r\nrarfile               4.2\r\nrequests              2.31.0\r\nscikit-image          0.21.0\r\nscikit-learn          1.3.2\r\nscipy                 1.10.1\r\nsetuptools            69.5.1\r\nshapely               2.0.4\r\nsix                   1.16.0\r\nsniffio               1.3.1\r\nthreadpoolctl         3.5.0\r\ntifffile              2023.7.10\r\ntqdm                  4.66.4\r\ntyping_extensions     4.11.0\r\ntzdata                2024.1\r\nujson                 5.9.0\r\nurllib3               2.2.1\r\nvisualdl              2.5.3\r\nwcwidth               0.2.13\r\nWerkzeug              3.0.2\r\nwheel                 0.43.0\r\nzipp                  3.18.1\r\n\r\n\r\n用的Flowers102测试数据 https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/single_label_classification/dataset.md#1-%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E \r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/26251132/96df4d06-fd1f-424b-b9cf-2355be8d497d)\r\n\r\n执行后报错！",
        "state": "closed",
        "user": "q465414859",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-14T07:07:59+00:00",
        "updated_at": "2025-07-08T06:37:40+00:00",
        "closed_at": "2025-07-08T06:37:37+00:00",
        "comments_count": [
            "q465414859",
            "kaikaizhu",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3149,
        "title": "我运行的是PP-ShitV2（PP-ShiTu PC端 demo 快速体验），我想修改代码，使输出结果可以显示三个种类可能性，请问如何修改代码",
        "body": null,
        "state": "closed",
        "user": "TS0048",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-21T05:55:24+00:00",
        "updated_at": "2025-06-10T06:40:20+00:00",
        "closed_at": "2025-06-10T06:39:35+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3150,
        "title": "ImportError: cannot import name 'ClsPredictor' from 'deploy.python.predict_cls'",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：docker \r\n  a. 具体操作系统: ubuntu22\r\n  b. Python版本号，如Python3.7.3\r\n \r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n执行 pp-shitu 的预测命令：\r\npython paddleclas.py --index_dir dataset/drink_dataset/index_all --infer_imgs ./dataset/drink_dataset/test_images/002.jpeg\r\n\r\n报错\r\n`ImportError: cannot import name 'ClsPredictor' from 'deploy.python.predict_cls'`\r\n完整报错信息如下：\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/1b22c6a5-1f4d-4318-84d5-29fd9aaf2431)\r\n\r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-21T09:25:00+00:00",
        "updated_at": "2025-06-10T06:40:22+00:00",
        "closed_at": "2025-06-10T06:39:36+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3151,
        "title": "gpu下预测的结果都是正常的，但切换到cpu下预测，结果全是nan",
        "body": "![image](https://github.com/PaddlePaddle/PaddleClas/assets/15188456/487861bc-577c-4918-a34c-b729f2f40dd6)\r\n",
        "state": "open",
        "user": "yangy996",
        "closed_by": null,
        "created_at": "2024-05-22T11:15:41+00:00",
        "updated_at": "2024-07-08T03:26:57+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "yangy996",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3153,
        "title": "为什么使用官方提供的索引库和模型 ppclas的主体识别效果却很差",
        "body": "我下载了花朵和交通工具的[数据集](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/deployment/PP-ShiTu/application_scenarios.md)，但是在本地运行中发现对一般图片的识别效果非常差， 比如下面几张图片:\r\n\r\n![bus1](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/c0d5d4dd-e985-4c2e-9615-9afd718874e3)\r\n![baihe2](https://github.com/PaddlePaddle/PaddleClas/assets/35327931/30511143-97a8-4d55-aa1c-375174821c92)\r\n\r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-24T02:34:16+00:00",
        "updated_at": "2025-06-10T06:40:24+00:00",
        "closed_at": "2025-06-10T06:39:37+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3154,
        "title": "怎样使用小数据对paddleclas的主体检测模型进行更新",
        "body": "如果要在已有的主体检测模型基础上新增检测类别，但新增的类别图像数量很少，怎样利用这些小数据来更新主体检测模型呢？ \r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-24T08:54:11+00:00",
        "updated_at": "2025-06-10T06:40:26+00:00",
        "closed_at": "2025-06-10T06:39:39+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3157,
        "title": "PPShitu特征提取后，为何2张图很相似的图，特征向量的距离值很大(distance: [0.27994147])？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：\r\nconda中安装了\r\npaddlepaddle              2.4.2           py310_cpu_windows    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/Paddle\r\n\r\n然后在conda环境中，用PaddleClas release/2.5代码，执行了 python setup.py install\r\n 2. 涉及的其他产品使用的版本号：\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Windows 的conda环境\r\n  b. Python版本号，如F:\\PaddleClas\\deploy\\python\\predict_rec.py\r\n  c. CUDA/cuDNN版本：无\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n按照【[特征提取](https://gitee.com/paddlepaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/PP-ShiTu/feature_extraction.md)】\r\n\r\n使用模型：[general_PPLCNetV2_base_pretrained_v1.0_infer](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/PP-ShiTuV2/general_PPLCNetV2_base_pretrained_v1.0_infer.tar)\r\n\r\n![color_small](https://github.com/PaddlePaddle/PaddleClas/assets/16701660/27a510cc-f654-496b-9b93-cf4d6afbd4b6)\r\n![color_big](https://github.com/PaddlePaddle/PaddleClas/assets/16701660/b0a78c58-6481-4030-a3e4-ea3942624c4c)\r\n\r\n F:\\PaddleClas\\deploy>python python/predict_rec.py -c configs/inference_rec.yaml\r\ninference_rec.yaml的内容，如附件[inference_rec.txt](https://github.com/PaddlePaddle/PaddleClas/files/15462839/inference_rec.txt)\r\n\r\n 抽取2图特征向量，并求2个特征向量的距离。\r\n看起来很相似的图，但**距离值很大，distance: [0.27994147]**\r\n\r\n\r\n这是自己写的求特征向量距离的函数：\r\n\r\ndef euclidean_distance(output1, output2):\r\n    # 计算两个batch_output之间的差值\r\n    diff = output1 - output2\r\n    # 计算每个样本的平方差值\r\n    squared_diff = np.square(diff)\r\n    # 沿axis=1对每个样本的平方差值求和\r\n    sum_squared_diff = np.sum(squared_diff, axis=1)\r\n    # 求和后再开平方得到欧几里德距离\r\n    distances = np.sqrt(sum_squared_diff)\r\n    \r\n    return distances",
        "state": "closed",
        "user": "GreenValue",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-28T01:34:32+00:00",
        "updated_at": "2025-06-10T06:40:34+00:00",
        "closed_at": "2025-06-10T06:39:42+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3156,
        "title": "PPShitu中的特征向量提取时的图片归一化处理中，mean，std值，怎么来的？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/deploy/configs/inference_rec.yaml\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/16701660/15e37b4c-5d6a-477c-a17c-2d939f74a3aa)\r\nNormalizeImage中的mean，std值，是经验值？还是根据infer_imgs的图片，实际算出来的？",
        "state": "closed",
        "user": "GreenValue",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-28T01:16:04+00:00",
        "updated_at": "2025-06-10T06:40:31+00:00",
        "closed_at": "2025-06-10T06:39:41+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3158,
        "title": "When do you plan to release recognition models?",
        "body": "Hey, your work is commendable, I wanted to know do you plan to release recognition models? I will looking forward to using product recognition model.",
        "state": "closed",
        "user": "akankshasingh25",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-28T10:22:15+00:00",
        "updated_at": "2025-06-10T06:40:36+00:00",
        "closed_at": "2025-06-10T06:39:43+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3161,
        "title": "怎样理解特征抽取模型训练中的recall@1和mAP ",
        "body": "在训练特征抽取模型中使用的metric使用recall@1 和mAP，\r\n1 分类模型中为什么使用recall指标呢？\r\n2 recall@1 和mAP在这里区别是什么？",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "paddle-bot[bot]",
        "created_at": "2024-05-30T07:59:17+00:00",
        "updated_at": "2025-06-10T06:40:37+00:00",
        "closed_at": "2025-06-10T06:39:44+00:00",
        "comments_count": [
            "cuicheng01",
            "paddle-bot[bot]"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3165,
        "title": "Android 32位支持",
        "body": "该项目支持64位吗，能否支持32位？",
        "state": "open",
        "user": "Biekangdong",
        "closed_by": null,
        "created_at": "2024-06-14T02:36:08+00:00",
        "updated_at": "2024-07-08T03:18:26+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3170,
        "title": "paddlecls特征提取模型微调",
        "body": "1. 相关版本如下: \r\npaddleclas           2.5.1\r\npaddlepaddle         2.5.2\r\npaddlepaddle-gpu     2.5.2.post112\r\n2.python版本号: Python 3.7.13\r\n3. cuda/cudnn版本 cuda11.2/cudnn8.1\r\n文档链接: https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/training/metric_learning/training.md\r\n在运行命令之后python3.7 tools/train.py \\\r\n-c ./ppcls/configs/quick_start/MobileNetV1_retrieval.yaml \\\r\n-o Arch.Backbone.pretrained=True \\\r\n-o Global.device=gpu  报如下问题:\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/mnt/project/PaddleClas/ppcls/engine/engine.py\", line 99, in __init__\r\n    self.device = paddle.set_device(self.config[\"Global\"][\"device\"])\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/device/__init__.py\", line 266, in set_device\r\n    place = _convert_to_place(device)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/device/__init__.py\", line 181, in _convert_to_place\r\n    \"The device should not be 'gpu', \"\r\nValueError: The device should not be 'gpu', since PaddlePaddle is not compiled with CUDA\r\n请问这个bug是因为版本不匹配还是其他问题?",
        "state": "open",
        "user": "chinesejunzai12",
        "closed_by": null,
        "created_at": "2024-06-26T07:36:37+00:00",
        "updated_at": "2024-07-24T10:39:24+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "chinesejunzai12"
        ],
        "labels": []
    },
    {
        "error": "'NoneType' object has no attribute 'repository'",
        "issue_number": 3181
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3171,
        "title": "GeneralRecognitionV2_PPLCNetV2_base.yaml微调特征提取模型报错",
        "body": "库对应的版本如下:\r\npaddleclas==2.5.2\r\npaddlepaddle==2.5.2\r\npaddlepaddle-gpt==2.5.2\r\n\r\n运行命令报错如下:\r\npython3.7 tools/train.py \\\r\n> -c ./ppcls/configs/GeneralRecognitionV2/CUB_GeneralRecognitionV2_PPLCNetV2_base.yaml\r\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\r\n[2024/06/26 17:17:35] ppcls INFO:\r\n===========================================================\r\n==        PaddleClas is powered by PaddlePaddle !        ==\r\n===========================================================\r\n==                                                       ==\r\n==   For more info please go to the following website.   ==\r\n==                                                       ==\r\n==       https://github.com/PaddlePaddle/PaddleClas      ==\r\n===========================================================\r\n\r\n[2024/06/26 17:17:35] ppcls INFO: AMP :\r\n[2024/06/26 17:17:35] ppcls INFO:     level : O1\r\n[2024/06/26 17:17:35] ppcls INFO:     scale_loss : 65536\r\n[2024/06/26 17:17:35] ppcls INFO:     use_dynamic_loss_scaling : True\r\n[2024/06/26 17:17:35] ppcls INFO: ------------------------------------------------------------\r\n[2024/06/26 17:17:35] ppcls INFO: Arch :\r\n[2024/06/26 17:17:35] ppcls INFO:     Backbone :\r\n[2024/06/26 17:17:35] ppcls INFO:         class_expand : 512\r\n[2024/06/26 17:17:35] ppcls INFO:         name : PPLCNetV2_base_ShiTu\r\n[2024/06/26 17:17:35] ppcls INFO:         pretrained : True\r\n[2024/06/26 17:17:35] ppcls INFO:         use_ssld : True\r\n[2024/06/26 17:17:35] ppcls INFO:     BackboneStopLayer :\r\n[2024/06/26 17:17:35] ppcls INFO:         name : flatten\r\n[2024/06/26 17:17:35] ppcls INFO:     Head :\r\n[2024/06/26 17:17:35] ppcls INFO:         bias_attr : False\r\n[2024/06/26 17:17:35] ppcls INFO:         class_num : 101\r\n[2024/06/26 17:17:35] ppcls INFO:         embedding_size : 512\r\n[2024/06/26 17:17:35] ppcls INFO:         name : FC\r\n[2024/06/26 17:17:35] ppcls INFO:         weight_attr :\r\n[2024/06/26 17:17:35] ppcls INFO:             initializer :\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : Normal\r\n[2024/06/26 17:17:35] ppcls INFO:                 std : 0.001\r\n[2024/06/26 17:17:35] ppcls INFO:     Neck :\r\n[2024/06/26 17:17:35] ppcls INFO:         bias_attr :\r\n[2024/06/26 17:17:35] ppcls INFO:             initializer :\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : Constant\r\n[2024/06/26 17:17:35] ppcls INFO:                 value : 0.0\r\n[2024/06/26 17:17:35] ppcls INFO:             learning_rate : 1e-20\r\n[2024/06/26 17:17:35] ppcls INFO:         name : BNNeck\r\n[2024/06/26 17:17:35] ppcls INFO:         num_features : 512\r\n[2024/06/26 17:17:35] ppcls INFO:         weight_attr :\r\n[2024/06/26 17:17:35] ppcls INFO:             initializer :\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : Constant\r\n[2024/06/26 17:17:35] ppcls INFO:                 value : 1.0\r\n[2024/06/26 17:17:35] ppcls INFO:     infer_add_softmax : False\r\n[2024/06/26 17:17:35] ppcls INFO:     infer_output_key : features\r\n[2024/06/26 17:17:35] ppcls INFO:     name : RecModel\r\n[2024/06/26 17:17:35] ppcls INFO: DataLoader :\r\n[2024/06/26 17:17:35] ppcls INFO:     Eval :\r\n[2024/06/26 17:17:35] ppcls INFO:         Gallery :\r\n[2024/06/26 17:17:35] ppcls INFO:             dataset :\r\n[2024/06/26 17:17:35] ppcls INFO:                 cls_label_path : ./dataset/CUB_200_2011/test_list.txt\r\n[2024/06/26 17:17:35] ppcls INFO:                 image_root : ./dataset/CUB_200_2011/\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : VeriWild\r\n[2024/06/26 17:17:35] ppcls INFO:                 transform_ops :\r\n[2024/06/26 17:17:35] ppcls INFO:                     DecodeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         channel_first : False\r\n[2024/06/26 17:17:35] ppcls INFO:                         to_rgb : True\r\n[2024/06/26 17:17:35] ppcls INFO:                     ResizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         backend : cv2\r\n[2024/06/26 17:17:35] ppcls INFO:                         interpolation : bilinear\r\n[2024/06/26 17:17:35] ppcls INFO:                         return_numpy : False\r\n[2024/06/26 17:17:35] ppcls INFO:                         size : [224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:                     NormalizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2024/06/26 17:17:35] ppcls INFO:                         order : hwc\r\n[2024/06/26 17:17:35] ppcls INFO:                         scale : 1.0/255.0\r\n[2024/06/26 17:17:35] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2024/06/26 17:17:35] ppcls INFO:             loader :\r\n[2024/06/26 17:17:35] ppcls INFO:                 num_workers : 4\r\n[2024/06/26 17:17:35] ppcls INFO:                 use_shared_memory : True\r\n[2024/06/26 17:17:35] ppcls INFO:             sampler :\r\n[2024/06/26 17:17:35] ppcls INFO:                 batch_size : 64\r\n[2024/06/26 17:17:35] ppcls INFO:                 drop_last : False\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : DistributedBatchSampler\r\n[2024/06/26 17:17:35] ppcls INFO:                 shuffle : False\r\n[2024/06/26 17:17:35] ppcls INFO:         Query :\r\n[2024/06/26 17:17:35] ppcls INFO:             dataset :\r\n[2024/06/26 17:17:35] ppcls INFO:                 cls_label_path : ./dataset/CUB_200_2011/test_list.txt\r\n[2024/06/26 17:17:35] ppcls INFO:                 image_root : ./dataset/CUB_200_2011/\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : VeriWild\r\n[2024/06/26 17:17:35] ppcls INFO:                 transform_ops :\r\n[2024/06/26 17:17:35] ppcls INFO:                     DecodeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         channel_first : False\r\n[2024/06/26 17:17:35] ppcls INFO:                         to_rgb : True\r\n[2024/06/26 17:17:35] ppcls INFO:                     ResizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         backend : cv2\r\n[2024/06/26 17:17:35] ppcls INFO:                         interpolation : bilinear\r\n[2024/06/26 17:17:35] ppcls INFO:                         return_numpy : False\r\n[2024/06/26 17:17:35] ppcls INFO:                         size : [224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:                     NormalizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                         mean : [0.485, 0.456, 0.406]\r\n[2024/06/26 17:17:35] ppcls INFO:                         order : hwc\r\n[2024/06/26 17:17:35] ppcls INFO:                         scale : 1.0/255.0\r\n[2024/06/26 17:17:35] ppcls INFO:                         std : [0.229, 0.224, 0.225]\r\n[2024/06/26 17:17:35] ppcls INFO:             loader :\r\n[2024/06/26 17:17:35] ppcls INFO:                 num_workers : 4\r\n[2024/06/26 17:17:35] ppcls INFO:                 use_shared_memory : True\r\n[2024/06/26 17:17:35] ppcls INFO:             sampler :\r\n[2024/06/26 17:17:35] ppcls INFO:                 batch_size : 64\r\n[2024/06/26 17:17:35] ppcls INFO:                 drop_last : False\r\n[2024/06/26 17:17:35] ppcls INFO:                 name : DistributedBatchSampler\r\n[2024/06/26 17:17:35] ppcls INFO:                 shuffle : False\r\n[2024/06/26 17:17:35] ppcls INFO:     Train :\r\n[2024/06/26 17:17:35] ppcls INFO:         dataset :\r\n[2024/06/26 17:17:35] ppcls INFO:             cls_label_path : ./dataset/CUB_200_2011/train_list.txt\r\n[2024/06/26 17:17:35] ppcls INFO:             image_root : ./dataset/CUB_200_2011/\r\n[2024/06/26 17:17:35] ppcls INFO:             name : VeriWild\r\n[2024/06/26 17:17:35] ppcls INFO:             relabel : True\r\n[2024/06/26 17:17:35] ppcls INFO:             transform_ops :\r\n[2024/06/26 17:17:35] ppcls INFO:                 DecodeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                     channel_first : False\r\n[2024/06/26 17:17:35] ppcls INFO:                     to_rgb : True\r\n[2024/06/26 17:17:35] ppcls INFO:                 ResizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                     backend : cv2\r\n[2024/06/26 17:17:35] ppcls INFO:                     interpolation : bilinear\r\n[2024/06/26 17:17:35] ppcls INFO:                     return_numpy : False\r\n[2024/06/26 17:17:35] ppcls INFO:                     size : [224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:                 RandFlipImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                     flip_code : 1\r\n[2024/06/26 17:17:35] ppcls INFO:                 Pad :\r\n[2024/06/26 17:17:35] ppcls INFO:                     backend : cv2\r\n[2024/06/26 17:17:35] ppcls INFO:                     padding : 10\r\n[2024/06/26 17:17:35] ppcls INFO:                 RandCropImageV2 :\r\n[2024/06/26 17:17:35] ppcls INFO:                     size : [224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:                 RandomRotation :\r\n[2024/06/26 17:17:35] ppcls INFO:                     degrees : 90\r\n[2024/06/26 17:17:35] ppcls INFO:                     interpolation : bilinear\r\n[2024/06/26 17:17:35] ppcls INFO:                     prob : 0.5\r\n[2024/06/26 17:17:35] ppcls INFO:                 ResizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                     backend : cv2\r\n[2024/06/26 17:17:35] ppcls INFO:                     interpolation : bilinear\r\n[2024/06/26 17:17:35] ppcls INFO:                     return_numpy : False\r\n[2024/06/26 17:17:35] ppcls INFO:                     size : [224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:                 NormalizeImage :\r\n[2024/06/26 17:17:35] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\r\n[2024/06/26 17:17:35] ppcls INFO:                     order : hwc\r\n[2024/06/26 17:17:35] ppcls INFO:                     scale : 1.0/255.0\r\n[2024/06/26 17:17:35] ppcls INFO:                     std : [0.229, 0.224, 0.225]\r\n[2024/06/26 17:17:35] ppcls INFO:         loader :\r\n[2024/06/26 17:17:35] ppcls INFO:             num_workers : 4\r\n[2024/06/26 17:17:35] ppcls INFO:             use_shared_memory : True\r\n[2024/06/26 17:17:35] ppcls INFO:         sampler :\r\n[2024/06/26 17:17:35] ppcls INFO:             batch_size : 256\r\n[2024/06/26 17:17:35] ppcls INFO:             drop_last : False\r\n[2024/06/26 17:17:35] ppcls INFO:             id_list : [50030, 80700, 92019, 96015]\r\n[2024/06/26 17:17:35] ppcls INFO:             name : PKSampler\r\n[2024/06/26 17:17:35] ppcls INFO:             ratio : [4, 4]\r\n[2024/06/26 17:17:35] ppcls INFO:             sample_method : id_avg_prob\r\n[2024/06/26 17:17:35] ppcls INFO:             sample_per_id : 4\r\n[2024/06/26 17:17:35] ppcls INFO:             shuffle : True\r\n[2024/06/26 17:17:35] ppcls INFO: Global :\r\n[2024/06/26 17:17:35] ppcls INFO:     checkpoints : None\r\n[2024/06/26 17:17:35] ppcls INFO:     device : gpu\r\n[2024/06/26 17:17:35] ppcls INFO:     epochs : 100\r\n[2024/06/26 17:17:35] ppcls INFO:     eval_during_train : True\r\n[2024/06/26 17:17:35] ppcls INFO:     eval_interval : 1\r\n[2024/06/26 17:17:35] ppcls INFO:     eval_mode : retrieval\r\n[2024/06/26 17:17:35] ppcls INFO:     image_shape : [3, 224, 224]\r\n[2024/06/26 17:17:35] ppcls INFO:     output_dir : ./output\r\n[2024/06/26 17:17:35] ppcls INFO:     pretrained_model : None\r\n[2024/06/26 17:17:35] ppcls INFO:     print_batch_step : 20\r\n[2024/06/26 17:17:35] ppcls INFO:     re_ranking : False\r\n[2024/06/26 17:17:35] ppcls INFO:     retrieval_feature_from : features\r\n[2024/06/26 17:17:35] ppcls INFO:     save_inference_dir : ./inference\r\n[2024/06/26 17:17:35] ppcls INFO:     save_interval : 10\r\n[2024/06/26 17:17:35] ppcls INFO:     use_dali : False\r\n[2024/06/26 17:17:35] ppcls INFO:     use_visualdl : False\r\n[2024/06/26 17:17:35] ppcls INFO: Loss :\r\n[2024/06/26 17:17:35] ppcls INFO:     Eval :\r\n[2024/06/26 17:17:35] ppcls INFO:         CELoss :\r\n[2024/06/26 17:17:35] ppcls INFO:             weight : 1.0\r\n[2024/06/26 17:17:35] ppcls INFO:     Train :\r\n[2024/06/26 17:17:35] ppcls INFO:         CELoss :\r\n[2024/06/26 17:17:35] ppcls INFO:             epsilon : 0.1\r\n[2024/06/26 17:17:35] ppcls INFO:             weight : 1.0\r\n[2024/06/26 17:17:35] ppcls INFO:         TripletAngularMarginLoss :\r\n[2024/06/26 17:17:35] ppcls INFO:             absolute_loss_weight : 0.1\r\n[2024/06/26 17:17:35] ppcls INFO:             add_absolute : True\r\n[2024/06/26 17:17:35] ppcls INFO:             an_value : 0.4\r\n[2024/06/26 17:17:35] ppcls INFO:             ap_value : 0.8\r\n[2024/06/26 17:17:35] ppcls INFO:             feature_from : features\r\n[2024/06/26 17:17:35] ppcls INFO:             margin : 0.5\r\n[2024/06/26 17:17:35] ppcls INFO:             normalize_feature : True\r\n[2024/06/26 17:17:35] ppcls INFO:             reduction : mean\r\n[2024/06/26 17:17:35] ppcls INFO:             weight : 1.0\r\n[2024/06/26 17:17:35] ppcls INFO: Metric :\r\n[2024/06/26 17:17:35] ppcls INFO:     Eval :\r\n[2024/06/26 17:17:35] ppcls INFO:         Recallk :\r\n[2024/06/26 17:17:35] ppcls INFO:             topk : [1, 5]\r\n[2024/06/26 17:17:35] ppcls INFO:         mAP :\r\n[2024/06/26 17:17:35] ppcls INFO: Optimizer :\r\n[2024/06/26 17:17:35] ppcls INFO:     lr :\r\n[2024/06/26 17:17:35] ppcls INFO:         learning_rate : 0.06\r\n[2024/06/26 17:17:35] ppcls INFO:         name : Cosine\r\n[2024/06/26 17:17:35] ppcls INFO:         warmup_epoch : 5\r\n[2024/06/26 17:17:35] ppcls INFO:     momentum : 0.9\r\n[2024/06/26 17:17:35] ppcls INFO:     name : Momentum\r\n[2024/06/26 17:17:35] ppcls INFO:     regularizer :\r\n[2024/06/26 17:17:35] ppcls INFO:         coeff : 1e-05\r\n[2024/06/26 17:17:35] ppcls INFO:         name : L2\r\n[2024/06/26 17:17:35] ppcls INFO: profiler_options : None\r\n[2024/06/26 17:17:35] ppcls INFO: train with paddle 2.5.2 and device Place(gpu:0)\r\nTraceback (most recent call last):\r\n  File \"tools/train.py\", line 32, in <module>\r\n    engine = Engine(config, mode=\"train\")\r\n  File \"/mnt/ppcls/engine/engine.py\", line 121, in __init__\r\n    self.config[\"DataLoader\"], \"Train\", self.device, self.use_dali)\r\n  File \"/mnt/ppcls/data/__init__.py\", line 91, in build_dataloader\r\n    dataset = eval(dataset_name)(**config_dataset)\r\nTypeError: __init__() got an unexpected keyword argument 'relabel'",
        "state": "open",
        "user": "chinesejunzai12",
        "closed_by": null,
        "created_at": "2024-06-26T09:25:35+00:00",
        "updated_at": "2024-07-24T10:38:21+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "cuicheng01",
            "chinesejunzai12"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3175,
        "title": "小白求助，怎么设置分辨率？",
        "body": "采集到的图片分辨率是640x480，我应该怎么配置训练分辨率？\r\n\r\n```\r\nGlobal:\r\n  image_shape: [3, 224, 224]\r\n```\r\n\r\n```\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/ILSVRC2012/\r\n      cls_label_path: ./dataset/ILSVRC2012/train_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 224\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 512\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ./dataset/ILSVRC2012/\r\n      cls_label_path: ./dataset/ILSVRC2012/val_list.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 256\r\n        - CropImage:\r\n            size: 224\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n```\r\n\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.5\r\n 4. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 5. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 6. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "lemon3853",
        "closed_by": "lemon3853",
        "created_at": "2024-07-03T03:33:20+00:00",
        "updated_at": "2024-07-05T00:00:10+00:00",
        "closed_at": "2024-07-05T00:00:07+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3180,
        "title": "my fault",
        "body": null,
        "state": "closed",
        "user": "alexhmyang",
        "closed_by": "alexhmyang",
        "created_at": "2024-07-05T11:03:15+00:00",
        "updated_at": "2024-07-05T15:44:08+00:00",
        "closed_at": "2024-07-05T15:44:05+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3172,
        "title": "GeneralRecognitionV2_PPLCNetV2_base.yaml微调",
        "body": "GeneralRecognitionV2_PPLCNetV2_base.yaml可以在现有的预训练模型[general_PPLCNetV2_base_pretrained_v1.0.pdparams](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/pretrain/PPShiTuV2/general_PPLCNetV2_base_pretrained_v1.0.pdparams)基础上, 添加自己的图片进行特征提取模型的微调训练么, 如何可以的话, 有哪些查考的文档.",
        "state": "open",
        "user": "chinesejunzai12",
        "closed_by": null,
        "created_at": "2024-06-26T10:35:12+00:00",
        "updated_at": "2025-04-26T08:58:02+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "chinesejunzai12",
            "Zhang-O"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3173,
        "title": "softmax_triplet_with_center_infer.tar 下载链接不存在",
        "body": "REID行人重识别，下载你们提供的 inference 模型\r\ncd PaddleClas/deploy\r\nwget https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/reid/inference/softmax_triplet_with_center_infer.tar\r\ntar xf softmax_triplet_with_center_infer.tar\r\ncd ../\r\n\r\n![image](https://github.com/PaddlePaddle/PaddleClas/assets/23496061/b1b8d9bd-d94a-418c-a7ea-fac841b6864e)\r\n\r\n请问 有新的下载地址提供吗 谢谢",
        "state": "open",
        "user": "liuhetongzi",
        "closed_by": null,
        "created_at": "2024-06-28T01:45:34+00:00",
        "updated_at": "2024-07-10T03:28:18+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "TingquanGao",
            "liuhetongzi"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3174,
        "title": "PP—ShiTuV2 RPC训练数据问题确认",
        "body": "\r\n![数据集](https://github.com/PaddlePaddle/PaddleClas/assets/9262938/e6546105-8a00-4118-a7d4-e33ee556ba86)\r\n1，数据集中的数据量，是图片数，还是分类数？\r\n2，PRC的数据，官方给出的是200分类，训练集数据近6万。与PaddleClas给出数据不符。\r\n请帮忙确认图片中，RPC 3K，是什么意思。如果我们只用RPC数据做迁移学习，训练数据集应如何调整？\r\n3，我们目前用RPC全量数据做迁移学习，loss停留在0.4无法收敛，请给出优化建议。\r\n配置如下：\r\n_BASE_: [\r\n  '../../../runtime.yml',\r\n  '../../_base_/picodet_esnet.yml',\r\n  '../../_base_/optimizer_100e.yml',\r\n  '../../_base_/picodet_640_reader.yml',\r\n]\r\n\r\npretrain_weights: https://paddledet.bj.bcebos.com/models/picodet_lcnet_x2_5_640_mainbody.pdparams\r\nweights: output/picodet_lcnet_x2_5_640_mainbody/model_final\r\nfind_unused_parameters: True\r\nuse_ema: true\r\ncycle_epoch: 10\r\nsnapshot_epoch: 1\r\n\r\nPicoDet:\r\n  backbone: LCNet\r\n  neck: CSPPAN\r\n  head: PicoHead\r\n\r\nLCNet:\r\n  scale: 2.5\r\n  feature_maps: [3, 4, 5]\r\n\r\nmetric: COCO\r\nnum_classes: 1\r\n\r\nLearningRate:\r\n  base_lr: 0.0005\r\n  schedulers:\r\n  - !CosineDecay\r\n    max_epochs: 100\r\n  - !LinearWarmup\r\n    start_factor: 1\r\n    steps: 1\r\n\r\nTrainDataset:\r\n  !COCODataSet\r\n    #image_dir: ./\r\n    image_dir: train2019/\r\n    anno_path: instances_train2019_main.json\r\n    dataset_dir: dataset/dataset_rpc/\r\n    data_fields: ['image', 'gt_bbox', 'gt_class', 'is_crowd']\r\n\r\nEvalDataset:\r\n  !COCODataSet\r\n    image_dir: val2019/\r\n    anno_path: instances_val2019_main.json\r\n    dataset_dir: dataset/dataset_rpc/\r\n    data_fields: ['image', 'gt_bbox', 'gt_class', 'is_crowd']\r\n\r\nTestDataset:\r\n  !ImageFolder\r\n    anno_path: ./dataset/dataset_rpc/instances_test2019_main.json\r\n\r\n",
        "state": "open",
        "user": "xiahc",
        "closed_by": null,
        "created_at": "2024-06-28T07:37:02+00:00",
        "updated_at": "2024-07-12T00:30:45+00:00",
        "closed_at": null,
        "comments_count": [
            "xiahc",
            "cuicheng01",
            "xiahc",
            "cuicheng01",
            "zhanghaowei01",
            "cuicheng01",
            "zhanghaowei01",
            "zhanghaowei01",
            "cuicheng01",
            "zhanghaowei01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3188,
        "title": "请问PP-Shitu可以做掌纹掌静脉识别吗",
        "body": "请问可以用PP-Shitu训练掌纹掌静脉数据吗\r\n",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2024-07-15T11:34:08+00:00",
        "updated_at": "2024-07-17T01:27:37+00:00",
        "closed_at": "2024-07-17T01:27:34+00:00",
        "comments_count": [
            "cuicheng01",
            "Dandelion111"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3190,
        "title": "单卡训练报错ValueError: paddle.distributed initialize error, environment variable FLAGS_selected_gpus is needed, but not set.",
        "body": " **启动命令**\r\nexport CUDA_VISIBLE_DEVICES=1\r\npython3.7 tools/train.py -c ./ppcls/configs/car/car_poolformer_tricks_v15_re3.yaml\r\n**环境信息**\r\nPython 3.7.0\r\nCUDA Version: 11.4 \r\nGPU: V100\r\npaddle: 2.4.1\r\n\r\n",
        "state": "open",
        "user": "gongchenting",
        "closed_by": null,
        "created_at": "2024-07-16T08:22:59+00:00",
        "updated_at": "2024-08-01T09:55:29+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3192,
        "title": "PaddleClas/docs/en/PULC /PULC_person_attribute python tools/infer.py error",
        "body": "Thank you for sharing the code. \r\n\r\nWhen trying to train the model using our customised dataset, following instruction as indicated in PaddleClas/docs/en/PULC /PULC_person_attribute_en.md. I got the error as below,. lease let me know what else I need to modify. Than you\r\n\r\n\r\n3.3 Training succeeds.\r\npython -m paddle.distributed.launch \\\r\n    --gpus=\"0\" \\\r\n    tools/train.py \\\r\n        -c ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0_myData.yaml\r\n\r\n3.4 Evaluation succeeds.\r\npython tools/eval.py \\\r\n        -c ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0_myData.yaml \\\r\n        -o Global.pretrained_model=\"output/best_model/model.pdparams\"\r\n\r\n3.5 Inference failed.\r\npython tools/infer.py \\\r\n        -c ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0_myData.yaml \\\r\n        -o Global.pretrained_model=\"output/best_model/model.pdparams\"\r\n\r\nppcls ERROR: Exception occured when parse line: deploy/images/PULC/person_attribute/090007.jpg with msg: list index out of range\r\n\r\n\r\n\r\nThe file PPLCNet_x1_0_myData.yaml is shown below, which is based ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0.yaml with a few modifications:\r\n\r\n------------- ./ppcls/configs/PULC/person_attribute/PPLCNet_x1_0_myData.yaml  -------------\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: \"./output/\"\r\n  device: \"gpu\"\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 10\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 256, 192]\r\n  save_inference_dir: \"./inference\"\r\n  use_multilabel: True\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: \"PPLCNet_x1_0\"\r\n  pretrained: True\r\n  use_ssld: True\r\n  class_num: 9\r\n #class_num: 26\r\n  \r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n  Eval:\r\n    - MultiLabelLoss:\r\n        weight: 1.0\r\n        weight_ratio: True\r\n        size_sum: True\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.01\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.0005\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: MultiLabelDataset\r\n      image_root: \"dataset/myData/\"\r\n      cls_label_path: \"dataset/myData/train_list.txt\"\r\n      #image_root: \"dataset/pa100k/\"\r\n      #cls_label_path: \"dataset/pa100k/train_list.txt\"\r\n      label_ratio: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [192, 256]\r\n        - TimmAutoAugment:\r\n            prob: 0.8\r\n            config_str: rand-m9-mstd0.5-inc1\r\n            interpolation: bicubic\r\n            img_size: [192, 256]\r\n        - Padv2:\r\n            size: [212, 276]\r\n            pad_mode: 1\r\n            fill_value: 0\r\n        - RandomCropImage:\r\n            size: [192, 256]\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n        - RandomErasing:\r\n            EPSILON: 0.4\r\n            sl: 0.02\r\n            sh: 1.0/3.0\r\n            r1: 0.3\r\n            attempt: 10\r\n            use_log_aspect: True\r\n            mode: pixel\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: True\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n  Eval:\r\n    dataset:\r\n      name: MultiLabelDataset\r\n      image_root: \"dataset/myData/\"\r\n      cls_label_path: \"dataset/myData/val_list.txt\"\r\n      #image_root: \"dataset/pa100k/\"\r\n      #cls_label_path: \"dataset/pa100k/val_list.txt\"\r\n      label_ratio: True\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [192, 256]\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: deploy/images/PULC/person_attribute/\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        size: [192, 256]\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: PersonAttribute\r\n    threshold: 0.5  #default threshold\r\n    #glasses_threshold: 0.3  #threshold only for glasses\r\n    #hold_threshold: 0.6 #threshold only for hold\r\n\r\nMetric:\r\n  Eval:\r\n    - ATTRMetric:",
        "state": "open",
        "user": "VisImage",
        "closed_by": null,
        "created_at": "2024-07-18T02:43:17+00:00",
        "updated_at": "2024-08-01T09:54:39+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3193,
        "title": "为什么训练日志中train内top1和top5准确值不打印出来了？",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "open",
        "user": "loongxd",
        "closed_by": null,
        "created_at": "2024-07-22T08:07:37+00:00",
        "updated_at": "2024-08-01T09:52:52+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3195,
        "title": "clarity_assessment_infer.tar 下载链接不存在",
        "body": "PULC 清晰度评估模型\r\n'''\r\ncd deploy/models\r\n# 下载 inference 模型并解压\r\nwget https://paddleclas.bj.bcebos.com/models/PULC/clarity_assessment_infer.tar && tar -xf clarity_assessment_infer.tar\r\n'''\r\n下载时模型不存在：\r\n![1721789951289](https://github.com/user-attachments/assets/9aa8f6ce-8145-487e-84e6-5292b477bb05)\r\n\r\n文档地址：\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.5.2/docs/zh_CN/models/PULC/PULC_clarity_assessment.md#6.1.2",
        "state": "closed",
        "user": "Carious-ads",
        "closed_by": "TingquanGao",
        "created_at": "2024-07-24T02:59:52+00:00",
        "updated_at": "2024-08-01T09:44:35+00:00",
        "closed_at": "2024-08-01T09:44:32+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3196,
        "title": "图像识别微调之后效果反而变差了",
        "body": "自有商品数据90w+, 目前使用的是general_PPLCNetV2_base_pretrained_v1.0.pdparams的基础上进行微调, 但是微调epoch为50轮之后, 评估结果f1值没有增加, 反而降低了,    大概得原因是什么?\r\n",
        "state": "open",
        "user": "chinesejunzai12",
        "closed_by": null,
        "created_at": "2024-07-25T01:57:24+00:00",
        "updated_at": "2024-08-04T16:08:05+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "chinesejunzai12",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3201,
        "title": "PULC微调text_image_orientation模型大量误识别0°为180°的问题",
        "body": "# 问题详情\r\n我在使用标准PPLCNet_x1_0.yaml训练text_image_orientation时，使用了预训练模型[text_image_orientation_pretrained.pdparams](https://paddleclas.bj.bcebos.com/models/PULC/pretrained/text_image_orientation_pretrained.pdparams)\r\n\r\n训练数据为官方公开数据集10365张图片+自己数据（包含文档，带图文档，表格，APP截图等）3500张图片。每张图片均先摆正+四向旋转构建样本rot_0到rot_270。后续也尝试过只使用自己数据，结果差异不大。\r\n\r\nPPLCNet_x1_0.yaml参数修改项为分辨率相关，严格按照https://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/zh_CN/training/single_label_classification/finetune.md#faq\r\n的标准将分辨率修改为320。\r\n\r\n训练后期best_model能够达到97%以上的精度，但是正式用于业务数据infer时，**许多特征明确的0°文档都会被识别为180°。**\r\n\r\n## 较为鲜明的错误类型包括：\r\n### 错识别为180°且置信度较高>0.7\r\n1. 右下存在落款的文档\r\n2. 标题鲜明+表格的文档\r\n3. 全页表格\r\n4. 上半页文档+下半页网格布局的多张截图\r\n5. 单纯网格布局的多张截图\r\n6. 2300 * 1700分辨率字很边缘很小的网页截图\r\n7. 微信聊天记录的手机截图\r\n### 错识别为180°且置信度较低，甚至top1和top2置信度接近。\r\n1. 右下存在印章，落款的文档\r\n2. 只有文档上部存在寥寥数行文本的下半空白文档\r\n3. 2300 * 1700分辨率的网页截图\r\n4. 只包含图片的文档页\r\n\r\n## 问题如下：\r\n**1. 如何增强数据解决上述问题？\r\n2. 业务场景中，有许多1700 * 2300分辨率的图像，压缩成320 * 320是否会影响对文字方向的判断？\r\n3. 如果进一步提高分辨率，影响识别效率的瓶颈是多少？\r\n4. 只有不含文字的图片的方向识别效果很差，那么文字较少的带图片文档是否应该作为脏数据踢出去？\r\n5. 还有没有其他优化策略？**\r\n\r\n谢谢解答。\r\n\r\n ## PaddleClas版本以及PaddlePaddle版本\r\n - paddlepadlle-gpu=2.6.0.post120\r\n - paddleclas=2.6.0\r\n ## 训练环境信息：\r\n  a. 具体操作系统，ubuntu\r\n  b. Python版本号，3.9.18\r\n  c. CUDA/cuDNN版本， CUDA12.2/CUDNN8.9.6\r\n",
        "state": "closed",
        "user": "ultramangod",
        "closed_by": "TingquanGao",
        "created_at": "2024-07-29T03:48:59+00:00",
        "updated_at": "2024-11-08T09:51:06+00:00",
        "closed_at": "2024-09-08T03:01:40+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao",
            "TingquanGao",
            "ASan1527"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3197,
        "title": "paddleclas模型训练gpu如何高效利用",
        "body": "在配置文件中\r\nsampler:\r\n      name: PKSampler\r\n      batch_size: 256\r\n      # batch_size: 128\r\n      sample_per_id: 4\r\n      drop_last: False\r\n      shuffle: True\r\n      sample_method: \"id_avg_prob\"\r\n      id_list: [50030, 80700, 92019, 96015] # be careful when set relabel=True\r\n      ratio: [4, 4]\r\n    loader:\r\n      num_workers: 12 # 增加数据处理的工作进程  \r\n      use_shared_memory: True\r\n增加了num_workers的数量, 但是GPU的利用率还是很低, 脉冲式工作\r\n![image](https://github.com/user-attachments/assets/33f6a72d-774e-455a-8561-6c15e2dc3c75)\r\n很大部分时间是休息的, 如何提高GPU的利用率呢\r\n",
        "state": "open",
        "user": "chinesejunzai12",
        "closed_by": null,
        "created_at": "2024-07-25T08:37:29+00:00",
        "updated_at": "2024-08-04T16:07:22+00:00",
        "closed_at": null,
        "comments_count": [
            "cuicheng01",
            "chinesejunzai12",
            "cuicheng01"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3202,
        "title": "模型clarity_assessment不存在",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\npaddleclas.paddleclas.InputModelError: clarity_assessment is not provided by PaddleClas.\r\nMaybe you want the : [CSWinTransformer_base_224, CSWinTransformer_base_384, CSWinTransformer_small_224, CSWinTransformer_large_224, CSWinTransformer_large_384, person_exists, safety_helmet, car_exists, person_attribute, vehicle_attribute].\r\nIf you want to use your own model, please specify inference_model_dir!",
        "state": "closed",
        "user": "syge",
        "closed_by": "syge",
        "created_at": "2024-07-29T08:19:30+00:00",
        "updated_at": "2024-09-03T07:25:25+00:00",
        "closed_at": "2024-08-01T09:43:00+00:00",
        "comments_count": [
            "cuicheng01",
            "syge",
            "TingquanGao",
            "kerry-weic"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3203,
        "title": "用PaddleClas训练2类模型，训练的top1精度错误。在训练过程中推理验证集和训练完成后单独推理验证集输出结果不一致。",
        "body": "在训练2分类模型时，训练过程中训练集和验证集上的精度都能够达到0.99， 训练完成后对验证集上的数据进行推理，精度只有0.57，请问问题是什么？\r\n\r\n\r\n\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas release/2.5和PaddlePaddle 2.4.2\r\n 2. 训练环境信息：\r\n  a. 具体操作系统，如Windows\r\n  b. Python版本号，如Python3.9\r\n  c. CUDA/cuDNN版本， 如CUDA11.2/cuDNN 7.6.5等\r\n 4. 完整配置文件\r\n # global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 40\r\n  print_batch_step: 10\r\n\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 448, 448]\r\n  save_inference_dir: ./inference\r\n\r\n# model architecture\r\nArch:\r\n  name: ShuffleNetV2_x0_25\r\n  class_num: 2\r\n \r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.0025\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00001\r\n\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: ./dataset/model_35/\r\n      cls_label_path: ./dataset/model_35/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 448\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: True\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: ./dataset/model_35/\r\n      cls_label_path: ./dataset/model_35/val.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 512\r\n        - CropImage:\r\n            size: 448\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 16\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 1\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: D:\\lixiaolin\\PaddleClas-release-2.5\\dataset\\model_35\\images\r\n  batch_size: 8\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 512\r\n    - CropImage:\r\n        size: 448\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 1\r\n    class_id_map_file: ./dataset/model_35/label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 1]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 1]\r\n",
        "state": "closed",
        "user": "xillee",
        "closed_by": "TingquanGao",
        "created_at": "2024-07-30T05:18:19+00:00",
        "updated_at": "2024-09-11T03:01:37+00:00",
        "closed_at": "2024-09-11T03:01:34+00:00",
        "comments_count": [
            "xillee",
            "zhangyubo0722",
            "xillee",
            "xillee",
            "zhangyubo0722",
            "xillee",
            "xillee",
            "xillee",
            "zhangyubo0722",
            "zhangyubo0722",
            "xillee",
            "xillee",
            "cuicheng01",
            "xillee",
            "xillee",
            "zhangyubo0722",
            "zhangyubo0722",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3204,
        "title": "PP-ShiTu V2图像识别系统存在内存泄漏问题",
        "body": "pp-shitu 中向量检索faiss search内存增加很快，不知道有没有人遇到这个问题",
        "state": "closed",
        "user": "tianjiahao",
        "closed_by": "tianjiahao",
        "created_at": "2024-07-30T05:42:54+00:00",
        "updated_at": "2024-07-31T06:23:09+00:00",
        "closed_at": "2024-07-31T06:23:06+00:00",
        "comments_count": [
            "zhangyubo0722",
            "tianjiahao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3206,
        "title": "按照文档 使用 paddle_serving 部署 PLUC 的clarity_assessment 清晰度检测模型，接口调用报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n{\r\n    \"err_no\": 5,\r\n    \"err_msg\": \"(log_id=19) imagenet failed to predict.\",\r\n    \"key\": [],\r\n    \"value\": [],\r\n    \"tensors\": []\r\n}",
        "state": "closed",
        "user": "syge",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-01T09:53:34+00:00",
        "updated_at": "2024-09-10T03:01:38+00:00",
        "closed_at": "2024-09-10T03:01:35+00:00",
        "comments_count": [
            "cuicheng01",
            "syge",
            "TingquanGao",
            "cuicheng01",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3207,
        "title": "请问PP-Shitu v2是不是不支持Windows下的C++调用？",
        "body": "在项目中找了很久，也没有找到Windows下C++的demo。\r\ncpp-shitu 好像也只是提供了 Linux 的编译教程。\r\n因为技术水平很菜，所以直接过来问一下是不是不支持Windows下的C++调用，还是我没找对地方。",
        "state": "closed",
        "user": "tangfengray",
        "closed_by": "JianDan0212",
        "created_at": "2024-08-04T15:18:26+00:00",
        "updated_at": "2024-08-23T01:53:29+00:00",
        "closed_at": "2024-08-23T01:53:26+00:00",
        "comments_count": [
            "cuicheng01",
            "tangfengray",
            "tangfengray",
            "JianDan0212"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3213,
        "title": "行人属性检测的C++部署代码是哪个？",
        "body": "你好，\r\n我在使用PaddleClas想对行人的属性检测模型进行C++的部署。使用 PaddleClas-release-2.5.2/deploy/cpp 里面的代码成功构建出clas_system可执行文件，然后使用命令 ./build/clas_system -c ./tools/inference_person_attribute.yaml \r\n配置文件如下：\r\n![cfg](https://github.com/user-attachments/assets/54026fe5-daec-44cb-a212-da3788e913be)\r\n\r\n运行后报错误如下：\r\n![error](https://github.com/user-attachments/assets/7e353616-8aee-4409-a129-0bf625197c41)\r\n\r\n问题：行人的属性识别C++代码是否为 PaddleClas-release-2.5.2/deploy/cpp 里的代码？如果不是，是否支持行人识别的C++代码，具体的位置？",
        "state": "closed",
        "user": "gouzigege",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-08T08:17:22+00:00",
        "updated_at": "2024-09-26T07:56:08+00:00",
        "closed_at": "2024-09-19T12:01:54+00:00",
        "comments_count": [
            "cuicheng01",
            "gouzigege",
            "JianDan0212",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3219,
        "title": "Feature Request: Extend Confusion Matrix Support in to Single-Label Classification",
        "body": "**Description:**\r\n\r\nI would like to request an enhancement to the existing **AccuracyScore** metric in the PaddleClas framework to fully support single-label classification tasks. Currently, the `AccuracyScore` metric, which is part of the `MultilabelMetric` class, includes an implementation of the confusion matrix. This implementation works well for multi-label classification tasks but does not function correctly for single-label classification scenarios.\r\n\r\nWhen attempting to use the `AccuracyScore` metric with a single-label classification model, the following error is encountered:\r\n\r\n```\r\nValueError: Classification metrics can't handle a mix of multiclass and multilabel-indicator targets\r\n```\r\n\r\nThis error occurs because the current implementation is tailored for multi-label scenarios, leading to issues when applied to single-label tasks.\r\n\r\n**Use Case:**\r\n\r\nThis feature is important for users who:\r\n- Are working with single-label classification models and want to leverage the confusion matrix to better understand their model's performance.\r\n- Need to analyze the distribution of true positives, false positives, true negatives, and false negatives in a single-label classification context.\r\n- Require consistent metric functionality across both single-label and multi-label classification tasks.\r\n\r\n**Current Limitation:**\r\n\r\nThe `AccuracyScore` metric is designed for multi-label classification and works correctly in that context with the following configuration:\r\n\r\n```yaml\r\nMetric:\r\n  Train:\r\n    - AccuracyScore:\r\n  Eval:\r\n    - AccuracyScore:\r\n```\r\n\r\nHowever, when this metric is applied to single-label classification models, it results in the error mentioned above. This limits its utility in typical classification tasks where only one label is assigned to each instance.\r\n\r\n**Expected Enhancement:**\r\n\r\nThe proposed enhancement should:\r\n- Extend the functionality of the `AccuracyScore` metric to properly handle single-label classification tasks.\r\n- Allow for seamless integration into the existing PaddleClas metric framework without requiring significant changes to user configurations.\r\n\r\n### Additional Context on Confusion Matrix\r\n\r\nHere’s an example usage of the confusion matrix from scikit-learn: (from this [source](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.confusion_matrix.html))\r\n\r\n```python\r\nfrom sklearn.metrics import confusion_matrix\r\n\r\ny_true = [\"cat\", \"ant\", \"cat\", \"cat\", \"ant\", \"bird\"]\r\ny_pred = [\"ant\", \"ant\", \"cat\", \"cat\", \"ant\", \"cat\"]\r\ncm = confusion_matrix(y_true, y_pred, labels=[\"ant\", \"bird\", \"cat\"])\r\n```\r\n\r\nThis function computes a confusion matrix to evaluate the accuracy of a classification. The matrix indicates how many samples were correctly or incorrectly classified across each category.\r\n\r\n### Parameters:\r\n\r\n- **y_true**: Ground truth (correct) target values.\r\n- **y_pred**: Estimated targets as returned by a classifier.\r\n- **labels**: List of labels to index the matrix. This may be used to reorder or select a subset of labels.\r\n- **sample_weight**: Sample weights.\r\n- **normalize**: Normalizes confusion matrix over the true (rows), predicted (columns) conditions, or all the population.\r\n\r\n### Returns:\r\n- **C**: Confusion matrix whose i-th row and j-th column entry indicates the number of samples with true label being i-th class and predicted label being j-th class.\r\n\r\n**Example Usage:**\r\n\r\nAfter the enhancement, users should be able to use the `AccuracyScore` metric with single-label classification models in the same way as with multi-label models:\r\n\r\n```yaml\r\nMetric:\r\n  Train:\r\n    - AccuracyScore:\r\n  Eval:\r\n    - AccuracyScore:\r\n```\r\n\r\nThis configuration should work correctly for both single-label and multi-label classification tasks.",
        "state": "closed",
        "user": "aboccag",
        "closed_by": "liuhongen1234567",
        "created_at": "2024-08-13T13:39:58+00:00",
        "updated_at": "2024-08-19T11:55:52+00:00",
        "closed_at": "2024-08-19T11:55:49+00:00",
        "comments_count": [
            "liuhongen1234567",
            "liuhongen1234567",
            "aboccag"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3222,
        "title": "训练多标签使用MobileNetV1_multilabel.yaml，multilabelloss.py报错",
        "body": "使用paddle2.6\r\n最新的paddlecls2.5.2分支\r\n训练NUS-WIDE-SCENE数据集；\r\n报错：\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/tools/train.py\", line 36, in <module>\r\n    engine.train()\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/ppcls/engine/engine.py\", line 330, in train\r\n    self.train_epoch_func(self, epoch_id, print_batch_step)\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/ppcls/engine/train/train.py\", line 53, in train_epoch\r\n    loss_dict = engine.train_loss_func(out, batch[1])\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/ppcls/loss/__init__.py\", line 73, in __call__\r\n    loss = self.loss_func[0](input, batch)\r\n  File \"/home/jmt/anaconda3/envs/paddle/lib/python3.9/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\r\n    return self.forward(*inputs, **kwargs)\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/ppcls/loss/multilabelloss.py\", line 66, in forward\r\n    loss = self._binary_crossentropy(x, target, class_num)\r\n  File \"/home/jmt/Knowledge_is_Power/images_classifion/PaddleClas-release-2.5.2/ppcls/loss/multilabelloss.py\", line 44, in _binary_crossentropy\r\n    target = target[:, 0, :]\r\n  File \"/home/jmt/anaconda3/envs/paddle/lib/python3.9/site-packages/paddle/base/dygraph/tensor_patch_methods.py\", line 893, in __getitem__\r\n    return self._getitem_dygraph(item)\r\nValueError: (InvalidArgument) Too many indices (3) for tensor of dimension 2.\r\n  [Hint: Expected valid_indexs <= rank == true, but received valid_indexs <= rank:0 != true:1.] (at ../paddle/fluid/pybind/slice_utils.h:338)\r\n\r\n",
        "state": "closed",
        "user": "jingmingtao",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-20T08:36:01+00:00",
        "updated_at": "2024-09-26T08:25:34+00:00",
        "closed_at": "2024-09-23T03:01:48+00:00",
        "comments_count": [
            "TingquanGao",
            "jingmingtao",
            "jingmingtao",
            "jingmingtao",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3224,
        "title": "微调训练识图模型后，特征检索未达到预期效果",
        "body": "训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，如Python3.7\r\n  c. CUDA/cuDNN版本， 如CUDA11.6\r\n自建数据集：\r\n8类，每类1000张左右图片\r\n训练集：每类900张  Query与Gallery相同，每类100张\r\n\r\n训练配置：\r\n尺寸增加到448x448,单卡lr：0.001，epochs 50，batchsize:16, class_num 7 ，【id_list: [50030, 80700, 92019, 96015]   relabel: False】（这两个的关系不清楚）\r\n训练结果\r\n\r\nppcls INFO: [Train][Epoch 50/50][Avg]CELoss: 0.43819, TripletAngularMarginLoss: 0.11634, loss: 0.55453\r\n[2024/08/22 03:24:39] ppcls INFO: gallery feature calculation process: [0/14]\r\n[2024/08/22 03:24:50] ppcls INFO: Build gallery done, all feat shape: [838, 512], begin to eval..\r\n[2024/08/22 03:24:53] ppcls INFO: query feature calculation process: [0/14]\r\n[2024/08/22 03:25:03] ppcls INFO: Build query done, all feat shape: [838, 512], begin to eval..\r\n[2024/08/22 03:25:03] ppcls INFO: re_ranking=False\r\n[2024/08/22 03:25:03] ppcls INFO: [Eval][Epoch 50][Avg]recall1: 1.00000, recall5: 1.00000, mAP: 1.00000\r\n[2024/08/22 03:25:03] ppcls INFO: [Eval][Epoch 50][best metric: 1.0000000000000002]\r\n\r\n导出模型后，替换检索配置文件模型路径。\r\n采用检测+特征提取+向量检索的方式，8类图片每类注册底库10张，然后每类随机挑选4张用于识别。\r\n结果比对得分特别低  top1   0.39545467；8类中有一类特别容易出现误识别。\r\n\r\n看识别模型top1 top5 跟map 都已经是1，过拟合了。loss也比较低0.55，为什么特征比对的时候，相同类别的图片得分特别低，不同类别之间还会混淆。\r\n\r\n检索配置：\r\n# indexing engine config\r\nIndexProcess:\r\n  index_method: \"HNSW32\" # supported: HNSW32, IVF, Flat\r\n  image_root: \"./feature/\"\r\n  index_dir: \"./feature/index\"\r\n  data_file: \"./feature/image_list.txt\"\r\n  index_operation: \"new\" # suported: \"append\", \"remove\", \"new\"\r\n  delimiter: \" \"\r\n  dist_type: \"IP\"\r\n  embedding_size: 512\r\n  batch_size: 32\r\n  return_k: 5\r\n  score_thres: 0.1\r\n\r\n\r\n\r\n\r\n \r\n\r\n",
        "state": "closed",
        "user": "flysssss",
        "closed_by": "liu-jiaxuan",
        "created_at": "2024-08-22T03:37:25+00:00",
        "updated_at": "2024-08-26T03:04:03+00:00",
        "closed_at": "2024-08-26T03:04:00+00:00",
        "comments_count": [
            "flysssss",
            "flysssss",
            "liu-jiaxuan"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3229,
        "title": "度量学习nan是不是单纯是召回没命中？",
        "body": "![image](https://github.com/user-attachments/assets/df587f59-bd24-4196-ade3-981367f95987)",
        "state": "closed",
        "user": "kkpssr",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-27T08:44:07+00:00",
        "updated_at": "2024-09-30T03:01:52+00:00",
        "closed_at": "2024-09-30T03:01:49+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3230,
        "title": "建议支持PaddlePaddle 3.0",
        "body": "在使用PaddlePaddle 3.0的时候出现[#3127](https://github.com/PaddlePaddle/PaddleClas/issues/3127)的问题。报错信息和#3127一样，都是cudnn报错",
        "state": "closed",
        "user": "mikezhuang2022",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-28T13:51:12+00:00",
        "updated_at": "2024-09-29T12:01:55+00:00",
        "closed_at": "2024-09-29T12:01:52+00:00",
        "comments_count": [
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3233,
        "title": "下载EfficientNetV2_S模型时报错",
        "body": "\r\n```\r\nRuntimeError: Downloading from https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/EfficientNetV2_S_pretrained.pdparams failed with code 404!\r\n```\r\n在使用EfficientNetV2_S模型进行微调时，预训练好的模型参数无法下载，网页提示错误信息。\r\n![image](https://github.com/user-attachments/assets/6ac75fa0-e4d3-4ce2-aabf-4d5cc6f34a5f)\r\n",
        "state": "closed",
        "user": "wwma",
        "closed_by": "TingquanGao",
        "created_at": "2024-08-30T06:46:35+00:00",
        "updated_at": "2025-03-02T10:37:51+00:00",
        "closed_at": "2024-10-24T12:02:27+00:00",
        "comments_count": [
            "JianDan0212",
            "JianDan0212",
            "wwma",
            "cuicheng01",
            "TingquanGao",
            "YOIMIYA66"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3235,
        "title": "swin_transformer_v2.py中第689行output_dimensions未定义",
        "body": "paddleclas-release-2.5.2\r\n",
        "state": "closed",
        "user": "luwei-nuaa",
        "closed_by": "zhangyubo0722",
        "created_at": "2024-09-03T01:37:12+00:00",
        "updated_at": "2024-10-14T04:01:15+00:00",
        "closed_at": "2024-10-14T04:01:12+00:00",
        "comments_count": [
            "zhangyubo0722",
            "YAwei666",
            "zhangyubo0722",
            "zhangyubo0722"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3236,
        "title": "dataloader无法正确加载数据",
        "body": "使用PPLCNetV2_base对自己的数据集进行微调，配置文件如下：\r\n```\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  pretrained_model: null\r\n  output_dir: ./output/classification2\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 480\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 512, 512]\r\n  save_inference_dir: ./inference/classification2\r\n\r\n\r\n# mixed precision\r\nAMP:\r\n  use_amp: False\r\n  use_fp16_test: False\r\n  scale_loss: 128.0\r\n  use_dynamic_loss_scaling: True\r\n  use_promote: False\r\n  # O1: mixed fp16, O2: pure fp16\r\n  level: O1\r\n\r\n\r\n# model architecture\r\nArch:\r\n  name: PPLCNetV2_base\r\n  class_num: 2\r\n  pretrained: True\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.08\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: 'L2'\r\n    coeff: 0.00004\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: dataset/road/\r\n      cls_label_path: dataset/road/train.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - RandCropImage:\r\n            size: 512\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n\r\n    # support to specify width and height respectively:\r\n    # scales: [(160,160), (192,192), (224,224) (288,288) (320,320)]\r\n    sampler:\r\n      name: MultiScaleSampler\r\n      scales: [160, 192, 224, 288, 320]\r\n      # first_bs: batch size for the first image resolution in the scales list\r\n      # divide_factor: to ensure the width and height dimensions can be devided by downsampling multiple\r\n      first_bs: 500\r\n      divided_factor: 32\r\n      is_training: True\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    dataset: \r\n      name: ImageNetDataset\r\n      image_root: dataset/road/\r\n      cls_label_path: dataset/road/val.txt\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            resize_short: 512\r\n        - CropImage:\r\n            size: 512\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: ''\r\n    sampler:\r\n      name: DistributedBatchSampler\r\n      batch_size: 64\r\n      drop_last: False\r\n      shuffle: False\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: docs/images/inference_deployment/whl_demo.jpg\r\n  batch_size: 10\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 512\r\n    - CropImage:\r\n        size: 512\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n    class_id_map_file: ppcls/utils/imagenet1k_label_list.txt\r\n\r\nMetric:\r\n  Train:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n  Eval:\r\n    - TopkAcc:\r\n        topk: [1, 5]\r\n```\r\n在dataloader中提示错误，错误信息如下：\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\DELL\\.conda\\envs\\paddle\\lib\\threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\Users\\DELL\\.conda\\envs\\paddle\\lib\\threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"C:\\Users\\DELL\\.conda\\envs\\paddle\\lib\\site-packages\\paddle\\io\\dataloader\\dataloader_iter.py\", line 235, in _thread_loop \r\n   batch = self._dataset_fetcher.fetch(\r\n  File \"C:\\Users\\DELL\\.conda\\envs\\paddle\\lib\\site-packages\\paddle\\io\\dataloader\\fetcher.py\", line 77, in fetch\r\n    print(self.dataset[idx])\r\n  File \"C:\\Users\\DELL\\Desktop\\PaddleClas\\ppcls\\data\\dataloader\\common_dataset.py\", line 81, in __getitem__\r\n    format(self.images[idx], ex))\r\nTypeError: list indices must be integers or slices, not tuple\r\n```\r\ndebug发现，self.images为一个列表，保存着训练集图片的路径，而idx为一个元组，内容为（288，288，54）。不知道这个id为什么会呈现这样？",
        "state": "closed",
        "user": "wwma",
        "closed_by": "zhangyubo0722",
        "created_at": "2024-09-03T07:17:55+00:00",
        "updated_at": "2024-09-09T03:02:45+00:00",
        "closed_at": "2024-09-09T03:02:42+00:00",
        "comments_count": [
            "zhangyubo0722",
            "wwma",
            "zhangyubo0722",
            "zhangyubo0722",
            "wwma",
            "zhangyubo0722",
            "wwma",
            "zhangyubo0722",
            "zhangyubo0722",
            "wwma"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3242,
        "title": "C++部署问题",
        "body": "1. PaddleClas 2.5.2&paddlepaddle-gpu 2.6\r\n 2. 训练环境信息：\r\n  a. Linux\r\n  b. Python3.8\r\n  c. CUDA11.6/cuDNN 8.4\r\n\r\n在使用[quick_start/](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5.2/docs/zh_CN/quick_start/quick_start_classification_professional.md)这个方法对模型进行训练后并导出模型，使用devlop/cpp下的程序进行部署，模型的推理结果不正常，第41类的置信度始终最高：\r\n![image](https://github.com/user-attachments/assets/842305c2-da71-4f02-b178-f412dd6ad497)\r\n请问出现了什么问题？\r\n我的inference.yaml附在下面：\r\n```yaml\r\nGlobal:\r\n  infer_imgs: \"./CIFAR100/train/1\"\r\n  inference_model_dir: \"./infer_model\"\r\n  batch_size: 1\r\n  use_gpu: True\r\n  enable_mkldnn: True\r\n  cpu_num_threads: 10\r\n  enable_benchmark: True\r\n  use_fp16: False\r\n  ir_optim: True\r\n  use_tensorrt: False\r\n  gpu_mem: 8000\r\n  enable_profile: False\r\n\r\nPreProcess:\r\n  transform_ops:\r\n    - ResizeImage:\r\n        resize_short: 36\r\n    - CropImage:\r\n        size: 32\r\n    - NormalizeImage:\r\n        scale: 0.00392157\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: \"\"\r\n        channel_num: 3\r\n    - ToCHWImage:\r\n\r\nPostProcess:\r\n  main_indicator: Topk\r\n  Topk:\r\n    topk: 5\r\n    class_id_map_file: \"./infer_model/label_list.txt\"\r\n  SavePreLabel:\r\n    save_dir: ./pre_label/\r\n\r\n```\r\npaddle_inference的版本为：\r\n```txt\r\nPaddle version: 2.5.2\r\nGIT COMMIT ID: 3a1b1659a405a044ce806fbe027cc146f1193e6d\r\nWITH_MKL: ON\r\nWITH_MKLDNN: ON\r\nWITH_GPU: ON\r\nWITH_ROCM: OFF\r\nWITH_IPU: OFF\r\nCUDA version: 11.2\r\nCUDNN version: v8.2\r\nCXX compiler version: 8.2.0\r\nWITH_TENSORRT: ON\r\nTensorRT version: v8.0.3.4\r\n```",
        "state": "closed",
        "user": "OpenCDR",
        "closed_by": "OpenCDR",
        "created_at": "2024-09-06T17:37:05+00:00",
        "updated_at": "2024-09-08T13:52:48+00:00",
        "closed_at": "2024-09-08T13:52:45+00:00",
        "comments_count": [
            "OpenCDR",
            "liuhongen1234567",
            "OpenCDR",
            "OpenCDR"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3247,
        "title": "PPShitu python3.12 构建索引后识别接口返回结果全是空的",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：paddlepaddle-gpu==2.6.1.post120，paddleclas==2.5.2\r\n \r\n2. 训练环境信息：\r\n  a. Linux，Ubuntu2404-desktop\r\n  b. Python3.12\r\n  c. CUDA12/cuDNN 8.9.7.29\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n     `/home/paddle/venv-paddleclas/lib/python3.8/site-packages/paddleclas/deploy/python/predict_rec.py:93: RuntimeWarning: invalid value encountered in divide\r\n  batch_output = np.divide(batch_output, feas_norm)`\r\n5. `{\r\n    \"err_no\": 0,\r\n    \"err_msg\": \"\",\r\n    \"key\": [\r\n        \"result\"\r\n    ],\r\n    \"value\": [\r\n        \"[]\"\r\n    ],\r\n    \"tensors\": []\r\n}`",
        "state": "closed",
        "user": "LeanFly",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-13T08:17:50+00:00",
        "updated_at": "2024-10-20T03:02:26+00:00",
        "closed_at": "2024-10-20T03:02:23+00:00",
        "comments_count": [
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3249,
        "title": "paddleclas 构建索引停在写入",
        "body": "\r\n![image](https://github.com/user-attachments/assets/394e378a-6232-4692-abd2-a21ee31d3119)\r\n\r\n索引进度跑完之后在最后一步停住不动了，30分钟了都没结束。\r\n\r\nUbuntu 2404\r\ncuda 12\r\npython    3.8\r\npaddleclas          2.5.2\r\npaddlepaddle-gpu    2.6.1.post120",
        "state": "closed",
        "user": "LeanFly",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-13T09:00:37+00:00",
        "updated_at": "2024-10-20T03:02:21+00:00",
        "closed_at": "2024-10-20T03:02:18+00:00",
        "comments_count": [
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3248,
        "title": "PP-ShiTuv2模型在ARM64(RK3588)上部署运行导致linux系统重启",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleDetection-2.7.0 PaddleClas-2.5.2\r\n 2. 硬件环境rk3588 Debian11,使用的是CPU，未使用NPU，paddlelite使用过2.10rc、2.12、2.13rc\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Centos7.5\r\n  b. Python版本号，Python3.8\r\n  c. CUDA/cuDNN版本， CUDA12.0\r\n4、使用的是PaddleClas里的 shitu_android_demo中的cpp代码和lite_shitu，结果一样\r\n\r\n问题现象：\r\nPP-ShiTuv2的主体检测模型picodet的inference模型通过paddlelite opt工具转成nb模型放到RK3588 arm64板子上运行，运行时直接导致RK3588 Debian11系统重启；\r\n用官方文档的量化nb模型运行正常，官方的量化是ppshituv2_lite_models_v1.0/mainbody_PPLCNet_x2_5_640_quant_v1.0_lite.nb 和general_PPLCNetV2_base_quant_v1.0_lite.nb，官方的文档里也只讲把export_model导出的inference模型用opt转换，并未涉及到主体检测模型的量化，查看代码也未看见主体检测的量化配置文件\r\n用官方的提供的主体检测和识别的inference模型通过opt命令转换后nb模型，运行时也直接Linux系统直接重启\r\n识别模型用代码里的PPLCNetV1的配置文件进行量化训练，然后export_model导出，然后再经过opt转换貌似搞定，但主体检测模型量化训练没看见相似的量化配置文件，且识别模型里也只有PPLCNetV1的量化配置，没看见PPLCNetV2的配置\r\n\r\n有搞过的同学或者朋友指点一下，请版主帮忙指点一下，已经过了2周还没有解决问题，甚至paddlelite 的库我在RK3588 Debian11重新编译过，代码运行到predictor_->Run() 系统重启",
        "state": "closed",
        "user": "wenzhu2018",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-13T08:18:04+00:00",
        "updated_at": "2024-10-22T03:02:17+00:00",
        "closed_at": "2024-10-22T03:02:13+00:00",
        "comments_count": [
            "wenzhu2018",
            "zhang-prog",
            "wenzhu2018",
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3250,
        "title": "请问再CPU环境下如何测试时间是2-3ms呢，相同模型我测试运行时间是400多ms呢，即使只算推理部分也100多ms",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "carter275",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-17T00:32:51+00:00",
        "updated_at": "2024-10-19T12:02:18+00:00",
        "closed_at": "2024-10-19T12:02:15+00:00",
        "comments_count": [
            "carter275",
            "carter275",
            "zhangyubo0722",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3252,
        "title": "paddleclas build_gallery 最后没有保存 index.vetor id_map.pkl 文件",
        "body": "windwos 11\r\npython310\r\n\r\npaddleclas                       2.5.2\r\npaddlepaddle                     2.6.2\r\n\r\n```\r\npaddleclas --build_gallery=True --model_name=\"PP-ShiTuV2\" -o IndexProcess.image_root=\"C:\\\\Users\\\\ningm\\\\Documents\\\\python\\\\youpingjiu\\\\crop_2024-09-09\" -o IndexProcess.index_dir=\"C:\\\\Users\\\\ningm\\\\Documents\\\\python\\\\youpingjiu\\\\2024-09-09_fix\" -o IndexProcess.data_file=\"C:\\\\Users\\\\ningm\\\\Documents\\\\python\\\\youpingjiu\\\\2024\r\n-09-09_wb_query_index.txt\"\r\n```\r\n\r\n![image](https://github.com/user-attachments/assets/e7ca76a9-61be-4951-b693-da22bf019983)\r\n",
        "state": "closed",
        "user": "LeanFly",
        "closed_by": "liu-jiaxuan",
        "created_at": "2024-09-18T08:55:14+00:00",
        "updated_at": "2024-11-28T09:25:10+00:00",
        "closed_at": "2024-09-22T03:04:50+00:00",
        "comments_count": [
            "LeanFly",
            "RillMa",
            "liu-jiaxuan",
            "RillMa",
            "WR-CREATOR",
            "RillMa",
            "WR-CREATOR",
            "RillMa",
            "WR-CREATOR"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3258,
        "title": "模型训练过程中eval指标没有变化",
        "body": "使用ppcls\\configs\\ImageNet\\DeiT_base_distilled_patch16_384.yaml中的参数对自己的模型进行二分类训练，其中仅仅更改了数据的路径以及分类个数，一共1000张图片，train：eval=2：1。训练过程中使用一张GPU，其余条件无更改。\r\n\r\n从结果来看，评价集的指标从第一个epoch开始没有任何变化，目前已经训练到了第35个epoch，请问有什么改进的建议吗？\r\n![image](https://github.com/user-attachments/assets/3896e867-77b1-4b1f-9732-03c9429c19f3)\r\n![image](https://github.com/user-attachments/assets/f7e87d05-103d-4a20-badc-710624cb4e50)\r\n\r\n\r\n",
        "state": "closed",
        "user": "wwma",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-24T08:45:31+00:00",
        "updated_at": "2024-10-26T12:02:40+00:00",
        "closed_at": "2024-10-26T12:02:30+00:00",
        "comments_count": [
            "zhang-prog",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3264,
        "title": "ppshituV2训练时，出现classes(0)的相关报错",
        "body": "我在使用ppshituv1时，可以完成特征提取的训练，但是在`\"PaddleClas/ppcls/configs/GeneralRecognitionV2/GeneralRecognitionV2_PPLCNetV2_base.yaml\"`的配置文件中，我只做了对应的数据集路径修改和类别数量修改：\r\n~~~\r\n#########################配置文件#############################\r\n# global configs\r\nGlobal:\r\n  checkpoints: null\r\n  # pretrained_model: null\r\n  pretrained_model: https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/pretrain/PPShiTuV2/general_PPLCNetV2_base_pretrained_v1.0.pdparams\r\n  output_dir: ./AMCS3_ppshituV2_output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  epochs: 100\r\n  print_batch_step: 20\r\n  use_visualdl: False\r\n  eval_mode: retrieval\r\n  retrieval_feature_from: features # 'backbone' or 'features'\r\n  re_ranking: False\r\n  use_dali: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference\r\n\r\n\r\nAMP:\r\n  scale_loss: 65536\r\n  use_dynamic_loss_scaling: True\r\n  # O1: mixed fp16\r\n  level: O1\r\n\r\n# model architecture\r\nArch:\r\n  name: RecModel\r\n  infer_output_key: features\r\n  infer_add_softmax: False\r\n\r\n  Backbone:\r\n    name: PPLCNetV2_base_ShiTu\r\n    pretrained: True\r\n    use_ssld: True\r\n    class_expand: &feat_dim 512\r\n  BackboneStopLayer:\r\n    name: flatten\r\n  Neck:\r\n    name: BNNeck\r\n    num_features: *feat_dim\r\n    weight_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 1.0\r\n    bias_attr:\r\n      initializer:\r\n        name: Constant\r\n        value: 0.0\r\n      learning_rate: 1.0e-20 # NOTE: Temporarily set lr small enough to freeze the bias to zero\r\n  Head:\r\n    name: FC\r\n    embedding_size: *feat_dim\r\n    # class_num: 192612\r\n    class_num: 5\r\n    weight_attr:\r\n      initializer:\r\n        name: Normal\r\n        std: 0.001\r\n    bias_attr: False\r\n\r\n# loss function config for traing/eval process\r\nLoss:\r\n  Train:\r\n    - CELoss:\r\n        weight: 1.0\r\n        epsilon: 0.1\r\n    - TripletAngularMarginLoss:\r\n        weight: 1.0\r\n        feature_from: features\r\n        margin: 0.5\r\n        reduction: mean\r\n        add_absolute: True\r\n        absolute_loss_weight: 0.1\r\n        normalize_feature: True\r\n        ap_value: 0.8\r\n        an_value: 0.4\r\n  Eval:\r\n    - CELoss:\r\n        weight: 1.0\r\n\r\nOptimizer:\r\n  name: Momentum\r\n  momentum: 0.9\r\n  lr:\r\n    name: Cosine\r\n    learning_rate: 0.06 # for 8gpu x 256bs\r\n    warmup_epoch: 5\r\n  regularizer:\r\n    name: L2\r\n    coeff: 0.00001\r\n\r\n# data loader for train and eval\r\nDataLoader:\r\n  Train:\r\n    dataset:\r\n      name: ImageNetDataset\r\n      image_root: deploy/datasets/AMCS3\r\n      cls_label_path: ./deploy/datasets/AMCS3/train_label.txt\r\n      relabel: False\r\n      transform_ops:\r\n        - DecodeImage:\r\n            to_rgb: True\r\n            channel_first: False\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - RandFlipImage:\r\n            flip_code: 1\r\n        - Pad:\r\n            padding: 10\r\n            backend: cv2\r\n        - RandCropImageV2:\r\n            size: [224, 224]\r\n        - RandomRotation:\r\n            prob: 0.5\r\n            degrees: 90\r\n            interpolation: bilinear\r\n        - ResizeImage:\r\n            size: [224, 224]\r\n            return_numpy: False\r\n            interpolation: bilinear\r\n            backend: cv2\r\n        - NormalizeImage:\r\n            scale: 1.0/255.0\r\n            mean: [0.485, 0.456, 0.406]\r\n            std: [0.229, 0.224, 0.225]\r\n            order: hwc\r\n    sampler:\r\n      name: PKSampler\r\n      batch_size: 4\r\n      sample_per_id: 4\r\n      drop_last: False\r\n      shuffle: True\r\n      sample_method: \"id_avg_prob\"\r\n      id_list: [50030, 80700, 92019, 96015] # be careful when set relabel=True\r\n      ratio: [4, 4]\r\n    loader:\r\n      num_workers: 4\r\n      use_shared_memory: True\r\n\r\n  Eval:\r\n    Query:\r\n      dataset:\r\n        name: VeriWild\r\n        image_root: deploy/datasets/AMCS3\r\n        cls_label_path: ./deploy/datasets/AMCS3/val_label.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 64\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\n    Gallery:\r\n      dataset:\r\n        name: VeriWild\r\n        image_root: deploy/datasets/AMCS3\r\n        cls_label_path: ./deploy/datasets/AMCS3/val_label.txt\r\n        transform_ops:\r\n          - DecodeImage:\r\n              to_rgb: True\r\n              channel_first: False\r\n          - ResizeImage:\r\n              size: [224, 224]\r\n              return_numpy: False\r\n              interpolation: bilinear\r\n              backend: cv2\r\n          - NormalizeImage:\r\n              scale: 1.0/255.0\r\n              mean: [0.485, 0.456, 0.406]\r\n              std: [0.229, 0.224, 0.225]\r\n              order: hwc\r\n      sampler:\r\n        name: DistributedBatchSampler\r\n        batch_size: 64\r\n        drop_last: False\r\n        shuffle: False\r\n      loader:\r\n        num_workers: 4\r\n        use_shared_memory: True\r\n\r\nInfer:\r\n  infer_imgs: ./deploy/datasets/AMCS3/test\r\n  batch_size: 32\r\n  class_id_map_file: ./deploy/datasets/AMCS3/class_mapping2.txt\r\n  transforms:\r\n    - DecodeImage:\r\n        to_rgb: True\r\n        channel_first: False\r\n    - ResizeImage:\r\n        resize_short: 256\r\n    - CropImage:\r\n        size: 224\r\n    - NormalizeImage:\r\n        scale: 1.0/255.0\r\n        mean: [0.485, 0.456, 0.406]\r\n        std: [0.229, 0.224, 0.225]\r\n        order: ''\r\n    - ToCHWImage:\r\n  PostProcess:\r\n    name: Topk\r\n    topk: 5\r\n\r\n\r\n\r\nMetric:\r\n  Eval:\r\n    - Recallk:\r\n        topk: [1, 5]\r\n    - mAP: {}\r\n\r\n    ###################################分割线#######################\r\n虽然能够在终端打印出所有的train、val的图片信息：\r\ntrain/5/1YH_20240101172813_1781.jpg 5 7307\r\ntrain/5/2YH_20230501002030_1782.jpg 5 7308\r\ntrain/5/1YH_20230201075635_1783.jpg 5 7309\r\n...\r\n但是在最后一行报错:\"AssertionError: batch size(4) should not be bigger than than #classes(0)*sample_per_id(4)\";\r\n看起来是没有找到类别映射的路径，我的类别映射存放在\"PaddleClas/deploy/datasets/AMCS3/label_list.txt\"，\r\n我参考了网上的其他配置文件，也是这样的存放方式，也没有在GeneralRecognitionV2_PPLCNetV2_base.yaml中\r\n找到写入类别映射文件的参数，一直找不到解决办法，可以解答一下吗~\r\ntxt文件内容如下，共5类：\r\n0 JueYuan\r\n1 DiYa\r\n2 GaoYa\r\n3 DianLiu\r\n4 DianYa\r\n",
        "state": "closed",
        "user": "ca1wenha0",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-30T10:20:26+00:00",
        "updated_at": "2024-11-13T03:03:43+00:00",
        "closed_at": "2024-11-13T03:03:40+00:00",
        "comments_count": [
            "liuhongen1234567",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3263,
        "title": "windows + vs2019 + paddleclas-2.5 +faiss 编译成功后，pp-shitu没有输出",
        "body": "我按照说明将paddleclas release2.5 （cpu版）在windows进行编译现在遇到一个问题，编译成功后运行的时候，没有任何输出，检查到可能是在paddle_infer::Config config出现问题，不知道怎么解决了，如下图：\r\n我用到的版本：\r\npaddleclas 2.5 /2.3\r\npaddle-inference 2.2/2.3/2.5(cpu版的)\r\nfaiss-master/faiss-1.7\r\nopenblas\r\nvs2019 \r\nwindows 10\r\n![image](https://github.com/user-attachments/assets/73f436bc-8ca6-437f-95b0-463cd06c72ee)\r\n\r\n",
        "state": "closed",
        "user": "xcjcb001",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-30T09:33:29+00:00",
        "updated_at": "2024-12-02T03:03:07+00:00",
        "closed_at": "2024-12-02T03:03:03+00:00",
        "comments_count": [
            "cuicheng01",
            "xcjcb001",
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3261,
        "title": "pp-hgnetv2有相关论文吗 需要引用",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "Mmmmwei",
        "closed_by": "TingquanGao",
        "created_at": "2024-09-29T02:55:17+00:00",
        "updated_at": "2024-11-09T03:03:24+00:00",
        "closed_at": "2024-11-09T03:03:21+00:00",
        "comments_count": [
            "ghost",
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3270,
        "title": "使用opt转换的nb格式主体模型 picodet运行就报错 使用yolo模型就会只能识别出一个主体",
        "body": "使用opt转换的nb格式主体模型 picodet运行就报错 使用yolo模型就可以运行 但是只会识别出一个主体\r\n目前比较倾向于使用picodet模型 但是一到主体识别那步的predictor_->Run()这步 就会崩溃\r\n怀疑过是自己训练的模型有问题 也直接下载过官方版本的模型 \r\n也调整过尺寸 也调整过ops和paddlelite的版本 \r\n也尝试换过不同设备 \r\n\r\n安卓demo使用的是官方paddleclas里的android-demo\r\nops尝试过各个版本 paddlelite也是\r\n非常需要帮助 ",
        "state": "closed",
        "user": "zoelulur",
        "closed_by": "liu-jiaxuan",
        "created_at": "2024-10-08T10:25:04+00:00",
        "updated_at": "2024-10-15T12:07:49+00:00",
        "closed_at": "2024-10-15T12:07:46+00:00",
        "comments_count": [
            "liu-jiaxuan",
            "zoelulur",
            "liu-jiaxuan"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3271,
        "title": "pp-shituv2 使用自己训练后导出的模型，再使用hubserving时，无法配置class_id_map_file，生成模型的文件中没有对应文件，",
        "body": "pp-shituv2 使用自己训练后导出的模型，再使用hubserving时，无法配置class_id_map_file，生成模型的文件中没有对应文件，\r\n\r\n详细参考hubserving/clas/params.py 配置文件",
        "state": "closed",
        "user": "dlli",
        "closed_by": "dlli",
        "created_at": "2024-10-10T03:43:13+00:00",
        "updated_at": "2024-10-16T00:43:23+00:00",
        "closed_at": "2024-10-16T00:43:21+00:00",
        "comments_count": [
            "liuhongen1234567",
            "dlli",
            "dlli",
            "liuhongen1234567",
            "dlli"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3284,
        "title": "def __getitem__打印报错",
        "body": "\r\n```python\r\nclass VeriWild(Dataset):\r\n    \"\"\"Dataset for Vehicle and other similar data structure, such as VeRI-Wild, SOP, Inshop...\r\n    Args:\r\n        image_root (str): image root\r\n        cls_label_path (str): path to annotation file\r\n        transform_ops (List[Callable], optional): list of transform op(s). Defaults to None.\r\n        backend (str, optional): pil or cv2. Defaults to \"cv2\".\r\n        relabel (bool, optional): whether do relabel when original label do not starts from 0 or are discontinuous. Defaults to False.\r\n    \"\"\"\r\n    def __init__(self, image_root, cls_label_path, transform_ops=None, backend=\"cv2\", relabel=False):\r\n        self._img_root = image_root\r\n        self._cls_path = cls_label_path\r\n        if transform_ops:\r\n            self._transform_ops = create_operators(transform_ops)\r\n        self.backend = backend\r\n        self._dtype = paddle.get_default_dtype()\r\n        self._load_anno(relabel)\r\n        \r\n    def _load_anno(self, relabel):\r\n        assert os.path.exists(self._cls_path), f\"path {self._cls_path} does not exist.\"\r\n        assert os.path.exists(self._img_root), f\"path {self._img_root} does not exist.\"\r\n        self.images = []\r\n        self.labels = []\r\n        self.cameras = []\r\n        # 读取train.txt文件\r\n        with open(self._cls_path) as fd:\r\n            lines = fd.readlines()\r\n            if relabel:\r\n                label_set = set()\r\n                for line in lines:\r\n                    line = line.strip().split(\",\")\r\n                    label_set.add(np.int64(line[1]))\r\n                # 新-旧标签的映射\r\n                label_map = {\r\n                    oldlabel: newlabel\r\n                    for newlabel, oldlabel in enumerate(label_set)\r\n                }\r\n            \r\n            # 对于每一行进行遍历\r\n            for line in lines:\r\n                line = line.strip().split(\",\")\r\n                # 图片img路径\r\n                self.images.append(os.path.join(self._img_root, line[0]))\r\n                # 标签label\r\n                if relabel:\r\n                    self.labels.append(label_map[np.int64(line[1])])\r\n                else:\r\n                    self.labels.append(np.int64(line[1]))\r\n                # 图片id\r\n                if len(line) >= 3:\r\n                    self.cameras.append(np.int64(line[2]))\r\n                # os.path.exists判断文件或文件夹是否存在\r\n                assert os.path.exists(self.images[-1]), f\"path {self.images[-1]} does not exist.\"\r\n\r\n        self.has_camera = len(self.cameras) > 0\r\n\r\n    def __getitem__(self, idx):\r\n        try:\r\n            if self.backend == \"cv2\":\r\n                with open(self.images[idx], 'rb') as f:\r\n                    img = f.read()\r\n            else:\r\n                img = Image.open(self.images[idx]).convert(\"RGB\")\r\n            # 执行数据增强操作\r\n            if self._transform_ops:\r\n                img = transform(img, self._transform_ops)\r\n            # H,W,C-->C,H,W\r\n            if self.backend == \"cv2\":\r\n                img = img.transpose((2, 0, 1))\r\n            if self.has_camera:\r\n                return (img, self.labels[idx], self.cameras[idx])\r\n            else:\r\n                return (img, self.labels[idx])\r\n        except Exception as ex:\r\n            logger.error(\"Exception occured when parse line: {} with msg: {}\".format(self.images[idx], ex))\r\n            # 随机选择一个idx继续执行\r\n            rnd_idx = np.random.randint(self.__len__())\r\n            return self.__getitem__(rnd_idx)\r\n\r\n    def __len__(self):\r\n        return len(self.images)\r\n\r\n    @property\r\n    def class_num(self):\r\n        return len(set(self.labels))\r\n\r\n```    \r\ninit和len函数里面都能打印，getitem打印不出来，很奇怪啊",
        "state": "closed",
        "user": "wstchh",
        "closed_by": "liuhongen1234567",
        "created_at": "2024-10-29T08:34:44+00:00",
        "updated_at": "2024-12-06T03:27:16+00:00",
        "closed_at": "2024-12-06T03:27:13+00:00",
        "comments_count": [
            "wstchh",
            "wstchh",
            "cuicheng01",
            "wstchh"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3285,
        "title": "会提示找不到paddleclas模块",
        "body": "```python\r\n# from paddleclas.deploy.python.predict_det import DetPredictor\r\n# from paddleclas.deploy.python.predict_rec import RecPredictor\r\n\r\n# from paddleclas.deploy.utils import logger, config\r\n# from paddleclas.deploy.utils.get_image_list import get_image_list\r\n# from paddleclas.deploy.utils.draw_bbox import draw_bbox_results\r\n```\r\n\r\ncd  xxxxxx/PaddleClas2.5.2/deploy    运行：python python/predict_det.py -c configs/inference_det.yaml     会提示找不到paddleclas模块，将代码替换成下面这个，可以正常运行，请问原因是什么呢？\r\n\r\n```python\r\n__dir__ = os.path.dirname(os.path.abspath(__file__))\r\nsys.path.append(os.path.abspath(os.path.join(__dir__, '../')))\r\nfrom python.predict_rec import RecPredictor\r\nfrom python.predict_det import DetPredictor\r\n\r\nfrom utils import logger\r\nfrom utils import config\r\nfrom utils.get_image_list import get_image_list\r\nfrom utils.draw_bbox import draw_bbox_results\r\n```",
        "state": "closed",
        "user": "wstchh",
        "closed_by": "TingquanGao",
        "created_at": "2024-10-30T08:16:35+00:00",
        "updated_at": "2024-12-08T03:03:19+00:00",
        "closed_at": "2024-12-08T03:03:16+00:00",
        "comments_count": [
            "changdazhou",
            "wstchh",
            "changdazhou",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3288,
        "title": "各个模型的预训练模型在哪里下载？",
        "body": "PaddlePaddle 2.6\r\n各个模型的预训练模型在哪里下载？\r\n",
        "state": "closed",
        "user": "mayun123",
        "closed_by": "mayun123",
        "created_at": "2024-11-07T01:18:01+00:00",
        "updated_at": "2024-11-07T08:37:49+00:00",
        "closed_at": "2024-11-07T08:37:46+00:00",
        "comments_count": [
            "mayun123"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3289,
        "title": "PaddleX 3.0，训练多标签模型（CLIP_vit_base_patch16_448_ML），显存泄露",
        "body": "显存泄露问题，甚至是每个epoch都会导致显存增长，而且我已经关闭了eval，只训练\r\n\r\n我的环境是\r\nPaddleX 3.0-beta1\r\nWindows10 ltsc 2019\r\nPython 3.10\r\nCUDA 11.8\r\n4090显卡\r\n\r\nPaddleClas是通过插件安装的，命令如下：\r\npaddlex --install PaddleClas\r\n\r\n训练命令：\r\npython main.py -c paddlex/configs/multilabel_classification/CLIP_vit_base_patch16_448_ML.yaml -o Global.mode=train -o Global.dataset_dir=./dataset/mlcls_nus_examples -o Global.device=gpu:0\r\n\r\nPaddleX的代码无修改，ymal只修改了训练的配置，修改后的配置如下：\r\n```\r\nTrain:\r\n  num_classes: 33\r\n  epochs_iters: 20\r\n  batch_size: 16\r\n  learning_rate: 0.0003\r\n  pretrain_weight_path: null\r\n  warmup_steps: 5\r\n  resume_path: null\r\n  log_interval: 20\r\n  eval_interval: 20\r\n  save_interval: 4\r\n```\r\n\r\nMSI Afterburner的截图\r\n![捕获](https://github.com/user-attachments/assets/e7aa7690-b8e9-456a-80e9-37d1ff42e782)\r\n\r\n\r\n",
        "state": "closed",
        "user": "188080501",
        "closed_by": "188080501",
        "created_at": "2024-11-07T09:00:11+00:00",
        "updated_at": "2024-11-08T03:12:23+00:00",
        "closed_at": "2024-11-08T03:12:19+00:00",
        "comments_count": [
            "188080501",
            "cuicheng01",
            "188080501"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3290,
        "title": "PaddleX 3.0beta1，无法正常训练多标签分类模型（PP-HGNetV2-B4_ML.yaml）",
        "body": "我的环境是\r\nPaddleX 3.0-beta1\r\npaddlepaddle-gpu 3.0.0b2\r\nWindows10 ltsc 2019\r\nPython 3.10\r\nCUDA 11.8\r\n4090显卡\r\n\r\nPaddleClas是通过插件安装的，命令如下：\r\npaddlex --install PaddleClas\r\n\r\n训练命令：\r\npython main.py -c paddlex/configs/multilabel_classification/PP-HGNetV2-B4_ML.yaml -o Global.mode=train -o Global.dataset_dir=./dataset/mlcls_nus_examples -o Global.device=gpu:0\r\n\r\n问题描述：\r\n对于mlcls_nus_examples数据集，MultiLabelMAP不管怎么训练都是0.1左右，而且最后训练完的模型拿去推理，可以得到结果数据，但是以不管什么图得到的结果都是几乎一样的，也不正确\r\n\r\n同样的训练数据，训练CLIP_vit_base_patch16_448_ML模型，一切正常，推理得到的结果也是正常\r\n\r\n训练时部分输出的log如下：\r\nMultiLabelAsymmetricLoss: 68.95149, loss: 68.95149, MultiLabelMAP(integral): 0.093\r\nMultiLabelAsymmetricLoss: 78.03179, loss: 78.03179, MultiLabelMAP(integral): 0.099\r\n其中MultiLabelMAP不管怎么训练都是0.1左右的一个值\r\n\r\n",
        "state": "closed",
        "user": "188080501",
        "closed_by": "TingquanGao",
        "created_at": "2024-11-08T03:39:00+00:00",
        "updated_at": "2025-06-06T09:40:25+00:00",
        "closed_at": "2025-02-19T12:02:57+00:00",
        "comments_count": [
            "liuhongen1234567",
            "TingquanGao",
            "TingquanGao",
            "188080501"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3292,
        "title": "按照https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_text_image_orientation.md  教程运行，安装了Paddleplas后运行对应代码显示报错",
        "body": "安装后运行代码结果如下：\r\n<img width=\"854\" alt=\"4666e9762cc6f9ea41295d541fdc6f0\" src=\"https://github.com/user-attachments/assets/d209b161-4d4d-4895-a14b-73c69b61612b\">\r\npython版本是3.8.20\r\n文件的目录结构如下：\r\n![image](https://github.com/user-attachments/assets/81c51499-bb65-4736-a141-12c0c9d8bc69)\r\n",
        "state": "closed",
        "user": "kafukaf325",
        "closed_by": "changdazhou",
        "created_at": "2024-11-09T03:32:20+00:00",
        "updated_at": "2024-11-25T02:17:05+00:00",
        "closed_at": "2024-11-25T02:17:02+00:00",
        "comments_count": [
            "changdazhou",
            "byte-hzzh"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3296,
        "title": "微调GeneralRecognitionV2_PPLCNetV2_base.yaml需要多长时间？",
        "body": "ppcls INFO: [Train][Epoch 2/100][Iter: 500/1606]lr(LinearWarmup): 0.01574346, CELoss: 8.69497, TripletAngularMarginLoss: 0.64910, loss: 9.34407, batch_cost: 20.16547s, reader_cost: 19.83207, ips: 12.69497 samples/s, eta: 36 days, 23:48:26\r\n微调特征提取模型，数据集：17000类，41万个样本。使用单卡3090训练提示需要30天。\r\n请问这个时间是正常的吗？另外在安装paddlepaddle-gpu2.6.1时，我的cuda版本是11.3，跟paddle官方网站列出的cuda版本不一致，这个会导致训练时间增加吗？\r\n![screenshot-20241114-100714](https://github.com/user-attachments/assets/9c34f05b-d576-421b-ab71-38fbcbbdade3)\r\n",
        "state": "closed",
        "user": "chen1234520",
        "closed_by": "chen1234520",
        "created_at": "2024-11-14T02:07:36+00:00",
        "updated_at": "2024-11-14T07:31:53+00:00",
        "closed_at": "2024-11-14T07:31:49+00:00",
        "comments_count": [
            "chen1234520",
            "TingquanGao",
            "chen1234520",
            "chen1234520"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3299,
        "title": "RuntimeError: (NotFound) Cannot open file ",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Windows11\r\n  b. Python版本号，Python3.10.15\r\n  c. CUDA/cuDNN版本， CUDA12.2/cuDNN 8.9.7\r\n 4. 完整的代码\r\n输入https://github.com/PaddlePaddle/PaddleClas/blob/release/2.6/docs/zh_CN/models/PULC/PULC_person_attribute.md 中的快速预测代码\r\n  paddleclas --model_name=person_attribute --infer_imgs=pulc_demo_imgs/person_attribute/090004.jpg\r\n出现报错：\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\ll\\AppData\\Roaming\\uv\\python\\cpython-3.10.15-windows-x86_64-none\\lib\\runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\ll\\AppData\\Roaming\\uv\\python\\cpython-3.10.15-windows-x86_64-none\\lib\\runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"E:\\AI\\paddle\\.venv\\Scripts\\paddleclas.exe\\__main__.py\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"E:\\AI\\paddle\\.venv\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 818, in main\r\n    clas_engine = PaddleClas(**cfg)\r\n  File \"E:\\AI\\paddle\\.venv\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 610, in __init__\r\n    self.predictor = ClsPredictor(self._config)\r\n  File \"E:\\AI\\paddle\\.venv\\lib\\site-packages\\paddleclas\\deploy\\python\\predict_cls.py\", line 28, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"E:\\AI\\paddle\\.venv\\lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 37, in __init__\r\n    self.predictor, self.config = self.create_paddle_predictor(\r\n  File \"E:\\AI\\paddle\\.venv\\lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 108, in create_paddle_predictor\r\n    predictor = create_predictor(config)\r\nRuntimeError: (NotFound) Cannot open file C:\\Users\\ll/.paddleclas/inference_model\\PULC\\person_attribute, please confirm whether the file is normal.\r\n  [Hint: Expected static_cast<bool>(fin.is_open()) == true, but received static_cast<bool>(fin.is_open()):0 != true:1.] (at ..\\paddle\\fluid\\inference\\api\\analysis_predictor.cc:2578)\r\n如图文件已经在该目录中，但是依然打不开\r\n![error](https://github.com/user-attachments/assets/e104b918-fccc-419c-b31f-a6cbfe117451)\r\n",
        "state": "closed",
        "user": "zgyj4532",
        "closed_by": "zgyj4532",
        "created_at": "2024-11-14T13:22:29+00:00",
        "updated_at": "2024-11-15T01:27:30+00:00",
        "closed_at": "2024-11-15T01:27:27+00:00",
        "comments_count": [
            "zgyj4532"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3297,
        "title": "使用自定义数据微调GeneralRecognitionV2_PPLCNetV2_base.yaml",
        "body": "使用自定的数据微调GeneralRecognitionV2_PPLCNetV2_base.yaml特征提取模型，里面有两个参数\r\nrelabel: True\r\nsampler:\r\n    id_list: [50030, 80700, 92019, 96015] # be careful when set relabel=True\r\n使用自定义的数据集，类别有17000类，请问上面两个参数是什么含义？需要根据自己的数据集类别数量更改吗？另外请问哪里能找到参考文档。https://paddleclas.readthedocs.io/zh-cn/latest/这个地址上看不到所有的参数信息。\r\n\r\n",
        "state": "closed",
        "user": "chen1234520",
        "closed_by": "TingquanGao",
        "created_at": "2024-11-14T06:47:48+00:00",
        "updated_at": "2024-12-16T12:03:28+00:00",
        "closed_at": "2024-12-16T12:03:24+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3300,
        "title": "我训练的图片多标签识别模型，使用paddleserving部署模型，预测结果和在本地使用命令行预测结果不一致",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\nPaddleClas：2.5.2       PaddleServing：paddlepaddle/serving：0.7.0-devel\r\n以下是classification_web_service.py脚本内容\r\n\r\nclass ImagenetOp(Op):\r\n    def init_op(self):\r\n        self.seq = Sequential([\r\n            Resize(256), CenterCrop(224), RGB2BGR(), Transpose((2, 0, 1)),\r\n            Div(255), Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225],\r\n                                True)\r\n        ])\r\n        self.label_dict = {}\r\n        label_idx = 0\r\n        with open(\"gas.label\") as fin:\r\n            for line in fin:\r\n                self.label_dict[label_idx] = line.strip()\r\n                label_idx += 1\r\n\r\n    def preprocess(self, input_dicts, data_id, log_id):\r\n        (_, input_dict), = input_dicts.items()\r\n        batch_size = len(input_dict.keys())\r\n        imgs = []\r\n        for key in input_dict.keys():\r\n            data = base64.b64decode(input_dict[key].encode('utf8'))\r\n            data = np.fromstring(data, np.uint8)\r\n            im = cv2.imdecode(data, cv2.IMREAD_COLOR)\r\n            img = self.seq(im)\r\n            imgs.append(img[np.newaxis, :].copy())\r\n        input_imgs = np.concatenate(imgs, axis=0)\r\n        return {\"x\": input_imgs}, False, None, \"\"\r\n\r\n    def postprocess(self, input_dicts, fetch_dict, data_id, log_id):\r\n        score_list = fetch_dict[\"prediction\"]\r\n        result = {\"scores\": str(score_list)}\r\n        return result, None, \"\"\r\n\r\n\r\nclass ImageService(WebService):\r\n    def get_pipeline_response(self, read_op):\r\n        image_op = ImagenetOp(name=\"imagenet\", input_ops=[read_op])\r\n        return image_op\r\n\r\n\r\nuci_service = ImageService(name=\"imagenet\")\r\nuci_service.prepare_pipeline_config(\"config.yml\")\r\nuci_service.run_service()\r\n\r\n\r\n",
        "state": "closed",
        "user": "syge",
        "closed_by": "TingquanGao",
        "created_at": "2024-11-15T02:15:06+00:00",
        "updated_at": "2024-12-20T03:03:35+00:00",
        "closed_at": "2024-12-20T03:03:32+00:00",
        "comments_count": [
            "zhangyubo0722",
            "syge",
            "zhangyubo0722",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3303,
        "title": "numpy版本与最新的PaddleOCR=2.9.1冲突",
        "body": "[PaddleClas](https://github.com/PaddlePaddle/PaddleClas) 中的numpy版本与最新的PaddleOCR=2.9.1冲突:\r\n1.  依赖如下:\r\npython = \">=3.9,<3.13\"\r\npaddlepaddle = \"3.0.0b1\"\r\npaddleocr = \"2.9.1\"\r\npaddleclas = \"2.6.0\"\r\n2.  简要的依赖安装时报错:\r\n\"\"\"\r\nAnd because opencv-python-headless (4.10.0.84) depends on numpy (>=1.26.0)\r\nand paddleclas (2.6.0) depends on numpy (1.24.4), paddleclas (2.6.0) is incompatible with opencv-python-headless (>=4.9.0.80).\r\n\"\"\"\r\n3.  建议将[PaddleClas](https://github.com/PaddlePaddle/PaddleClas)的requirements.txt修改为 如下:\r\nnumpy<2.0\r\n4.  运行操作系统: Windows11\r\n\r\n5. 完整的安装依赖错误:\r\n\"\"\"\r\nBecause opencv-python-headless (4.9.0.80) depends on numpy (>=1.26.0)\r\nand no versions of opencv-python-headless match >4.9.0.80,<4.10.0.82 || >4.10.0.82,<4.10.0.84 || >4.10.0.84, opencv-python-headless (>=4.9.0.80,<4.10.0.82 || >4.10.0.82,<4.10.0.84 || >4.10.0.84) requires numpy (>=1.26.0).\r\nAnd because opencv-python-headless (4.10.0.82) depends on numpy (>=1.26.0), opencv-python-headless (>=4.9.0.80,<4.10.0.84 || >4.10.0.84) requires numpy (>=1.26.0).\r\nAnd because opencv-python-headless (4.10.0.84) depends on numpy (>=1.26.0)\r\nand paddleclas (2.6.0) depends on numpy (1.24.4), paddleclas (2.6.0) is incompatible with opencv-python-headless (>=4.9.0.80).\r\nAnd because paddleocr (2.9.1) depends on albucore (0.0.13) which depends on opencv-python-headless (>=4.9.0.80), paddleclas (2.6.0) is incompatible with paddleocr (2.9.1).\r\nSo, because paddle-ocr-work-ticket depends on both paddleocr (2.9.1) and paddleclas (2.6.0), version solving failed.\r\n\"\"\"\r\n",
        "state": "closed",
        "user": "WangYP90",
        "closed_by": "WangYP90",
        "created_at": "2024-11-15T11:00:51+00:00",
        "updated_at": "2024-11-21T12:12:26+00:00",
        "closed_at": "2024-11-21T12:12:22+00:00",
        "comments_count": [
            "zhangyubo0722"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3304,
        "title": "代码中存在循环引用bug",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，MacOS\r\n  b. Python版本号，python3.10\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n当使用本地编辑安装paddleclas后，运行项目时就会出现循环应用的bug\r\n\r\n![image](https://github.com/user-attachments/assets/92fbc144-6c0d-478d-8ecf-758111c2728f)\r\n\r\n\r\n",
        "state": "closed",
        "user": "ericosmic",
        "closed_by": "TingquanGao",
        "created_at": "2024-11-16T05:36:58+00:00",
        "updated_at": "2024-12-27T12:03:40+00:00",
        "closed_at": "2024-12-27T12:03:37+00:00",
        "comments_count": [
            "liu-jiaxuan",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3305,
        "title": "含文字图像方向识别，报错：basic_string::at: __n (which is 0) >= this->size() (which is 0)",
        "body": "首先，感谢模型、框架、代码的分享！\r\n\r\n最近在使用PaddleClas   做含文字图像方向识别时，报错：basic_string::at: __n (which is 0) >= this->size() (which is 0)\r\n \r\n操作系统，centos7\r\nPaddleClas   2.6.0\r\npaddlepaddle   2.6.2\r\npython 3.11\r\ncpu环境\r\n\r\n按照：https://github.com/PaddlePaddle/PaddleClas/blob/release/2.5/docs/zh_CN/models/PULC/PULC_text_image_orientation.md\r\n\r\n上介绍的运行命令：\r\npaddleclas --model_name=text_image_orientation --infer_imgs=pulc_demo_imgs/text_image_orientation/img_rot0_demo.jpg\r\n\r\n报如下错误：\r\n\r\n```\r\n[2024/11/18 17:12:04] ppcls WARNING: The current running environment does not support the use of GPU. CPU has been used instead.\r\n---1 <paddle.base.libpaddle.AnalysisConfig object at 0x7fbec19ea030>\r\nTraceback (most recent call last):\r\n  File \"/apply/miniconda3/envs/p311invoice/bin/paddleclas\", line 8, in <module>\r\n    sys.exit(main())\r\n             ^^^^^^\r\n  File \"/apply/miniconda3/envs/p311invoice/lib/python3.11/site-packages/paddleclas/paddleclas.py\", line 818, in main\r\n    clas_engine = PaddleClas(**cfg)\r\n                  ^^^^^^^^^^^^^^^^^\r\n  File \"/apply/miniconda3/envs/p311invoice/lib/python3.11/site-packages/paddleclas/paddleclas.py\", line 610, in __init__\r\n    self.predictor = ClsPredictor(self._config)\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/apply/miniconda3/envs/p311invoice/lib/python3.11/site-packages/paddleclas/deploy/python/predict_cls.py\", line 28, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"/apply/miniconda3/envs/p311invoice/lib/python3.11/site-packages/paddleclas/deploy/utils/predictor.py\", line 37, in __init__\r\n    self.predictor, self.config = self.create_paddle_predictor(\r\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/apply/miniconda3/envs/p311invoice/lib/python3.11/site-packages/paddleclas/deploy/utils/predictor.py\", line 109, in create_paddle_predictor\r\n    predictor = create_predictor(config)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^\r\nIndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)\r\n```\r\n\r\n请问改怎么解决呢？谢谢！\r\n",
        "state": "closed",
        "user": "sxk000",
        "closed_by": "TingquanGao",
        "created_at": "2024-11-18T09:30:58+00:00",
        "updated_at": "2025-03-18T09:33:51+00:00",
        "closed_at": "2025-01-12T12:03:17+00:00",
        "comments_count": [
            "liuhongen1234567",
            "TingquanGao",
            "TingquanGao",
            "qybing"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3311,
        "title": "PULC 找不到模型文件",
        "body": "paddlepaddle=2.6.2   paddleclas=2.6.0\r\nWindows\r\npython=3.8.20\r\n\r\n按照教程复现时，会报找不到相应模型文件\r\n\r\nfrom paddleclas import PaddleClas\r\nmodel = PaddleClas(model_name=\"text_image_orientation\")\r\nresult = model.predict(input_data=r\"C:\\ocr\\imgs\\test.jpg\")\r\nprint(next(result))\r\n\r\nRuntimeError: (NotFound) Cannot open file C:\\Users\\1212/.paddleclas/inference_model\\PULC\\text_image_orientation, please confirm whether the file is normal.\r\n  [Hint: Expected static_cast<bool>(fin.is_open()) == true, but received static_cast<bool>(fin.is_open()):0 != true:1.] (at ..\\paddle\\fluid\\inference\\api\\analysis_predictor.cc:2577)\r\n",
        "state": "closed",
        "user": "szwlh-c",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-03T01:53:38+00:00",
        "updated_at": "2024-12-12T12:06:44+00:00",
        "closed_at": "2024-12-12T12:06:40+00:00",
        "comments_count": [
            "TingquanGao",
            "wqw547243068",
            "TingquanGao",
            "wqw547243068",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3314,
        "title": "RuntimeError: (NotFound) Cannot open file",
        "body": "运行python python/predict_rec.py -c configs/inference_rec.yaml报错如下：\r\nRuntimeError: (NotFound) Cannot open file ./models/general_PPLCNetV2_base_pretrained_v1.0_infer/, please confirm whether the file is normal.\r\n![微信图片_20241204153432](https://github.com/user-attachments/assets/651557a2-cdcb-4ed6-95c6-6ad434c3a32a)\r\n![微信图片_20241204153610](https://github.com/user-attachments/assets/4cd4825f-ba6e-4d9a-96bd-057e81636df8)\r\n路径都是英文的，目录下面模型都是存在的，这个咋解决？",
        "state": "closed",
        "user": "zzcqinag",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-04T07:37:09+00:00",
        "updated_at": "2025-01-10T12:03:37+00:00",
        "closed_at": "2025-01-10T12:03:33+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3315,
        "title": "PULC 模糊检测数据集clarity_assessment不能下载",
        "body": "当前数据集不能下载：\r\nhttps://paddleclas.bj.bcebos.com/data/PULC/clarity_assessment.tar\r\n\r\n![image](https://github.com/user-attachments/assets/9c385223-2392-406b-a6c5-48d513be84c8)\r\n",
        "state": "closed",
        "user": "divenswu",
        "closed_by": "zhangyubo0722",
        "created_at": "2024-12-05T09:38:36+00:00",
        "updated_at": "2025-04-02T12:37:54+00:00",
        "closed_at": "2025-04-02T12:37:50+00:00",
        "comments_count": [
            "zhangyubo0722",
            "divenswu",
            "divenswu"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3306,
        "title": "训练时如何加载下载好的预训练模型",
        "body": "你好，我在训练时终端打印的内容会一直卡在这个网址：\r\nhttps://paddle-imagenet-models-name.bj.bcebos.com/dygraph/legendary_models/PPLCNet_x1_0_ssld_pretrained.pdparams\r\n\r\n我想是因为我当前网络原因，请问如何加载下载好的PPLCNet_x1_0_ssld_pretrained.pdparams，而不让它自动去上面那个网址下载呢？",
        "state": "closed",
        "user": "daiwei377",
        "closed_by": "daiwei377",
        "created_at": "2024-11-21T08:51:38+00:00",
        "updated_at": "2024-11-28T03:28:54+00:00",
        "closed_at": "2024-11-28T03:28:51+00:00",
        "comments_count": [
            "Bobholamovic",
            "daiwei377",
            "Bobholamovic"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3316,
        "title": "paddleclas使用table_attribute_infer模型推理，一直提示NameError: name 'beta2' is not defined",
        "body": "Traceback (most recent call last):\r\n  File \"E:\\ANACONDA\\envs\\paddle_env\\table_atti\\table_atti_p.py\", line 9, in <module>\r\n    model = paddleclas.PaddleClas(build_gallery=False,model_name='table_attribute',inference_model_dir='table_attribute_infer')\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\ANACONDA\\envs\\paddle_env\\.venv\\Lib\\site-packages\\paddleclas\\paddleclas.py\", line 610, in __init__\r\n    self.predictor = ClsPredictor(self._config)\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\ANACONDA\\envs\\paddle_env\\.venv\\Lib\\site-packages\\paddleclas\\deploy\\python\\predict_cls.py\", line 28, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"E:\\ANACONDA\\envs\\paddle_env\\.venv\\Lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 37, in __init__\r\n    self.predictor, self.config = self.create_paddle_predictor(\r\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\ANACONDA\\envs\\paddle_env\\.venv\\Lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 60, in create_paddle_predictor\r\n    pd_version = 10 * pd_version + eval(v)\r\n                                   ^^^^^^^\r\n  File \"<string>\", line 1, in <module>\r\nNameError: name 'beta2' is not defined\r\n\r\n",
        "state": "closed",
        "user": "lyl0809",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-06T03:47:06+00:00",
        "updated_at": "2025-05-12T22:49:23+00:00",
        "closed_at": "2025-01-09T12:03:40+00:00",
        "comments_count": [
            "liu-jiaxuan",
            "TingquanGao",
            "git9875"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3317,
        "title": "Cannot open file C:\\Users\\wqw/.paddleclas/inference_model\\PULC\\language_classification, please confirm whether the file is normal.",
        "body": "\r\n系统\r\n- windows 10, 64位\r\n- Python 3.11\r\n- CPU only\r\n\r\n工具包\r\n- paddleclas                               2.6.0\r\n- paddleocr                                2.9.1\r\n- paddlepaddle                             2.6.2\r\n\r\n功能：\r\n- 输入图片，识别语种\r\n\r\n代码：\r\n\r\n```py\r\nimport paddleclas\r\n\r\nfile_name = r\"E:\\ocr\\data\\hand\\3.jpg\"\r\n\r\nlang_model = paddleclas.PaddleClas(model_name=\"language_classification\")\r\nresult = lang_model.predict(input_data=file_name)\r\nresult = list(result)\r\nlang_type = result[0][0]['label_names'][0]\r\nprint('语言类型为：',lang_type)\r\n```\r\n\r\n错误信息\r\n\r\n```\r\nRuntimeError: (NotFound) Cannot open file C:\\Users\\wqw/.paddleclas/inference_model\\PULC\\language_classification, please confirm whether the file is normal.\r\n [Hint: Expected static_cast<bool>(fin.is_open()) == true, but received static_cast<bool>(fin.is_open()):0 != true:1.] (at ..\\paddle\\fluid\\inference\\api\\analysis_predictor.cc:2577)\r\n```\r\n\r\n路径: 文件存在，只是路径名中的斜线异常\r\n- `C:\\Users\\wqw/.paddleclas/inference_model\\PULC\\language_classification`\r\n- \r\n![image](https://github.com/user-attachments/assets/d8f95465-7ac6-42ba-8d8f-5b6b0d335f75)\r\n\r\n看到别的issue里 #3311 ，提到是windows下的路径名问题\r\n\r\n于是，我修改源码，C:\\Users\\wqw\\AppData\\Roaming\\Python\\Python311\\site-packages\\paddleclas\\paddleclas.py, 49行\r\n\r\n```py\r\n# BASE_DIR = os.path.expanduser(\"~/.paddleclas/\") # 原代码\r\nBASE_DIR = os.path.join(os.path.expanduser('~'), '.paddleclas') # 新代码\r\n```\r\n\r\n验证发现，路径矫正后，错误依然存在....\r\n\r\n\r\n\r\n\r\n",
        "state": "closed",
        "user": "wqw547243068",
        "closed_by": "liuhongen1234567",
        "created_at": "2024-12-08T15:53:17+00:00",
        "updated_at": "2024-12-12T05:16:18+00:00",
        "closed_at": "2024-12-12T05:16:15+00:00",
        "comments_count": [
            "GreatV",
            "wqw547243068"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3320,
        "title": "怎么使用PaddleClas",
        "body": "我想通过PaddleClas进行分类，该怎么运行呢？",
        "state": "closed",
        "user": "zkq-afk",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-10T06:52:28+00:00",
        "updated_at": "2025-01-23T12:03:23+00:00",
        "closed_at": "2025-01-23T12:03:20+00:00",
        "comments_count": [
            "Sunting78",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3321,
        "title": "请问有MobileNetV4预训练模型吗",
        "body": "请问有MobileNetV4预训练模型吗",
        "state": "closed",
        "user": "Dandelion111",
        "closed_by": "Dandelion111",
        "created_at": "2024-12-11T08:14:37+00:00",
        "updated_at": "2024-12-18T07:23:22+00:00",
        "closed_at": "2024-12-18T07:23:19+00:00",
        "comments_count": [
            "Bobholamovic"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3322,
        "title": "训练分类模型，有2个类，使用训练模型推理，结果正常；转成ONNX模型推理时，分值始终为[0.5, 0.5]",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，Linux\r\n  b. Python版本号，如Python3.8\r\n  c. CUDA/cuDNN版本， CUDA12.0/8.8\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n\r\n\r\n相同的图片，2个类别\r\n\r\n使用python/predict_cls.py 推理结果：【use_onnx=True】\r\nclass id(s): [1, 0], score(s): [0.50, 0.50], label_name(s): []\r\n\r\n使用tools/infer.py 推理结果：【使用训练模型】\r\n[{'class_ids': [1, 0], 'scores': [0.99987, 0.00013], 'label_names': []}]\r\n\r\n训练模型转推理模型，推理模型转onnx模型，都是按照官网文档中提供的命令转换的。请帮忙分析下可能存在的问题？不胜感激！\r\n\r\n",
        "state": "closed",
        "user": "LiManshiang",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-11T10:18:37+00:00",
        "updated_at": "2025-01-12T12:03:13+00:00",
        "closed_at": "2025-01-12T12:03:09+00:00",
        "comments_count": [
            "Bobholamovic",
            "LiManshiang",
            "Bobholamovic",
            "LiManshiang",
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3323,
        "title": "语种检测准确率很差",
        "body": "> 语种识别准确率很低，是用错了吗？\r\n\r\n[issues/3317](https://github.com/PaddlePaddle/PaddleClas/issues/3317) 里提到用\r\n\r\n系统\r\n- windows 10, 64位\r\n- Python 3.11\r\n- CPU only\r\n\r\n工具包\r\n- paddleclas 2.6.0\r\n- paddleocr 2.9.1\r\n- paddlepaddle 2.6.2\r\n\r\n功能：\r\n- 输入图片，识别语种\r\n\r\n代码：\r\n\r\n```py\r\nimport paddleclas\r\n\r\nfile_name = r\"E:\\ocr\\data\\hand\\3.jpg\"\r\n\r\nlang_model = paddleclas.PaddleClas(model_name=\"language_classification\")\r\nresult = lang_model.predict(input_data=file_name)\r\nresult = list(result)\r\nlang_type = result[0][0]['label_names'][0]\r\nprint('语言类型为：',lang_type)\r\n```\r\n\r\n随机检测5-6张图片，**语种识别准确率很差**，只有1个识别正确\r\n\r\n中文截图被识别为 cyrillic 和 日文\r\n- \r\n![a](https://github.com/user-attachments/assets/00708f05-67b5-4a42-a703-159a0d901c7a)\r\n\r\n```py\r\n[[{'class_ids': [2, 4], 'scores': [0.20747, 0.1695], 'label_names': ['cyrillic', 'japan'], 'filename': 'E:\\\\ocr\\\\data\\\\a.png'}]]\r\n```\r\n\r\n英文影印版截图识别成了 中文繁体、韩文\r\n- ![scan](https://github.com/user-attachments/assets/4d1131c2-08fa-4dcc-8c70-003ad6607b72)\r\n\r\n```py\r\nresult=[[{'class_ids': [1, 6], 'scores': [0.91424, 0.01366], 'label_names': ['chinese_cht', 'korean'], 'filename': 'E:\\\\ocr\\\\data\\\\OCR_e2e_img\\\\scan.png'}]]\r\n```\r\n\r\n中文手写体识别成了 拉丁文、阿拉伯文\r\n- \r\n![01](https://github.com/user-attachments/assets/13f1390a-c6e3-4082-a853-f08a8396d67a)\r\n\r\n\r\n```py\r\nresult=[[{'class_ids': [9, 0], 'scores': [0.3635, 0.1387], 'label_names': ['latin', 'arabic'], 'filename': 'E:\\\\ocr\\\\data\\\\hand\\\\1.jpg'}]]\r\n```\r\n\r\n多语种图片（中英日法德）被识别成韩文、拉拉丁文\r\n- \r\n![all](https://github.com/user-attachments/assets/2acab72c-8560-4fbe-a80b-70966b782789)\r\n\r\n```py\r\n[{'class_ids': [6, 9], 'scores': [0.55042, 0.14912], 'label_names': ['korean', 'latin'], 'filename': 'E:\\\\ocr\\\\data\\\\all.jpg'}]\r\n```\r\n\r\n",
        "state": "closed",
        "user": "wqw547243068",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-11T14:36:36+00:00",
        "updated_at": "2025-06-25T07:04:28+00:00",
        "closed_at": "2025-06-25T03:08:30+00:00",
        "comments_count": [
            "SWHL",
            "wqw547243068",
            "SWHL",
            "wqw547243068",
            "SWHL",
            "terrencew",
            "xushengfeng",
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3328,
        "title": "对单张图片推理含文字图像方向分类任务时报错：NameError: name 'beta1' is not defined",
        "body": "![屏幕截图 2024-12-17 171651](https://github.com/user-attachments/assets/319807d5-73f4-4a61-a33e-bf537f9e5200)\r\n版本信息：\r\n![image](https://github.com/user-attachments/assets/5af967ea-0e53-4528-8939-366e56355648)\r\ntorch版本 2.0.1cu118\r\npython版本：3.10.13\r\n系统：ubuntu20.04.6 LTS\r\n补充：pip安装的paddleclas\r\n",
        "state": "closed",
        "user": "LHSION",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-17T09:21:44+00:00",
        "updated_at": "2025-02-20T08:46:45+00:00",
        "closed_at": "2025-01-24T12:03:21+00:00",
        "comments_count": [
            "TingquanGao",
            "shuaimoumou",
            "TingquanGao",
            "TingquanGao",
            "dltraveler"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3329,
        "title": "RuntimeError: (NotFound) Cannot open file /home/tcenteryn/.paddleclas/inference_model/PULC/text_image_orientation/inference.json, please confirm whether the file is normal.",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux\r\n  b. Python版本号，Python3.10.16\r\n  c. CUDA/cuDNN版本， 如CUDA 11.8\r\n 4. 完整的代码\r\n import paddleclas\r\nmodel = paddleclas.PaddleClas(model_name=\"text_image_orientation\")\r\nresult = model.predict(input_data=\"/home/tcenteryn/Direction_program/dataest/chailvfei/20241127100942.jpg\")\r\nprint(next(result))\r\n5. 问题：\r\n/opt/anaconda3/envs/paddleclas/lib/python3.10/site-packages/paddle/utils/cpp_extension/extension_utils.py:686: UserWarning: No ccache found. Please be aware that recompiling all source files may be required. You can download and install ccache from: https://github.com/ccache/ccache/blob/master/doc/INSTALL.md\r\n  warnings.warn(warning_message)\r\nTraceback (most recent call last):\r\n  File \"/home/tcenteryn/Direction_program/PaddleClas/test.py\", line 14, in <module>\r\n    model = paddleclas.PaddleClas(model_name=\"text_image_orientation\")\r\n  File \"/home/tcenteryn/Direction_program/PaddleClas/paddleclas.py\", line 609, in __init__\r\n    self.predictor = ClsPredictor(self._config)\r\n  File \"/home/tcenteryn/Direction_program/PaddleClas/deploy/python/predict_cls.py\", line 28, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"/home/tcenteryn/Direction_program/PaddleClas/deploy/utils/predictor.py\", line 37, in __init__\r\n    self.predictor, self.config = self.create_paddle_predictor(\r\n  File \"/home/tcenteryn/Direction_program/PaddleClas/deploy/utils/predictor.py\", line 65, in create_paddle_predictor\r\n    config = Config(inference_model_dir, model_prefix)\r\nRuntimeError: (NotFound) Cannot open file /home/tcenteryn/.paddleclas/inference_model/PULC/text_image_orientation/inference.json, please confirm whether the file is normal.\r\n  [Hint: Expected paddle::inference::IsFileExists(prog_file_) == true, but received paddle::inference::IsFileExists(prog_file_):0 != true:1.] (at ../paddle/fluid/inference/api/analysis_config.cc:106)\r\n",
        "state": "closed",
        "user": "yangqiheng2019",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-18T01:45:29+00:00",
        "updated_at": "2025-05-28T08:31:03+00:00",
        "closed_at": "2025-01-30T03:03:01+00:00",
        "comments_count": [
            "cou920",
            "Arylu",
            "liuhongen1234567",
            "TingquanGao",
            "Shantanu-Parmar",
            "Mishatopkek",
            "liuhongen1234567",
            "Mishatopkek"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3330,
        "title": "代码有好几处未知变量",
        "body": "PaddleClas/ppcls/arch/backbone/model_zoo/swin_transformer_v2.py这个文件中，我调试时报错，NameError: name 'output_dimensions' is not defined，然后发现有好几个变量是未定义的，我的版本是master分支2.6.0",
        "state": "closed",
        "user": "ZhouBay-TF",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-18T06:25:41+00:00",
        "updated_at": "2025-02-05T03:16:29+00:00",
        "closed_at": "2025-01-27T03:03:08+00:00",
        "comments_count": [
            "liuhongen1234567",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3333,
        "title": "文字图片方向分类训练时如何使用预训练模型text_image_orientation_pretrained？",
        "body": "请问，文字图片方向分类训练时如何使用预训练模型text_image_orientation_pretrained？\r\n\r\n直接将PPLCNet_x1_0.yaml的Global中pretrained_model设置为text_image_orientation_pretrained.pdparams的路径（text_image_orientation_pretrained不加后缀pdparams）即可吗？\r\n如：\r\nGlobal:\r\n  checkpoints: null\r\n  # pretrained_model: null\r\n  pretrained_model: pretrained_model/text_image_orientation/text_image_orientation_pretrained\r\n  output_dir: ./output/\r\n  device: gpu\r\n  save_interval: 1\r\n  eval_during_train: True\r\n  eval_interval: 1\r\n  # epochs: 60\r\n  epochs: 1\r\n  print_batch_step: 10\r\n  use_visualdl: False\r\n  # used for static mode and model export\r\n  image_shape: [3, 224, 224]\r\n  save_inference_dir: ./inference",
        "state": "closed",
        "user": "tianwenzhe",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-24T03:24:41+00:00",
        "updated_at": "2025-02-05T02:54:26+00:00",
        "closed_at": "2025-01-25T12:03:09+00:00",
        "comments_count": [
            "tianwenzhe",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3331,
        "title": "加载你们发布的预训练的模型来训练我的数据",
        "body": "按照文档成功训练我的模型“ python -m paddle.distributed.launch --gpus=\"0,1\" tools/train.py -c ./ppcls/configs/ImageNet/SwinTransformer/SwinTransformer_base_patch4_window7_224.yaml”，我认为它是从头开始训练的，我的数据有限，所以想实现加载预训练模型进行训练。\r\n**我参考了“PaddleClas/blob/release/2.0/docs/zh_CN/tutorials/quick_start.md”这个里的加载和不加载的两条指令，我在MobileNetV3_large_x1_0_CIFAR100_finetune.yaml并没有发现加载或者下载预训练的key值，你可以详细解答吗？或者我在“SwinTransformer_base_patch4_window7_224.yaml”这个yaml中如何加载你们预训练的模型，谢谢。",
        "state": "closed",
        "user": "ZhouBay-TF",
        "closed_by": "ZhouBay-TF",
        "created_at": "2024-12-19T08:53:17+00:00",
        "updated_at": "2024-12-20T02:35:44+00:00",
        "closed_at": "2024-12-20T02:35:40+00:00",
        "comments_count": [
            "changdazhou",
            "ZhouBay-TF"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3334,
        "title": "带文字图像方向分类图片分辨率改变问题",
        "body": "使用text_image_orientation_pretrained.pdparams预训练权重训练带文字图片方向分类\r\n\r\nhttps://github.com/PaddlePaddle/PaddleClas/blob/develop/docs/zh_CN/training/single_label_classification/finetune.md#faq\r\n介绍了分辨率从224提高到320的方法。\r\n问1：为什么有些参数从224修改为320，resize_short从256修改为366？\r\n问2：如果想提高更大分辨率，resize_short如何计算呢？\r\n问3：提高更大分辨率后，text_image_orientation_pretrained.pdparams预训练权重还可以使用吗？",
        "state": "closed",
        "user": "tianwenzhe",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-24T06:43:22+00:00",
        "updated_at": "2025-02-05T02:54:23+00:00",
        "closed_at": "2025-01-25T12:03:05+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3335,
        "title": "paddleclas==2.5.1，使用PULC的各种分类demo命令，正确下载预训练参数，输出结果均为0，同时运行正常没有报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及\r\n![屏幕截图 2024-12-28 000044](https://github.com/user-attachments/assets/e37288fb-ba35-4266-a9bd-1fddc7cc782a)\r\n![Uploading 屏幕截图 2024-12-28 000306.png…]()\r\n\r\n\r\n",
        "state": "closed",
        "user": "mhmhh404",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-27T16:03:56+00:00",
        "updated_at": "2025-04-04T03:04:24+00:00",
        "closed_at": "2025-04-04T03:04:21+00:00",
        "comments_count": [
            "mhmhh404",
            "mhmhh404",
            "liuhongen1234567",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3336,
        "title": "文字方向识别模型错误",
        "body": "下载推理模型后，进行推理验证，得到的非是角度模型，labelname参数是一些海洋生物名\r\n![image](https://github.com/user-attachments/assets/ced1b915-ed3d-4a7b-bfd6-3730545397c6)\r\n下载文件的位置为\r\n![image](https://github.com/user-attachments/assets/ab181070-95ff-4619-bfb9-9d8f678b4c8a)\r\n\r\n初步怀疑这个推理模型文件不正确\r\n通过命令行方式验证也是出现这个错误\r\n\r\nimport paddleclas\r\nmodel = paddleclas.PaddleClas(inference_model_dir=\"inference_model/text_image_orientation_infer\")\r\nresult = model.predict(input_data=\"img.png\")\r\nprint(next(result))\r\n\r\n[2024/12/31 14:32:45] ppcls WARNING: The current running environment does not support the use of GPU. CPU has been used instead.\r\n[{'class_ids': [0, 2, 3, 1], 'scores': [0.85343, 0.05148, 0.04781, 0.04728], 'label_names': ['tench, Tinca tinca', 'great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias', 'tiger shark, Galeocerdo cuvieri', 'goldfish, Carassius auratus'], 'filename': 'img.png'}]\r\n",
        "state": "closed",
        "user": "greedyMaeter",
        "closed_by": "TingquanGao",
        "created_at": "2024-12-31T06:34:32+00:00",
        "updated_at": "2025-02-05T04:48:28+00:00",
        "closed_at": "2025-02-01T03:02:44+00:00",
        "comments_count": [
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3337,
        "title": "1. paddleClas版本 2.6.0",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\r\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\r\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\r\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\r\n 3. 训练环境信息：\r\n  a. 具体操作系统，如Linux/Windows/MacOS\r\n  b. Python版本号，如Python3.6/7/8\r\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\r\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\r\n",
        "state": "closed",
        "user": "ocivo",
        "closed_by": "TingquanGao",
        "created_at": "2025-01-03T10:28:36+00:00",
        "updated_at": "2025-02-05T04:57:11+00:00",
        "closed_at": "2025-02-04T03:02:44+00:00",
        "comments_count": [
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3338,
        "title": "官方样例demo报错: MemoryError: std::bad_alloc",
        "body": "直接按官方样例demo写的\r\n 1. paddleClas版本 2.6.0 paddlepaddle版本2.6.2\r\n 2. python 3.8\r\n 3. paddle-cpu版本和gpu版本报相同的错误\r\npython run.py\r\n2025-01-03 18:29:51 INFO: Loading faiss with AVX512 support.\r\n2025-01-03 18:29:51 INFO: Successfully loaded faiss with AVX512 support.\r\n[2025/01/03 18:29:51] ppcls WARNING: The current running environment does not support the use of GPU. CPU has been used instead.\r\nTraceback (most recent call last):\r\n  File \"run.py\", line 2, in <module>\r\n    model = paddleclas.PaddleClas(model_name=\"person_attribute\")\r\n  File \"venv/lib/python3.8/site-packages/paddleclas/paddleclas.py\", line 610, in __init__\r\n    self.predictor = ClsPredictor(self._config)\r\n  File \"venv/lib/python3.8/site-packages/paddleclas/deploy/python/predict_cls.py\", line 28, in __init__\r\n    super().__init__(config[\"Global\"])\r\n  File \"venv/lib/python3.8/site-packages/paddleclas/deploy/utils/predictor.py\", line 37, in __init__\r\n    self.predictor, self.config = self.create_paddle_predictor(\r\n  File \"venv/lib/python3.8/site-packages/paddleclas/deploy/utils/predictor.py\", line 108, in create_paddle_predictor\r\n    predictor = create_predictor(config)\r\nMemoryError: std::bad_alloc\r\n",
        "state": "open",
        "user": "ocivo",
        "closed_by": null,
        "created_at": "2025-01-03T10:30:46+00:00",
        "updated_at": "2025-04-02T13:15:50+00:00",
        "closed_at": null,
        "comments_count": [
            "TingquanGao",
            "cainmagi",
            "TingquanGao",
            "drawyaW",
            "wang-kangkang",
            "bonyz",
            "GarageOfRick"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3341,
        "title": "pip install fails due to old numpy version",
        "body": "With python 3.12+, the installation via `pip install paddleclas` fails due to numpy:\r\n\r\n```\r\nCollecting numpy==1.24.4 (from paddleclas)\r\n  Using cached numpy-1.24.4.tar.gz (10.9 MB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  × Getting requirements to build wheel did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [32 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"/home/xxx/miniconda3/envs/3.13/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py\", line 353, in <module>\r\n          main()\r\n          ~~~~^^\r\n        File \"/home/xxx/miniconda3/envs/3.13/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py\", line 335, in main\r\n          json_out['return_val'] = hook(**hook_input['kwargs'])\r\n                                   ~~~~^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File \"/home/xxx/miniconda3/envs/3.13/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py\", line 112, in get_requires_for_build_wheel\r\n          backend = _build_backend()\r\n        File \"/home/xxx/miniconda3/envs/3.13/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py\", line 77, in _build_backend\r\n          obj = import_module(mod_path)\r\n        File \"/home/xxx/miniconda3/envs/3.13/lib/python3.13/importlib/__init__.py\", line 88, in import_module\r\n          return _bootstrap._gcd_import(name[level:], package, level)\r\n                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\r\n        File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\r\n        File \"<frozen importlib._bootstrap>\", line 1310, in _find_and_load_unlocked\r\n        File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\r\n        File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\r\n        File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\r\n        File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\r\n        File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\r\n        File \"<frozen importlib._bootstrap_external>\", line 1026, in exec_module\r\n        File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\r\n        File \"/tmp/pip-build-env-oxkroq4l/overlay/lib/python3.13/site-packages/setuptools/__init__.py\", line 16, in <module>\r\n          import setuptools.version\r\n        File \"/tmp/pip-build-env-oxkroq4l/overlay/lib/python3.13/site-packages/setuptools/version.py\", line 1, in <module>\r\n          import pkg_resources\r\n        File \"/tmp/pip-build-env-oxkroq4l/overlay/lib/python3.13/site-packages/pkg_resources/__init__.py\", line 2172, in <module>\r\n          register_finder(pkgutil.ImpImporter, find_on_path)\r\n                          ^^^^^^^^^^^^^^^^^^^\r\n      AttributeError: module 'pkgutil' has no attribute 'ImpImporter'. Did you mean: 'zipimporter'?\r\n      [end of output]\r\n  \r\n```",
        "state": "closed",
        "user": "Luux",
        "closed_by": "TingquanGao",
        "created_at": "2025-01-10T13:58:25+00:00",
        "updated_at": "2025-07-07T03:08:11+00:00",
        "closed_at": "2025-07-07T03:08:08+00:00",
        "comments_count": [
            "Luux",
            "Bobholamovic",
            "encorehu",
            "encorehu",
            "encorehu",
            "git9875",
            "Bobholamovic",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3344,
        "title": "有个以图搜图的服务，需要部署在华为NPU上，请问FastDeploy 是否支持 输出向量？或者有别的方案可以在 NPU 机器上推理图片向量",
        "body": "现在有个 以图搜图的 需求，需要部署在 华为 NPU 服务器上，看了相关文档，发现 FastDeploy 是可以部署在 NPU 上的。但看了相关的API ，发现其没有输出向量的API，不知道有什么解决方案吗？",
        "state": "closed",
        "user": "foxcow",
        "closed_by": "TingquanGao",
        "created_at": "2025-01-16T07:49:06+00:00",
        "updated_at": "2025-03-09T03:03:21+00:00",
        "closed_at": "2025-03-09T03:03:18+00:00",
        "comments_count": [
            "cuicheng01",
            "foxcow",
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3345,
        "title": "图像方向分类+版面分析+表格识别示例代码报错IndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)",
        "body": "环境如下：\n操作系统：linux\npython版本号：python 3.10\nCUDA/cuDNN版本：CUDA12.0-cudnn8.9\n\n拉取dockerhub上镜像paddlepaddle/paddle:2.6.2-gpu-cuda12.0-cudnn8.9-trt8.6创建环境，运行python图像方向分类+版面分析+表格识别脚本报错IndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)，代码如下：\n\n```\nimport os\nimport cv2\nfrom paddleocr import PPStructure, draw_structure_result, save_structure_res\ntable_engine = PPStructure(show_log=True, image_orientation=True)\n\nsave_folder = \"./output\"\nimg_path = \"ppstructure/docs/table/1.png\"\nimg = cv2.imread(img_path)\nresult = table_engine(img)\nsave_structure_res(result, save_folder, os.path.basename(img_path).split(\".\")[0])\n\nfor line in result:\n    line.pop(\"img\")\n    print(line)\n\nfrom PIL import Image\n\nfont_path = \"doc/fonts/simfang.ttf\"  # PaddleOCR下提供字体包\nimage = Image.open(img_path).convert(\"RGB\")\nim_show = draw_structure_result(image, result, font_path=font_path)\nim_show = Image.fromarray(im_show)\nim_show.save(\"result.jpg\")\n```\n\n报错信息如下：\n\n```\nλ htk-aiserver /paddle/PaddleOCR python demo/demo_2.py \ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\n[2025/01/20 02:14:45] ppocr DEBUG: Namespace(help='==SUPPRESS==', use_gpu=True, use_xpu=False, use_npu=False, use_mlu=False, ir_optim=True, use_tensorrt=False, min_subgraph_size=15, precision='fp32', gpu_mem=500, gpu_id=0, image_dir=None, page_num=0, det_algorithm='DB', det_model_dir='/root/.paddleocr/whl/det/ch/ch_PP-OCRv4_det_infer', det_limit_side_len=960, det_limit_type='max', det_box_type='quad', det_db_thresh=0.3, det_db_box_thresh=0.6, det_db_unclip_ratio=1.5, max_batch_size=10, use_dilation=False, det_db_score_mode='fast', det_east_score_thresh=0.8, det_east_cover_thresh=0.1, det_east_nms_thresh=0.2, det_sast_score_thresh=0.5, det_sast_nms_thresh=0.2, det_pse_thresh=0, det_pse_box_thresh=0.85, det_pse_min_area=16, det_pse_scale=1, scales=[8, 16, 32], alpha=1.0, beta=1.0, fourier_degree=5, rec_algorithm='SVTR_LCNet', rec_model_dir='/root/.paddleocr/whl/rec/ch/ch_PP-OCRv4_rec_infer', rec_image_inverse=True, rec_image_shape='3, 48, 320', rec_batch_num=6, max_text_length=25, rec_char_dict_path='/usr/local/lib/python3.10/dist-packages/paddleocr/ppocr/utils/ppocr_keys_v1.txt', use_space_char=True, vis_font_path='./doc/fonts/simfang.ttf', drop_score=0.5, e2e_algorithm='PGNet', e2e_model_dir=None, e2e_limit_side_len=768, e2e_limit_type='max', e2e_pgnet_score_thresh=0.5, e2e_char_dict_path='./ppocr/utils/ic15_dict.txt', e2e_pgnet_valid_set='totaltext', e2e_pgnet_mode='fast', use_angle_cls=False, cls_model_dir=None, cls_image_shape='3, 48, 192', label_list=['0', '180'], cls_batch_num=6, cls_thresh=0.9, enable_mkldnn=False, cpu_threads=10, use_pdserving=False, warmup=False, sr_model_dir=None, sr_image_shape='3, 32, 128', sr_batch_num=1, draw_img_save_dir='./inference_results', save_crop_res=False, crop_res_save_dir='./output', use_mp=False, total_process_num=1, process_id=0, benchmark=False, save_log_path='./log_output/', show_log=True, use_onnx=False, return_word_box=False, output='./output', table_max_len=488, table_algorithm='TableAttn', table_model_dir='/root/.paddleocr/whl/table/ch_ppstructure_mobile_v2.0_SLANet_infer', merge_no_span_structure=True, table_char_dict_path='/usr/local/lib/python3.10/dist-packages/paddleocr/ppocr/utils/dict/table_structure_dict_ch.txt', formula_algorithm='LaTeXOCR', formula_model_dir='/root/.paddleocr/whl/formula/rec_latex_ocr_infer', formula_char_dict_path='/usr/local/lib/python3.10/dist-packages/paddleocr/ppocr/utils/dict/latex_ocr_tokenizer.json', formula_batch_num=1, layout_model_dir='/root/.paddleocr/whl/layout/picodet_lcnet_x1_0_fgd_layout_cdla_infer', layout_dict_path='/usr/local/lib/python3.10/dist-packages/paddleocr/ppocr/utils/dict/layout_dict/layout_cdla_dict.txt', layout_score_threshold=0.5, layout_nms_threshold=0.5, kie_algorithm='LayoutXLM', ser_model_dir=None, re_model_dir=None, use_visual_backbone=True, ser_dict_path='../train_data/XFUND/class_list_xfun.txt', ocr_order_method=None, mode='structure', image_orientation=True, layout=True, table=True, formula=False, ocr=True, recovery=False, recovery_to_markdown=False, use_pdf2docx_api=False, invert=False, binarize=False, alphacolor=(255, 255, 255), lang='ch', det=True, rec=True, type='ocr', savefile=False, ocr_version='PP-OCRv4', structure_version='PP-StructureV2')\nTraceback (most recent call last):\n  File \"/paddle/PaddleOCR/demo/demo_2.py\", line 5, in <module>\n    table_engine = PPStructure(show_log=True, image_orientation=True)\n  File \"/usr/local/lib/python3.10/dist-packages/paddleocr/paddleocr.py\", line 894, in __init__\n    super().__init__(params)\n  File \"/usr/local/lib/python3.10/dist-packages/paddleocr/ppstructure/predict_system.py\", line 53, in __init__\n    self.image_orientation_predictor = paddleclas.PaddleClas(\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/paddleclas.py\", line 610, in __init__\n    self.predictor = ClsPredictor(self._config)\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/deploy/python/predict_cls.py\", line 28, in __init__\n    super().__init__(config[\"Global\"])\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/deploy/utils/predictor.py\", line 37, in __init__\n    self.predictor, self.config = self.create_paddle_predictor(\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/deploy/utils/predictor.py\", line 108, in create_paddle_predictor\n    predictor = create_predictor(config)\nIndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)\n```\n使用\n```\nimport paddle\npaddle.utils.install_check.run_check()\n```\n检查环境，输出信息如下：\n```\nλ htk-aiserver /paddle/PaddleOCR CUDA_VISIBLE_DEVICE=0 python demo/demo_3.py \ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\nRunning verify PaddlePaddle program ... \nI0120 02:40:35.650422  1683 program_interpreter.cc:212] New Executor is Running.\nW0120 02:40:35.651573  1683 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.2, Runtime API Version: 11.8\nW0120 02:40:35.653553  1683 gpu_resources.cc:164] device: 0, cuDNN Version: 8.1.\nI0120 02:40:36.447850  1683 interpreter_util.cc:624] Standalone Executor is Used.\nPaddlePaddle works well on 1 GPU.\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\ngrep: warning: GREP_OPTIONS is deprecated; please use an alias or script\nRunning verify PaddlePaddle program ... \nI0120 02:40:37.510475  1761 program_interpreter.cc:212] New Executor is Running.\nW0120 02:40:37.511821  1761 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.2, Runtime API Version: 11.8\nW0120 02:40:37.513734  1761 gpu_resources.cc:164] device: 0, cuDNN Version: 8.1.\nRunning verify PaddlePaddle program ... \nI0120 02:40:37.543553  1758 program_interpreter.cc:212] New Executor is Running.\nW0120 02:40:37.546911  1758 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.2, Runtime API Version: 11.8\nW0120 02:40:37.549496  1758 gpu_resources.cc:164] device: 0, cuDNN Version: 8.1.\nRunning verify PaddlePaddle program ... \nI0120 02:40:37.586465  1760 program_interpreter.cc:212] New Executor is Running.\nW0120 02:40:37.604415  1760 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.2, Runtime API Version: 11.8\nW0120 02:40:37.606336  1760 gpu_resources.cc:164] device: 0, cuDNN Version: 8.1.\nRunning verify PaddlePaddle program ... \nI0120 02:40:37.622994  1759 program_interpreter.cc:212] New Executor is Running.\nW0120 02:40:37.634954  1759 gpu_resources.cc:119] Please NOTE: device: 0, GPU Compute Capability: 8.0, Driver API Version: 12.2, Runtime API Version: 11.8\nW0120 02:40:37.636762  1759 gpu_resources.cc:164] device: 0, cuDNN Version: 8.1.\nI0120 02:40:38.950637  1759 interpreter_util.cc:624] Standalone Executor is Used.\nPaddlePaddle works well on 1 GPU.\n[2025-01-20 02:40:38,962] [ WARNING] install_check.py:289 - PaddlePaddle meets some problem with 4 GPUs. This may be caused by:\n 1. There is not enough GPUs visible on your system\n 2. Some GPUs are occupied by other process now\n 3. NVIDIA-NCCL2 is not installed correctly on your system. Please follow instruction on https://github.com/NVIDIA/nccl-tests \n to test your NCCL, or reinstall it following https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html\n[2025-01-20 02:40:38,962] [ WARNING] install_check.py:297 - \n Original Error is: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nPaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 116, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 125, in _main\n    prepare(preparation_data)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 236, in prepare\n    _fixup_main_from_path(data['init_main_from_path'])\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 287, in _fixup_main_from_path\n    main_content = runpy.run_path(main_path,\n  File \"/usr/lib/python3.10/runpy.py\", line 289, in run_path\n    return _run_module_code(code, init_globals, run_name,\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\n    _run_code(code, mod_globals, init_globals,\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"/paddle/PaddleOCR/demo/demo_3.py\", line 3, in <module>\n    paddle.utils.install_check.run_check()\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 302, in run_check\n    raise e\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 283, in run_check\n    _run_parallel(device_list)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 210, in _run_parallel\n    paddle.distributed.spawn(train_for_run_parallel, nprocs=len(device_list))\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 604, in spawn\n    process.start()\n  File \"/usr/lib/python3.10/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/usr/lib/python3.10/multiprocessing/context.py\", line 288, in _Popen\n    return Popen(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\n    super().__init__(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 42, in _launch\n    prep_data = spawn.get_preparation_data(process_obj._name)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 154, in get_preparation_data\n    _check_not_importing_main()\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 134, in _check_not_importing_main\n    raise RuntimeError('''\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nI0120 02:40:38.983971  1760 interpreter_util.cc:624] Standalone Executor is Used.\nPaddlePaddle works well on 1 GPU.\n[2025-01-20 02:40:38,999] [ WARNING] install_check.py:289 - PaddlePaddle meets some problem with 4 GPUs. This may be caused by:\n 1. There is not enough GPUs visible on your system\n 2. Some GPUs are occupied by other process now\n 3. NVIDIA-NCCL2 is not installed correctly on your system. Please follow instruction on https://github.com/NVIDIA/nccl-tests \n to test your NCCL, or reinstall it following https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html\n[2025-01-20 02:40:38,999] [ WARNING] install_check.py:297 - \n Original Error is: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nPaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 116, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 125, in _main\n    prepare(preparation_data)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 236, in prepare\n    _fixup_main_from_path(data['init_main_from_path'])\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 287, in _fixup_main_from_path\n    main_content = runpy.run_path(main_path,\n  File \"/usr/lib/python3.10/runpy.py\", line 289, in run_path\n    return _run_module_code(code, init_globals, run_name,\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\n    _run_code(code, mod_globals, init_globals,\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"/paddle/PaddleOCR/demo/demo_3.py\", line 3, in <module>\n    paddle.utils.install_check.run_check()\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 302, in run_check\n    raise e\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 283, in run_check\n    _run_parallel(device_list)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 210, in _run_parallel\n    paddle.distributed.spawn(train_for_run_parallel, nprocs=len(device_list))\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 604, in spawn\n    process.start()\n  File \"/usr/lib/python3.10/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/usr/lib/python3.10/multiprocessing/context.py\", line 288, in _Popen\n    return Popen(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\n    super().__init__(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 42, in _launch\n    prep_data = spawn.get_preparation_data(process_obj._name)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 154, in get_preparation_data\n    _check_not_importing_main()\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 134, in _check_not_importing_main\n    raise RuntimeError('''\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nI0120 02:40:39.012089  1761 interpreter_util.cc:624] Standalone Executor is Used.\nPaddlePaddle works well on 1 GPU.\n[2025-01-20 02:40:39,022] [ WARNING] install_check.py:289 - PaddlePaddle meets some problem with 4 GPUs. This may be caused by:\n 1. There is not enough GPUs visible on your system\n 2. Some GPUs are occupied by other process now\n 3. NVIDIA-NCCL2 is not installed correctly on your system. Please follow instruction on https://github.com/NVIDIA/nccl-tests \n to test your NCCL, or reinstall it following https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html\n[2025-01-20 02:40:39,022] [ WARNING] install_check.py:297 - \n Original Error is: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nPaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 116, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 125, in _main\n    prepare(preparation_data)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 236, in prepare\n    _fixup_main_from_path(data['init_main_from_path'])\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 287, in _fixup_main_from_path\n    main_content = runpy.run_path(main_path,\n  File \"/usr/lib/python3.10/runpy.py\", line 289, in run_path\n    return _run_module_code(code, init_globals, run_name,\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\n    _run_code(code, mod_globals, init_globals,\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"/paddle/PaddleOCR/demo/demo_3.py\", line 3, in <module>\n    paddle.utils.install_check.run_check()\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 302, in run_check\n    raise e\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 283, in run_check\n    _run_parallel(device_list)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 210, in _run_parallel\n    paddle.distributed.spawn(train_for_run_parallel, nprocs=len(device_list))\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 604, in spawn\n    process.start()\n  File \"/usr/lib/python3.10/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/usr/lib/python3.10/multiprocessing/context.py\", line 288, in _Popen\n    return Popen(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\n    super().__init__(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 42, in _launch\n    prep_data = spawn.get_preparation_data(process_obj._name)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 154, in get_preparation_data\n    _check_not_importing_main()\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 134, in _check_not_importing_main\n    raise RuntimeError('''\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nI0120 02:40:39.170449  1758 interpreter_util.cc:624] Standalone Executor is Used.\nPaddlePaddle works well on 1 GPU.\n[2025-01-20 02:40:39,198] [ WARNING] install_check.py:289 - PaddlePaddle meets some problem with 4 GPUs. This may be caused by:\n 1. There is not enough GPUs visible on your system\n 2. Some GPUs are occupied by other process now\n 3. NVIDIA-NCCL2 is not installed correctly on your system. Please follow instruction on https://github.com/NVIDIA/nccl-tests \n to test your NCCL, or reinstall it following https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html\n[2025-01-20 02:40:39,198] [ WARNING] install_check.py:297 - \n Original Error is: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nPaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 116, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 125, in _main\n    prepare(preparation_data)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 236, in prepare\n    _fixup_main_from_path(data['init_main_from_path'])\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 287, in _fixup_main_from_path\n    main_content = runpy.run_path(main_path,\n  File \"/usr/lib/python3.10/runpy.py\", line 289, in run_path\n    return _run_module_code(code, init_globals, run_name,\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\n    _run_code(code, mod_globals, init_globals,\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"/paddle/PaddleOCR/demo/demo_3.py\", line 3, in <module>\n    paddle.utils.install_check.run_check()\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 302, in run_check\n    raise e\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 283, in run_check\n    _run_parallel(device_list)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 210, in _run_parallel\n    paddle.distributed.spawn(train_for_run_parallel, nprocs=len(device_list))\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 604, in spawn\n    process.start()\n  File \"/usr/lib/python3.10/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/usr/lib/python3.10/multiprocessing/context.py\", line 288, in _Popen\n    return Popen(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\n    super().__init__(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/usr/lib/python3.10/multiprocessing/popen_spawn_posix.py\", line 42, in _launch\n    prep_data = spawn.get_preparation_data(process_obj._name)\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 154, in get_preparation_data\n    _check_not_importing_main()\n  File \"/usr/lib/python3.10/multiprocessing/spawn.py\", line 134, in _check_not_importing_main\n    raise RuntimeError('''\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\n\n\n--------------------------------------\nC++ Traceback (most recent call last):\n--------------------------------------\nNo stack trace in paddle, may be caused by external reasons.\n\n----------------------\nError Message Summary:\n----------------------\nFatalError: `Termination signal` is detected by the operating system.\n  [TimeInfo: *** Aborted at 1737340839 (unix time) try \"date -d @1737340839\" if you are using GNU date ***]\n  [SignalInfo: *** SIGTERM (@0x693) received by PID 1758 (TID 0x7fae91cc9740) from PID 1683 ***]\n\n[2025-01-20 02:40:39,684] [ WARNING] install_check.py:289 - PaddlePaddle meets some problem with 4 GPUs. This may be caused by:\n 1. There is not enough GPUs visible on your system\n 2. Some GPUs are occupied by other process now\n 3. NVIDIA-NCCL2 is not installed correctly on your system. Please follow instruction on https://github.com/NVIDIA/nccl-tests \n to test your NCCL, or reinstall it following https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html\n[2025-01-20 02:40:39,684] [ WARNING] install_check.py:297 - \n Original Error is: Process 1 terminated with exit code 1.\nPaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\nTraceback (most recent call last):\n  File \"/paddle/PaddleOCR/demo/demo_3.py\", line 3, in <module>\n    paddle.utils.install_check.run_check()\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 302, in run_check\n    raise e\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 283, in run_check\n    _run_parallel(device_list)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/utils/install_check.py\", line 210, in _run_parallel\n    paddle.distributed.spawn(train_for_run_parallel, nprocs=len(device_list))\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 614, in spawn\n    while not context.join():\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 423, in join\n    self._throw_exception(error_index)\n  File \"/usr/local/lib/python3.10/dist-packages/paddle/distributed/spawn.py\", line 435, in _throw_exception\n    raise Exception(\nException: Process 1 terminated with exit code 1.\n```\n虽然有报错，但也打印了成功信息PaddlePaddle is installed successfully ONLY for single GPU! Let's start deep learning with PaddlePaddle now.\n请问我该如何解决报IndexError: basic_string::at: __n (which is 0) >= this->size() (which is 0)",
        "state": "closed",
        "user": "wangyang581",
        "closed_by": "TingquanGao",
        "created_at": "2025-01-20T02:44:14+00:00",
        "updated_at": "2025-06-16T11:03:57+00:00",
        "closed_at": "2025-06-14T12:09:52+00:00",
        "comments_count": [
            "cuicheng01",
            "wangyang581",
            "cuicheng01",
            "qybing",
            "Sunting78",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3342,
        "title": "是否支持arm32机器",
        "body": "生成的apk包放到32位机器上无法安装，是否有32位的libfaiss.a 文件 或者怎么弄能兼容32位机器",
        "state": "closed",
        "user": "zcgGitHuber",
        "closed_by": "TingquanGao",
        "created_at": "2025-01-15T07:07:11+00:00",
        "updated_at": "2025-03-14T03:03:36+00:00",
        "closed_at": "2025-03-14T03:03:33+00:00",
        "comments_count": [
            "a31413510",
            "liu-jiaxuan",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3347,
        "title": "有关PicoDet-LCNet的训练问题",
        "body": "老师好，目前正在自制数据集进行PicoDet-LCNet主体检测模型的训练．面向的场景图片是720P，而官方文档推荐的训练分辨率是320*320和640*640．请问如果单纯修改相关配置文件能否到达较好的效果，还是说需要进行模型架构的调整等操作？我现在的解决方案是对现有数据统一按尺寸调整到640*640并进行padding．非常感谢您的回复",
        "state": "closed",
        "user": "ziishuo",
        "closed_by": "TingquanGao",
        "created_at": "2025-02-14T04:01:55+00:00",
        "updated_at": "2025-03-23T03:03:46+00:00",
        "closed_at": "2025-03-23T03:03:43+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3355,
        "title": "算力卡激活了，但是算力值没有增加",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：\n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号，如Python3.6/7/8\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n",
        "state": "closed",
        "user": "fightingshao",
        "closed_by": "Sunting78",
        "created_at": "2025-03-05T07:12:43+00:00",
        "updated_at": "2025-03-11T09:35:51+00:00",
        "closed_at": "2025-03-11T09:35:47+00:00",
        "comments_count": [
            "fightingshao",
            "fightingshao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3348,
        "title": "使用图像方向分类推理报错 deploy/configs/PULC/image_orientation/inference_image_orientation.yaml  is not exist",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\n   PaddleClas release/2.6\n   PaddlePaddle 3.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：  Ubuntu 22.04\n  Python3.8\n\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n\n```\nTraceback (most recent call last):\n  File \"/home/sgjj/miniconda3/envs/paddle3.0/bin/paddleclas\", line 8, in <module>\n    sys.exit(main())\n             ^^^^^^\n  File \"/home/sgjj/miniconda3/envs/paddle3.0/lib/python3.11/site-packages/paddleclas/paddleclas.py\", line 818, in main\n    clas_engine = PaddleClas(**cfg)\n                  ^^^^^^^^^^^^^^^^^\n  File \"/home/sgjj/miniconda3/envs/paddle3.0/lib/python3.11/site-packages/paddleclas/paddleclas.py\", line 602, in __init__\n    self._config = init_config(self.model_type, model_name,\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/sgjj/miniconda3/envs/paddle3.0/lib/python3.11/site-packages/paddleclas/paddleclas.py\", line 242, in init_config\n    cfg = config.get_config(\n          ^^^^^^^^^^^^^^^^^^\n  File \"/home/sgjj/miniconda3/envs/paddle3.0/lib/python3.11/site-packages/paddleclas/deploy/utils/config.py\", line 163, in get_config\n    assert os.path.exists(fname), (\n           ^^^^^^^^^^^^^^^^^^^^^\nAssertionError: config file(/home/sgjj/miniconda3/envs/paddle3.0/lib/python3.11/site-packages/paddleclas/deploy/configs/PULC/image_orientation/inference_image_orientation.yaml) is not exist\n```\n\n\n\n[文档链接](https://github.com/PaddlePaddle/PaddleClas/blob/release/2.6/docs/zh_CN/models/PULC/PULC_image_orientation.md)\n\n请问这个配置文件在哪\n\n使用的指令`paddleclas --model_name=image_orientation --infer_imgs=cropped/a.png`",
        "state": "closed",
        "user": "DreamAgo",
        "closed_by": "DreamAgo",
        "created_at": "2025-02-17T17:31:30+00:00",
        "updated_at": "2025-02-25T16:21:09+00:00",
        "closed_at": "2025-02-25T16:21:04+00:00",
        "comments_count": [
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3359,
        "title": "关于RandAugment实现的几个问题",
        "body": "PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.6.0和PaddlePaddle 2.6.0\n涉及的其他产品使用的版本号：Pillow 11.1.0\n训练环境信息：\na. 操作系统: Linux64\nb. Python版本号: Python3.10.12\nc. CUDA/cuDNN版本: CUDA10.2/cuDNN 7.6.5等\n\nhttps://github.com/PaddlePaddle/PaddleClas/blob/release/2.6/ppcls/data/preprocess/ops/randaugment.py 中RandAugment的实现和https://github.com/heartInsert/Randaugment/blob/master/Rand_Augment.py 的原始实现有差异。\n1. 随机性\n原始实现: 构造RandAugment时使用np.linspace给每种transform定义了长度为10的ranges数组，执行操作前，随机选择Numbers(默认转换列表的一半)种操作，随机生成Numbers个ranges索引，然后zip成(op，rangs[idx])对列表，因此每种操作都会有随机的Magnitude，最后逐一执行操作，此时大部分操作会随机选择Maginitude的符号决定方向。\nPaddleClas实现: 构造RandAugment时level_map仅给每种transform定义了固定的level，执行操作时仅随机选择num_layers种操作，每种操作的Magnitude就是固定的level，值没有随机性，最后部分操作(除了rotate)的magnitude符号还是会随机选择\n\n**我的问题是，RandAugment移除Magnitue取值随机性的处理是实际测试训练效果以后的处理吗? AutoAugment保持了原始实现的方式**\n\n2. rotate\n两种实现都使用了rotate_with_fill(https://stackoverflow.com/questions/5252170/)实现旋转，这里有几个问题:\n- magnitude没有随机旋转方向，即只能逆时针旋转\n- 填充使用了固定值(128,)*4，处理灰度图片时不太合理，应根据构造RandAugment时传入的fillcolor\n- pillow版本5.2.0以后Image.rotate接口已经支持指定fillcolor，可以直接调用，不需要原来的复杂处理，fillcolor的问题也解决了\n\n修改后的randaugment.py，测试灰度和彩色图片都没问题，Magnitue取值随机性的问题没有修改\n```\nclass RandAugment(object):\n    def __init__(self, num_layers=2, magnitude=5, fillcolor=(128, 128, 128)):\n        self.num_layers = num_layers\n        self.magnitude = magnitude\n        self.max_level = 10\n\n        abso_level = self.magnitude / self.max_level\n        self.level_map = {\n            \"shearX\": 0.3 * abso_level,\n            \"shearY\": 0.3 * abso_level,\n            \"translateX\": 150.0 / 331 * abso_level,\n            \"translateY\": 150.0 / 331 * abso_level,\n            \"rotate\": 30 * abso_level,\n            \"color\": 0.9 * abso_level,\n            \"posterize\": int(4.0 * abso_level),\n            \"solarize\": 256.0 * abso_level,\n            \"contrast\": 0.9 * abso_level,\n            \"sharpness\": 0.9 * abso_level,\n            \"brightness\": 0.9 * abso_level,\n            \"autocontrast\": 0,\n            \"equalize\": 0,\n            \"invert\": 0\n        }\n\n        rnd_ch_op = random.choice\n\n        self.func = {\n            \"shearX\": lambda img, magnitude: img.transform(\n                img.size,\n                Image.AFFINE,\n                (1, magnitude * rnd_ch_op([-1, 1]), 0, 0, 1, 0),\n                Image.BICUBIC,\n                fillcolor=fillcolor),\n            \"shearY\": lambda img, magnitude: img.transform(\n                img.size,\n                Image.AFFINE,\n                (1, 0, 0, magnitude * rnd_ch_op([-1, 1]), 1, 0),\n                Image.BICUBIC,\n                fillcolor=fillcolor),\n            \"translateX\": lambda img, magnitude: img.transform(\n                img.size,\n                Image.AFFINE,\n                (1, 0, magnitude * img.size[0] * rnd_ch_op([-1, 1]), 0, 1, 0),\n                fillcolor=fillcolor),\n            \"translateY\": lambda img, magnitude: img.transform(\n                img.size,\n                Image.AFFINE,\n                (1, 0, 0, 0, 1, magnitude * img.size[1] * rnd_ch_op([-1, 1])),\n                fillcolor=fillcolor),\n            \"rotate\": lambda img, magnitude: img.rotate(                \n                magnitude * rnd_ch_op([-1, 1]),\n                Image.NEAREST,                \n                fillcolor=fillcolor),\n            \"color\": lambda img, magnitude: ImageEnhance.Color(img).enhance(\n                1 + magnitude * rnd_ch_op([-1, 1])),\n            \"posterize\": lambda img, magnitude:\n                ImageOps.posterize(img, magnitude),\n            \"solarize\": lambda img, magnitude:\n                ImageOps.solarize(img, magnitude),\n            \"contrast\": lambda img, magnitude:\n                ImageEnhance.Contrast(img).enhance(\n                    1 + magnitude * rnd_ch_op([-1, 1])),\n            \"sharpness\": lambda img, magnitude:\n                ImageEnhance.Sharpness(img).enhance(\n                    1 + magnitude * rnd_ch_op([-1, 1])),\n            \"brightness\": lambda img, magnitude:\n                ImageEnhance.Brightness(img).enhance(\n                    1 + magnitude * rnd_ch_op([-1, 1])),\n            \"autocontrast\": lambda img, _:\n                ImageOps.autocontrast(img),\n            \"equalize\": lambda img, _: ImageOps.equalize(img),\n            \"invert\": lambda img, _: ImageOps.invert(img)\n        }\n\n    def __call__(self, img):\n        avaiable_op_names = list(self.level_map.keys())\n        for layer_num in range(self.num_layers):\n            op_name = np.random.choice(avaiable_op_names)\n            img = self.func[op_name](img, self.level_map[op_name])\n        return img\n```",
        "state": "open",
        "user": "flintning",
        "closed_by": null,
        "created_at": "2025-03-11T04:41:48+00:00",
        "updated_at": "2025-03-11T12:03:24+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3358,
        "title": "关于RandAugment的一个问题",
        "body": " 1. PaddleClas版本以及PaddlePaddle版本：PaddleClas release/2.6.0和PaddlePaddle 2.6.0\n 2. 涉及的其他产品使用的版本号：无\n 3. 训练环境信息：\n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号: Python3.10.12\n  c. CUDA/cuDNN版本: CUDA10.2/cuDNN 7.6.5等\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n \nD:\\Develop\\gitee\\Paddle\\PaddleClas\\ppcls\\data\\preprocess\\ops\\randaugment.py中RandAugment的实现和https://github.com/heartInsert/randaugment的实现有差异。\nhttps://github.com/heartInsert/randaugment:\n                构造Ranaugment时使用np.linspace给每种transform定义了长度为10的ranges数组，执行操作前，随机选择Numbers(默认转换列表的一半)种操作，随机生成Numbers个Magnitude的ranges索引，然后zip成(op，magnitude)对列表，因此每种操作都会有随机的Magnitude，最后逐一执行操作，此时部分操作会随机选择Maginitude的符号决定方向。\n",
        "state": "closed",
        "user": "flintning",
        "closed_by": "flintning",
        "created_at": "2025-03-11T03:44:08+00:00",
        "updated_at": "2025-03-11T03:44:38+00:00",
        "closed_at": "2025-03-11T03:44:35+00:00",
        "comments_count": [],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3360,
        "title": "ModuleNotFoundError: No module named 'ppcls'",
        "body": "PaddlePaddle==2.6.0\nPaddleClas=2.6.0\n\n编译安装后子包ppcls找不到，\nsetup里面的package只有根的paddleclas，\n改成find_package会引起相对路径导入包的问题，\nppcls里面相对路径和绝对路径导入混用\n\n![Image](https://github.com/user-attachments/assets/24f6e842-ec4b-4ce3-ad50-3c865d536f79)",
        "state": "closed",
        "user": "sosohungry",
        "closed_by": "TingquanGao",
        "created_at": "2025-03-11T08:26:37+00:00",
        "updated_at": "2025-04-13T12:04:02+00:00",
        "closed_at": "2025-04-13T12:03:59+00:00",
        "comments_count": [
            "liu-jiaxuan",
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3357,
        "title": "CLIP_vit_base提取特征模型可以支持批量inference吗？",
        "body": "使用predict_rec.py获取特征时，设置inference_rec.yaml中的batch_size为10，就会报错，设置batch_size为1就没错，请问是什么原因呢？\n这是export model成功的输出\n\n![Image](https://github.com/user-attachments/assets/7a0c4cfa-60dc-41b4-ba65-76e53cb8fad2)\n\n错误如下图所示\n\n![Image](https://github.com/user-attachments/assets/b04f51de-5c9c-4a8d-b420-203f23f44161)\n这是怎么回事？",
        "state": "closed",
        "user": "TyrionChou",
        "closed_by": "TyrionChou",
        "created_at": "2025-03-06T12:07:02+00:00",
        "updated_at": "2025-03-07T06:56:02+00:00",
        "closed_at": "2025-03-07T06:55:59+00:00",
        "comments_count": [
            "Bobholamovic",
            "TyrionChou",
            "TyrionChou",
            "Bobholamovic"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3361,
        "title": "MobileNetV4模型未提供预训练模型",
        "body": "MobileNetV4的预训练模型权重在哪里获取呢？",
        "state": "closed",
        "user": "Zheng-Bicheng",
        "closed_by": "Zheng-Bicheng",
        "created_at": "2025-03-14T03:59:11+00:00",
        "updated_at": "2025-04-03T01:17:38+00:00",
        "closed_at": "2025-04-03T01:17:35+00:00",
        "comments_count": [
            "zhangyubo0722"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3362,
        "title": "调用含文字图像方向分类模型时提示错误",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：\n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号，如Python3.6/7/8\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n\n环境windows\npython3.10\ncuda11.7\n\n使用text_image_orientation模型\n\n使用命令：paddleclas --model_name=text_image_orientation --infer_imgs=图片路径\n报错信息：Try to shink the value by setting AnalysisConfig::EnableUseGpu(...)\nTraceback (most recent call last):\n  File \"E:\\envs\\ocr\\lib\\runpy.py\", line 196, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"E:\\envs\\ocr\\lib\\runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"E:\\envs\\ocr\\Scripts\\paddleclas.exe\\__main__.py\", line 7, in <module>\n  File \"E:\\envs\\ocr\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 818, in main\n    clas_engine = PaddleClas(**cfg)\n  File \"E:\\envs\\ocr\\lib\\site-packages\\paddleclas\\paddleclas.py\", line 610, in __init__\n    self.predictor = ClsPredictor(self._config)\n  File \"E:\\envs\\ocr\\lib\\site-packages\\paddleclas\\deploy\\python\\predict_cls.py\", line 28, in __init__\n    super().__init__(config[\"Global\"])\n  File \"E:\\envs\\ocr\\lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 37, in __init__\n    self.predictor, self.config = self.create_paddle_predictor(\n  File \"E:\\envs\\ocr\\lib\\site-packages\\paddleclas\\deploy\\utils\\predictor.py\", line 108, in create_paddle_predictor\n    predictor = create_predictor(config)\nRuntimeError: (NotFound) Cannot open file C:\\Users\\11238/.paddleclas/inference_model\\PULC\\text_image_orientation, please confirm whether the file is normal.\n  [Hint: Expected static_cast<bool>(fin.is_open()) == true, but received static_cast<bool>(fin.is_open()):0 != true:1.] (at ..\\paddle\\fluid\\inference\\api\\analysis_predictor.cc:2577)",
        "state": "closed",
        "user": "a19970519",
        "closed_by": "TingquanGao",
        "created_at": "2025-03-19T09:45:43+00:00",
        "updated_at": "2025-06-23T12:09:40+00:00",
        "closed_at": "2025-06-23T12:09:36+00:00",
        "comments_count": [
            "luofei1999",
            "nainai123",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3363,
        "title": "在用paddleclas2.5.2进行训练模型转化为预测模型后，在指定文件夹内只有inference.pdiparams文件没有模型结构文件",
        "body": "\n<img width=\"622\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/17a2a0d8-866b-4007-8743-832021c92471\" />",
        "state": "closed",
        "user": "Isletking",
        "closed_by": "TingquanGao",
        "created_at": "2025-03-20T08:11:06+00:00",
        "updated_at": "2025-05-14T09:11:41+00:00",
        "closed_at": "2025-05-14T09:09:42+00:00",
        "comments_count": [
            "Isletking",
            "Isletking",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3365,
        "title": "使用paddleclas训练PPHGNetV2时报错：OSError: (External) CUDNN error(9), CUDNN_STATUS_NOT_SUPPORTED.",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas release/2.6和PaddlePaddle 2.6.2\n 2. 在训练PPHGNet时没有出现过问题，只在训练PPHGNetV2产生如下报错\n 3. 训练环境信息：\n  a. 具体操作系统：Rocky8\n  b. Python版本号：3.11.11\n  c. CUDA/cuDNN版本：CUDA:12.0, cuDNN:8.\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n LAUNCH INFO 2025-04-03 11:11:51,923 ------------------------- ERROR LOG DETAIL -------------------------\noch_id, print_batch_step)\n  File \"/home/admin/PaddleClas/ppcls/engine/train/train.py\", line 52, in train_epoch\n    out = forward(engine, batch)\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/PaddleClas/ppcls/engine/train/train.py\", line 98, in forward\n    return engine.model(batch[0])\n           ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/PaddleClas/ppcls/arch/backbone/legendary_models/pp_hgnet_v2.py\", line 488, in forward\n    x = stage(x)\n        ^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/PaddleClas/ppcls/arch/backbone/legendary_models/pp_hgnet_v2.py\", line 389, in forward\n    x = self.blocks(x)\n        ^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/container.py\", line 614, in forward\n    input = layer(input)\n            ^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/PaddleClas/ppcls/arch/backbone/legendary_models/pp_hgnet_v2.py\", line 322, in forward\n    x = self.aggregation_squeeze_conv(x)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/PaddleClas/ppcls/arch/backbone/legendary_models/pp_hgnet_v2.py\", line 133, in forward\n    x = self.conv(x)\n        ^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/layers.py\", line 1429, in __call__\n    return self.forward(*inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/layer/conv.py\", line 715, in forward\n    out = F.conv._conv_nd(\n          ^^^^^^^^^^^^^^^^\n  File \"/home/admin/anaconda3/envs/paddle_env/lib/python3.11/site-packages/paddle/nn/functional/conv.py\", line 128, in _conv_nd\n    pre_bias = _C_ops.conv2d(\n               ^^^^^^^^^^^^^^\nOSError: (External) CUDNN error(9), CUDNN_STATUS_NOT_SUPPORTED.\n  [Hint: 'CUDNN_STATUS_NOT_SUPPORTED'.  The functionality requested is not presently supported by cuDNN.  ] (at /paddle/paddle/phi/backends/gpu/cuda/cudnn_desc.h:162)\n\n",
        "state": "closed",
        "user": "XianlinYao",
        "closed_by": "Bobholamovic",
        "created_at": "2025-04-03T03:13:38+00:00",
        "updated_at": "2025-04-09T05:47:57+00:00",
        "closed_at": "2025-04-08T08:22:19+00:00",
        "comments_count": [
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "Bobholamovic",
            "XianlinYao",
            "Bobholamovic",
            "XianlinYao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3366,
        "title": "利用框架进行大模型微调报错ImportError: Failed importing fused_ln",
        "body": null,
        "state": "closed",
        "user": "Chinesejunzai",
        "closed_by": "zhangyubo0722",
        "created_at": "2025-04-07T10:47:44+00:00",
        "updated_at": "2025-04-08T03:24:32+00:00",
        "closed_at": "2025-04-08T03:24:29+00:00",
        "comments_count": [
            "Chinesejunzai",
            "Chinesejunzai"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3367,
        "title": "利用框架进行大模型sft精调报错",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：\n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号，如Python3.6/7/8\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n",
        "state": "closed",
        "user": "Chinesejunzai",
        "closed_by": "liu-jiaxuan",
        "created_at": "2025-04-08T02:42:47+00:00",
        "updated_at": "2025-04-08T08:20:39+00:00",
        "closed_at": "2025-04-08T08:20:34+00:00",
        "comments_count": [
            "Chinesejunzai",
            "liu-jiaxuan"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3370,
        "title": "在paddleclas中如何只保存骨干网络的参数？",
        "body": "我想用imagenet来预训练自己的骨干网络，用于paddleseg模型训练时加载预训练骨干网络参数，但是paddleclas中的训练结果是保留了整个网络结构，我只想要骨干网络部分。",
        "state": "open",
        "user": "Wst-sd",
        "closed_by": null,
        "created_at": "2025-04-15T01:34:39+00:00",
        "updated_at": "2025-04-15T03:05:10+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3368,
        "title": "模型推理 RuntimeError: (NotFound) Cannot open file ../inference, please confirm whether the file is normal.",
        "body": " 1. paddlepaddle-gpu==2.6.1.post120\n 2. 训练环境信息：\n  a. 具体操作系统，Windows\n  b. Python版本号，Python3.9\n  c. CUDA/cuDNN版本， CUDA12.0\n 具体问题：\n\n在paddleclas/deploy/utils/predictor.py\n\nif pd_version == 0 or pd_version >= 260:\n    config = Config(inference_model_dir, model_prefix)\nelse:\n    model_file = os.path.join(inference_model_dir, f\"{model_prefix}.pdmodel\")\n    params_file = os.path.join(inference_model_dir, f\"{model_prefix}.pdiparams\")\n    config = Config(model_file, params_file)\n\n当pd_version 大于260时，config.summary()输出的配置文件如下：\n+--------------------------+--------------+\n| Option                   | Value        |\n+--------------------------+--------------+\n| model_file               | ../inference |\n| params_file              | inference    |\n+--------------------------+--------------+\n| cpu_math_thread          | 10           |\n| enable_mkldnn            | true         |\n| mkldnn_cache_capacity    | 10           |\n+--------------------------+--------------+\n| use_gpu                  | false        |\n+--------------------------+--------------+\n| use_xpu                  | false        |\n+--------------------------+--------------+\n| use_cinn_compiler        | false        |\n| save_optimized_model     | false        |\n| ir_optim                 | true         |\n| ir_debug                 | false        |\n| memory_optim             | true         |\n| enable_profile           | false        |\n| enable_log               | false        |\n| collect_shape_range_info | false        |\n+--------------------------+--------------+\n会导致打不开模型文件，目前我是通过以下方式解决\nmodel_file = os.path.join(inference_model_dir, f\"{model_prefix}.pdmodel\")\nparams_file = os.path.join(inference_model_dir, f\"{model_prefix}.pdiparams\")\nconfig = Config(model_file, params_file)\n",
        "state": "closed",
        "user": "luofei1999",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-11T14:54:06+00:00",
        "updated_at": "2025-05-19T03:07:09+00:00",
        "closed_at": "2025-05-19T03:07:05+00:00",
        "comments_count": [
            "BluebirdStory",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3369,
        "title": "请问paddleseg里面的模型骨干网络是怎么预训练的？",
        "body": "我在paddle中自己构建了一个模型，由于没有骨干网络的预训练参数，训练效果不是很理想，所以想预训练自己的骨干网络，预训练后，直接到paddleseg中加载该骨干网络参数。",
        "state": "open",
        "user": "Wst-sd",
        "closed_by": null,
        "created_at": "2025-04-15T01:19:39+00:00",
        "updated_at": "2025-05-26T13:36:23+00:00",
        "closed_at": null,
        "comments_count": [
            "juncyan"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3372,
        "title": "想替换ShiTu模块中的LCNetv2为HGNet话，需要做哪些调整呢？",
        "body": "这是LCNetv2_base到LCNetv2_base_ShiTu的变化：\nfrom paddle.nn import Conv2D, Identity\n\nfrom ..legendary_models.pp_lcnet_v2 import MODEL_URLS, PPLCNetV2_base, RepDepthwiseSeparable, _load_pretrained\n\n__all__ = [\"PPLCNetV2_base_ShiTu\"]\n\n\ndef PPLCNetV2_base_ShiTu(pretrained=False, use_ssld=False, **kwargs):\n    \"\"\"\n    An variant network of PPLCNetV2_base\n    1. remove ReLU layer after last_conv\n    2. add bias to last_conv\n    3. change stride to 1 in last two RepDepthwiseSeparable Block\n    \"\"\"\n    model = PPLCNetV2_base(pretrained=False, use_ssld=use_ssld, **kwargs)\n\n    def remove_ReLU_function(conv, pattern):\n        new_conv = Identity()\n        return new_conv\n\n    def add_bias_last_conv(conv, pattern):\n        new_conv = Conv2D(\n            in_channels=conv._in_channels,\n            out_channels=conv._out_channels,\n            kernel_size=conv._kernel_size,\n            stride=conv._stride,\n            padding=conv._padding,\n            groups=conv._groups,\n            bias_attr=True)\n        return new_conv\n\n    def last_stride_function(rep_block, pattern):\n        new_conv = RepDepthwiseSeparable(\n            in_channels=rep_block.in_channels,\n            out_channels=rep_block.out_channels,\n            stride=1,\n            dw_size=rep_block.dw_size,\n            split_pw=rep_block.split_pw,\n            use_rep=rep_block.use_rep,\n            use_se=rep_block.use_se,\n            use_shortcut=rep_block.use_shortcut)\n        return new_conv\n\n    pattern_act = [\"act\"]\n    pattern_lastconv = [\"last_conv\"]\n    pattern_last_stride = [\n        \"stages[3][0]\",\n        \"stages[3][1]\",\n    ]\n    model.upgrade_sublayer(pattern_act, remove_ReLU_function)\n    model.upgrade_sublayer(pattern_lastconv, add_bias_last_conv)\n    model.upgrade_sublayer(pattern_last_stride, last_stride_function)\n\n    # load params again after upgrade some layers\n    _load_pretrained(pretrained, model, MODEL_URLS[\"PPLCNetV2_base\"], use_ssld)\n    return model\n如题，上面做了三个操作，如果想把HGNet用于shitu，也需要进行上述的步骤吗？这三个步骤的目的分别是什么呢？",
        "state": "open",
        "user": "TyrionChou",
        "closed_by": null,
        "created_at": "2025-04-15T07:55:45+00:00",
        "updated_at": "2025-04-16T06:05:40+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3371,
        "title": "请问PaddleClas的开发RoadMap是怎么样的",
        "body": "感谢PPClas Repo开发人员，为社区贡献了很有用的开发包。\n但不清楚未来的开发计划是怎么样的？\n比如预训练open-clip系列其实提供了不少好的预训练模型，是否考虑引入到PaddleClas中来？\n又比如很多NPU其实不支持Paddle的定点训练出来的模型，这方面为落地带来了很多不便与性能下降，是否考虑引入更多的NPU厂商合作？\n再有蒸馏算法是否需要跟进最新的，基于Transformer蒸馏CNN的最佳实践示例训练方法是否考虑在PaddleClas中开发一下？\n\n开发不易，再次感谢官方开发组\n",
        "state": "closed",
        "user": "terrencew",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-15T03:31:44+00:00",
        "updated_at": "2025-05-20T03:06:33+00:00",
        "closed_at": "2025-05-20T03:06:30+00:00",
        "comments_count": [
            "zhang-prog",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3374,
        "title": "根据文档进行安装时，在模型快速体验环节，执行后爆找不到相关的inference.json文件",
        "body": "环境：\npaddlepaddle: 3.0\npython: 3.11\n\n在安装时，前面都没有报错，执行相关的验证语句都是正常的\n但在体验drink_dataset_v2.0项目时，执行以下语句后，就爆出图中错误：\n\npaddleclas --build_gallery=True --model_name=\"PP-ShiTuV2\" \\\n-o IndexProcess.image_root=./drink_dataset_v2.0/gallery/ \\\n-o IndexProcess.index_dir=./drink_dataset_v2.0/index \\\n-o IndexProcess.data_file=./drink_dataset_v2.0/gallery/drink_label.txt\n\n![Image](https://github.com/user-attachments/assets/c4a11f8c-c9eb-4914-93aa-a3c5bff3cb01)\n\n我去相关的下载目录中查看过，文件夹中只有inference.pdiparams和inference.pdiparams.info以及inference.pdimodel三个文件，并没有inference.json文件，如下图：\n\n![Image](https://github.com/user-attachments/assets/7c5fc8bb-2a05-46a0-8b3a-ae2a0071ac4d)\n\n",
        "state": "closed",
        "user": "NeTChengGH",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-17T02:24:29+00:00",
        "updated_at": "2025-05-14T09:12:30+00:00",
        "closed_at": "2025-05-14T09:02:18+00:00",
        "comments_count": [
            "arrywu",
            "nainai123",
            "NeTChengGH",
            "arrywu",
            "TingquanGao",
            "arrywu",
            "TingquanGao",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3379,
        "title": "为什么源码安装总是提示ModuleNotFoundError: No module named 'ppcls'",
        "body": "使用pip install -v -e . 命令安装paddleclas-2.6.0，安装成功后pip list中有paddleclas ，但是import paddleclas时会报ModuleNotFoundError: No module named 'ppcls'异常",
        "state": "closed",
        "user": "gokamisama",
        "closed_by": "TingquanGao",
        "created_at": "2025-05-08T08:17:02+00:00",
        "updated_at": "2025-06-25T07:04:16+00:00",
        "closed_at": "2025-06-25T03:08:11+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3375,
        "title": "数据集文档",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：\n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号，如Python3.6/7/8\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n",
        "state": "closed",
        "user": "Chinesejunzai",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-18T01:40:29+00:00",
        "updated_at": "2025-06-16T11:03:54+00:00",
        "closed_at": "2025-06-14T12:09:40+00:00",
        "comments_count": [
            "Chinesejunzai",
            "zhangyubo0722",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3376,
        "title": "使用自己的数据训练PULC 含文字图像方向分类模型模型，保存调用问题",
        "body": "欢迎您使用PaddleClas并反馈相关问题，非常感谢您对PaddleClas的贡献！\n提出issue时，辛苦您提供以下信息，方便我们快速定位问题并及时有效地解决您的问题：\n 1. PaddleClas版本以及PaddlePaddle版本：请您提供您使用的版本号或分支信息，如PaddleClas release/2.2和PaddlePaddle 2.1.0        paddleclas==2.6.0  paddlepaddle-gpu ==3.0.0\n 2. 涉及的其他产品使用的版本号：如您在使用PaddleClas的同时还在使用其他产品，如PaddleServing、PaddleInference等，请您提供其版本号\n 3. 训练环境信息：linux \n  a. 具体操作系统，如Linux/Windows/MacOS\n  b. Python版本号，如Python3.6/7/8      3.10\n  c. CUDA/cuDNN版本， 如CUDA10.2/cuDNN 7.6.5等    11.8\n 4. 完整的代码(相比于repo中代码，有改动的地方)、详细的错误信息及相关log\n 根据PULC_text_image_orientation.md文件来训练自己的模型\n# 全局配置\nGlobal:\n  checkpoints: null  # 训练过程中保存的检查点路径，null表示不加载已有检查点\n  pretrained_model: null  # 预训练模型路径，null表示不加载预训练模型\n  output_dir: ./output/PPcnet_x1_0/  # 输出文件夹路径，用于保存模型、日志等\n  device: gpu  # 训练设备，支持gpu或cpu\n  save_interval: 20  # 模型保存间隔（以epoch为单位）\n  eval_during_train: True  # 是否在训练过程中进行评估\n  eval_interval: 10  # 评估间隔（以epoch为单位）\n  epochs: 100  # 总训练轮数\n  print_batch_step: 10  # 每隔多少个batch打印一次日志\n  use_visualdl: False  # 是否使用VisualDL进行可视化\n  image_shape: [3, 1700, 1200]  # 输入图像的形状（通道数、高度、宽度）\n  save_inference_dir: ./output/PPcnet_x1_1/inference  # 保存推理模型的路径\n\n# 模型架构配置\nArch:\n  name: PPLCNet_x1_0  # 使用的模型名称\n  class_num: 4  # 分类类别数\n  pretrained: True  # 是否加载PaddleClas提供的预训练模型\n  use_ssld: True  # 是否使用SSLD（Semi-Supervised Learning Distillation）增强模型性能\n\n# 损失函数配置\nLoss:\n  Train:\n    - CELoss:  # 训练阶段使用交叉熵损失\n        weight: 1.0  # 损失权重\n        epsilon: 0.1  # Label smoothing参数\n  Eval:\n    - CELoss:  # 评估阶段使用交叉熵损失\n        weight: 1.0  # 损失权重\n\n# 优化器配置\nOptimizer:\n  name: Momentum  # 使用Momentum优化器\n  momentum: 0.9  # 动量参数\n  lr:  # 学习率调度策略\n    name: Cosine  # 使用余弦退火学习率\n    learning_rate: 0.001  # 初始学习率\n    warmup_epoch: 5  # 学习率预热的epoch数\n  regularizer:\n    name: 'L2'  # 使用L2正则化\n    coeff: 0.00003  # 正则化系数\n\n# 数据加载器配置\nDataLoader:\n  Train:  # 训练数据加载器\n    dataset:\n      name: ImageNetDataset  # 数据集名称\n      image_root: /home/yuzai/imageClass/PaddleClas/zlimages_class/  # 图像数据根目录\n      cls_label_path: /home/yuzai/imageClass/PaddleClas/zlimages_class/train.txt  # 训练数据标签文件路径\n      transform_ops:  # 数据增强操作\n        - DecodeImage:  # 解码图像\n            to_rgb: True  # 转换为RGB格式\n            channel_first: False  # 通道是否放在第一个维度\n        - RandCropImage:  # 随机裁剪图像\n            size: 224  # 裁剪后的图像大小\n        - TimmAutoAugment:  # 自动数据增强\n            prob: 0.0  # 应用增强的概率\n            config_str: rand-m9-mstd0.5-inc1  # 增强配置\n            interpolation: bicubic  # 插值方式\n            img_size: 224  # 图像大小\n        - NormalizeImage:  # 图像归一化\n            scale: 1.0/255.0  # 缩放因子\n            mean: [0.485, 0.456, 0.406]  # 均值\n            std: [0.229, 0.224, 0.225]  # 标准差\n            order: ''  # 通道顺序\n        - RandomErasing:  # 随机擦除\n            EPSILON: 0.0  # 概率\n            sl: 0.02  # 最小擦除面积比例\n            sh: 1.0/3.0  # 最大擦除面积比例\n            r1: 0.3  # 最小宽高比\n            attempt: 10  # 尝试次数\n            use_log_aspect: True  # 是否使用对数宽高比\n            mode: pixel  # 擦除模式\n    sampler:\n      name: DistributedBatchSampler  # 分布式采样器\n      batch_size: 64  # 每个batch的样本数\n      drop_last: False  # 是否丢弃最后一个不完整的batch\n      shuffle: True  # 是否打乱数据\n    loader:\n      num_workers: 8  # 数据加载线程数\n      use_shared_memory: True  # 是否使用共享内存\n\n  Eval:  # 评估数据加载器\n    dataset:\n      name: ImageNetDataset  # 数据集名称\n      image_root: /home/yuzai/imageClass/PaddleClas/zlimages_class/  # 图像数据根目录\n      cls_label_path: /home/yuzai/imageClass/PaddleClas/zlimages_class/val.txt  # 测试数据标签文件路径\n      transform_ops:  # 数据预处理操作\n        - DecodeImage:\n            to_rgb: True\n            channel_first: False\n        - ResizeImage:\n            resize_short: 256  # 短边调整到256\n        - CropImage:\n            size: 224  # 中心裁剪到224x224\n        - NormalizeImage:\n            scale: 1.0/255.0\n            mean: [0.485, 0.456, 0.406]\n            std: [0.229, 0.224, 0.225]\n            order: ''\n    sampler:\n      name: DistributedBatchSampler\n      batch_size: 64\n      drop_last: False\n      shuffle: False  # 不打乱数据\n    loader:\n      num_workers: 4\n      use_shared_memory: True\n\n# 推理配置\nInfer:\n  infer_imgs: /home/yuzai/imageClass/PaddleClas/deploy/images/PULC/text_image_orientation/img9_0_270_cw.jpg  # 推理图像路径\n  batch_size: 10  # 推理时的batch大小\n  transforms:  # 推理时的图像预处理\n    - DecodeImage:\n        to_rgb: True\n        channel_first: False\n    - ResizeImage:\n        resize_short: 256\n    - CropImage:\n        size: 224\n    - NormalizeImage:\n        scale: 1.0/255.0\n        mean: [0.485, 0.456, 0.406]\n        std: [0.229, 0.224, 0.225]\n        order: ''\n    - ToCHWImage:  # 转换为CHW格式\n  PostProcess:\n    name: Topk  # 后处理方法\n    topk: 1  # 输出前2个预测结果\n    class_id_map_file: ppcls/utils/PULC_label_list/text_image_orientation_label_list.txt  # 类别ID映射文件\n\n# 评估指标配置\nMetric:\n  Train:\n    - TopkAcc:  # 训练阶段的Top-k准确率\n        topk: [1, 2]  # 计算Top-1和Top-2准确率\n  Eval:\n    - TopkAcc:  # 评估阶段的Top-k准确率\n        topk: [1, 2]\n配置文件如上：\n问题1：官网给出的训练结果文件有三个分别为inference.pdiparams、inference.pdiparams.info、inference.pdmodel  我自己根据流程训练完毕只有一个inference.pdiparams（inference.json）\n问题2：在使用模型的调用脚本时\nfrom paddleclas import PaddleClas\nmodel = PaddleClas(model_name=\"text_image_orientation\",inference_model_dir=\"D:/Desktop/model/inference\")\nresult = model.predict(input_data=\"D:/Desktop/test_img/1.jpg\")\nprint(next(result))   发现没办法正产使用问题1中导出的模型，或者没有能正常调用best_model的脚本可以提供\n",
        "state": "closed",
        "user": "nainai123",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-21T07:56:55+00:00",
        "updated_at": "2025-05-27T03:06:59+00:00",
        "closed_at": "2025-05-27T03:06:56+00:00",
        "comments_count": [
            "liuhongen1234567",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3381,
        "title": "Pod failed,Container failed",
        "body": "训练模型 出现错误\n```\npython3 -m paddle.distributed.launch \\\n    --gpus=\"0,1,2,3\" \\\n    tools/train.py \\\n        -c ppcls/configs/ImageNet/PPLCNetV2/PPLCNetV2_base.yaml\n```\n\n```\nLAUNCH INFO 2025-05-14 10:11:15,889 -----------  Configuration  ----------------------\nLAUNCH INFO 2025-05-14 10:11:15,889 auto_parallel_config: None\nLAUNCH INFO 2025-05-14 10:11:15,889 auto_tuner_json: None\nLAUNCH INFO 2025-05-14 10:11:15,889 devices: 0\nLAUNCH INFO 2025-05-14 10:11:15,890 elastic_level: -1\nLAUNCH INFO 2025-05-14 10:11:15,890 elastic_timeout: 30\nLAUNCH INFO 2025-05-14 10:11:15,890 enable_gpu_log: True\nLAUNCH INFO 2025-05-14 10:11:15,891 gloo_port: 6767\nLAUNCH INFO 2025-05-14 10:11:15,891 host: None\nLAUNCH INFO 2025-05-14 10:11:15,891 ips: None\nLAUNCH INFO 2025-05-14 10:11:15,891 job_id: default\nLAUNCH INFO 2025-05-14 10:11:15,891 legacy: False\nLAUNCH INFO 2025-05-14 10:11:15,891 log_dir: log\nLAUNCH INFO 2025-05-14 10:11:15,891 log_level: INFO\nLAUNCH INFO 2025-05-14 10:11:15,891 log_overwrite: False\nLAUNCH INFO 2025-05-14 10:11:15,891 master: None\nLAUNCH INFO 2025-05-14 10:11:15,891 max_restart: 3\nLAUNCH INFO 2025-05-14 10:11:15,891 nnodes: 1\nLAUNCH INFO 2025-05-14 10:11:15,891 nproc_per_node: None\nLAUNCH INFO 2025-05-14 10:11:15,891 rank: -1\nLAUNCH INFO 2025-05-14 10:11:15,891 run_mode: collective\nLAUNCH INFO 2025-05-14 10:11:15,891 server_num: None\nLAUNCH INFO 2025-05-14 10:11:15,891 servers:\nLAUNCH INFO 2025-05-14 10:11:15,891 sort_ip: False\nLAUNCH INFO 2025-05-14 10:11:15,891 start_port: 6070\nLAUNCH INFO 2025-05-14 10:11:15,892 trainer_num: None\nLAUNCH INFO 2025-05-14 10:11:15,892 trainers:\nLAUNCH INFO 2025-05-14 10:11:15,892 training_script: tools/train.py\nLAUNCH INFO 2025-05-14 10:11:15,892 training_script_args: ['-c', 'ppcls/configs/ImageNet/PPLCNetV2/PPLCNetV2_base.yaml']\nLAUNCH INFO 2025-05-14 10:11:15,892 with_gloo: 1\nLAUNCH INFO 2025-05-14 10:11:15,893 --------------------------------------------------\nLAUNCH INFO 2025-05-14 10:11:15,894 Job: default, mode collective, replicas 1[1:1], elastic False\nLAUNCH INFO 2025-05-14 10:11:15,894 Run Pod: ellnfi, replicas 1, status ready\nLAUNCH INFO 2025-05-14 10:11:15,899 Watching Pod: ellnfi, replicas 1, status running\nLAUNCH WARNING 2025-05-14 10:11:15,988 save gpu info failed\n[2025/05/14 10:11:18] ppcls INFO:\n===========================================================\n==        PaddleClas is powered by PaddlePaddle !        ==\n===========================================================\n==                                                       ==\n==   For more info please go to the following website.   ==\n==                                                       ==\n==       https://github.com/PaddlePaddle/PaddleClas      ==\n===========================================================\n\n[2025/05/14 10:11:18] ppcls INFO: Global :\n[2025/05/14 10:11:18] ppcls INFO:     checkpoints : None\n[2025/05/14 10:11:18] ppcls INFO:     pretrained_model : None\n[2025/05/14 10:11:18] ppcls INFO:     output_dir : I:/output_dir/\n[2025/05/14 10:11:18] ppcls INFO:     device : gpu\n[2025/05/14 10:11:18] ppcls INFO:     save_interval : 1\n[2025/05/14 10:11:18] ppcls INFO:     eval_during_train : True\n[2025/05/14 10:11:18] ppcls INFO:     eval_interval : 1\n[2025/05/14 10:11:18] ppcls INFO:     epochs : 480\n[2025/05/14 10:11:18] ppcls INFO:     print_batch_step : 10\n[2025/05/14 10:11:18] ppcls INFO:     use_visualdl : False\n[2025/05/14 10:11:18] ppcls INFO:     image_shape : [3, 512, 512]\n[2025/05/14 10:11:18] ppcls INFO:     save_inference_dir : D:/save_inference_dir\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: AMP :\n[2025/05/14 10:11:18] ppcls INFO:     use_amp : False\n[2025/05/14 10:11:18] ppcls INFO:     use_fp16_test : False\n[2025/05/14 10:11:18] ppcls INFO:     scale_loss : 128.0\n[2025/05/14 10:11:18] ppcls INFO:     use_dynamic_loss_scaling : True\n[2025/05/14 10:11:18] ppcls INFO:     use_promote : False\n[2025/05/14 10:11:18] ppcls INFO:     level : O1\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: Arch :\n[2025/05/14 10:11:18] ppcls INFO:     name : PPLCNetV2_base\n[2025/05/14 10:11:18] ppcls INFO:     class_num : 1000\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: Loss :\n[2025/05/14 10:11:18] ppcls INFO:     Train :\n[2025/05/14 10:11:18] ppcls INFO:         CELoss :\n[2025/05/14 10:11:18] ppcls INFO:             weight : 1.0\n[2025/05/14 10:11:18] ppcls INFO:             epsilon : 0.1\n[2025/05/14 10:11:18] ppcls INFO:     Eval :\n[2025/05/14 10:11:18] ppcls INFO:         CELoss :\n[2025/05/14 10:11:18] ppcls INFO:             weight : 1.0\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: Optimizer :\n[2025/05/14 10:11:18] ppcls INFO:     name : Momentum\n[2025/05/14 10:11:18] ppcls INFO:     momentum : 0.9\n[2025/05/14 10:11:18] ppcls INFO:     lr :\n[2025/05/14 10:11:18] ppcls INFO:         name : Cosine\n[2025/05/14 10:11:18] ppcls INFO:         learning_rate : 0.8\n[2025/05/14 10:11:18] ppcls INFO:         warmup_epoch : 5\n[2025/05/14 10:11:18] ppcls INFO:     regularizer :\n[2025/05/14 10:11:18] ppcls INFO:         name : L2\n[2025/05/14 10:11:18] ppcls INFO:         coeff : 4e-05\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: DataLoader :\n[2025/05/14 10:11:18] ppcls INFO:     Train :\n[2025/05/14 10:11:18] ppcls INFO:         dataset :\n[2025/05/14 10:11:18] ppcls INFO:             name : MultiScaleDataset\n[2025/05/14 10:11:18] ppcls INFO:             image_root : D:/AI/\n[2025/05/14 10:11:18] ppcls INFO:             cls_label_path : D:/AI/train_list.txt\n[2025/05/14 10:11:18] ppcls INFO:             transform_ops :\n[2025/05/14 10:11:18] ppcls INFO:                 DecodeImage :\n[2025/05/14 10:11:18] ppcls INFO:                     to_rgb : True\n[2025/05/14 10:11:18] ppcls INFO:                     channel_first : False\n[2025/05/14 10:11:18] ppcls INFO:                 RandCropImage :\n[2025/05/14 10:11:18] ppcls INFO:                     size : 512\n[2025/05/14 10:11:18] ppcls INFO:                 RandFlipImage :\n[2025/05/14 10:11:18] ppcls INFO:                     flip_code : 1\n[2025/05/14 10:11:18] ppcls INFO:                 NormalizeImage :\n[2025/05/14 10:11:18] ppcls INFO:                     scale : 1.0/255.0\n[2025/05/14 10:11:18] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\n[2025/05/14 10:11:18] ppcls INFO:                     std : [0.229, 0.224, 0.225]\n[2025/05/14 10:11:18] ppcls INFO:                     order :\n[2025/05/14 10:11:18] ppcls INFO:         sampler :\n[2025/05/14 10:11:18] ppcls INFO:             name : MultiScaleSampler\n[2025/05/14 10:11:18] ppcls INFO:             scales : [160, 192, 224, 288, 320]\n[2025/05/14 10:11:18] ppcls INFO:             first_bs : 500\n[2025/05/14 10:11:18] ppcls INFO:             divided_factor : 32\n[2025/05/14 10:11:18] ppcls INFO:             is_training : True\n[2025/05/14 10:11:18] ppcls INFO:         loader :\n[2025/05/14 10:11:18] ppcls INFO:             num_workers : 4\n[2025/05/14 10:11:18] ppcls INFO:             use_shared_memory : True\n[2025/05/14 10:11:18] ppcls INFO:     Eval :\n[2025/05/14 10:11:18] ppcls INFO:         dataset :\n[2025/05/14 10:11:18] ppcls INFO:             name : ImageNetDataset\n[2025/05/14 10:11:18] ppcls INFO:             image_root : D:/AI/\n[2025/05/14 10:11:18] ppcls INFO:             cls_label_path : D:/AI/val_list.txt\n[2025/05/14 10:11:18] ppcls INFO:             transform_ops :\n[2025/05/14 10:11:18] ppcls INFO:                 DecodeImage :\n[2025/05/14 10:11:18] ppcls INFO:                     to_rgb : True\n[2025/05/14 10:11:18] ppcls INFO:                     channel_first : False\n[2025/05/14 10:11:18] ppcls INFO:                 ResizeImage :\n[2025/05/14 10:11:18] ppcls INFO:                     resize_short : 512\n[2025/05/14 10:11:18] ppcls INFO:                 CropImage :\n[2025/05/14 10:11:18] ppcls INFO:                     size : 512\n[2025/05/14 10:11:18] ppcls INFO:                 NormalizeImage :\n[2025/05/14 10:11:18] ppcls INFO:                     scale : 1.0/255.0\n[2025/05/14 10:11:18] ppcls INFO:                     mean : [0.485, 0.456, 0.406]\n[2025/05/14 10:11:18] ppcls INFO:                     std : [0.229, 0.224, 0.225]\n[2025/05/14 10:11:18] ppcls INFO:                     order :\n[2025/05/14 10:11:18] ppcls INFO:         sampler :\n[2025/05/14 10:11:18] ppcls INFO:             name : DistributedBatchSampler\n[2025/05/14 10:11:18] ppcls INFO:             batch_size : 64\n[2025/05/14 10:11:18] ppcls INFO:             drop_last : False\n[2025/05/14 10:11:18] ppcls INFO:             shuffle : False\n[2025/05/14 10:11:18] ppcls INFO:         loader :\n[2025/05/14 10:11:18] ppcls INFO:             num_workers : 4\n[2025/05/14 10:11:18] ppcls INFO:             use_shared_memory : True\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: Infer :\n[2025/05/14 10:11:18] ppcls INFO:     infer_imgs : D:/AI/1.jpg\n[2025/05/14 10:11:18] ppcls INFO:     batch_size : 10\n[2025/05/14 10:11:18] ppcls INFO:     transforms :\n[2025/05/14 10:11:18] ppcls INFO:         DecodeImage :\n[2025/05/14 10:11:18] ppcls INFO:             to_rgb : True\n[2025/05/14 10:11:18] ppcls INFO:             channel_first : False\n[2025/05/14 10:11:18] ppcls INFO:         ResizeImage :\n[2025/05/14 10:11:18] ppcls INFO:             resize_short : 512\n[2025/05/14 10:11:18] ppcls INFO:         CropImage :\n[2025/05/14 10:11:18] ppcls INFO:             size : 512\n[2025/05/14 10:11:18] ppcls INFO:         NormalizeImage :\n[2025/05/14 10:11:18] ppcls INFO:             scale : 1.0/255.0\n[2025/05/14 10:11:18] ppcls INFO:             mean : [0.485, 0.456, 0.406]\n[2025/05/14 10:11:18] ppcls INFO:             std : [0.229, 0.224, 0.225]\n[2025/05/14 10:11:18] ppcls INFO:             order :\n[2025/05/14 10:11:18] ppcls INFO:         ToCHWImage : None\n[2025/05/14 10:11:18] ppcls INFO:     PostProcess :\n[2025/05/14 10:11:18] ppcls INFO:         name : Topk\n[2025/05/14 10:11:18] ppcls INFO:         topk : 5\n[2025/05/14 10:11:18] ppcls INFO:         class_id_map_file : D:/AI/label_list.txt\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: Metric :\n[2025/05/14 10:11:18] ppcls INFO:     Train :\n[2025/05/14 10:11:18] ppcls INFO:         TopkAcc :\n[2025/05/14 10:11:18] ppcls INFO:             topk : [1, 5]\n[2025/05/14 10:11:18] ppcls INFO:     Eval :\n[2025/05/14 10:11:18] ppcls INFO:         TopkAcc :\n[2025/05/14 10:11:18] ppcls INFO:             topk : [1, 5]\n[2025/05/14 10:11:18] ppcls INFO: ------------------------------------------------------------\n[2025/05/14 10:11:18] ppcls INFO: profiler_options : None\n[2025/05/14 10:11:18] ppcls INFO: train with paddle 2.6.2 and device Place(gpu:0)\nTraceback (most recent call last):\n  File \"I:\\AI\\PaddleClas\\tools\\train.py\", line 52, in <module>\n    engine = Engine(config, mode=\"train\")\n  File \"I:\\AI\\PaddleClas\\ppcls\\engine\\engine.py\", line 140, in __init__\n    self.train_dataloader = build_dataloader(\n  File \"I:\\AI\\PaddleClas\\ppcls\\data\\__init__.py\", line 116, in build_dataloader\n    dataset = eval(dataset_name)(**config_dataset)\n  File \"I:\\AI\\PaddleClas\\ppcls\\data\\dataloader\\multi_scale_dataset.py\", line 54, in __init__\n    self._load_anno()\n  File \"I:\\AI\\PaddleClas\\ppcls\\data\\dataloader\\multi_scale_dataset.py\", line 71, in _load_anno\n    assert os.path.exists(self.images[-1])\nAssertionError\nLAUNCH INFO 2025-05-14 10:11:18,934 Pod failed\nLAUNCH ERROR 2025-05-14 10:11:18,934 Container failed !!!\n```",
        "state": "closed",
        "user": "monkeycc",
        "closed_by": "TingquanGao",
        "created_at": "2025-05-14T02:14:21+00:00",
        "updated_at": "2025-06-25T07:04:12+00:00",
        "closed_at": "2025-06-25T03:08:06+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3378,
        "title": "not sure what model I should use to finetune model of extracting features?",
        "body": "![Image](https://github.com/user-attachments/assets/9e5f018a-0c43-43f6-a615-7846031d22b8)\n这个模型名称是general_PPLCNetV2_base_pretrained_v1.0.pdparams  有400M。\n\n但是我使用 GeneralRecognitionV2_PPLCNetV2_base.yaml  训练的模型只有24M。\n\n另外训练是会加载 backbone： PPLCNetV2_base_ssld_pretrained.pdparams。 这个是27M， 是代码默认会加载的(如果没有则会下载)。\n\nPP-ShiTuV2_general_rec  这个预训练模型在哪里呢，应该是多大呢",
        "state": "closed",
        "user": "Zhang-O",
        "closed_by": "TingquanGao",
        "created_at": "2025-04-26T08:44:36+00:00",
        "updated_at": "2025-06-25T07:04:20+00:00",
        "closed_at": "2025-06-25T03:08:16+00:00",
        "comments_count": [
            "cuicheng01",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3382,
        "title": "PaddleClas2.6.0不能解析paddlepaddle-xpu3.0.0rc1",
        "body": "\nSuccessfully built d48185b99197\nSuccessfully tagged sda/aidemo-cv-clas-safety-helmet:v1.0.0\n[2025-05-16 14:44:02 +0800] [1] [INFO] Starting gunicorn 20.1.0\n[2025-05-16 14:44:02 +0800] [1] [INFO] Listening at: http://0.0.0.0:18102 (1)\n[2025-05-16 14:44:02 +0800] [1] [INFO] Using worker: sync\n[2025-05-16 14:44:02 +0800] [7] [INFO] Booting worker with pid: 7\nXCCL /usr/local/lib/python3.10/dist-packages/paddle/base/../libs/libbkcl.so loaded\n[14:44:03][d75ebd903901][7][WARN][BKCL][globals.cpp:182] xccl version: 91d64e4 [rdma] [BKCL-613 fix topo nic trunc] build data: Nov 26 2024 11:23:52\nWARNING: Logging before InitGoogleLogging() is written to STDERR\nW0516 14:44:03.111557     7 default_variables.cpp:95] Fail to fscanf: Success [0]\nHint: Your machine support AVX, but the installed paddlepaddle doesn't have avx core. Hence, no-avx core with worse performance will be imported.\nIf you like, you could reinstall paddlepaddle by 'python -m pip install --force-reinstall paddlepaddle-gpu[==version]' to get better performance.\nW0516 14:44:04.121692    74 default_variables.cpp:95] Fail to fscanf: Success [0]\n2025-05-16 14:44:04,292 - predict - INFO - PaddlePaddle running on: xpu:0\n[2025-05-16 14:44:04 ] [7] [ERROR] Exception in worker process\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/arbiter.py\", line 589, in spawn_worker\n    worker.init_process()\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/workers/base.py\", line 134, in init_process\n    self.load_wsgi()\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/workers/base.py\", line 146, in load_wsgi\n    self.wsgi = self.app.wsgi()\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/app/base.py\", line 67, in wsgi\n    self.callable = self.load()\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/app/wsgiapp.py\", line 58, in load\n    return self.load_wsgiapp()\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/app/wsgiapp.py\", line 48, in load_wsgiapp\n    return util.import_app(self.app_uri)\n  File \"/usr/local/lib/python3.10/dist-packages/gunicorn/util.py\", line 359, in import_app\n    mod = importlib.import_module(module)\n  File \"/usr/lib/python3.10/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\n  File \"/app/server.py\", line 138, in <module>\n    cls_predictor = ClsPredictor(config)\n  File \"/app/server.py\", line 40, in __init__\n    super().__init__(config[\"Global\"])\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/deploy/utils/predictor.py\", line 37, in __init__\n    self.predictor, self.config = self.create_paddle_predictor(\n  File \"/usr/local/lib/python3.10/dist-packages/paddleclas/deploy/utils/predictor.py\", line 60, in create_paddle_predictor\n    pd_version = 10 * pd_version + eval(v)\n  File \"<string>\", line 1, in <module>\nNameError: name 'rc1' is not defined",
        "state": "open",
        "user": "Hu99ming",
        "closed_by": null,
        "created_at": "2025-05-16T07:15:19+00:00",
        "updated_at": "2025-05-19T03:06:48+00:00",
        "closed_at": null,
        "comments_count": [
            "Hu99ming"
        ],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3385,
        "title": "如何自己创建推理ppshiut所用到的数据集",
        "body": null,
        "state": "open",
        "user": "whh123456789",
        "closed_by": null,
        "created_at": "2025-05-29T03:24:01+00:00",
        "updated_at": "2025-05-29T12:07:36+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3384,
        "title": "求把VMamba加进去",
        "body": "经常用AIStudio训练模型，主要是做分割任务，现在mamba用的比较多，但是没有paddle版本的代码和预训练权重希望能把VMamba加进去",
        "state": "closed",
        "user": "juncyan",
        "closed_by": "TingquanGao",
        "created_at": "2025-05-26T13:39:40+00:00",
        "updated_at": "2025-06-27T12:09:12+00:00",
        "closed_at": "2025-06-27T12:09:08+00:00",
        "comments_count": [
            "changdazhou",
            "TingquanGao"
        ],
        "labels": [
            "status/close"
        ]
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3386,
        "title": "Issue deploy to cpp",
        "body": "i want to implement paddleclas on c++, but have some problems. The version i am using now is paddlepaddle==2.5.1 (no gpu) and paddleclas last version, ubuntu 20.4. However when i run the notebook in the PaddleClas/deploy/cpp section it is not as i want. I have successfully built cmake and opencv. I am trying to build c++ paddle inference. So i use paddle Inference library build by wget https://paddle-inference-lib.bj.bcebos.com/2.1.1-gpu-cuda10.2-cudnn8.1-mkl-gcc8.2/paddle_inference.tgz,\n\ntar -xvf paddle_inference.tgz. Then i run sh tools/build.sh and it runs successfully. But I can't find the run.sh file as instructed to run the demo. There is no such file on the default PaddleClas either. The output of my model is different from paddleclas when I add some other output layers, so I want to use the modified paddleclas and not the original, hope everyone can help.\n",
        "state": "open",
        "user": "buiquanghai203",
        "closed_by": null,
        "created_at": "2025-05-29T09:46:34+00:00",
        "updated_at": "2025-05-29T12:07:33+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3387,
        "title": "如何加入技术交流群获得ppshitu推理所用的数据集",
        "body": null,
        "state": "open",
        "user": "whh123456789",
        "closed_by": null,
        "created_at": "2025-05-30T02:59:47+00:00",
        "updated_at": "2025-05-30T03:07:25+00:00",
        "closed_at": null,
        "comments_count": [],
        "labels": []
    },
    {
        "repo": "PaddlePaddle/PaddleClas",
        "number": 3390,
        "title": "PULC推理模型链接错误问题",
        "body": "PULC的清晰度评估模型或者图片方向预测模型，为什么下载下来后用来推理时都是分类鱼类的模型？\n\n[{'class_ids': [0, 1], 'scores': [0.99985, 0.00015], 'label_names': ['tench, Tinca tinca', 'goldfish, Carassius auratus'], 'filename': '/home/mi/mine/code/data_preprocessing/pulc_demo_imgs/clarity_assessment/clarity_demo.jpg'}]",
        "state": "open",
        "user": "jufengli",
        "closed_by": null,
        "created_at": "2025-07-01T01:56:41+00:00",
        "updated_at": "2025-07-04T03:12:55+00:00",
        "closed_at": null,
        "comments_count": [
            "zhangyubo0722",
            "jufengli",
            "zhangyubo0722",
            "jufengli"
        ],
        "labels": []
    }
]